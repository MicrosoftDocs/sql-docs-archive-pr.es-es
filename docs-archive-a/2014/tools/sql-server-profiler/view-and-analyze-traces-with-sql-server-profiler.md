---
title: Ver y analizar seguimientos con SQL Server Profiler | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: profiler
ms.topic: conceptual
helpviewer_keywords:
- Profiler [SQL Server Profiler], viewing traces
- SQL Server Profiler, viewing traces
- traces [SQL Server], viewing
- SQL Server Profiler, troubleshooting
- troubleshooting [SQL Server], traces
- events [SQL Server], finding inside trace
- Profiler [SQL Server Profiler], troubleshooting
- traces [SQL Server], events
ms.assetid: 17e821ca-a12e-4192-acc1-96765d9ae266
author: stevestein
ms.author: sstein
ms.openlocfilehash: b3e848fe9a07d838631eef1737c2a7679b67e649
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87670720"
---
# <a name="view-and-analyze-traces-with-sql-server-profiler"></a><span data-ttu-id="e3b97-102">Ver y analizar seguimientos con SQL Server Profiler</span><span class="sxs-lookup"><span data-stu-id="e3b97-102">View and Analyze Traces with SQL Server Profiler</span></span>
  <span data-ttu-id="e3b97-103">Utilice [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] para ver los datos de eventos capturados en un seguimiento.</span><span class="sxs-lookup"><span data-stu-id="e3b97-103">Use [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] to view captured event data in a trace.</span></span> [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="e3b97-104">muestra datos basados en propiedades de seguimiento definidas.</span><span class="sxs-lookup"><span data-stu-id="e3b97-104">displays data based on defined trace properties.</span></span> <span data-ttu-id="e3b97-105">Una manera de analizar datos del [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] consiste en copiarlos a otro programa, como [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] o el Asistente para la optimización del [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="e3b97-105">One way to analyze [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data is to copy the data to another program, such as [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor.</span></span> [!INCLUDE[ssDE](../../includes/ssde-md.md)] <span data-ttu-id="e3b97-106">El Asistente para la optimización puede usar un archivo de seguimiento que contenga lotes SQL y eventos RPC (llamada a procedimiento remoto) si el seguimiento incluye la columna de datos **Text** .</span><span class="sxs-lookup"><span data-stu-id="e3b97-106">Tuning Advisor can use a trace file that contains SQL batch and remote procedure call (RPC) events if the **Text** data column is included in the trace.</span></span> <span data-ttu-id="e3b97-107">Para asegurarse de que se capturan las columnas y los eventos correctos para su utilización con el Asistente para la optimización del [!INCLUDE[ssDE](../../includes/ssde-md.md)] , utilice la plantilla predefinida Tuning que se proporciona con el [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e3b97-107">To make sure that the correct events and columns are captured for use with [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor, use the predefined Tuning template that is supplied with [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span>  
  
 <span data-ttu-id="e3b97-108">Cuando abra un seguimiento mediante el [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], no es necesario que el archivo de seguimiento tenga la extensión de archivo .trc si se creó mediante el [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] o los procedimientos almacenados del sistema de Seguimiento de SQL.</span><span class="sxs-lookup"><span data-stu-id="e3b97-108">When you open a trace by using [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], the trace file does not need to have the .trc file extension if the file was created by either [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] or SQL Trace system stored procedures.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="e3b97-109">también puede leer archivos .log de Seguimiento de SQL y archivos de scripts SQL genéricos.</span><span class="sxs-lookup"><span data-stu-id="e3b97-109">can also read SQL Trace .log files and generic SQL script files.</span></span> <span data-ttu-id="e3b97-110">Si abre un archivo .log de Seguimiento de SQL que no tiene la extensión .log, por ejemplo, trace.txt, deberá especificar **SQLTrace_Log** como formato del archivo.</span><span class="sxs-lookup"><span data-stu-id="e3b97-110">When opening a SQL Trace .log file that does not have a .log file extension, such as trace.txt, specify **SQLTrace_Log** as the file format.</span></span>  
  
 <span data-ttu-id="e3b97-111">Puede configurar el formato de visualización de la fecha y hora del [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] como ayuda en el análisis de seguimientos.</span><span class="sxs-lookup"><span data-stu-id="e3b97-111">You can configure the [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] date and time display format to assist in trace analysis.</span></span>  
  
## <a name="troubleshooting-data"></a><span data-ttu-id="e3b97-112">Solución de problemas de los datos</span><span class="sxs-lookup"><span data-stu-id="e3b97-112">Troubleshooting Data</span></span>  
 <span data-ttu-id="e3b97-113">El [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]permite solucionar problemas de datos mediante la agrupación de seguimientos o archivos de seguimiento según las columnas de datos **Duration**, **CPU**, **Reads**o **Writes** .</span><span class="sxs-lookup"><span data-stu-id="e3b97-113">Using [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], you can troubleshoot data by grouping traces or trace files by the **Duration**, **CPU**, **Reads**, or **Writes** data columns.</span></span> <span data-ttu-id="e3b97-114">Algunos ejemplos son consultas que no se ejecutan satisfactoriamente o que tienen una cantidad excepcionalmente alta de lecturas lógicas.</span><span class="sxs-lookup"><span data-stu-id="e3b97-114">Examples of data you might troubleshoot are queries that perform poorly or that have exceptionally high numbers of logical read operations.</span></span>  
  
 <span data-ttu-id="e3b97-115">Puede buscar información adicional si guarda los seguimientos en tablas y utiliza [!INCLUDE[tsql](../../includes/tsql-md.md)] para realizar consultas en los datos de eventos.</span><span class="sxs-lookup"><span data-stu-id="e3b97-115">Additional information can be found by saving traces to tables and using [!INCLUDE[tsql](../../includes/tsql-md.md)] to query the event data.</span></span> <span data-ttu-id="e3b97-116">Por ejemplo, para determinar los eventos **SQL:BatchCompleted** con un tiempo de espera excesivo, ejecute lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="e3b97-116">For example, to determine which **SQL:BatchCompleted** events had excessive wait time, execute the following:</span></span>  
  
```  
SELECT  TextData, Duration, CPU  
FROM    trace_table_name  
WHERE   EventClass = 12 -- SQL:BatchCompleted events  
AND     CPU < (Duration * 1000)  
```  
  
> [!NOTE]  
>  <span data-ttu-id="e3b97-117">El servidor informa de la duración del evento en microsegundos (una millonésima parte de un segundo o 10<sup>-6</sup>segundos) y la cantidad de tiempo de CPU que usa el evento en milisegundos (una milésima de segundo o 10<sup>-3</sup>segundos).</span><span class="sxs-lookup"><span data-stu-id="e3b97-117">The server reports the duration of an event in microseconds (one millionth, or 10<sup>-6</sup>, of a second) and the amount of CPU time used by the event in milliseconds (one thousandth, or 10<sup>-3</sup>, of a second).</span></span> <span data-ttu-id="e3b97-118">La interfaz gráfica de usuario de [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] muestra la columna **Duración** en milisegundos de manera predeterminada, pero cuando se guarda un seguimiento en un archivo o en una tabla de base de datos, el valor de la columna **Duración** se escribe en microsegundos.</span><span class="sxs-lookup"><span data-stu-id="e3b97-118">The [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] graphical user interface displays the **Duration** column in milliseconds by default, but when a trace is saved to either a file or a database table, the **Duration** column value is written in microseconds.</span></span>  
  
## <a name="displaying-object-names-when-viewing-traces"></a><span data-ttu-id="e3b97-119">Mostrar nombres de objetos al ver seguimientos</span><span class="sxs-lookup"><span data-stu-id="e3b97-119">Displaying Object Names When Viewing Traces</span></span>  
 <span data-ttu-id="e3b97-120">Si quiere visualizar el nombre de un objeto en lugar de su identificador (**Object ID**), debe capturar las columnas de datos **Server Name** y **Database ID** junto con **Object Name** .</span><span class="sxs-lookup"><span data-stu-id="e3b97-120">If you wish to display the name of an object rather than the object identifier (**Object ID**), you must capture the **Server Name** and **Database ID** data columns along with the **Object Name** data column.</span></span>  
  
 <span data-ttu-id="e3b97-121">Si decide realizar una agrupación mediante la columna de datos **Object ID** , realícela primero mediante las columna de datos **Server Name** y **Database ID** , y luego mediante **Object ID** .</span><span class="sxs-lookup"><span data-stu-id="e3b97-121">If you choose to group by the **Object ID** data column, make sure you group by the **Server Name** and **Database ID** data columns first, and then by the **Object ID** data column.</span></span> <span data-ttu-id="e3b97-122">Del mismo modo, si decide realizar una agrupación mediante la columna de datos **Index ID** , realícela primero mediante las columna de datos **Server Name**, **Database ID**y **Object ID** , y luego mediante **Index ID** .</span><span class="sxs-lookup"><span data-stu-id="e3b97-122">Similarly, if you choose to group by the **Index ID** data column, make sure you group by the **Server Name**, **Database ID**, and **Object ID** data columns first, and then by the **Index ID** data columns.</span></span> <span data-ttu-id="e3b97-123">Es necesario que siga este orden ya que los Id. de objeto y de índice no son exclusivos entre servidores y bases de datos (ni entre objetos, en el caso de los Id. de índice).</span><span class="sxs-lookup"><span data-stu-id="e3b97-123">You must group in this order because object and index IDs are not unique among servers and databases (and among objects for index IDs).</span></span>  
  
## <a name="finding-specific-events-within-a-trace"></a><span data-ttu-id="e3b97-124">Buscar eventos específicos en un seguimiento</span><span class="sxs-lookup"><span data-stu-id="e3b97-124">Finding Specific Events Within a Trace</span></span>  
 <span data-ttu-id="e3b97-125">Para encontrar y agrupar eventos en un seguimiento, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="e3b97-125">To find and group events in a trace, follow these steps:</span></span>  
  
1.  <span data-ttu-id="e3b97-126">Cree el seguimiento.</span><span class="sxs-lookup"><span data-stu-id="e3b97-126">Create your trace.</span></span>  
  
    -   <span data-ttu-id="e3b97-127">Una vez definida, capture las columnas de datos **Event Class**, **ClientProcessID**y **Start Time** además de cualquier otra columna de datos que desee capturar.</span><span class="sxs-lookup"><span data-stu-id="e3b97-127">When defining the trace, capture the **Event Class**, **ClientProcessID**, and **Start Time** data columns in addition to any other data columns you want to capture.</span></span> <span data-ttu-id="e3b97-128">Para obtener más información, vea [Crear un seguimiento &#40;SQL Server Profiler&#41;](create-a-trace-sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="e3b97-128">For more information, see [Create a Trace &#40;SQL Server Profiler&#41;](create-a-trace-sql-server-profiler.md).</span></span>  
  
    -   <span data-ttu-id="e3b97-129">Agrupe los datos capturados por la columna de datos **Event Class**y capture el seguimiento en un archivo o una tabla.</span><span class="sxs-lookup"><span data-stu-id="e3b97-129">Group the captured data by the **Event Class**data column, and capture the trace to a file or table.</span></span> <span data-ttu-id="e3b97-130">Para agrupar los datos capturados, haga clic en la opción **Organizar columnas** de la pestaña **Selección de eventos** del cuadro de diálogo Propiedades de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="e3b97-130">To group the captured data, click **Organize Columns** on the **Events Selection** tab of the Trace Properties dialog box.</span></span> <span data-ttu-id="e3b97-131">Para obtener más información, vea [Organizar las columnas mostradas en un seguimiento &#40;SQL Server Profiler&#41;](organize-columns-displayed-in-a-trace-sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="e3b97-131">For more information, see [Organize Columns Displayed in a Trace &#40;SQL Server Profiler&#41;](organize-columns-displayed-in-a-trace-sql-server-profiler.md).</span></span>  
  
    -   <span data-ttu-id="e3b97-132">Inicie el seguimiento y deténgalo una vez pasado el tiempo apropiado o cuando se haya capturado el número de eventos.</span><span class="sxs-lookup"><span data-stu-id="e3b97-132">Start the trace and stop it after the appropriate time has passed or number of events have been captured.</span></span>  
  
2.  <span data-ttu-id="e3b97-133">Busque los eventos de destino.</span><span class="sxs-lookup"><span data-stu-id="e3b97-133">Find the target events.</span></span>  
  
    -   <span data-ttu-id="e3b97-134">Abra el archivo o la tabla de seguimiento y expanda el nodo de la clase de evento que desee, por ejemplo, **Deadlock Chain**.</span><span class="sxs-lookup"><span data-stu-id="e3b97-134">Open the trace file or table, and expand the node of the desired event class; for example, **Deadlock Chain**.</span></span> <span data-ttu-id="e3b97-135">Para obtener más información, vea [Abrir un archivo de seguimiento &#40;SQL Server Profiler&#41;](open-a-trace-file-sql-server-profiler.md) o el Asistente para la optimización del [Abrir una tabla de seguimiento &#40;SQL Server Profiler&#41;](open-a-trace-table-sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="e3b97-135">For more information, see [Open a Trace File &#40;SQL Server Profiler&#41;](open-a-trace-file-sql-server-profiler.md) or [Open a Trace Table &#40;SQL Server Profiler&#41;](open-a-trace-table-sql-server-profiler.md).</span></span>  
  
    -   <span data-ttu-id="e3b97-136">Busque en los datos de seguimiento hasta que encuentre los eventos que busca. Para facilitar la búsqueda, puede usar el comando **Buscar** del menú **Edición** de [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="e3b97-136">Search through the trace data until you find the events for which you are looking (use the **Find** command on the **Edit** menu of [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] to help you find values in the trace).</span></span> <span data-ttu-id="e3b97-137">Anote los valores de las columnas de datos **ClientProcessID** y **Start Time** correspondientes a los eventos de los que se realiza un seguimiento.</span><span class="sxs-lookup"><span data-stu-id="e3b97-137">Note the values in the **ClientProcessID** and **Start Time** data columns of the events you trace.</span></span>  
  
3.  <span data-ttu-id="e3b97-138">Muestre los eventos en el contexto.</span><span class="sxs-lookup"><span data-stu-id="e3b97-138">Display the events in context.</span></span>  
  
    -   <span data-ttu-id="e3b97-139">Muestre las propiedades del seguimiento y agrupe por la columna de datos **ClientProcessID**en lugar de **Event Class** .</span><span class="sxs-lookup"><span data-stu-id="e3b97-139">Display the trace properties, and group by the **ClientProcessID**data column rather than by the **Event Class** data column.</span></span>  
  
    -   <span data-ttu-id="e3b97-140">Expanda los nodos de cada Id. de proceso de cliente que desee ver.</span><span class="sxs-lookup"><span data-stu-id="e3b97-140">Expand the nodes of each client process ID you want to view.</span></span> <span data-ttu-id="e3b97-141">Realice una búsqueda manual en el seguimiento o utilice **Buscar** hasta que encuentre los valores de **Start Time**anotados anteriormente de los eventos de destino.</span><span class="sxs-lookup"><span data-stu-id="e3b97-141">Search through the trace manually, or use **Find** until you find the previously noted **Start Time**values of the target events.</span></span> <span data-ttu-id="e3b97-142">Los eventos se muestran en orden cronológico con los demás eventos que pertenecen a cada identificador de proceso de cliente seleccionado.</span><span class="sxs-lookup"><span data-stu-id="e3b97-142">The events are displayed in chronological order with the other events that belong to each selected client process ID.</span></span> <span data-ttu-id="e3b97-143">Por ejemplo, los eventos **Deadlock** y **Deadlock Chain**, capturados dentro del seguimiento, aparecen inmediatamente después de los eventos **SQL:BatchStarting**events within the expyed client process ID.</span><span class="sxs-lookup"><span data-stu-id="e3b97-143">For example, the **Deadlock** and **Deadlock Chain**events, captured within the trace, appear immediately after the **SQL:BatchStarting**events within the expanded client process ID.</span></span>  
  
 <span data-ttu-id="e3b97-144">La misma técnica se puede emplear para buscar cualquier evento agrupado.</span><span class="sxs-lookup"><span data-stu-id="e3b97-144">The same technique can be used to find any grouped events.</span></span> <span data-ttu-id="e3b97-145">Una vez que haya encontrado los eventos que busca, agrúpelos por **ClientProcessID**, **ApplicationName**u otra clase de eventos para ver la actividad relacionada en orden cronológico.</span><span class="sxs-lookup"><span data-stu-id="e3b97-145">Once you have found the events you seek, group them by **ClientProcessID**, **ApplicationName**, or another event class to view related activity in chronological order.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e3b97-146">Consulte también</span><span class="sxs-lookup"><span data-stu-id="e3b97-146">See Also</span></span>  
 <span data-ttu-id="e3b97-147">[Ver un seguimiento guardado &#40;Transact-SQL&#41;](../../relational-databases/sql-trace/view-a-saved-trace-transact-sql.md) </span><span class="sxs-lookup"><span data-stu-id="e3b97-147">[View a Saved Trace &#40;Transact-SQL&#41;](../../relational-databases/sql-trace/view-a-saved-trace-transact-sql.md) </span></span>  
 <span data-ttu-id="e3b97-148">[sys.fn_trace_getinfo &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/sys-fn-trace-getinfo-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="e3b97-148">[sys.fn_trace_getinfo &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/sys-fn-trace-getinfo-transact-sql) </span></span>  
 <span data-ttu-id="e3b97-149">[Ver información de un filtro &#40;SQL Server Profiler&#41;](view-filter-information-sql-server-profiler.md) </span><span class="sxs-lookup"><span data-stu-id="e3b97-149">[View Filter Information &#40;SQL Server Profiler&#41;](view-filter-information-sql-server-profiler.md) </span></span>  
 <span data-ttu-id="e3b97-150">[Ver información de un filtro &#40;Transact-SQL&#41;](../../relational-databases/sql-trace/view-filter-information-transact-sql.md) </span><span class="sxs-lookup"><span data-stu-id="e3b97-150">[View Filter Information &#40;Transact-SQL&#41;](../../relational-databases/sql-trace/view-filter-information-transact-sql.md) </span></span>  
 <span data-ttu-id="e3b97-151">[Abrir un archivo de seguimiento &#40;SQL Server Profiler&#41;](open-a-trace-file-sql-server-profiler.md) </span><span class="sxs-lookup"><span data-stu-id="e3b97-151">[Open a Trace File &#40;SQL Server Profiler&#41;](open-a-trace-file-sql-server-profiler.md) </span></span>  
 [<span data-ttu-id="e3b97-152">Abrir una tabla de seguimiento &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="e3b97-152">Open a Trace Table &#40;SQL Server Profiler&#41;</span></span>](open-a-trace-table-sql-server-profiler.md)  
  
  
