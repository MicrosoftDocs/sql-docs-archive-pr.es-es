---
title: Analizar interbloqueos con SQL Server Profiler | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: profiler
ms.topic: conceptual
helpviewer_keywords:
- process nodes [SQL Server Profiler]
- Profiler [SQL Server Profiler], deadlocks
- deadlocks [SQL Server], identifying cause
- resource nodes [SQL Server Profiler]
- graphs [SQL Server Profiler]
- SQL Server Profiler, deadlocks
- events [SQL Server], deadlocks
- edges [SQL Server Profiler]
ms.assetid: 72d6718f-501b-4ea6-b344-c0e653f19561
author: stevestein
ms.author: sstein
ms.openlocfilehash: 3414cda74d75dbacf10ed98b6fc6d50da2feaa18
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87743765"
---
# <a name="analyze-deadlocks-with-sql-server-profiler"></a><span data-ttu-id="af0cd-102">Analizar interbloqueos con SQL Server Profiler</span><span class="sxs-lookup"><span data-stu-id="af0cd-102">Analyze Deadlocks with SQL Server Profiler</span></span>
  <span data-ttu-id="af0cd-103">Use el [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] para identificar la causa de un interbloqueo.</span><span class="sxs-lookup"><span data-stu-id="af0cd-103">Use [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] to identify the cause of a deadlock.</span></span> <span data-ttu-id="af0cd-104">Un interbloqueo se produce cuando hay una dependencia cíclica entre dos o más subprocesos o procesos para algún conjunto de recursos en SQL Server.</span><span class="sxs-lookup"><span data-stu-id="af0cd-104">A deadlock occurs when there is a cyclic dependency between two or more threads, or processes, for some set of resources within SQL Server.</span></span> <span data-ttu-id="af0cd-105">El [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]le permite crear un seguimiento que registra, reproduce y muestra eventos de interbloqueo para su análisis.</span><span class="sxs-lookup"><span data-stu-id="af0cd-105">Using [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], you can create a trace that records, replays, and displays deadlock events for analysis.</span></span>  
  
 <span data-ttu-id="af0cd-106">Para realizar un seguimiento de los eventos de interbloqueo, agregue la clase de evento **Deadlock graph** a un seguimiento.</span><span class="sxs-lookup"><span data-stu-id="af0cd-106">To trace deadlock events, add the **Deadlock graph** event class to a trace.</span></span> <span data-ttu-id="af0cd-107">Esta clase de evento rellena la columna de datos **TextData** del seguimiento con datos XML acerca de los procesos y objetos implicados en el interbloqueo.</span><span class="sxs-lookup"><span data-stu-id="af0cd-107">This event class populates the **TextData** data column in the trace with XML data about the process and objects that are involved in the deadlock.</span></span> [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="af0cd-108">pueden extraer el documento XML a un archivo XML de interbloqueo (.xdl) que puede ver después en SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="af0cd-108">can extract the XML document to a deadlock XML (.xdl) file which you can view later in SQL Server Management Studio.</span></span> <span data-ttu-id="af0cd-109">Puede configurar el [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] para extraer eventos **Deadlock graph** en un solo archivo que contenga todos los eventos **Deadlock graph** o en archivos independientes.</span><span class="sxs-lookup"><span data-stu-id="af0cd-109">You can configure [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] to extract **Deadlock graph** events to a single file that contains all **Deadlock graph** events, or to separate files.</span></span> <span data-ttu-id="af0cd-110">Esta extracción se puede hacer de las siguientes formas:</span><span class="sxs-lookup"><span data-stu-id="af0cd-110">This extraction can be done in any of the following ways:</span></span>  
  
-   <span data-ttu-id="af0cd-111">Al configurar el seguimiento, mediante la pestaña **Configuración de extracción de eventos** . Tenga en cuenta que esta pestaña no aparece hasta que haya seleccionado el evento **Deadlock graph** en la pestaña **Selección de eventos** .</span><span class="sxs-lookup"><span data-stu-id="af0cd-111">At trace configuration time, using the **Events Extraction Settings** tab. Note that this tab does not appear until you select the **Deadlock graph** event on the **Events Selection** tab.</span></span>  
  
-   <span data-ttu-id="af0cd-112">Mediante la opción **Extraer eventos de SQL Server** del menú **Archivo** .</span><span class="sxs-lookup"><span data-stu-id="af0cd-112">Using the **Extract SQL Server Events** option on the **File** menu.</span></span>  
  
-   <span data-ttu-id="af0cd-113">También puede extraer y guardar eventos individuales al hacer clic con el botón derecho en un evento concreto y elegir **Extraer datos de evento**.</span><span class="sxs-lookup"><span data-stu-id="af0cd-113">Individual events can also be extracted and saved by right-clicking a specific event and choosing **Extract Event Data**.</span></span>  
  
## <a name="deadlock-graphs"></a><span data-ttu-id="af0cd-114">Gráficos de interbloqueo</span><span class="sxs-lookup"><span data-stu-id="af0cd-114">Deadlock Graphs</span></span>  
 [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="af0cd-115">y [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] usan un gráfico de espera de interbloqueo para describir un interbloqueo.</span><span class="sxs-lookup"><span data-stu-id="af0cd-115">and [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] use a deadlock wait-for graph to describe a deadlock.</span></span> <span data-ttu-id="af0cd-116">El gráfico de espera de interbloqueo contiene nodos de proceso, nodos de recurso y bordes que representan las relaciones entre los procesos y los recursos.</span><span class="sxs-lookup"><span data-stu-id="af0cd-116">The deadlock wait-for graph contains process nodes, resource nodes, and edges representing the relationships between the processes and the resources.</span></span> <span data-ttu-id="af0cd-117">Los componentes de los gráficos de espera se definen en la siguiente tabla:</span><span class="sxs-lookup"><span data-stu-id="af0cd-117">The components of wait-for graphs are defined in the following table:</span></span>  
  
 <span data-ttu-id="af0cd-118">Nodo de proceso</span><span class="sxs-lookup"><span data-stu-id="af0cd-118">Process node</span></span>  
 <span data-ttu-id="af0cd-119">Un subproceso que realiza una tarea; por ejemplo, INSERT, UPDATE o DELETE.</span><span class="sxs-lookup"><span data-stu-id="af0cd-119">A thread that performs a task; for example, INSERT, UPDATE, or DELETE.</span></span>  
  
 <span data-ttu-id="af0cd-120">Nodo de recurso</span><span class="sxs-lookup"><span data-stu-id="af0cd-120">Resource node</span></span>  
 <span data-ttu-id="af0cd-121">Un objeto de la base de datos; por ejemplo, una tabla, un índice o una fila.</span><span class="sxs-lookup"><span data-stu-id="af0cd-121">A database object; for example, a table, index, or row.</span></span>  
  
 <span data-ttu-id="af0cd-122">perimetral</span><span class="sxs-lookup"><span data-stu-id="af0cd-122">Edge</span></span>  
 <span data-ttu-id="af0cd-123">Una relación entre un proceso y un recurso.</span><span class="sxs-lookup"><span data-stu-id="af0cd-123">A relationship between a process and a resource.</span></span> <span data-ttu-id="af0cd-124">Un borde `request` se produce cuando un proceso espera un recurso.</span><span class="sxs-lookup"><span data-stu-id="af0cd-124">A `request` edge occurs when a process waits for a resource.</span></span> <span data-ttu-id="af0cd-125">Un borde `owner` se produce cuando un recurso espera un proceso.</span><span class="sxs-lookup"><span data-stu-id="af0cd-125">An `owner` edge occurs when a resource waits for a process.</span></span> <span data-ttu-id="af0cd-126">El modo de bloqueo se incluye en la descripción del borde.</span><span class="sxs-lookup"><span data-stu-id="af0cd-126">The lock mode is included in the edge description.</span></span> <span data-ttu-id="af0cd-127">Por ejemplo, **Modo: X**.</span><span class="sxs-lookup"><span data-stu-id="af0cd-127">For example, **Mode: X**.</span></span>  
  
## <a name="deadlock-process-node"></a><span data-ttu-id="af0cd-128">Nodo de proceso de interbloqueo</span><span class="sxs-lookup"><span data-stu-id="af0cd-128">Deadlock Process Node</span></span>  
 <span data-ttu-id="af0cd-129">En un gráfico de espera, el nodo de proceso contiene información acerca del proceso.</span><span class="sxs-lookup"><span data-stu-id="af0cd-129">In a wait-for graph, the process node contains information about the process.</span></span> <span data-ttu-id="af0cd-130">En la tabla siguiente se explican los componentes de un proceso.</span><span class="sxs-lookup"><span data-stu-id="af0cd-130">The following table explains the components of a process.</span></span>  
  
|<span data-ttu-id="af0cd-131">Componente</span><span class="sxs-lookup"><span data-stu-id="af0cd-131">Component</span></span>|<span data-ttu-id="af0cd-132">Definición</span><span class="sxs-lookup"><span data-stu-id="af0cd-132">Definition</span></span>|  
|---------------|----------------|  
|<span data-ttu-id="af0cd-133">Id. de proceso de servidor</span><span class="sxs-lookup"><span data-stu-id="af0cd-133">Server process Id</span></span>|<span data-ttu-id="af0cd-134">Identificador de proceso de servidor (SPID), un identificador asignado a un servidor para el proceso que posee el bloqueo.</span><span class="sxs-lookup"><span data-stu-id="af0cd-134">Server process identifier (SPID), a server assigned identifier for the process owning the lock.</span></span>|  
|<span data-ttu-id="af0cd-135">Id. de lote de servidores</span><span class="sxs-lookup"><span data-stu-id="af0cd-135">Server batch Id</span></span>|<span data-ttu-id="af0cd-136">Identificador de lote de servidores (SBID).</span><span class="sxs-lookup"><span data-stu-id="af0cd-136">Server batch identifier (SBID).</span></span>|  
|<span data-ttu-id="af0cd-137">Id. de contexto de ejecución</span><span class="sxs-lookup"><span data-stu-id="af0cd-137">Execution context Id</span></span>|<span data-ttu-id="af0cd-138">Identificador de contexto de ejecución (ECID).</span><span class="sxs-lookup"><span data-stu-id="af0cd-138">Execution context identifier (ECID).</span></span> <span data-ttu-id="af0cd-139">Id. de contexto de ejecución de un subproceso dado asociado con un SPID específico.</span><span class="sxs-lookup"><span data-stu-id="af0cd-139">The execution context ID of a given thread associated with a specific SPID.</span></span><br /><br /> <span data-ttu-id="af0cd-140">ECID = {0,1,2,3, *...n*}, donde 0 siempre representa el subproceso principal o primario, y {1,2,3, *...n*} representan los subprocesos secundarios.</span><span class="sxs-lookup"><span data-stu-id="af0cd-140">ECID = {0,1,2,3, *...n*}, where 0 always represents the main or parent thread, and {1,2,3, *...n*} represent the subthreads.</span></span>|  
|<span data-ttu-id="af0cd-141">Prioridad de interbloqueo</span><span class="sxs-lookup"><span data-stu-id="af0cd-141">Deadlock priority</span></span>|<span data-ttu-id="af0cd-142">Prioridad de interbloqueo del proceso.</span><span class="sxs-lookup"><span data-stu-id="af0cd-142">Deadlock priority for the process.</span></span> <span data-ttu-id="af0cd-143">Para obtener más información sobre los valores posibles, vea [SET DEADLOCK_PRIORITY &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-deadlock-priority-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="af0cd-143">For more information about possible values, see [SET DEADLOCK_PRIORITY &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-deadlock-priority-transact-sql).</span></span>|  
|<span data-ttu-id="af0cd-144">Registro utilizado</span><span class="sxs-lookup"><span data-stu-id="af0cd-144">Log Used</span></span>|<span data-ttu-id="af0cd-145">Cantidad de espacio del registro utilizado por el proceso.</span><span class="sxs-lookup"><span data-stu-id="af0cd-145">Amount of log space used by the process.</span></span>|  
|<span data-ttu-id="af0cd-146">Id. de propietario</span><span class="sxs-lookup"><span data-stu-id="af0cd-146">Owner Id</span></span>|<span data-ttu-id="af0cd-147">Id. de transacción de los procesos que están usando transacciones y que actualmente están esperando en un bloqueo.</span><span class="sxs-lookup"><span data-stu-id="af0cd-147">Transaction ID for the processes which are using transactions and currently waiting on a lock.</span></span>|  
|<span data-ttu-id="af0cd-148">Descriptor de transacción</span><span class="sxs-lookup"><span data-stu-id="af0cd-148">Transaction descriptor</span></span>|<span data-ttu-id="af0cd-149">Puntero al descriptor de transacción que describe el estado de la transacción.</span><span class="sxs-lookup"><span data-stu-id="af0cd-149">Pointer to the transaction descriptor that describes the state of the transaction.</span></span>|  
|<span data-ttu-id="af0cd-150">Búfer de entrada</span><span class="sxs-lookup"><span data-stu-id="af0cd-150">Input buffer</span></span>|<span data-ttu-id="af0cd-151">Búfer de entrada del proceso actual; define el tipo de evento y la instrucción que se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="af0cd-151">Input buffer of the current process, defines the type of event and the statement being executed.</span></span> <span data-ttu-id="af0cd-152">Los valores posibles son:</span><span class="sxs-lookup"><span data-stu-id="af0cd-152">Possible values include:</span></span><br /><br /> <span data-ttu-id="af0cd-153">**Lenguaje**</span><span class="sxs-lookup"><span data-stu-id="af0cd-153">**Language**</span></span><br /><br /> <span data-ttu-id="af0cd-154">**RPC**</span><span class="sxs-lookup"><span data-stu-id="af0cd-154">**RPC**</span></span><br /><br /> <span data-ttu-id="af0cd-155">**None**</span><span class="sxs-lookup"><span data-stu-id="af0cd-155">**None**</span></span>|  
|<span data-ttu-id="af0cd-156">.</span><span class="sxs-lookup"><span data-stu-id="af0cd-156">Statement</span></span>|<span data-ttu-id="af0cd-157">Tipo de instrucción.</span><span class="sxs-lookup"><span data-stu-id="af0cd-157">Type of statement.</span></span> <span data-ttu-id="af0cd-158">Los valores posibles son:</span><span class="sxs-lookup"><span data-stu-id="af0cd-158">Possible values are:</span></span><br /><br /> <span data-ttu-id="af0cd-159">**NOP**</span><span class="sxs-lookup"><span data-stu-id="af0cd-159">**NOP**</span></span><br /><br /> <span data-ttu-id="af0cd-160">**SELECT**</span><span class="sxs-lookup"><span data-stu-id="af0cd-160">**SELECT**</span></span><br /><br /> <span data-ttu-id="af0cd-161">**UPDATE**</span><span class="sxs-lookup"><span data-stu-id="af0cd-161">**UPDATE**</span></span><br /><br /> <span data-ttu-id="af0cd-162">**INSERT**</span><span class="sxs-lookup"><span data-stu-id="af0cd-162">**INSERT**</span></span><br /><br /> <span data-ttu-id="af0cd-163">**DELETE**</span><span class="sxs-lookup"><span data-stu-id="af0cd-163">**DELETE**</span></span><br /><br /> <span data-ttu-id="af0cd-164">**Unknown**</span><span class="sxs-lookup"><span data-stu-id="af0cd-164">**Unknown**</span></span>|  
  
## <a name="deadlock-resource-node"></a><span data-ttu-id="af0cd-165">Nodo de recurso de interbloqueo</span><span class="sxs-lookup"><span data-stu-id="af0cd-165">Deadlock Resource Node</span></span>  
 <span data-ttu-id="af0cd-166">En un interbloqueo, dos procesos están esperando un recurso retenido por el otro recurso.</span><span class="sxs-lookup"><span data-stu-id="af0cd-166">In a deadlock, two processes are each waiting for a resource held by the other process.</span></span> <span data-ttu-id="af0cd-167">En un gráfico de interbloqueo, los recursos se muestran como nodos de recursos.</span><span class="sxs-lookup"><span data-stu-id="af0cd-167">In a deadlock graph, the resources are displayed as resource nodes.</span></span>  
  
  
