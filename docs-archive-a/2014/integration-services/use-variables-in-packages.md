---
title: Usar variables en paquetes | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- user-defined variables [Integration Services]
- variables [Integration Services], use scenarios
- system variables [Integration Services]
ms.assetid: 7742e92d-46c5-4cc4-b9a3-45b688ddb787
author: chugugrace
ms.author: chugu
ms.openlocfilehash: acfb6813406bd3a143712e40ec510a4658d4e5da
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87669733"
---
# <a name="use-variables-in-packages"></a><span data-ttu-id="bc399-102">Usar variables en paquetes</span><span class="sxs-lookup"><span data-stu-id="bc399-102">Use Variables in Packages</span></span>
  <span data-ttu-id="bc399-103">Las variables son una adición útil y flexible para los paquetes de [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] ; las variables pueden permitir la comunicación entre los objetos del paquete, y entre los paquetes primarios y secundarios.</span><span class="sxs-lookup"><span data-stu-id="bc399-103">Variables are a useful and flexible addition to [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] packages; they can provide communication among objects in the package, and between parent and child packages.</span></span> <span data-ttu-id="bc399-104">También se pueden utiliza variables en expresiones y scripts.</span><span class="sxs-lookup"><span data-stu-id="bc399-104">Variables can also be used in expressions and scripts.</span></span>  
  
## <a name="user-defined-variables-and-system-variables"></a><span data-ttu-id="bc399-105">Variables del sistema y definidas por el usuario</span><span class="sxs-lookup"><span data-stu-id="bc399-105">User-Defined Variables and System Variables</span></span>  
 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] <span data-ttu-id="bc399-106">proporciona variables del sistema y admite las variables definidas por el usuario.</span><span class="sxs-lookup"><span data-stu-id="bc399-106">provides system variables and supports user-defined variables.</span></span> <span data-ttu-id="bc399-107">Al crear un paquete y agregar un contenedor o una tarea a un paquete, o crear un controlador de eventos, [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] incluye un conjunto de variables del sistema para el contenedor.</span><span class="sxs-lookup"><span data-stu-id="bc399-107">When you create a new package, add a container or a task to a package, or create an event handler, [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] includes a set of system variables for the container.</span></span> <span data-ttu-id="bc399-108">Las variables del sistema contienen información útil sobre el paquete, el contenedor, la tarea o el controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="bc399-108">System variables contain useful information about a package, container, task, or event handler.</span></span> <span data-ttu-id="bc399-109">Por ejemplo, en tiempo de ejecución, la variable del sistema **MachineName** contiene el nombre del equipo en el que se ejecuta el paquete y la variable **StartTime** , la hora a la que se empezó a ejecutar el paquete.</span><span class="sxs-lookup"><span data-stu-id="bc399-109">For example, at run time the **MachineName** system variable contains the name of the computer on which the package is running and **StartTime** the time the package started to run.</span></span> <span data-ttu-id="bc399-110">Las variables del sistema son de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="bc399-110">System variables are read-only.</span></span> <span data-ttu-id="bc399-111">Para más información, consulte [System Variables](system-variables.md).</span><span class="sxs-lookup"><span data-stu-id="bc399-111">For more information, see [System Variables](system-variables.md).</span></span>  
  
 <span data-ttu-id="bc399-112">Puede crear variables definidas por el usuario y utilizarlas en los paquetes.</span><span class="sxs-lookup"><span data-stu-id="bc399-112">You can create user-defined variables and then use them in packages.</span></span> <span data-ttu-id="bc399-113">Las variables definidas por el usuario se pueden usar de muchas formas en [!INCLUDE[ssIS](../includes/ssis-md.md)]: en scripts, en las expresiones usadas por las restricciones de precedencia, el contenedor de bucles For, la transformación Columna derivada y la transformación División condicional, y en las expresiones de propiedad que actualizan los valores de las propiedades.</span><span class="sxs-lookup"><span data-stu-id="bc399-113">User-defined variables can be used in many ways in [!INCLUDE[ssIS](../includes/ssis-md.md)]: in scripts; in the expressions used by precedence constraints, the For Loop container, the Derived Column transformation, and the Conditional Split transformation; and in the property expressions that update property values.</span></span>  
  
 <span data-ttu-id="bc399-114">Por ejemplo, puede utilizar una variable definida por el usuario en la condición de evaluación del contenedor de bucles For.</span><span class="sxs-lookup"><span data-stu-id="bc399-114">For example, you can use a user-defined variable in the evaluation condition for the For Loop container.</span></span> <span data-ttu-id="bc399-115">También puede asignar el valor de colección del enumerador de un contenedor de bucles Foreach a una variable y, si una tarea Ejecutar SQL utiliza una instrucción SQL con parámetros, puede asignar los parámetros de la instrucción a variables.</span><span class="sxs-lookup"><span data-stu-id="bc399-115">You can also map the enumerator collection value in a Foreach Loop container to a variable, and if an Execute SQL task uses a parameterized SQL statement, you can map the parameters for the statement to variables.</span></span> <span data-ttu-id="bc399-116">Para más información, vea [Variables de Integration Services &#40;SSIS&#41;](integration-services-ssis-variables.md).</span><span class="sxs-lookup"><span data-stu-id="bc399-116">For more information, see [Integration Services &#40;SSIS&#41; Variables](integration-services-ssis-variables.md).</span></span>  
  
## <a name="variables-usage-scenarios"></a><span data-ttu-id="bc399-117">Escenarios del uso de variables</span><span class="sxs-lookup"><span data-stu-id="bc399-117">Variables Usage Scenarios</span></span>  
 <span data-ttu-id="bc399-118">Las variables se usan de muchas formas distintas en los paquetes de [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="bc399-118">Variables are used in many different ways in [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] packages.</span></span> <span data-ttu-id="bc399-119">Es probable que observe que el desarrollo de un paquete no avanza mucho antes de que tenga que agregar al paquete una variable definida por el usuario para lograr la flexibilidad y facilidad de uso que requiere la solución.</span><span class="sxs-lookup"><span data-stu-id="bc399-119">You will probably find that package development does not progress far before you have to add a user-defined variable to your package to implement the flexibility and manageability your solution requires.</span></span> <span data-ttu-id="bc399-120">Según el escenario de que se trate, las variables del sistema también se usan a menudo.</span><span class="sxs-lookup"><span data-stu-id="bc399-120">Depending on the scenario, system variables are also commonly used.</span></span>  
  
 <span data-ttu-id="bc399-121">**Expresiones de propiedad** Use variables para proporcionar valores en las expresiones de propiedad que definen las propiedades de los paquetes y los objetos de paquete.</span><span class="sxs-lookup"><span data-stu-id="bc399-121">**Property Expressions** Use variables to provide values in the property expressions that set the properties of packages and package objects.</span></span> <span data-ttu-id="bc399-122">Por ejemplo, la expresión `SELECT * FROM @varTableName` contiene la variable `varTableName` , que actualiza la instrucción SQL ejecutada por la tarea Ejecutar SQL.</span><span class="sxs-lookup"><span data-stu-id="bc399-122">For example, the expression, `SELECT * FROM @varTableName` includes the variable `varTableName` that updates the SQL statement that an Execute SQL task runs.</span></span> <span data-ttu-id="bc399-123">La expresión `DATEPART("d", GETDATE()) == 1? @[User::varPackageFirst]:@[User::varPackageOther]`actualiza el paquete ejecutado por la tarea Ejecutar paquete, mediante la ejecución del paquete especificado en la variable `varPackageFirst` el primer día de cada mes y la ejecución del paquete especificado en la variable `varPackageOther` los demás días.</span><span class="sxs-lookup"><span data-stu-id="bc399-123">The expression, `DATEPART("d", GETDATE()) == 1? @[User::varPackageFirst]:@[User::varPackageOther]`", updates the package that the Execute Package task runs, by running the package specified in the `varPackageFirst` variable on the first day of the month and running the package specified in the `varPackageOther` variable on other days.</span></span> <span data-ttu-id="bc399-124">Para más información, vea [Usar expresiones de propiedad en paquetes](expressions/use-property-expressions-in-packages.md).</span><span class="sxs-lookup"><span data-stu-id="bc399-124">For more information, see [Use Property Expressions in Packages](expressions/use-property-expressions-in-packages.md).</span></span>  
  
 <span data-ttu-id="bc399-125">**Expresiones de flujo de datos** Use variables para proporcionar los valores de las expresiones utilizadas por las transformaciones Columna derivada y División condicional para llenar columnas o dirigir filas de datos a distintas salidas de transformación.</span><span class="sxs-lookup"><span data-stu-id="bc399-125">**Data Flow Expressions** Use variables to provide values in the expressions that the Derived Column and Conditional Split transformations use to populate columns, or to direct data rows to different transformation outputs.</span></span> <span data-ttu-id="bc399-126">Por ejemplo, la expresión `@varSalutation + LastName`concatena el valor de la variable `VarSalutation` y el de la columna `LastName` .</span><span class="sxs-lookup"><span data-stu-id="bc399-126">For example, the expression, `@varSalutation + LastName`, concatenates the value in the `VarSalutation` variable and the `LastName` column.</span></span> <span data-ttu-id="bc399-127">La expresión `Income < @HighIncome`dirige a un resultado las filas de datos cuyo valor de la columna `Income` es menor que el valor de la variable `HighIncome` .</span><span class="sxs-lookup"><span data-stu-id="bc399-127">The expression, `Income < @HighIncome`, directs data rows in which the value of the `Income` column is less than the value in the `HighIncome` variable to an output.</span></span> <span data-ttu-id="bc399-128">Para obtener más información, vea [Transformación Columna derivada](data-flow/transformations/derived-column-transformation.md), [Transformación División condicional](data-flow/transformations/conditional-split-transformation.md) y [Expresiones de Integration Services &#40;SSIS&#41;](expressions/integration-services-ssis-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="bc399-128">For more information, see [Derived Column Transformation](data-flow/transformations/derived-column-transformation.md), [Conditional Split Transformation](data-flow/transformations/conditional-split-transformation.md), and [Integration Services &#40;SSIS&#41; Expressions](expressions/integration-services-ssis-expressions.md).</span></span>  
  
 <span data-ttu-id="bc399-129">**Expresiones de restricción de precedencia** Se deben proporcionar valores para su uso en restricciones de precedencia para determinar si se ejecuta el ejecutable restringido.</span><span class="sxs-lookup"><span data-stu-id="bc399-129">**Precedence Constraint Expressions** Provide values to use in precedence constraints to determine whether a constrained executable runs.</span></span> <span data-ttu-id="bc399-130">Las expresiones se pueden usar con un resultado de la ejecución (satisfactoria, errónea, terminada), o en lugar de un resultado de la ejecución.</span><span class="sxs-lookup"><span data-stu-id="bc399-130">The expressions can be used either together with an execution outcome (success, failure, completion), or instead of an execution outcome.</span></span> <span data-ttu-id="bc399-131">Por ejemplo, si la expresión `@varMax > @varMin` resulta en el valor `true`, se ejecuta el ejecutable.</span><span class="sxs-lookup"><span data-stu-id="bc399-131">For example, if the expression, `@varMax > @varMin`, evaluates to `true`, the executable runs.</span></span> <span data-ttu-id="bc399-132">Para obtener más información, vea [Agregar expresiones a las restricciones de precedencia](control-flow/precedence-constraints.md).</span><span class="sxs-lookup"><span data-stu-id="bc399-132">For more information, see [Add Expressions to Precedence Constraints](control-flow/precedence-constraints.md).</span></span>  
  
 <span data-ttu-id="bc399-133">**Parámetros y códigos de retorno** Se deben proporcionar valores para los parámetros de entrada, o almacenar los valores de los parámetros de salida y los códigos de retorno.</span><span class="sxs-lookup"><span data-stu-id="bc399-133">**Parameters and Return Codes** Provide values to input parameters, or store the values of output parameters and return codes.</span></span> <span data-ttu-id="bc399-134">Para ello, se asignan las variables a los parámetros y códigos de retorno.</span><span class="sxs-lookup"><span data-stu-id="bc399-134">You do this by mapping the variables to parameters and return values.</span></span> <span data-ttu-id="bc399-135">Por ejemplo, si se establece la variable `varProductId` en 23 y se ejecuta la instrucción SQL `SELECT * from Production.Product WHERE ProductID = ?`, la consulta recupera el producto cuyo `ProductID` sea 23.</span><span class="sxs-lookup"><span data-stu-id="bc399-135">For example, if you set the variable `varProductId` to 23 and run the SQL statement, `SELECT * from Production.Product WHERE ProductID = ?`, the query retrieves the product with a `ProductID` of 23.</span></span> <span data-ttu-id="bc399-136">Para más información, vea [Tarea Ejecutar SQL](control-flow/execute-sql-task.md) y [Parámetros y códigos de retorno en la tarea Ejecutar SQL](../../2014/integration-services/parameters-and-return-codes-in-the-execute-sql-task.md).</span><span class="sxs-lookup"><span data-stu-id="bc399-136">For more information, see [Execute SQL Task](control-flow/execute-sql-task.md) and [Parameters and Return Codes in the Execute SQL Task](../../2014/integration-services/parameters-and-return-codes-in-the-execute-sql-task.md).</span></span>  
  
 <span data-ttu-id="bc399-137">**Expresiones del bucle For** Se deben proporcionar valores para su uso en las expresiones de inicialización, evaluación y asignación del bucle For.</span><span class="sxs-lookup"><span data-stu-id="bc399-137">**For Loop Expressions** Provide values to use in the initialization, evaluation, and assignment expressions of the For Loop.</span></span> <span data-ttu-id="bc399-138">Por ejemplo, si la variable `varCount` es 2 y `varMaxCount` es 10, la expresión de inicialización es `@varCount`, la expresión de evaluación es  `@varCount < @varMaxCount`y la expresión de asignación es `@varCount =@varCount +1`, el bucle se repite 8 veces.</span><span class="sxs-lookup"><span data-stu-id="bc399-138">For example, if the variable `varCount` is 2 and `varMaxCount` is 10, the initialization expression is `@varCount`, the evaluation expression is  `@varCount < @varMaxCount`, and the assignment expression is `@varCount =@varCount +1`, then the loop repeats 8 times.</span></span> <span data-ttu-id="bc399-139">Para más información, vea [Contenedor de bucles For](control-flow/for-loop-container.md).</span><span class="sxs-lookup"><span data-stu-id="bc399-139">For more information, see [For Loop Container](control-flow/for-loop-container.md).</span></span>  
  
 <span data-ttu-id="bc399-140">**Configuraciones de variables de paquete primario** Los valores de los paquetes primarios se deben pasar a los paquetes secundarios.</span><span class="sxs-lookup"><span data-stu-id="bc399-140">**Parent Package Variable Configurations** Pass values from parent packages to child packages.</span></span> <span data-ttu-id="bc399-141">Los paquetes secundarios pueden tener acceso a las variables del paquete primario utilizando configuraciones de variables de paquete primario.</span><span class="sxs-lookup"><span data-stu-id="bc399-141">Child packages can access variables in the parent package by using parent package variable configurations.</span></span> <span data-ttu-id="bc399-142">Por ejemplo, si el paquete secundario debe usar los mismos datos que el paquete primario, el secundario puede definir una configuración de variables de paquete primario que especifique una variable establecida por la función GETDATE en el paquete primario.</span><span class="sxs-lookup"><span data-stu-id="bc399-142">For example, if the child package must use the same date as the parent package, the child package can define a parent package variable configuration that specifies a variable set by the GETDATE function in the parent package.</span></span> <span data-ttu-id="bc399-143">Para obtener más información, consulte [Execute Package Task](control-flow/execute-package-task.md) y [Package Configurations](../../2014/integration-services/package-configurations.md).</span><span class="sxs-lookup"><span data-stu-id="bc399-143">For more information, see [Execute Package Task](control-flow/execute-package-task.md) and [Package Configurations](../../2014/integration-services/package-configurations.md).</span></span>  
  
 <span data-ttu-id="bc399-144">**Tarea Script y componente de script** Se debe proporcionar a la tarea Script o al componente de script una lista de variables de solo lectura o lectura/escritura, actualizar las variables de lectura/escritura del script y, después, usar los valores actualizados dentro o fuera del script.</span><span class="sxs-lookup"><span data-stu-id="bc399-144">**Script Task and Script Component** Provide a list of read-only and read/write variable to the Script task or Script component, update the read/write variables within the script, and then use the updated values in or outside the script.</span></span> <span data-ttu-id="bc399-145">Por ejemplo, en el código `numberOfCars = CType(Dts.Variables("NumberOfCars").Value, Integer)`, la variable de script `numberOfCars` se actualiza con el valor de la variable `NumberOfCars`.</span><span class="sxs-lookup"><span data-stu-id="bc399-145">For example, in the code, `numberOfCars = CType(Dts.Variables("NumberOfCars").Value, Integer)`, the script variable `numberOfCars` is updated by the value in the variable, `NumberOfCars`.</span></span> <span data-ttu-id="bc399-146">Para más información, consulte [Using Variables in the Script Task](control-flow/script-task.md).</span><span class="sxs-lookup"><span data-stu-id="bc399-146">For more information, see [Using Variables in the Script Task](control-flow/script-task.md).</span></span>  
  
## <a name="configurations-and-variables"></a><span data-ttu-id="bc399-147">Configuraciones y variables</span><span class="sxs-lookup"><span data-stu-id="bc399-147">Configurations and Variables</span></span>  
 <span data-ttu-id="bc399-148">Para actualizar dinámicamente las variables, puede crear configuraciones para las variables, implementar las configuraciones con el paquete y después, actualizar los valores de las variables en el archivo de configuración al implementar los paquetes.</span><span class="sxs-lookup"><span data-stu-id="bc399-148">To dynamically update variables, you can create configurations for the variables, deploy the configurations with the package, and then update the variable values in the configuration file when you deploy the packages.</span></span> <span data-ttu-id="bc399-149">El paquete utiliza los valores actualizados de las variables en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="bc399-149">At run time, the package uses the updated variable values.</span></span> <span data-ttu-id="bc399-150">Para obtener más información, vea [Crear configuraciones de paquetes](../../2014/integration-services/create-package-configurations.md).</span><span class="sxs-lookup"><span data-stu-id="bc399-150">For more information, see [Create Package Configurations](../../2014/integration-services/create-package-configurations.md).</span></span>  
  
### <a name="to-add-modify-and-delete-user-defined-variables"></a><span data-ttu-id="bc399-151">Para agregar, modificar y eliminar variables definidas por el usuario</span><span class="sxs-lookup"><span data-stu-id="bc399-151">To add, modify, and delete user-defined variables</span></span>  
  
-   [<span data-ttu-id="bc399-152">Agregar, eliminar, cambiar el ámbito de la variable definida por el usuario en un paquete</span><span class="sxs-lookup"><span data-stu-id="bc399-152">Add, Delete, Change Scope of User-Defined Variable in a Package</span></span>](../../2014/integration-services/add-delete-change-scope-of-user-defined-variable-in-a-package.md)  
  
-   [<span data-ttu-id="bc399-153">Establecer las propiedades de una variable definida por el usuario</span><span class="sxs-lookup"><span data-stu-id="bc399-153">Set the Properties of a User-Defined Variable</span></span>](../../2014/integration-services/set-the-properties-of-a-user-defined-variable.md)  
  
  
