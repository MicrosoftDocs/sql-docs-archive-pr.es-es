---
title: Reiniciar paquetes usando puntos de comprobación | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- checkpoints [Integration Services]
- restarting packages
- starting packages
ms.assetid: 48f2fbb7-8964-484a-8311-5126cf594bfb
author: chugugrace
ms.author: chugu
ms.openlocfilehash: aa0e0e9ad1da67bfc70dec61396ab026df62d3ee
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87674185"
---
# <a name="restart-packages-by-using-checkpoints"></a><span data-ttu-id="7f209-102">Reiniciar paquetes de usando puntos de comprobación</span><span class="sxs-lookup"><span data-stu-id="7f209-102">Restart Packages by Using Checkpoints</span></span>
  [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="7f209-103">puede reiniciar los paquetes con errores desde el punto del error, en lugar de volver a ejecutar todo el paquete.</span><span class="sxs-lookup"><span data-stu-id="7f209-103">can restart failed packages from the point of failure, instead of rerunning the whole package.</span></span> <span data-ttu-id="7f209-104">Si se configura un paquete para que utilice puntos de comprobación, la información relacionada con la ejecución del paquete se escribirá en un archivo de punto de comprobación.</span><span class="sxs-lookup"><span data-stu-id="7f209-104">If a package is configured to use checkpoints, information about package execution is written to a checkpoint file.</span></span> <span data-ttu-id="7f209-105">Cuando se vuelve a ejecutar el paquete con error, se utiliza el archivo de punto de comprobación para reiniciar el paquete desde el punto del error.</span><span class="sxs-lookup"><span data-stu-id="7f209-105">When the failed package is rerun, the checkpoint file is used to restart the package from the point of failure.</span></span> <span data-ttu-id="7f209-106">Si el paquete se ejecuta correctamente, el archivo de punto de comprobación se elimina y se vuelve a crear la siguiente vez que se ejecuta el paquete.</span><span class="sxs-lookup"><span data-stu-id="7f209-106">If the package runs successfully, the checkpoint file is deleted, and then re-created the next time the package is run.</span></span>  
  
 <span data-ttu-id="7f209-107">El uso de puntos de comprobación en un paquete puede proporcionar las siguientes ventajas.</span><span class="sxs-lookup"><span data-stu-id="7f209-107">Using checkpoints in a package can provide the following benefits.</span></span>  
  
-   <span data-ttu-id="7f209-108">Evita que se repita la descarga y la carga de archivos grandes.</span><span class="sxs-lookup"><span data-stu-id="7f209-108">Avoid repeating the downloading and uploading of large files.</span></span> <span data-ttu-id="7f209-109">Por ejemplo, un paquete que descarga varios archivos grandes mediante una tarea de FTP para cada descarga, se puede reiniciar cuando la descarga de un solo archivo genera un error y, a continuación, descargar únicamente ese archivo.</span><span class="sxs-lookup"><span data-stu-id="7f209-109">For example, a package that downloads multiple large files by using an FTP task for each download can be restarted after the downloading of a single file fails and then download only that file.</span></span>  
  
-   <span data-ttu-id="7f209-110">Evita repetir la carga de grandes cantidades de datos.</span><span class="sxs-lookup"><span data-stu-id="7f209-110">Avoid repeating the loading of large amounts of data.</span></span> <span data-ttu-id="7f209-111">Por ejemplo, un paquete que realiza inserciones masivas en tablas de dimensiones de un almacenamiento de datos, utilizando una tarea Inserción masiva para cada dimensión, se puede reiniciar si la inserción genera un error para una tabla de dimensión y, en ese caso, solo se volverá a cargar esa dimensión.</span><span class="sxs-lookup"><span data-stu-id="7f209-111">For example, a package that performs bulk inserts into dimension tables in a data warehouse using a different Bulk Insert task for each dimension can be restarted if the insertion fails for one dimension table, and only that dimension will be reloaded.</span></span>  
  
-   <span data-ttu-id="7f209-112">Evita repetir la agregación de valores.</span><span class="sxs-lookup"><span data-stu-id="7f209-112">Avoid repeating the aggregation of values.</span></span> <span data-ttu-id="7f209-113">Por ejemplo, un paquete que calcula muchos agregados, como promedios y sumas, utilizando una tarea Flujo de datos para realizar cada agregación, se puede reiniciar cuando el cálculo de una agregación genera un error, y solo se vuelve a calcular esa agregación.</span><span class="sxs-lookup"><span data-stu-id="7f209-113">For example, a package that computes many aggregates, such as averages and sums, using a separate Data Flow task to perform each aggregation, can be restarted after computing an aggregation fails and only that aggregation will be recomputed.</span></span>  
  
 <span data-ttu-id="7f209-114">Si un paquete está configurado para utilizar puntos de comprobación, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] captura el punto de reinicio del archivo de punto de comprobación.</span><span class="sxs-lookup"><span data-stu-id="7f209-114">If a package is configured to use checkpoints, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] captures the restart point in the checkpoint file.</span></span> <span data-ttu-id="7f209-115">El tipo de contenedor que genera el error y la implementación de características como las transacciones afectan al punto de reinicio que se registra en el archivo de punto de comprobación.</span><span class="sxs-lookup"><span data-stu-id="7f209-115">The type of container that fails and the implementation of features such as transactions affect the restart point that is recorded in the checkpoint file.</span></span> <span data-ttu-id="7f209-116">Los valores actuales de variables se capturan también en el archivo de punto de comprobación.</span><span class="sxs-lookup"><span data-stu-id="7f209-116">The current values of variables are also captured in the checkpoint file.</span></span> <span data-ttu-id="7f209-117">Sin embargo, los valores de variables que tienen el tipo de datos `Object` no se guardan en los archivos de punto de comprobación.</span><span class="sxs-lookup"><span data-stu-id="7f209-117">However, the values of variables that have the `Object` data type are not saved in checkpoint files.</span></span>  
  
## <a name="defining-restart-points"></a><span data-ttu-id="7f209-118">Definir puntos de reinicio</span><span class="sxs-lookup"><span data-stu-id="7f209-118">Defining Restart Points</span></span>  
 <span data-ttu-id="7f209-119">El contenedor host de la tarea, que encapsula una sola tarea, es la unidad atómica de trabajo más pequeña que se puede reiniciar.</span><span class="sxs-lookup"><span data-stu-id="7f209-119">The task host container, which encapsulates a single task, is the smallest atomic unit of work that can be restarted.</span></span> <span data-ttu-id="7f209-120">El contenedor de bucles Foreach y un contenedor de transacción también se tratan como unidades atómicas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="7f209-120">The Foreach Loop container and a transacted container are also treated as atomic units of work.</span></span>  
  
 <span data-ttu-id="7f209-121">Si se detiene un paquete mientras se está ejecutando un contenedor de transacción, la transacción finaliza y se revierte todo el trabajo realizado por el contenedor.</span><span class="sxs-lookup"><span data-stu-id="7f209-121">If a package is stopped while a transacted container is running, the transaction ends and any work performed by the container is rolled back.</span></span> <span data-ttu-id="7f209-122">Cuando se reinicia el paquete, se vuelve a ejecutar el contenedor que generó el error.</span><span class="sxs-lookup"><span data-stu-id="7f209-122">When the package is restarted, the container that failed is rerun.</span></span> <span data-ttu-id="7f209-123">La finalización de los contenedores secundarios del contenedor de transacción no se registra en el archivo de punto de comprobación.</span><span class="sxs-lookup"><span data-stu-id="7f209-123">The completion of any child containers of transacted container is not recorded in the checkpoint file.</span></span> <span data-ttu-id="7f209-124">Por lo tanto, cuando se reinicia el paquete, se vuelve a ejecutar el contenedor de transacción con todos sus contenedores secundarios.</span><span class="sxs-lookup"><span data-stu-id="7f209-124">Therefore, when the package is restarted, the transacted container and its child containers run again.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7f209-125">Utilizar puntos de comprobación y transacciones en el mismo paquete podría producir resultados inesperados.</span><span class="sxs-lookup"><span data-stu-id="7f209-125">Using checkpoints and transactions in the same package could cause unexpected results.</span></span> <span data-ttu-id="7f209-126">Por ejemplo, cuando un paquete genera un error y se reinicia desde un punto de comprobación, podría repetir una transacción que ya se ha confirmado correctamente.</span><span class="sxs-lookup"><span data-stu-id="7f209-126">For example, when a package fails and restarts from a checkpoint, the package might repeat a transaction that has already been successfully committed.</span></span>  
  
 <span data-ttu-id="7f209-127">Los datos de punto de comprobación no se guardan para los contenedores de bucles For y Foreach.</span><span class="sxs-lookup"><span data-stu-id="7f209-127">Checkpoint data is not saved for For Loop and Foreach Loop containers.</span></span> <span data-ttu-id="7f209-128">Cuando se reinicia un paquete, se vuelven a ejecutar el contenedor de bucles For y Foreach y sus contenedores secundarios.</span><span class="sxs-lookup"><span data-stu-id="7f209-128">When a package is restarted, the For Loop and Foreach Loop containers and the child containers are run again.</span></span> <span data-ttu-id="7f209-129">Si un contenedor secundario en el bucle se ejecuta correctamente, no se graba en el archivo de punto de comprobación sino que se vuelve a ejecutar.</span><span class="sxs-lookup"><span data-stu-id="7f209-129">If a child container in the loop runs successfully, it is not recorded in the checkpoint file, instead it is rerun.</span></span> <span data-ttu-id="7f209-130">Para obtener más información y solucionar este problema, vea [Los puntos de comprobación de SSIS no se respetan para los elementos de contenedor de bucles For y Foreach](https://go.microsoft.com/fwlink/?LinkId=241633).</span><span class="sxs-lookup"><span data-stu-id="7f209-130">For more information and a workaround, see [SSIS Checkpoints are not honored for For Loop or Foreach Loop container items](https://go.microsoft.com/fwlink/?LinkId=241633).</span></span>  
  
 <span data-ttu-id="7f209-131">Si se reinicia el paquete, las configuraciones de paquetes no se vuelven a cargar sino que se utiliza la información de configuración escrita en el archivo de punto de comprobación.</span><span class="sxs-lookup"><span data-stu-id="7f209-131">If the package is restarted the package configurations are not reloaded, instead the package uses the configuration information written to the checkpoint file.</span></span> <span data-ttu-id="7f209-132">Esto asegura que, el paquete utilice las mismas configuraciones cuando se vuelva a ejecutar que cuando sufrió el error.</span><span class="sxs-lookup"><span data-stu-id="7f209-132">This ensures that the package uses the same configurations when it is rerun as the time it failed.</span></span>  
  
 <span data-ttu-id="7f209-133">Un paquete solamente se puede reiniciar en el nivel de flujo de control.</span><span class="sxs-lookup"><span data-stu-id="7f209-133">A package can be restarted only at the control flow level.</span></span> <span data-ttu-id="7f209-134">No puede reiniciar un paquete a mitad de un flujo de datos.</span><span class="sxs-lookup"><span data-stu-id="7f209-134">You cannot restart a package in the middle of a data flow.</span></span> <span data-ttu-id="7f209-135">Para evitar volver a ejecutar el flujo de datos entero, el paquete podría estar diseñado para incluir varios flujos de datos, cada uno utilizando una tarea Flujo de datos diferente.</span><span class="sxs-lookup"><span data-stu-id="7f209-135">To avoid rerunning the whole data flow, the package might be designed to include multiple data flows, each one using a different Data Flow task.</span></span> <span data-ttu-id="7f209-136">Esta manera que se puede reiniciar el paquete, volviendo a ejecutar solo una tarea Flujo de datos.</span><span class="sxs-lookup"><span data-stu-id="7f209-136">This way the package can be restarted, rerunning only one Data Flow task.</span></span>  
  
## <a name="configuring-a-package-to-restart"></a><span data-ttu-id="7f209-137">Configurar un paquete para que se reinicie</span><span class="sxs-lookup"><span data-stu-id="7f209-137">Configuring a Package to Restart</span></span>  
 <span data-ttu-id="7f209-138">El archivo de punto de comprobación incluye los resultados de ejecución de todos los contenedores completados, los valores actuales de las variables del sistema y las definidas por el usuario, y la información de configuración de paquetes.</span><span class="sxs-lookup"><span data-stu-id="7f209-138">The checkpoint file includes the execution results of all completed containers, the current values of system and user-defined variables, and package configuration information.</span></span> <span data-ttu-id="7f209-139">El archivo también incluye el identificador único del paquete.</span><span class="sxs-lookup"><span data-stu-id="7f209-139">The file also includes the unique identifier of the package.</span></span> <span data-ttu-id="7f209-140">Para reiniciar correctamente un paquete, el identificador del paquete en el archivo de punto de comprobación y el paquete deben coincidir; de lo contrario, no se podrá reiniciar.</span><span class="sxs-lookup"><span data-stu-id="7f209-140">To successfully restart a package, the package identifier in the checkpoint file and the package must match; otherwise the restart fails.</span></span> <span data-ttu-id="7f209-141">Esto evita que un paquete utilice un archivo de punto de comprobación escrito por una versión distinta del paquete.</span><span class="sxs-lookup"><span data-stu-id="7f209-141">This prevents a package from using a checkpoint file written by a different package version.</span></span> <span data-ttu-id="7f209-142">Si el paquete se ejecuta correctamente, el archivo de punto de comprobación se elimina después de reiniciar el paquete.</span><span class="sxs-lookup"><span data-stu-id="7f209-142">If the package runs successfully, after it is restarted the checkpoint file is deleted.</span></span>  
  
 <span data-ttu-id="7f209-143">En la tabla siguiente se muestran las propiedades del paquete establecidas para implementar puntos de comprobación.</span><span class="sxs-lookup"><span data-stu-id="7f209-143">The following table lists the package properties that you set to implement checkpoints.</span></span>  
  
|<span data-ttu-id="7f209-144">Propiedad</span><span class="sxs-lookup"><span data-stu-id="7f209-144">Property</span></span>|<span data-ttu-id="7f209-145">Descripción</span><span class="sxs-lookup"><span data-stu-id="7f209-145">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="7f209-146">CheckpointFileName</span><span class="sxs-lookup"><span data-stu-id="7f209-146">CheckpointFileName</span></span>|<span data-ttu-id="7f209-147">Especifica el nombre del archivo de punto de comprobación.</span><span class="sxs-lookup"><span data-stu-id="7f209-147">Specifies the name of the checkpoint file.</span></span>|  
|<span data-ttu-id="7f209-148">CheckpointUsage</span><span class="sxs-lookup"><span data-stu-id="7f209-148">CheckpointUsage</span></span>|<span data-ttu-id="7f209-149">Especifica si se utilizarán puntos de comprobación.</span><span class="sxs-lookup"><span data-stu-id="7f209-149">Specifies whether checkpoints are used.</span></span>|  
|<span data-ttu-id="7f209-150">SaveCheckpoints</span><span class="sxs-lookup"><span data-stu-id="7f209-150">SaveCheckpoints</span></span>|<span data-ttu-id="7f209-151">Indica si el paquete guarda puntos de comprobación.</span><span class="sxs-lookup"><span data-stu-id="7f209-151">Indicates whether the package saves checkpoints.</span></span> <span data-ttu-id="7f209-152">Esta propiedad debe estar establecida en True para poder reiniciar un paquete desde el punto del error.</span><span class="sxs-lookup"><span data-stu-id="7f209-152">This property must be set to True to restart a package from a point of failure.</span></span>|  
  
 <span data-ttu-id="7f209-153">Además, debe establecer la propiedad FailPackageOnFailure en `true` para todos los contenedores del paquete que desea identificar como puntos de reinicio.</span><span class="sxs-lookup"><span data-stu-id="7f209-153">Additionally, you must set the FailPackageOnFailure property to `true` for all the containers in the package that you want to identify as restart points.</span></span>  
  
 <span data-ttu-id="7f209-154">Puede usar la propiedad ForceExecutionResult para probar el uso de los puntos de comprobación de un paquete.</span><span class="sxs-lookup"><span data-stu-id="7f209-154">You can use the ForceExecutionResult property to test the use of checkpoints in a package.</span></span> <span data-ttu-id="7f209-155">Si establece ForceExecutionResult de una tarea o un contenedor en Error, puede simular un error en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="7f209-155">By setting ForceExecutionResult of a task or container to Failure, you can imitate real-time failure.</span></span> <span data-ttu-id="7f209-156">Al volver a ejecutar el paquete, se volverá a ejecutar la tarea que generó el error y los contenedores.</span><span class="sxs-lookup"><span data-stu-id="7f209-156">When you rerun the package, the failed task and containers will be rerun.</span></span>  
  
### <a name="checkpoint-usage"></a><span data-ttu-id="7f209-157">Usar puntos de comprobación</span><span class="sxs-lookup"><span data-stu-id="7f209-157">Checkpoint Usage</span></span>  
 <span data-ttu-id="7f209-158">La propiedad CheckpointUsage se puede establecer en los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="7f209-158">The CheckpointUsage property can be set to the following values:</span></span>  
  
|<span data-ttu-id="7f209-159">Value</span><span class="sxs-lookup"><span data-stu-id="7f209-159">Value</span></span>|<span data-ttu-id="7f209-160">Descripción</span><span class="sxs-lookup"><span data-stu-id="7f209-160">Description</span></span>|  
|-----------|-----------------|  
|`Never`|<span data-ttu-id="7f209-161">Especifica que no se utilizará el archivo de punto de comprobación y que el paquete se ejecutará desde el inicio del flujo de trabajo del paquete.</span><span class="sxs-lookup"><span data-stu-id="7f209-161">Specifies that the checkpoint file is not used and that the package runs from the start of the package workflow.</span></span>|  
|`Always`|<span data-ttu-id="7f209-162">Especifica que el archivo de punto de comprobación se utilizará siempre y que el paquete se reinicia desde el punto del error de ejecución anterior.</span><span class="sxs-lookup"><span data-stu-id="7f209-162">Specifies that the checkpoint file is always used and that the package restarts from the point of the previous execution failure.</span></span> <span data-ttu-id="7f209-163">Si no se encuentra el archivo de punto de comprobación, el paquete generará un error.</span><span class="sxs-lookup"><span data-stu-id="7f209-163">If the checkpoint file is not found, the package fails.</span></span>|  
|`IfExists`|<span data-ttu-id="7f209-164">Especifica que se utilizará el archivo de punto de comprobación, si existe.</span><span class="sxs-lookup"><span data-stu-id="7f209-164">Specifies that the checkpoint file is used if it exists.</span></span> <span data-ttu-id="7f209-165">Si existe un archivo de punto de comprobación, el paquete se reiniciará desde el punto del error de ejecución anterior; de lo contrario, se ejecutará desde el inicio del flujo de trabajo del paquete.</span><span class="sxs-lookup"><span data-stu-id="7f209-165">If the checkpoint file exists, the package restarts from the point of the previous execution failure; otherwise, it runs from the start of the package workflow.</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="7f209-166">La opción **/Checkpointing on on** de DTExec es equivalente a establecer la `SaveCheckpoints` propiedad del paquete en `True` y la `CheckpointUsage` propiedad en Always.</span><span class="sxs-lookup"><span data-stu-id="7f209-166">The **/CheckPointing on** option of dtexec is equivalent to setting the `SaveCheckpoints` property of the package to `True`, and the `CheckpointUsage` property to Always.</span></span> <span data-ttu-id="7f209-167">Para obtener más información, consulte [utilidad dtexec](dtexec-utility.md).</span><span class="sxs-lookup"><span data-stu-id="7f209-167">For more information, see [dtexec Utility](dtexec-utility.md).</span></span>  
  
## <a name="securing-checkpoint-files"></a><span data-ttu-id="7f209-168">Proteger archivos de puntos de comprobación</span><span class="sxs-lookup"><span data-stu-id="7f209-168">Securing Checkpoint Files</span></span>  
 <span data-ttu-id="7f209-169">El nivel de protección de paquetes no incluye la protección de archivos de puntos de comprobación; estos archivos se deben proteger por separado.</span><span class="sxs-lookup"><span data-stu-id="7f209-169">Package level protection does not include protection of checkpoint files and you must secure these files separately.</span></span> <span data-ttu-id="7f209-170">Solo puede almacenar datos de puntos de comprobación en el sistema de archivos y debe utilizar una lista de control de acceso (ACL) al sistema operativo para proteger la ubicación o carpeta en la que ha almacenado el archivo.</span><span class="sxs-lookup"><span data-stu-id="7f209-170">Checkpoint data can be stored only in the file system and you should use an operating system access control list (ACL) to secure the location or folder where you store the file.</span></span> <span data-ttu-id="7f209-171">Es importante proteger los archivos de puntos de comprobación, dado que contienen información sobre el estado del paquete, incluidos los valores actuales de las variables.</span><span class="sxs-lookup"><span data-stu-id="7f209-171">It is important to secure checkpoint files because they contain information about the package state, including the current values of variables.</span></span> <span data-ttu-id="7f209-172">Por ejemplo, una variable puede contener un conjunto de registros con varias filas de datos privados, tales como números de teléfono.</span><span class="sxs-lookup"><span data-stu-id="7f209-172">For example, a variable may contain a recordset with many rows of private data such as telephone numbers.</span></span> <span data-ttu-id="7f209-173">Para más información, vea [Acceso a los archivos usados por los paquetes](../access-to-files-used-by-packages.md).</span><span class="sxs-lookup"><span data-stu-id="7f209-173">For more information, see [Access to Files Used by Packages](../access-to-files-used-by-packages.md).</span></span>  
  
### <a name="to-configure-the-checkpoint-properties"></a><span data-ttu-id="7f209-174">Para configurar las propiedades del punto de comprobación</span><span class="sxs-lookup"><span data-stu-id="7f209-174">To configure the checkpoint properties</span></span>  
  
-   [<span data-ttu-id="7f209-175">Configurar puntos de comprobación para reiniciar un paquete con error</span><span class="sxs-lookup"><span data-stu-id="7f209-175">Configure Checkpoints for Restarting a Failed Package</span></span>](../configure-checkpoints-for-restarting-a-failed-package.md)  
  
## <a name="external-resources"></a><span data-ttu-id="7f209-176">Recursos externos</span><span class="sxs-lookup"><span data-stu-id="7f209-176">External Resources</span></span>  
  
-   <span data-ttu-id="7f209-177">El artículo técnico sobre el [reinicio automático de paquetes SSIS tras una conmutación por error o un error](https://go.microsoft.com/fwlink/?LinkId=200407), en social.technet.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="7f209-177">Technical article, [Automatic Restart of SSIS packages after Failover or Failure](https://go.microsoft.com/fwlink/?LinkId=200407), on social.technet.microsoft.com</span></span>  
  
-   <span data-ttu-id="7f209-178">El artículo de soporte técnico, [Los puntos de comprobación de SSIS no se respetan para los elementos de contenedor de bucles For y Foreach](https://go.microsoft.com/fwlink/?LinkId=241633), en support.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="7f209-178">Support article, [SSIS Checkpoints are not honored for For Loop or Foreach Loop container items](https://go.microsoft.com/fwlink/?LinkId=241633), on support.microsoft.com.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7f209-179">Consulte también</span><span class="sxs-lookup"><span data-stu-id="7f209-179">See Also</span></span>  
 [<span data-ttu-id="7f209-180">SQL Server Integration Services</span><span class="sxs-lookup"><span data-stu-id="7f209-180">SQL Server Integration Services</span></span>](../sql-server-integration-services.md)  
  
  
