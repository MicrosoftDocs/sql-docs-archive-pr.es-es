---
title: Implementar la seguridad del Agente SQL Server | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Agent, security
- security [SQL Server Agent], about security
- security [SQL Server Agent]
- security [SQL Server], SQL Server Agent
ms.assetid: d770d35c-c8de-4e00-9a85-7d03f45a0f0d
author: stevestein
ms.author: sstein
ms.openlocfilehash: 8b70449ace66d4e33a547eca1c0b19eafabde5a7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87745633"
---
# <a name="implement-sql-server-agent-security"></a><span data-ttu-id="988d0-102">Implementar la seguridad del Agente SQL Server</span><span class="sxs-lookup"><span data-stu-id="988d0-102">Implement SQL Server Agent Security</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="988d0-103">El Agente le permite al administrador de la base de datos ejecutar cada paso de trabajo en un contexto seguro que solo tiene los permisos necesarios para realizar ese paso de trabajo, que está determinado por un servidor proxy del Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="988d0-103">Agent lets the database administrator run each job step in a security context that has only the permissions required to perform that job step, which is determined by a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent proxy.</span></span> <span data-ttu-id="988d0-104">Para establecer los permisos para un paso de trabajo concreto, cree un proxy que disponga de los permisos necesarios y, a continuación, asigne ese proxy al paso de trabajo.</span><span class="sxs-lookup"><span data-stu-id="988d0-104">To set the permissions for a particular job step, you create a proxy that has the required permissions and then assign that proxy to the job step.</span></span> <span data-ttu-id="988d0-105">Se puede especificar un servidor proxy en más de un paso de trabajo.</span><span class="sxs-lookup"><span data-stu-id="988d0-105">A proxy can be specified for more than one job step.</span></span> <span data-ttu-id="988d0-106">Para los pasos de trabajo que necesitan los mismos permisos se utiliza el mismo proxy.</span><span class="sxs-lookup"><span data-stu-id="988d0-106">For job steps that require the same permissions, you use the same proxy.</span></span>  
  
 <span data-ttu-id="988d0-107">En las siguientes secciones se explica el rol de base de datos que debe conceder a los usuarios para que puedan crear o ejecutar trabajos mediante el Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="988d0-107">The following section explains what database role you must grant to users so they can create or execute jobs by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span>  
  
## <a name="granting-access-to-sql-server-agent"></a><span data-ttu-id="988d0-108">Conceder acceso al Agente SQL Server</span><span class="sxs-lookup"><span data-stu-id="988d0-108">Granting Access to SQL Server Agent</span></span>  
 <span data-ttu-id="988d0-109">Para utilizar el Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , los usuarios deben ser miembros de uno o más de los siguientes roles fijos de base de datos:</span><span class="sxs-lookup"><span data-stu-id="988d0-109">To use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, users must be a member of one or more of the following fixed database roles:</span></span>  
  
-   <span data-ttu-id="988d0-110">**SQLAgentUserRole**</span><span class="sxs-lookup"><span data-stu-id="988d0-110">**SQLAgentUserRole**</span></span>  
  
-   <span data-ttu-id="988d0-111">**SQLAgentReaderRole**</span><span class="sxs-lookup"><span data-stu-id="988d0-111">**SQLAgentReaderRole**</span></span>  
  
-   <span data-ttu-id="988d0-112">**SQLAgentOperatorRole**</span><span class="sxs-lookup"><span data-stu-id="988d0-112">**SQLAgentOperatorRole**</span></span>  
  
 <span data-ttu-id="988d0-113">Estos roles se almacenan en la base de datos **msdb** .</span><span class="sxs-lookup"><span data-stu-id="988d0-113">These roles are stored in the **msdb** database.</span></span> <span data-ttu-id="988d0-114">De manera predeterminada, ningún usuario es miembro de estos roles de base de datos.</span><span class="sxs-lookup"><span data-stu-id="988d0-114">By default, no user is a member of these database roles.</span></span> <span data-ttu-id="988d0-115">La pertenencia a estos roles se debe conceder explícitamente.</span><span class="sxs-lookup"><span data-stu-id="988d0-115">Membership in these roles must be granted explicitly.</span></span> <span data-ttu-id="988d0-116">Los usuarios que sean miembros del rol fijo de servidor **sysadmin** tienen acceso total al Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , y no necesitan ser miembros de estos roles fijos de base de datos para utilizar el Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="988d0-116">Users who are members of the **sysadmin** fixed server role have full access to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, and do not need to be a member of these fixed database roles to use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span> <span data-ttu-id="988d0-117">Si un usuario no es miembro de uno de estos roles de base de datos ni del rol **sysadmin** , el nodo del Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] no estará disponible para ellos cuando se conecten con [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] mediante [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="988d0-117">If a user is not a member of one of these database roles or of the **sysadmin** role, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent node is not available to them when they connect to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="988d0-118">Los miembros de estos roles de base de datos pueden ver y ejecutar trabajos que les pertenecen, así como crear pasos de trabajos que se ejecuten como una cuenta de proxy existente.</span><span class="sxs-lookup"><span data-stu-id="988d0-118">Members of these database roles can view and execute jobs that they own, and create job steps that run as an existing proxy account.</span></span> <span data-ttu-id="988d0-119">Para información sobre los permisos específicos asociados a cada uno de estos roles, consulte [Roles fijos de base de datos del Agente SQL Server](sql-server-agent-fixed-database-roles.md).</span><span class="sxs-lookup"><span data-stu-id="988d0-119">For more information about the specific permissions that are associated with each of these roles, see [SQL Server Agent Fixed Database Roles](sql-server-agent-fixed-database-roles.md).</span></span>  
  
 <span data-ttu-id="988d0-120">Los miembros del rol fijo de servidor **sysadmin** tienen permiso para crear, modificar o eliminar cuentas de proxy.</span><span class="sxs-lookup"><span data-stu-id="988d0-120">Members of the **sysadmin** fixed server role have permission to create, modify, and delete proxy accounts.</span></span> <span data-ttu-id="988d0-121">Los miembros del rol **sysadmin** tienen permiso para crear pasos de trabajo que no especifiquen un proxy, sino que se ejecuten como la cuenta de servicio del Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , que es la cuenta que se utiliza para iniciar el Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="988d0-121">Members of the **sysadmin** role have permission to create job steps that do not specify a proxy, but instead run as the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account, which is the account that is used to start [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span>  
  
## <a name="guidelines"></a><span data-ttu-id="988d0-122">Instrucciones</span><span class="sxs-lookup"><span data-stu-id="988d0-122">Guidelines</span></span>  
 <span data-ttu-id="988d0-123">Siga estas instrucciones para mejorar la seguridad de la implementación del Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="988d0-123">Follow these guidelines to improve the security of your [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent implementation:</span></span>  
  
-   <span data-ttu-id="988d0-124">Crear cuentas de usuario dedicadas especialmente para servidores proxy y utilizarlas únicamente para ejecutar pasos de trabajos.</span><span class="sxs-lookup"><span data-stu-id="988d0-124">Create dedicated user accounts specifically for proxies, and only use these proxy user accounts for running job steps.</span></span>  
  
-   <span data-ttu-id="988d0-125">Conceder solo los permisos necesarios a las cuentas de usuarios de proxy.</span><span class="sxs-lookup"><span data-stu-id="988d0-125">Only grant the necessary permissions to proxy user accounts.</span></span> <span data-ttu-id="988d0-126">Conceder únicamente los permisos realmente necesarios para ejecutar los pasos de trabajo que están asignados a una cuenta de proxy determinada.</span><span class="sxs-lookup"><span data-stu-id="988d0-126">Grant only those permissions actually required to run the job steps that are assigned to a given proxy account.</span></span>  
  
-   <span data-ttu-id="988d0-127">No ejecutar el servicio del Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en una cuenta de Microsoft Windows que sea miembro del grupo **Administradores** de Windows.</span><span class="sxs-lookup"><span data-stu-id="988d0-127">Do not run the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service under a Microsoft Windows account that is a member of the Windows **Administrators** group.</span></span>  
  
-   <span data-ttu-id="988d0-128">Los servidores proxy son tan seguros como el almacén de credenciales de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="988d0-128">Proxies are only as secure as the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] credential store.</span></span>  
  
-   <span data-ttu-id="988d0-129">Si las operaciones de escritura de usuario pueden escribir en el registro de eventos de NT, pueden producir alertas mediante el Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="988d0-129">If user write operations can write to the NT Event log, they can raise alerts via [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span>  
  
-   <span data-ttu-id="988d0-130">No especifique la cuenta de administración de NT como una cuenta de servicio o una cuenta de proxy.</span><span class="sxs-lookup"><span data-stu-id="988d0-130">Do not specify the NT Admin account as a service account or proxy account.</span></span>  
  
-   <span data-ttu-id="988d0-131">Tenga en cuenta que [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] y el Agente de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] tienen acceso a activos entre sí.</span><span class="sxs-lookup"><span data-stu-id="988d0-131">Note that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent have access to each other's assets.</span></span> <span data-ttu-id="988d0-132">Los dos servicios comparten un único espacio del proceso y el Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] es un administrador del sistema en el servicio [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="988d0-132">The two services share a single process space and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is a sysadmin on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service.</span></span>  
  
-   <span data-ttu-id="988d0-133">Cuando un servidor de destino (TSX) se registra con un servidor principal (MSX), los administradores del sistema del servidor principal obtienen el control total en la instancia del servidor de destino de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="988d0-133">When a TSX enlists with an MSX, the MSX sysadmins gets total control over the TSX instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="988d0-134">ACE es una extensión y no se puede invocar a sí misma.</span><span class="sxs-lookup"><span data-stu-id="988d0-134">ACE is an extension and cannot invoke itself.</span></span> <span data-ttu-id="988d0-135">La invocación de ACE la realiza Chainer ScenarioEngine.exe, también conocido como Microsoft.SqlServer.Chainer.Setup.exe, u otro proceso de host.</span><span class="sxs-lookup"><span data-stu-id="988d0-135">ACE is invoked by Chainer ScenarioEngine.exe - also known as Microsoft.SqlServer.Chainer.Setup.exe - or it can be invoked by another host process.</span></span>  
  
-   <span data-ttu-id="988d0-136">ACE depende de las DLL de configuración siguientes pertenecientes a SSDP, ya que ACE llama a las siguientes API de DLL:</span><span class="sxs-lookup"><span data-stu-id="988d0-136">ACE depends on the following configuration DLL's owned by SSDP, because those API's of DLL's are called by ACE:</span></span>  
  
    -   <span data-ttu-id="988d0-137">**SCO**: Microsoft.SqlServer.Configuration.Sco.dll, incluidas las nuevas validaciones de SCO para las cuentas virtuales</span><span class="sxs-lookup"><span data-stu-id="988d0-137">**SCO** - Microsoft.SqlServer.Configuration.Sco.dll, including new SCO validations for virtual accounts</span></span>  
  
    -   <span data-ttu-id="988d0-138">**Clúster**: Microsoft.SqlServer.Configuration.Cluster.dll</span><span class="sxs-lookup"><span data-stu-id="988d0-138">**Cluster** - Microsoft.SqlServer.Configuration.Cluster.dll</span></span>  
  
    -   <span data-ttu-id="988d0-139">**SFC**: Microsoft.SqlServer.Configuration.SqlConfigBase.dll</span><span class="sxs-lookup"><span data-stu-id="988d0-139">**SFC** - Microsoft.SqlServer.Configuration.SqlConfigBase.dll</span></span>  
  
    -   <span data-ttu-id="988d0-140">**Extensión**: Microsoft.SqlServer.Configuration.ConfigExtension.dll</span><span class="sxs-lookup"><span data-stu-id="988d0-140">**Extension** - Microsoft.SqlServer.Configuration.ConfigExtension.dll</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="988d0-141">Consulte también</span><span class="sxs-lookup"><span data-stu-id="988d0-141">See Also</span></span>  
 <span data-ttu-id="988d0-142">[Roles predefinidos](../../reporting-services/security/role-definitions-predefined-roles.md) </span><span class="sxs-lookup"><span data-stu-id="988d0-142">[Predefined Roles](../../reporting-services/security/role-definitions-predefined-roles.md) </span></span>  
 <span data-ttu-id="988d0-143">[sp_addrolemember &#40;&#41;de Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addrolemember-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="988d0-143">[sp_addrolemember &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addrolemember-transact-sql) </span></span>  
 <span data-ttu-id="988d0-144">[sp_droprolemember &#40;&#41;de Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-droprolemember-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="988d0-144">[sp_droprolemember &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-droprolemember-transact-sql) </span></span>  
 [<span data-ttu-id="988d0-145">Centro de seguridad para el Motor de base de datos de SQL Server y Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="988d0-145">Security Center for SQL Server Database Engine and Azure SQL Database</span></span>](../../relational-databases/security/security-center-for-sql-server-database-engine-and-azure-sql-database.md)  
  
  
