---
title: Controlar varios pasos del trabajo | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
helpviewer_keywords:
- job steps [SQL Server Agent]
- ordering job steps [SQL Server]
- multiple job steps
- SQL Server Agent jobs, job steps
- control of flow for jobs [SQL Server]
ms.assetid: 7aba19ff-72b3-45f6-8e54-23f4988d63a8
author: stevestein
ms.author: sstein
ms.openlocfilehash: fef0fb69b5bfd028977276d8efabc333a21e0feb
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87662469"
---
# <a name="handle-multiple-job-steps"></a><span data-ttu-id="89a42-102">Controlar varios pasos del trabajo</span><span class="sxs-lookup"><span data-stu-id="89a42-102">Handle Multiple Job Steps</span></span>
  <span data-ttu-id="89a42-103">Si el trabajo está formado por varios pasos, debe especificar el orden de ejecución de los pasos del trabajo.</span><span class="sxs-lookup"><span data-stu-id="89a42-103">If your job has more than one job step, you must specify the order in which the job steps run.</span></span> <span data-ttu-id="89a42-104">Esto se denomina \*control de flujo \* *.*</span><span class="sxs-lookup"><span data-stu-id="89a42-104">This is called *control of flow\*\*.*</span></span> <span data-ttu-id="89a42-105">En cualquier momento puede agregar nuevos pasos del trabajo y reorganizar el flujo de los pasos; los cambios se aplicarán la próxima vez que se ejecute el trabajo.</span><span class="sxs-lookup"><span data-stu-id="89a42-105">You can add new job steps and rearrange the flow of job steps at any time; the changes take effect the next time the job is run.</span></span> <span data-ttu-id="89a42-106">Esta ilustración muestra el control de flujo de un trabajo de copia de seguridad de una base de datos.</span><span class="sxs-lookup"><span data-stu-id="89a42-106">This illustration shows the control of flow for a database backup job.</span></span>  
  
 <span data-ttu-id="89a42-107">![Control de flujo de los pasos de trabajo del Agente SQL Server](../../database-engine/media/dbflow01.gif "Control de flujo de los pasos de trabajo del Agente SQL Server")</span><span class="sxs-lookup"><span data-stu-id="89a42-107">![SQL Server Agent job steps control of flow](../../database-engine/media/dbflow01.gif "SQL Server Agent job steps control of flow")</span></span>  
  
 <span data-ttu-id="89a42-108">El primer paso es Copia de seguridad de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="89a42-108">The first step is Backup Database.</span></span> <span data-ttu-id="89a42-109">Si este paso genera un error, el Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] informa del error al operador que se ha definido que reciba la notificación.</span><span class="sxs-lookup"><span data-stu-id="89a42-109">If this step fails, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent reports failure to the operator who is defined to receive notification.</span></span> <span data-ttu-id="89a42-110">Si el paso Copia de seguridad de la base de datos es correcto, el trabajo pasa al siguiente paso: "Normalizar" los datos del cliente.</span><span class="sxs-lookup"><span data-stu-id="89a42-110">If the Backup Database step succeeds, the job proceeds to the next step, "Scrub" Customer Data.</span></span> <span data-ttu-id="89a42-111">Si este paso genera un error, el Agente [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] avanza a Restaurar base de datos.</span><span class="sxs-lookup"><span data-stu-id="89a42-111">If this step fails, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent skips forward to Restore Database.</span></span> <span data-ttu-id="89a42-112">Si "Normalizar" los datos del cliente es correcto, el trabajo avanza al siguiente paso: Actualizar estadísticas y, así sucesivamente, hasta que el paso final da como resultado un informe correcto o con errores.</span><span class="sxs-lookup"><span data-stu-id="89a42-112">If "Scrub" Customer Data succeeds, the job proceeds to the next step, Update Statistics, and so on, until the final step either results in Report Success or Report Failure.</span></span>  
  
 <span data-ttu-id="89a42-113">Se define una acción de control de flujo para la ejecución satisfactoria o con errores de cada paso del trabajo.</span><span class="sxs-lookup"><span data-stu-id="89a42-113">You define a control-of-flow action for the success and failure of each job step.</span></span> <span data-ttu-id="89a42-114">Debe especificar una acción que se deberá realizar cuando un paso del trabajo se ejecute correctamente y la acción que se llevará a cabo cuando se ejecute con errores.</span><span class="sxs-lookup"><span data-stu-id="89a42-114">You must specify an action to be taken when a job step succeeds and an action to be taken when a job step fails.</span></span> <span data-ttu-id="89a42-115">También puede definir el número de reintentos y el intervalo entre ellos para los pasos del trabajo que no se han ejecutado correctamente.</span><span class="sxs-lookup"><span data-stu-id="89a42-115">You can also define the number of retry attempts for failed job steps and the interval between the retry attempts.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="89a42-116">Cuando utiliza la interfaz gráfica de usuario (GUI) del Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] y se elimina uno o varios pasos de un trabajo de varios pasos, la GUI quita todos los pasos del trabajo y vuelve a agregar los pasos restantes con las referencias correctas en caso de éxito o en caso de error.</span><span class="sxs-lookup"><span data-stu-id="89a42-116">When you use the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent graphical user interface (GUI) and delete one or more steps from a multistep job, the GUI removes all job steps and then adds the remaining steps back with the correct on-success or on-failure references.</span></span> <span data-ttu-id="89a42-117">Por ejemplo, imagine que tiene un trabajo de cinco pasos en el que el primero se configura para que salte al cuarto paso si se completa con éxito.</span><span class="sxs-lookup"><span data-stu-id="89a42-117">For example, suppose you have a job with five steps, and the first step is configured to jump to step 4 if it completes successfully.</span></span> <span data-ttu-id="89a42-118">Si elimina el tercer paso, la GUI elimina todos los pasos del trabajo y agrega los cuatro pasos restantes (1, 2, 4 y 5) con las referencias corregidas.</span><span class="sxs-lookup"><span data-stu-id="89a42-118">If you delete step 3, the GUI removes all steps for this job and adds the remaining four steps (1, 2, 4, and 5) with corrected references.</span></span> <span data-ttu-id="89a42-119">En este caso, la referencia del primer paso se volvería a configurar para que salte al tercer paso si el primero se completa con éxito.</span><span class="sxs-lookup"><span data-stu-id="89a42-119">In this case, the reference in step 1 would be reconfigured to jump to step 3 if step 1 completes successfully.</span></span>  
  
 <span data-ttu-id="89a42-120">Los pasos del trabajo deben ser independientes.</span><span class="sxs-lookup"><span data-stu-id="89a42-120">Job steps must be self-contained.</span></span> <span data-ttu-id="89a42-121">Es decir, un trabajo no puede pasar datos, valores booleanos o numéricos entre pasos del trabajo.</span><span class="sxs-lookup"><span data-stu-id="89a42-121">That is, a job cannot pass Boolean values, data, or numeric values between job steps.</span></span> <span data-ttu-id="89a42-122">Sin embargo, puede pasar valores de un paso del trabajo de [!INCLUDE[tsql](../../includes/tsql-md.md)] a otro si utiliza tablas permanentes o tablas temporales globales.</span><span class="sxs-lookup"><span data-stu-id="89a42-122">You can, however, pass values from one [!INCLUDE[tsql](../../includes/tsql-md.md)] job step to another by using permanent tables or global temporary tables.</span></span> <span data-ttu-id="89a42-123">También puede pasar valores de pasos del trabajo que ejecuten programas ejecutables de un paso del trabajo a otro mediante archivos.</span><span class="sxs-lookup"><span data-stu-id="89a42-123">You can pass values from job steps that run executable programs from one job step to another job step by using files.</span></span> <span data-ttu-id="89a42-124">Por ejemplo, el programa ejecutado mediante un paso del trabajo escribe un archivo y el programa ejecutado por un paso del trabajo posterior lee el archivo.</span><span class="sxs-lookup"><span data-stu-id="89a42-124">For example, the executable run by one job step writes a file, and the executable run by a subsequent job step reads the file.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="89a42-125">Si crea pasos del trabajo en bucle (el paso del trabajo 1 va seguido del paso del trabajo 2 y, a continuación, del paso del trabajo 2 se vuelve al paso del trabajo 1), aparecerá un mensaje de advertencia cuando cree el trabajo mediante [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="89a42-125">If you create looping job steps (job step 1 is followed by job step 2, then job step 2 returns to job step 1), a warning message appears when the job is created using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="89a42-126">El Agente registra la información del trabajo y de los pasos de trabajo en el historial de trabajos.</span><span class="sxs-lookup"><span data-stu-id="89a42-126">Agent records job and job step information in the job history.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="89a42-127">Consulte también</span><span class="sxs-lookup"><span data-stu-id="89a42-127">See Also</span></span>  
 <span data-ttu-id="89a42-128">[sp_add_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-add-job-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="89a42-128">[sp_add_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-add-job-transact-sql) </span></span>  
 <span data-ttu-id="89a42-129">[dbo.sysjobhistory &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/dbo-sysjobhistory-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="89a42-129">[dbo.sysjobhistory &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/dbo-sysjobhistory-transact-sql) </span></span>  
 <span data-ttu-id="89a42-130">[Trabajos dedbo.sys&#40;&#41;de Transact-SQL](/sql/relational-databases/system-tables/dbo-sysjobs-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="89a42-130">[dbo.sysjobs &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/dbo-sysjobs-transact-sql) </span></span>  
 <span data-ttu-id="89a42-131">[dbo.sysjobsteps &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/dbo-sysjobsteps-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="89a42-131">[dbo.sysjobsteps &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/dbo-sysjobsteps-transact-sql) </span></span>  
 <span data-ttu-id="89a42-132">[Implementar trabajos](implement-jobs.md) </span><span class="sxs-lookup"><span data-stu-id="89a42-132">[Implement Jobs](implement-jobs.md) </span></span>  
 [<span data-ttu-id="89a42-133">Administrar pasos de trabajo</span><span class="sxs-lookup"><span data-stu-id="89a42-133">Manage Job Steps</span></span>](manage-job-steps.md)  
  
  
