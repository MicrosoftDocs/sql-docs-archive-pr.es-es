---
title: Compatibilidad con nombre de entidad de seguridad de servicio (SPN) en conexiones de cliente | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
helpviewer_keywords:
- SQL Server Native Client, SPNs
- ODBC, SPNs
- OLE DB, SPNs
- SPNs [SQL Server]
ms.assetid: 96598c69-ce9a-4090-aacb-d546591e8af7
author: rothja
ms.author: jroth
ms.openlocfilehash: 10a64baa17bd070d9354beaf6ff8c2e460682318
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87669659"
---
# <a name="service-principal-name-spn-support-in-client-connections"></a><span data-ttu-id="551a4-102">Compatibilidad con Nombre de la entidad de seguridad del servicio (SPN) en conexiones cliente</span><span class="sxs-lookup"><span data-stu-id="551a4-102">Service Principal Name (SPN) Support in Client Connections</span></span>
  <span data-ttu-id="551a4-103">A partir de [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)], se ha ampliado la compatibilidad con los nombres de entidad de seguridad de servicio (SPN) para habilitar la autenticación mutua en todos los protocolos.</span><span class="sxs-lookup"><span data-stu-id="551a4-103">Beginning with [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)], support for service principal names (SPNs) has been extended to enable mutual authentication across all protocols.</span></span> <span data-ttu-id="551a4-104">En versiones anteriores de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], los SPN solo se admitían en Kerberos sobre TCP, cuando el SPN predeterminado para la instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] se registraba en Active Directory.</span><span class="sxs-lookup"><span data-stu-id="551a4-104">In previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], SPNs were only supported for Kerberos over TCP when the default SPN for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance was registered with Active Directory.</span></span>  
  
 <span data-ttu-id="551a4-105">El protocolo de autenticación usa los SPN para determinar la cuenta en la que se ejecuta una instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="551a4-105">SPNs are used by the authentication protocol to determine the account in which a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance runs.</span></span> <span data-ttu-id="551a4-106">Si se conoce la cuenta de la instancia, la autenticación Kerberos puede usarse para proporcionar una autenticación mutua del cliente y el servidor.</span><span class="sxs-lookup"><span data-stu-id="551a4-106">If the instance account is known, Kerberos authentication can be used to provide mutual authentication by the client and server.</span></span> <span data-ttu-id="551a4-107">Si no se conoce la cuenta de la instancia, se usa la autenticación NTLM, que solo proporciona autenticación del cliente por parte del servidor.</span><span class="sxs-lookup"><span data-stu-id="551a4-107">If the instance account is not known, NTLM authentication, which only provides authentication of the client by the server, is used.</span></span> <span data-ttu-id="551a4-108">Actualmente, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client realiza la búsqueda de autenticación derivando el SPN de las propiedades de conexión de red y nombre de instancia.</span><span class="sxs-lookup"><span data-stu-id="551a4-108">Currently, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client performs the authentication lookup, deriving the SPN from the instance name and network connection properties.</span></span> <span data-ttu-id="551a4-109">Las instancias de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] intentarán registrar los SPN al inicio, o bien pueden registrarse manualmente.</span><span class="sxs-lookup"><span data-stu-id="551a4-109">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instances will attempt to register SPNs on startup, or they can be registered manually.</span></span> <span data-ttu-id="551a4-110">No obstante, se producirá un error en el registro si no hay suficientes derechos de acceso para la cuenta que intenta registrar los SPN.</span><span class="sxs-lookup"><span data-stu-id="551a4-110">However, registration will fail if there are insufficient access rights for the account that attempts to register the SPNs.</span></span>  
  
 <span data-ttu-id="551a4-111">Las cuentas de dominio y equipo se registran automáticamente en Active Directory.</span><span class="sxs-lookup"><span data-stu-id="551a4-111">Domain and computer accounts are registered automatically in Active Directory.</span></span> <span data-ttu-id="551a4-112">Estas cuentas pueden usarse como SPN, o bien los administradores pueden definir sus propios SPN.</span><span class="sxs-lookup"><span data-stu-id="551a4-112">These can be used as SPNs, or administators can define their own SPNs.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="551a4-113">hace que la autenticación segura sea más fácil de administrar y más confiable, ya que permite a los clientes especificar directamente el SPN que va a usarse.</span><span class="sxs-lookup"><span data-stu-id="551a4-113">makes secure authentication more manageable and reliable by allowing clients to directly specify the SPN to use.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="551a4-114">Un SPN especificado por una aplicación cliente solamente se utiliza cuando se establece una conexión con la seguridad integrada de Windows.</span><span class="sxs-lookup"><span data-stu-id="551a4-114">An SPN specified by a client application is only used when a connection is made with Windows integrated security.</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="551a4-115">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Administrador de configuración de Kerberos para [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]** es una herramienta de diagnóstico que sirve para solucionar problemas de conectividad de Kerberos relacionados con [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="551a4-115">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Kerberos Configuration Manager for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]** is a diagnostic tool that helps troubleshoot Kerberos related connectivity issues with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="551a4-116">Para obtener más información, vea [Administrador de configuración de Microsoft Kerberos para SQL Server](https://www.microsoft.com/download/details.aspx?id=39046).</span><span class="sxs-lookup"><span data-stu-id="551a4-116">For more information, see [Microsoft Kerberos Configuration Manager for SQL Server](https://www.microsoft.com/download/details.aspx?id=39046).</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="551a4-117">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Administrador de configuración de Kerberos para [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]** es una herramienta de diagnóstico que sirve para solucionar problemas de conectividad de Kerberos relacionados con [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="551a4-117">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Kerberos Configuration Manager for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]** is a diagnostic tool that helps troubleshoot Kerberos related connectivity issues with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="551a4-118">Para obtener más información, vea [Administrador de configuración de Microsoft Kerberos para SQL Server](https://www.microsoft.com/download/details.aspx?id=39046).</span><span class="sxs-lookup"><span data-stu-id="551a4-118">For more information, see [Microsoft Kerberos Configuration Manager for SQL Server](https://www.microsoft.com/download/details.aspx?id=39046).</span></span>  
  
 <span data-ttu-id="551a4-119">Para obtener más información acerca de Kerberos, vea los siguientes artículos:</span><span class="sxs-lookup"><span data-stu-id="551a4-119">For more information about Kerberos, see the following articles:</span></span>  
  
-   [<span data-ttu-id="551a4-120">Complemento técnico de Kerberos para Windows</span><span class="sxs-lookup"><span data-stu-id="551a4-120">Kerberos Technical Supplement for Windows</span></span>](https://go.microsoft.com/fwlink/?LinkId=101449)  
  
-   [<span data-ttu-id="551a4-121">Microsoft Kerberos</span><span class="sxs-lookup"><span data-stu-id="551a4-121">Microsoft Kerberos</span></span>](https://go.microsoft.com/fwlink/?LinkID=100758)  
  
## <a name="usage"></a><span data-ttu-id="551a4-122">Uso</span><span class="sxs-lookup"><span data-stu-id="551a4-122">Usage</span></span>  
 <span data-ttu-id="551a4-123">En la tabla siguiente se describen los escenarios más comunes en los que las aplicaciones cliente pueden habilitar la autenticación segura.</span><span class="sxs-lookup"><span data-stu-id="551a4-123">The following table describes the most common scenarios in which client applications can enable secure authentication.</span></span>  
  
|<span data-ttu-id="551a4-124">Escenario</span><span class="sxs-lookup"><span data-stu-id="551a4-124">Scenario</span></span>|<span data-ttu-id="551a4-125">Descripción</span><span class="sxs-lookup"><span data-stu-id="551a4-125">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="551a4-126">Una aplicación heredada no especifica ningún SPN.</span><span class="sxs-lookup"><span data-stu-id="551a4-126">A legacy application does not specify an SPN.</span></span>|<span data-ttu-id="551a4-127">Este escenario de compatibilidad garantiza que no habrá ningún cambio de comportamiento en las aplicaciones desarrolladas para versiones anteriores de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="551a4-127">This compatibility scenario guarantees that there will be no behavior change for applications developed for previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="551a4-128">Si no se especifica ningún SPN, la aplicación se basa en los SPN generados y no tiene ningún conocimiento del método de autenticación utilizado.</span><span class="sxs-lookup"><span data-stu-id="551a4-128">If no SPN is specified, the application relies on generated SPNs and has no knowledge of which authentication method is used.</span></span>|  
|<span data-ttu-id="551a4-129">Una aplicación cliente que usa la versión actual de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client especifica un SPN en la cadena de conexión como un usuario de dominio o cuenta de equipo, como un SPN específico de la instancia o como una cadena definida por el usuario.</span><span class="sxs-lookup"><span data-stu-id="551a4-129">A client application using the current version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client specifies an SPN in the connection string as a domain user or computer account, as an instance-specific SPN, or as a user-defined string.</span></span>|<span data-ttu-id="551a4-130">La palabra clave `ServerSPN` puede usarse en una cadena de conexión, inicialización o proveedor para hacer lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="551a4-130">The `ServerSPN` keyword can be used in a provider, initialization, or connection string to do the following:</span></span><br /><br /> <span data-ttu-id="551a4-131">-Especifique la cuenta usada por la [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instancia de para una conexión.</span><span class="sxs-lookup"><span data-stu-id="551a4-131">-   Specify the account used by the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance for a connection.</span></span> <span data-ttu-id="551a4-132">Esto simplifica el acceso a la autenticación Kerberos.</span><span class="sxs-lookup"><span data-stu-id="551a4-132">This simplifies access to Kerberos authentication.</span></span> <span data-ttu-id="551a4-133">Si hay presente un centro de distribución de claves Kerberos (KDC) y se especifica la cuenta correcta, es más probable que se use la autenticación Kerberos que la autenticación NTLM.</span><span class="sxs-lookup"><span data-stu-id="551a4-133">If a Kerberos Key Distribution Center (KDC) is present and the correct account is specified, Kerberos authentication is more likely to be used than NTLM.</span></span> <span data-ttu-id="551a4-134">El KDC reside normalmente en el mismo equipo que el controlador de dominio.</span><span class="sxs-lookup"><span data-stu-id="551a4-134">The KDC usually resides on the same computer as the domain controller.</span></span><br /><span data-ttu-id="551a4-135">-Especifique un SPN para buscar la cuenta de servicio de la [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instancia.</span><span class="sxs-lookup"><span data-stu-id="551a4-135">-   Specify an SPN to look up the service account for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="551a4-136">Por cada instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], se generan dos SPN predeterminados que pueden usarse para este propósito.</span><span class="sxs-lookup"><span data-stu-id="551a4-136">For every [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance, two default SPNs are generated that can be used for this purpose.</span></span> <span data-ttu-id="551a4-137">No obstante, no se garantiza que estas claves estén presentes en Active Directory, por lo que en esta situación no se garantiza la autenticación Kerberos.</span><span class="sxs-lookup"><span data-stu-id="551a4-137">These keys are not guaranteed to be present in Active Directory, however, so in this situation Kerberos authentication is not guaranteed.</span></span><br /><span data-ttu-id="551a4-138">-Especifique un SPN que se usará para buscar la cuenta de servicio de la [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instancia.</span><span class="sxs-lookup"><span data-stu-id="551a4-138">-   Specify an SPN that will be used to look up the service account for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="551a4-139">Ésta puede ser cualquier cadena definida por el usuario que se asigne a la cuenta de servicio.</span><span class="sxs-lookup"><span data-stu-id="551a4-139">This can be any user-defined string that maps to the service account.</span></span> <span data-ttu-id="551a4-140">En este caso, la clave debe registrarse manualmente en el KDC y debe cumplir las reglas de un SPN definido por el usuario.</span><span class="sxs-lookup"><span data-stu-id="551a4-140">In this case, the key must be registered manually in the KDC and must satisfy the rules for a user-defined SPN.</span></span><br /><br /> <span data-ttu-id="551a4-141">La palabra clave `FailoverPartnerSPN` puede usarse para especificar el SPN para el servidor del asociado de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="551a4-141">The `FailoverPartnerSPN` keyword can be used to specify the SPN for the failover partner server.</span></span> <span data-ttu-id="551a4-142">El intervalo de valores de cuenta y de clave de Active Directory es el mismo que los valores que pueden especificarse para el servidor principal.</span><span class="sxs-lookup"><span data-stu-id="551a4-142">The range of account and Active Directory key values is the same as the values you can specify for the principal server.</span></span>|  
|<span data-ttu-id="551a4-143">Una aplicación ODBC especifica un SPN como un atributo de conexión para el servidor principal o servidor del asociado de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="551a4-143">An ODBC application specifies an SPN as a connection attribute for the principal server or failover partner server.</span></span>|<span data-ttu-id="551a4-144">El atributo de conexión `SQL_COPT_SS_SERVER_SPN` puede usarse para especificar el SPN de una conexión al servidor principal.</span><span class="sxs-lookup"><span data-stu-id="551a4-144">The connection attribute `SQL_COPT_SS_SERVER_SPN` can be used to specify the SPN for a connection to the principal server.</span></span><br /><br /> <span data-ttu-id="551a4-145">El atributo de conexión `SQL_COPT_SS_FAILOVER_PARTNER_SPN` puede usarse para especificar el SPN para el servidor del asociado de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="551a4-145">The connection attribute `SQL_COPT_SS_FAILOVER_PARTNER_SPN` can be used to specify the SPN for the failover partner server.</span></span>|  
|<span data-ttu-id="551a4-146">Una aplicación OLE DB especifica un SPN como una propiedad de inicialización del origen de datos para el servidor principal o para un servidor del asociado de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="551a4-146">An OLE DB application specifies an SPN as a data source initialization property for the principal server or for a failover partner server.</span></span>|<span data-ttu-id="551a4-147">La propiedad de conexión `SSPROP_INIT_SERVER_SPN` del conjunto de propiedades `DBPROPSET_SQLSERVERDBINIT` puede usarse para especificar el SPN de una conexión.</span><span class="sxs-lookup"><span data-stu-id="551a4-147">The connection property `SSPROP_INIT_SERVER_SPN` in the `DBPROPSET_SQLSERVERDBINIT` property set can be used to specify the SPN for a connection.</span></span><br /><br /> <span data-ttu-id="551a4-148">La propiedad de conexión `SSPROP_INIT_FAILOVER_PARTNER_SPN` de `DBPROPSET_SQLSERVERDBINIT` puede usarse para especificar el SPN para el servidor del asociado de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="551a4-148">The connection property `SSPROP_INIT_FAILOVER_PARTNER_SPN` in the `DBPROPSET_SQLSERVERDBINIT` can be used to specify the SPN for the failover partner server.</span></span>|  
|<span data-ttu-id="551a4-149">Un usuario especifica un SPN para un servidor o servidor de asociado de conmutación por error en un nombre del origen de datos ODBC (DSN).</span><span class="sxs-lookup"><span data-stu-id="551a4-149">A user specifies an SPN for a server or failover partner server in an ODBC data source name (DSN).</span></span>|<span data-ttu-id="551a4-150">El SPN puede especificarse en un DSN ODBC a través de los cuadros de diálogo de configuración del DSN.</span><span class="sxs-lookup"><span data-stu-id="551a4-150">The SPN can be specified in an ODBC DSN through the DSN setup dialog boxes.</span></span>|  
|<span data-ttu-id="551a4-151">El usuario especifica un SPN para un servidor o servidor de asociado de conmutación por error en un cuadro de diálogo **Vínculo de datos** o **Inicio de sesión** de OLE DB.</span><span class="sxs-lookup"><span data-stu-id="551a4-151">The user specifies an SPN for a server or failover partner server in an OLE DB **Data Link** or **Login** dialog box.</span></span>|<span data-ttu-id="551a4-152">El SPN puede especificarse en un cuadro de diálogo **Vínculo de datos** o **Inicio de sesión** .</span><span class="sxs-lookup"><span data-stu-id="551a4-152">The SPN can be specified in a **Data Link** or **Login** dialog box.</span></span> <span data-ttu-id="551a4-153">El cuadro de diálogo **Inicio de sesión** puede usarse con ODBC u OLE DB.</span><span class="sxs-lookup"><span data-stu-id="551a4-153">The **Login** dialog box can be used with either ODBC or OLE DB.</span></span>|  
|<span data-ttu-id="551a4-154">Una aplicación ODBC determina el método de autenticación que se usa para establecer una conexión.</span><span class="sxs-lookup"><span data-stu-id="551a4-154">An ODBC application determines the authentication method used to establish a connection.</span></span>|<span data-ttu-id="551a4-155">Cuando una conexión se ha abierto correctamente, una aplicación puede consultar el atributo de conexión `SQL_COPT_SS_INTEGRATED_AUTHENTICATION_METHOD` para determinar qué método de autenticación se ha utilizado.</span><span class="sxs-lookup"><span data-stu-id="551a4-155">When a connection has been opened successfully, an application can query the connection attribute `SQL_COPT_SS_INTEGRATED_AUTHENTICATION_METHOD` to determine which authentication method was used.</span></span> <span data-ttu-id="551a4-156">Entre los valores se incluyen `NTLM` y `Kerberos`.</span><span class="sxs-lookup"><span data-stu-id="551a4-156">The values will include, but are not limited to, `NTLM` and `Kerberos`.</span></span>|  
|<span data-ttu-id="551a4-157">Una aplicación OLE DB determina el método de autenticación que se usa para establecer una conexión.</span><span class="sxs-lookup"><span data-stu-id="551a4-157">An OLE DB application determines the authentication method used to establish a connection.</span></span>|<span data-ttu-id="551a4-158">Cuando una conexión se ha abierto correctamente, una aplicación puede consultar la propiedad de conexión `SSPROP_AUTHENTICATION_METHOD` en el conjunto de propiedades `DBPROPSET_SQLSERVERDATASOURCEINFO` para determinar qué método de autenticación se ha utilizado.</span><span class="sxs-lookup"><span data-stu-id="551a4-158">When a connection has been opened successfully, an application can query the connection property `SSPROP_AUTHENTICATION_METHOD` in the `DBPROPSET_SQLSERVERDATASOURCEINFO` property set to determine which authentication method was used.</span></span> <span data-ttu-id="551a4-159">Entre los valores se incluyen `NTLM` y `Kerberos`.</span><span class="sxs-lookup"><span data-stu-id="551a4-159">The values will include, but are not limited to, `NTLM` and `Kerberos`.</span></span>|  
  
## <a name="failover"></a><span data-ttu-id="551a4-160">Conmutación por error</span><span class="sxs-lookup"><span data-stu-id="551a4-160">Failover</span></span>  
 <span data-ttu-id="551a4-161">Los SPN no se almacenan en la memoria caché de conmutación por error y, por lo tanto, no pueden pasarse entre conexiones.</span><span class="sxs-lookup"><span data-stu-id="551a4-161">SPNs are not stored in the failover cache and therefore cannot be passed between connections.</span></span> <span data-ttu-id="551a4-162">Los SPN se usarán en todos los intentos de conexión a la entidad de seguridad y al asociado cuando se especifiquen en los atributos de cadena de conexión o atributos de conexión.</span><span class="sxs-lookup"><span data-stu-id="551a4-162">SPNs will be used on all connection attempts to the principal and partner when specified in the connection string or connection attributes.</span></span>  
  
## <a name="connection-pooling"></a><span data-ttu-id="551a4-163">Agrupación de conexiones</span><span class="sxs-lookup"><span data-stu-id="551a4-163">Connection Pooling</span></span>  
 <span data-ttu-id="551a4-164">Las aplicaciones deben tener en cuenta que especificar los SPN en algunas cadenas de conexión, pero no en todas, pueden contribuir a la fragmentación del grupo.</span><span class="sxs-lookup"><span data-stu-id="551a4-164">Applications should be aware that specifying SPNs in some but not all connection strings can contribute to pool fragmentation.</span></span>  
  
 <span data-ttu-id="551a4-165">Las aplicaciones pueden especificar los SPN mediante programación como atributos de conexión, en lugar de especificar las palabras clave de cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="551a4-165">Applications can programmatically specify SPNs as connection attributes, instead of specifying connection string keywords.</span></span> <span data-ttu-id="551a4-166">Esto puede contribuir a administrar la fragmentación del grupo de conexiones.</span><span class="sxs-lookup"><span data-stu-id="551a4-166">This can help manage connection pool fragmentation.</span></span>  
  
 <span data-ttu-id="551a4-167">Las aplicaciones deben tener en cuenta que los SPN de las cadenas de conexión pueden invalidarse estableciendo los atributos de conexión correspondientes, pero las cadenas de conexión utilizadas por la agrupación de conexiones usarán los valores de las cadenas de conexión para los propósitos de agrupación.</span><span class="sxs-lookup"><span data-stu-id="551a4-167">Applications should be aware that SPNs in connection strings can be overridden by setting the corresponding connection attributes, but connection strings used by connection pooling will use the connection string values for pooling purposes.</span></span>  
  
## <a name="down-level-server-behavior"></a><span data-ttu-id="551a4-168">Comportamiento de un servidor de nivel inferior</span><span class="sxs-lookup"><span data-stu-id="551a4-168">Down-Level Server Behavior</span></span>  
 <span data-ttu-id="551a4-169">El nuevo comportamiento de conexión lo implementa el cliente; por lo tanto, no es específico de una versión de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="551a4-169">The new connection behavior is implemented by the client; therefore, it is not specific to a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="linked-servers-and-delegation"></a><span data-ttu-id="551a4-170">Servidores vinculados y delegación</span><span class="sxs-lookup"><span data-stu-id="551a4-170">Linked Servers and Delegation</span></span>  
 <span data-ttu-id="551a4-171">Cuando se crean servidores vinculados, el parámetro `@provstr` de [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql) puede usarse para especificar los SPN del servidor y del asociado de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="551a4-171">When linked servers are created, the `@provstr` parameter of [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql) can be used to specify the server and failover partner SPNs.</span></span> <span data-ttu-id="551a4-172">Las ventajas de hacerlo son las mismas que cuando los SPN se especifican en las cadenas de conexión del cliente: resulta más sencillo y confiable establecer conexiones que usan la autenticación Kerberos.</span><span class="sxs-lookup"><span data-stu-id="551a4-172">The benefits of doing this are the same as specifying SPNs in client connection strings: It is simpler and more reliable to establish connections that use Kerberos authentication.</span></span>  
  
 <span data-ttu-id="551a4-173">La delegación con servidores vinculados requiere la autenticación Kerberos.</span><span class="sxs-lookup"><span data-stu-id="551a4-173">Delegation with linked servers requires Kerberos authentication.</span></span>  
  
## <a name="management-aspects-of-spns-specified-by-applications"></a><span data-ttu-id="551a4-174">Aspectos de la administración de los SPN especificados por aplicaciones</span><span class="sxs-lookup"><span data-stu-id="551a4-174">Management Aspects of SPNs Specified by Applications</span></span>  
 <span data-ttu-id="551a4-175">A la hora de decidir si debe especificar los SPN en una aplicación (a través de cadenas de conexión) o mediante programación a través de propiedades de conexión (en lugar de confiar en el proveedor predeterminado que generó los SPN), tenga en cuenta los factores siguientes:</span><span class="sxs-lookup"><span data-stu-id="551a4-175">When choosing whether to specify SPNs in an application (through connection strings) or programmatically through connection properties (rather than relying on the defalt provider generated SPNs), consider the following factors:</span></span>  
  
-   <span data-ttu-id="551a4-176">Seguridad: ¿el SPN especificado revela información protegida?</span><span class="sxs-lookup"><span data-stu-id="551a4-176">Security: Does the specified SPN disclose information that is protected?</span></span>  
  
-   <span data-ttu-id="551a4-177">Confiabilidad: para habilitar el uso de los SPN predeterminados, la cuenta de servicio donde se ejecuta la instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] necesita tener privilegios suficientes para actualizar Active Directory en el KDC.</span><span class="sxs-lookup"><span data-stu-id="551a4-177">Reliability: To enable the use of default SPNs, the service account in which the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance runs must have sufficient privileges to update the Active Directory on the KDC.</span></span>  
  
-   <span data-ttu-id="551a4-178">Comodidad y transparencia de ubicación: ¿cómo afectará a los SPN de una aplicación que su base de datos se mueva a una instancia distinta de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ?</span><span class="sxs-lookup"><span data-stu-id="551a4-178">Convenience and location transparency: How will an application's SPNs be affected if its database moves to a different [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance?</span></span> <span data-ttu-id="551a4-179">Esto se aplica tanto al servidor principal como a su asociado de conmutación por error si se usa la creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="551a4-179">This applies to both the principal server and its failover partner if you use database mirroring.</span></span> <span data-ttu-id="551a4-180">Si un servidor cambia, ¿significa que deben modificarse los SPN?, ¿cómo afectará esto a las aplicaciones?,</span><span class="sxs-lookup"><span data-stu-id="551a4-180">If a server change means that SPNs must be changed, how will this affect applications?</span></span> <span data-ttu-id="551a4-181">¿se administrarán los cambios?</span><span class="sxs-lookup"><span data-stu-id="551a4-181">Will any changes be managed?</span></span>  
  
## <a name="specifying-the-spn"></a><span data-ttu-id="551a4-182">Especificar el SPN</span><span class="sxs-lookup"><span data-stu-id="551a4-182">Specifying the SPN</span></span>  
 <span data-ttu-id="551a4-183">Un SPN puede especificarse en cuadros de diálogo y en el código.</span><span class="sxs-lookup"><span data-stu-id="551a4-183">You can specify an SPN in dialog boxes and in code.</span></span> <span data-ttu-id="551a4-184">En esta sección se muestra cómo especificar un SPN.</span><span class="sxs-lookup"><span data-stu-id="551a4-184">This section discusses how you can specify an SPN.</span></span>  
  
 <span data-ttu-id="551a4-185">La longitud máxima de un SPN es de 260 caracteres.</span><span class="sxs-lookup"><span data-stu-id="551a4-185">The maximum length for an SPN is 260 characters.</span></span>  
  
 <span data-ttu-id="551a4-186">La sintaxis que usan los SPN en los atributos de cadena de conexión o atributos de conexión es la siguiente:</span><span class="sxs-lookup"><span data-stu-id="551a4-186">The syntax that SPNs use in connection string or connection attributes is as follows:</span></span>  
  
|<span data-ttu-id="551a4-187">Sintaxis</span><span class="sxs-lookup"><span data-stu-id="551a4-187">Syntax</span></span>|<span data-ttu-id="551a4-188">Descripción</span><span class="sxs-lookup"><span data-stu-id="551a4-188">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="551a4-189">MSSQLSvc/*FQDN*</span><span class="sxs-lookup"><span data-stu-id="551a4-189">MSSQLSvc/*fqdn*</span></span>|<span data-ttu-id="551a4-190">SPN predeterminado generado por el proveedor para una instancia predeterminada cuando se usa un protocolo distinto de TCP.</span><span class="sxs-lookup"><span data-stu-id="551a4-190">The provider-generated, default SPN for a default instance when a protocol other than TCP is used.</span></span><br /><br /> <span data-ttu-id="551a4-191">*FQDN* es un nombre de dominio completo.</span><span class="sxs-lookup"><span data-stu-id="551a4-191">*fqdn* is a fully-qualified domain name.</span></span>|  
|<span data-ttu-id="551a4-192">MSSQLSvc/*fqdn*:*port*</span><span class="sxs-lookup"><span data-stu-id="551a4-192">MSSQLSvc/*fqdn*:*port*</span></span>|<span data-ttu-id="551a4-193">SPN predeterminado generado por el proveedor cuando se usa TCP.</span><span class="sxs-lookup"><span data-stu-id="551a4-193">The provider-generated, default SPN when TCP is used.</span></span><br /><br /> <span data-ttu-id="551a4-194">*puerto* en un número de puerto TCP.</span><span class="sxs-lookup"><span data-stu-id="551a4-194">*port* is a TCP port number.</span></span>|  
|<span data-ttu-id="551a4-195">MSSQLSvc/*FQDN*:*nombreDeInstancia*</span><span class="sxs-lookup"><span data-stu-id="551a4-195">MSSQLSvc/*fqdn*:*InstanceName*</span></span>|<span data-ttu-id="551a4-196">SPN predeterminado generado por el proveedor para una instancia con nombre cuando se usa un protocolo distinto de TCP.</span><span class="sxs-lookup"><span data-stu-id="551a4-196">The provider-generated, default SPN for a named instance when a protocol other than TCP is used.</span></span><br /><br /> <span data-ttu-id="551a4-197">*InstanceName* es un nombre de instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="551a4-197">*InstanceName* is a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance name.</span></span>|  
|<span data-ttu-id="551a4-198">HOST/*fqdn*</span><span class="sxs-lookup"><span data-stu-id="551a4-198">HOST/*fqdn*</span></span><br /><br /> <span data-ttu-id="551a4-199">HOST/*MachineName*</span><span class="sxs-lookup"><span data-stu-id="551a4-199">HOST/*MachineName*</span></span>|<span data-ttu-id="551a4-200">SPN que se asigna a las cuentas de equipo integradas que Windows registra automáticamente.</span><span class="sxs-lookup"><span data-stu-id="551a4-200">The SPN that maps to built-in computer accounts that are automatically registered by Windows.</span></span>|  
|<span data-ttu-id="551a4-201">*Nombre de usuario* @ *Dominio* de</span><span class="sxs-lookup"><span data-stu-id="551a4-201">*Username*@*Domain*</span></span>|<span data-ttu-id="551a4-202">Especificación directa de una cuenta de dominio.</span><span class="sxs-lookup"><span data-stu-id="551a4-202">Direct specification of a domain account.</span></span><br /><br /> <span data-ttu-id="551a4-203">*Username* es un nombre de cuenta de usuario de Windows.</span><span class="sxs-lookup"><span data-stu-id="551a4-203">*Username* is a Windows user account name.</span></span><br /><br /> <span data-ttu-id="551a4-204">*Domain* es un nombre de dominio de Windows o nombre de dominio completo.</span><span class="sxs-lookup"><span data-stu-id="551a4-204">*Domain* is a Windows domain name or fully-qualified domain name.</span></span>|  
|<span data-ttu-id="551a4-205">*MachineName* $@ *Dominio* de</span><span class="sxs-lookup"><span data-stu-id="551a4-205">*MachineName*$@*Domain*</span></span>|<span data-ttu-id="551a4-206">Especificación directa de una cuenta de equipo.</span><span class="sxs-lookup"><span data-stu-id="551a4-206">Direct specification of a computer account.</span></span><br /><br /> <span data-ttu-id="551a4-207">(Si el servidor al que se está conectando se ejecuta en las cuentas de sistema local o servicio de red, para obtener la autenticación Kerberos, `ServerSPN` puede tener el formato de *MachineName* $@ *dominio* MachineName).</span><span class="sxs-lookup"><span data-stu-id="551a4-207">(If the server you are connecting to is running under LOCAL SYSTEM or NETWORK SERVICE accounts, to get Kerberos authentication, `ServerSPN` can be in the *MachineName*$@*Domain* format.)</span></span>|  
|<span data-ttu-id="551a4-208">*KDCKey* / *MachineName*</span><span class="sxs-lookup"><span data-stu-id="551a4-208">*KDCKey*/*MachineName*</span></span>|<span data-ttu-id="551a4-209">SPN especificado por el usuario.</span><span class="sxs-lookup"><span data-stu-id="551a4-209">A user-specified SPN.</span></span><br /><br /> <span data-ttu-id="551a4-210">*KDCKey* es una cadena alfanumérica que se ajusta a las reglas de una clave KDC.</span><span class="sxs-lookup"><span data-stu-id="551a4-210">*KDCKey* is an alphanumeric string that conforms to the rules for a KDC key.</span></span>|  
  
## <a name="odbc-and-ole-db-syntax-supporting-spns"></a><span data-ttu-id="551a4-211">Sintaxis de ODBC y OLE DB compatible con los SPN</span><span class="sxs-lookup"><span data-stu-id="551a4-211">ODBC and OLE DB Syntax Supporting SPNs</span></span>  
 <span data-ttu-id="551a4-212">Para obtener información específica de la sintaxis, vea los siguientes temas:</span><span class="sxs-lookup"><span data-stu-id="551a4-212">For syntax-specific information, see the following topics:</span></span>  
  
-   [<span data-ttu-id="551a4-213">Nombres de entidad de seguridad de servicio &#40;SPNs&#41; en conexiones cliente &#40;ODBC&#41;</span><span class="sxs-lookup"><span data-stu-id="551a4-213">Service Principal Names &#40;SPNs&#41; in Client Connections &#40;ODBC&#41;</span></span>](../odbc/service-principal-names-spns-in-client-connections-odbc.md)  
  
-   [<span data-ttu-id="551a4-214">Nombres de entidad de seguridad de servicio &#40;SPNs&#41; en conexiones cliente &#40;OLE DB&#41;</span><span class="sxs-lookup"><span data-stu-id="551a4-214">Service Principal Names &#40;SPNs&#41; in Client Connections &#40;OLE DB&#41;</span></span>](../ole-db/service-principal-names-spns-in-client-connections-ole-db.md)  
  
 <span data-ttu-id="551a4-215">Para obtener información sobre las aplicaciones de ejemplo que muestran esta característica, vea [Ejemplos de programación de datos de SQL Server](https://msftdpprodsamples.codeplex.com/).</span><span class="sxs-lookup"><span data-stu-id="551a4-215">For information about sample applications that demonstrate this feature, see [SQL Server Data Programmability Samples](https://msftdpprodsamples.codeplex.com/).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="551a4-216">Consulte también</span><span class="sxs-lookup"><span data-stu-id="551a4-216">See Also</span></span>  
 [<span data-ttu-id="551a4-217">Características de SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="551a4-217">SQL Server Native Client Features</span></span>](sql-server-native-client-features.md)  
  
