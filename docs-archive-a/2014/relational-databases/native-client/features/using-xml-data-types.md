---
title: Uso de tipos de datos XML | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
helpviewer_keywords:
- IRowsetChange interface
- IRowsetUpdate interface
- data access [SQL Server Native Client], xml data type
- SQL Server Native Client OLE DB schema rowsets
- PROVIDER_TYPES rowset
- IColumnsInfo interface
- IRowsetFind interface
- IColumnsRowset interface
- PROCEDURE_PARAMETERS rowset
- SQLNCLI, XML
- xml data type [SQL Server], SQL Server Native Client
- SQL Server Native Client, XML
- IRowset interface
- ISequentialStream interface
- ISSCommandWithParameters interface
- SS_XMLSCHEMA rowset
- SQL Server Native Client OLE DB interfaces
- XML [SQL Server], SQL Server Native Client
- COLUMNS rowset
ms.assetid: a7af5b72-c5c2-418d-a636-ae4ac6270ee5
author: rothja
ms.author: jroth
ms.openlocfilehash: 3d0dcc8cf7259a24e53281724d8440c6ff2209f1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87675315"
---
# <a name="using-xml-data-types"></a><span data-ttu-id="f0e80-102">Usar tipos de datos XML</span><span class="sxs-lookup"><span data-stu-id="f0e80-102">Using XML Data Types</span></span>
  <span data-ttu-id="f0e80-103">En [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], se ha introducido un tipo de datos **xml** que permite almacenar fragmentos y documentos XML en una base de datos de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f0e80-103">[!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] introduced an **xml** data type that enables you to store XML documents and fragments in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database.</span></span> <span data-ttu-id="f0e80-104">El tipo de datos **xml** es un tipo de datos integrado en [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] y es de algún modo similar a otros tipos integrados, como **int** y **varchar**.</span><span class="sxs-lookup"><span data-stu-id="f0e80-104">The **xml** data type is a built-in data type in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], and is in some ways similar to other built-in types, such as **int** and **varchar**.</span></span> <span data-ttu-id="f0e80-105">Al igual que ocurre con otros tipos integrados, el tipo de datos **xml** puede usarse como un tipo de columna al crear una tabla, como un tipo de variable, un tipo de parámetro, un tipo de valor devuelto por una función o en funciones CAST y CONVERT.</span><span class="sxs-lookup"><span data-stu-id="f0e80-105">As with other built-in types, you can use the **xml** data type as a column type when creating a table; as a variable type, a parameter type, or a function-return type; or in CAST and CONVERT functions.</span></span>  
  
## <a name="programming-considerations"></a><span data-ttu-id="f0e80-106">Consideraciones sobre la programación</span><span class="sxs-lookup"><span data-stu-id="f0e80-106">Programming Considerations</span></span>  
 <span data-ttu-id="f0e80-107">El XML puede ser autodescriptivo ya que puede incluir un encabezado XML que especifique la codificación del documento como, por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="f0e80-107">XML can be self-describing in that it can optionally include an XML header that specifies the encoding of the document, for example:</span></span>  
  
 `<?xml version="1.0" encoding="windows-1252"?><doc/>`  
  
 <span data-ttu-id="f0e80-108">El estándar XML describe la forma en que un procesador XML puede detectar la codificación usada en un documento examinando los primeros bytes del documento.</span><span class="sxs-lookup"><span data-stu-id="f0e80-108">The XML standard describes how an XML processor can detect the encoding used for a document by examining the first few bytes of the document.</span></span> <span data-ttu-id="f0e80-109">Hay ocasiones en que la codificación especificada por la aplicación entra en conflicto con la codificación especificada por el documento.</span><span class="sxs-lookup"><span data-stu-id="f0e80-109">There are opportunities for the encoding specified by the application to conflict with the encoding specified by the document.</span></span> <span data-ttu-id="f0e80-110">En el caso de los documentos que se pasan como parámetros enlazados, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] trata el XML como datos binarios, por lo que no se realiza ninguna conversión y el analizador XML puede usar la codificación especificada en el documento sin problemas.</span><span class="sxs-lookup"><span data-stu-id="f0e80-110">For documents passed as bound parameters, XML is treated as binary data by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], so no conversions are made and the XML parser can use the encoding specified within the document without problems.</span></span> <span data-ttu-id="f0e80-111">Sin embargo, en el caso de los datos XML enlazados como WSTR, la aplicación debe asegurarse de que el documento esté codificado como Unicode.</span><span class="sxs-lookup"><span data-stu-id="f0e80-111">However, for XML data that is bound as WSTR, then the application must ensure that the document is encoded as Unicode.</span></span> <span data-ttu-id="f0e80-112">Esto puede implicar la carga del documento en un DOM, el cambio de la codificación a Unicode y la serialización del documento.</span><span class="sxs-lookup"><span data-stu-id="f0e80-112">This may entail loading the document into a DOM, changing the encoding to Unicode and serializing the document.</span></span> <span data-ttu-id="f0e80-113">Si no se llevan a cabo estas operaciones, pueden producirse conversiones de datos, lo que daría lugar a un XML no válido o dañado.</span><span class="sxs-lookup"><span data-stu-id="f0e80-113">If this is not done, data conversions may occur, resulting in invalid or corrupt XML.</span></span>  
  
 <span data-ttu-id="f0e80-114">También pueden surgir conflictos cuando el XML se especifica en literales.</span><span class="sxs-lookup"><span data-stu-id="f0e80-114">There is also potential for conflict when XML is specified in literals.</span></span> <span data-ttu-id="f0e80-115">Por ejemplo, las siguientes instrucciones no son válidas:</span><span class="sxs-lookup"><span data-stu-id="f0e80-115">For example the following are invalid:</span></span>  
  
 `INSERT INTO xmltable(xmlcol) VALUES('<?xml version="1.0" encoding="UTF-16"?><doc/>')`  
  
 `INSERT INTO xmltable(xmlcol) VALUES(N'<?xml version="1.0" encoding="UTF-8"?><doc/>')`  
  
## <a name="sql-server-native-client-ole-db-provider"></a><span data-ttu-id="f0e80-116">Proveedor OLE DB de SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="f0e80-116">SQL Server Native Client OLE DB Provider</span></span>  
 <span data-ttu-id="f0e80-117">DBTYPE_XML es un nuevo tipo de datos específico de XML del proveedor OLE DB de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client.</span><span class="sxs-lookup"><span data-stu-id="f0e80-117">DBTYPE_XML is a new data type specific to XML in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client OLE DB provider.</span></span> <span data-ttu-id="f0e80-118">Además, puede obtenerse acceso a los datos XML a través de los tipos OLE DB existentes DBTYPE_BYTES, DBTYPE_WSTR, DBTYPE_BSTR, DBTYPE_XML, DBTYPE_STR, DBTYPE_VARIANT y DBTYPE_IUNKNOWN.</span><span class="sxs-lookup"><span data-stu-id="f0e80-118">In addition, XML data can be accessed through the existing OLE DB types of DBTYPE_BYTES, DBTYPE_WSTR, DBTYPE_BSTR, DBTYPE_XML, DBTYPE_STR, DBTYPE_VARIANT, and DBTYPE_IUNKNOWN.</span></span> <span data-ttu-id="f0e80-119">Los datos almacenados en columnas de tipo XML pueden recuperarse de una columna de un conjunto de filas del proveedor OLE DB de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client con los formatos siguientes:</span><span class="sxs-lookup"><span data-stu-id="f0e80-119">Data stored in columns of type XML can be retrieved from a column in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client OLE DB provider rowset in the following formats:</span></span>  
  
-   <span data-ttu-id="f0e80-120">Una cadena de texto</span><span class="sxs-lookup"><span data-stu-id="f0e80-120">A text string</span></span>  
  
-   <span data-ttu-id="f0e80-121">Un elemento **ISequentialStream**</span><span class="sxs-lookup"><span data-stu-id="f0e80-121">An **ISequentialStream**</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f0e80-122">El [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] proveedor de OLE DB de Native Client no incluye un lector Sax, pero **ISequentialStream** se puede pasar fácilmente a objetos Sax y Dom en MSXML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-122">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client OLE DB provider does not include a SAX reader, but the **ISequentialStream** can be easily passed to SAX and DOM objects in MSXML.</span></span>  
  
 <span data-ttu-id="f0e80-123">**ISequentialStream** debe usarse para la recuperación de documentos XML de gran tamaño.</span><span class="sxs-lookup"><span data-stu-id="f0e80-123">**ISequentialStream** should be use used for retrieval of large XML documents.</span></span> <span data-ttu-id="f0e80-124">Las mismas técnicas que se usan para otros tipos de valores grandes también se aplican a XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-124">The same techniques used for other large value types also apply to XML.</span></span> <span data-ttu-id="f0e80-125">Para más información, consulte [Usar tipos de valor grande](using-large-value-types.md).</span><span class="sxs-lookup"><span data-stu-id="f0e80-125">For more information, see [Using Large Value Types](using-large-value-types.md).</span></span>  
  
 <span data-ttu-id="f0e80-126">Una aplicación también puede recuperar, insertar o actualizar datos almacenados en columnas de tipo XML de un conjunto de filas mediante las interfaces habituales, como **IRow::GetColumns**, **IRowChange::SetColumns** e **ICommand::Execute**.</span><span class="sxs-lookup"><span data-stu-id="f0e80-126">Data stored in columns of type XML in a rowset can also be retrieved, inserted, or updated by an application via the usual interfaces such as **IRow::GetColumns**, **IRowChange::SetColumns**, and **ICommand::Execute**.</span></span> <span data-ttu-id="f0e80-127">De forma similar al caso de recuperación, un programa de aplicación puede pasar una cadena de texto o una **ISequentialStream** al [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] proveedor de OLE DB de Native Client.</span><span class="sxs-lookup"><span data-stu-id="f0e80-127">Similarly to the retrieval case, an application program can pass either a text string or an **ISequentialStream** to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client OLE DB provider.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f0e80-128">Para enviar datos XML en formato de cadena mediante la interfaz **ISequentialStream**, tiene que obtener **ISequentialStream** especificando DBTYPE_IUNKNOWN y establecer su argumento *pObject* en NULL en el enlace.</span><span class="sxs-lookup"><span data-stu-id="f0e80-128">To send XML data in string format through the **ISequentialStream** interface, you must obtain **ISequentialStream** by specifying DBTYPE_IUNKNOWN and set its *pObject* argument to null in the binding.</span></span>  
  
 <span data-ttu-id="f0e80-129">Cuando los datos XML recuperados se truncan debido a que el búfer del consumidor es demasiado pequeño, la longitud puede devolverse como 0xffffffff, lo que significa que no se conoce la longitud.</span><span class="sxs-lookup"><span data-stu-id="f0e80-129">When retrieved XML data is truncated due to the consumer buffer being too small, the length may be returned as 0xffffffff, which means that the length is unknown.</span></span> <span data-ttu-id="f0e80-130">Esto es coherente con su implementación como un tipo de datos que se transmite por secuencias al cliente sin enviar la información de longitud antes que los datos reales.</span><span class="sxs-lookup"><span data-stu-id="f0e80-130">This is consistent with its implementation as a data type that is streamed to the client without sending length information ahead of the actual data.</span></span> <span data-ttu-id="f0e80-131">En algunos casos, se puede devolver la longitud real cuando el proveedor ha almacenado en búfer el valor completo, como **IRowset:: GetData** y donde se realiza la conversión de datos.</span><span class="sxs-lookup"><span data-stu-id="f0e80-131">In some cases the actual length may be returned when the provider has buffered the whole value, such as **IRowset::GetData** and where data conversion is performed.</span></span>  
  
 <span data-ttu-id="f0e80-132">El servidor trata los datos XML enviados a SQL Server como datos binarios.</span><span class="sxs-lookup"><span data-stu-id="f0e80-132">XML data sent to SQL Server is treated as binary data by the server.</span></span> <span data-ttu-id="f0e80-133">Esto impide que se produzcan conversiones y permite al analizador XML detectar automáticamente la codificación XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-133">This prevents any conversions occurring and allows the XML parser to auto-detect the XML encoding.</span></span> <span data-ttu-id="f0e80-134">De esta forma puede aceptarse una mayor variedad de documentos XML como entrada para [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (por ejemplo, los documentos codificados en UTF-8).</span><span class="sxs-lookup"><span data-stu-id="f0e80-134">This allows a wider range of XML documents (for example those encoded in UTF-8) to be accepted as input to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="f0e80-135">Si el XML de entrada se enlaza como DBTYPE_WSTR, la aplicación debe asegurarse de que se trata de Unicode codificado para evitar cualquier posibilidad de que se produzcan daños a causa de conversiones de datos no deseadas.</span><span class="sxs-lookup"><span data-stu-id="f0e80-135">If input XML is bound as DBTYPE_WSTR, the application must ensure it is already Unicode encoded to avoid any possibility of corruption by unwanted data conversions.</span></span>  
  
### <a name="data-bindings-and-coercions"></a><span data-ttu-id="f0e80-136">Enlaces y conversiones de datos</span><span class="sxs-lookup"><span data-stu-id="f0e80-136">Data Bindings and Coercions</span></span>  
 <span data-ttu-id="f0e80-137">En la tabla siguiente, se describen el enlace y la coerción que tienen lugar al usar los tipos de datos enumerados con el tipo de datos  **xml** de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f0e80-137">The following table describes the binding and coercion that occurs when using the listed data types with the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] **xml** data type.</span></span>  
  
|<span data-ttu-id="f0e80-138">Tipo de datos</span><span class="sxs-lookup"><span data-stu-id="f0e80-138">Data type</span></span>|<span data-ttu-id="f0e80-139">A datos XML</span><span class="sxs-lookup"><span data-stu-id="f0e80-139">To Server</span></span><br /><br /> <span data-ttu-id="f0e80-140">**XML**</span><span class="sxs-lookup"><span data-stu-id="f0e80-140">**XML**</span></span>|<span data-ttu-id="f0e80-141">A datos XML</span><span class="sxs-lookup"><span data-stu-id="f0e80-141">To Server</span></span><br /><br /> <span data-ttu-id="f0e80-142">**Distinto de XML**</span><span class="sxs-lookup"><span data-stu-id="f0e80-142">**Non-XML**</span></span>|<span data-ttu-id="f0e80-143">Desde datos XML</span><span class="sxs-lookup"><span data-stu-id="f0e80-143">From Server</span></span><br /><br /> <span data-ttu-id="f0e80-144">**XML**</span><span class="sxs-lookup"><span data-stu-id="f0e80-144">**XML**</span></span>|<span data-ttu-id="f0e80-145">Desde datos XML</span><span class="sxs-lookup"><span data-stu-id="f0e80-145">From Server</span></span><br /><br /> <span data-ttu-id="f0e80-146">**Distinto de XML**</span><span class="sxs-lookup"><span data-stu-id="f0e80-146">**Non-XML**</span></span>|  
|---------------|---------------------------|--------------------------------|-----------------------------|----------------------------------|  
|<span data-ttu-id="f0e80-147">DBTYPE_XML</span><span class="sxs-lookup"><span data-stu-id="f0e80-147">DBTYPE_XML</span></span>|<span data-ttu-id="f0e80-148">Paso a través<sup>6,7</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-148">Pass through<sup>6,7</sup></span></span>|<span data-ttu-id="f0e80-149">Error<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-149">Error<sup>1</sup></span></span>|<span data-ttu-id="f0e80-150">Correcto<sup>11, 6</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-150">OK<sup>11, 6</sup></span></span>|<span data-ttu-id="f0e80-151">Error<sup>8</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-151">Error<sup>8</sup></span></span>|  
|<span data-ttu-id="f0e80-152">DBTYPE_BYTES</span><span class="sxs-lookup"><span data-stu-id="f0e80-152">DBTYPE_BYTES</span></span>|<span data-ttu-id="f0e80-153">Paso a través<sup>6,7</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-153">Pass through<sup>6,7</sup></span></span>|<span data-ttu-id="f0e80-154">N/D<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-154">N/A<sup>2</sup></span></span>|<span data-ttu-id="f0e80-155">Correcto<sup>11, 6</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-155">OK <sup>11, 6</sup></span></span>|<span data-ttu-id="f0e80-156">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-156">N/A <sup>2</sup></span></span>|  
|<span data-ttu-id="f0e80-157">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-157">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-158">Paso a través<sup>6,10</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-158">Pass through<sup>6,10</sup></span></span>|<span data-ttu-id="f0e80-159">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-159">N/A <sup>2</sup></span></span>|<span data-ttu-id="f0e80-160">Correcto<sup>4, 6, 12</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-160">OK<sup>4, 6, 12</sup></span></span>|<span data-ttu-id="f0e80-161">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-161">N/A <sup>2</sup></span></span>|  
|<span data-ttu-id="f0e80-162">DBTYPE_BSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-162">DBTYPE_BSTR</span></span>|<span data-ttu-id="f0e80-163">Paso a través<sup>6,10</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-163">Pass through<sup>6,10</sup></span></span>|<span data-ttu-id="f0e80-164">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-164">N/A <sup>2</sup></span></span>|<span data-ttu-id="f0e80-165">Correcto<sup>3</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-165">OK <sup>3</sup></span></span>|<span data-ttu-id="f0e80-166">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-166">N/A <sup>2</sup></span></span>|  
|<span data-ttu-id="f0e80-167">DBTYPE_STR</span><span class="sxs-lookup"><span data-stu-id="f0e80-167">DBTYPE_STR</span></span>|<span data-ttu-id="f0e80-168">Correcto<sup>6, 9, 10</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-168">OK<sup>6, 9, 10</sup></span></span>|<span data-ttu-id="f0e80-169">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-169">N/A <sup>2</sup></span></span>|<span data-ttu-id="f0e80-170">Correcto<sup>5, 6, 12</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-170">OK<sup>5, 6, 12</sup></span></span>|<span data-ttu-id="f0e80-171">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-171">N/A <sup>2</sup></span></span>|  
|<span data-ttu-id="f0e80-172">DBTYPE_IUNKNOWN</span><span class="sxs-lookup"><span data-stu-id="f0e80-172">DBTYPE_IUNKNOWN</span></span>|<span data-ttu-id="f0e80-173">Flujo de bytes mediante **ISequentialStream**<sup>7</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-173">Byte stream via **ISequentialStream**<sup>7</sup></span></span>|<span data-ttu-id="f0e80-174">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-174">N/A <sup>2</sup></span></span>|<span data-ttu-id="f0e80-175">Flujo de bytes mediante **ISequentialStream**<sup>11</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-175">Byte stream via **ISequentialStream**<sup>11</sup></span></span>|<span data-ttu-id="f0e80-176">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-176">N/A <sup>2</sup></span></span>|  
|<span data-ttu-id="f0e80-177">DBTYPE_VARIANT (VT_UI1 &#124; VT_ARRAY)</span><span class="sxs-lookup"><span data-stu-id="f0e80-177">DBTYPE_VARIANT (VT_UI1 &#124; VT_ARRAY)</span></span>|<span data-ttu-id="f0e80-178">Paso a través<sup>6,7</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-178">Pass through<sup>6,7</sup></span></span>|<span data-ttu-id="f0e80-179">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-179">N/A <sup>2</sup></span></span>|<span data-ttu-id="f0e80-180">N/D</span><span class="sxs-lookup"><span data-stu-id="f0e80-180">N/A</span></span>|<span data-ttu-id="f0e80-181">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-181">N/A <sup>2</sup></span></span>|  
|<span data-ttu-id="f0e80-182">DBTYPE_VARIANT (VT_BSTR)</span><span class="sxs-lookup"><span data-stu-id="f0e80-182">DBTYPE_VARIANT (VT_BSTR)</span></span>|<span data-ttu-id="f0e80-183">Paso a través<sup>6,10</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-183">Pass through<sup>6,10</sup></span></span>|<span data-ttu-id="f0e80-184">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-184">N/A <sup>2</sup></span></span>|<span data-ttu-id="f0e80-185">Correcto<sup>3</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-185">OK<sup>3</sup></span></span>|<span data-ttu-id="f0e80-186">N/A <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="f0e80-186">N/A <sup>2</sup></span></span>|  
  
 <span data-ttu-id="f0e80-187"><sup>1</sup> Si se especifica un tipo de servidor distinto de DBTYPE_XML con **ICommandWithParameters:: SetParameterInfo** y el tipo de descriptor de acceso es DBTYPE_XML, se produce un error cuando se ejecuta la instrucción (DB_E_ERRORSOCCURRED, el estado del parámetro es DBSTATUS_E_BADACCESSOR); en caso contrario, los datos se envían al servidor, pero el servidor devuelve un error que indica que no hay ninguna conversión implícita de XML al tipo de datos del parámetro.</span><span class="sxs-lookup"><span data-stu-id="f0e80-187"><sup>1</sup>If a server type other than DBTYPE_XML is specified with **ICommandWithParameters::SetParameterInfo** and the accessor type is DBTYPE_XML, an error occurs when the statement is executed (DB_E_ERRORSOCCURRED, the parameter status is DBSTATUS_E_BADACCESSOR); otherwise the data is sent to the server, but the server returns an error indicating that there is no implicit conversion from XML to the parameter's data type.</span></span>  
  
 <span data-ttu-id="f0e80-188"><sup>2</sup> Más allá del ámbito de este tema.</span><span class="sxs-lookup"><span data-stu-id="f0e80-188"><sup>2</sup>Beyond the scope of this topic.</span></span>  
  
 <span data-ttu-id="f0e80-189"><sup>3</sup>Formato UTF-16, sin marca de orden de bytes (BOM), sin especificación de codificación, sin terminación NULL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-189"><sup>3</sup>Format is UTF-16, no bye-order mark (BOM), no encoding specification, no null termination.</span></span>  
  
 <span data-ttu-id="f0e80-190"><sup>4</sup>Formato UTF-16, sin marca BOM, sin especificación de codificación, con terminación NULL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-190"><sup>4</sup>Format is UTF-16, no BOM, no encoding specification, null termination.</span></span>  
  
 <span data-ttu-id="f0e80-191"><sup>5</sup>Formato de caracteres multibyte codificados en la página de códigos de cliente con terminador NULL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-191"><sup>5</sup>Format is multibyte characters encoded in client code page with null terminator.</span></span> <span data-ttu-id="f0e80-192">La conversión del Unicode proporcionado por el servidor puede producir daños en los datos, de modo que no se recomienda utilizar este enlace.</span><span class="sxs-lookup"><span data-stu-id="f0e80-192">Conversion from server supplied Unicode may cause data corruption, so this binding is strongly discouraged.</span></span>  
  
 <span data-ttu-id="f0e80-193"><sup>6</sup>Puede usarse BY_REF.</span><span class="sxs-lookup"><span data-stu-id="f0e80-193"><sup>6</sup>BY_REF may be used.</span></span>  
  
 <span data-ttu-id="f0e80-194"><sup>7</sup>Los datos UTF-16 tienen que empezar con una marca BOM.</span><span class="sxs-lookup"><span data-stu-id="f0e80-194"><sup>7</sup>UTF-16 data must start with a BOM.</span></span> <span data-ttu-id="f0e80-195">Si no es así, es posible que el servidor no reconozca correctamente la codificación.</span><span class="sxs-lookup"><span data-stu-id="f0e80-195">If it does not, the encoding may not be correctly recognized by the server.</span></span>  
  
 <span data-ttu-id="f0e80-196"><sup>8</sup>La validación puede producirse en el momento de creación del descriptor de acceso o en el momento de la captura.</span><span class="sxs-lookup"><span data-stu-id="f0e80-196"><sup>8</sup>Validation can happen at create accessor time, or at fetch time.</span></span> <span data-ttu-id="f0e80-197">El error es DB_E_ERRORSOCCURRED, con el estado de enlace establecido en DBBINDSTATUS_UNSUPPORTEDCONVERSION.</span><span class="sxs-lookup"><span data-stu-id="f0e80-197">The error is DB_E_ERRORSOCCURRED, binding status set to DBBINDSTATUS_UNSUPPORTEDCONVERSION.</span></span>  
  
 <span data-ttu-id="f0e80-198"><sup>9</sup>Los datos se convierten a Unicode con la página de códigos del cliente antes de enviarse al servidor.</span><span class="sxs-lookup"><span data-stu-id="f0e80-198"><sup>9</sup>Data is converted to Unicode using the client codepage before being sent to the server.</span></span> <span data-ttu-id="f0e80-199">Si la codificación del documento no coincide con la página de códigos del cliente, pueden producirse daños en los datos, por lo que no se recomienda usar este enlace.</span><span class="sxs-lookup"><span data-stu-id="f0e80-199">If the document encoding does not match the client codepage, this can result in data corruption, so this binding is strongly discouraged.</span></span>  
  
 <span data-ttu-id="f0e80-200"><sup>10</sup>Siempre se agrega la marca BOM a los datos enviados al servidor.</span><span class="sxs-lookup"><span data-stu-id="f0e80-200"><sup>10</sup>A BOM is always added to data sent to the server.</span></span> <span data-ttu-id="f0e80-201">Si los datos ya comenzaban con una marca BOM, habrá dos marcas BOM al inicio del búfer.</span><span class="sxs-lookup"><span data-stu-id="f0e80-201">If the data already started with a BOM, this results in two BOMs at the start of the buffer.</span></span> <span data-ttu-id="f0e80-202">El servidor usa la primera marca BOM para reconocer la codificación como UTF-16 y, después, la descarta.</span><span class="sxs-lookup"><span data-stu-id="f0e80-202">The server uses the first BOM to recognize the encoding as UTF-16 and then discards it.</span></span> <span data-ttu-id="f0e80-203">La segunda marca se interpreta como un carácter de espacio de no separación de ancho cero.</span><span class="sxs-lookup"><span data-stu-id="f0e80-203">The second BOM is interpreted as a zero-width nonbreaking space character.</span></span>  
  
 <span data-ttu-id="f0e80-204"><sup>11</sup>Formato UTF-16 sin especificación de codificación, se agrega una marca BOM a los datos recibidos del servidor.</span><span class="sxs-lookup"><span data-stu-id="f0e80-204"><sup>11</sup>Format is UTF-16, no encoding specification, a BOM is added to data received from the server.</span></span> <span data-ttu-id="f0e80-205">Aunque el servidor devuelva una cadena vacía, se devuelve una marca BOM a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f0e80-205">If an empty string is returned by the server, a BOM is still returned to the application.</span></span> <span data-ttu-id="f0e80-206">Si la longitud del búfer es un número de bytes impar, los datos se truncan correctamente.</span><span class="sxs-lookup"><span data-stu-id="f0e80-206">If the buffer length is an odd number of bytes, the data is truncated correctly.</span></span> <span data-ttu-id="f0e80-207">Si el valor completo se devuelve en fragmentos, estos pueden concatenarse para reconstituir el valor correcto.</span><span class="sxs-lookup"><span data-stu-id="f0e80-207">If the whole value is returned in chunks, they can be concatenated to reconstitute the correct value.</span></span>  
  
 <span data-ttu-id="f0e80-208"><sup>12</sup> Si la longitud del búfer es inferior a dos caracteres, es decir, no hay espacio suficiente para la terminación de NULL, se genera un error de desbordamiento.</span><span class="sxs-lookup"><span data-stu-id="f0e80-208"><sup>12</sup>If the buffer length is less than two characters--that is, not enough space for null termination--an overflow error is reported.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f0e80-209">Los valores XML NULL no devuelven ningún dato.</span><span class="sxs-lookup"><span data-stu-id="f0e80-209">No data is returned for NULL XML values.</span></span>  
  
 <span data-ttu-id="f0e80-210">El estándar XML exige que el XML con codificación UTF-16 comience con una marca de orden de bytes (BOM), el código de carácter UTF-16 0xFEFF.</span><span class="sxs-lookup"><span data-stu-id="f0e80-210">The XML standard requires UTF-16 encoded XML to start with a byte-order mark (BOM), UTF-16 character code 0xFEFF.</span></span> <span data-ttu-id="f0e80-211">Cuando se trabaja con enlaces WSTR y BSTR, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client no requiere ni agrega una marca Bom, ya que la codificación está implícita en el enlace.</span><span class="sxs-lookup"><span data-stu-id="f0e80-211">When working with WSTR and BSTR bindings, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client does not require or add a BOM as the encoding is implied by the binding.</span></span> <span data-ttu-id="f0e80-212">Cuando se trabaja con enlaces BYTES, XML o IUNKNOWN, se intenta proporcionar simplicidad a la hora de actuar con otros sistemas de almacenamiento y procesadores XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-212">When working with BYTES, XML, or IUNKNOWN bindings, the intent is to provide simplicity in dealing with other XML processors and storage systems.</span></span> <span data-ttu-id="f0e80-213">En este caso, debe haber una marca BOM en el XML con codificación UTF-16 y la aplicación no necesita ocuparse de la codificación real, ya que la mayoría de los procesadores XML (incluido SQL Server) deducen la codificación inspeccionando los primeros bytes del valor.</span><span class="sxs-lookup"><span data-stu-id="f0e80-213">In this case a BOM should be present with UTF-16 encoded XML, and the application need not be concerned with the actual encoding, since the majority of XML processors (including SQL Server) deduces the encoding by inspecting the first few bytes of the value.</span></span> <span data-ttu-id="f0e80-214">Los datos XML recibidos de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client mediante enlaces bytes, XML o IUNKNOWN siempre están codificados en UTF-16 con una marca Bom y sin una declaración de codificación incrustada.</span><span class="sxs-lookup"><span data-stu-id="f0e80-214">XML data received from [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client using BYTES, XML, or IUNKNOWN bindings is always encoded in UTF-16 with a BOM and without an embedded encoding declaration.</span></span>  
  
 <span data-ttu-id="f0e80-215">Las conversiones de datos que proporcionan los servicios principales de OLE DB (**IDataConvert**) no pueden aplicarse en DBTYPE_XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-215">Data conversions supplied by OLE DB core services (**IDataConvert**) are not applicable to DBTYPE_XML.</span></span>  
  
 <span data-ttu-id="f0e80-216">La validación se lleva a cabo cuando los datos se envían al servidor.</span><span class="sxs-lookup"><span data-stu-id="f0e80-216">Validation is done when data is sent to the server.</span></span> <span data-ttu-id="f0e80-217">La aplicación debe administrar los cambios de codificación y la validación en el cliente; además, se recomienda no procesar los datos XML directamente sino usar un lector DOM o SAX para procesarlos.</span><span class="sxs-lookup"><span data-stu-id="f0e80-217">Client-side validation and encoding changes should be handled by your application, and it is strongly recommended that you not process the XML data directly, but should instead use a DOM or SAX reader to process it.</span></span>  
  
 <span data-ttu-id="f0e80-218">DBTYPE_NULL y DBTYPE_EMPTY pueden enlazarse en parámetros de entrada, pero no en parámetros de salida ni en resultados.</span><span class="sxs-lookup"><span data-stu-id="f0e80-218">DBTYPE_NULL and DBTYPE_EMPTY can be bound for input parameters but not for output parameters or results.</span></span> <span data-ttu-id="f0e80-219">Cuando se enlazan para parámetros de entrada, el estado debe establecerse en DBSTATUS_S_ISNULL o DBSTATUS_S_DEFAULT.</span><span class="sxs-lookup"><span data-stu-id="f0e80-219">When bound for input parameters the status must be set to DBSTATUS_S_ISNULL or DBSTATUS_S_DEFAULT.</span></span>  
  
 <span data-ttu-id="f0e80-220">DBTYPE_XML puede convertirse en DBTYPE_EMPTY y DBTYPE_NULL, DBTYPE_EMPTY puede convertirse en DBTYPE_XML, pero DBTYPE_NULL no puede convertirse en DBTYPE_XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-220">DBTYPE_XML can be converted to DBTYPE_EMPTY and DBTYPE_NULL, DBTYPE_EMPTY can be converted to DBTYPE_XML, but DBTYPE_NULL cannot be converted to DBTYPE_XML.</span></span> <span data-ttu-id="f0e80-221">Este comportamiento es coherente con el de DBTYPE_WSTR.</span><span class="sxs-lookup"><span data-stu-id="f0e80-221">This is consistent with DBTYPE_WSTR.</span></span>  
  
 <span data-ttu-id="f0e80-222">DBTYPE_IUNKNOWN es un enlace compatible (tal y como se mostraba en la tabla anterior), pero no hay ninguna conversión entre DBTYPE_XML y DBTYPE_IUNKNOWN.</span><span class="sxs-lookup"><span data-stu-id="f0e80-222">DBTYPE_IUNKNOWN is a supported binding (as shown in the above table), but there are no conversions between DBTYPE_XML and DBTYPE_IUNKNOWN.</span></span> <span data-ttu-id="f0e80-223">DBTYPE_IUNKNOWN no puede usarse con DBTYPE_BYREF.</span><span class="sxs-lookup"><span data-stu-id="f0e80-223">DBTYPE_IUNKNOWN may not be used with DBTYPE_BYREF.</span></span>  
  
### <a name="ole-db-rowset-additions-and-changes"></a><span data-ttu-id="f0e80-224">Adiciones y cambios en los conjuntos de filas de OLE DB</span><span class="sxs-lookup"><span data-stu-id="f0e80-224">OLE DB Rowset Additions and Changes</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]<span data-ttu-id="f0e80-225">Native Client agrega nuevos valores o cambios a muchos de los conjuntos de filas de esquema de OLE DB básicos.</span><span class="sxs-lookup"><span data-stu-id="f0e80-225">Native Client adds new values or changes to many of the core OLE DB schema rowsets.</span></span>  
  
#### <a name="the-columns-and-procedure_parameters-schema-rowsets"></a><span data-ttu-id="f0e80-226">Los conjuntos de filas de esquema COLUMNS y PROCEDURE_PARAMETERS</span><span class="sxs-lookup"><span data-stu-id="f0e80-226">The COLUMNS and PROCEDURE_PARAMETERS Schema Rowsets</span></span>  
 <span data-ttu-id="f0e80-227">Las adiciones a los conjuntos de filas de esquema COLUMNS y PROCEDURE_PARAMETERS incluyen las columnas siguientes.</span><span class="sxs-lookup"><span data-stu-id="f0e80-227">Additions to the COLUMNS and PROCEDURE_PARAMETERS schema rowsets include the following columns.</span></span>  
  
|<span data-ttu-id="f0e80-228">Nombre de la columna</span><span class="sxs-lookup"><span data-stu-id="f0e80-228">Column name</span></span>|<span data-ttu-id="f0e80-229">Tipo</span><span class="sxs-lookup"><span data-stu-id="f0e80-229">Type</span></span>|<span data-ttu-id="f0e80-230">Descripción</span><span class="sxs-lookup"><span data-stu-id="f0e80-230">Description</span></span>|  
|-----------------|----------|-----------------|  
|<span data-ttu-id="f0e80-231">SS_XML_SCHEMACOLLECTION_CATALOGNAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-231">SS_XML_SCHEMACOLLECTION_CATALOGNAME</span></span>|<span data-ttu-id="f0e80-232">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-232">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-233">Nombre del catálogo donde se define una colección de esquemas XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-233">The name of a catalog in which an XML schema collection is defined.</span></span> <span data-ttu-id="f0e80-234">Es NULL para una columna no XML o una columna XML sin tipo.</span><span class="sxs-lookup"><span data-stu-id="f0e80-234">NULL for a non-XML column or un-typed XML column.</span></span>|  
|<span data-ttu-id="f0e80-235">SS_XML_SCHEMACOLLECTION_SCHEMANAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-235">SS_XML_SCHEMACOLLECTION_SCHEMANAME</span></span>|<span data-ttu-id="f0e80-236">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-236">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-237">Nombre de un esquema donde se define una colección de esquemas XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-237">The name of a schema in which an XML schema collection is defined.</span></span> <span data-ttu-id="f0e80-238">Es NULL para una columna no XML o una columna XML sin tipo.</span><span class="sxs-lookup"><span data-stu-id="f0e80-238">NULL for a non-XML column or un-typed XML column.</span></span>|  
|<span data-ttu-id="f0e80-239">SS_XML_SCHEMACOLLECTIONNAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-239">SS_XML_SCHEMACOLLECTIONNAME</span></span>|<span data-ttu-id="f0e80-240">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-240">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-241">Nombre de la colección de esquemas XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-241">The name of XML schema collection.</span></span> <span data-ttu-id="f0e80-242">Es NULL para una columna no XML o una columna XML sin tipo.</span><span class="sxs-lookup"><span data-stu-id="f0e80-242">NULL for a non-XML column or un-typed XML column.</span></span>|  
  
#### <a name="the-provider_types-schema-rowset"></a><span data-ttu-id="f0e80-243">El conjunto de filas de esquema PROVIDER_TYPES</span><span class="sxs-lookup"><span data-stu-id="f0e80-243">The PROVIDER_TYPES Schema Rowset</span></span>  
 <span data-ttu-id="f0e80-244">En el conjunto de filas de esquema PROVIDER_TYPES, el valor de COLUMN_SIZE es 0 para el tipo de datos **xml** y DATA_TYPE es DBTYPE_XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-244">In the PROVIDER_TYPES schema rowset, the COLUMN_SIZE value is 0 for the **xml** data type, and the DATA_TYPE is DBTYPE_XML.</span></span>  
  
#### <a name="the-ss_xmlschema-schema-rowset"></a><span data-ttu-id="f0e80-245">El conjunto de filas de esquema SS_XMLSCHEMA</span><span class="sxs-lookup"><span data-stu-id="f0e80-245">The SS_XMLSCHEMA Schema Rowset</span></span>  
 <span data-ttu-id="f0e80-246">Se ha introducido un nuevo conjunto de filas de esquema SS_XMLSCHEMA para que los clientes recuperen información del esquema XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-246">A new schema rowset SS_XMLSCHEMA is introduced for clients to retrieve XML schema information.</span></span> <span data-ttu-id="f0e80-247">El conjunto de filas SS_XMLSCHEMA contiene las columnas siguientes.</span><span class="sxs-lookup"><span data-stu-id="f0e80-247">The SS_XMLSCHEMA rowset contains the following columns.</span></span>  
  
|<span data-ttu-id="f0e80-248">Nombre de la columna</span><span class="sxs-lookup"><span data-stu-id="f0e80-248">Column name</span></span>|<span data-ttu-id="f0e80-249">Tipo</span><span class="sxs-lookup"><span data-stu-id="f0e80-249">Type</span></span>|<span data-ttu-id="f0e80-250">Descripción</span><span class="sxs-lookup"><span data-stu-id="f0e80-250">Description</span></span>|  
|-----------------|----------|-----------------|  
|<span data-ttu-id="f0e80-251">SCHEMACOLLECTION_CATALOGNAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-251">SCHEMACOLLECTION_CATALOGNAME</span></span>|<span data-ttu-id="f0e80-252">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-252">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-253">Catálogo al que pertenece una colección XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-253">The catalog an XML collection belongs to.</span></span>|  
|<span data-ttu-id="f0e80-254">SCHEMACOLLECTION_SCHEMANAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-254">SCHEMACOLLECTION_SCHEMANAME</span></span>|<span data-ttu-id="f0e80-255">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-255">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-256">Esquema al que pertenece una colección XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-256">The schema an XML collection belongs to.</span></span>|  
|<span data-ttu-id="f0e80-257">SCHEMACOLLECTIONNAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-257">SCHEMACOLLECTIONNAME</span></span>|<span data-ttu-id="f0e80-258">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-258">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-259">Nombre de una colección de esquemas XML para columnas XML con tipo; de lo contrario, NULL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-259">The name of an XML schema collection for typed XML columns, NULL otherwise.</span></span>|  
|<span data-ttu-id="f0e80-260">TARGETNAMESPACEURI</span><span class="sxs-lookup"><span data-stu-id="f0e80-260">TARGETNAMESPACEURI</span></span>|<span data-ttu-id="f0e80-261">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-261">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-262">Espacio de nombres de destino de un esquema XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-262">The target name space of an XML schema.</span></span>|  
|<span data-ttu-id="f0e80-263">SCHEMACONTENT</span><span class="sxs-lookup"><span data-stu-id="f0e80-263">SCHEMACONTENT</span></span>|<span data-ttu-id="f0e80-264">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-264">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-265">Contenido del esquema XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-265">The XML schema content.</span></span>|  
  
 <span data-ttu-id="f0e80-266">Los esquemas XML tienen como ámbito el nombre del catálogo, el nombre de esquema, el nombre de la colección de esquemas y el identificador uniforme de recursos (URI) del espacio de nombres de destino.</span><span class="sxs-lookup"><span data-stu-id="f0e80-266">Each XML schema is scoped by catalog name, schema name, schema collection name, and target name space Uniform Resource Identifier (URI).</span></span> <span data-ttu-id="f0e80-267">También se define un nuevo GUID con el nombre DBSCHEMA_XML_COLLECTIONS.</span><span class="sxs-lookup"><span data-stu-id="f0e80-267">In addition, a new GUID with the name DBSCHEMA_XML_COLLECTIONS is also defined.</span></span> <span data-ttu-id="f0e80-268">El número de restricciones y las columnas restringidas del conjunto de filas de esquema SS_XMLSCHEMA se definen tal y como se indica a continuación.</span><span class="sxs-lookup"><span data-stu-id="f0e80-268">The number of restrictions and restricted columns for the SS_XMLSCHEMA schema rowset are defined as follows.</span></span>  
  
|<span data-ttu-id="f0e80-269">GUID</span><span class="sxs-lookup"><span data-stu-id="f0e80-269">GUID</span></span>|<span data-ttu-id="f0e80-270">Número de restricciones</span><span class="sxs-lookup"><span data-stu-id="f0e80-270">Number of restrictions</span></span>|<span data-ttu-id="f0e80-271">Columnas restringidas</span><span class="sxs-lookup"><span data-stu-id="f0e80-271">Restricted columns</span></span>|  
|----------|----------------------------|------------------------|  
|<span data-ttu-id="f0e80-272">DBSCHEMA_XML_COLLECTIONS</span><span class="sxs-lookup"><span data-stu-id="f0e80-272">DBSCHEMA_XML_COLLECTIONS</span></span>|<span data-ttu-id="f0e80-273">4</span><span class="sxs-lookup"><span data-stu-id="f0e80-273">4</span></span>|<span data-ttu-id="f0e80-274">SCHEMACOLLECTION_CATALOGNAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-274">SCHEMACOLLECTION_CATALOGNAME</span></span><br /><br /> <span data-ttu-id="f0e80-275">SCHEMACOLLECTION_SCHEMANAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-275">SCHEMACOLLECTION_SCHEMANAME</span></span><br /><br /> <span data-ttu-id="f0e80-276">SCHEMACOLLECTIONNAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-276">SCHEMACOLLECTIONNAME</span></span><br /><br /> <span data-ttu-id="f0e80-277">TARGETNAMESPACEURI</span><span class="sxs-lookup"><span data-stu-id="f0e80-277">TARGETNAMESPACEURI</span></span>|  
  
### <a name="ole-db-property-set-additions-and-changes"></a><span data-ttu-id="f0e80-278">Adiciones y cambios en los conjuntos de propiedades de OLE DB</span><span class="sxs-lookup"><span data-stu-id="f0e80-278">OLE DB Property Set Additions and Changes</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]<span data-ttu-id="f0e80-279">Native Client agrega nuevos valores o cambios a muchos de los conjuntos de propiedades de OLE DB básicos.</span><span class="sxs-lookup"><span data-stu-id="f0e80-279">Native Client adds new values or changes to many of the core OLE DB property sets.</span></span>  
  
#### <a name="the-dbpropset_sqlserverparameter-property-set"></a><span data-ttu-id="f0e80-280">El conjunto de propiedades DBPROPSET_SQLSERVERPARAMETER</span><span class="sxs-lookup"><span data-stu-id="f0e80-280">The DBPROPSET_SQLSERVERPARAMETER Property Set</span></span>  
 <span data-ttu-id="f0e80-281">Para admitir el tipo de datos **XML** a través de OLE DB, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client implementa el nuevo conjunto de propiedades DBPROPSET_SQLSERVERPARAMETER, que contiene los valores siguientes.</span><span class="sxs-lookup"><span data-stu-id="f0e80-281">In order to support the **xml** data type through OLE DB, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client implements the new DBPROPSET_SQLSERVERPARAMETER property set, which contains the following values.</span></span>  
  
|<span data-ttu-id="f0e80-282">Nombre</span><span class="sxs-lookup"><span data-stu-id="f0e80-282">Name</span></span>|<span data-ttu-id="f0e80-283">Tipo</span><span class="sxs-lookup"><span data-stu-id="f0e80-283">Type</span></span>|<span data-ttu-id="f0e80-284">Descripción</span><span class="sxs-lookup"><span data-stu-id="f0e80-284">Description</span></span>|  
|----------|----------|-----------------|  
|<span data-ttu-id="f0e80-285">SSPROP_PARAM_XML_SCHEMACOLLECTION_CATALOGNAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-285">SSPROP_PARAM_XML_SCHEMACOLLECTION_CATALOGNAME</span></span>|<span data-ttu-id="f0e80-286">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-286">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-287">Nombre del catálogo (base de datos) donde se define una colección de esquemas XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-287">The name of a catalog (database) in which an XML schema collection is defined.</span></span> <span data-ttu-id="f0e80-288">Una de las partes del identificador de nombre de tres partes de SQL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-288">A part of the SQL three-part name identifier.</span></span>|  
|<span data-ttu-id="f0e80-289">SSPROP_PARAM_XML_SCHEMACOLLECTION_SCHEMANAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-289">SSPROP_PARAM_XML_SCHEMACOLLECTION_SCHEMANAME</span></span>|<span data-ttu-id="f0e80-290">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-290">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-291">Nombre de un esquema XML de la colección de esquemas.</span><span class="sxs-lookup"><span data-stu-id="f0e80-291">The name of an XML schema within the schema collection.</span></span> <span data-ttu-id="f0e80-292">Una de las partes del identificador de nombre de tres partes de SQL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-292">A part of the SQL three -part name identifier.</span></span>|  
|<span data-ttu-id="f0e80-293">SSPROP_PARAM_XML_SCHEMACOLLECTIONNAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-293">SSPROP_PARAM_XML_SCHEMACOLLECTIONNAME</span></span>|<span data-ttu-id="f0e80-294">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-294">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-295">Nombre de la colección de esquemas XML del catálogo. Una de las partes del identificador de nombre de tres partes de SQL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-295">The name of the XML schema collection within the catalog A part of the SQL three -part name identifier.</span></span>|  
  
#### <a name="the-dbpropset_sqlservercolumn-property-set"></a><span data-ttu-id="f0e80-296">El conjunto de propiedades DBPROPSET_SQLSERVERCOLUMN</span><span class="sxs-lookup"><span data-stu-id="f0e80-296">The DBPROPSET_SQLSERVERCOLUMN Property Set</span></span>  
 <span data-ttu-id="f0e80-297">Para admitir la creación de tablas en la interfaz **ITableDefinition** , [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client agrega tres nuevas columnas al conjunto de propiedades DBPROPSET_SQLSERVERCOLUMN.</span><span class="sxs-lookup"><span data-stu-id="f0e80-297">To support the creation of tables in the **ITableDefinition** interface, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client adds three new columns to the DBPROPSET_SQLSERVERCOLUMN property set.</span></span>  
  
|<span data-ttu-id="f0e80-298">Nombre</span><span class="sxs-lookup"><span data-stu-id="f0e80-298">Name</span></span>|<span data-ttu-id="f0e80-299">Tipo</span><span class="sxs-lookup"><span data-stu-id="f0e80-299">Type</span></span>|<span data-ttu-id="f0e80-300">Descripción</span><span class="sxs-lookup"><span data-stu-id="f0e80-300">Description</span></span>|  
|----------|----------|-----------------|  
|<span data-ttu-id="f0e80-301">SSPROP_COL_XML_SCHEMACOLLECTION_CATALOGNAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-301">SSPROP_COL_XML_SCHEMACOLLECTION_CATALOGNAME</span></span>|<span data-ttu-id="f0e80-302">VT_BSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-302">VT_BSTR</span></span>|<span data-ttu-id="f0e80-303">Para las columnas XML con tipo, esta propiedad es una cadena que especifica el nombre del catálogo donde se almacena el esquema XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-303">For typed XML columns, this property is a string specifying the name of the catalog where the XML schema is stored.</span></span> <span data-ttu-id="f0e80-304">Para otros tipos de columna, esta propiedad devuelve una cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="f0e80-304">For other column types this property returns an empty string.</span></span>|  
|<span data-ttu-id="f0e80-305">SSPROP_COL_XML_SCHEMACOLLECTION_SCHEMANAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-305">SSPROP_COL_XML_SCHEMACOLLECTION_SCHEMANAME</span></span>|<span data-ttu-id="f0e80-306">VT_BSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-306">VT_BSTR</span></span>|<span data-ttu-id="f0e80-307">Para las columnas XML con tipo, esta propiedad es una cadena que especifica el nombre del esquema XML que define esta columna.</span><span class="sxs-lookup"><span data-stu-id="f0e80-307">For typed XML columns, this property is a string specifying the name of XML schema that defines this column.</span></span>|  
|<span data-ttu-id="f0e80-308">SSPROP_COL_XML_SCHEMACOLLECTIONNAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-308">SSPROP_COL_XML_SCHEMACOLLECTIONNAME</span></span>|<span data-ttu-id="f0e80-309">VT_BSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-309">VT_BSTR</span></span>|<span data-ttu-id="f0e80-310">Para las columnas XML con tipo, esta propiedad es una cadena que especifica el nombre de la colección de esquemas XML que define el valor.</span><span class="sxs-lookup"><span data-stu-id="f0e80-310">For typed XML columns, this property is a string specifying the name of the schema XML schema collection defining the value.</span></span>|  
  
 <span data-ttu-id="f0e80-311">Al igual que los valores de SSPROP_PARAM, todas estas propiedades son opcionales y su valor predeterminado es una cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="f0e80-311">Like the SSPROP_PARAM values, all of these properties are optional and default to empty.</span></span> <span data-ttu-id="f0e80-312">SSPROP_COL_XML_SCHEMACOLLECTION_CATALOGNAME y SSPROP_COL_XML_SCHEMACOLLECTION_SCHEMANAME solo pueden especificarse si se especifica SSPROP_COL_XML_SCHEMACOLLECTIONNAME.</span><span class="sxs-lookup"><span data-stu-id="f0e80-312">SSPROP_COL_XML_SCHEMACOLLECTION_CATALOGNAME and SSPROP_COL_XML_SCHEMACOLLECTION_SCHEMANAME may only be specified if SSPROP_COL_XML_SCHEMACOLLECTIONNAME is specified.</span></span> <span data-ttu-id="f0e80-313">Al pasar XML al servidor, si se incluyen estos valores se comprueba su existencia (validez) en la base de datos actual y los datos de instancia se comprueban en el esquema.</span><span class="sxs-lookup"><span data-stu-id="f0e80-313">When passing XML to the server, if these values are included they are checked for existence (validity) against the current database and the instance data is checked against the schema.</span></span> <span data-ttu-id="f0e80-314">En todos los casos, para ser válidos, deben estar todos vacíos o todos rellenos.</span><span class="sxs-lookup"><span data-stu-id="f0e80-314">In all cases, to be valid they are either all empty or all filled in.</span></span>  
  
### <a name="ole-db-interface-additions-and-changes"></a><span data-ttu-id="f0e80-315">Adiciones y cambios en las interfaces de OLE DB</span><span class="sxs-lookup"><span data-stu-id="f0e80-315">OLE DB Interface Additions and Changes</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]<span data-ttu-id="f0e80-316">Native Client agrega nuevos valores o cambios a muchas de las interfaces de OLE DB principales.</span><span class="sxs-lookup"><span data-stu-id="f0e80-316">Native Client adds new values or changes to many of the core OLE DB interfaces.</span></span>  
  
#### <a name="the-isscommandwithparameters-interface"></a><span data-ttu-id="f0e80-317">La interfaz ISSCommandWithParameters</span><span class="sxs-lookup"><span data-stu-id="f0e80-317">The ISSCommandWithParameters Interface</span></span>  
 <span data-ttu-id="f0e80-318">Con el fin de admitir el tipo de datos **XML** a través de OLE DB, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client implementa diversos cambios, incluida la adición de la interfaz [ISSCommandWithParameters](../../native-client-ole-db-interfaces/isscommandwithparameters-ole-db.md) .</span><span class="sxs-lookup"><span data-stu-id="f0e80-318">In order to support the **xml** data type through OLE DB, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client implements a number of changes including the addition of the [ISSCommandWithParameters](../../native-client-ole-db-interfaces/isscommandwithparameters-ole-db.md) interface.</span></span> <span data-ttu-id="f0e80-319">Esta nueva interfaz hereda de la interfaz OLE DB básica **ICommandWithParameters**.</span><span class="sxs-lookup"><span data-stu-id="f0e80-319">This new interface inherits from the core OLE DB interface **ICommandWithParameters**.</span></span> <span data-ttu-id="f0e80-320">Además de los tres métodos heredados de **ICommandWithParameters**; **GetParameterInfo**, **MapParameterNames**y **SetParameterInfo**; **ISSCommandWithParameters** proporciona los métodos [GetParameterProperties](../../native-client-ole-db-interfaces/isscommandwithparameters-getparameterproperties-ole-db.md) y [SetParameterProperties](../../native-client-ole-db-interfaces/isscommandwithparameters-setparameterproperties-ole-db.md) que se usan para administrar tipos de datos específicos del servidor.</span><span class="sxs-lookup"><span data-stu-id="f0e80-320">In addition to the three methods inherited from **ICommandWithParameters**; **GetParameterInfo**, **MapParameterNames**, and **SetParameterInfo**; **ISSCommandWithParameters** provides the [GetParameterProperties](../../native-client-ole-db-interfaces/isscommandwithparameters-getparameterproperties-ole-db.md) and [SetParameterProperties](../../native-client-ole-db-interfaces/isscommandwithparameters-setparameterproperties-ole-db.md) methods that are used to handle server specific data types.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f0e80-321">La interfaz **ISSCommandWithParameters** también usa la nueva estructura SSPARAMPROPS.</span><span class="sxs-lookup"><span data-stu-id="f0e80-321">The **ISSCommandWithParameters** interface also makes use of the new SSPARAMPROPS structure.</span></span>  
  
#### <a name="the-icolumnsrowset-interface"></a><span data-ttu-id="f0e80-322">La interfaz IColumnsRowset</span><span class="sxs-lookup"><span data-stu-id="f0e80-322">The IColumnsRowset Interface</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]<span data-ttu-id="f0e80-323">Native Client agrega las siguientes [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] columnas específicas del conjunto de filas devuelto por el método **IColumnRowset:: GetColumnsRowset** .</span><span class="sxs-lookup"><span data-stu-id="f0e80-323">Native Client adds the following [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-specific columns to the rowset returned by the **IColumnRowset::GetColumnsRowset** method.</span></span> <span data-ttu-id="f0e80-324">Estas columnas contienen el nombre de tres partes de una colección de esquemas XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-324">These columns contain the three-part name of an XML schema collection.</span></span> <span data-ttu-id="f0e80-325">Para las columnas que no son XML o las columnas XML sin tipo, las tres columnas toman el valor predeterminado NULL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-325">For non-XML columns or untyped XML columns, all three columns take the default value of NULL.</span></span>  
  
|<span data-ttu-id="f0e80-326">Nombre de la columna</span><span class="sxs-lookup"><span data-stu-id="f0e80-326">Column name</span></span>|<span data-ttu-id="f0e80-327">Tipo</span><span class="sxs-lookup"><span data-stu-id="f0e80-327">Type</span></span>|<span data-ttu-id="f0e80-328">Descripción</span><span class="sxs-lookup"><span data-stu-id="f0e80-328">Description</span></span>|  
|-----------------|----------|-----------------|  
|<span data-ttu-id="f0e80-329">DBCOLUMN_SS_XML_SCHEMACOLLECTION_CATALOGNAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-329">DBCOLUMN_SS_XML_SCHEMACOLLECTION_CATALOGNAME</span></span>|<span data-ttu-id="f0e80-330">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-330">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-331">Catálogo al que pertenece una colección de esquemas XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-331">The catalog an XML schema collection belongs to,</span></span><br /><br /> <span data-ttu-id="f0e80-332">De lo contrario, NULL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-332">NULL otherwise.</span></span>|  
|<span data-ttu-id="f0e80-333">DBCOLUMN_SS_XML_SCHEMACOLLECTION_SCHEMANAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-333">DBCOLUMN_SS_XML_SCHEMACOLLECTION_SCHEMANAME</span></span>|<span data-ttu-id="f0e80-334">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-334">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-335">Esquema al que pertenece una colección de esquemas XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-335">The schema an XML schema collection belongs to.</span></span> <span data-ttu-id="f0e80-336">De lo contrario, NULL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-336">NULL otherwise.</span></span>|  
|<span data-ttu-id="f0e80-337">DBCOLUMN_SS_XML_SCHEMACOLLECTIONNAME</span><span class="sxs-lookup"><span data-stu-id="f0e80-337">DBCOLUMN_SS_XML_SCHEMACOLLECTIONNAME</span></span>|<span data-ttu-id="f0e80-338">DBTYPE_WSTR</span><span class="sxs-lookup"><span data-stu-id="f0e80-338">DBTYPE_WSTR</span></span>|<span data-ttu-id="f0e80-339">Nombre de una colección de esquemas XML para columnas XML con tipo; de lo contrario, NULL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-339">The name of XML schema collection for typed XML column, NULL otherwise.</span></span>|  
  
#### <a name="the-irowset-interface"></a><span data-ttu-id="f0e80-340">La interfaz IRowset</span><span class="sxs-lookup"><span data-stu-id="f0e80-340">The IRowset Interface</span></span>  
 <span data-ttu-id="f0e80-341">La instancia XML de una columna XML se recupera a través del método **IRowset::GetData**.</span><span class="sxs-lookup"><span data-stu-id="f0e80-341">An XML instance in an XML column is retrieved through the **IRowset::GetData** method.</span></span> <span data-ttu-id="f0e80-342">Una instancia XML puede recuperarse como DBTYPE_BSTR, DBTYPE_WSTR, DBTYPE_VARIANT, DBTYPE_XML, DBTYPE_STR, DBTYPE_BYTES o como una interfaz a través de DBTYPE_IUNKNOWN, en función del enlace especificado por el cliente.</span><span class="sxs-lookup"><span data-stu-id="f0e80-342">Depending on the binding specified by the client, an XML instance can be retrieved as DBTYPE_BSTR, DBTYPE_WSTR, DBTYPE_VARIANT, DBTYPE_XML, DBTYPE_STR, DBTYPE_BYTES, or as an interface via DBTYPE_IUNKNOWN.</span></span> <span data-ttu-id="f0e80-343">Si el consumidor especifica DBTYPE_BSTR, DBTYPE_WSTR o DBTYPE_VARIANT, el proveedor convierte la instancia XML en el tipo solicitado por el usuario y la coloca en la ubicación especificada en el enlace correspondiente.</span><span class="sxs-lookup"><span data-stu-id="f0e80-343">If the consumer specifies DBTYPE_BSTR, DBTYPE_WSTR, or DBTYPE_VARIANT, the provider converts the XML instance to the user requested type and put it into the location specified in the corresponding binding.</span></span>  
  
 <span data-ttu-id="f0e80-344">Si el consumidor especifica DBTYPE_IUNKNOWN y establece el argumento *pObject* en NULL o establece el argumento *pObject* en IID_ISequentialStream, el proveedor devuelve una interfaz **ISequentialStream** al consumidor para que este pueda transmitir los datos XML por secuencias fuera de la columna.</span><span class="sxs-lookup"><span data-stu-id="f0e80-344">If the consumer specifies DBTYPE_IUNKNOWN and sets the *pObject* argument to NULL, or sets the *pObject* argument to IID_ISequentialStream, the provider returns an **ISequentialStream** interface to the consumer so that the consumer can stream the XML data out of the column.</span></span> <span data-ttu-id="f0e80-345">Después, **ISequentialStream** devuelve los datos XML como una secuencia de caracteres Unicode.</span><span class="sxs-lookup"><span data-stu-id="f0e80-345">**ISequentialStream** then returns the XML data as a Unicode character stream.</span></span>  
  
 <span data-ttu-id="f0e80-346">Al devolver un valor XML enlazado a DBTYPE_IUNKNOWN, el proveedor notifica un valor de tamaño `sizeof (IUnknown *)`.</span><span class="sxs-lookup"><span data-stu-id="f0e80-346">When returning an XML value bound to DBTYPE_IUNKNOWN, the provider reports a size value of `sizeof (IUnknown *)`.</span></span> <span data-ttu-id="f0e80-347">Observe que esto es coherente con el enfoque que se aplica al enlazar una columna como DBTYPE_IUnknown o DBTYPE_IDISPATCH y con el enfoque que aplica DBTYPE_IUNKNOWN/ISequentialStream cuando no puede determinarse el tamaño exacto de la columna.</span><span class="sxs-lookup"><span data-stu-id="f0e80-347">Note that this is consistent with the approach taken when a column is bound as DBTYPE_IUnknown or DBTYPE_IDISPATCH, and by DBTYPE_IUNKNOWN/ISequentialStream when the exact column size cannot be determined.</span></span>  
  
#### <a name="the-irowsetchange-interface"></a><span data-ttu-id="f0e80-348">La interfaz IRowsetChange</span><span class="sxs-lookup"><span data-stu-id="f0e80-348">The IRowsetChange Interface</span></span>  
 <span data-ttu-id="f0e80-349">Un consumidor puede actualizar una instancia XML de una columna de dos formas.</span><span class="sxs-lookup"><span data-stu-id="f0e80-349">There are two ways a consumer can update an XML instance in a column.</span></span> <span data-ttu-id="f0e80-350">La primera, a través del objeto de almacenamiento **ISequentialStream** creado por el proveedor.</span><span class="sxs-lookup"><span data-stu-id="f0e80-350">The first one is through the storage object **ISequentialStream** created by the provider.</span></span> <span data-ttu-id="f0e80-351">El consumidor puede llamar al método **ISequentialStream::Write** para actualizar directamente la instancia XML devuelta por el proveedor.</span><span class="sxs-lookup"><span data-stu-id="f0e80-351">The consumer can call the **ISequentialStream::Write** method to directly update the XML instance returned by the provider.</span></span>  
  
 <span data-ttu-id="f0e80-352">La segunda, mediante los métodos **IRowsetChange::SetData** o **IRowsetChange::InsertRow**.</span><span class="sxs-lookup"><span data-stu-id="f0e80-352">The second approach is through **IRowsetChange::SetData** or **IRowsetChange::InsertRow** methods.</span></span> <span data-ttu-id="f0e80-353">En este enfoque, puede especificarse una instancia XML del búfer del consumidor en un enlace de tipo DBTYPE_BSTR, DBTYPE_WSTR, DBTYPE_VARIANT, DBTYPE_XML o DBTYPE_IUNKNOWN.</span><span class="sxs-lookup"><span data-stu-id="f0e80-353">In this approach, an XML instance in the consumer's buffer can be specified in a binding of type DBTYPE_BSTR, DBTYPE_WSTR, DBTYPE_VARIANT, DBTYPE_XML or DBTYPE_IUNKNOWN.</span></span>  
  
 <span data-ttu-id="f0e80-354">En caso de DBTYPE_BSTR, DBTYPE_WSTR o DBTYPE_VARIANT, el proveedor almacena la instancia XML que reside en el búfer del consumidor en la columna apropiada.</span><span class="sxs-lookup"><span data-stu-id="f0e80-354">In case of DBTYPE_BSTR, DBTYPE_WSTR, or DBTYPE_VARIANT, the provider stores the XML instance residing in the consumer buffer into the proper column.</span></span>  
  
 <span data-ttu-id="f0e80-355">En el caso de DBTYPE_IUNKNOWN/ISequentialStream, si el consumidor no especifica ningún objeto de almacenamiento, el consumidor debe crear un objeto **ISequentialStream** de antemano, enlazar el documento XML con el objeto y, a continuación, pasar el objeto al proveedor a través del método **IRowsetChange:: SetData** .</span><span class="sxs-lookup"><span data-stu-id="f0e80-355">In the case of DBTYPE_IUNKNOWN/ISequentialStream, if the consumer does not specify any storage object, the consumer must create an **ISequentialStream** object in advance, bind the XML document with the object, and then pass the object to the provider through the **IRowsetChange::SetData** method.</span></span> <span data-ttu-id="f0e80-356">El consumidor también puede crear un objeto de almacenamiento, establecer el argumento pObject en IID_ISequentialStream, crear un objeto **ISequentialStream** y, después, pasar el objeto **ISequentialStream** al método **IRowsetChange::SetData**.</span><span class="sxs-lookup"><span data-stu-id="f0e80-356">The consumer can also create a storage object, set the pObject argument to IID_ISequentialStream, create an **ISequentialStream** object and then pass the **ISequentialStream** object to the **IRowsetChange::SetData** method.</span></span> <span data-ttu-id="f0e80-357">En ambos casos, el proveedor puede recuperar el objeto XML a través del objeto **ISequentialStream** e insertarlo en una columna apropiada.</span><span class="sxs-lookup"><span data-stu-id="f0e80-357">In both cases, the provider can retrieve the XML object through the **ISequentialStream** object and insert it into a proper column.</span></span>  
  
#### <a name="the-irowsetupdate-interface"></a><span data-ttu-id="f0e80-358">La interfaz IRowsetUpdate</span><span class="sxs-lookup"><span data-stu-id="f0e80-358">The IRowsetUpdate Interface</span></span>  
 <span data-ttu-id="f0e80-359">La interfaz **IRowsetUpdate** proporciona funciones para las actualizaciones retrasadas.</span><span class="sxs-lookup"><span data-stu-id="f0e80-359">**IRowsetUpdate** interface provides functionality for delayed updates.</span></span> <span data-ttu-id="f0e80-360">Los datos que se ponen a disposición de los conjuntos de filas no se ponen a disposición de otras transacciones hasta que el consumidor llama al método **IRowsetUpdate: Update** .</span><span class="sxs-lookup"><span data-stu-id="f0e80-360">The data made available to the rowsets is not made available to other transactions until the consumer calls the **IRowsetUpdate:Update** method.</span></span>  
  
#### <a name="the-irowsetfind-interface"></a><span data-ttu-id="f0e80-361">La interfaz IRowsetFind</span><span class="sxs-lookup"><span data-stu-id="f0e80-361">The IRowsetFind Interface</span></span>  
 <span data-ttu-id="f0e80-362">El método **IRowsetFind::FindNextRow** no funciona con el tipo de datos **xml**.</span><span class="sxs-lookup"><span data-stu-id="f0e80-362">The **IRowsetFind::FindNextRow** method does not work with the **xml** data type.</span></span> <span data-ttu-id="f0e80-363">Cuando se llama a **IRowsetFind::FindNextRow** y el argumento *hAccessor* especifica una columna DBTYPE_XML, se devuelve DB_E_BADBINDINFO.</span><span class="sxs-lookup"><span data-stu-id="f0e80-363">When **IRowsetFind::FindNextRow** is called and the *hAccessor* argument specifies a column of DBTYPE_XML, DB_E_BADBINDINFO is returned.</span></span> <span data-ttu-id="f0e80-364">Esto ocurre independientemente del tipo de columna que se esté buscando.</span><span class="sxs-lookup"><span data-stu-id="f0e80-364">This occurs regardless of the type of column that is being searched.</span></span> <span data-ttu-id="f0e80-365">En los demás tipos de enlaces, se produce un error en **FindNextRow** con DB_E_BADCOMPAREOP si el tipo de datos de la columna que va a buscarse es **xml**.</span><span class="sxs-lookup"><span data-stu-id="f0e80-365">For any other binding type, the **FindNextRow** fails with DB_E_BADCOMPAREOP if the column to be searched is of the **xml** data type.</span></span>  
  
## <a name="sql-server-native-client-odbc-driver"></a><span data-ttu-id="f0e80-366">Controlador ODBC de SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="f0e80-366">SQL Server Native Client ODBC Driver</span></span>  
 <span data-ttu-id="f0e80-367">En el [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] controlador ODBC de Native Client, se han realizado varios cambios en varias funciones para admitir el tipo de datos **XML** .</span><span class="sxs-lookup"><span data-stu-id="f0e80-367">In the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client ODBC driver, a number of changes have been made to various functions to support the **xml** data type.</span></span>  
  
### <a name="sqlcolattribute"></a><span data-ttu-id="f0e80-368">SQLColAttribute</span><span class="sxs-lookup"><span data-stu-id="f0e80-368">SQLColAttribute</span></span>  
 <span data-ttu-id="f0e80-369">La función [SQLColAttribute](../../native-client-odbc-api/sqlcolattribute.md) tiene tres nuevos identificadores de campo, como SQL_CA_SS_XML_SCHEMACOLLECTION_CATALOG_NAME, SQL_CA_SS_XML_SCHEMACOLLECTION_SCHEMA_NAME y SQL_CA_SS _XML_SCHEMACOLLECTION_NAME.</span><span class="sxs-lookup"><span data-stu-id="f0e80-369">The [SQLColAttribute](../../native-client-odbc-api/sqlcolattribute.md) function has three new field identifiers, including SQL_CA_SS_XML_SCHEMACOLLECTION_CATALOG_NAME, SQL_CA_SS_XML_SCHEMACOLLECTION_SCHEMA_NAME, and SQL_CA_SS _XML_SCHEMACOLLECTION_NAME.</span></span>  
  
 <span data-ttu-id="f0e80-370">El [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] controlador ODBC de Native Client SQL_SS_LENGTH_UNLIMITED los informes para las columnas SQL_DESC_DISPLAY_SIZE y SQL_DESC_LENGTH.</span><span class="sxs-lookup"><span data-stu-id="f0e80-370">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client ODBC driver reports SQL_SS_LENGTH_UNLIMITED for the SQL_DESC_DISPLAY_SIZE and SQL_DESC_LENGTH columns.</span></span>  
  
### <a name="sqlcolumns"></a><span data-ttu-id="f0e80-371">SQLColumns</span><span class="sxs-lookup"><span data-stu-id="f0e80-371">SQLColumns</span></span>  
 <span data-ttu-id="f0e80-372">La función [SQLColumns](../../native-client-odbc-api/sqlcolumns.md) tiene tres columnas nuevas, entre las que se incluyen SS_XML_SCHEMACOLLECTION_CATALOG_NAME, SS_XML_SCHEMACOLLECTION_SCHEMA_NAME y SS_XML_SCHEMACOLLECTION_NAME.</span><span class="sxs-lookup"><span data-stu-id="f0e80-372">The [SQLColumns](../../native-client-odbc-api/sqlcolumns.md) function has three new columns including SS_XML_SCHEMACOLLECTION_CATALOG_NAME, SS_XML_SCHEMACOLLECTION_SCHEMA_NAME, and SS_XML_SCHEMACOLLECTION_NAME.</span></span> <span data-ttu-id="f0e80-373">La columna TYPE_NAME existente se usa para indicar el nombre del tipo XML, y el valor DATA_TYPE de una columna o parámetro de tipo XML es SQL_SS_XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-373">The existing TYPE_NAME column is used to indicate the name of the XML type, and the DATA_TYPE for a XML type column or parameter is SQL_SS_XML.</span></span>  
  
 <span data-ttu-id="f0e80-374">El [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] controlador ODBC de Native Client SQL_SS_LENGTH_UNLIMITED los valores COLUMN_SIZE y CHAR_OCTET_LENGTH.</span><span class="sxs-lookup"><span data-stu-id="f0e80-374">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client ODBC driver reports SQL_SS_LENGTH_UNLIMITED for the COLUMN_SIZE and CHAR_OCTET_LENGTH values.</span></span>  
  
### <a name="sqldescribecol"></a><span data-ttu-id="f0e80-375">SQLDescribeCol</span><span class="sxs-lookup"><span data-stu-id="f0e80-375">SQLDescribeCol</span></span>  
 <span data-ttu-id="f0e80-376">El [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] controlador ODBC de Native Client notifica SQL_SS_LENGTH_UNLIMITED cuando no se puede determinar el tamaño de columna en la función [SQLDescribeCol](../../native-client-odbc-api/sqldescribecol.md) .</span><span class="sxs-lookup"><span data-stu-id="f0e80-376">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client ODBC driver reports SQL_SS_LENGTH_UNLIMITED when the column size cannot be determined in the [SQLDescribeCol](../../native-client-odbc-api/sqldescribecol.md) function.</span></span>  
  
### <a name="sqlgettypeinfo"></a><span data-ttu-id="f0e80-377">SQLGetTypeInfo</span><span class="sxs-lookup"><span data-stu-id="f0e80-377">SQLGetTypeInfo</span></span>  
 <span data-ttu-id="f0e80-378">El [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] controlador ODBC de Native Client notifica SQL_SS_LENGTH_UNLIMITED como el COLUMN_SIZE máximo del tipo de datos **XML** en la función [SQLGetTypeInfo](../../native-client-odbc-api/sqlgettypeinfo.md) .</span><span class="sxs-lookup"><span data-stu-id="f0e80-378">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client ODBC driver reports SQL_SS_LENGTH_UNLIMITED as the maximum COLUMN_SIZE for the **xml** data type in the [SQLGetTypeInfo](../../native-client-odbc-api/sqlgettypeinfo.md) function.</span></span>  
  
### <a name="sqlprocedurecolumns"></a><span data-ttu-id="f0e80-379">SQLProcedureColumns</span><span class="sxs-lookup"><span data-stu-id="f0e80-379">SQLProcedureColumns</span></span>  
 <span data-ttu-id="f0e80-380">La función [SQLProcedureColumns](../../native-client-odbc-api/sqlprocedurecolumns.md) tiene las mismas adiciones de columna que la función **SQLColumns** .</span><span class="sxs-lookup"><span data-stu-id="f0e80-380">The [SQLProcedureColumns](../../native-client-odbc-api/sqlprocedurecolumns.md) function has the same column additions as the **SQLColumns** function.</span></span>  
  
 <span data-ttu-id="f0e80-381">El [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] controlador ODBC de Native Client informa SQL_SS_LENGTH_UNLIMITED como el COLUMN_SIZE máximo del tipo de datos **XML** .</span><span class="sxs-lookup"><span data-stu-id="f0e80-381">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client ODBC driver reports SQL_SS_LENGTH_UNLIMITED as the maximum COLUMN_SIZE for the **xml** data type.</span></span>  
  
### <a name="supported-conversions"></a><span data-ttu-id="f0e80-382">Conversiones admitidas</span><span class="sxs-lookup"><span data-stu-id="f0e80-382">Supported Conversions</span></span>  
 <span data-ttu-id="f0e80-383">Al convertir tipos de datos de SQL en tipos de datos de C, SQL_C_WCHAR, SQL_C_BINARY y SQL_C_CHAR pueden convertirse en SQL_SS_XML, con las condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="f0e80-383">When converting from SQL to C data types, SQL_C_WCHAR, SQL_C_BINARY, and SQL_C_CHAR can all be converted to SQL_SS_XML, with the following stipulations:</span></span>  
  
-   <span data-ttu-id="f0e80-384">SQL_C_WCHAR: formato UTF-16, sin marca de orden de bytes (BOM), con terminación NULL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-384">SQL_C_WCHAR: Format is UTF-16, no byte-order mark (BOM), with null termination.</span></span>  
  
-   <span data-ttu-id="f0e80-385">SQL_C_BINARY: formato UTF-16, sin terminación NULL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-385">SQL_C_BINARY: Format is UTF-16, with no null termination.</span></span> <span data-ttu-id="f0e80-386">Se agrega una marca BOM a los datos recibidos del servidor.</span><span class="sxs-lookup"><span data-stu-id="f0e80-386">A BOM is added to data received from the server.</span></span> <span data-ttu-id="f0e80-387">Aunque el servidor devuelva una cadena vacía, se devuelve una marca BOM a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f0e80-387">If an empty string is returned by the server a BOM is still returned to the application.</span></span> <span data-ttu-id="f0e80-388">Si la longitud de búfer es un número de bytes impar, los datos se truncan correctamente.</span><span class="sxs-lookup"><span data-stu-id="f0e80-388">If the buffer length is an odd number of bytes the data ise truncated correctly.</span></span> <span data-ttu-id="f0e80-389">Si el valor completo se devuelve en fragmentos, éstos pueden concatenarse para reconstituir el valor correcto.</span><span class="sxs-lookup"><span data-stu-id="f0e80-389">If the whole value is returned in chunks they can be concatenated to re-constitute the correct value</span></span>  
  
-   <span data-ttu-id="f0e80-390">SQL_C_CHAR: formato de caracteres multibyte codificados en la página de códigos del cliente con terminación NULL.</span><span class="sxs-lookup"><span data-stu-id="f0e80-390">SQL_C_CHAR: Format is multibyte characters encoded in client code page with null termination.</span></span> <span data-ttu-id="f0e80-391">La conversión del UTF-16 proporcionado por el servidor puede producir daños en los datos, de modo que no se recomienda usar este enlace.</span><span class="sxs-lookup"><span data-stu-id="f0e80-391">Conversion from server supplied UTF-16 may cause data corruption, so this binding is strongly discouraged.</span></span>  
  
 <span data-ttu-id="f0e80-392">Al convertir tipos de datos de C en tipos de datos de SQL, SQL_C_WCHAR, SQL_C_BINARY y SQL_C_CHAR pueden convertirse en SQL_SS_XML, con las condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="f0e80-392">When converting from C to SQL data types, SQL_C_WCHAR, SQL_C_BINARY, and SQL_C_CHAR can all be converted to SQL_SS_XML, with the following stipulations:</span></span>  
  
-   <span data-ttu-id="f0e80-393">SQL_C_WCHAR: siempre se agrega una marca BOM a los datos enviados al servidor.</span><span class="sxs-lookup"><span data-stu-id="f0e80-393">SQL_C_WCHAR: A BOM is always be added to data sent to the server.</span></span> <span data-ttu-id="f0e80-394">Si los datos ya comenzaban con una marca BOM, habrá dos marcas BOM al inicio del búfer.</span><span class="sxs-lookup"><span data-stu-id="f0e80-394">If the data already started with a BOM, this results in two BOMs at the start of the buffer.</span></span> <span data-ttu-id="f0e80-395">El servidor usa la primera marca para reconocer la codificación como UTF-16 y, a continuación, la descarta.</span><span class="sxs-lookup"><span data-stu-id="f0e80-395">The server uses the first BOM to recognize the encoding as UTF-16 and then discard it.</span></span> <span data-ttu-id="f0e80-396">La segunda marca se interpreta como un carácter de espacio de no separación de ancho cero.</span><span class="sxs-lookup"><span data-stu-id="f0e80-396">The second BOM is interpreted as a zero-width nonbreaking space character.</span></span>  
  
-   <span data-ttu-id="f0e80-397">SQL_C_BINARY: no se realiza ninguna conversión y los datos se pasan al servidor "tal cual".</span><span class="sxs-lookup"><span data-stu-id="f0e80-397">SQL_C_BINARY: No conversion is performed, and the data is passed to the server "as is."</span></span> <span data-ttu-id="f0e80-398">Los datos UTF-16 deben comenzar con una marca BOM; de lo contrario, es posible que el servidor no reconozca correctamente la codificación.</span><span class="sxs-lookup"><span data-stu-id="f0e80-398">UTF-16 data must start with a BOM; if it does not, the encoding may not be correctly recognized by the server.</span></span>  
  
-   <span data-ttu-id="f0e80-399">SQL_C_CHAR: los datos se convierten a UTF-16 en el cliente y se envían al servidor de la misma forma que SQL_C_WCHAR (incluida la adición de una marca BOM).</span><span class="sxs-lookup"><span data-stu-id="f0e80-399">SQL_C_CHAR: The data is converted to UTF-16 on the client and sent to the server just as SQL_C_WCHAR (including the addition of a BOM).</span></span> <span data-ttu-id="f0e80-400">Si el XML no está codificado en la página de códigos del cliente, pueden producirse daños en los datos.</span><span class="sxs-lookup"><span data-stu-id="f0e80-400">If the XML is not encoded in the client code page this can cause data corruption.</span></span>  
  
 <span data-ttu-id="f0e80-401">El estándar XML exige que el XML con codificación UTF-16 comience con una marca de orden de bytes (BOM), el código de carácter UTF-16 0xFEFF.</span><span class="sxs-lookup"><span data-stu-id="f0e80-401">The XML standard requires UTF-16 encoded XML to start with a byte-order mark (BOM), UTF-16 character code 0xFEFF.</span></span> <span data-ttu-id="f0e80-402">Cuando se trabaja con un enlace de SQL_C_BINARY, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client no requiere ni agrega una marca Bom, ya que la codificación está implícita en el enlace.</span><span class="sxs-lookup"><span data-stu-id="f0e80-402">When working with a SQL_C_BINARY binding, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client does not require or add a BOM, as the encoding is implied by the binding.</span></span> <span data-ttu-id="f0e80-403">Se intenta proporcionar simplicidad a la hora de actuar con otros sistemas de almacenamiento y procesadores XML.</span><span class="sxs-lookup"><span data-stu-id="f0e80-403">The intent is to provide simplicity in dealing with other XML processors and storage systems.</span></span> <span data-ttu-id="f0e80-404">En este caso, debe haber una marca BOM en el XML con codificación UTF-16 y la aplicación no necesita ocuparse de la codificación real, ya que la mayoría de los procesadores XML (incluido [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]) deducen la codificación inspeccionando los primeros bytes del valor.</span><span class="sxs-lookup"><span data-stu-id="f0e80-404">In this case a BOM should be present with UTF-16 encoded XML, and the application need not be concerned with the actual encoding, because the majority of XML processors (including [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]) deduce the encoding by inspecting the first few bytes of the value.</span></span> <span data-ttu-id="f0e80-405">Los datos XML recibidos de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client mediante enlaces de SQL_C_BINARY siempre se codifican en UTF-16 con una marca Bom y sin una declaración de codificación incrustada.</span><span class="sxs-lookup"><span data-stu-id="f0e80-405">XML data received from [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client using SQL_C_BINARY bindings are always encoded in UTF-16 with a BOM and without an embedded encoding declaration.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f0e80-406">Consulte también</span><span class="sxs-lookup"><span data-stu-id="f0e80-406">See Also</span></span>  
 <span data-ttu-id="f0e80-407">[Características de SQL Server Native Client](sql-server-native-client-features.md) </span><span class="sxs-lookup"><span data-stu-id="f0e80-407">[SQL Server Native Client Features](sql-server-native-client-features.md) </span></span>  
 [<span data-ttu-id="f0e80-408">ISSCommandWithParameters &#40;OLE DB&#41;</span><span class="sxs-lookup"><span data-stu-id="f0e80-408">ISSCommandWithParameters &#40;OLE DB&#41;</span></span>](../../native-client-ole-db-interfaces/isscommandwithparameters-ole-db.md)  
  
  
