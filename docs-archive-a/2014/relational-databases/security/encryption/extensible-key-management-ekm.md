---
title: Administración extensible de claves (EKM) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- Key Management
- Extensible Key Management
- EKM, described
ms.assetid: 9bfaf500-2d1e-4c02-b041-b8761a9e695b
author: jaszymas
ms.author: jaszymas
ms.openlocfilehash: 4fc9b002b57f8118494709f8fe27a8b19ce28d8e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87746207"
---
# <a name="extensible-key-management-ekm"></a><span data-ttu-id="c282a-102">Administración extensible de claves (EKM)</span><span class="sxs-lookup"><span data-stu-id="c282a-102">Extensible Key Management (EKM)</span></span>
  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c282a-103">proporciona las funciones del cifrado de datos junto con la *Administración extensible de claves* (EKM), las cuales usan la *API criptográfica de Microsoft* (MSCAPI) para el cifrado y generación de clave.</span><span class="sxs-lookup"><span data-stu-id="c282a-103">provides data encryption capabilities together with *Extensible Key Management* (EKM), using the *Microsoft Cryptographic API* (MSCAPI) provider for encryption and key generation.</span></span> <span data-ttu-id="c282a-104">Las claves de cifrado utilizadas para cifrar datos y claves se crean en contenedores transitorios de claves y se deben exportar desde un proveedor antes de que se almacenen en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="c282a-104">Encryption keys for data and key encryption are created in transient key containers, and they must be exported from a provider before they are stored in the database.</span></span> <span data-ttu-id="c282a-105">Este enfoque permite a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]llevar a cabo la administración de claves, que incluye una jerarquía de claves de cifrado y la copia de seguridad de las claves.</span><span class="sxs-lookup"><span data-stu-id="c282a-105">This approach enables key management that includes an encryption key hierarchy and key backup, to be handled by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="c282a-106">Con la creciente demanda para cumplir con las leyes y con las políticas de privacidad de datos, las organizaciones están aprovechándose del cifrado como una forma de obtener una solución de "defensa en profundidad".</span><span class="sxs-lookup"><span data-stu-id="c282a-106">With the growing demand for regulatory compliance and concern for data privacy, organizations are taking advantage of encryption as a way to provide a "defense in depth" solution.</span></span> <span data-ttu-id="c282a-107">Este enfoque es a menudo poco práctico si solo se utilizan las herramientas de administración del cifrado de base de datos.</span><span class="sxs-lookup"><span data-stu-id="c282a-107">This approach is often impractical using only database encryption management tools.</span></span> <span data-ttu-id="c282a-108">Los fabricantes de hardware proporcionan productos específicamente diseñados para la administración de claves de la empresa usando *Módulos de seguridad por hardware* (HSM).</span><span class="sxs-lookup"><span data-stu-id="c282a-108">Hardware vendors provide products that address enterprise key management by using *Hardware Security Modules* (HSM).</span></span> <span data-ttu-id="c282a-109">Los dispositivos HSM almacenan las claves de cifrado en módulos de hardware o de software.</span><span class="sxs-lookup"><span data-stu-id="c282a-109">HSM devices store encryption keys on hardware or software modules.</span></span> <span data-ttu-id="c282a-110">Ésta es una solución más segura porque las claves de cifrado no residen junto a los datos de cifrado.</span><span class="sxs-lookup"><span data-stu-id="c282a-110">This is a more secure solution because the encryption keys do not reside with encryption data.</span></span>  
  
 <span data-ttu-id="c282a-111">Varios fabricantes proporcionan HSM tanto para administración de claves como para la aceleración del cifrado.</span><span class="sxs-lookup"><span data-stu-id="c282a-111">A number of vendors offer HSM for both key management and encryption acceleration.</span></span> <span data-ttu-id="c282a-112">Los dispositivos HSM utilizan interfaces hardware junto con un proceso de servidor que actúan como un intermediario entre la aplicación y HSM.</span><span class="sxs-lookup"><span data-stu-id="c282a-112">HSM devices use hardware interfaces with a server process as an intermediary between an application and an HSM.</span></span> <span data-ttu-id="c282a-113">Los fabricantes también implementan proveedores de MSCAPI sobre sus módulos, que pueden ser de tipo hardware o software.</span><span class="sxs-lookup"><span data-stu-id="c282a-113">Vendors also implement MSCAPI providers over their modules, which might be hardware or software.</span></span> <span data-ttu-id="c282a-114">A menudo, MSCAPI proporciona solo un subconjunto de la funcionalidad que ofrece HSM.</span><span class="sxs-lookup"><span data-stu-id="c282a-114">MSCAPI often offers only a subset of the functionality that is offered by an HSM.</span></span> <span data-ttu-id="c282a-115">Los fabricantes también pueden proporcionar el software de administración para HSM, configuración de claves y acceso a claves.</span><span class="sxs-lookup"><span data-stu-id="c282a-115">Vendors can also provide management software for HSM, key configuration, and key access.</span></span>  
  
 <span data-ttu-id="c282a-116">Las implementaciones de HSM varían de un fabricante a otro y para poder utilizarlas con [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] es necesaria una interfaz común.</span><span class="sxs-lookup"><span data-stu-id="c282a-116">HSM implementations vary from vendor to vendor, and to use them with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] requires a common interface.</span></span> <span data-ttu-id="c282a-117">Aunque MSCAPI proporciona esta interfaz, admite solo un subconjunto de las características de HSM.</span><span class="sxs-lookup"><span data-stu-id="c282a-117">Although the MSCAPI provides this interface, it supports only a subset of the HSM features.</span></span> <span data-ttu-id="c282a-118">También tiene otras limitaciones, como la incapacidad para conservar de forma nativa las claves simétricas o la falta de compatibilidad orientada a sesiones.</span><span class="sxs-lookup"><span data-stu-id="c282a-118">It also has other limitations, such as the inability to natively persist symmetric keys, and a lack of session-oriented support.</span></span>  
  
 <span data-ttu-id="c282a-119">La Administración extensible de claves de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] permite a los fabricantes de EKM/HSM registrar sus módulos en [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c282a-119">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Extensible Key Management enables third-party EKM/HSM vendors to register their modules in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="c282a-120">Cuando se registra, los usuarios de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] pueden utilizar las claves de cifrado almacenadas en los módulos EKM.</span><span class="sxs-lookup"><span data-stu-id="c282a-120">When registered, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] users can use the encryption keys stored on EKM modules.</span></span> <span data-ttu-id="c282a-121">Esto permite a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] obtener acceso a las características de cifrado avanzadas que admiten estos módulos, como el cifrado y descifrado masivo, o las funciones de administración de claves, como el vencimiento o la rotación de claves.</span><span class="sxs-lookup"><span data-stu-id="c282a-121">This enables [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to access the advanced encryption features these modules support such as bulk encryption and decryption, and key management functions such as key aging and key rotation.</span></span>  
  
 <span data-ttu-id="c282a-122">Al ejecutar [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] en una máquina virtual de Azure, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] pueden usar claves almacenadas en el [almacén de claves de Azure](https://go.microsoft.com/fwlink/?LinkId=521401).</span><span class="sxs-lookup"><span data-stu-id="c282a-122">When running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in an Azure VM, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can use keys stored in the [Azure Key Vault](https://go.microsoft.com/fwlink/?LinkId=521401).</span></span> <span data-ttu-id="c282a-123">Para obtener más información, vea [Administración extensible de claves con el Almacén de claves de Azure &#40;SQL Server&#41;](extensible-key-management-using-azure-key-vault-sql-server.md)llevar a cabo la administración de claves, que incluye una jerarquía de claves de cifrado y la copia de seguridad de las claves.</span><span class="sxs-lookup"><span data-stu-id="c282a-123">For more information, see [Extensible Key Management Using Azure Key Vault &#40;SQL Server&#41;](extensible-key-management-using-azure-key-vault-sql-server.md).</span></span>  
  
## <a name="ekm-configuration"></a><span data-ttu-id="c282a-124">Configuración de EKM</span><span class="sxs-lookup"><span data-stu-id="c282a-124">EKM Configuration</span></span>  
 <span data-ttu-id="c282a-125">La Administración extensible de claves no está disponible en todas las ediciones de [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c282a-125">Extensible Key Management is not available in every edition of [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="c282a-126">Para obtener una lista de las características admitidas por las ediciones de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], vea [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="c282a-126">For a list of features that are supported by the editions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], see [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
 <span data-ttu-id="c282a-127">De forma predeterminada, la Administración extensible de claves está desactivada.</span><span class="sxs-lookup"><span data-stu-id="c282a-127">By default, Extensible Key Management is off.</span></span> <span data-ttu-id="c282a-128">Para habilitar esta característica, utilice el comando sp_configure, que tiene la siguiente opción y valor, tal y como se muestra en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="c282a-128">To enable this feature, use the sp_configure command that has the following option and value, as in the following example:</span></span>  
  
```  
sp_configure 'show advanced', 1  
GO  
RECONFIGURE  
GO  
sp_configure 'EKM provider enabled', 1  
GO  
RECONFIGURE  
GO  
```  
  
> [!NOTE]  
>  <span data-ttu-id="c282a-129">Si usa el comando sp_configure para esta opción en ediciones de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que no admiten EKM, recibirá un error.</span><span class="sxs-lookup"><span data-stu-id="c282a-129">If you use the sp_configure command for this option on editions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that do not support EKM, you will receive an error.</span></span>  
  
 <span data-ttu-id="c282a-130">Para deshabilitar la característica, establezca el valor en **0**.</span><span class="sxs-lookup"><span data-stu-id="c282a-130">To disable the feature, set the value to **0**.</span></span> <span data-ttu-id="c282a-131">Para obtener más información sobre cómo establecer las opciones de servidor, vea [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c282a-131">For more information about how to set server options, see [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql).</span></span>  
  
## <a name="how-to-use-ekm"></a><span data-ttu-id="c282a-132">Cómo utilizar EKM</span><span class="sxs-lookup"><span data-stu-id="c282a-132">How to Use EKM</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c282a-133">La Administración extensible de claves habilita las claves de cifrado que protegen los archivos de base de datos que se almacenan en un dispositivo externo, como puede ser una tarjeta inteligente, un dispositivo USB o un módulo EKM/HSM.</span><span class="sxs-lookup"><span data-stu-id="c282a-133">Extensible Key Management enables the encryption keys that protect the database files to be stored in an off-box device such as a smartcard, USB device, or EKM/HSM module.</span></span> <span data-ttu-id="c282a-134">Esto también habilita la protección de datos para los administradores de bases de datos (exceptuando a los miembros del grupo de sysadmin).</span><span class="sxs-lookup"><span data-stu-id="c282a-134">This also enables data protection from database administrators (except members of the sysadmin group).</span></span> <span data-ttu-id="c282a-135">Los datos se pueden cifrar utilizando claves de cifrado a las que solo tiene acceso el usuario de la base de datos en el módulo EKM/HSM externo.</span><span class="sxs-lookup"><span data-stu-id="c282a-135">Data can be encrypted by using encryption keys that only the database user has access to on the external EKM/HSM module.</span></span>  
  
 <span data-ttu-id="c282a-136">La Administración extensible de claves también ofrece las siguientes ventajas:</span><span class="sxs-lookup"><span data-stu-id="c282a-136">Extensible Key Management also provides the following benefits:</span></span>  
  
-   <span data-ttu-id="c282a-137">Comprobación de la autorización adicional (permitiendo la separación de tareas).</span><span class="sxs-lookup"><span data-stu-id="c282a-137">Additional authorization check (enabling separation of duties).</span></span>  
  
-   <span data-ttu-id="c282a-138">Mayor rendimiento en el cifrado o descifrado basado en hardware.</span><span class="sxs-lookup"><span data-stu-id="c282a-138">Higher performance for hardware-based encryption/decryption.</span></span>  
  
-   <span data-ttu-id="c282a-139">Generación de claves de cifrado externas.</span><span class="sxs-lookup"><span data-stu-id="c282a-139">External encryption key generation.</span></span>  
  
-   <span data-ttu-id="c282a-140">Almacenamiento externo de la clave de cifrado (separación física de datos y claves).</span><span class="sxs-lookup"><span data-stu-id="c282a-140">External encryption key storage (physical separation of data and keys).</span></span>  
  
-   <span data-ttu-id="c282a-141">Recuperación de claves de cifrado.</span><span class="sxs-lookup"><span data-stu-id="c282a-141">Encryption key retrieval.</span></span>  
  
-   <span data-ttu-id="c282a-142">Retención de claves de cifrado externas (permite la rotación de claves de cifrado).</span><span class="sxs-lookup"><span data-stu-id="c282a-142">External encryption key retention (enables encryption key rotation).</span></span>  
  
-   <span data-ttu-id="c282a-143">Recuperación de claves de cifrado más sencilla.</span><span class="sxs-lookup"><span data-stu-id="c282a-143">Easier encryption key recovery.</span></span>  
  
-   <span data-ttu-id="c282a-144">Distribución de claves de cifrado más flexible.</span><span class="sxs-lookup"><span data-stu-id="c282a-144">Manageable encryption key distribution.</span></span>  
  
-   <span data-ttu-id="c282a-145">Disposición de claves de cifrado segura.</span><span class="sxs-lookup"><span data-stu-id="c282a-145">Secure encryption key disposal.</span></span>  
  
 <span data-ttu-id="c282a-146">Puede utilizar Administración extensible de claves con una combinación de nombre de usuario y contraseña u otros métodos definidos por el controlador EKM.</span><span class="sxs-lookup"><span data-stu-id="c282a-146">You can use Extensible Key Management for a username and password combination or other methods defined by the EKM driver.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="c282a-147">Para solucionar problemas, es posible que el soporte técnico de [!INCLUDE[msCoName](../../../includes/msconame-md.md)] le solicite la clave de cifrado del proveedor de EKM.</span><span class="sxs-lookup"><span data-stu-id="c282a-147">For troubleshooting, [!INCLUDE[msCoName](../../../includes/msconame-md.md)] technical support might require the encryption key from the EKM provider.</span></span> <span data-ttu-id="c282a-148">También podría necesitar tener acceso a las herramientas o procesos del fabricante para resolver el problema.</span><span class="sxs-lookup"><span data-stu-id="c282a-148">You might also need to access vendor tools or processes to help resolve an issue.</span></span>  
  
### <a name="authentication-with-an-ekm-device"></a><span data-ttu-id="c282a-149">Autenticación con un dispositivo EKM</span><span class="sxs-lookup"><span data-stu-id="c282a-149">Authentication with an EKM Device</span></span>  
 <span data-ttu-id="c282a-150">Un módulo EKM puede admitir más de un tipo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="c282a-150">An EKM module can support more than one type of authentication.</span></span> <span data-ttu-id="c282a-151">Cada proveedor propone únicamente un tipo de autenticación en [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], es decir, si el módulo admite los tipos de autenticación básica u otros, propondrá uno u otro, pero no ambos.</span><span class="sxs-lookup"><span data-stu-id="c282a-151">Each provider exposes only one type of authentication to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], that is if the module supports Basic or Other authentication types, it exposes one or the other, but not both.</span></span>  
  
#### <a name="ekm-device-specific-basic-authentication-using-usernamepassword"></a><span data-ttu-id="c282a-152">Autenticación básica específica del dispositivo EKM utilizando el nombre de usuario y contraseña</span><span class="sxs-lookup"><span data-stu-id="c282a-152">EKM Device-Specific Basic Authentication Using username/password</span></span>  
 <span data-ttu-id="c282a-153">Para aquellos módulos EKM que admitan la autenticación básica usando una combinación de *nombre de usuario/contraseña*, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] proporciona una autenticación transparente por medio de credenciales.</span><span class="sxs-lookup"><span data-stu-id="c282a-153">For those EKM modules that support Basic authentication using a *username/password* pair, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] provides transparent authentication using credentials.</span></span> <span data-ttu-id="c282a-154">Para obtener más información sobre las credenciales, vea [Credenciales &#40;motor de base de datos&#41;](../authentication-access/credentials-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="c282a-154">For more information about credentials, see [Credentials &#40;Database Engine&#41;](../authentication-access/credentials-database-engine.md).</span></span>  
  
 <span data-ttu-id="c282a-155">Se puede crear una credencial para un proveedor de EKM y asignarse a un inicio de sesión (tanto para cuentas Windows como para cuentas de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]) con el fin de obtener acceso a un módulo EKM en base a un inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="c282a-155">A credential can be created for an EKM provider and mapped to a login (both Windows and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] accounts) to access an EKM module on per-login basis.</span></span> <span data-ttu-id="c282a-156">El campo *Identify* de la credencial contiene el nombre de usuario; el campo *secret* contiene una contraseña para conectar con un módulo EKM.</span><span class="sxs-lookup"><span data-stu-id="c282a-156">The *Identify* field of the credential contains the username; the *secret* field contains a password to connect to an EKM module.</span></span>  
  
 <span data-ttu-id="c282a-157">Si no hay ninguna credencial de inicio de sesión asignada para el proveedor de EKM, se utiliza la credencial asignada a la cuenta de servicio de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c282a-157">If there is no login mapped credential for the EKM provider, the credential mapped to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account is used.</span></span>  
  
 <span data-ttu-id="c282a-158">Un inicio de sesión puede tener varias credenciales asignadas a él, siempre y cuando se utilicen para proveedores de EKM distintos.</span><span class="sxs-lookup"><span data-stu-id="c282a-158">A login can have multiple credentials mapped to it, as long as they are used for distinctive EKM providers.</span></span> <span data-ttu-id="c282a-159">Solo debe haber una credencial asignada por cada EKM y por cada inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="c282a-159">There must be only one mapped credential per EKM provider per login.</span></span> <span data-ttu-id="c282a-160">La misma credencial puede estar asignada a otros inicios de sesión.</span><span class="sxs-lookup"><span data-stu-id="c282a-160">The same credential can be mapped to other logins.</span></span>  
  
#### <a name="other-types-of-ekm-device-specific-authentication"></a><span data-ttu-id="c282a-161">Otros tipos de autenticación específicas del dispositivo EKM</span><span class="sxs-lookup"><span data-stu-id="c282a-161">Other Types of EKM Device-Specific Authentication</span></span>  
 <span data-ttu-id="c282a-162">Para aquellos módulos EKM que usan una autenticación que no sea la Windows o la de una combinación de *nombre de usuario/contraseña* , la autenticación se debe realizar independientemente de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c282a-162">For EKM modules that have authentication other than Windows or *user/password* combinations, authentication must be performed independently from [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
### <a name="encryption-and-decryption-by-an-ekm-device"></a><span data-ttu-id="c282a-163">Cifrado y descifrado por parte de un dispositivo EKM</span><span class="sxs-lookup"><span data-stu-id="c282a-163">Encryption and Decryption by an EKM Device</span></span>  
 <span data-ttu-id="c282a-164">Puede utilizar las siguientes funciones y características para cifrar y descifrar datos utilizando claves simétricas y asimétricas:</span><span class="sxs-lookup"><span data-stu-id="c282a-164">You can use the following functions and features to encrypt and decrypt data by using symmetric and asymmetric keys:</span></span>  
  
|<span data-ttu-id="c282a-165">Función o característica</span><span class="sxs-lookup"><span data-stu-id="c282a-165">Function or feature</span></span>|<span data-ttu-id="c282a-166">Referencia</span><span class="sxs-lookup"><span data-stu-id="c282a-166">Reference</span></span>|  
|-------------------------|---------------|  
|<span data-ttu-id="c282a-167">Cifrado de claves simétricas</span><span class="sxs-lookup"><span data-stu-id="c282a-167">Symmetric key encryption</span></span>|[<span data-ttu-id="c282a-168">CREATE SYMMETRIC KEY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c282a-168">CREATE SYMMETRIC KEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-symmetric-key-transact-sql)|  
|<span data-ttu-id="c282a-169">Cifrado de claves asimétricas</span><span class="sxs-lookup"><span data-stu-id="c282a-169">Asymmetric Key encryption</span></span>|[<span data-ttu-id="c282a-170">CREATE ASYMMETRIC KEY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c282a-170">CREATE ASYMMETRIC KEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-asymmetric-key-transact-sql)|  
|<span data-ttu-id="c282a-171">EncryptByKey(key_guid, "texto_no_cifrado", ...)</span><span class="sxs-lookup"><span data-stu-id="c282a-171">EncryptByKey(key_guid, 'cleartext', ...)</span></span>|[<span data-ttu-id="c282a-172">ENCRYPTBYKEY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c282a-172">ENCRYPTBYKEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/functions/encryptbykey-transact-sql)|  
|<span data-ttu-id="c282a-173">DecryptByKey(texto_cifrado, ...)</span><span class="sxs-lookup"><span data-stu-id="c282a-173">DecryptByKey(ciphertext, ...)</span></span>|[<span data-ttu-id="c282a-174">DECRYPTBYKEY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c282a-174">DECRYPTBYKEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/functions/decryptbykey-transact-sql)|  
|<span data-ttu-id="c282a-175">EncryptByAsmKey (key_guid, 'texto no cifrado')</span><span class="sxs-lookup"><span data-stu-id="c282a-175">EncryptByAsmKey(key_guid, 'cleartext')</span></span>|[<span data-ttu-id="c282a-176">ENCRYPTBYASYMKEY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c282a-176">ENCRYPTBYASYMKEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/functions/encryptbyasymkey-transact-sql)|  
|<span data-ttu-id="c282a-177">DecryptByAsmKey(texto cifrado)</span><span class="sxs-lookup"><span data-stu-id="c282a-177">DecryptByAsmKey(ciphertext)</span></span>|[<span data-ttu-id="c282a-178">DECRYPTBYASYMKEY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c282a-178">DECRYPTBYASYMKEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/functions/decryptbyasymkey-transact-sql)|  
  
#### <a name="database-keys-encryption-by-ekm-keys"></a><span data-ttu-id="c282a-179">Cifrado de claves de la base de datos mediante claves EKM</span><span class="sxs-lookup"><span data-stu-id="c282a-179">Database Keys Encryption by EKM Keys</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c282a-180">pueden utilizar claves EKM para cifrar otras claves de una base de datos.</span><span class="sxs-lookup"><span data-stu-id="c282a-180">can use EKM keys to encrypt other keys in a database.</span></span> <span data-ttu-id="c282a-181">Puede crear y utilizar tanto claves simétricas como asimétricas en un dispositivo EKM.</span><span class="sxs-lookup"><span data-stu-id="c282a-181">You can create and use both symmetric and asymmetric keys on an EKM device.</span></span> <span data-ttu-id="c282a-182">Puede cifrar claves simétricas nativas (no EKM) con claves asimétricas EKM.</span><span class="sxs-lookup"><span data-stu-id="c282a-182">You can encrypt native (non-EKM) symmetric keys with EKM asymmetric keys.</span></span>  
  
 <span data-ttu-id="c282a-183">El ejemplo siguiente crea una clave simétrica de la base de datos y la cifra utilizando una clave de un módulo EKM.</span><span class="sxs-lookup"><span data-stu-id="c282a-183">The following example creates a database symmetric key and encrypts it using a key on an EKM module.</span></span>  
  
```  
CREATE SYMMETRIC KEY Key1  
WITH ALGORITHM = AES_256  
ENCRYPTION BY EKM_AKey1;  
GO  
--Open database key  
OPEN SYMMETRIC KEY Key1  
DECRYPTION BY EKM_AKey1  
```  
  
 <span data-ttu-id="c282a-184">Para obtener más información sobre las claves de servidor y de base de datos en [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], vea [SQL Server y claves de cifrado de base de datos &#40;motor de base de datos&#41;](sql-server-and-database-encryption-keys-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="c282a-184">For more information about Database and Server Keys in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], see [SQL Server and Database Encryption Keys &#40;Database Engine&#41;](sql-server-and-database-encryption-keys-database-engine.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c282a-185">No puede cifrar una clave EKM con otra clave EKM.</span><span class="sxs-lookup"><span data-stu-id="c282a-185">You cannot encrypt one EKM key with another EKM key.</span></span>  
>   
>  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c282a-186">no admite la firma de módulos con las claves asimétricas generadas en el proveedor EKM.</span><span class="sxs-lookup"><span data-stu-id="c282a-186">does not support signing modules with asymmetric keys generated from EKM provider.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="c282a-187">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="c282a-187">Related Tasks</span></span>  
 [<span data-ttu-id="c282a-188">EKM provider enabled (opción de configuración del servidor)</span><span class="sxs-lookup"><span data-stu-id="c282a-188">EKM provider enabled Server Configuration Option</span></span>](../../../database-engine/configure-windows/ekm-provider-enabled-server-configuration-option.md)  
  
 [<span data-ttu-id="c282a-189">Habilitar TDE con EKM</span><span class="sxs-lookup"><span data-stu-id="c282a-189">Enable TDE Using EKM</span></span>](enable-tde-on-sql-server-using-ekm.md)  
  
 [<span data-ttu-id="c282a-190">Administración extensible de claves con el Almacén de claves de Azure &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="c282a-190">Extensible Key Management Using Azure Key Vault &#40;SQL Server&#41;</span></span>](extensible-key-management-using-azure-key-vault-sql-server.md)  
  
## <a name="see-also"></a><span data-ttu-id="c282a-191">Consulte también</span><span class="sxs-lookup"><span data-stu-id="c282a-191">See Also</span></span>  
 <span data-ttu-id="c282a-192">[CREATE CRYPTOGRAPHIC PROVIDER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-cryptographic-provider-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-192">[CREATE CRYPTOGRAPHIC PROVIDER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-cryptographic-provider-transact-sql) </span></span>  
 <span data-ttu-id="c282a-193">[DROP CRYPTOGRAPHIC PROVIDER &#40;Transact-SQL&#41;](/sql/t-sql/statements/drop-cryptographic-provider-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-193">[DROP CRYPTOGRAPHIC PROVIDER &#40;Transact-SQL&#41;](/sql/t-sql/statements/drop-cryptographic-provider-transact-sql) </span></span>  
 <span data-ttu-id="c282a-194">[ALTER CRYPTOGRAPHIC PROVIDER &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-cryptographic-provider-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-194">[ALTER CRYPTOGRAPHIC PROVIDER &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-cryptographic-provider-transact-sql) </span></span>  
 <span data-ttu-id="c282a-195">[sys.cryptographic_providers &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-cryptographic-providers-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-195">[sys.cryptographic_providers &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-cryptographic-providers-transact-sql) </span></span>  
 <span data-ttu-id="c282a-196">[sys.dm_cryptographic_provider_sessions &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-sessions-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-196">[sys.dm_cryptographic_provider_sessions &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-sessions-transact-sql) </span></span>  
 <span data-ttu-id="c282a-197">[sys.dm_cryptographic_provider_properties &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-properties-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-197">[sys.dm_cryptographic_provider_properties &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-properties-transact-sql) </span></span>  
 <span data-ttu-id="c282a-198">[sys.dm_cryptographic_provider_algorithms &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-algorithms-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-198">[sys.dm_cryptographic_provider_algorithms &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-algorithms-transact-sql) </span></span>  
 <span data-ttu-id="c282a-199">[sys.dm_cryptographic_provider_keys &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-keys-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-199">[sys.dm_cryptographic_provider_keys &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-keys-transact-sql) </span></span>  
 <span data-ttu-id="c282a-200">[sys.credentials &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-credentials-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-200">[sys.credentials &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-credentials-transact-sql) </span></span>  
 <span data-ttu-id="c282a-201">[CREATE CREDENTIAL &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-credential-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-201">[CREATE CREDENTIAL &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-credential-transact-sql) </span></span>  
 <span data-ttu-id="c282a-202">[ALTER LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-login-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-202">[ALTER LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-login-transact-sql) </span></span>  
 <span data-ttu-id="c282a-203">[CREATE ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-asymmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-203">[CREATE ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-asymmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="c282a-204">[ALTER ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-asymmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-204">[ALTER ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-asymmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="c282a-205">[DROP ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/drop-asymmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-205">[DROP ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/drop-asymmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="c282a-206">[CREATE SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-symmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-206">[CREATE SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-symmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="c282a-207">[ALTER SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-symmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-207">[ALTER SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-symmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="c282a-208">[DROP SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/drop-symmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-208">[DROP SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/drop-symmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="c282a-209">[OPEN SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/open-symmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c282a-209">[OPEN SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/open-symmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="c282a-210">[Hacer copia de seguridad y restaurar claves de cifrado de Reporting Services](../../../reporting-services/install-windows/ssrs-encryption-keys-back-up-and-restore-encryption-keys.md) </span><span class="sxs-lookup"><span data-stu-id="c282a-210">[Back Up and Restore Reporting Services Encryption Keys](../../../reporting-services/install-windows/ssrs-encryption-keys-back-up-and-restore-encryption-keys.md) </span></span>  
 <span data-ttu-id="c282a-211">[Eliminar y volver a crear claves de cifrado &#40;Administrador de configuración de SSRS&#41;](../../../reporting-services/install-windows/ssrs-encryption-keys-delete-and-re-create-encryption-keys.md) </span><span class="sxs-lookup"><span data-stu-id="c282a-211">[Delete and Re-create Encryption Keys  &#40;SSRS Configuration Manager&#41;](../../../reporting-services/install-windows/ssrs-encryption-keys-delete-and-re-create-encryption-keys.md) </span></span>  
 <span data-ttu-id="c282a-212">[Agregar y quitar claves de cifrado para implementaciones escaladas &#40;Administrador de configuración de SSRS&#41;](../../../reporting-services/install-windows/add-and-remove-encryption-keys-for-scale-out-deployment.md) </span><span class="sxs-lookup"><span data-stu-id="c282a-212">[Add and Remove Encryption Keys for Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](../../../reporting-services/install-windows/add-and-remove-encryption-keys-for-scale-out-deployment.md) </span></span>  
 <span data-ttu-id="c282a-213">[Hacer una copia de seguridad de la clave maestra de servicio](service-master-key.md) </span><span class="sxs-lookup"><span data-stu-id="c282a-213">[Back Up the Service Master Key](service-master-key.md) </span></span>  
 <span data-ttu-id="c282a-214">[Restaurar la clave maestra de servicio](restore-the-service-master-key.md) </span><span class="sxs-lookup"><span data-stu-id="c282a-214">[Restore the Service Master Key](restore-the-service-master-key.md) </span></span>  
 <span data-ttu-id="c282a-215">[Crear la clave maestra de una base de datos](create-a-database-master-key.md) </span><span class="sxs-lookup"><span data-stu-id="c282a-215">[Create a Database Master Key](create-a-database-master-key.md) </span></span>  
 <span data-ttu-id="c282a-216">[Hacer copias de seguridad de una clave maestra de una base de datos](back-up-a-database-master-key.md) </span><span class="sxs-lookup"><span data-stu-id="c282a-216">[Back Up a Database Master Key](back-up-a-database-master-key.md) </span></span>  
 <span data-ttu-id="c282a-217">[Restaurar una clave maestra de base de datos](restore-a-database-master-key.md) </span><span class="sxs-lookup"><span data-stu-id="c282a-217">[Restore a Database Master Key](restore-a-database-master-key.md) </span></span>  
 [<span data-ttu-id="c282a-218">Crear claves simétricas idénticas en dos servidores</span><span class="sxs-lookup"><span data-stu-id="c282a-218">Create Identical Symmetric Keys on Two Servers</span></span>](create-identical-symmetric-keys-on-two-servers.md)  
  
  
