---
title: Trabajar con directorios y rutas de acceso de FileTables | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: filestream
ms.topic: conceptual
helpviewer_keywords:
- FileTables [SQL Server], directories
ms.assetid: f1e45900-bea0-4f6f-924e-c11e1f98ab62
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 4641159e894b764cbee4d7f02085f3ceb8e6d87d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87744133"
---
# <a name="work-with-directories-and-paths-in-filetables"></a><span data-ttu-id="deb00-102">Trabajar con directorios y rutas de acceso de FileTables</span><span class="sxs-lookup"><span data-stu-id="deb00-102">Work with Directories and Paths in FileTables</span></span>
  <span data-ttu-id="deb00-103">Describe la estructura de directorios en la que los archivos se almacenan en FileTables.</span><span class="sxs-lookup"><span data-stu-id="deb00-103">Describes the directory structure in which the files are stored in FileTables.</span></span>  
  
##  <a name="how-to-work-with-directories-and-paths-in-filetables"></a><a name="HowToDirectories"></a> <span data-ttu-id="deb00-104">Procedimientos para: Trabajar con directorios y rutas de acceso de FileTables</span><span class="sxs-lookup"><span data-stu-id="deb00-104">How To: Work with Directories and Paths in FileTables</span></span>  
 <span data-ttu-id="deb00-105">Puede usar las tres funciones que se indican a continuación para trabajar con directorios de FileTable en [!INCLUDE[tsql](../../includes/tsql-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="deb00-105">You can use the following 3 functions to work with FileTable directories in [!INCLUDE[tsql](../../includes/tsql-md.md)]:</span></span>  
  
|<span data-ttu-id="deb00-106">Para obtener este resultado</span><span class="sxs-lookup"><span data-stu-id="deb00-106">To get this result</span></span>|<span data-ttu-id="deb00-107">Use esta función</span><span class="sxs-lookup"><span data-stu-id="deb00-107">Use this function</span></span>|  
|------------------------|-----------------------|  
|<span data-ttu-id="deb00-108">Obtener la ruta de acceso UNC en el nivel de raíz de una FileTable específica o de la base de datos actual.</span><span class="sxs-lookup"><span data-stu-id="deb00-108">Get the root-level UNC path for a specific FileTable or for the current database.</span></span>|[<span data-ttu-id="deb00-109">FileTableRootPath &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="deb00-109">FileTableRootPath &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/filetablerootpath-transact-sql)|  
|<span data-ttu-id="deb00-110">Obtener una ruta de acceso UNC absoluta o relativa de un archivo o directorio de una FileTable.</span><span class="sxs-lookup"><span data-stu-id="deb00-110">Get an absolute or relative UNC path for a file or directory in a FileTable.</span></span>|[<span data-ttu-id="deb00-111">GetFileNamespacePath &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="deb00-111">GetFileNamespacePath &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/getfilenamespacepath-transact-sql)|  
|<span data-ttu-id="deb00-112">Obtener el valor del identificador del localizador de ruta de acceso del archivo o directorio especificado en una FileTable proporcionando la ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="deb00-112">Get the path locator ID value for the specified file or directory in a FileTable, by providing the path.</span></span>|[<span data-ttu-id="deb00-113">GetPathLocator &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="deb00-113">GetPathLocator &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/getpathlocator-transact-sql)|  
  
##  <a name="how-to-use-relative-paths-for-portable-code"></a><a name="BestPracticeRelativePaths"></a> <span data-ttu-id="deb00-114">Procedimientos para: usar rutas de acceso relativas para el código portable</span><span class="sxs-lookup"><span data-stu-id="deb00-114">How to: Use Relative Paths for Portable Code</span></span>  
 <span data-ttu-id="deb00-115">Para mantener independientes del equipo y de la base de datos actuales el código y las aplicaciones, evite escribir código basado en rutas de acceso absolutas de archivos.</span><span class="sxs-lookup"><span data-stu-id="deb00-115">To keep code and applications independent of the current computer and database, avoid writing code that relies on absolute file paths.</span></span> <span data-ttu-id="deb00-116">En su lugar, obtenga la ruta de acceso completa de un archivo en tiempo de ejecución usando conjuntamente las funciones [FileTableRootPath &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/filetablerootpath-transact-sql) y [GetFileNamespacePath &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/getfilenamespacepath-transact-sql), como se muestra en el siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="deb00-116">Instead, get the complete path for a file at run time by using the [FileTableRootPath &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/filetablerootpath-transact-sql) and [GetFileNamespacePath &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/getfilenamespacepath-transact-sql)) functions together, as shown in the following example.</span></span> <span data-ttu-id="deb00-117">De forma predeterminada, la función `GetFileNamespacePath` devuelve la ruta de acceso relativa del archivo en la ruta de acceso raíz de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="deb00-117">By default, the `GetFileNamespacePath` function returns the relative path of the file under the root path for the database.</span></span>  
  
```sql  
USE database_name;  
DECLARE @root nvarchar(100);  
DECLARE @fullpath nvarchar(1000);  
  
SELECT @root = FileTableRootPath();  
SELECT @fullpath = @root + file_stream.GetFileNamespacePath()  
    FROM filetable_name  
    WHERE name = N'document_name';  
  
PRINT @fullpath;  
GO  
```  
  
##  <a name="important-restrictions"></a><a name="restrictions"></a> <span data-ttu-id="deb00-118">Restricciones relevantes</span><span class="sxs-lookup"><span data-stu-id="deb00-118">Important restrictions</span></span>  
  
###  <a name="nesting-level"></a><a name="nesting"></a> <span data-ttu-id="deb00-119">Nivel de anidamiento</span><span class="sxs-lookup"><span data-stu-id="deb00-119">Nesting level</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="deb00-120">No puede almacenar más de 15 niveles de subdirectorios en el directorio de FileTable.</span><span class="sxs-lookup"><span data-stu-id="deb00-120">You cannot store more than 15 levels of subdirectories in the FileTable directory.</span></span> <span data-ttu-id="deb00-121">Si se almacenan 15 niveles de subdirectorios, el nivel inferior no podrá contener los archivos, ya que estos archivos representarían un nivel adicional.</span><span class="sxs-lookup"><span data-stu-id="deb00-121">When you store 15 levels of subdirectories, then the lowest level cannot contain files, since these files would represent an additional level.</span></span>  
  
###  <a name="length-of-full-path-name"></a><a name="fqnlength"></a> <span data-ttu-id="deb00-122">Longitud del nombre completo de la ruta de acceso</span><span class="sxs-lookup"><span data-stu-id="deb00-122">Length of full path name</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="deb00-123">El sistema de archivos NTFS admite nombres de ruta de acceso con una longitud mayor que el límite de 260 caracteres del shell de Windows y la mayoría de las API de Windows.</span><span class="sxs-lookup"><span data-stu-id="deb00-123">The NTFS file system supports path names that are much longer than the 260-character limit of the Windows shell and most Windows APIs.</span></span> <span data-ttu-id="deb00-124">Por consiguiente, es posible que al crear archivos en la jerarquía de archivos de un objeto FileTable con Transact-SQL no pueda verlos ni abrirlos con el Explorador de Windows o muchas otras aplicaciones Windows, porque el nombre completo de la ruta de acceso supera los 260 caracteres.</span><span class="sxs-lookup"><span data-stu-id="deb00-124">Therefore it is possible to create files in the file hierarchy of a FileTable by using Transact-SQL that you cannot view or open with Windows Explorer or many other Windows applications, because the full path name exceeds 260 characters.</span></span> <span data-ttu-id="deb00-125">Sin embargo, puede seguir teniendo acceso a estos archivos mediante Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="deb00-125">However you can continue to access these files by using Transact-SQL.</span></span>  
  
##  <a name="the-full-path-to-an-item-stored-in-a-filetable"></a><a name="fullpath"></a> <span data-ttu-id="deb00-126">Ruta de acceso completa a un elemento almacenado en una FileTable</span><span class="sxs-lookup"><span data-stu-id="deb00-126">The full path to an item stored in a FileTable</span></span>  
 <span data-ttu-id="deb00-127">La ruta de acceso completa a un archivo o directorio almacenado en una FileTable comienza con los elementos siguientes:</span><span class="sxs-lookup"><span data-stu-id="deb00-127">The full path to a file or directory stored in a FileTable begins with the following elements:</span></span>  
  
1.  <span data-ttu-id="deb00-128">El recurso compartido habilitado para el acceso de E/S de archivos de FILESTREAM en el nivel de la instancia de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="deb00-128">The share enabled for FILESTREAM file I/O access at the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance level.</span></span>  
  
2.  <span data-ttu-id="deb00-129">El valor de **DIRECTORY_NAME** especificado en el nivel de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="deb00-129">The **DIRECTORY_NAME** specified at the database level.</span></span>  
  
3.  <span data-ttu-id="deb00-130">El valor de **FILETABLE_DIRECTORY** especificado en el nivel de FileTable.</span><span class="sxs-lookup"><span data-stu-id="deb00-130">The **FILETABLE_DIRECTORY** specified at the FileTable level.</span></span>  
  
 <span data-ttu-id="deb00-131">La jerarquía resultante ofrece el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="deb00-131">The resulting hierarchy looks like this:</span></span>  
  
 `\\<machine>\<instance-level FILESTREAM share>\<database-level directory>\<FileTable directory>\`  
  
 <span data-ttu-id="deb00-132">Esta jerarquía de directorios constituye la raíz del espacio de nombres de archivo de FileTable.</span><span class="sxs-lookup"><span data-stu-id="deb00-132">This directory hierarchy forms the root of the FileTable's file namespace.</span></span> <span data-ttu-id="deb00-133">En esta jerarquía de directorios, los datos de FILESTREAM de la FileTable se almacenan como archivos y como subdirectorios, que, a su vez, pueden contener archivos y subdirectorios.</span><span class="sxs-lookup"><span data-stu-id="deb00-133">Under this directory hierarchy, the FILESTREAM data for the FileTable is stored as files, and as subdirectories which can also contain files and subdirectories.</span></span>  
  
 <span data-ttu-id="deb00-134">Es importante tener en cuenta que la jerarquía de directorios creada en el recurso compartido de FILESTREAM en el nivel de instancia es una jerarquía de directorios virtual.</span><span class="sxs-lookup"><span data-stu-id="deb00-134">It is important to keep in mind that the directory hierarchy created under the instance-level FILESTREAM share is a virtual directory hierarchy.</span></span> <span data-ttu-id="deb00-135">Esta jerarquía se almacena en la base de datos de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] y no se representa físicamente en el sistema de archivos NTFS.</span><span class="sxs-lookup"><span data-stu-id="deb00-135">This hierarchy is stored in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database and is not represented physically in the NTFS file system.</span></span> <span data-ttu-id="deb00-136">Todas las operaciones que tienen acceso a los archivos y directorios situados en el recurso compartido de FILESTREAM y en las FileTables que contiene se interceptan y controlan mediante un componente de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] incrustado en el sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="deb00-136">All operations that access files and directories under the FILESTREAM share and in the FileTables that it contains are intercepted and handled by a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] component embedded in the file system.</span></span>  
  
##  <a name="the-semantics-of-the-root-directories-at-the-instance-database-and-filetable-levels"></a><a name="roots"></a> <span data-ttu-id="deb00-137">Semántica de los directorios raíz en los niveles de instancia, base de datos y FileTable</span><span class="sxs-lookup"><span data-stu-id="deb00-137">The semantics of the root directories at the instance, database, and FileTable levels</span></span>  
 <span data-ttu-id="deb00-138">Esta jerarquía de directorios se ajusta a la semántica siguiente:</span><span class="sxs-lookup"><span data-stu-id="deb00-138">This directory hierarchy observes the following semantics:</span></span>  
  
-   <span data-ttu-id="deb00-139">El recurso compartido de FILESTREAM en el nivel de instancia lo configura un administrador y se almacena como una propiedad del servidor.</span><span class="sxs-lookup"><span data-stu-id="deb00-139">The instance-level FILESTREAM share is configured by an administrator and stored as a property of the server.</span></span> <span data-ttu-id="deb00-140">Puede cambiar el nombre de este recurso compartido a través del Administrador de configuración de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="deb00-140">You can rename this share by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager.</span></span> <span data-ttu-id="deb00-141">Una operación de cambio de nombre no surtirá efecto hasta que se reinicie el servidor.</span><span class="sxs-lookup"><span data-stu-id="deb00-141">A renaming operation does not take effect until the server is restarted.</span></span>  
  
-   <span data-ttu-id="deb00-142">El valor de **DIRECTORY_NAME** en el nivel de base de datos es NULL de manera predeterminada cuando se crea una nueva base de datos.</span><span class="sxs-lookup"><span data-stu-id="deb00-142">The database-level **DIRECTORY_NAME** is null by default when you create a new database.</span></span> <span data-ttu-id="deb00-143">Un administrador puede establecer o cambiar este nombre mediante la instrucción **ALTER DATABASE** .</span><span class="sxs-lookup"><span data-stu-id="deb00-143">An administrator can set or change this name by using the **ALTER DATABASE** statement.</span></span> <span data-ttu-id="deb00-144">El nombre debe ser único (en una comparación sin distinción entre mayúsculas y minúsculas) en esa instancia.</span><span class="sxs-lookup"><span data-stu-id="deb00-144">The name must be unique (in a case-insensitive comparison) in that instance.</span></span>  
  
-   <span data-ttu-id="deb00-145">Normalmente, proporcionará el nombre **FILETABLE_DIRECTORY** como parte de la instrucción **CREATE TABLE** cuando cree un objeto FileTable.</span><span class="sxs-lookup"><span data-stu-id="deb00-145">You typically provide the **FILETABLE_DIRECTORY** name as part of the **CREATE TABLE** statement when you create a FileTable.</span></span> <span data-ttu-id="deb00-146">Puede cambiar este nombre mediante el comando **ALTER TABLE** .</span><span class="sxs-lookup"><span data-stu-id="deb00-146">You can change this name by using the **ALTER TABLE** command.</span></span>  
  
-   <span data-ttu-id="deb00-147">No puede cambiar el nombre de estos directorios raíz a través de operaciones de E/S de archivos.</span><span class="sxs-lookup"><span data-stu-id="deb00-147">You cannot rename these root directories through file I/O operations.</span></span>  
  
-   <span data-ttu-id="deb00-148">No puede abrir estos directorios raíz con identificadores de archivo exclusivos.</span><span class="sxs-lookup"><span data-stu-id="deb00-148">You cannot open these root directories with exclusive file handles.</span></span>  
  
##  <a name="the-is_directory-column-in-the-filetable-schema"></a><a name="is_directory"></a> <span data-ttu-id="deb00-149">Columna is_directory del esquema de la FileTable</span><span class="sxs-lookup"><span data-stu-id="deb00-149">The is_directory column in the FileTable schema</span></span>  
 <span data-ttu-id="deb00-150">En la siguiente tabla se describe la interacción entre la columna **is_directory** y la columna **file_stream** que contiene los datos FILESTREAM de un objeto FileTable.</span><span class="sxs-lookup"><span data-stu-id="deb00-150">The following table describes the interaction between the **is_directory** column and the **file_stream** column that contains the FILESTREAM data in a FileTable.</span></span>  
  
||||  
|-|-|-|  
|<span data-ttu-id="deb00-151">*is_directory* **value**</span><span class="sxs-lookup"><span data-stu-id="deb00-151">*is_directory* **value**</span></span>|<span data-ttu-id="deb00-152">*file_stream* **value**</span><span class="sxs-lookup"><span data-stu-id="deb00-152">*file_stream* **value**</span></span>|<span data-ttu-id="deb00-153">**Comportamiento**</span><span class="sxs-lookup"><span data-stu-id="deb00-153">**Behavior**</span></span>|  
|<span data-ttu-id="deb00-154">FALSE</span><span class="sxs-lookup"><span data-stu-id="deb00-154">FALSE</span></span>|<span data-ttu-id="deb00-155">NULL</span><span class="sxs-lookup"><span data-stu-id="deb00-155">NULL</span></span>|<span data-ttu-id="deb00-156">Esta combinación no es válida y la detectará una restricción definida por el sistema.</span><span class="sxs-lookup"><span data-stu-id="deb00-156">This is an invalid combination that will be caught by a system-defined constraint.</span></span>|  
|<span data-ttu-id="deb00-157">FALSE</span><span class="sxs-lookup"><span data-stu-id="deb00-157">FALSE</span></span>|\<value>|<span data-ttu-id="deb00-158">El elemento representa un archivo.</span><span class="sxs-lookup"><span data-stu-id="deb00-158">The item represents a file.</span></span>|  
|<span data-ttu-id="deb00-159">TRUE</span><span class="sxs-lookup"><span data-stu-id="deb00-159">TRUE</span></span>|<span data-ttu-id="deb00-160">NULL</span><span class="sxs-lookup"><span data-stu-id="deb00-160">NULL</span></span>|<span data-ttu-id="deb00-161">El elemento representa un directorio.</span><span class="sxs-lookup"><span data-stu-id="deb00-161">The item represents a directory.</span></span>|  
|<span data-ttu-id="deb00-162">TRUE</span><span class="sxs-lookup"><span data-stu-id="deb00-162">TRUE</span></span>|\<value>|<span data-ttu-id="deb00-163">Esta combinación no es válida y la detectará una restricción definida por el sistema.</span><span class="sxs-lookup"><span data-stu-id="deb00-163">This is an invalid combination that will be caught by a system-defined constraint.</span></span>|  
  
##  <a name="using-virtual-network-names-vnns-with-alwayson-availability-groups"></a><a name="alwayson"></a> <span data-ttu-id="deb00-164">Usar nombres de red virtual (VNN) con grupos de disponibilidad AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="deb00-164">Using Virtual Network Names (VNNs) with AlwaysOn Availability Groups</span></span>  
 <span data-ttu-id="deb00-165">Cuando la base de datos que contiene datos de FILESTREAM o FileTable pertenece a un grupo de disponibilidad AlwaysOn:</span><span class="sxs-lookup"><span data-stu-id="deb00-165">When the database that contains FILESTREAM or FileTable data belongs to an AlwaysOn availability group:</span></span>  
  
-   <span data-ttu-id="deb00-166">Las funciones FILESTREAM y FileTable aceptan o devuelven nombres de red virtual (VNN) en lugar de nombres de equipo.</span><span class="sxs-lookup"><span data-stu-id="deb00-166">The FILESTREAM and FileTable functions accept or return virtual network names (VNNs) instead of computer names.</span></span> <span data-ttu-id="deb00-167">Para obtener más información sobre estas funciones, vea [Funciones FILESTREAM y FileTable &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/filestream-and-filetable-functions-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="deb00-167">For more information about these functions, see [Filestream and FileTable Functions &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/filestream-and-filetable-functions-transact-sql).</span></span>  
  
-   <span data-ttu-id="deb00-168">Todo acceso a los datos de FILESTREAM o FileTable a través de las API del sistema de archivos debe utilizar VNN en lugar de nombres de equipo.</span><span class="sxs-lookup"><span data-stu-id="deb00-168">All access to FILESTREAM or FileTable data through the file system APIs should use VNNs instead of computer names.</span></span> <span data-ttu-id="deb00-169">Para obtener más información, vea [FILESTREAM y FileTable con grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/filestream-and-filetable-with-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="deb00-169">For more information, see [FILESTREAM and FileTable with AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/filestream-and-filetable-with-always-on-availability-groups-sql-server.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="deb00-170">Consulte también</span><span class="sxs-lookup"><span data-stu-id="deb00-170">See Also</span></span>  
 <span data-ttu-id="deb00-171">[Habilitar los requisitos previos de FileTables](enable-the-prerequisites-for-filetable.md) </span><span class="sxs-lookup"><span data-stu-id="deb00-171">[Enable the Prerequisites for FileTable](enable-the-prerequisites-for-filetable.md) </span></span>  
 <span data-ttu-id="deb00-172">[Crear, modificar y quitar FileTables](create-alter-and-drop-filetables.md) </span><span class="sxs-lookup"><span data-stu-id="deb00-172">[Create, Alter, and Drop FileTables](create-alter-and-drop-filetables.md) </span></span>  
 <span data-ttu-id="deb00-173">[Obtener acceso a FileTables con Transact-SQL](access-filetables-with-transact-sql.md) </span><span class="sxs-lookup"><span data-stu-id="deb00-173">[Access FileTables with Transact-SQL](access-filetables-with-transact-sql.md) </span></span>  
 [<span data-ttu-id="deb00-174">Obtener acceso a FileTables con API de entrada-salida de archivo</span><span class="sxs-lookup"><span data-stu-id="deb00-174">Access FileTables with File Input-Output APIs</span></span>](access-filetables-with-file-input-output-apis.md)  
  
  
