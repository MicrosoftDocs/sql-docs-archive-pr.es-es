---
title: FILESTREAM (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: filestream
ms.topic: conceptual
helpviewer_keywords:
- FILESTREAM [SQL Server]
- FILESTREAM [SQL Server], about
- FILESTREAM [SQL Server], overview
ms.assetid: 9a5a8166-bcbe-4680-916c-26276253eafa
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 971f45fd69f381a8997bb2f8f08444f4d9c107c4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87749353"
---
# <a name="filestream-sql-server"></a><span data-ttu-id="27d51-102">FILESTREAM (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="27d51-102">FILESTREAM (SQL Server)</span></span>
  <span data-ttu-id="27d51-103">FILESTREAM permite a las aplicaciones basadas en [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] almacenar datos no estructurados, como documentos e imágenes, en el sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-103">FILESTREAM enables [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-based applications to store unstructured data, such as documents and images, on the file system.</span></span> <span data-ttu-id="27d51-104">Las aplicaciones pueden aprovechar las API de transmisión de datos enriquecidas y el rendimiento del sistema de archivos al mismo tiempo que mantienen la coherencia transaccional entre los datos no estructurados y los datos estructurados correspondientes.</span><span class="sxs-lookup"><span data-stu-id="27d51-104">Applications can leverage the rich streaming APIs and performance of the file system and at the same time maintain transactional consistency between the unstructured data and corresponding structured data.</span></span>  
  
 <span data-ttu-id="27d51-105">FILESTREAM integra [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] con un sistema de archivos NTFS almacenando los `varbinary(max)` datos de objetos binarios grandes (BLOB) como archivos en el sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-105">FILESTREAM integrates the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] with an NTFS file system by storing `varbinary(max)` binary large object (BLOB) data as files on the file system.</span></span> [!INCLUDE[tsql](../../includes/tsql-md.md)] <span data-ttu-id="27d51-106">pueden insertar, actualizar, consultar, buscar y realizar copias de seguridad de los datos FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="27d51-106">statements can insert, update, query, search, and back up FILESTREAM data.</span></span> <span data-ttu-id="27d51-107">Las interfaces del sistema de archivos de Win32 proporcionan el acceso de la transmisión por secuencias a los datos.</span><span class="sxs-lookup"><span data-stu-id="27d51-107">Win32 file system interfaces provide streaming access to the data.</span></span>  
  
 <span data-ttu-id="27d51-108">FILESTREAM usa la memoria caché del sistema NT para almacenar en memoria caché los datos de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-108">FILESTREAM uses the NT system cache for caching file data.</span></span> <span data-ttu-id="27d51-109">Esto ayuda a reducir cualquier efecto que los datos FILESTREAM podrían tener en el rendimiento de [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="27d51-109">This helps reduce any effect that FILESTREAM data might have on [!INCLUDE[ssDE](../../includes/ssde-md.md)] performance.</span></span> <span data-ttu-id="27d51-110">No se usa el grupo de búferes de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ; por consiguiente, esta memoria está disponible para el procesamiento de consultas.</span><span class="sxs-lookup"><span data-stu-id="27d51-110">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] buffer pool is not used; therefore, this memory is available for query processing.</span></span>  
  
 <span data-ttu-id="27d51-111">FILESTREAM no se habilita automáticamente al instalar o actualizar [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="27d51-111">FILESTREAM is not automatically enabled when you install or upgrade [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="27d51-112">Debe habilitar FILESTREAM utilizando el Administrador de configuración de SQL Server y [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="27d51-112">You must enable FILESTREAM by using SQL Server Configuration Manager and [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="27d51-113">Para utilizar FILESTREAM, debe crear o modificar una base de datos que contenga un tipo especial de grupo de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-113">To use FILESTREAM, you must create or modify a database to contain a special type of filegroup.</span></span> <span data-ttu-id="27d51-114">A continuación, debe crear o modificar una tabla de modo que contenga una columna `varbinary(max)` con el atributo FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="27d51-114">Then, create or modify a table so that it contains a `varbinary(max)` column with the FILESTREAM attribute.</span></span> <span data-ttu-id="27d51-115">Después de completar estas tareas, puede usar [!INCLUDE[tsql](../../includes/tsql-md.md)] y Win32 para administrar los datos FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="27d51-115">After you complete these tasks, you can use [!INCLUDE[tsql](../../includes/tsql-md.md)] and Win32 to manage the FILESTREAM data.</span></span>  
  
 <span data-ttu-id="27d51-116">Para obtener más información acerca de cómo instalar y usar FILESTREAM, vea la lista de [Tareas relacionadas](#reltasks).</span><span class="sxs-lookup"><span data-stu-id="27d51-116">For more information about installing and using FILESTREAM, see the list of [Related Tasks](#reltasks).</span></span>  
  
##  <a name="when-to-use-filestream"></a><a name="whentouse"></a><span data-ttu-id="27d51-117">Cuándo usar FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="27d51-117">When to Use FILESTREAM</span></span>  
 <span data-ttu-id="27d51-118">En [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], BLOB pueden ser datos de `varbinary(max)` estándar que almacena los datos en tablas u objetos FILESTREAM `varbinary(max)` que almacenan los datos en el sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-118">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], BLOBs can be standard `varbinary(max)` data that stores the data in tables, or FILESTREAM `varbinary(max)` objects that store the data in the file system.</span></span> <span data-ttu-id="27d51-119">El tamaño y el uso de los datos determinan si debería usar el almacenamiento de base de datos o el almacenamiento del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-119">The size and use of the data determines whether you should use database storage or file system storage.</span></span> <span data-ttu-id="27d51-120">Si las condiciones siguientes son verdaderas, debería pensar en usar FILESTREAM:</span><span class="sxs-lookup"><span data-stu-id="27d51-120">If the following conditions are true, you should consider using FILESTREAM:</span></span>  
  
-   <span data-ttu-id="27d51-121">Los objetos que se están almacenando son, por término medio, mayores de 1 MB.</span><span class="sxs-lookup"><span data-stu-id="27d51-121">Objects that are being stored are, on average, larger than 1 MB.</span></span>  
  
-   <span data-ttu-id="27d51-122">El acceso de lectura rápido es importante.</span><span class="sxs-lookup"><span data-stu-id="27d51-122">Fast read access is important.</span></span>  
  
-   <span data-ttu-id="27d51-123">Está desarrollando aplicaciones que usan un nivel intermedio para la lógica de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="27d51-123">You are developing applications that use a middle tier for application logic.</span></span>  
  
 <span data-ttu-id="27d51-124">Para objetos de menor tamaño, el almacenamiento de BLOB `varbinary(max)` en la base de datos a menudo proporciona un mejor rendimiento de la transmisión de datos.</span><span class="sxs-lookup"><span data-stu-id="27d51-124">For smaller objects, storing `varbinary(max)` BLOBs in the database often provides better streaming performance.</span></span>  
  
  
##  <a name="filestream-storage"></a><a name="storage"></a><span data-ttu-id="27d51-125">Almacenamiento de FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="27d51-125">FILESTREAM Storage</span></span>  
 <span data-ttu-id="27d51-126">El almacenamiento de FILESTREAM se implementa como una columna `varbinary(max)` en la que los datos están almacenados como BLOB en el sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-126">FILESTREAM storage is implemented as a `varbinary(max)` column in which the data is stored as BLOBs in the file system.</span></span> <span data-ttu-id="27d51-127">Los tamaños de los BLOB están limitados solo por el tamaño del volumen del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-127">The sizes of the BLOBs are limited only by the volume size of the file system.</span></span> <span data-ttu-id="27d51-128">La limitación `varbinary(max)` estándar de tamaños de archivo de 2 GB no se aplica a BLOB que están almacenados en el sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-128">The standard `varbinary(max)` limitation of 2-GB file sizes does not apply to BLOBs that are stored in the file system.</span></span>  
  
 <span data-ttu-id="27d51-129">Para especificar que una columna debería almacenar datos en el sistema de archivos, especifique el atributo FILESTREAM en una columna `varbinary(max)`.</span><span class="sxs-lookup"><span data-stu-id="27d51-129">To specify that a column should store data on the file system, specify the FILESTREAM attribute on a `varbinary(max)` column.</span></span> <span data-ttu-id="27d51-130">Esto hace que [!INCLUDE[ssDE](../../includes/ssde-md.md)] almacene todos los datos para esa columna en el sistema de archivos pero no en el archivo de base de datos.</span><span class="sxs-lookup"><span data-stu-id="27d51-130">This causes the [!INCLUDE[ssDE](../../includes/ssde-md.md)] to store all data for that column on the file system, but not in the database file.</span></span>  
  
 <span data-ttu-id="27d51-131">Los datos de FILESTREAM deben estar almacenados en los grupos de archivos FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="27d51-131">FILESTREAM data must be stored in FILESTREAM filegroups.</span></span> <span data-ttu-id="27d51-132">Un grupo de archivos FILESTREAM es un grupo de archivos especial que contiene los directorios de sistema de archivos en lugar de los propios archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-132">A FILESTREAM filegroup is a special filegroup that contains file system directories instead of the files themselves.</span></span> <span data-ttu-id="27d51-133">Estos directorios del sistema de archivos se denominan *contenedores de datos*.</span><span class="sxs-lookup"><span data-stu-id="27d51-133">These file system directories are called *data containers*.</span></span> <span data-ttu-id="27d51-134">Los contenedores de datos son la interfaz entre el almacenamiento del [!INCLUDE[ssDE](../../includes/ssde-md.md)] y el almacenamiento del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-134">Data containers are the interface between [!INCLUDE[ssDE](../../includes/ssde-md.md)] storage and file system storage.</span></span>  
  
 <span data-ttu-id="27d51-135">Cuando use el almacenamiento FILESTREAM, piense en lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="27d51-135">When you use FILESTREAM storage, consider the following:</span></span>  
  
-   <span data-ttu-id="27d51-136">Cuando una tabla contiene una columna FILESTREAM, cada fila debe tener un identificador de fila único distinto de NULL.</span><span class="sxs-lookup"><span data-stu-id="27d51-136">When a table contains a FILESTREAM column, each row must have a nonnull unique row ID.</span></span>  
  
-   <span data-ttu-id="27d51-137">Se pueden agregar varios contenedores de datos a un grupo de archivos FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="27d51-137">Multiple data containers can be added to a FILESTREAM filegroup.</span></span>  
  
-   <span data-ttu-id="27d51-138">Los contenedores de datos FILESTREAM no pueden estar anidados.</span><span class="sxs-lookup"><span data-stu-id="27d51-138">FILESTREAM data containers cannot be nested.</span></span>  
  
-   <span data-ttu-id="27d51-139">Cuando se usan clústeres de conmutación por error, los grupos de archivos FILESTREAM deben estar en recursos de disco compartido.</span><span class="sxs-lookup"><span data-stu-id="27d51-139">When you are using failover clustering, the FILESTREAM filegroups must be on shared disk resources.</span></span>  
  
-   <span data-ttu-id="27d51-140">Los grupos de archivos FILESTREAM pueden estar en volúmenes comprimidos.</span><span class="sxs-lookup"><span data-stu-id="27d51-140">FILESTREAM filegroups can be on compressed volumes.</span></span>  
  
### <a name="integrated-management"></a><span data-ttu-id="27d51-141">Administración integrada</span><span class="sxs-lookup"><span data-stu-id="27d51-141">Integrated Management</span></span>  
 <span data-ttu-id="27d51-142">Debido a que FILESTREAM se implementa como columna `varbinary(max)` y se integra directamente en el [!INCLUDE[ssDE](../../includes/ssde-md.md)], la mayoría de las funciones y de las herramientas de administración de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] funcionan sin la modificación de los datos FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="27d51-142">Because FILESTREAM is implemented as a `varbinary(max)` column and integrated directly into the [!INCLUDE[ssDE](../../includes/ssde-md.md)], most [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] management tools and functions work without modification for FILESTREAM data.</span></span> <span data-ttu-id="27d51-143">Por ejemplo, puede usar todos los modelos de recuperación y copia de seguridad con datos FILESTREAM y se realizan copias de seguridad de los datos FILESTREAM con los datos estructurados de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="27d51-143">For example, you can use all backup and recovery models with FILESTREAM data, and the FILESTREAM data is backed up with the structured data in the database.</span></span> <span data-ttu-id="27d51-144">Si no desea realizar una copia de seguridad de los datos FILESTREAM con datos relacionales, puede usar una copia de seguridad parcial para excluir los grupos de archivos FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="27d51-144">If you do not want to back up FILESTREAM data with relational data, you can use a partial backup to exclude FILESTREAM filegroups.</span></span>  

  
### <a name="integrated-security"></a><span data-ttu-id="27d51-145">Seguridad integrada</span><span class="sxs-lookup"><span data-stu-id="27d51-145">Integrated Security</span></span>  
 <span data-ttu-id="27d51-146">En [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], los datos de FILESTREAM se protegen de la misma manera que los demás datos: concediendo permisos en el nivel de tabla o columna.</span><span class="sxs-lookup"><span data-stu-id="27d51-146">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], FILESTREAM data is secured just like other data is secured: by granting permissions at the table or column levels.</span></span> <span data-ttu-id="27d51-147">Si un usuario tiene permiso para la columna FILESTREAM de una tabla, el usuario puede abrir los archivos asociados.</span><span class="sxs-lookup"><span data-stu-id="27d51-147">If a user has permission to the FILESTREAM column in a table, the user can open the associated files.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="27d51-148">El cifrado no se admite en los datos FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="27d51-148">Encryption is not supported on FILESTREAM data.</span></span>  
  
 <span data-ttu-id="27d51-149">Solo a la cuenta con la que la cuenta de servicio de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] se ejecuta se permiten los permisos NTFS al contenedor FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="27d51-149">Only the account under which the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account runs is granted NTFS permissions to the FILESTREAM container.</span></span> <span data-ttu-id="27d51-150">Recomendamos que no se concedan permisos a ninguna otra cuenta en el contenedor de datos.</span><span class="sxs-lookup"><span data-stu-id="27d51-150">We recommend that no other account be granted permissions on the data container.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="27d51-151">Los inicios de sesión de SQL no funcionarán con contenedores FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="27d51-151">SQL logins will not work with FILESTREAM containers.</span></span> <span data-ttu-id="27d51-152">Solo la autenticación NTFS funcionará con contenedores FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="27d51-152">Only NTFS authentication will work with FILESTREAM containers.</span></span>  
  
##  <a name="accessing-blob-data-with-transact-sql-and-file-system-streaming-access"></a><a name="dual"></a> <span data-ttu-id="27d51-153">Acceso a datos BLOB con Transact-SQL y acceso de transmisión de datos del sistema de archivos</span><span class="sxs-lookup"><span data-stu-id="27d51-153">Accessing BLOB Data with Transact-SQL and File System Streaming Access</span></span>  
 <span data-ttu-id="27d51-154">Después de almacenar los datos en una columna FILESTREAM, puede tener acceso a los archivos usando las transacciones de [!INCLUDE[tsql](../../includes/tsql-md.md)] o usando las API de Win32.</span><span class="sxs-lookup"><span data-stu-id="27d51-154">After you store data in a FILESTREAM column, you can access the files by using [!INCLUDE[tsql](../../includes/tsql-md.md)] transactions or by using Win32 APIs.</span></span>  
  
### <a name="transact-sql-access"></a><span data-ttu-id="27d51-155">Acceso a Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="27d51-155">Transact-SQL Access</span></span>  
 <span data-ttu-id="27d51-156">Usando [!INCLUDE[tsql](../../includes/tsql-md.md)], puede insertar, actualizar y eliminar los datos de FILESTREAM:</span><span class="sxs-lookup"><span data-stu-id="27d51-156">By using [!INCLUDE[tsql](../../includes/tsql-md.md)], you can insert, update, and delete FILESTREAM data:</span></span>  
  
-   <span data-ttu-id="27d51-157">Puede usar una operación de inserción para rellenar previamente un campo FILESTREAM con un valor nulo, un valor vacío o un dato insertado relativamente corto.</span><span class="sxs-lookup"><span data-stu-id="27d51-157">You can use an insert operation to prepopulate a FILESTREAM field with a null value, empty value, or relatively short inline data.</span></span> <span data-ttu-id="27d51-158">Sin embargo, se envía una gran cantidad de datos de manera más eficaz en un archivo que usa interfaces de Win32.</span><span class="sxs-lookup"><span data-stu-id="27d51-158">However, a large amount of data is more efficiently streamed into a file that uses Win32 interfaces.</span></span>  
  
-   <span data-ttu-id="27d51-159">Al actualizar un campo FILESTREAM, modifica los datos de BLOB subyacentes en el sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-159">When you update a FILESTREAM field, you modify the underlying BLOB data in the file system.</span></span> <span data-ttu-id="27d51-160">Cuando un campo FILESTREAM está establecido en NULL, se eliminan los datos de BLOB asociados al campo.</span><span class="sxs-lookup"><span data-stu-id="27d51-160">When a FILESTREAM field is set to NULL, the BLOB data associated with the field is deleted.</span></span> <span data-ttu-id="27d51-161">No puede usar ninguna actualización fragmentada de [!INCLUDE[tsql](../../includes/tsql-md.md)] , implementada como UPDATE **.** Write(), para realizar actualizaciones parciales en los datos.</span><span class="sxs-lookup"><span data-stu-id="27d51-161">You cannot use a [!INCLUDE[tsql](../../includes/tsql-md.md)] chunked update, implemented as UPDATE **.** Write(), to perform partial updates to the data.</span></span>  
  
-   <span data-ttu-id="27d51-162">Al eliminar una fila, o eliminar o truncar una tabla que contiene datos FILESTREAM, elimina los datos de BLOB subyacentes del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-162">When you delete a row or delete or truncate a table that contains FILESTREAM data, you delete the underlying BLOB data in the file system.</span></span>  
  
### <a name="file-system-streaming-access"></a><span data-ttu-id="27d51-163">Acceso a la transmisión por secuencias del sistema de archivos</span><span class="sxs-lookup"><span data-stu-id="27d51-163">File System Streaming Access</span></span>  
 <span data-ttu-id="27d51-164">La compatibilidad de transmisión por secuencias de Win32 funciona en el contexto de una transacción de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="27d51-164">The Win32 streaming support works in the context of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] transaction.</span></span> <span data-ttu-id="27d51-165">Dentro de una transacción, puede usar las funciones FILESTREAM para obtener una ruta de acceso al sistema de archivos de UNC lógica de un archivo.</span><span class="sxs-lookup"><span data-stu-id="27d51-165">Within a transaction, you can use FILESTREAM functions to obtain a logical UNC file system path of a file.</span></span> <span data-ttu-id="27d51-166">Tras ello, use la API OpenSqlFilestream para obtener un identificador de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-166">You then use the OpenSqlFilestream API to obtain a file handle.</span></span> <span data-ttu-id="27d51-167">Después, este identificador lo pueden usar las interfaces de transmisión por secuencias de archivo de Win32, como ReadFile() y WriteFile(), para obtener acceso y actualizar el archivo a través del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-167">This handle can then be used by Win32 file streaming interfaces, such as ReadFile() and WriteFile(), to access and update the file by way of the file system.</span></span>  
  
 <span data-ttu-id="27d51-168">Dado que las operaciones de archivo son transaccionales, no puede eliminar ni cambiar el nombre de los archivos FILESTREAM a través del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-168">Because file operations are transactional, you cannot delete or rename FILESTREAM files through the file system.</span></span>  
  
 <span data-ttu-id="27d51-169">**Modelo de la instrucción**</span><span class="sxs-lookup"><span data-stu-id="27d51-169">**Statement Model**</span></span>  
  
 <span data-ttu-id="27d51-170">El acceso del sistema de archivos de FILESTREAM modela una instrucción de [!INCLUDE[tsql](../../includes/tsql-md.md)] usando la apertura y el cierre de archivo.</span><span class="sxs-lookup"><span data-stu-id="27d51-170">The FILESTREAM file system access models a [!INCLUDE[tsql](../../includes/tsql-md.md)] statement by using file open and close.</span></span> <span data-ttu-id="27d51-171">La instrucción se inicia cuando un identificador de archivos se abre y finaliza cuando se cierra el identificador.</span><span class="sxs-lookup"><span data-stu-id="27d51-171">The statement starts when a file handle is opened and ends when the handle is closed.</span></span> <span data-ttu-id="27d51-172">Por ejemplo, cuando se cierra un identificador de escritura, cualquier posible desencadenador de AFTER que esté registrado en la tabla se desencadena como si la instrucción UPDATE estuviera completada.</span><span class="sxs-lookup"><span data-stu-id="27d51-172">For example, when a write handle is closed, any possible AFTER trigger that is registered on the table fires as if an UPDATE statement is completed.</span></span>  
  
 <span data-ttu-id="27d51-173">**Espacio de nombres de almacenamiento**</span><span class="sxs-lookup"><span data-stu-id="27d51-173">**Storage Namespace**</span></span>  
  
 <span data-ttu-id="27d51-174">En FILESTREAM, el [!INCLUDE[ssDE](../../includes/ssde-md.md)] controla el espacio de nombres del sistema de archivos físico de BLOB.</span><span class="sxs-lookup"><span data-stu-id="27d51-174">In FILESTREAM, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] controls the BLOB physical file system namespace.</span></span> <span data-ttu-id="27d51-175">Una nueva función intrínseca, [PathName](/sql/relational-databases/system-functions/pathname-transact-sql), proporciona la ruta UNC lógica del BLOB que se corresponde con cada celda de FILESTREAM de la tabla.</span><span class="sxs-lookup"><span data-stu-id="27d51-175">A new intrinsic function, [PathName](/sql/relational-databases/system-functions/pathname-transact-sql), provides the logical UNC path of the BLOB that corresponds to each FILESTREAM cell in the table.</span></span> <span data-ttu-id="27d51-176">La aplicación usa esta ruta de acceso lógica para obtener el identificador de Win32 y funcionar en los datos de BLOB usando las interfaces del sistema de archivos de Win32 normales.</span><span class="sxs-lookup"><span data-stu-id="27d51-176">The application uses this logical path to obtain the Win32 handle and operate on the BLOB data by using regular Win32 file system interfaces.</span></span> <span data-ttu-id="27d51-177">La función devuelve NULL si el valor de la columna FILESTREAM es NULL.</span><span class="sxs-lookup"><span data-stu-id="27d51-177">The function returns NULL if the value of the FILESTREAM column is NULL.</span></span>  
  
 <span data-ttu-id="27d51-178">**Acceso al sistema de archivos transaccionales**</span><span class="sxs-lookup"><span data-stu-id="27d51-178">**Transacted File System Access**</span></span>  
  
 <span data-ttu-id="27d51-179">Una nueva función intrínseca, [GET_FILESTREAM_TRANSACTION_CONTEXT()](/sql/t-sql/functions/get-filestream-transaction-context-transact-sql), proporciona el token que representa la transacción actual a la que la sesión está asociada.</span><span class="sxs-lookup"><span data-stu-id="27d51-179">A new intrinsic function, [GET_FILESTREAM_TRANSACTION_CONTEXT()](/sql/t-sql/functions/get-filestream-transaction-context-transact-sql), provides the token that represents the current transaction that the session is associated with.</span></span> <span data-ttu-id="27d51-180">Se debe haber iniciado la transacción y no haberse anulado ni confirmado todavía.</span><span class="sxs-lookup"><span data-stu-id="27d51-180">The transaction must have been started and not yet aborted or committed.</span></span> <span data-ttu-id="27d51-181">Al obtener un token, la aplicación enlaza las operaciones de transmisión por secuencias del sistema de archivos FILESTREAM con una transacción iniciada.</span><span class="sxs-lookup"><span data-stu-id="27d51-181">By obtaining a token, the application binds the FILESTREAM file system streaming operations with a started transaction.</span></span> <span data-ttu-id="27d51-182">La función devuelve NULL en caso de no haber ninguna transacción explícitamente iniciada.</span><span class="sxs-lookup"><span data-stu-id="27d51-182">The function returns NULL in case of no explicitly started transaction.</span></span>  
  
 <span data-ttu-id="27d51-183">Se deben cerrar todos los identificadores de archivo antes de que la transacción se confirme o se anule.</span><span class="sxs-lookup"><span data-stu-id="27d51-183">All file handles must be closed before the transaction commits or aborts.</span></span> <span data-ttu-id="27d51-184">Si un identificador se deja abierto más allá del ámbito de transacción, las lecturas adicionales frente al identificador producirán un error; las escrituras adicionales frente al identificador tendrán éxito pero los datos reales no se escribirán en el disco.</span><span class="sxs-lookup"><span data-stu-id="27d51-184">If a handle is left open beyond the transaction scope, additional reads against the handle will cause a failure; additional writes against the handle will succeed, but the actual data will not be written to disk.</span></span> <span data-ttu-id="27d51-185">De igual forma, si la base de datos o la instancia del [!INCLUDE[ssDE](../../includes/ssde-md.md)] se cierra, se invalidan todos los identificadores abiertos.</span><span class="sxs-lookup"><span data-stu-id="27d51-185">Similarly, if the database or instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] shuts down, all open handles are invalidated.</span></span>  
  
 <span data-ttu-id="27d51-186">**Durabilidad transaccional**</span><span class="sxs-lookup"><span data-stu-id="27d51-186">**Transactional Durability**</span></span>  
  
 <span data-ttu-id="27d51-187">Con FILESTREAM, al confirmar la transacción, el [!INCLUDE[ssDE](../../includes/ssde-md.md)] asegura la durabilidad de la transacción para los datos de BLOB FILESTREAM que se modifican del acceso a la transmisión por secuencias del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-187">With FILESTREAM, upon transaction commit, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] ensures transaction durability for FILESTREAM BLOB data that is modified from the file system streaming access.</span></span>  
  
 <span data-ttu-id="27d51-188">**Semántica de aislamiento**</span><span class="sxs-lookup"><span data-stu-id="27d51-188">**Isolation Semantics**</span></span>  
  
 <span data-ttu-id="27d51-189">La semántica de aislamiento se rige por los niveles de aislamiento de transacción del [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="27d51-189">The isolation semantics are governed by [!INCLUDE[ssDE](../../includes/ssde-md.md)] transaction isolation levels.</span></span> <span data-ttu-id="27d51-190">Se admite el nivel de aislamiento de lectura confirmada para [!INCLUDE[tsql](../../includes/tsql-md.md)] y el acceso al sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="27d51-190">Read-committed isolation level is supported for [!INCLUDE[tsql](../../includes/tsql-md.md)] and file system access.</span></span> <span data-ttu-id="27d51-191">Se admiten operaciones de lectura repetibles, así como serializables y aislamientos de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="27d51-191">Repeatable read operations, and also serializable and snapshot isolations, are supported.</span></span> <span data-ttu-id="27d51-192">No se admite la lectura de datos sucios.</span><span class="sxs-lookup"><span data-stu-id="27d51-192">Dirty read is not supported.</span></span>  
  
 <span data-ttu-id="27d51-193">Las operaciones de apertura de acceso al sistema de archivos no esperan ningún bloqueo.</span><span class="sxs-lookup"><span data-stu-id="27d51-193">The file system access open operations do not wait for any locks.</span></span> <span data-ttu-id="27d51-194">En su lugar, se produce un error inmediato de las operaciones de apertura si no pueden obtener acceso a los datos debido al aislamiento de transacción.</span><span class="sxs-lookup"><span data-stu-id="27d51-194">Instead, the open operations fail immediately if they cannot access the data because of transaction isolation.</span></span> <span data-ttu-id="27d51-195">Se produce un error en las llamadas de API de transmisión por secuencias con ERROR_SHARING_VIOLATION si la operación de apertura no puede continuar debido a la infracción de aislamiento.</span><span class="sxs-lookup"><span data-stu-id="27d51-195">The streaming API calls fail with ERROR_SHARING_VIOLATION if the open operation cannot continue because of isolation violation.</span></span>  
  
 <span data-ttu-id="27d51-196">Para permitir que se realicen actualizaciones parciales, la aplicación puede emitir un control FS de dispositivo (FSCTL_SQL_FILESTREAM_FETCH_OLD_CONTENT) para capturar el contenido anterior en el archivo al que hace referencia el identificador abierto.</span><span class="sxs-lookup"><span data-stu-id="27d51-196">To allow for partial updates to be made, the application can issue a device FS control (FSCTL_SQL_FILESTREAM_FETCH_OLD_CONTENT) to fetch the old content into the file that the opened handle references.</span></span> <span data-ttu-id="27d51-197">Esto desencadenará una copia de contenido antiguo de servidor.</span><span class="sxs-lookup"><span data-stu-id="27d51-197">This will trigger a server-side old content copy.</span></span> <span data-ttu-id="27d51-198">Para un mejor rendimiento de la aplicación, y para evitar encontrarse con posibles tiempos de espera mientras trabaja con archivos muy grandes, recomendamos que use E/S asincrónica.</span><span class="sxs-lookup"><span data-stu-id="27d51-198">For better application performance and to avoid running into potential time-outs when you are working with very large files, we recommend that you use asynchronous I/O.</span></span>  
  
 <span data-ttu-id="27d51-199">Si se emite FSCTL una vez que se haya escrito en el identificador, se conservará la última operación de escritura y se perderán las escrituras anteriores realizadas en el identificador.</span><span class="sxs-lookup"><span data-stu-id="27d51-199">If the FSCTL is issued after the handle has been written to, the last write operation will persist, and prior writes that were made to the handle are lost.</span></span>  
  
 <span data-ttu-id="27d51-200">**API del sistema de archivos y niveles de aislamiento admitidos**</span><span class="sxs-lookup"><span data-stu-id="27d51-200">**File System APIs and Supported Isolation Levels**</span></span>  
  
 <span data-ttu-id="27d51-201">Cuando una API del sistema de archivos no puede abrir un archivo a causa de una infracción de aislamiento, se devuelve una excepción ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="27d51-201">When a file system API cannot open a file because of an isolation violation, an ERROR_SHARING_VIOLATION exception is returned.</span></span> <span data-ttu-id="27d51-202">Esta infracción de aislamiento se produce cuando dos transacciones intentan acceder al mismo archivo.</span><span class="sxs-lookup"><span data-stu-id="27d51-202">This isolation violation occurs when two transactions try to access the same file.</span></span> <span data-ttu-id="27d51-203">El resultado de la operación de acceso depende del modo en el que se abrió el archivo y de la versión de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en la que se ejecute la transacción.</span><span class="sxs-lookup"><span data-stu-id="27d51-203">The outcome of the access operation depends on the mode the file was opened in and the version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that the transaction is running on.</span></span> <span data-ttu-id="27d51-204">En la tabla siguiente se explican resumidamente los posibles resultados de dos transacciones que están accediendo al mismo archivo.</span><span class="sxs-lookup"><span data-stu-id="27d51-204">The following table outlines the possibly outcomes for two transactions that are accessing the same file.</span></span>  
  
|<span data-ttu-id="27d51-205">Transacción 1</span><span class="sxs-lookup"><span data-stu-id="27d51-205">Transaction 1</span></span>|<span data-ttu-id="27d51-206">Transacción 2</span><span class="sxs-lookup"><span data-stu-id="27d51-206">Transaction 2</span></span>|<span data-ttu-id="27d51-207">Resultado en SQL Server 2008</span><span class="sxs-lookup"><span data-stu-id="27d51-207">Outcome on SQL Server 2008</span></span>|<span data-ttu-id="27d51-208">Resultado en SQL Server 2008 R2 y versiones posteriores</span><span class="sxs-lookup"><span data-stu-id="27d51-208">Outcome on SQL Server 2008 R2 and later versions</span></span>|  
|-------------------|-------------------|--------------------------------|------------------------------------------------------|  
|<span data-ttu-id="27d51-209">Abrir para lectura.</span><span class="sxs-lookup"><span data-stu-id="27d51-209">Open for read.</span></span>|<span data-ttu-id="27d51-210">Abrir para lectura.</span><span class="sxs-lookup"><span data-stu-id="27d51-210">Open for read.</span></span>|<span data-ttu-id="27d51-211">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-211">Both succeed.</span></span>|<span data-ttu-id="27d51-212">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-212">Both succeed.</span></span>|  
|<span data-ttu-id="27d51-213">Abrir para lectura.</span><span class="sxs-lookup"><span data-stu-id="27d51-213">Open for read.</span></span>|<span data-ttu-id="27d51-214">Abrir para escritura.</span><span class="sxs-lookup"><span data-stu-id="27d51-214">Open for write.</span></span>|<span data-ttu-id="27d51-215">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-215">Both succeed.</span></span> <span data-ttu-id="27d51-216">Las operaciones de escritura de la transacción 2 no influyen en las operaciones de lectura realizadas en la transacción 1.</span><span class="sxs-lookup"><span data-stu-id="27d51-216">Write operations under transaction 2 do not affect read operations performed in transaction 1.</span></span>|<span data-ttu-id="27d51-217">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-217">Both succeed.</span></span> <span data-ttu-id="27d51-218">Las operaciones de escritura de la transacción 2 no influyen en las operaciones de lectura realizadas en la transacción 1.</span><span class="sxs-lookup"><span data-stu-id="27d51-218">Write operations under transaction 2 do not affect read operations performed in transaction 1.</span></span>|  
|<span data-ttu-id="27d51-219">Abrir para escritura.</span><span class="sxs-lookup"><span data-stu-id="27d51-219">Open for write.</span></span>|<span data-ttu-id="27d51-220">Abrir para lectura.</span><span class="sxs-lookup"><span data-stu-id="27d51-220">Open for read.</span></span>|<span data-ttu-id="27d51-221">Se produce un error en la operación de apertura de la transacción 2 con una excepción ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="27d51-221">Open for transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="27d51-222">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-222">Both succeed.</span></span>|  
|<span data-ttu-id="27d51-223">Abrir para escritura.</span><span class="sxs-lookup"><span data-stu-id="27d51-223">Open for write.</span></span>|<span data-ttu-id="27d51-224">Abrir para escritura.</span><span class="sxs-lookup"><span data-stu-id="27d51-224">Open for write.</span></span>|<span data-ttu-id="27d51-225">Se produce un error en la operación de apertura de la transacción 2 con una excepción ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="27d51-225">Open for transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="27d51-226">Se produce un error en la operación de apertura de la transacción 2 con una excepción ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="27d51-226">Open for transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|  
|<span data-ttu-id="27d51-227">Abrir para lectura.</span><span class="sxs-lookup"><span data-stu-id="27d51-227">Open for read.</span></span>|<span data-ttu-id="27d51-228">Abrir para SELECT.</span><span class="sxs-lookup"><span data-stu-id="27d51-228">Open for SELECT.</span></span>|<span data-ttu-id="27d51-229">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-229">Both succeed.</span></span>|<span data-ttu-id="27d51-230">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-230">Both succeed.</span></span>|  
|<span data-ttu-id="27d51-231">Abrir para lectura.</span><span class="sxs-lookup"><span data-stu-id="27d51-231">Open for read.</span></span>|<span data-ttu-id="27d51-232">Abrir para UPDATE o DELETE.</span><span class="sxs-lookup"><span data-stu-id="27d51-232">Open for UPDATE or DELETE.</span></span>|<span data-ttu-id="27d51-233">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-233">Both succeed.</span></span> <span data-ttu-id="27d51-234">Las operaciones de escritura de la transacción 2 no influyen en las operaciones de lectura realizadas en la transacción 1.</span><span class="sxs-lookup"><span data-stu-id="27d51-234">Write operations under transaction 2 do not affect read operations performed in transaction 1.</span></span>|<span data-ttu-id="27d51-235">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-235">Both succeed.</span></span> <span data-ttu-id="27d51-236">Las operaciones de escritura de la transacción 2 no influyen en las operaciones de lectura realizadas en la transacción 1.</span><span class="sxs-lookup"><span data-stu-id="27d51-236">Write operations under transaction 2 do not affect read operations performed in transaction 1.</span></span>|  
|<span data-ttu-id="27d51-237">Abrir para escritura.</span><span class="sxs-lookup"><span data-stu-id="27d51-237">Open for write.</span></span>|<span data-ttu-id="27d51-238">Abrir para SELECT.</span><span class="sxs-lookup"><span data-stu-id="27d51-238">open for SELECT.</span></span>|<span data-ttu-id="27d51-239">La transacción 2 se bloquea hasta que la transacción 1 se confirme o finalice la transacción. O bien, se agota el tiempo de espera de bloqueo de la transacción.</span><span class="sxs-lookup"><span data-stu-id="27d51-239">Transaction 2 blocks until transaction 1 commits or ends the transaction, or the transaction lock times out.</span></span>|<span data-ttu-id="27d51-240">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-240">Both succeed.</span></span>|  
|<span data-ttu-id="27d51-241">Abrir para escritura.</span><span class="sxs-lookup"><span data-stu-id="27d51-241">Open for write.</span></span>|<span data-ttu-id="27d51-242">Abrir para UPDATE o DELETE.</span><span class="sxs-lookup"><span data-stu-id="27d51-242">Open for UPDATE or DELETE.</span></span>|<span data-ttu-id="27d51-243">La transacción 2 se bloquea hasta que la transacción 1 se confirme o finalice la transacción. O bien, se agota el tiempo de espera de bloqueo de la transacción.</span><span class="sxs-lookup"><span data-stu-id="27d51-243">Transaction 2 blocks until transaction 1 commits or ends the transaction, or the transaction lock times out.</span></span>|<span data-ttu-id="27d51-244">La transacción 2 se bloquea hasta que la transacción 1 se confirme o finalice la transacción. O bien, se agota el tiempo de espera de bloqueo de la transacción.</span><span class="sxs-lookup"><span data-stu-id="27d51-244">Transaction 2 blocks until transaction 1 commits or ends the transaction, or the transaction lock times out.</span></span>|  
|<span data-ttu-id="27d51-245">Abrir para SELECT.</span><span class="sxs-lookup"><span data-stu-id="27d51-245">Open for SELECT.</span></span>|<span data-ttu-id="27d51-246">Abrir para lectura.</span><span class="sxs-lookup"><span data-stu-id="27d51-246">Open for read.</span></span>|<span data-ttu-id="27d51-247">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-247">Both succeed.</span></span>|<span data-ttu-id="27d51-248">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-248">Both succeed.</span></span>|  
|<span data-ttu-id="27d51-249">Abrir para SELECT.</span><span class="sxs-lookup"><span data-stu-id="27d51-249">Open for SELECT.</span></span>|<span data-ttu-id="27d51-250">Abrir para escritura.</span><span class="sxs-lookup"><span data-stu-id="27d51-250">Open for write.</span></span>|<span data-ttu-id="27d51-251">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-251">Both succeed.</span></span> <span data-ttu-id="27d51-252">Las operaciones de escritura de la transacción 2 no influyen en la transacción 1.</span><span class="sxs-lookup"><span data-stu-id="27d51-252">Write operations under transaction 2 do not affect transaction 1.</span></span>|<span data-ttu-id="27d51-253">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-253">Both succeed.</span></span> <span data-ttu-id="27d51-254">Las operaciones de escritura de la transacción 2 no influyen en la transacción 1.</span><span class="sxs-lookup"><span data-stu-id="27d51-254">Write operations under transaction 2 do not affect transaction 1.</span></span>|  
|<span data-ttu-id="27d51-255">Abrir para UPDATE o DELETE.</span><span class="sxs-lookup"><span data-stu-id="27d51-255">Open for UPDATE or DELETE.</span></span>|<span data-ttu-id="27d51-256">Abrir para lectura.</span><span class="sxs-lookup"><span data-stu-id="27d51-256">Open for read.</span></span>|<span data-ttu-id="27d51-257">Se produce un error en la operación de apertura de la transacción 2 con una excepción ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="27d51-257">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="27d51-258">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-258">Both succeed.</span></span>|  
|<span data-ttu-id="27d51-259">Abrir para UPDATE o DELETE.</span><span class="sxs-lookup"><span data-stu-id="27d51-259">Open for UPDATE or DELETE.</span></span>|<span data-ttu-id="27d51-260">Abrir para escritura.</span><span class="sxs-lookup"><span data-stu-id="27d51-260">Open for write.</span></span>|<span data-ttu-id="27d51-261">Se produce un error en la operación de apertura de la transacción 2 con una excepción ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="27d51-261">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="27d51-262">Se produce un error en la operación de apertura de la transacción 2 con una excepción ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="27d51-262">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|  
|<span data-ttu-id="27d51-263">Abrir para SELECT con REPEATABLE READ.</span><span class="sxs-lookup"><span data-stu-id="27d51-263">Open for SELECT with repeatable read.</span></span>|<span data-ttu-id="27d51-264">Abrir para lectura.</span><span class="sxs-lookup"><span data-stu-id="27d51-264">Open for read.</span></span>|<span data-ttu-id="27d51-265">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-265">Both succeed.</span></span>|<span data-ttu-id="27d51-266">Ambas son correctas.</span><span class="sxs-lookup"><span data-stu-id="27d51-266">Both succeed.</span></span>|  
|<span data-ttu-id="27d51-267">Abrir para SELECT con REPEATABLE READ.</span><span class="sxs-lookup"><span data-stu-id="27d51-267">Open for SELECT with repeatable read.</span></span>|<span data-ttu-id="27d51-268">Abrir para escritura.</span><span class="sxs-lookup"><span data-stu-id="27d51-268">Open for write.</span></span>|<span data-ttu-id="27d51-269">Se produce un error en la operación de apertura de la transacción 2 con una excepción ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="27d51-269">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="27d51-270">Se produce un error en la operación de apertura de la transacción 2 con una excepción ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="27d51-270">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|  
  
 <span data-ttu-id="27d51-271">**Escritura continua desde clientes remotos**</span><span class="sxs-lookup"><span data-stu-id="27d51-271">**Write-Through from Remote Clients**</span></span>  
  
 <span data-ttu-id="27d51-272">El acceso del sistema de archivos remoto a los datos FILESTREAM está habilitado por el protocolo Bloque de mensajes de servidor (SMB).</span><span class="sxs-lookup"><span data-stu-id="27d51-272">Remote file system access to FILESTREAM data is enabled over the Server Message Block (SMB) protocol.</span></span> <span data-ttu-id="27d51-273">Si el cliente es remoto, no se almacena en caché ninguna operación de escritura del lado cliente.</span><span class="sxs-lookup"><span data-stu-id="27d51-273">If the client is remote, no write operations are cached by the client side.</span></span> <span data-ttu-id="27d51-274">Las operaciones de escritura siempre se enviarán al servidor.</span><span class="sxs-lookup"><span data-stu-id="27d51-274">The write operations will always be sent to the server.</span></span> <span data-ttu-id="27d51-275">Los datos pueden se pueden almacenar en memoria caché en el servidor.</span><span class="sxs-lookup"><span data-stu-id="27d51-275">The data can be cached on the server side.</span></span> <span data-ttu-id="27d51-276">Recomendamos que las aplicaciones que se están ejecutando en clientes remotos consoliden pequeñas operaciones de escritura para realizar menos operaciones de escritura mediante un tamaño de datos mayor.</span><span class="sxs-lookup"><span data-stu-id="27d51-276">We recommend that applications that are running on remote clients consolidate small write operations to make fewer write operations using larger data size.</span></span>  
  
 <span data-ttu-id="27d51-277">No se admite la creación de vistas asignadas de memoria (E/S asignada de memoria) usando un identificador FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="27d51-277">Creating memory mapped views (memory mapped I/O) by using a FILESTREAM handle is not supported.</span></span> <span data-ttu-id="27d51-278">Si la asignación de memoria se usa para los datos FILESTREAM, el [!INCLUDE[ssDE](../../includes/ssde-md.md)] no puede garantizar la coherencia y la durabilidad de los datos o la integridad de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="27d51-278">If memory mapping is used for FILESTREAM data, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] cannot guarantee consistency and durability of the data or the integrity of the database.</span></span>  
  
##  <a name="related-tasks"></a><a name="reltasks"></a> <span data-ttu-id="27d51-279">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="27d51-279">Related Tasks</span></span>  
 [<span data-ttu-id="27d51-280">Enable and Configure FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="27d51-280">Enable and Configure FILESTREAM</span></span>](enable-and-configure-filestream.md)  
  [<span data-ttu-id="27d51-281">crear una base de datos habilitada para FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="27d51-281">Create a FILESTREAM-Enabled Database</span></span>](create-a-filestream-enabled-database.md)  
  [<span data-ttu-id="27d51-282">Crear una tabla para almacenar datos FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="27d51-282">Create a Table for Storing FILESTREAM Data</span></span>](create-a-table-for-storing-filestream-data.md)  
  [<span data-ttu-id="27d51-283">Obtener acceso a datos FILESTREAM con Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="27d51-283">Access FILESTREAM Data with Transact-SQL</span></span>](access-filestream-data-with-transact-sql.md)  
  [<span data-ttu-id="27d51-284">Crear aplicaciones cliente para datos FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="27d51-284">Create Client Applications for FILESTREAM Data</span></span>](create-client-applications-for-filestream-data.md)  
  [<span data-ttu-id="27d51-285">Obtener acceso a los datos FILESTREAM con OpenSqlFilestream</span><span class="sxs-lookup"><span data-stu-id="27d51-285">Access FILESTREAM Data with OpenSqlFilestream</span></span>](access-filestream-data-with-opensqlfilestream.md)  
  [<span data-ttu-id="27d51-286">Realizar actualizaciones parciales de los datos FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="27d51-286">Make Partial Updates to FILESTREAM Data</span></span>](make-partial-updates-to-filestream-data.md)  
  [<span data-ttu-id="27d51-287">Evitar conflictos con operaciones de base de datos en aplicaciones FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="27d51-287">Avoid Conflicts with Database Operations in FILESTREAM Applications</span></span>](avoid-conflicts-with-database-operations-in-filestream-applications.md)  
  [<span data-ttu-id="27d51-288">Mover una base de datos habilitada para FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="27d51-288">Move a FILESTREAM-Enabled Database</span></span>](move-a-filestream-enabled-database.md)  
  [<span data-ttu-id="27d51-289">Configurar FILESTREAM en un clúster de conmutación por error</span><span class="sxs-lookup"><span data-stu-id="27d51-289">Set Up FILESTREAM on a Failover Cluster</span></span>](set-up-filestream-on-a-failover-cluster.md)  
  [<span data-ttu-id="27d51-290">Configurar un Firewall para el acceso de FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="27d51-290">Configure a Firewall for FILESTREAM Access</span></span>](configure-a-firewall-for-filestream-access.md)  
  
##  <a name="related-content"></a><a name="relcontent"></a> <span data-ttu-id="27d51-291">Contenido relacionado</span><span class="sxs-lookup"><span data-stu-id="27d51-291">Related Content</span></span>  
 [<span data-ttu-id="27d51-292">Compatibilidad de FILESTREAM con otras características de SQL Server</span><span class="sxs-lookup"><span data-stu-id="27d51-292">FILESTREAM Compatibility with Other SQL Server Features</span></span>](filestream-compatibility-with-other-sql-server-features.md)  
  
