---
title: Guías de plan | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- TEMPLATE plan guide
- SQL plan guides
- OPTIMIZE FOR query hint
- RECOMPILE query hint
- OBJECT plan guide
- plan guides [SQL Server], about plan guides
- OPTION clause
- plan guides [SQL Server]
- USE PLAN query hint
ms.assetid: bfc97632-c14c-4768-9dc5-a9c512f6b2bd
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: c97682163313a56acb8521174fa8d4012a69b529
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87674781"
---
# <a name="plan-guides"></a><span data-ttu-id="ccace-102">Guías de plan</span><span class="sxs-lookup"><span data-stu-id="ccace-102">Plan Guides</span></span>
  <span data-ttu-id="ccace-103">Las guías de plan permiten optimizar el rendimiento de las consultas cuando no pueda o no desee cambiar directamente el texto de la consulta real en [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ccace-103">Plan guides let you optimize the performance of queries when you cannot or do not want to directly change the text of the actual query in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="ccace-104">Las guías de plan influyen en la optimización de las consultas adjuntando sugerencias de consulta o un plan de consulta fijo para ellas.</span><span class="sxs-lookup"><span data-stu-id="ccace-104">Plan guides influence the optimization of queries by attaching query hints or a fixed query plan to them.</span></span> <span data-ttu-id="ccace-105">Las guías de plan pueden ser de gran utilidad cuando el rendimiento de un pequeño subconjunto de consultas de una aplicación de base de datos proporcionado por otro proveedor no es el esperado.</span><span class="sxs-lookup"><span data-stu-id="ccace-105">Plan guides can be useful when a small subset of queries in a database application provided by a third-party vendor are not performing as expected.</span></span> <span data-ttu-id="ccace-106">En la guía de plan, se especifica la instrucción Transact-SQL que se desea optimizar y además una cláusula OPTION que incluye las sugerencias de consulta que se desean usar o un plan de consulta específico con el que desea optimizar la consulta.</span><span class="sxs-lookup"><span data-stu-id="ccace-106">In the plan guide, you specify the Transact-SQL statement that you want optimized and either an OPTION clause that contains the query hints you want to use or a specific query plan you want to use to optimize the query.</span></span> <span data-ttu-id="ccace-107">Cuando la consulta se ejecuta, el [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] hace coincidir la instrucción Transact-SQL con la guía de plan y además adjunta en tiempo de ejecución la cláusula OPTION a la consulta o usa el plan de consulta especificado.</span><span class="sxs-lookup"><span data-stu-id="ccace-107">When the query executes, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] matches the Transact-SQL statement to the plan guide and attaches the OPTION clause to the query at run time or uses the specified query plan.</span></span>  
  
 <span data-ttu-id="ccace-108">El número total de guías de plan que se pueden crear solo está limitado por los recursos de los que disponga el sistema.</span><span class="sxs-lookup"><span data-stu-id="ccace-108">The total number of plan guides you can create is limited only by available system resources.</span></span> <span data-ttu-id="ccace-109">No obstante, las guías de plan deberían limitarse a aquellas consultas de gran importancia cuyo rendimiento se desea mejorar o estabilizar.</span><span class="sxs-lookup"><span data-stu-id="ccace-109">Nevertheless, plan guides should be limited to mission-critical queries that are targeted for improved or stabilized performance.</span></span> <span data-ttu-id="ccace-110">No se deben usar las guías de plan para influenciar la mayor parte de la carga de la consulta de una aplicación implementada.</span><span class="sxs-lookup"><span data-stu-id="ccace-110">Plan guides should not be used to influence most of the query load of a deployed application.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ccace-111">Las guías de plan no se pueden usar en todas las ediciones de [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ccace-111">Plan guides cannot be used in every edition of [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ccace-112">Para obtener una lista de las características admitidas por las ediciones de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], vea [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="ccace-112">For a list of features that are supported by the editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span> <span data-ttu-id="ccace-113">Las guías de plan son visibles en todas las ediciones.</span><span class="sxs-lookup"><span data-stu-id="ccace-113">Plan guides are visible in any edition.</span></span> <span data-ttu-id="ccace-114">También se pueden adjuntar bases de datos que incluyen guías de plan a cualquier versión.</span><span class="sxs-lookup"><span data-stu-id="ccace-114">You can also attach a database that contains plan guides to any edition.</span></span> <span data-ttu-id="ccace-115">Las guías de plan permanecen intactas cuando se restaura o adjunta una base de datos a una versión actualizada de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ccace-115">Plan guides remain intact when you restore or attach a database to an upgraded version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="types-of-plan-guides"></a><span data-ttu-id="ccace-116">Tipos de guías de plan</span><span class="sxs-lookup"><span data-stu-id="ccace-116">Types of Plan Guides</span></span>  
 <span data-ttu-id="ccace-117">Se pueden crear los siguientes tipos de guías de plan.</span><span class="sxs-lookup"><span data-stu-id="ccace-117">The following types of plan guides can be created.</span></span>  
  
 <span data-ttu-id="ccace-118">OBJECT [guía de plan]</span><span class="sxs-lookup"><span data-stu-id="ccace-118">OBJECT plan guide</span></span>  
 <span data-ttu-id="ccace-119">Una guía de plan OBJECT compara las consultas que se ejecutan en el contexto de procedimientos almacenados de [!INCLUDE[tsql](../../includes/tsql-md.md)] , funciones escalares definidas por el usuario, funciones definidas por el usuario con valores de tabla de múltiples instrucciones y desencadenadores DML.</span><span class="sxs-lookup"><span data-stu-id="ccace-119">An OBJECT plan guide matches queries that execute in the context of [!INCLUDE[tsql](../../includes/tsql-md.md)] stored procedures, scalar user-defined functions, multi-statement table-valued user-defined functions, and DML triggers.</span></span>  
  
 <span data-ttu-id="ccace-120">Suponga que el siguiente procedimiento almacenado, que usa el parámetro `@Country`_`region` , está en una aplicación de base de datos que se implementa con la base de datos [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="ccace-120">Suppose the following stored procedure, which takes the `@Country`_`region` parameter, is in a database application that is deployed against the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database:</span></span>  
  
```  
CREATE PROCEDURE Sales.GetSalesOrderByCountry (@Country_region nvarchar(60))  
AS  
BEGIN  
    SELECT *  
    FROM Sales.SalesOrderHeader AS h, Sales.Customer AS c,   
        Sales.SalesTerritory AS t  
    WHERE h.CustomerID = c.CustomerID  
        AND c.TerritoryID = t.TerritoryID  
        AND CountryRegionCode = @Country_region  
END;  
```  
  
 <span data-ttu-id="ccace-121">Asuma que este procedimiento almacenado ha sido compilado y optimizado para `@Country`_`region = N'AU'` (Australia).</span><span class="sxs-lookup"><span data-stu-id="ccace-121">Assume that this stored procedure has been compiled and optimized for `@Country`_`region = N'AU'` (Australia).</span></span> <span data-ttu-id="ccace-122">Sin embargo, dado hay relativamente pocos pedidos de ventas que se originen en Australia, el rendimiento se reduce cuando la consulta ejecuta usando valores para los parámetros que se corresponden con países con más pedidos de ventas.</span><span class="sxs-lookup"><span data-stu-id="ccace-122">However, because there are relatively few sales orders that originate from Australia, performance decreases when the query executes using parameter values of countries with more sales orders.</span></span> <span data-ttu-id="ccace-123">Dado que el mayor número de pedidos de ventas se origina en Estados Unidos, el rendimiento de un plan de consulta generado para `@Country`\_`region = N'US'` será probablemente mejor para todos los valores posibles del parámetro `@Country`\_`region` .</span><span class="sxs-lookup"><span data-stu-id="ccace-123">Because the most sales orders originate in the United States, a query plan that is generated for `@Country`\_`region = N'US'` would likely perform better for all possible values of the `@Country`\_`region` parameter.</span></span>  
  
 <span data-ttu-id="ccace-124">Puede solucionar este problema modificando el procedimiento almacenado y agregando la sugerencia de consulta `OPTIMIZE FOR` a la consulta.</span><span class="sxs-lookup"><span data-stu-id="ccace-124">You could address this problem by modifying the stored procedure to add the `OPTIMIZE FOR` query hint to the query.</span></span> <span data-ttu-id="ccace-125">No obstante, puesto que el procedimiento almacenado se encuentra en una aplicación implementada, no puede modificar directamente el código de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ccace-125">However, because the stored procedure is in a deployed application, you cannot directly modify the application code.</span></span> <span data-ttu-id="ccace-126">En su lugar, puede crear la guía de plan siguiente en la base de datos [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ccace-126">Instead, you can create the following plan guide in the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database.</span></span>  
  
```  
sp_create_plan_guide   
@name = N'Guide1',  
@stmt = N'SELECT *FROM Sales.SalesOrderHeader AS h,  
        Sales.Customer AS c,  
        Sales.SalesTerritory AS t  
        WHERE h.CustomerID = c.CustomerID   
            AND c.TerritoryID = t.TerritoryID  
            AND CountryRegionCode = @Country_region',  
@type = N'OBJECT',  
@module_or_batch = N'Sales.GetSalesOrderByCountry',  
@params = NULL,  
@hints = N'OPTION (OPTIMIZE FOR (@Country_region = N''US''))';  
```  
  
 <span data-ttu-id="ccace-127">Cuando se ejecute la consulta especificada en la instrucción `sp_create_plan_guide` , se modificará la consulta antes de la optimización para incluir la cláusula `OPTIMIZE FOR (@Country = N''US'')` .</span><span class="sxs-lookup"><span data-stu-id="ccace-127">When the query specified in the `sp_create_plan_guide` statement executes, the query is modified before optimization to include the `OPTIMIZE FOR (@Country = N''US'')` clause.</span></span>  
  
 <span data-ttu-id="ccace-128">Guía de plan SQL</span><span class="sxs-lookup"><span data-stu-id="ccace-128">SQL plan guide</span></span>  
 <span data-ttu-id="ccace-129">Una guía de plan de SQL compara las consultas que se ejecutan en el contexto de instrucciones independientes de [!INCLUDE[tsql](../../includes/tsql-md.md)] y lotes que no forman parte de un objeto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="ccace-129">An SQL plan guide matches queries that execute in the context of stand-alone [!INCLUDE[tsql](../../includes/tsql-md.md)] statements and batches that are not part of a database object.</span></span> <span data-ttu-id="ccace-130">Las guías de plan basadas en SQL también se pueden usar para comparar consultas que se parametrizan en un formulario especificado.</span><span class="sxs-lookup"><span data-stu-id="ccace-130">SQL-based plan guides can also be used to match queries that parameterize to a specified form.</span></span> <span data-ttu-id="ccace-131">Las guías de plan de SQL se aplican a las instrucciones y lotes independientes de [!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ccace-131">SQL plan guides apply to stand-alone [!INCLUDE[tsql](../../includes/tsql-md.md)] statements and batches.</span></span> <span data-ttu-id="ccace-132">Con frecuencia, las aplicaciones envían esas instrucciones usando el procedimiento almacenado del sistema [sp_executesql](/sql/relational-databases/system-stored-procedures/sp-executesql-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="ccace-132">Frequently, these statements are submitted by an application by using the [sp_executesql](/sql/relational-databases/system-stored-procedures/sp-executesql-transact-sql) system stored procedure.</span></span> <span data-ttu-id="ccace-133">Considere, por ejemplo, el siguiente lote independiente:</span><span class="sxs-lookup"><span data-stu-id="ccace-133">For example, consider the following stand-alone batch:</span></span>  
  
```  
SELECT TOP 1 * FROM Sales.SalesOrderHeader ORDER BY OrderDate DESC;  
```  
  
 <span data-ttu-id="ccace-134">Para evitar que se genere un plan de ejecución paralelo en esta consulta, cree la siguiente guía de plan y establezca la sugerencia de consulta `MAXDOP` en `1` en el parámetro `@hints` .</span><span class="sxs-lookup"><span data-stu-id="ccace-134">To prevent a parallel execution plan from being generated on this query, create the following plan guide and set the `MAXDOP` query hint to `1` in the `@hints` parameter.</span></span>  
  
```  
sp_create_plan_guide   
@name = N'Guide2',   
@stmt = N'SELECT TOP 1 * FROM Sales.SalesOrderHeader ORDER BY OrderDate DESC',  
@type = N'SQL',  
@module_or_batch = NULL,   
@params = NULL,   
@hints = N'OPTION (MAXDOP 1)';  
```  
  
> [!IMPORTANT]  
>  <span data-ttu-id="ccace-135">Los valores que se proporcionan para los argumentos `@module_or_batch` y `@params` de la instrucción `sp_create_plan guide` deben coincidir con el texto correspondiente enviado en la consulta real.</span><span class="sxs-lookup"><span data-stu-id="ccace-135">The values that are supplied for the `@module_or_batch` and `@params` arguments of the `sp_create_plan guide` statement must match the corresponding text submitted in the actual query.</span></span> <span data-ttu-id="ccace-136">Para obtener más información, vea [sp_create_plan_guide &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-create-plan-guide-transact-sql) y [Usar SQL Server Profiler para crear y probar guías de plan](plan-guides.md).</span><span class="sxs-lookup"><span data-stu-id="ccace-136">For more information, see [sp_create_plan_guide &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-create-plan-guide-transact-sql) and [Use SQL Server Profiler to Create and Test Plan Guides](plan-guides.md).</span></span>  
  
 <span data-ttu-id="ccace-137">También se pueden crear guías de plan SQL en consultas que se parametrizan en el mismo formulario cuando se establece el valor de la opción SET de base de datos PARAMETERIZATION en FORCED, o cuando se crea una guía de plan TEMPLATE en la que se especifica que debe parametrizarse una clase de consultas.</span><span class="sxs-lookup"><span data-stu-id="ccace-137">SQL plan guides can also be created on queries that parameterize to the same form when the PARAMETERIZATION database option is SET to FORCED, or when a TEMPLATE plan guide is created specifying that a parameterized class of queries.</span></span>  
  
 <span data-ttu-id="ccace-138">TEMPLATE, guía de plan</span><span class="sxs-lookup"><span data-stu-id="ccace-138">TEMPLATE plan guide</span></span>  
 <span data-ttu-id="ccace-139">Una guía de plan TEMPLATE compara consultas independientes que se parametrizan en un formulario especificado.</span><span class="sxs-lookup"><span data-stu-id="ccace-139">A TEMPLATE plan guide matches stand-alone queries that parameterize to a specified form.</span></span> <span data-ttu-id="ccace-140">Estas guías de plan se usan para reemplazar la opción PARAMETERIZATION actual de una base de datos para una clase de consultas por medio de SET.</span><span class="sxs-lookup"><span data-stu-id="ccace-140">These plan guides are used to override the current PARAMETERIZATION database SET option of a database for a class of queries.</span></span>  
  
 <span data-ttu-id="ccace-141">Puede crear una guía de plan TEMPLATE en cualquiera de las situaciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="ccace-141">You can create a TEMPLATE plan guide in either of the following situations:</span></span>  
  
-   <span data-ttu-id="ccace-142">Se ha establecido el valor de la opción PARAMETRIZATION de la base de datos en FORCED mediante el mandato SET, pero hay consultas que desea compilar según las reglas parametrización simple.</span><span class="sxs-lookup"><span data-stu-id="ccace-142">The PARAMETERIZATION database option is SET to FORCED, but there are queries you want compiled according to the rules of simple parameterization.</span></span>  
  
-   <span data-ttu-id="ccace-143">Se ha establecido el valor de la opción PARAMETERIZATION de la base de datos en SIMPLE (el valor predeterminado), pero desea que intente la parametrización forzada en una clase de consultas.</span><span class="sxs-lookup"><span data-stu-id="ccace-143">The PARAMETERIZATION database option is SET to SIMPLE (the default setting), but you want forced parameterization to be tried on a class of queries.</span></span>  
  
## <a name="plan-guide-matching-requirements"></a><span data-ttu-id="ccace-144">Requisitos de coincidencia de la guía de plan</span><span class="sxs-lookup"><span data-stu-id="ccace-144">Plan Guide Matching Requirements</span></span>  
 <span data-ttu-id="ccace-145">Las guías de plan tienen como ámbito la base de datos en la que se crean.</span><span class="sxs-lookup"><span data-stu-id="ccace-145">Plan guides are scoped to the database in which they are created.</span></span> <span data-ttu-id="ccace-146">Por tanto, solo se pueden buscar las coincidencias con la consulta de las guías de plan que existen en la base de datos actual cuando se ejecuta una consulta.</span><span class="sxs-lookup"><span data-stu-id="ccace-146">Therefore, only plan guides that are in the database that is current when a query executes can be matched to the query.</span></span> <span data-ttu-id="ccace-147">Por ejemplo, si [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] es la base de datos actual y se ejecuta la consulta siguiente:</span><span class="sxs-lookup"><span data-stu-id="ccace-147">For example, if [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] is the current database and the following query executes:</span></span>  
  
 `SELECT FirstName, LastName FROM Person.Person;`  
  
 <span data-ttu-id="ccace-148">Solo las guías de plan de la base de datos [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] serán aptas para buscar las coincidencias con esta consulta.</span><span class="sxs-lookup"><span data-stu-id="ccace-148">Only plan guides in the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database are eligible to be matched to this query.</span></span> <span data-ttu-id="ccace-149">No obstante, si la base de datos actual es [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] y se ejecutan las instrucciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="ccace-149">However, if [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] is the current database and the following statements are run:</span></span>  
  
 `USE DB1;`  
  
 `SELECT FirstName, LastName FROM Person.Person;`  
  
 <span data-ttu-id="ccace-150">Solo las guías de plan de `DB1` serán aptas para buscar las coincidencias con la consulta, puesto que la consulta se ejecuta en el contexto de `DB1`.</span><span class="sxs-lookup"><span data-stu-id="ccace-150">Only plan guides in `DB1` are eligible to be matched to the query because the query is executing in the context of `DB1`.</span></span>  
  
 <span data-ttu-id="ccace-151">En el caso de las guías de plan basadas en SQL o TEMPLATE, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] examina los valores para los argumentos @module_or_batch y @params con una consulta, comparando ambos valores carácter a carácter.</span><span class="sxs-lookup"><span data-stu-id="ccace-151">For SQL- or TEMPLATE-based plan guides, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] matches the values for the @module_or_batch and @params arguments to a query by comparing the two values character by character.</span></span> <span data-ttu-id="ccace-152">Esto significa que se debe proporcionar el texto exactamente como lo recibe [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en el lote real.</span><span class="sxs-lookup"><span data-stu-id="ccace-152">This means you must provide the text exactly as [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] receives it in the actual batch.</span></span>  
  
 <span data-ttu-id="ccace-153">Cuando @type = 'SQL' y @module_or_batch se establece en NULL, el valor de @module_or_batch se establece en el valor de @stmt. Esto significa que el valor de *statement_text* debe proporcionarse en formato idéntico, carácter a carácter, en que se envía a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ccace-153">When @type = 'SQL' and @module_or_batch is set to NULL, the value of @module_or_batch is set to the value of @stmt. This means that the value for *statement_text* must be provided in the identical format, character-for-character, as it is submitted to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ccace-154">Para facilitar esta concordancia no se realiza ninguna conversión interna.</span><span class="sxs-lookup"><span data-stu-id="ccace-154">No internal conversion is performed to facilitate this match.</span></span>  
  
 <span data-ttu-id="ccace-155">Cuando una guía de plan normal (SQL u OBJECT) y una guía de plan TEMPLATE se pueden aplicar a una instrucción, solo se utilizará la guía de plan normal.</span><span class="sxs-lookup"><span data-stu-id="ccace-155">When both a regular (SQL or OBJECT) plan guide and a TEMPLATE plan guide can apply to a statement, only the regular plan guide will be used.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ccace-156">El lote que contiene la instrucción en la que quiere crear una guía de plan no puede contener una instrucción USE *database* .</span><span class="sxs-lookup"><span data-stu-id="ccace-156">The batch that contains the statement on which you want to create a plan guide cannot contain a USE *database* statement.</span></span>  
  
## <a name="plan-guide-effect-on-the-plan-cache"></a><span data-ttu-id="ccace-157">Efecto de la guía de plan en la caché del plan</span><span class="sxs-lookup"><span data-stu-id="ccace-157">Plan Guide Effect on the Plan Cache</span></span>  
 <span data-ttu-id="ccace-158">Al crear una guía de plan en un módulo, se quita el plan de consulta para dicho módulo de la caché del plan.</span><span class="sxs-lookup"><span data-stu-id="ccace-158">Creating a plan guide on a module removes the query plan for that module from the plan cache.</span></span> <span data-ttu-id="ccace-159">Al crear una guía de plan de tipo OBJECT o SQL en un lote, se quita el plan de consulta para un lote que tiene el mismo valor hash.</span><span class="sxs-lookup"><span data-stu-id="ccace-159">Creating a plan guide of type OBJECT or SQL on a batch removes the query plan for a batch that has the same hash value.</span></span> <span data-ttu-id="ccace-160">Al crear una guía de plan de tipo TEMPLATE, se quitan todos los lotes de instrucción única de la memoria caché del plan dentro de esa base de datos.</span><span class="sxs-lookup"><span data-stu-id="ccace-160">Creating a plan guide of type TEMPLATE removes all single-statement batches from the plan cache within that database.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="ccace-161">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="ccace-161">Related Tasks</span></span>  
  
|<span data-ttu-id="ccace-162">Tarea</span><span class="sxs-lookup"><span data-stu-id="ccace-162">Task</span></span>|<span data-ttu-id="ccace-163">Tema</span><span class="sxs-lookup"><span data-stu-id="ccace-163">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="ccace-164">Describe cómo crear una guía de plan.</span><span class="sxs-lookup"><span data-stu-id="ccace-164">Describes how to create a plan guide.</span></span>|[<span data-ttu-id="ccace-165">Crear una nueva guía de plan</span><span class="sxs-lookup"><span data-stu-id="ccace-165">Create a New Plan Guide</span></span>](create-a-new-plan-guide.md)|  
|<span data-ttu-id="ccace-166">Describe cómo crear una guía de plan para consultas con parámetros.</span><span class="sxs-lookup"><span data-stu-id="ccace-166">Describes how to create a plan guide for parameterized queries.</span></span>|[<span data-ttu-id="ccace-167">Crear una guía de plan para consultas con parámetros</span><span class="sxs-lookup"><span data-stu-id="ccace-167">Create a Plan Guide for Parameterized Queries</span></span>](create-a-plan-guide-for-parameterized-queries.md)|  
|<span data-ttu-id="ccace-168">Describe cómo controlar el comportamiento de parametrización de consultas mediante guías de plan.</span><span class="sxs-lookup"><span data-stu-id="ccace-168">Describes how to control query parameterization behavior by using plan guides.</span></span>|[<span data-ttu-id="ccace-169">Especificar el comportamiento de parametrización de consultas por medio de guías de plan</span><span class="sxs-lookup"><span data-stu-id="ccace-169">Specify Query Parameterization Behavior by Using Plan Guides</span></span>](specify-query-parameterization-behavior-by-using-plan-guides.md)|  
|<span data-ttu-id="ccace-170">Describe cómo incluir un plan de consulta fijo en una guía de plan.</span><span class="sxs-lookup"><span data-stu-id="ccace-170">Describes how to include a fixed query plan in a plan guide.</span></span>|[<span data-ttu-id="ccace-171">Aplicar un plan de consulta fijo a una guía de plan</span><span class="sxs-lookup"><span data-stu-id="ccace-171">Apply a Fixed Query Plan to a Plan Guide</span></span>](apply-a-fixed-query-plan-to-a-plan-guide.md)|  
|<span data-ttu-id="ccace-172">Describe cómo especificar sugerencias de consulta en una guía de plan.</span><span class="sxs-lookup"><span data-stu-id="ccace-172">Describes how to specify query hints in a plan guide.</span></span>|[<span data-ttu-id="ccace-173">Asociar sugerencias de consulta a una guía de plan</span><span class="sxs-lookup"><span data-stu-id="ccace-173">Attach Query Hints to a Plan Guide</span></span>](attach-query-hints-to-a-plan-guide.md)|  
|<span data-ttu-id="ccace-174">Describe cómo ver las propiedades de la guía de plan.</span><span class="sxs-lookup"><span data-stu-id="ccace-174">Describes how to view plan guide properties.</span></span>|[<span data-ttu-id="ccace-175">Ver propiedades de la guía de plan</span><span class="sxs-lookup"><span data-stu-id="ccace-175">View Plan Guide Properties</span></span>](view-plan-guide-properties.md)|  
|<span data-ttu-id="ccace-176">Describe cómo usar SQL Server Profiler para crear y probar guías de plan.</span><span class="sxs-lookup"><span data-stu-id="ccace-176">Describes how to use SQL Server Profiler to create and test plan guides.</span></span>|[<span data-ttu-id="ccace-177">Usar SQL Server Profiler para crear y probar guías de plan</span><span class="sxs-lookup"><span data-stu-id="ccace-177">Use SQL Server Profiler to Create and Test Plan Guides</span></span>](plan-guides.md)|  
|<span data-ttu-id="ccace-178">Describe cómo validar las guías de plan.</span><span class="sxs-lookup"><span data-stu-id="ccace-178">Describes how to validate plan guides.</span></span>|[<span data-ttu-id="ccace-179">Validar guías de planes tras una actualización</span><span class="sxs-lookup"><span data-stu-id="ccace-179">Validate Plan Guides After Upgrade</span></span>](validate-plan-guides-after-upgrade.md)|  
  
## <a name="see-also"></a><span data-ttu-id="ccace-180">Consulte también</span><span class="sxs-lookup"><span data-stu-id="ccace-180">See Also</span></span>  
 <span data-ttu-id="ccace-181">[sp_create_plan_guide &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-create-plan-guide-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="ccace-181">[sp_create_plan_guide &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-create-plan-guide-transact-sql) </span></span>  
 <span data-ttu-id="ccace-182">[sp_create_plan_guide_from_handle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-create-plan-guide-from-handle-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="ccace-182">[sp_create_plan_guide_from_handle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-create-plan-guide-from-handle-transact-sql) </span></span>  
 <span data-ttu-id="ccace-183">[sp_control_plan_guide &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-control-plan-guide-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="ccace-183">[sp_control_plan_guide &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-control-plan-guide-transact-sql) </span></span>  
 <span data-ttu-id="ccace-184">[sys.plan_guides &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-plan-guides-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="ccace-184">[sys.plan_guides &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-plan-guides-transact-sql) </span></span>  
 [<span data-ttu-id="ccace-185">sys.fn_validate_plan_guide &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ccace-185">sys.fn_validate_plan_guide &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/sys-fn-validate-plan-guide-transact-sql)  
  
  
