---
title: El registro de transacciones (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 01/04/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
helpviewer_keywords:
- transaction logs [SQL Server], about
- databases [SQL Server], transaction logs
- logs [SQL Server], transaction logs
ms.assetid: d7be5ac5-4c8e-4d0a-b114-939eb97dac4d
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 025ef22e6dee1fcfaa1225a4709fa01b6c326b12
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87671527"
---
# <a name="the-transaction-log-sql-server"></a><span data-ttu-id="4d11d-102">El registro de transacciones (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4d11d-102">The Transaction Log (SQL Server)</span></span>
  <span data-ttu-id="4d11d-103">Todas las bases de datos de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] tienen un registro de transacciones que registra todas las transacciones y las modificaciones que cada transacción realiza en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="4d11d-103">Every [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database has a transaction log that records all transactions and the database modifications made by each transaction.</span></span> <span data-ttu-id="4d11d-104">El registro de transacciones se debe truncar periódicamente para evitar que se llene.</span><span class="sxs-lookup"><span data-stu-id="4d11d-104">The transaction log must be truncated on a regular basis to keep it from filling up.</span></span> <span data-ttu-id="4d11d-105">Sin embargo, algunos factores pueden retrasar el truncamiento del registro, por lo que es importante supervisar el tamaño del registro.</span><span class="sxs-lookup"><span data-stu-id="4d11d-105">However, some factors can delay log truncation, so monitoring log size is important.</span></span> <span data-ttu-id="4d11d-106">Algunas operaciones se pueden registrar mínimamente para reducir su impacto sobre el tamaño del registro de transacciones.</span><span class="sxs-lookup"><span data-stu-id="4d11d-106">Some operations can be minimally logged to reduce their impact on transaction log size.</span></span>  
  
 <span data-ttu-id="4d11d-107">El registro de transacciones es un componente esencial de la base de datos y, si se produce un error del sistema, podría ser necesario para volver a poner la base de datos en un estado coherente.</span><span class="sxs-lookup"><span data-stu-id="4d11d-107">The transaction log is a critical component of the database and, if there is a system failure, the transaction log might be required to bring your database back to a consistent state.</span></span> <span data-ttu-id="4d11d-108">El registro de transacciones nunca se debe eliminar o mover, a menos que se conozcan totalmente las implicaciones de esas acciones.</span><span class="sxs-lookup"><span data-stu-id="4d11d-108">The transaction log should never be deleted or moved unless you fully understand the ramifications of doing this.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4d11d-109">Los puntos de comprobación crean puntos buenos conocidos a partir de los cuales se empiezan a aplicar los registros de transacciones durante la recuperación de base de datos.</span><span class="sxs-lookup"><span data-stu-id="4d11d-109">Known good points from which to begin applying transaction logs during database recovery are created by checkpoints.</span></span> <span data-ttu-id="4d11d-110">Para obtener más información, vea [Puntos de comprobación de base de datos &#40;SQL Server&#41;](database-checkpoints-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4d11d-110">For more information, see [Database Checkpoints &#40;SQL Server&#41;](database-checkpoints-sql-server.md).</span></span>  
  
 <span data-ttu-id="4d11d-111">**En este tema:**</span><span class="sxs-lookup"><span data-stu-id="4d11d-111">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="4d11d-112">Ventajas: operaciones compatibles con el registro de transacciones</span><span class="sxs-lookup"><span data-stu-id="4d11d-112">Benefits: Operations Supported by the Transaction Log</span></span>](#Benefits)  
  
-   [<span data-ttu-id="4d11d-113">Truncamiento del registro de transacciones</span><span class="sxs-lookup"><span data-stu-id="4d11d-113">Transaction Log Truncation</span></span>](#Truncation)  
  
-   [<span data-ttu-id="4d11d-114">Factores que pueden retrasar el truncamiento del registro</span><span class="sxs-lookup"><span data-stu-id="4d11d-114">Factors That Can Delay Log Truncation</span></span>](#FactorsThatDelayTruncation)  
  
-   [<span data-ttu-id="4d11d-115">Operaciones que se pueden registrar mínimamente</span><span class="sxs-lookup"><span data-stu-id="4d11d-115">Operations That Can Be Minimally Logged</span></span>](#MinimallyLogged)  
  
-   [<span data-ttu-id="4d11d-116">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="4d11d-116">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="benefits-operations-supported-by-the-transaction-log"></a><a name="Benefits"></a><span data-ttu-id="4d11d-117">Ventajas: operaciones admitidas por el registro de transacciones</span><span class="sxs-lookup"><span data-stu-id="4d11d-117">Benefits: Operations Supported by the Transaction Log</span></span>  
 <span data-ttu-id="4d11d-118">El registro de transacciones permite las siguientes operaciones:</span><span class="sxs-lookup"><span data-stu-id="4d11d-118">The transaction log supports the following operations:</span></span>  
  
-   <span data-ttu-id="4d11d-119">Recuperación de transacciones individuales.</span><span class="sxs-lookup"><span data-stu-id="4d11d-119">Recovery of individual transactions.</span></span>  
  
-   <span data-ttu-id="4d11d-120">Recuperación de todas las transacciones incompletas cuando se inicia [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="4d11d-120">Recovery of all incomplete transactions when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is started.</span></span>  
  
-   <span data-ttu-id="4d11d-121">Puesta al día de una base de datos, un archivo, un grupo de archivos o una página restaurados hasta el momento exacto del error.</span><span class="sxs-lookup"><span data-stu-id="4d11d-121">Rolling a restored database, file, filegroup, or page forward to the point of failure.</span></span>  
  
-   <span data-ttu-id="4d11d-122">Permitir replicación transaccional.</span><span class="sxs-lookup"><span data-stu-id="4d11d-122">Supporting transactional replication.</span></span>  
  
-   <span data-ttu-id="4d11d-123">Compatibilidad con soluciones de alta disponibilidad y recuperación ante desastres: [!INCLUDE[ssHADR](../../includes/sshadr-md.md)], creación de reflejo de la base de datos y trasvase de registros.</span><span class="sxs-lookup"><span data-stu-id="4d11d-123">Supporting high availability and disaster recovery solutions: [!INCLUDE[ssHADR](../../includes/sshadr-md.md)], database mirroring, and log shipping.</span></span>  
  
##  <a name="transaction-log-truncation"></a><a name="Truncation"></a> <span data-ttu-id="4d11d-124">Truncamiento del registro de transacciones</span><span class="sxs-lookup"><span data-stu-id="4d11d-124">Transaction Log Truncation</span></span>  
 <span data-ttu-id="4d11d-125">El truncamiento del registro libera el espacio en el archivo de registro para que lo pueda reutilizar el registro de transacciones.</span><span class="sxs-lookup"><span data-stu-id="4d11d-125">Log truncation frees space in the log file for reuse by the transaction log.</span></span> <span data-ttu-id="4d11d-126">El truncamiento del registro es esencial para evitar que se llene.</span><span class="sxs-lookup"><span data-stu-id="4d11d-126">Log truncation is essential to keep the log from filling.</span></span> <span data-ttu-id="4d11d-127">El truncamiento del registro elimina los archivos de registro virtuales inactivos del registro de transacciones lógico de una base de datos [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , liberando espacio en el registro lógico para que lo reutilice el registro de transacciones físico.</span><span class="sxs-lookup"><span data-stu-id="4d11d-127">Log truncation deletes inactive virtual log files from the logical transaction log of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database, freeing space in the logical log for reuse by the Physical transaction log.</span></span> <span data-ttu-id="4d11d-128">Si no se truncara nunca un registro de transacciones, acabaría ocupando todo el espacio de disco asignado a sus archivo de registro físicos.</span><span class="sxs-lookup"><span data-stu-id="4d11d-128">If a transaction log were never truncated, it would eventually fill all the disk space that is allocated to its physical log files.</span></span>  
  
 <span data-ttu-id="4d11d-129">Para evitar este problema, a menos que el truncamiento del registro se retrase por algún motivo, el truncamiento se produciría automáticamente después de los siguientes eventos:</span><span class="sxs-lookup"><span data-stu-id="4d11d-129">To avoid this problem, unless log truncation is being delayed for some reason, truncation occurs automatically after the following events:</span></span>  
  
-   <span data-ttu-id="4d11d-130">En el modelo de recuperación simple, después de un punto de comprobación.</span><span class="sxs-lookup"><span data-stu-id="4d11d-130">Under the simple recovery model, after a checkpoint.</span></span>  
  
-   <span data-ttu-id="4d11d-131">En el modelo de recuperación completa o de recuperación optimizado para cargas masivas de registros, si se ha producido un punto de comprobación desde la copia de seguridad anterior, el truncamiento se produce después de una copia de seguridad de registros (a menos que sea una copia de seguridad de registros de solo copia).</span><span class="sxs-lookup"><span data-stu-id="4d11d-131">Under the full recovery model or bulk-logged recovery model, if a checkpoint has occurred since the previous backup, truncation occurs after a log backup (unless it is a copy-only log backup).</span></span>  
  
 <span data-ttu-id="4d11d-132">Para obtener más información, vea [factores que pueden retrasar el truncamiento del registro](#FactorsThatDelayTruncation), más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="4d11d-132">For more information, see [Factors That Can Delay Log Truncation](#FactorsThatDelayTruncation), later in this topic.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4d11d-133">El truncamiento del registro no reduce el tamaño del archivo de registro físico.</span><span class="sxs-lookup"><span data-stu-id="4d11d-133">Log truncation does not reduce the size of the physical log file.</span></span> <span data-ttu-id="4d11d-134">Para reducir el tamaño físico de un archivo de registro físico, se debe reducir el archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="4d11d-134">To reduce the physical size of a physical log file, you need to shrink the log file.</span></span> <span data-ttu-id="4d11d-135">Para obtener información sobre cómo reducir el tamaño de un archivo de registro físico, vea [Manage the Size of the Transaction Log File](manage-the-size-of-the-transaction-log-file.md).</span><span class="sxs-lookup"><span data-stu-id="4d11d-135">For information about shrinking the size of the physical log file, see [Manage the Size of the Transaction Log File](manage-the-size-of-the-transaction-log-file.md).</span></span>  
  
##  <a name="factors-that-can-delay-log-truncation"></a><a name="FactorsThatDelayTruncation"></a><span data-ttu-id="4d11d-136">Factores que pueden retrasar el truncamiento del registro</span><span class="sxs-lookup"><span data-stu-id="4d11d-136">Factors That Can Delay Log Truncation</span></span>  
 <span data-ttu-id="4d11d-137">Cuando las entradas de registro permanecen activas durante una transacción de larga duración, se retrasa el truncamiento del registro y es posible que se llene el registro de transacciones.</span><span class="sxs-lookup"><span data-stu-id="4d11d-137">When log records remain active for a long time transaction log truncation is delayed, and potentially the transaction log can fill up.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="4d11d-138">Para obtener más información sobre cómo actuar ante un registro de transacciones lleno, vea [Troubleshoot a Full Transaction Log &#40;SQL Server Error 9002&#41;](troubleshoot-a-full-transaction-log-sql-server-error-9002.md).</span><span class="sxs-lookup"><span data-stu-id="4d11d-138">For information about how to respond to a full transaction log, see [Troubleshoot a Full Transaction Log &#40;SQL Server Error 9002&#41;](troubleshoot-a-full-transaction-log-sql-server-error-9002.md).</span></span>  
  
 <span data-ttu-id="4d11d-139">El truncamiento del registro se puede retrasar por diferentes factores.</span><span class="sxs-lookup"><span data-stu-id="4d11d-139">Log truncation can be delayed by a variety of factors.</span></span> <span data-ttu-id="4d11d-140">Para averiguar qué es lo que impide el truncamiento del registro, si hay alguna causa, consulte las columnas **log_reuse_wait** y **log_reuse_wait_desc** de la vista de catálogo [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="4d11d-140">You can discover what, if anything, is preventing log truncation by querying the **log_reuse_wait** and **log_reuse_wait_desc** columns of the [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) catalog view.</span></span> <span data-ttu-id="4d11d-141">En la tabla siguiente se describen los valores de estas columnas.</span><span class="sxs-lookup"><span data-stu-id="4d11d-141">The following table describes the values of these columns.</span></span>  
  
|<span data-ttu-id="4d11d-142">valor log_reuse_wait</span><span class="sxs-lookup"><span data-stu-id="4d11d-142">log_reuse_wait value</span></span>|<span data-ttu-id="4d11d-143">valor log_reuse_wait_desc</span><span class="sxs-lookup"><span data-stu-id="4d11d-143">log_reuse_wait_desc value</span></span>|<span data-ttu-id="4d11d-144">Descripción</span><span class="sxs-lookup"><span data-stu-id="4d11d-144">Description</span></span>|  
|----------------------------|----------------------------------|-----------------|  
|<span data-ttu-id="4d11d-145">0</span><span class="sxs-lookup"><span data-stu-id="4d11d-145">0</span></span>|<span data-ttu-id="4d11d-146">NOTHING</span><span class="sxs-lookup"><span data-stu-id="4d11d-146">NOTHING</span></span>|<span data-ttu-id="4d11d-147">Hay actualmente uno o más archivos de registro virtual reutilizables.</span><span class="sxs-lookup"><span data-stu-id="4d11d-147">Currently there are one or more reusable virtual log files.</span></span>|  
|<span data-ttu-id="4d11d-148">1</span><span class="sxs-lookup"><span data-stu-id="4d11d-148">1</span></span>|<span data-ttu-id="4d11d-149">CHECKPOINT</span><span class="sxs-lookup"><span data-stu-id="4d11d-149">CHECKPOINT</span></span>|<span data-ttu-id="4d11d-150">No se ha producido ningún punto de comprobación desde el último truncamiento o el encabezado del registro no se ha movido más allá de un archivo de registro virtual.</span><span class="sxs-lookup"><span data-stu-id="4d11d-150">No checkpoint has occurred since the last log truncation, or the head of the log has not yet moved beyond a virtual log file.</span></span> <span data-ttu-id="4d11d-151">(Todos los modelos de recuperación)</span><span class="sxs-lookup"><span data-stu-id="4d11d-151">(All recovery models)</span></span><br /><br /> <span data-ttu-id="4d11d-152">Este es un motivo habitual para retrasar el truncamiento.</span><span class="sxs-lookup"><span data-stu-id="4d11d-152">This is a routine reason for delaying log truncation.</span></span> <span data-ttu-id="4d11d-153">Para obtener más información, vea [Puntos de comprobación de base de datos &#40;SQL Server&#41;](database-checkpoints-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4d11d-153">For more information, see [Database Checkpoints &#40;SQL Server&#41;](database-checkpoints-sql-server.md).</span></span>|  
|<span data-ttu-id="4d11d-154">2</span><span class="sxs-lookup"><span data-stu-id="4d11d-154">2</span></span>|<span data-ttu-id="4d11d-155">LOG_BACKUP</span><span class="sxs-lookup"><span data-stu-id="4d11d-155">LOG_BACKUP</span></span>|<span data-ttu-id="4d11d-156">Se requiere una copia de seguridad del registro para que se pueda truncar el registro de transacciones.</span><span class="sxs-lookup"><span data-stu-id="4d11d-156">A log backup is required before the transaction log can be truncated.</span></span> <span data-ttu-id="4d11d-157">(Solo modelos de recuperación completa u optimizada para cargas masivas de registros)</span><span class="sxs-lookup"><span data-stu-id="4d11d-157">(Full or bulk-logged recovery models only)</span></span><br /><br /> <span data-ttu-id="4d11d-158">Cuando se completa la siguiente copia de seguridad de registros, es posible que se pueda reutilizar parte del espacio de registro.</span><span class="sxs-lookup"><span data-stu-id="4d11d-158">When the next log backup is completed, some log space might become reusable.</span></span>|  
|<span data-ttu-id="4d11d-159">3</span><span class="sxs-lookup"><span data-stu-id="4d11d-159">3</span></span>|<span data-ttu-id="4d11d-160">ACTIVE_BACKUP_OR_RESTORE</span><span class="sxs-lookup"><span data-stu-id="4d11d-160">ACTIVE_BACKUP_OR_RESTORE</span></span>|<span data-ttu-id="4d11d-161">Existe una recuperación o copia de seguridad de datos en curso (todos los modelos de recuperación).</span><span class="sxs-lookup"><span data-stu-id="4d11d-161">A data backup or a restore is in progress (all recovery models).</span></span><br /><br /> <span data-ttu-id="4d11d-162">Si la copia de seguridad de una base de datos impide el truncamiento del registro, la cancelación de la operación de copia de seguridad podría ayudar a solucionar el problema inmediato.</span><span class="sxs-lookup"><span data-stu-id="4d11d-162">If a data backup is preventing log truncation, canceling the backup operation might help the immediate problem.</span></span>|  
|<span data-ttu-id="4d11d-163">4</span><span class="sxs-lookup"><span data-stu-id="4d11d-163">4</span></span>|<span data-ttu-id="4d11d-164">ACTIVE_TRANSACTION</span><span class="sxs-lookup"><span data-stu-id="4d11d-164">ACTIVE_TRANSACTION</span></span>|<span data-ttu-id="4d11d-165">Existe una transacción activa (todos los modelos de recuperación).</span><span class="sxs-lookup"><span data-stu-id="4d11d-165">A transaction is active (all recovery models).</span></span><br /><br /> <span data-ttu-id="4d11d-166">Podría existir una transacción de larga duración en el inicio de la copia de seguridad del registro.</span><span class="sxs-lookup"><span data-stu-id="4d11d-166">A long-running transaction might exist at the start of the log backup.</span></span> <span data-ttu-id="4d11d-167">En este caso, para liberar espacio se podría requerir otra copia de seguridad del registro.</span><span class="sxs-lookup"><span data-stu-id="4d11d-167">In this case, freeing the space might require another log backup.</span></span> <span data-ttu-id="4d11d-168">Tenga en cuenta que las transacciones de ejecución prolongada impiden el truncamiento del registro en todos los modelos de recuperación, incluido el modelo de recuperación simple, en el que el registro de transacciones se suele truncar en cada punto de comprobación automático.</span><span class="sxs-lookup"><span data-stu-id="4d11d-168">Note that a long-running transactions prevent log truncation under all recovery models, including the simple recovery model, under which the transaction log is generally truncated on each automatic checkpoint.</span></span><br /><br /> <span data-ttu-id="4d11d-169">Una transacción está diferida.</span><span class="sxs-lookup"><span data-stu-id="4d11d-169">A transaction is deferred.</span></span> <span data-ttu-id="4d11d-170">Una *transacción diferida* es efectivamente una transacción activa cuya reversión se bloquea debido a algún recurso no disponible.</span><span class="sxs-lookup"><span data-stu-id="4d11d-170">A *deferred transaction* is effectively an active transaction whose rollback is blocked because of some unavailable resource.</span></span> <span data-ttu-id="4d11d-171">Para obtener más información sobre las causas de las transacciones diferidas y cómo sacarlas del estado diferido, vea [Transacciones diferidas &#40;SQL Server&#41;](../backup-restore/deferred-transactions-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4d11d-171">For information about the causes of deferred transactions and how to move them out of the deferred state, see [Deferred Transactions &#40;SQL Server&#41;](../backup-restore/deferred-transactions-sql-server.md).</span></span> <br /><br /><span data-ttu-id="4d11d-172">Las transacciones de larga ejecución también podrían llenar el registro de transacciones de tempdb.</span><span class="sxs-lookup"><span data-stu-id="4d11d-172">Long-running transactions might also fill up tempdb's transaction log.</span></span> <span data-ttu-id="4d11d-173">Las transacciones de usuario usan implícitamente tempdb para objetos internos como tablas de trabajo para ordenar, archivos de trabajo para crear valores hash, tablas de trabajo de cursor y versiones de fila.</span><span class="sxs-lookup"><span data-stu-id="4d11d-173">Tempdb is used implicitly by user transactions for internal objects such as work tables for sorting, work files for hashing, cursor work tables, and row versioning.</span></span> <span data-ttu-id="4d11d-174">Incluso si la transacción de usuario solo incluye leer datos (consultas SELECT), los objetos internos se pueden crear y usar en transacciones de usuario.</span><span class="sxs-lookup"><span data-stu-id="4d11d-174">Even if the user transaction includes only reading data (SELECT queries), internal objects may be created and used under user transactions.</span></span> <span data-ttu-id="4d11d-175">Después, se puede rellenar el registro de transacciones de tempdb.</span><span class="sxs-lookup"><span data-stu-id="4d11d-175">Then the tempdb transaction log can be filled.</span></span>|  
|<span data-ttu-id="4d11d-176">5</span><span class="sxs-lookup"><span data-stu-id="4d11d-176">5</span></span>|<span data-ttu-id="4d11d-177">DATABASE_MIRRORING</span><span class="sxs-lookup"><span data-stu-id="4d11d-177">DATABASE_MIRRORING</span></span>|<span data-ttu-id="4d11d-178">Se realiza una pausa en la creación de reflejo de la base de datos o, en el modo de alto rendimiento, la base de datos reflejada está notablemente detrás de la base de datos principal.</span><span class="sxs-lookup"><span data-stu-id="4d11d-178">Database mirroring is paused, or under high-performance mode, the mirror database is significantly behind the principal database.</span></span> <span data-ttu-id="4d11d-179">(Solo para el modelo de recuperación completa)</span><span class="sxs-lookup"><span data-stu-id="4d11d-179">(Full recovery model only)</span></span><br /><br /> <span data-ttu-id="4d11d-180">Para obtener más información, vea [Creación de reflejo de la base de datos &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4d11d-180">For more information, see [Database Mirroring &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span></span>|  
|<span data-ttu-id="4d11d-181">6</span><span class="sxs-lookup"><span data-stu-id="4d11d-181">6</span></span>|<span data-ttu-id="4d11d-182">REPLICACIÓN</span><span class="sxs-lookup"><span data-stu-id="4d11d-182">REPLICATION</span></span>|<span data-ttu-id="4d11d-183">Durante las replicaciones transaccionales, las transacciones pertinentes para las publicaciones no se han entregado aún a la base de datos de distribución.</span><span class="sxs-lookup"><span data-stu-id="4d11d-183">During transactional replications, transactions relevant to the publications are still undelivered to the distribution database.</span></span> <span data-ttu-id="4d11d-184">(Solo para el modelo de recuperación completa)</span><span class="sxs-lookup"><span data-stu-id="4d11d-184">(Full recovery model only)</span></span><br /><br /> <span data-ttu-id="4d11d-185">Para obtener información acerca de la replicación transaccional, vea [SQL Server Replication](../../relational-databases/replication/sql-server-replication.md).</span><span class="sxs-lookup"><span data-stu-id="4d11d-185">For information about transactional replication, see [SQL Server Replication](../../relational-databases/replication/sql-server-replication.md).</span></span>|  
|<span data-ttu-id="4d11d-186">7</span><span class="sxs-lookup"><span data-stu-id="4d11d-186">7</span></span>|<span data-ttu-id="4d11d-187">DATABASE_SNAPSHOT_CREATION</span><span class="sxs-lookup"><span data-stu-id="4d11d-187">DATABASE_SNAPSHOT_CREATION</span></span>|<span data-ttu-id="4d11d-188">Se está creando una instantánea de base de datos.</span><span class="sxs-lookup"><span data-stu-id="4d11d-188">A database snapshot is being created.</span></span> <span data-ttu-id="4d11d-189">(Todos los modelos de recuperación)</span><span class="sxs-lookup"><span data-stu-id="4d11d-189">(All recovery models)</span></span><br /><br /> <span data-ttu-id="4d11d-190">Este es un motivo habitual, por lo general breve, para retrasar el truncamiento del registro.</span><span class="sxs-lookup"><span data-stu-id="4d11d-190">This is a routine, and typically brief, cause of delayed log truncation.</span></span>|  
|<span data-ttu-id="4d11d-191">8</span><span class="sxs-lookup"><span data-stu-id="4d11d-191">8</span></span>|<span data-ttu-id="4d11d-192">LOG_SCAN</span><span class="sxs-lookup"><span data-stu-id="4d11d-192">LOG_SCAN</span></span>|<span data-ttu-id="4d11d-193">Se está realizando un examen de registro.</span><span class="sxs-lookup"><span data-stu-id="4d11d-193">A log scan is occurring.</span></span> <span data-ttu-id="4d11d-194">(Todos los modelos de recuperación)</span><span class="sxs-lookup"><span data-stu-id="4d11d-194">(All recovery models)</span></span><br /><br /> <span data-ttu-id="4d11d-195">Este es un motivo habitual, por lo general breve, para retrasar el truncamiento del registro.</span><span class="sxs-lookup"><span data-stu-id="4d11d-195">This is a routine, and typically brief, cause of delayed log truncation.</span></span>|  
|<span data-ttu-id="4d11d-196">9</span><span class="sxs-lookup"><span data-stu-id="4d11d-196">9</span></span>|<span data-ttu-id="4d11d-197">AVAILABILITY_REPLICA</span><span class="sxs-lookup"><span data-stu-id="4d11d-197">AVAILABILITY_REPLICA</span></span>|<span data-ttu-id="4d11d-198">Una réplica secundaria de un grupo de disponibilidad está aplicando entradas del registro de transacciones de esta base de datos a una base de datos secundaria correspondiente.</span><span class="sxs-lookup"><span data-stu-id="4d11d-198">A secondary replica of an availability group is applying transaction log records of this database to a corresponding secondary database.</span></span> <span data-ttu-id="4d11d-199">(Modelo de recuperación completa)</span><span class="sxs-lookup"><span data-stu-id="4d11d-199">(Full recovery model)</span></span><br /><br /> <span data-ttu-id="4d11d-200">Para obtener más información, vea [información general de Grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4d11d-200">For more information, see [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md).</span></span>|  
|<span data-ttu-id="4d11d-201">10</span><span class="sxs-lookup"><span data-stu-id="4d11d-201">10</span></span>|-|<span data-ttu-id="4d11d-202">Exclusivamente para uso interno.</span><span class="sxs-lookup"><span data-stu-id="4d11d-202">For internal use only</span></span>|  
|<span data-ttu-id="4d11d-203">11</span><span class="sxs-lookup"><span data-stu-id="4d11d-203">11</span></span>|-|<span data-ttu-id="4d11d-204">Exclusivamente para uso interno.</span><span class="sxs-lookup"><span data-stu-id="4d11d-204">For internal use only</span></span>|  
|<span data-ttu-id="4d11d-205">12</span><span class="sxs-lookup"><span data-stu-id="4d11d-205">12</span></span>|-|<span data-ttu-id="4d11d-206">Exclusivamente para uso interno.</span><span class="sxs-lookup"><span data-stu-id="4d11d-206">For internal use only</span></span>|  
|<span data-ttu-id="4d11d-207">13</span><span class="sxs-lookup"><span data-stu-id="4d11d-207">13</span></span>|<span data-ttu-id="4d11d-208">OLDEST_PAGE</span><span class="sxs-lookup"><span data-stu-id="4d11d-208">OLDEST_PAGE</span></span>|<span data-ttu-id="4d11d-209">Si una base de datos está configurada para usar puntos de comprobación indirectos, la página más antigua de la base de datos podría ser anterior al LSN del punto de comprobación.</span><span class="sxs-lookup"><span data-stu-id="4d11d-209">If a database is configured to use indirect checkpoints, the oldest page on the database might be older than the checkpoint LSN.</span></span> <span data-ttu-id="4d11d-210">En este caso, la página más antigua puede retrasar el truncamiento del registro.</span><span class="sxs-lookup"><span data-stu-id="4d11d-210">In this case, the oldest page can delay log truncation.</span></span> <span data-ttu-id="4d11d-211">(Todos los modelos de recuperación)</span><span class="sxs-lookup"><span data-stu-id="4d11d-211">(All recovery models)</span></span><br /><br /> <span data-ttu-id="4d11d-212">Para obtener más información sobre los puntos de comprobación indirectos, vea [Database Checkpoints &#40;SQL Server&#41;](database-checkpoints-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4d11d-212">For information about indirect checkpoints, see [Database Checkpoints &#40;SQL Server&#41;](database-checkpoints-sql-server.md).</span></span>|  
|<span data-ttu-id="4d11d-213">14</span><span class="sxs-lookup"><span data-stu-id="4d11d-213">14</span></span>|<span data-ttu-id="4d11d-214">OTHER_TRANSIENT</span><span class="sxs-lookup"><span data-stu-id="4d11d-214">OTHER_TRANSIENT</span></span>|<span data-ttu-id="4d11d-215">No se utiliza este valor actualmente.</span><span class="sxs-lookup"><span data-stu-id="4d11d-215">This value is currently not used.</span></span>|  
|<span data-ttu-id="4d11d-216">16</span><span class="sxs-lookup"><span data-stu-id="4d11d-216">16</span></span>|<span data-ttu-id="4d11d-217">XTP_CHECKPOINT</span><span class="sxs-lookup"><span data-stu-id="4d11d-217">XTP_CHECKPOINT</span></span>|<span data-ttu-id="4d11d-218">Cuando una base de datos tiene un grupo de archivos optimizados para memoria, el registro de transacciones no se puede truncar hasta que el punto de comprobación [!INCLUDE[hek_2](../../includes/hek-2-md.md)] automático se desencadena (lo que sucede cada 512 MB de crecimiento de los registros).</span><span class="sxs-lookup"><span data-stu-id="4d11d-218">When a database has a memory-optimized filegroup, the transaction log may not truncate until automatic [!INCLUDE[hek_2](../../includes/hek-2-md.md)] checkpoint is triggered (which happens at every 512 MB of log growth).</span></span><br /><br /> <span data-ttu-id="4d11d-219">Nota: para truncar el registro de transacciones antes del tamaño de 512 MB, active el comando Checkpoint manualmente en la base de datos en cuestión.</span><span class="sxs-lookup"><span data-stu-id="4d11d-219">Note: To truncate transaction log before 512 MB size, fire the Checkpoint command manually against the database in question.</span></span>|  
  
##  <a name="operations-that-can-be-minimally-logged"></a><a name="MinimallyLogged"></a><span data-ttu-id="4d11d-220">Operaciones que se pueden registrar mínimamente</span><span class="sxs-lookup"><span data-stu-id="4d11d-220">Operations That Can Be Minimally Logged</span></span>  
 <span data-ttu-id="4d11d-221">El*registro mínimo* implica registrar únicamente la cantidad de información necesaria para recuperar la transacción sin permitir la recuperación a un momento dado.</span><span class="sxs-lookup"><span data-stu-id="4d11d-221">*Minimal logging* involves logging only the information that is required to recover the transaction without supporting point-in-time recovery.</span></span> <span data-ttu-id="4d11d-222">En este tema se identifican las operaciones que se registran mínimamente en el modelo de recuperación optimizado para cargas masivas de registros (y en el modelo de recuperación simple, excepto cuando se está ejecutando una copia de seguridad).</span><span class="sxs-lookup"><span data-stu-id="4d11d-222">This topic identifies the operations that are minimally logged under the bulk-logged recovery model (as well as under the simple recovery model, except when a backup is running).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4d11d-223">Las tablas optimizadas para memoria no admiten el registro mínimo.</span><span class="sxs-lookup"><span data-stu-id="4d11d-223">Minimal logging is not supported for memory-optimized tables.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4d11d-224">Con el modelo de recuperación completa, todas las operaciones masivas se registran completamente.</span><span class="sxs-lookup"><span data-stu-id="4d11d-224">Under the full recovery model, all bulk operations are fully logged.</span></span> <span data-ttu-id="4d11d-225">Sin embargo, puede usar el registro mínimo en un conjunto de operaciones masivas cambiando la base de datos temporalmente al modelo de recuperación optimizado para cargas masivas de registros para este tipo de operaciones.</span><span class="sxs-lookup"><span data-stu-id="4d11d-225">However, you can minimize logging for a set of bulk operations by switching the database to the bulk-logged recovery model temporarily for bulk operations.</span></span> <span data-ttu-id="4d11d-226">El registro mínimo resulta más eficaz que el registro completo y reduce la posibilidad de que una operación masiva a gran escala termine por ocupar todo el espacio del registro de transacciones durante una transacción masiva.</span><span class="sxs-lookup"><span data-stu-id="4d11d-226">Minimal logging is more efficient than full logging, and it reduces the possibility of a large-scale bulk operation filling the available transaction log space during a bulk transaction.</span></span> <span data-ttu-id="4d11d-227">Sin embargo, si la base de datos se daña o se pierde cuando el registro mínimo está activo, no se podrá recuperar la base de datos hasta el momento del error.</span><span class="sxs-lookup"><span data-stu-id="4d11d-227">However, if the database is damaged or lost when minimal logging is in effect, you cannot recover the database to the point of failure.</span></span>  
  
 <span data-ttu-id="4d11d-228">Las operaciones siguientes, que se registran completamente en el modelo de recuperación completa, se registran mínimamente en el modelo de recuperación simple y en el optimizado para cargas masivas de registros:</span><span class="sxs-lookup"><span data-stu-id="4d11d-228">The following operations, which are fully logged under the full recovery model, are minimally logged under the simple and bulk-logged recovery model:</span></span>  
  
-   <span data-ttu-id="4d11d-229">Operaciones de importación en bloque ([bcp](../../tools/bcp-utility.md), [BULK INSERT](/sql/t-sql/statements/bulk-insert-transact-sql) e [INSERT... SELECT](/sql/t-sql/statements/insert-transact-sql)).</span><span class="sxs-lookup"><span data-stu-id="4d11d-229">Bulk import operations ([bcp](../../tools/bcp-utility.md), [BULK INSERT](/sql/t-sql/statements/bulk-insert-transact-sql), and [INSERT... SELECT](/sql/t-sql/statements/insert-transact-sql)).</span></span> <span data-ttu-id="4d11d-230">Para obtener más información sobre cuándo se registra mínimamente una importación masiva en una tabla, vea [Prerequisites for Minimal Logging in Bulk Import](../import-export/prerequisites-for-minimal-logging-in-bulk-import.md).</span><span class="sxs-lookup"><span data-stu-id="4d11d-230">For more information about when bulk import into a table is minimally logged, see [Prerequisites for Minimal Logging in Bulk Import](../import-export/prerequisites-for-minimal-logging-in-bulk-import.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="4d11d-231">Cuando la replicación transaccional está habilitada, las operaciones BULK INSERT se registran por completo en el modelo de recuperación optimizado para cargas masivas de registros.</span><span class="sxs-lookup"><span data-stu-id="4d11d-231">When transactional replication is enabled, BULK INSERT operations are fully logged even under the Bulk Logged recovery model.</span></span>  
  
-   <span data-ttu-id="4d11d-232">Operaciones SELECT [into](/sql/t-sql/queries/select-into-clause-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="4d11d-232">SELECT [INTO](/sql/t-sql/queries/select-into-clause-transact-sql) operations.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="4d11d-233">Cuando la replicación transaccional está habilitada, las operaciones SELECT INTO se registran por completo en el modelo de recuperación optimizado para cargas masivas de registros.</span><span class="sxs-lookup"><span data-stu-id="4d11d-233">When transactional replication is enabled, SELECT INTO operations are fully logged even under the Bulk Logged recovery model.</span></span>  
  
-   <span data-ttu-id="4d11d-234">Actualizaciones parciales de tipos de datos de valores grandes que usan la cláusula .WRITE de la instrucción [UPDATE](/sql/t-sql/queries/update-transact-sql) al insertar o anexar datos nuevos.</span><span class="sxs-lookup"><span data-stu-id="4d11d-234">Partial updates to large value data types, using the .WRITE clause in the [UPDATE](/sql/t-sql/queries/update-transact-sql) statement when inserting or appending new data.</span></span> <span data-ttu-id="4d11d-235">Tenga en cuenta que el registro mínimo no se utiliza cuando se actualizan valores existentes.</span><span class="sxs-lookup"><span data-stu-id="4d11d-235">Note that minimal logging is not used when existing values are updated.</span></span> <span data-ttu-id="4d11d-236">Para obtener más información sobre los tipos de datos de valores grandes, vea [Tipos de datos &#40;Transact-SQL&#41;](/sql/t-sql/data-types/data-types-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="4d11d-236">For more information about large value data types, see [Data Types &#40;Transact-SQL&#41;](/sql/t-sql/data-types/data-types-transact-sql).</span></span>  
  
-   <span data-ttu-id="4d11d-237">Instrucciones [WRITETEXT](/sql/t-sql/queries/writetext-transact-sql) y [UPDATETEXT](/sql/t-sql/queries/updatetext-transact-sql) al insertar o anexar nuevos datos en las columnas de `text` tipo de datos, `ntext` y `image` .</span><span class="sxs-lookup"><span data-stu-id="4d11d-237">[WRITETEXT](/sql/t-sql/queries/writetext-transact-sql) and [UPDATETEXT](/sql/t-sql/queries/updatetext-transact-sql) statements when inserting or appending new data into the `text`, `ntext`, and `image` data type columns.</span></span> <span data-ttu-id="4d11d-238">Tenga en cuenta que el registro mínimo no se utiliza cuando se actualizan valores existentes.</span><span class="sxs-lookup"><span data-stu-id="4d11d-238">Note that minimal logging is not used when existing values are updated.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="4d11d-239">Las instrucciones WRITETEXT y UPDATETEXT han quedado desusadas, por lo que debería evitar utilizarlas en las aplicaciones nuevas.</span><span class="sxs-lookup"><span data-stu-id="4d11d-239">The WRITETEXT and UPDATETEXT statements are deprecated, so you should avoid using them in new applications.</span></span>  
  
-   <span data-ttu-id="4d11d-240">Si la base de datos está establecida en el modelo de recuperación optimizado para cargas masivas de registros o simple, algunas operaciones DDL de índices se registran mínimamente con independencia de si la operación se ejecuta sin conexión o con conexión.</span><span class="sxs-lookup"><span data-stu-id="4d11d-240">If the database is set to the simple or bulk-logged recovery model, some index DDL operations are minimally logged whether the operation is executed offline or online.</span></span> <span data-ttu-id="4d11d-241">Las operaciones de índice con registro mínimo son:</span><span class="sxs-lookup"><span data-stu-id="4d11d-241">The minimally logged index operations are as follows:</span></span>  
  
    -   <span data-ttu-id="4d11d-242">Operaciones[CREATE INDEX](/sql/t-sql/statements/create-index-transact-sql) (incluidas las vistas indexadas).</span><span class="sxs-lookup"><span data-stu-id="4d11d-242">[CREATE INDEX](/sql/t-sql/statements/create-index-transact-sql) operations (including indexed views).</span></span>  
  
    -   <span data-ttu-id="4d11d-243">Operaciones[ALTER INDEX](/sql/t-sql/statements/alter-index-transact-sql) REBUILD o DBCC DBREINDEX.</span><span class="sxs-lookup"><span data-stu-id="4d11d-243">[ALTER INDEX](/sql/t-sql/statements/alter-index-transact-sql) REBUILD or DBCC DBREINDEX operations.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="4d11d-244">La instrucción DBCC DBREINDEX ha quedado desusada, por lo que debería evitar utilizarla en las aplicaciones nuevas.</span><span class="sxs-lookup"><span data-stu-id="4d11d-244">The DBCC DBREINDEX statement is deprecated so you should avoid using it in new applications.</span></span>  
  
    -   <span data-ttu-id="4d11d-245">Regeneración del nuevo montón DROP INDEX (si procede).</span><span class="sxs-lookup"><span data-stu-id="4d11d-245">DROP INDEX new heap rebuild (if applicable).</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="4d11d-246"> La desasignación de páginas de índice durante una operación [DROP INDEX](/sql/t-sql/statements/drop-index-transact-sql) siempre se registra completamente.</span><span class="sxs-lookup"><span data-stu-id="4d11d-246">Index page deallocation during a [DROP INDEX](/sql/t-sql/statements/drop-index-transact-sql) operation is always fully logged.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="4d11d-247">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="4d11d-247">Related Tasks</span></span>  
 `Managing the transaction log`  
  
-   [<span data-ttu-id="4d11d-248">Administrar el tamaño del archivo de registro de transacciones</span><span class="sxs-lookup"><span data-stu-id="4d11d-248">Manage the Size of the Transaction Log File</span></span>](manage-the-size-of-the-transaction-log-file.md)  
  
-   [<span data-ttu-id="4d11d-249">Solucionar problemas de un registro de transacciones lleno &#40;Error 9002 de SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4d11d-249">Troubleshoot a Full Transaction Log &#40;SQL Server Error 9002&#41;</span></span>](troubleshoot-a-full-transaction-log-sql-server-error-9002.md)  
  
 <span data-ttu-id="4d11d-250">**Realizar copia de seguridad de un registro de transacciones (modelo de recuperación completa)**</span><span class="sxs-lookup"><span data-stu-id="4d11d-250">**Backing Up the Transaction Log (Full Recovery Model)**</span></span>  
  
-   [<span data-ttu-id="4d11d-251">Realizar una copia de seguridad de un registro de transacciones &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4d11d-251">Back Up a Transaction Log &#40;SQL Server&#41;</span></span>](../backup-restore/back-up-a-transaction-log-sql-server.md)  
  
 <span data-ttu-id="4d11d-252">**Restaurar el registro de transacciones (modelo de recuperación completa)**</span><span class="sxs-lookup"><span data-stu-id="4d11d-252">**Restoring the Transaction Log (Full Recovery Model)**</span></span>  
  
-  [<span data-ttu-id="4d11d-253">Restaurar una copia de seguridad de registros de transacciones</span><span class="sxs-lookup"><span data-stu-id="4d11d-253">Restore a Transaction Log Backup</span></span>](../backup-restore/restore-a-transaction-log-backup-sql-server.md)   
  
## <a name="see-also"></a><span data-ttu-id="4d11d-254">Consulte también</span><span class="sxs-lookup"><span data-stu-id="4d11d-254">See Also</span></span>  
 <span data-ttu-id="4d11d-255">[Controlar la durabilidad de las transacciones](control-transaction-durability.md) </span><span class="sxs-lookup"><span data-stu-id="4d11d-255">[Control Transaction Durability](control-transaction-durability.md) </span></span>  
 <span data-ttu-id="4d11d-256">[Requisitos previos para el registro mínimo durante la importación masiva](../import-export/prerequisites-for-minimal-logging-in-bulk-import.md) </span><span class="sxs-lookup"><span data-stu-id="4d11d-256">[Prerequisites for Minimal Logging in Bulk Import](../import-export/prerequisites-for-minimal-logging-in-bulk-import.md) </span></span>  
 <span data-ttu-id="4d11d-257">[Realizar copias de seguridad y restaurar bases de datos de SQL Server](../backup-restore/back-up-and-restore-of-sql-server-databases.md) </span><span class="sxs-lookup"><span data-stu-id="4d11d-257">[Back Up and Restore of SQL Server Databases](../backup-restore/back-up-and-restore-of-sql-server-databases.md) </span></span>  
 <span data-ttu-id="4d11d-258">[Puntos de comprobación de base de datos &#40;SQL Server&#41;](database-checkpoints-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="4d11d-258">[Database Checkpoints &#40;SQL Server&#41;](database-checkpoints-sql-server.md) </span></span>  
 <span data-ttu-id="4d11d-259">[Ver o cambiar las propiedades de una base de datos](../databases/view-or-change-the-properties-of-a-database.md) </span><span class="sxs-lookup"><span data-stu-id="4d11d-259">[View or Change the Properties of a Database](../databases/view-or-change-the-properties-of-a-database.md) </span></span>  
 [<span data-ttu-id="4d11d-260">Modelos de recuperación &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4d11d-260">Recovery Models &#40;SQL Server&#41;</span></span>](../backup-restore/recovery-models-sql-server.md)  
  
  
