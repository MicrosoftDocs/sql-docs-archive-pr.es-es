---
title: Restricciones entre claves principales y claves externas | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- foreign keys [SQL Server], cascading referential integrity
- FOREIGN KEY constraints
- foreign keys [SQL Server]
- foreign keys [SQL Server], about foreign key constraints
ms.assetid: 31fbcc9f-2dc5-4bf9-aa50-ed70ec7b5bcd
author: stevestein
ms.author: sstein
ms.openlocfilehash: b6e7b88de880348fabb00cb46d3028716441bc2b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87675756"
---
# <a name="primary-and-foreign-key-constraints"></a><span data-ttu-id="023e4-102">Restricciones entre claves principales y claves externas</span><span class="sxs-lookup"><span data-stu-id="023e4-102">Primary and Foreign Key Constraints</span></span>
  <span data-ttu-id="023e4-103">Las claves principales y las claves externas son dos tipos de restricciones que se pueden usar para aplicar la integridad de datos en las tablas de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="023e4-103">Primary keys and foreign keys are two types of constraints that can be used to enforce data integrity in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] tables.</span></span> <span data-ttu-id="023e4-104">Se trata de objetos de base de datos importantes.</span><span class="sxs-lookup"><span data-stu-id="023e4-104">These are important database objects.</span></span>

 <span data-ttu-id="023e4-105">Este tema contiene las siguientes secciones.</span><span class="sxs-lookup"><span data-stu-id="023e4-105">This topic contains the following sections.</span></span>

 [<span data-ttu-id="023e4-106">Restricciones de clave principal</span><span class="sxs-lookup"><span data-stu-id="023e4-106">Primary Key Constraints</span></span>](../tables/primary-and-foreign-key-constraints.md#PKeys)

 [<span data-ttu-id="023e4-107">Foreign Key Constraints</span><span class="sxs-lookup"><span data-stu-id="023e4-107">Foreign Key Constraints</span></span>](../tables/primary-and-foreign-key-constraints.md#FKeys)

 [<span data-ttu-id="023e4-108">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="023e4-108">Related Tasks</span></span>](../tables/primary-and-foreign-key-constraints.md#Tasks)

##  <a name="primary-key-constraints"></a><a name="PKeys"></a> <span data-ttu-id="023e4-109">Restricciones de clave principal</span><span class="sxs-lookup"><span data-stu-id="023e4-109">Primary Key Constraints</span></span>
 <span data-ttu-id="023e4-110">Una tabla suele tener una columna o una combinación de columnas cuyos valores identifican de forma única cada fila de la tabla.</span><span class="sxs-lookup"><span data-stu-id="023e4-110">A table typically has a column or combination of columns that contain values that uniquely identify each row in the table.</span></span> <span data-ttu-id="023e4-111">Estas columnas se denominan claves principales de la tabla y exigen la integridad de entidad de la tabla.</span><span class="sxs-lookup"><span data-stu-id="023e4-111">This column, or columns, is called the primary key (PK) of the table and enforces the entity integrity of the table.</span></span> <span data-ttu-id="023e4-112">Debido a que las restricciones de clave principal garantizan datos únicos, con frecuencia se definen en una columna de identidad.</span><span class="sxs-lookup"><span data-stu-id="023e4-112">Because primary key constraints guarantee unique data, they are frequently defined on an identity column.</span></span>

 <span data-ttu-id="023e4-113">Cuando especifica una restricción de clave principal en una tabla, [!INCLUDE[ssDE](../../includes/ssde-md.md)] exige la unicidad de los datos mediante la creación automática de un índice único para las columnas de clave principal.</span><span class="sxs-lookup"><span data-stu-id="023e4-113">When you specify a primary key constraint for a table, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] enforces data uniqueness by automatically creating a unique index for the primary key columns.</span></span> <span data-ttu-id="023e4-114">Este índice también permite un acceso rápido a los datos cuando se usa la clave principal en las consultas.</span><span class="sxs-lookup"><span data-stu-id="023e4-114">This index also permits fast access to data when the primary key is used in queries.</span></span> <span data-ttu-id="023e4-115">Si se define una restricción de clave principal para más de una columna, puede haber valores duplicados dentro de la misma columna, pero cada combinación de valores de todas las columnas de la definición de la restricción de clave principal debe ser única.</span><span class="sxs-lookup"><span data-stu-id="023e4-115">If a primary key constraint is defined on more than one column, values may be duplicated within one column, but each combination of values from all the columns in the primary key constraint definition must be unique.</span></span>

 <span data-ttu-id="023e4-116">Como se muestra en la siguiente ilustración, las columnas **ProductID** y **VendorID** de la tabla **Purchasing.ProductVendor** forman una restricción de clave principal compuesta para esta tabla.</span><span class="sxs-lookup"><span data-stu-id="023e4-116">As shown in the following illustration, the **ProductID** and **VendorID** columns in the **Purchasing.ProductVendor** table form a composite primary key constraint for this table.</span></span> <span data-ttu-id="023e4-117">De este modo, se garantiza que todas las filas de la tabla **ProductVendor** tengan una combinación de **ProductID** y **VendorID**.</span><span class="sxs-lookup"><span data-stu-id="023e4-117">This makes sure that every row in the **ProductVendor** table has a unique combination of **ProductID** and **VendorID**.</span></span> <span data-ttu-id="023e4-118">Esto impide la inserción de filas duplicadas.</span><span class="sxs-lookup"><span data-stu-id="023e4-118">This prevents the insertion of duplicate rows.</span></span>

 <span data-ttu-id="023e4-119">![Restricción PRIMARY KEY compuesta](../../database-engine/media/fund04.gif "Restricción PRIMARY KEY compuesta")</span><span class="sxs-lookup"><span data-stu-id="023e4-119">![Composite PRIMARY KEY constraint](../../database-engine/media/fund04.gif "Composite PRIMARY KEY constraint")</span></span>

-   <span data-ttu-id="023e4-120">Una tabla solo puede incluir una restricción de clave principal.</span><span class="sxs-lookup"><span data-stu-id="023e4-120">A table can contain only one primary key constraint.</span></span>

-   <span data-ttu-id="023e4-121">Una clave principal no puede superar las 16 columnas y una longitud de clave total de 900 bytes.</span><span class="sxs-lookup"><span data-stu-id="023e4-121">A primary key cannot exceed 16 columns and a total key length of 900 bytes.</span></span>

-   <span data-ttu-id="023e4-122">El índice generado por una restricción de clave principal no puede hacer que el número de índices de la tabla supere 999 índices no clúster y 1 índice clúster.</span><span class="sxs-lookup"><span data-stu-id="023e4-122">The index generated by a primary key constraint cannot cause the number of indexes on the table to exceed 999 nonclustered indexes and 1 clustered index.</span></span>

-   <span data-ttu-id="023e4-123">Si no se especifica si es en clúster o no en clúster para una restricción de clave principal, se usa la disposición en clúster si no hay índices clúster en la tabla.</span><span class="sxs-lookup"><span data-stu-id="023e4-123">If clustered or nonclustered is not specified for a primary key constraint, clustered is used if there no clustered index on the table.</span></span>

-   <span data-ttu-id="023e4-124">Todas las columnas definidas en una restricción de clave principal se deben definir como no NULL.</span><span class="sxs-lookup"><span data-stu-id="023e4-124">All columns defined within a primary key constraint must be defined as not null.</span></span> <span data-ttu-id="023e4-125">Si no se especifica nulabilidad, la nulabilidad de todas las columnas que participan en una restricción de clave principal se establece en no NULL.</span><span class="sxs-lookup"><span data-stu-id="023e4-125">If nullability is not specified, all columns participating in a primary key constraint have their nullability set to not null.</span></span>

-   <span data-ttu-id="023e4-126">Si la clave principal se define en una columna de tipo definido por el usuario CLR, la implementación del tipo debe admitir el orden binario.</span><span class="sxs-lookup"><span data-stu-id="023e4-126">If a primary key is defined on a CLR user-defined type column, the implementation of the type must support binary ordering.</span></span>

##  <a name="foreign-key-constraints"></a><a name="FKeys"></a> <span data-ttu-id="023e4-127">Foreign Key Constraints</span><span class="sxs-lookup"><span data-stu-id="023e4-127">Foreign Key Constraints</span></span>
 <span data-ttu-id="023e4-128">Una clave externa (FK) es una columna o combinación de columnas que se usa para establecer y aplicar un vínculo entre los datos de dos tablas a fin de controlar los datos que se pueden almacenar una tabla de clave externa.</span><span class="sxs-lookup"><span data-stu-id="023e4-128">A foreign key (FK) is a column or combination of columns that is used to establish and enforce a link between the data in two tables to control the data that can be stored in the foreign key table.</span></span> <span data-ttu-id="023e4-129">En una referencia de clave externa, se crea un vínculo entre dos tablas cuando las columnas de una de ellas hacen referencia a las columnas de la otra que contienen el valor de clave principal.</span><span class="sxs-lookup"><span data-stu-id="023e4-129">In a foreign key reference, a link is created between two tables when the column or columns that hold the primary key value for one table are referenced by the column or columns in another table.</span></span> <span data-ttu-id="023e4-130">Esta columna se convierte en una clave externa para la segunda tabla.</span><span class="sxs-lookup"><span data-stu-id="023e4-130">This column becomes a foreign key in the second table.</span></span>

 <span data-ttu-id="023e4-131">Por ejemplo, la tabla **Sales.SalesOrderHeader** tiene un vínculo de clave externa a la tabla **Sales.SalesPerson** porque existe una relación lógica entre pedidos de ventas y personal de ventas.</span><span class="sxs-lookup"><span data-stu-id="023e4-131">For example, the **Sales.SalesOrderHeader** table has a foreign key link to the **Sales.SalesPerson** table because there is a logical relationship between sales orders and salespeople.</span></span> <span data-ttu-id="023e4-132">La columna **SalesPersonID** de la tabla **SalesOrderHeader** coincide con la columna de clave principal de la tabla **SalesPerson** .</span><span class="sxs-lookup"><span data-stu-id="023e4-132">The **SalesPersonID** column in the **SalesOrderHeader** table matches the primary key column of the **SalesPerson** table.</span></span> <span data-ttu-id="023e4-133">La columna **SalesPersonID** de la tabla **SalesOrderHeader** es la clave externa para la tabla **SalesPerson** .</span><span class="sxs-lookup"><span data-stu-id="023e4-133">The **SalesPersonID** column in the **SalesOrderHeader** table is the foreign key to the **SalesPerson** table.</span></span> <span data-ttu-id="023e4-134">Al crear esta relación de clave externa, no se puede insertar un valor para **SalesPersonID** en la tabla **SalesOrderHeader** si no existe en la tabla **SalesPerson** .</span><span class="sxs-lookup"><span data-stu-id="023e4-134">By creating this foreign key relationship, a value for **SalesPersonID** cannot be inserted into the **SalesOrderHeader** table if it does not already exist in the **SalesPerson** table.</span></span>

### <a name="indexes-on-foreign-key-constraints"></a><span data-ttu-id="023e4-135">Índices de restricciones de clave externa</span><span class="sxs-lookup"><span data-stu-id="023e4-135">Indexes on Foreign Key Constraints</span></span>
 <span data-ttu-id="023e4-136">A diferencia de las restricciones de clave principal, la creación una restricción de clave externa no crea automáticamente el índice correspondiente.</span><span class="sxs-lookup"><span data-stu-id="023e4-136">Unlike primary key constraints, creating a foreign key constraint does not automatically create a corresponding index.</span></span> <span data-ttu-id="023e4-137">No obstante, la creación manual de un índice en una clave externa suele ser útil por los siguientes motivos:</span><span class="sxs-lookup"><span data-stu-id="023e4-137">However, manually creating an index on a foreign key is often useful for the following reasons:</span></span>

-   <span data-ttu-id="023e4-138">Las columnas de clave externa suelen usarse en los criterios de combinación cuando los datos de las tablas relacionadas se combinan en consultas mediante la correspondencia de la columna o columnas de la restricción de clave externa de una tabla y la columna o columnas de la clave única o principal de la otra.</span><span class="sxs-lookup"><span data-stu-id="023e4-138">Foreign key columns are frequently used in join criteria when the data from related tables is combined in queries by matching the column or columns in the foreign key constraint of one table with the primary or unique key column or columns in the other table.</span></span> <span data-ttu-id="023e4-139">Un índice permite al [!INCLUDE[ssDE](../../includes/ssde-md.md)] buscar con rapidez datos relacionados en la tabla de clave externa.</span><span class="sxs-lookup"><span data-stu-id="023e4-139">An index enables the [!INCLUDE[ssDE](../../includes/ssde-md.md)] to quickly find related data in the foreign key table.</span></span> <span data-ttu-id="023e4-140">No obstante, no es necesario crear este índice.</span><span class="sxs-lookup"><span data-stu-id="023e4-140">However, creating this index is not required.</span></span> <span data-ttu-id="023e4-141">Pueden combinarse los datos de dos tablas relacionadas aunque no se hayan definido restricciones de clave principal o de clave externa entre ellas, pero una relación de clave externa entre dos tablas indica que estas se han optimizado para su combinación en una consulta que use las claves como criterio.</span><span class="sxs-lookup"><span data-stu-id="023e4-141">Data from two related tables can be combined even if no primary key or foreign key constraints are defined between the tables, but a foreign key relationship between two tables indicates that the two tables have been optimized to be combined in a query that uses the keys as its criteria.</span></span>

-   <span data-ttu-id="023e4-142">Los cambios en las restricciones de clave principal se comprueban con restricciones de clave externa en las tablas relacionadas.</span><span class="sxs-lookup"><span data-stu-id="023e4-142">Changes to primary key constraints are checked with foreign key constraints in related tables.</span></span>

### <a name="referential-integrity"></a><span data-ttu-id="023e4-143">Integridad referencial</span><span class="sxs-lookup"><span data-stu-id="023e4-143">Referential Integrity</span></span>
 <span data-ttu-id="023e4-144">Aunque el fin principal de una restricción de clave externa es controlar los datos que pueden almacenarse en la tabla de la clave externa; también controla los cambios realizados en los datos de la tabla de la clave principal.</span><span class="sxs-lookup"><span data-stu-id="023e4-144">Although the main purpose of a foreign key constraint is to control the data that can be stored in the foreign key table, it also controls changes to data in the primary key table.</span></span> <span data-ttu-id="023e4-145">Por ejemplo, si se elimina la fila de un vendedor de la tabla **Sales.SalesPerson** y el identificador del vendedor se usa para pedidos de ventas en la tabla **Sales.SalesOrderHeader** , se rompe la integridad relacional entre ambas tablas: los pedidos del vendedor eliminado quedarán sin correspondencia en la tabla **SalesOrderHeader** sin ningún vínculo con los datos de la tabla **SalesPerson** .</span><span class="sxs-lookup"><span data-stu-id="023e4-145">For example, if the row for a salesperson is deleted from the **Sales.SalesPerson** table, and the salesperson's ID is used for sales orders in the **Sales.SalesOrderHeader** table, the relational integrity between the two tables is broken; the deleted salesperson's sales orders are orphaned in the **SalesOrderHeader** table without a link to the data in the **SalesPerson** table.</span></span>

 <span data-ttu-id="023e4-146">Con una restricción de clave externa se evita esta situación.</span><span class="sxs-lookup"><span data-stu-id="023e4-146">A foreign key constraint prevents this situation.</span></span> <span data-ttu-id="023e4-147">Esta restricción exige la integridad referencial al garantizar que no se puedan realizar cambios en los datos de la tabla de la clave principal si esos cambios anulan el vínculo con los datos de la tabla de la clave externa.</span><span class="sxs-lookup"><span data-stu-id="023e4-147">The constraint enforces referential integrity by guaranteeing that changes cannot be made to data in the primary key table if those changes invalidate the link to data in the foreign key table.</span></span> <span data-ttu-id="023e4-148">Si se intenta eliminar la fila de una tabla de la clave principal o cambiar un valor de clave principal, la acción no progresará si el valor de la clave principal cambiado o eliminado corresponde a un valor de la restricción de clave externa de otra tabla.</span><span class="sxs-lookup"><span data-stu-id="023e4-148">If an attempt is made to delete the row in a primary key table or to change a primary key value, the action will fail when the deleted or changed primary key value corresponds to a value in the foreign key constraint of another table.</span></span> <span data-ttu-id="023e4-149">Para cambiar o eliminar una fila de una restricción de clave externa, debe antes eliminar o cambiar los datos de clave externa de la tabla de clave externa, lo que vincula la clave externa con otros datos de clave principal.</span><span class="sxs-lookup"><span data-stu-id="023e4-149">To successfully change or delete a row in a foreign key constraint, you must first either delete the foreign key data in the foreign key table or change the foreign key data in the foreign key table, which links the foreign key to different primary key data.</span></span>

#### <a name="cascading-referential-integrity"></a><span data-ttu-id="023e4-150">Integridad referencial en cascada</span><span class="sxs-lookup"><span data-stu-id="023e4-150">Cascading Referential Integrity</span></span>
 <span data-ttu-id="023e4-151">Las restricciones de integridad referencial en cascada permiten definir las acciones que [!INCLUDE[ssDE](../../includes/ssde-md.md)] lleva a cabo cuando un usuario intenta eliminar o actualizar una clave a la que apuntan las claves externas existentes.</span><span class="sxs-lookup"><span data-stu-id="023e4-151">By using cascading referential integrity constraints, you can define the actions that the [!INCLUDE[ssDE](../../includes/ssde-md.md)] takes when a user tries to delete or update a key to which existing foreign keys point.</span></span> <span data-ttu-id="023e4-152">Se pueden definir las acciones en cascada.</span><span class="sxs-lookup"><span data-stu-id="023e4-152">The following cascading actions can be defined.</span></span>

 <span data-ttu-id="023e4-153">NINGUNA acción [!INCLUDE[ssDE](../../includes/ssde-md.md)] genera un error y se revierte la acción de eliminación o actualización en la fila de la tabla primaria.</span><span class="sxs-lookup"><span data-stu-id="023e4-153">NO ACTION The [!INCLUDE[ssDE](../../includes/ssde-md.md)] raises an error and the delete or update action on the row in the parent table is rolled back.</span></span>

 <span data-ttu-id="023e4-154">Las filas correspondientes en cascada se actualizan o eliminan en la tabla de referencia cuando esa fila se actualiza o elimina en la tabla primaria.</span><span class="sxs-lookup"><span data-stu-id="023e4-154">CASCADE Corresponding rows are updated or deleted in the referencing table when that row is updated or deleted in the parent table.</span></span> <span data-ttu-id="023e4-155">CASCADE no se puede especificar si una columna `timestamp` es parte de una clave externa o de la clave con referencia.</span><span class="sxs-lookup"><span data-stu-id="023e4-155">CASCADE cannot be specified if a `timestamp` column is part of either the foreign key or the referenced key.</span></span> <span data-ttu-id="023e4-156">ON DELETE CASCADE no se puede especificar en una tabla que tenga un desencadenador INSTEAD OF DELETE.</span><span class="sxs-lookup"><span data-stu-id="023e4-156">ON DELETE CASCADE cannot be specified for a table that has an INSTEAD OF DELETE trigger.</span></span> <span data-ttu-id="023e4-157">No se puede especificar ON UPDATE CASCADE para las tablas que tienen desencadenadores INSTEAD OF UPDATE.</span><span class="sxs-lookup"><span data-stu-id="023e4-157">ON UPDATE CASCADE cannot be specified for tables that have INSTEAD OF UPDATE triggers.</span></span>

 <span data-ttu-id="023e4-158">ESTABLECER NULL: todos los valores que componen la clave externa se establecen en NULL cuando se actualiza o elimina la fila correspondiente de la tabla primaria.</span><span class="sxs-lookup"><span data-stu-id="023e4-158">SET NULL All the values that make up the foreign key are set to NULL when the corresponding row in the parent table is updated or deleted.</span></span> <span data-ttu-id="023e4-159">Para que esta restricción se ejecute, las columnas de clave externa deben aceptar valores NULL.</span><span class="sxs-lookup"><span data-stu-id="023e4-159">For this constraint to execute, the foreign key columns must be nullable.</span></span> <span data-ttu-id="023e4-160">No se puede especificar para las tablas que tienen desencadenadores INSTEAD OF UPDATE.</span><span class="sxs-lookup"><span data-stu-id="023e4-160">Cannot be specified for tables that have INSTEAD OF UPDATE triggers.</span></span>

 <span data-ttu-id="023e4-161">ESTABLECER como predeterminado todos los valores que componen la clave externa se establecen en sus valores predeterminados si se actualiza o elimina la fila correspondiente de la tabla primaria.</span><span class="sxs-lookup"><span data-stu-id="023e4-161">SET DEFAULT All the values that make up the foreign key are set to their default values if the corresponding row in the parent table is updated or deleted.</span></span> <span data-ttu-id="023e4-162">Para que esta restricción se ejecute, todas las columnas de clave externa deben tener definiciones predeterminadas.</span><span class="sxs-lookup"><span data-stu-id="023e4-162">For this constraint to execute, all foreign key columns must have default definitions.</span></span> <span data-ttu-id="023e4-163">Si una columna acepta valores NULL y no se ha establecido un valor predeterminado explícito, NULL se convierte en el valor predeterminado explícito de dicha columna.</span><span class="sxs-lookup"><span data-stu-id="023e4-163">If a column is nullable, and there is no explicit default value set, NULL becomes the implicit default value of the column.</span></span> <span data-ttu-id="023e4-164">No se puede especificar para las tablas que tienen desencadenadores INSTEAD OF UPDATE.</span><span class="sxs-lookup"><span data-stu-id="023e4-164">Cannot be specified for tables that have INSTEAD OF UPDATE triggers.</span></span>

 <span data-ttu-id="023e4-165">CASCADE, SET NULL, SET DEFAULT y NO ACTION se pueden combinar en las tablas con relaciones referenciales entre sí.</span><span class="sxs-lookup"><span data-stu-id="023e4-165">CASCADE, SET NULL, SET DEFAULT and NO ACTION can be combined on tables that have referential relationships with each other.</span></span> <span data-ttu-id="023e4-166">Si el [!INCLUDE[ssDE](../../includes/ssde-md.md)] detecta NO ACTION, detiene y revierte las acciones CASCADE, SET NULL y SET DEFAULT relacionadas.</span><span class="sxs-lookup"><span data-stu-id="023e4-166">If the [!INCLUDE[ssDE](../../includes/ssde-md.md)] encounters NO ACTION, it stops and rolls back related CASCADE, SET NULL and SET DEFAULT actions.</span></span> <span data-ttu-id="023e4-167">Cuando una instrucción DELETE hace que se combinen las acciones CASCADE, SET NULL, SET DEFAULT y NO ACTION, todas las acciones CASCADE, SET NULL y SET DEFAULT se aplican antes de que el [!INCLUDE[ssDE](../../includes/ssde-md.md)] compruebe la existencia de NO ACTION.</span><span class="sxs-lookup"><span data-stu-id="023e4-167">When a DELETE statement causes a combination of CASCADE, SET NULL, SET DEFAULT and NO ACTION actions, all the CASCADE, SET NULL and SET DEFAULT actions are applied before the [!INCLUDE[ssDE](../../includes/ssde-md.md)] checks for any NO ACTION.</span></span>

### <a name="triggers-and-cascading-referential-actions"></a><span data-ttu-id="023e4-168">Desencadenadores y acciones referenciales en cascada</span><span class="sxs-lookup"><span data-stu-id="023e4-168">Triggers and Cascading Referential Actions</span></span>
 <span data-ttu-id="023e4-169">Las acciones referenciales en cascada activan los desencadenadores AFTER UPDATE o AFTER DELETE de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="023e4-169">Cascading referential actions fire the AFTER UPDATE or AFTER DELETE triggers in the following manner:</span></span>

-   <span data-ttu-id="023e4-170">Primero se realizan todas las acciones referenciales en cascada generadas directamente por las instrucciones DELETE o UPDATE originales.</span><span class="sxs-lookup"><span data-stu-id="023e4-170">All the cascading referential actions directly caused by the original DELETE or UPDATE are performed first.</span></span>

-   <span data-ttu-id="023e4-171">Si se ha definido algún desencadenador AFTER en las tablas afectadas, estos desencadenadores se activan una vez realizadas todas las acciones en cascada.</span><span class="sxs-lookup"><span data-stu-id="023e4-171">If there are any AFTER triggers defined on the affected tables, these triggers fire after all cascading actions are performed.</span></span> <span data-ttu-id="023e4-172">Estos desencadenadores se activan en el orden contrario a la acción en cascada.</span><span class="sxs-lookup"><span data-stu-id="023e4-172">These triggers fire in opposite order of the cascading action.</span></span> <span data-ttu-id="023e4-173">Si hay varios desencadenadores en una sola tabla, se activan en un orden aleatorio a no ser que el primer o último desencadenador de la tabla sea un desencadenador dedicado.</span><span class="sxs-lookup"><span data-stu-id="023e4-173">If there are multiple triggers on a single table, they fire in random order, unless there is a dedicated first or last trigger for the table.</span></span> <span data-ttu-id="023e4-174">Este orden es como se especifica mediante [sp_settriggerorder](/sql/relational-databases/system-stored-procedures/sp-settriggerorder-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="023e4-174">This order is as specified by using [sp_settriggerorder](/sql/relational-databases/system-stored-procedures/sp-settriggerorder-transact-sql).</span></span>

-   <span data-ttu-id="023e4-175">Si varias cadenas en cascada se originan desde la tabla que era el objetivo directo de una acción UPDATE o DELETE, el orden en que estas cadenas activan sus respectivos desencadenadores no está especificado.</span><span class="sxs-lookup"><span data-stu-id="023e4-175">If multiple cascading chains originate from the table that was the direct target of an UPDATE or DELETE action, the order in which these chains fire their respective triggers is unspecified.</span></span> <span data-ttu-id="023e4-176">Sin embargo, una cadena siempre activa todos sus desencadenadores antes que otra cadena inicie la activación.</span><span class="sxs-lookup"><span data-stu-id="023e4-176">However, one chain always fires all its triggers before another chain starts firing.</span></span>

-   <span data-ttu-id="023e4-177">Un desencadenador AFTER en la tabla que es el objetivo directo de una acción UPDATE o DELETE se activa independientemente de si afecta a alguna fila.</span><span class="sxs-lookup"><span data-stu-id="023e4-177">An AFTER trigger on the table that is the direct target of an UPDATE or DELETE action fires regardless of whether any rows are affected.</span></span> <span data-ttu-id="023e4-178">En este caso, ninguna otra tabla se ve afectada por la cascada.</span><span class="sxs-lookup"><span data-stu-id="023e4-178">There are no other tables affected by cascading in this case.</span></span>

-   <span data-ttu-id="023e4-179">Si alguno de los desencadenadores anteriores realiza operaciones UPDATE o DELETE en otras tablas, estas acciones pueden iniciar cadenas en cascada secundarias.</span><span class="sxs-lookup"><span data-stu-id="023e4-179">If any one of the previous triggers perform UPDATE or DELETE operations on other tables, these actions can start secondary cascading chains.</span></span> <span data-ttu-id="023e4-180">Estas cadenas secundarias se procesan a la vez para cada operación UPDATE o DELETE una vez activados todos los desencadenadores de todas las cadenas principales.</span><span class="sxs-lookup"><span data-stu-id="023e4-180">These secondary chains are processed for each UPDATE or DELETE operation at a time after all triggers on all primary chains fire.</span></span> <span data-ttu-id="023e4-181">Este proceso puede repetirse recursivamente para las operaciones UPDATE o DELETE posteriores.</span><span class="sxs-lookup"><span data-stu-id="023e4-181">This process may be recursively repeated for subsequent UPDATE or DELETE operations.</span></span>

-   <span data-ttu-id="023e4-182">Realizar CREATE, ALTER, DELETE u otras operaciones de lenguaje de definición de datos (DDL) dentro de los desencadenadores puede causar la activación de los desencadenadores DDL.</span><span class="sxs-lookup"><span data-stu-id="023e4-182">Performing CREATE, ALTER, DELETE, or other data definition language (DDL) operations inside the triggers may cause DDL triggers to fire.</span></span> <span data-ttu-id="023e4-183">Esto puede hacer que se lleven a cabo operaciones DELETE o UPDATE que inician cadenas y desencadenadores en cascada adicionales.</span><span class="sxs-lookup"><span data-stu-id="023e4-183">This may subsequently perform DELETE or UPDATE operations that start additional cascading chains and triggers.</span></span>

-   <span data-ttu-id="023e4-184">Si se genera un error en una cadena de acción referencial en cascada determinada, se produce un error, no se activa ningún desencadenador AFTER en esa cadena y la operación DELETE o UPDATE que ha creado la cadena se revierte.</span><span class="sxs-lookup"><span data-stu-id="023e4-184">If an error is generated inside any particular cascading referential action chain, an error is raised, no AFTER triggers are fired in that chain, and the DELETE or UPDATE operation that created the chain is rolled back.</span></span>

-   <span data-ttu-id="023e4-185">Una tabla con un desencadenador INSTEAD OF no puede tener también una cláusula REFERENCES que especifique un acción en cascada.</span><span class="sxs-lookup"><span data-stu-id="023e4-185">A table that has an INSTEAD OF trigger cannot also have a REFERENCES clause that specifies a cascading action.</span></span> <span data-ttu-id="023e4-186">Sin embargo, un desencadenador AFTER de la tabla de destino de una acción en cascada puede ejecutar una instrucción INSERT, UPDATE o DELETE en otra tabla o vista que active un desencadenador INSTEAD OF definido para dicho objeto.</span><span class="sxs-lookup"><span data-stu-id="023e4-186">However, an AFTER trigger on a table targeted by a cascading action can execute an INSERT, UPDATE, or DELETE statement on another table or view that fires an INSTEAD OF trigger defined on that object.</span></span>

##  <a name="related-tasks"></a><a name="Tasks"></a> <span data-ttu-id="023e4-187">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="023e4-187">Related Tasks</span></span>
 <span data-ttu-id="023e4-188">En la tabla siguiente se enumeran las tareas comunes asociadas a restricciones de clave principal y clave externa.</span><span class="sxs-lookup"><span data-stu-id="023e4-188">The following table lists the common tasks associated with primary key and foreign key constraints.</span></span>

|<span data-ttu-id="023e4-189">Tarea</span><span class="sxs-lookup"><span data-stu-id="023e4-189">Task</span></span>|<span data-ttu-id="023e4-190">Tema</span><span class="sxs-lookup"><span data-stu-id="023e4-190">Topic</span></span>|
|----------|-----------|
|<span data-ttu-id="023e4-191">Describe cómo crear una clave principal.</span><span class="sxs-lookup"><span data-stu-id="023e4-191">Describes how to create a primary key.</span></span>|[<span data-ttu-id="023e4-192">Crear claves principales</span><span class="sxs-lookup"><span data-stu-id="023e4-192">Create Primary Keys</span></span>](../tables/create-primary-keys.md)|
|<span data-ttu-id="023e4-193">Describe cómo eliminar una clave principal.</span><span class="sxs-lookup"><span data-stu-id="023e4-193">Describes how to delete a primary key.</span></span>|[<span data-ttu-id="023e4-194">Eliminar claves principales</span><span class="sxs-lookup"><span data-stu-id="023e4-194">Delete Primary Keys</span></span>](../tables/delete-primary-keys.md)|
|<span data-ttu-id="023e4-195">Describe cómo modificar una clave principal.</span><span class="sxs-lookup"><span data-stu-id="023e4-195">Describes how to modify a primary key.</span></span>|[<span data-ttu-id="023e4-196">Modificar claves principales</span><span class="sxs-lookup"><span data-stu-id="023e4-196">Modify Primary Keys</span></span>](../tables/modify-primary-keys.md)|
|<span data-ttu-id="023e4-197">Describe cómo crear relaciones de clave externa</span><span class="sxs-lookup"><span data-stu-id="023e4-197">Describes how to create foreign key relationships</span></span>|[<span data-ttu-id="023e4-198">Crear relaciones de clave externa</span><span class="sxs-lookup"><span data-stu-id="023e4-198">Create Foreign Key Relationships</span></span>](../tables/create-foreign-key-relationships.md)|
|<span data-ttu-id="023e4-199">Describe cómo modificar las relaciones de clave externa.</span><span class="sxs-lookup"><span data-stu-id="023e4-199">Describes how to modify foreign key relationships.</span></span>|[<span data-ttu-id="023e4-200">Modificar relaciones de claves externas.</span><span class="sxs-lookup"><span data-stu-id="023e4-200">Modify Foreign Key Relationships</span></span>](../tables/modify-foreign-key-relationships.md)|
|<span data-ttu-id="023e4-201">Describe cómo eliminar relaciones de clave externa.</span><span class="sxs-lookup"><span data-stu-id="023e4-201">Describes how to delete foreign key relationships.</span></span>|[<span data-ttu-id="023e4-202">Eliminar relaciones entre claves externas.</span><span class="sxs-lookup"><span data-stu-id="023e4-202">Delete Foreign Key Relationships</span></span>](../tables/delete-foreign-key-relationships.md)|
|<span data-ttu-id="023e4-203">Describe cómo ver las propiedades de clave externa.</span><span class="sxs-lookup"><span data-stu-id="023e4-203">Describes how to view foreign key properties.</span></span>|[<span data-ttu-id="023e4-204">Ver las propiedades de clave externa</span><span class="sxs-lookup"><span data-stu-id="023e4-204">View Foreign Key Properties</span></span>](../tables/view-foreign-key-properties.md)|
|<span data-ttu-id="023e4-205">Describe cómo deshabilitar restricciones de clave externa para replicación.</span><span class="sxs-lookup"><span data-stu-id="023e4-205">Describes how to disable foreign key constraints for replication.</span></span>|[<span data-ttu-id="023e4-206">Deshabilitar una restricción FOREIGN KEY para la replicación</span><span class="sxs-lookup"><span data-stu-id="023e4-206">Disable Foreign Key Constraints for Replication</span></span>](../tables/disable-foreign-key-constraints-for-replication.md)|
|<span data-ttu-id="023e4-207">Describe cómo deshabilitar las restricciones de clave externa durante una instrucción INSERT o UPDATE.</span><span class="sxs-lookup"><span data-stu-id="023e4-207">Describes how to disable foreign key constraints during an INSERT or UPDATE statement.</span></span>|[<span data-ttu-id="023e4-208">Deshabilitar restricciones FOREIGN KEY con instrucciones INSERT y UPDATE</span><span class="sxs-lookup"><span data-stu-id="023e4-208">Disable Foreign Key Constraints with INSERT and UPDATE Statements</span></span>](../tables/disable-foreign-key-constraints-with-insert-and-update-statements.md)|


