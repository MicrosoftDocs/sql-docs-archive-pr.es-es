---
title: Restricciones UNIQUE y restricciones CHECK | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- constraints [SQL Server], Visual Database Tools
- Visual Database Tools [SQL Server], constraints
ms.assetid: 637098af-2567-48f8-90f4-b41df059833e
author: stevestein
ms.author: sstein
ms.openlocfilehash: 205e4ae3d6f89f10a933bf357d1eeda458852584
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87744020"
---
# <a name="unique-constraints-and-check-constraints"></a><span data-ttu-id="50aa1-102">Restricciones UNIQUE y restricciones CHECK</span><span class="sxs-lookup"><span data-stu-id="50aa1-102">Unique Constraints and Check Constraints</span></span>
  <span data-ttu-id="50aa1-103">Las restricciones UNIQUE y las restricciones CHECK son dos tipos de restricciones que se pueden usar para exigir la integridad de los datos en las tablas de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="50aa1-103">UNIQUE constraints and CHECK constraints are two types of constraints that can be used to enforce data integrity in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] tables.</span></span> <span data-ttu-id="50aa1-104">Se trata de objetos de base de datos importantes.</span><span class="sxs-lookup"><span data-stu-id="50aa1-104">These are important database objects.</span></span>  
  
 <span data-ttu-id="50aa1-105">Este tema contiene las siguientes secciones.</span><span class="sxs-lookup"><span data-stu-id="50aa1-105">This topic contains the following sections.</span></span>  
  
 [<span data-ttu-id="50aa1-106">Restricciones UNIQUE</span><span class="sxs-lookup"><span data-stu-id="50aa1-106">UNIQUE Constraints</span></span>](#Unique)  
  
 [<span data-ttu-id="50aa1-107">Restricciones CHECK</span><span class="sxs-lookup"><span data-stu-id="50aa1-107">CHECK Constraints</span></span>](#Check)  
  
 [<span data-ttu-id="50aa1-108">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="50aa1-108">Related Tasks</span></span>](#Tasks)  
  
##  <a name="unique-constraints"></a><a name="Unique"></a> <span data-ttu-id="50aa1-109">Restricciones UNIQUE</span><span class="sxs-lookup"><span data-stu-id="50aa1-109">UNIQUE Constraints</span></span>  
 <span data-ttu-id="50aa1-110">Las restricciones son reglas que [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] aplica de forma automática.</span><span class="sxs-lookup"><span data-stu-id="50aa1-110">Constraints are rules that the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] enforces for you.</span></span> <span data-ttu-id="50aa1-111">Por ejemplo, puede usar restricciones UNIQUE para garantizar que no se escriben valores duplicados en columnas específicas que no forman parte de una clave principal.</span><span class="sxs-lookup"><span data-stu-id="50aa1-111">For example, you can use UNIQUE constraints to make sure that no duplicate values are entered in specific columns that do not participate in a primary key.</span></span> <span data-ttu-id="50aa1-112">Tanto la restricción UNIQUE como la restricción PRIMARY KEY exigen la unicidad; sin embargo, debe usar la restricción UNIQUE y no PRIMARY KEY si desea exigir la unicidad de una columna o una combinación de columnas que no forman la clave principal.</span><span class="sxs-lookup"><span data-stu-id="50aa1-112">Although both a UNIQUE constraint and a PRIMARY KEY constraint enforce uniqueness, use a UNIQUE constraint instead of a PRIMARY KEY constraint when you want to enforce the uniqueness of a column, or combination of columns, that is not the primary key.</span></span>  
  
 <span data-ttu-id="50aa1-113">A diferencia de las restricciones PRIMARY KEY, las restricciones UNIQUE permiten valores NULL.</span><span class="sxs-lookup"><span data-stu-id="50aa1-113">Unlike PRIMARY KEY constraints, UNIQUE constraints allow for the value NULL.</span></span> <span data-ttu-id="50aa1-114">Sin embargo, de la misma forma que cualquier valor incluido en una restricción UNIQUE, solo se admite un valor NULL por columna.</span><span class="sxs-lookup"><span data-stu-id="50aa1-114">However, as with any value participating in a UNIQUE constraint, only one null value is allowed per column.</span></span> <span data-ttu-id="50aa1-115">Es posible hacer referencia a una restricción UNIQUE con una restricción FOREIGN KEY.</span><span class="sxs-lookup"><span data-stu-id="50aa1-115">A UNIQUE constraint can be referenced by a FOREIGN KEY constraint.</span></span>  
  
 <span data-ttu-id="50aa1-116">Cuando se agrega una restricción UNIQUE a una o varias columnas de la tabla, de forma predeterminada, el [!INCLUDE[ssDE](../../includes/ssde-md.md)] examina los datos existentes en las columnas para garantizar que todos los valores sean únicos.</span><span class="sxs-lookup"><span data-stu-id="50aa1-116">When a UNIQUE constraint is added to an existing column or columns in the table, by default, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] examines the existing data in the columns to make sure all values are unique.</span></span> <span data-ttu-id="50aa1-117">Si se agrega una restricción UNIQUE a una columna que contiene valores duplicados, [!INCLUDE[ssDE](../../includes/ssde-md.md)] devuelve un error y no agrega la restricción.</span><span class="sxs-lookup"><span data-stu-id="50aa1-117">If a UNIQUE constraint is added to a column that has duplicated values, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] returns an error and does not add the constraint.</span></span>  
  
 <span data-ttu-id="50aa1-118">[!INCLUDE[ssDE](../../includes/ssde-md.md)] crea automáticamente un índice UNIQUE para exigir, de acuerdo con la restricción UNIQUE, que no haya duplicados.</span><span class="sxs-lookup"><span data-stu-id="50aa1-118">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] automatically creates a UNIQUE index to enforce the uniqueness requirement of the UNIQUE constraint.</span></span> <span data-ttu-id="50aa1-119">Por lo tanto, si se intenta insertar una fila duplicada, [!INCLUDE[ssDE](../../includes/ssde-md.md)] devolverá un mensaje de error para indicar que se ha infringido la restricción UNIQUE y no se agregará la fila a la tabla.</span><span class="sxs-lookup"><span data-stu-id="50aa1-119">Therefore, if an attempt to insert a duplicate row is made, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] returns an error message that states the UNIQUE constraint has been violated and does not add the row to the table.</span></span> <span data-ttu-id="50aa1-120">A menos que se especifique explícitamente un índice clúster, se creará de forma predeterminada un índice único, no clúster, para exigir la restricción UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="50aa1-120">Unless a clustered index is explicitly specified, a unique, nonclustered index is created by default to enforce the UNIQUE constraint.</span></span>  
  
##  <a name="check-constraints"></a><a name="Check"></a> <span data-ttu-id="50aa1-121">Restricciones CHECK</span><span class="sxs-lookup"><span data-stu-id="50aa1-121">CHECK Constraints</span></span>  
 <span data-ttu-id="50aa1-122">Las restricciones CHECK exigen la integridad del dominio mediante la limitación de los valores que puede aceptar una o varias columnas.</span><span class="sxs-lookup"><span data-stu-id="50aa1-122">CHECK constraints enforce domain integrity by limiting the values that are accepted by one or more columns.</span></span> <span data-ttu-id="50aa1-123">Puede crear una restricción CHECK con cualquier expresión lógica (booleana) que devuelva TRUE (verdadero) o FALSE (falso) basándose en operadores lógicos.</span><span class="sxs-lookup"><span data-stu-id="50aa1-123">You can create a CHECK constraint with any logical (Boolean) expression that returns TRUE or FALSE based on the logical operators.</span></span> <span data-ttu-id="50aa1-124">Por ejemplo, es posible limitar el intervalo de valores para una columna **salary** creando una restricción CHECK que solo permita datos entre 15 000 y 100 000 USD.</span><span class="sxs-lookup"><span data-stu-id="50aa1-124">For example, the range of values for a **salary** column can be limited by creating a CHECK constraint that allows for only data that ranges from $15,000 through $100,000.</span></span> <span data-ttu-id="50aa1-125">Esto evita que los salarios caigan fuera del intervalo de salario normal.</span><span class="sxs-lookup"><span data-stu-id="50aa1-125">This prevents salaries from being entered beyond the regular salary range.</span></span> <span data-ttu-id="50aa1-126">La expresión lógica sería la siguiente: `salary >= 15000 AND salary <= 100000`.</span><span class="sxs-lookup"><span data-stu-id="50aa1-126">The logical expression would be the following: `salary >= 15000 AND salary <= 100000`.</span></span>  
  
 <span data-ttu-id="50aa1-127">Puede aplicar varias restricciones CHECK a una sola columna.</span><span class="sxs-lookup"><span data-stu-id="50aa1-127">You can apply multiple CHECK constraints to a single column.</span></span> <span data-ttu-id="50aa1-128">También puede aplicar una sola restricción CHECK a varias columnas si se crea en el nivel de la tabla.</span><span class="sxs-lookup"><span data-stu-id="50aa1-128">You can also apply a single CHECK constraint to multiple columns by creating it at the table level.</span></span> <span data-ttu-id="50aa1-129">Por ejemplo, una restricción CHECK para varias columnas se podría usar para confirmar que cualquier fila con un valor **USA** en la columna **country_region** tiene también un valor de dos caracteres en la columna **state** .</span><span class="sxs-lookup"><span data-stu-id="50aa1-129">For example, a multiple-column CHECK constraint could be used to confirm that any row with a **country_region** column value of **USA** also has a two-character value in the **state** column.</span></span> <span data-ttu-id="50aa1-130">Así se pueden comprobar varias condiciones en un mismo sitio.</span><span class="sxs-lookup"><span data-stu-id="50aa1-130">This allows for multiple conditions to be checked in one location.</span></span>  
  
 <span data-ttu-id="50aa1-131">Las restricciones CHECK son similares a las restricciones FOREIGN KEY porque controlan los valores que se colocan en una columna.</span><span class="sxs-lookup"><span data-stu-id="50aa1-131">CHECK constraints are similar to FOREIGN KEY constraints in that they control the values that are put in a column.</span></span> <span data-ttu-id="50aa1-132">La diferencia reside en la forma en que determinan qué valores son válidos: las restricciones FOREIGN KEY obtienen la lista de valores válidos de otra tabla, mientras que las restricciones CHECK determinan los valores válidos a partir de una expresión lógica.</span><span class="sxs-lookup"><span data-stu-id="50aa1-132">The difference is in how they determine which values are valid: FOREIGN KEY constraints obtain the list of valid values from another table, while CHECK constraints determine the valid values from a logical expression.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="50aa1-133">Las restricciones que incluyen la conversión de tipos de datos implícitos o explícitos pueden impedir la correcta ejecución de determinadas operaciones.</span><span class="sxs-lookup"><span data-stu-id="50aa1-133">Constraints that include implicit or explicit data type conversion may cause certain operations to fail.</span></span> <span data-ttu-id="50aa1-134">Por ejemplo, las restricciones definidas en tablas que son orígenes de un cambio de partición pueden impedir que una operación ALTER TABLE...SWITCH se realice correctamente.</span><span class="sxs-lookup"><span data-stu-id="50aa1-134">For example, such constraints defined on tables that are sources of partition switching may cause an ALTER TABLE...SWITCH operation to fail.</span></span> <span data-ttu-id="50aa1-135">Evite la conversión de tipos de datos en las definiciones de las restricciones.</span><span class="sxs-lookup"><span data-stu-id="50aa1-135">Avoid data type conversion in constraint definitions.</span></span>  
  
### <a name="limitations-of-check-constraints"></a><span data-ttu-id="50aa1-136">Limitaciones de las restricciones CHECK</span><span class="sxs-lookup"><span data-stu-id="50aa1-136">Limitations of CHECK Constraints</span></span>  
 <span data-ttu-id="50aa1-137">Las restricciones CHECK rechazan los valores que se evalúan como FALSE.</span><span class="sxs-lookup"><span data-stu-id="50aa1-137">CHECK constraints reject values that evaluate to FALSE.</span></span> <span data-ttu-id="50aa1-138">Puesto que los valores nulos se evalúan como UNKNOWN, su presencia en las expresiones puede reemplazar una restricción.</span><span class="sxs-lookup"><span data-stu-id="50aa1-138">Because null values evaluate to UNKNOWN, their presence in expressions may override a constraint.</span></span> <span data-ttu-id="50aa1-139">Por ejemplo, supongamos que coloca una restricción en una `int` columna DataColumn especificando que **DataColumn** solo puede contener el valor 10 (**columna = 10**). **MyColumn**</span><span class="sxs-lookup"><span data-stu-id="50aa1-139">For example, suppose you place a constraint on an `int` column **MyColumn** specifying that **MyColumn** can contain only the value 10 (**MyColumn=10**).</span></span> <span data-ttu-id="50aa1-140">Si inserta el valor NULL en **MyColumn**, [!INCLUDE[ssDE](../../includes/ssde-md.md)] inserta NULL y no devuelve un error.</span><span class="sxs-lookup"><span data-stu-id="50aa1-140">If you insert the value NULL into **MyColumn**, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] inserts NULL and does not return an error.</span></span>  
  
 <span data-ttu-id="50aa1-141">Una restricción CHECK devuelve TRUE cuando la condición que está comprobando no es FALSE para ninguna fila de la tabla.</span><span class="sxs-lookup"><span data-stu-id="50aa1-141">A CHECK constraint returns TRUE when the condition it is checking is not FALSE for any row in the table.</span></span> <span data-ttu-id="50aa1-142">Una restricción CHECK opera en el nivel de fila.</span><span class="sxs-lookup"><span data-stu-id="50aa1-142">A CHECK constraint works at the row level.</span></span> <span data-ttu-id="50aa1-143">Si una tabla recién creada no tiene filas, cualquier restricción CHECK en esta tabla se considerará válida.</span><span class="sxs-lookup"><span data-stu-id="50aa1-143">If a table that has just been created does not have any rows, any CHECK constraint on this table is considered valid.</span></span> <span data-ttu-id="50aa1-144">Esta situación puede generar resultados inesperados, como en el siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="50aa1-144">This situation can produce unexpected results, as in the following example.</span></span>  
  
```  
CREATE TABLE CheckTbl (col1 int, col2 int);  
GO  
CREATE FUNCTION CheckFnctn()  
RETURNS int  
AS   
BEGIN  
   DECLARE @retval int  
   SELECT @retval = COUNT(*) FROM CheckTbl  
   RETURN @retval  
END;  
GO  
ALTER TABLE CheckTbl  
ADD CONSTRAINT chkRowCount CHECK (dbo.CheckFnctn() >= 1 );  
GO  
```  
  
 <span data-ttu-id="50aa1-145">La restricción `CHECK` que se agrega especifica que como mínimo debe existir una fila en la tabla `CheckTbl`.</span><span class="sxs-lookup"><span data-stu-id="50aa1-145">The `CHECK` constraint being added specifies that there must be at least one row in table `CheckTbl`.</span></span> <span data-ttu-id="50aa1-146">Sin embargo, puesto que no hay filas en la tabla contra la que se comprueba la condición de esta restricción, la instrucción ALTER TABLE será correcta.</span><span class="sxs-lookup"><span data-stu-id="50aa1-146">However, because there are no rows in the table against which to check the condition of this constraint, the ALTER TABLE statement succeeds.</span></span>  
  
 <span data-ttu-id="50aa1-147">Las restricciones CHECK no se validan durante las instrucciones DELETE.</span><span class="sxs-lookup"><span data-stu-id="50aa1-147">CHECK constraints are not validated during DELETE statements.</span></span> <span data-ttu-id="50aa1-148">Por lo tanto, la ejecución de instrucciones DELETE en las tablas con ciertos tipos de restricciones CHECK puede generar resultados inesperados.</span><span class="sxs-lookup"><span data-stu-id="50aa1-148">Therefore, executing DELETE statements on tables with certain types of check constraints may produce unexpected results.</span></span> <span data-ttu-id="50aa1-149">Por ejemplo, imaginemos que las siguientes instrucciones se ejecutan en la tabla `CheckTbl`.</span><span class="sxs-lookup"><span data-stu-id="50aa1-149">For example, consider the following statements executed on table `CheckTbl`.</span></span>  
  
```  
INSERT INTO CheckTbl VALUES (10, 10);  
GO  
DELETE CheckTbl WHERE col1 = 10;  
```  
  
 <span data-ttu-id="50aa1-150">La instrucción `DELETE` será correcta aunque la restricción `CHECK` especifique que la tabla `CheckTbl` debe tener al menos `1` fila.</span><span class="sxs-lookup"><span data-stu-id="50aa1-150">The `DELETE` statement succeeds, even though the `CHECK` constraint specifies that table `CheckTbl` must have at least `1` row.</span></span>  
  
##  <a name="related-tasks"></a><a name="Tasks"></a> <span data-ttu-id="50aa1-151">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="50aa1-151">Related Tasks</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="50aa1-152">Si se publica la tabla para la replicación, debe modificar el esquema mediante la instrucción Transact-SQL [ALTER TABLE](/sql/t-sql/statements/alter-table-transact-sql) u Objetos de administración de SQL Server (SMO).</span><span class="sxs-lookup"><span data-stu-id="50aa1-152">If the table is published for replication, you must make schema changes using the Transact-SQL statement [ALTER TABLE](/sql/t-sql/statements/alter-table-transact-sql) or SQL Server Management Objects (SMO).</span></span> <span data-ttu-id="50aa1-153">Si se modifica el esquema mediante el Diseñador de tablas o el Diseñador de diagramas de base de datos, se intentará eliminar la tabla y volver a crearla.</span><span class="sxs-lookup"><span data-stu-id="50aa1-153">When schema changes are made using the Table Designer or the Database Diagram Designer, it attempts to drop and recreate the table.</span></span> <span data-ttu-id="50aa1-154">No se pueden eliminar objetos publicados, por lo que la modificación del esquema generará un error.</span><span class="sxs-lookup"><span data-stu-id="50aa1-154">You cannot drop published objects, therefore the schema change will fail.</span></span>  
  
|<span data-ttu-id="50aa1-155">Tarea</span><span class="sxs-lookup"><span data-stu-id="50aa1-155">Task</span></span>|<span data-ttu-id="50aa1-156">Tema</span><span class="sxs-lookup"><span data-stu-id="50aa1-156">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="50aa1-157">Describe cómo crear una restricción UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="50aa1-157">Describes how to create a unique constraint.</span></span>|[<span data-ttu-id="50aa1-158">Crear restricciones UNIQUE</span><span class="sxs-lookup"><span data-stu-id="50aa1-158">Create Unique Constraints</span></span>](../tables/create-unique-constraints.md)|  
|<span data-ttu-id="50aa1-159">Describe cómo modificar una restricción UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="50aa1-159">Describes how to modify a unique constraint.</span></span>|[<span data-ttu-id="50aa1-160">Modificar restricciones UNIQUE</span><span class="sxs-lookup"><span data-stu-id="50aa1-160">Modify Unique Constraints</span></span>](../tables/modify-unique-constraints.md)|  
|<span data-ttu-id="50aa1-161">Describe cómo eliminar una restricción UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="50aa1-161">Describes how to delete a unique constraint.</span></span>|[<span data-ttu-id="50aa1-162">Eliminar restricciones UNIQUE</span><span class="sxs-lookup"><span data-stu-id="50aa1-162">Delete Unique Constraints</span></span>](../tables/delete-unique-constraints.md)|  
|<span data-ttu-id="50aa1-163">Describe cómo deshabilitar una restricción CHECK cuando un agente de replicación inserta o actualiza datos en una tabla.</span><span class="sxs-lookup"><span data-stu-id="50aa1-163">Describes how to disable a check constraint when a replication agent inserts or updates data in your table.</span></span>|[<span data-ttu-id="50aa1-164">Deshabilitar restricciones CHECK para la replicación</span><span class="sxs-lookup"><span data-stu-id="50aa1-164">Disable Check Constraints for Replication</span></span>](../tables/disable-check-constraints-for-replication.md)|  
|<span data-ttu-id="50aa1-165">Describe cómo deshabilitar una restricción CHECK al agregar, actualizar o eliminar datos en una tabla.</span><span class="sxs-lookup"><span data-stu-id="50aa1-165">Describes how to disable a check constraint when data is added to, updated in, or deleted from a table.</span></span>|[<span data-ttu-id="50aa1-166">Deshabilitar restricciones CHECK con instrucciones INSERT y UPDATE</span><span class="sxs-lookup"><span data-stu-id="50aa1-166">Disable Check Constraints with INSERT and UPDATE Statements</span></span>](../tables/disable-check-constraints-with-insert-and-update-statements.md)|  
|<span data-ttu-id="50aa1-167">Describe cómo cambiar la expresión de restricción o las opciones que la habilitan o deshabilitan en condiciones específicas.</span><span class="sxs-lookup"><span data-stu-id="50aa1-167">Describes how to change the constraint expression or the options that enable or disable the constraint for specific conditions.</span></span>|[<span data-ttu-id="50aa1-168">Modificar restricciones CHECK</span><span class="sxs-lookup"><span data-stu-id="50aa1-168">Modify Check Constraints</span></span>](../tables/modify-check-constraints.md)|  
|<span data-ttu-id="50aa1-169">Describe cómo eliminar una restricción CHECK.</span><span class="sxs-lookup"><span data-stu-id="50aa1-169">Describes how to delete a check constraint.</span></span>|[<span data-ttu-id="50aa1-170">Eliminar restricciones CHECK</span><span class="sxs-lookup"><span data-stu-id="50aa1-170">Delete Check Constraints</span></span>](../tables/delete-check-constraints.md)|  
|<span data-ttu-id="50aa1-171">Describe cómo ver las propiedades de una restricción CHECK.</span><span class="sxs-lookup"><span data-stu-id="50aa1-171">Describes how to view the properties of a check constraint.</span></span>|[<span data-ttu-id="50aa1-172">Restricciones UNIQUE y restricciones CHECK</span><span class="sxs-lookup"><span data-stu-id="50aa1-172">Unique Constraints and Check Constraints</span></span>](../tables/unique-constraints-and-check-constraints.md)|  
  
  
