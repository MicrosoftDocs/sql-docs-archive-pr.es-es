---
title: Asignando un identificador de conexión | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
helpviewer_keywords:
- ODBC applications, passwords
- ODBC applications, connections
- handles [SQL Server Native Client]
- expiration [SQL Server Native Client]
- passwords [SQL Server], modifying
- SQL Server Native Client ODBC driver, connection handles
- connection handles [SQL Server Native Client]
- modifying passwords
- SQLAllocHandle function
ms.assetid: 471d8a31-199c-4f92-bb10-004fc7733b35
author: rothja
ms.author: jroth
ms.openlocfilehash: d3cf84e541f114d527d9a00cd19bce705a09af30
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87750933"
---
# <a name="allocating-a-connection-handle"></a><span data-ttu-id="f0703-102">Asignar un identificador de conexión</span><span class="sxs-lookup"><span data-stu-id="f0703-102">Allocating a Connection Handle</span></span>
  <span data-ttu-id="f0703-103">Antes de que la aplicación se pueda conectar a un origen de datos o controlador, debe asignar un identificador de conexión.</span><span class="sxs-lookup"><span data-stu-id="f0703-103">Before the application can connect to a data source or driver, it must allocate a connection handle.</span></span> <span data-ttu-id="f0703-104">Esto se hace llamando a **SQLAllocHandle** con el parámetro *HandleType* establecido en SQL_HANDLE_DBC y *InputHandle* que apunta a un identificador de entorno inicializado.</span><span class="sxs-lookup"><span data-stu-id="f0703-104">This is done by calling **SQLAllocHandle** with the *HandleType* parameter set to SQL_HANDLE_DBC and *InputHandle* pointing to an initialized environment handle.</span></span>  
  
 <span data-ttu-id="f0703-105">Las características de la conexión se controlan estableciendo los atributos de conexión.</span><span class="sxs-lookup"><span data-stu-id="f0703-105">The characteristics of the connection are controlled by setting connection attributes.</span></span> <span data-ttu-id="f0703-106">Por ejemplo, dado que las transacciones se producen en el nivel de conexión, el nivel de aislamiento de transacción es un atributo de conexión.</span><span class="sxs-lookup"><span data-stu-id="f0703-106">For example, because transactions occur at the connection level, the transaction isolation level is a connection attribute.</span></span> <span data-ttu-id="f0703-107">De igual forma, el tiempo de espera del inicio de sesión, o número de segundos que se espera mientras se intenta conectar antes de agotar el tiempo, es un atributo de conexión.</span><span class="sxs-lookup"><span data-stu-id="f0703-107">Similarly, the login time-out, or number of seconds to wait while trying to connect before timing out, is a connection attribute.</span></span>  
  
 <span data-ttu-id="f0703-108">Los atributos de conexión se establecen con [SQLSetConnectAttr](../native-client-odbc-api/sqlsetconnectattr.md)y su configuración actual se recupera con [SQLGetConnectAttr](../native-client-odbc-api/sqlgetconnectattr.md).</span><span class="sxs-lookup"><span data-stu-id="f0703-108">Connection attributes are set with [SQLSetConnectAttr](../native-client-odbc-api/sqlsetconnectattr.md), and their current settings are retrieved with [SQLGetConnectAttr](../native-client-odbc-api/sqlgetconnectattr.md).</span></span> <span data-ttu-id="f0703-109">Si se llama a **SQLSetConnectAttr** antes de que se intente una conexión, el administrador de controladores ODBC almacena los atributos en su estructura de conexión y los establece en el controlador como parte del proceso de conexión.</span><span class="sxs-lookup"><span data-stu-id="f0703-109">If **SQLSetConnectAttr** is called before a connection is attempted, the ODBC Driver Manager stores the attributes in its connection structure and sets them in the driver as part of the connection process.</span></span> <span data-ttu-id="f0703-110">Algunos atributos de conexión se deben establecer antes de la aplicación intente conectar; otros se pueden establecer después de que la conexión se haya completado.</span><span class="sxs-lookup"><span data-stu-id="f0703-110">Some connection attributes must be set before the application attempts to connect; others can be set after the connection has completed.</span></span> <span data-ttu-id="f0703-111">Por ejemplo, SQL_ATTR_ODBC_CURSORS se debe establecer antes de que se realice una conexión, pero SQL_ATTR_AUTOCOMMIT se puede establecer después de conectar.</span><span class="sxs-lookup"><span data-stu-id="f0703-111">For example, SQL_ATTR_ODBC_CURSORS must be set before a connection is made, but SQL_ATTR_AUTOCOMMIT can be set after connecting.</span></span>  
  
 <span data-ttu-id="f0703-112">En ocasiones, las aplicaciones que se ejecutan en [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] versión 7.0 o versiones posteriores pueden mejorar su rendimiento si restablecen el tamaño de paquete de red del flujo TDS.</span><span class="sxs-lookup"><span data-stu-id="f0703-112">Applications running against [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] version 7.0 or later can sometimes improve their performance by resetting the tabular data stream (TDS) network packet size.</span></span> <span data-ttu-id="f0703-113">El tamaño de paquete predeterminado se establece en el servidor, en 4 KB.</span><span class="sxs-lookup"><span data-stu-id="f0703-113">The default packet size is set at the server, at 4 KB.</span></span> <span data-ttu-id="f0703-114">Un tamaño de paquete entre 4 y 8 KB generalmente proporciona el máximo rendimiento.</span><span class="sxs-lookup"><span data-stu-id="f0703-114">A packet size of 4 KB to 8 KB generally gives the best performance.</span></span> <span data-ttu-id="f0703-115">Si las pruebas muestran que el rendimiento es mejor con un tamaño de paquete diferente, la aplicación puede restablecer el tamaño de paquete.</span><span class="sxs-lookup"><span data-stu-id="f0703-115">If testing shows that it performs better with a different packet size, the application can reset the packet size.</span></span> <span data-ttu-id="f0703-116">Las aplicaciones ODBC pueden hacerlo antes de la conexión mediante una llamada a **SQLSetConnectAttr** con la opción SQL_ATTR_PACKET_SIZE.</span><span class="sxs-lookup"><span data-stu-id="f0703-116">ODBC applications can do this before connecting by calling **SQLSetConnectAttr** with the SQL_ATTR_PACKET_SIZE option.</span></span> <span data-ttu-id="f0703-117">Algunas aplicaciones presentan un mejor rendimiento con un tamaño de paquete mayor, pero las mejoras de rendimiento suelen ser mínimas en tamaños de paquete mayores que 8 KB.</span><span class="sxs-lookup"><span data-stu-id="f0703-117">Some applications perform better with a larger packet size, but performance improvements are generally minimal for packet sizes larger than 8 KB.</span></span>  
  
 <span data-ttu-id="f0703-118">El [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] controlador ODBC de Native Client tiene una serie de atributos de conexión extendidos que una aplicación puede utilizar para aumentar su funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="f0703-118">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client ODBC driver has a number of extended connection attributes that an application can use to increase its functionality.</span></span> <span data-ttu-id="f0703-119">Algunos de estos atributos controlan las mismas opciones que se pueden especificar en orígenes de datos y se utilizan para invalidar las opciones establecidas en un origen de datos.</span><span class="sxs-lookup"><span data-stu-id="f0703-119">Some of these attributes control the same options that can be specified in data sources and used to override whatever option is set in a data source.</span></span> <span data-ttu-id="f0703-120">Por ejemplo, si una aplicación utiliza identificadores entrecomillados, puede establecer el atributo SQL_COPT_SS_QUOTED_IDENT específico de controlador en SQL_QI_ON para asegurarse de que esta opción siempre se establece sin tener en cuenta el valor en cualquier origen de datos.</span><span class="sxs-lookup"><span data-stu-id="f0703-120">For example, if an application uses quoted identifiers, it can set the driver-specific attribute SQL_COPT_SS_QUOTED_IDENT to SQL_QI_ON to ensure this option is always set regardless of the setting in any data source.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f0703-121">Consulte también</span><span class="sxs-lookup"><span data-stu-id="f0703-121">See Also</span></span>  
 [<span data-ttu-id="f0703-122">Comunicarse con SQL Server &#40;ODBC&#41;</span><span class="sxs-lookup"><span data-stu-id="f0703-122">Communicating with SQL Server &#40;ODBC&#41;</span></span>](communicating-with-sql-server-odbc.md)  
  
  
