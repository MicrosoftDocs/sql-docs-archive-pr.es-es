---
title: Promoción de transacciones | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: clr
ms.topic: reference
helpviewer_keywords:
- distributed transactions [CLR integration]
- promoting transactions [CLR integration]
- Enlist keyword
- transaction promotion [CLR integration]
ms.assetid: 5bc7e26e-28ad-4198-a40d-8b2c648ba304
author: rothja
ms.author: jroth
ms.openlocfilehash: e78cbb3d2fc888e56c0b55780daf7b449fe6dc40
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751186"
---
# <a name="transaction-promotion"></a><span data-ttu-id="9a57e-102">Promoción de transacciones</span><span class="sxs-lookup"><span data-stu-id="9a57e-102">Transaction Promotion</span></span>
  <span data-ttu-id="9a57e-103">La *promoción* de transacciones describe transacciones ligeras, locales que se pueden promover automáticamente a transacciones totalmente distribuibles, según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="9a57e-103">Transaction *promotion* describes a lightweight, local transaction that can be automatically promoted to a fully distributable transaction as needed.</span></span> <span data-ttu-id="9a57e-104">Cuando se invoca un procedimiento almacenado administrado en una transacción de base de datos del servidor, se ejecuta el código de Common Language Runtime (CLR) en el contexto de una transacción local.</span><span class="sxs-lookup"><span data-stu-id="9a57e-104">When a managed stored procedure is invoked within a database transaction on the server, the common language runtime (CLR) code is run in the context of a local transaction.</span></span>  <span data-ttu-id="9a57e-105">Si se abre una conexión a un servidor remoto en una transacción de base de datos, la conexión al servidor remoto se da de alta en la transacción distribuida y la transacción local se promueve automáticamente a una transacción distribuida.</span><span class="sxs-lookup"><span data-stu-id="9a57e-105">If a connection to a remote server is opened within a database transaction, the connection to the remote server is enlisted into the distributed transaction and the local transaction is automatically promoted to a distributed transaction.</span></span> <span data-ttu-id="9a57e-106">Por lo tanto, la promoción de transacciones minimiza la sobrecarga de las transacciones distribuidas difiriendo la creación de transacciones distribuidas hasta que se necesiten.</span><span class="sxs-lookup"><span data-stu-id="9a57e-106">So, transaction promotion minimizes the overhead of distributed transactions by deferring the creation of a distributed transaction until it is needed.</span></span> <span data-ttu-id="9a57e-107">La promoción de transacciones es automática, si se ha habilitado utilizando la palabra clave `Enlist` y no requiere la intervención del programador.</span><span class="sxs-lookup"><span data-stu-id="9a57e-107">Transaction promotion is automatic, if it has been enabled using the `Enlist` keyword, and does not require intervention from the developer.</span></span> <span data-ttu-id="9a57e-108">El proveedor de datos de .NET Framework para [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] proporciona compatibilidad con la promoción de transacciones, administrada a través de las clases del espacio de nombres `System.Data.SqlClient` de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="9a57e-108">The .NET Framework Data Provider for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides support for transaction promotion, handled through the classes in the .NET Framework `System.Data.SqlClient` namespace.</span></span>  
  
## <a name="the-enlist-keyword"></a><span data-ttu-id="9a57e-109">La palabra clave Enlist</span><span class="sxs-lookup"><span data-stu-id="9a57e-109">The Enlist Keyword</span></span>  
 <span data-ttu-id="9a57e-110">La propiedad `ConnectionString` de un objeto `SqlConnection` admite la palabra clave `Enlist`, que indica si `System.Data.SqlClient` detecta los contextos transaccionales y da de alta automáticamente la conexión en una transacción distribuida.</span><span class="sxs-lookup"><span data-stu-id="9a57e-110">The `ConnectionString` property of a `SqlConnection` object supports the `Enlist` keyword, which indicates whether `System.Data.SqlClient` detects transactional contexts and automatically enlists the connection in a distributed transaction.</span></span> <span data-ttu-id="9a57e-111">Si esta palabra clave está establecida en true (el valor predeterminado), la conexión se da de alta automáticamente en el contexto de transacción actual del subproceso de apertura.</span><span class="sxs-lookup"><span data-stu-id="9a57e-111">If this keyword is set to true (the default), the connection is automatically enlisted in the current transaction context of the opening thread.</span></span> <span data-ttu-id="9a57e-112">Si esta palabra clave está establecida en false, la conexión SqlClient no interactúa con una transacción distribuida.</span><span class="sxs-lookup"><span data-stu-id="9a57e-112">If this keyword is set to false, the SqlClient connection does not interact with a distributed transaction.</span></span> <span data-ttu-id="9a57e-113">Si no se especifica `Enlist` en la cadena de conexión, la conexión se da de alta automáticamente en una transacción distribuida si se detecta una en el momento en que se abre la conexión.</span><span class="sxs-lookup"><span data-stu-id="9a57e-113">If `Enlist` is not specified in the connection string, the connection is automatically enlisted in a distributed transaction if one is detected at the time the connection is opened.</span></span>  
  
## <a name="distributed-transactions"></a><span data-ttu-id="9a57e-114">Transacciones distribuidas</span><span class="sxs-lookup"><span data-stu-id="9a57e-114">Distributed Transactions</span></span>  
 <span data-ttu-id="9a57e-115">Las transacciones distribuidas consumen normalmente recursos del sistema significativos.</span><span class="sxs-lookup"><span data-stu-id="9a57e-115">Distributed transactions typically consume significant system resources.</span></span> [!INCLUDE[msCoName](../../includes/msconame-md.md)] <span data-ttu-id="9a57e-116">DTC (Coordinador de transacciones distribuidas) administra tales transacciones e integra todos los administradores de recursos a los que se obtiene acceso en estas transacciones.</span><span class="sxs-lookup"><span data-stu-id="9a57e-116">Distributed Transaction Coordinator (MS DTC) manages such transactions, and integrates all of the resource managers accessed in these transactions.</span></span> <span data-ttu-id="9a57e-117">La promoción de transacciones, por otro lado, es una forma especial de una transacción `System.Transactions` que delega eficazmente el trabajo a una transacción [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] simple.</span><span class="sxs-lookup"><span data-stu-id="9a57e-117">Transaction promotion, on the other hand, is a special form of a `System.Transactions` transaction that effectively delegates the work to a simple [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] transaction.</span></span> <span data-ttu-id="9a57e-118">`System.Transactions`, `System.Data.SqlClient` y [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] coordinan el trabajo relacionado con la administración de la transacción, promoviéndola a una transacción distribuida completa, según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="9a57e-118">`System.Transactions`, `System.Data.SqlClient`, and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] coordinate the work involved in handling the transaction, promoting it to a full distributed transaction as needed.</span></span>  
  
 <span data-ttu-id="9a57e-119">La ventaja de utilizar la promoción de transacciones es que cuando se abre una conexión con una transacción `TransactionScope` activa y no hay abierta ninguna otra conexión, se confirma la transacción como una transacción ligera, en lugar de incurrir en la sobrecarga adicional de una transacción completa distribuida.</span><span class="sxs-lookup"><span data-stu-id="9a57e-119">The benefit of using transaction promotion is that when a connection is opened with an active `TransactionScope` transaction, and no other connections are opened, the transaction commits as a lightweight transaction, rather than incurring the additional overhead of a full distributed transaction.</span></span> <span data-ttu-id="9a57e-120">Para obtener más información sobre `TransactionScope` , vea [usar System. Transactions](../native-client-ole-db-transactions/transactions.md).</span><span class="sxs-lookup"><span data-stu-id="9a57e-120">For more information about `TransactionScope`, see [Using System.Transactions](../native-client-ole-db-transactions/transactions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9a57e-121">Consulte también</span><span class="sxs-lookup"><span data-stu-id="9a57e-121">See Also</span></span>  
 [<span data-ttu-id="9a57e-122">Integración CLR y transacciones</span><span class="sxs-lookup"><span data-stu-id="9a57e-122">CLR Integration and Transactions</span></span>](clr-integration-and-transactions.md)  
  
  
