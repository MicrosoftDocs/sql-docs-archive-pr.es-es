---
title: Instantáneas de base de datos (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- static database views
- snapshots [SQL Server database snapshots]
- source databases [SQL Server]
- snapshots [SQL Server database snapshots], about database snapshots
- database snapshots [SQL Server]
- read-only database views
- database snapshots [SQL Server], about database snapshots
ms.assetid: 00179314-f23e-47cb-a35c-da6f180f86d3
author: stevestein
ms.author: sstein
ms.openlocfilehash: 8a0fa9b6cee2287d4e6060d4cb39f34d909e7db9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751113"
---
# <a name="database-snapshots-sql-server"></a><span data-ttu-id="664ca-102">Instantáneas de base de datos (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="664ca-102">Database Snapshots (SQL Server)</span></span>
  <span data-ttu-id="664ca-103">Una instantánea de base de datos es una vista estática de solo lectura de una base de datos de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] denominada *base de datos de origen*.</span><span class="sxs-lookup"><span data-stu-id="664ca-103">A database snapshot is a read-only, static view of a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database (the *source database*).</span></span> <span data-ttu-id="664ca-104">La instantánea de base de datos es coherente en cuanto a las transacciones con la base de datos de origen tal como existía en el momento de la creación de la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-104">The database snapshot is transactionally consistent with the source database as of the moment of the snapshot's creation.</span></span> <span data-ttu-id="664ca-105">Una instantánea de base de datos siempre reside en la misma instancia de servidor que la base de datos de origen.</span><span class="sxs-lookup"><span data-stu-id="664ca-105">A database snapshot always resides on the same server instance as its source database.</span></span> <span data-ttu-id="664ca-106">A medida que se actualiza la base de datos de origen, se actualiza la instantánea de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-106">As the source database is updated, the database snapshot is updated.</span></span> <span data-ttu-id="664ca-107">Por consiguiente, durante cuanto más tiempo existe una instantánea de base de datos, más probable es que agote el espacio en disco disponible.</span><span class="sxs-lookup"><span data-stu-id="664ca-107">Therefore, the longer a database snapshot exists, the more likely it is to use up its available disk space.</span></span>  
  
 <span data-ttu-id="664ca-108">En una determinada base de datos de origen pueden existir varias instantáneas.</span><span class="sxs-lookup"><span data-stu-id="664ca-108">Multiple snapshots can exist on a given source database.</span></span> <span data-ttu-id="664ca-109">Cada instantánea de base de datos se mantiene hasta que el propietario de la base de datos la quita explícitamente.</span><span class="sxs-lookup"><span data-stu-id="664ca-109">Each database snapshot persists until it is explicitly dropped by the database owner.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="664ca-110">Las instantáneas de base de datos no están relacionadas con las copias de seguridad de instantánea, el aislamiento de instantáneas de las transacciones ni la replicación de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="664ca-110">Database snapshots are unrelated to snapshot backups, snapshot isolation of transactions, or snapshot replication.</span></span>  
  
 <span data-ttu-id="664ca-111">**En este tema:**</span><span class="sxs-lookup"><span data-stu-id="664ca-111">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="664ca-112">Información general de la característica</span><span class="sxs-lookup"><span data-stu-id="664ca-112">Feature Overview</span></span>](#FeatureOverview)  
  
-   [<span data-ttu-id="664ca-113">Ventajas de las instantáneas de base de datos</span><span class="sxs-lookup"><span data-stu-id="664ca-113">Benefits of Database Snapshots</span></span>](#Benefits)  
  
-   [<span data-ttu-id="664ca-114">Términos y definiciones</span><span class="sxs-lookup"><span data-stu-id="664ca-114">Terms and Definitions</span></span>](#TermsAndDefinitions)  
  
-   [<span data-ttu-id="664ca-115">Requisitos previos y limitaciones de las instantáneas de base de datos</span><span class="sxs-lookup"><span data-stu-id="664ca-115">Prerequisites for and Limitations on Database Snapshots</span></span>](#LimitationsRequirements)  
  
-   [<span data-ttu-id="664ca-116">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="664ca-116">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="feature-overview"></a><a name="FeatureOverview"></a> <span data-ttu-id="664ca-117">Información general de la característica</span><span class="sxs-lookup"><span data-stu-id="664ca-117">Feature Overview</span></span>  
 <span data-ttu-id="664ca-118">Las instantáneas de base de datos funcionan en el nivel de página de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-118">Database snapshots operate at the data-page level.</span></span> <span data-ttu-id="664ca-119">Antes de modificar por primera vez una página de la base de datos de origen, la página original se copia de la base de datos de origen a la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-119">Before a page of the source database is modified for the first time, the original page is copied from the source database to the snapshot.</span></span> <span data-ttu-id="664ca-120">La instantánea almacena la página original y conserva los registros de datos en el estado en que se encontraban cuando se creó la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-120">The snapshot stores the original page, preserving the data records as they existed when the snapshot was created.</span></span> <span data-ttu-id="664ca-121">El mismo proceso se repite para cada página que se modifica por primera vez.</span><span class="sxs-lookup"><span data-stu-id="664ca-121">The same process is repeated for every page that is being modified for the first time.</span></span> <span data-ttu-id="664ca-122">Para el usuario, la instantánea de base de datos no parece cambiar nunca, ya que las operaciones de lectura en una instantánea siempre tienen acceso a las páginas de datos originales, con independencia de dónde residan.</span><span class="sxs-lookup"><span data-stu-id="664ca-122">To the user, a database snapshot appears never to change, because read operations on a database snapshot always access the original data pages, regardless of where they reside.</span></span>  
  
 <span data-ttu-id="664ca-123">Para almacenar las páginas originales copiadas, la instantánea usa uno o varios *archivos dispersos*.</span><span class="sxs-lookup"><span data-stu-id="664ca-123">To store the copied original pages, the snapshot uses one or more *sparse files*.</span></span> <span data-ttu-id="664ca-124">Inicialmente, un archivo disperso es básicamente un archivo vacío que no contiene datos de usuario y al que todavía no se ha asignado espacio en el disco para datos de usuario.</span><span class="sxs-lookup"><span data-stu-id="664ca-124">Initially, a sparse file is an essentially empty file that contains no user data and has not yet been allocated disk space for user data.</span></span> <span data-ttu-id="664ca-125">A medida que se actualizan páginas en la base de datos de origen, el tamaño del archivo aumenta.</span><span class="sxs-lookup"><span data-stu-id="664ca-125">As more and more pages are updated in the source database, the size of the file grows.</span></span> <span data-ttu-id="664ca-126">En la siguiente ilustración se muestran los efectos de dos patrones de actualización en contraste respecto del tamaño de una instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-126">The following figure illustrates the effects of two contrasting update patterns on the size of a snapshot.</span></span> <span data-ttu-id="664ca-127">El patrón de actualización A refleja un entorno en el que solo el 30 por ciento de las páginas originales se actualizan durante la vida de la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-127">Update pattern A reflects an environment in which only 30 percent of the original pages are updated during the life of the snapshot.</span></span> <span data-ttu-id="664ca-128">El patrón de actualización B refleja un entorno en el que el 80 por ciento de las páginas originales se actualizan durante la vida de la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-128">Update pattern B reflects an environment in which 80 percent of the original pages are updated during the life of the snapshot.</span></span>  
  
 <span data-ttu-id="664ca-129">![Patrones de actualización alternativos y tamaño de instantánea](../../database-engine/media/dbview-04.gif "Patrones de actualización alternativos y tamaño de instantánea")</span><span class="sxs-lookup"><span data-stu-id="664ca-129">![Alternative update patterns and snapshot size](../../database-engine/media/dbview-04.gif "Alternative update patterns and snapshot size")</span></span>  
  
##  <a name="benefits-of-database-snapshots"></a><a name="Benefits"></a> <span data-ttu-id="664ca-130">Ventajas de las instantáneas de base de datos</span><span class="sxs-lookup"><span data-stu-id="664ca-130">Benefits of Database Snapshots</span></span>  
  
-   <span data-ttu-id="664ca-131">Las instantáneas se pueden usar para crear informes.</span><span class="sxs-lookup"><span data-stu-id="664ca-131">Snapshots can be used for reporting purposes.</span></span>  
  
     <span data-ttu-id="664ca-132">Los clientes pueden consultar una instantánea de base de datos, lo que resulta útil para escribir informes basados en los datos en el momento de la creación de la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-132">Clients can query a database snapshot, which makes it useful for writing reports based on the data at the time of snapshot creation.</span></span>  
  
-   <span data-ttu-id="664ca-133">Mantenimiento de los datos históricos para la creación de informes.</span><span class="sxs-lookup"><span data-stu-id="664ca-133">Maintaining historical data for report generation.</span></span>  
  
     <span data-ttu-id="664ca-134">Una instantánea puede extender el acceso de usuario a los datos a partir de un momento determinado.</span><span class="sxs-lookup"><span data-stu-id="664ca-134">A snapshot can extend user access to data from a particular point in time.</span></span> <span data-ttu-id="664ca-135">Por ejemplo, se puede crear una instantánea de base de datos al final de un período determinado, como un trimestre financiero, para la creación posterior de informes.</span><span class="sxs-lookup"><span data-stu-id="664ca-135">For example, you can create a database snapshot at the end of a given time period (such as a financial quarter) for later reporting.</span></span> <span data-ttu-id="664ca-136">A continuación, podrá ejecutar informes de final de período basándose en la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-136">You can then run end-of-period reports on the snapshot.</span></span> <span data-ttu-id="664ca-137">Si el espacio en disco lo permite, también podrá realizar el mantenimiento de las instantáneas de final de período de forma indefinida, lo que permitirá realizar consultas de los resultados de estos períodos, por ejemplo para investigar el rendimiento de la organización.</span><span class="sxs-lookup"><span data-stu-id="664ca-137">If disk space permits, you can also maintain end-of-period snapshots indefinitely, allowing queries against the results from these periods; for example, to investigate organizational performance.</span></span>  
  
-   <span data-ttu-id="664ca-138">Utilizar una base de datos reflejada de la cual se está realizando el mantenimiento con fines de disponibilidad para descargar informes.</span><span class="sxs-lookup"><span data-stu-id="664ca-138">Using a mirror database that you are maintaining for availability purposes to offload reporting.</span></span>  
  
     <span data-ttu-id="664ca-139">La utilización de instantáneas de base de datos con creación de reflejo de la base de datos permite que los datos del servidor reflejado estén disponibles para la realización de informes.</span><span class="sxs-lookup"><span data-stu-id="664ca-139">Using database snapshots with database mirroring permits you to make the data on the mirror server accessible for reporting.</span></span> <span data-ttu-id="664ca-140">Asimismo, la ejecución de consultas en la base de datos reflejada puede liberar recursos en la principal.</span><span class="sxs-lookup"><span data-stu-id="664ca-140">Additionally, running queries on the mirror database can free up resources on the principal.</span></span> <span data-ttu-id="664ca-141">Para obtener más información, vea [Creación de reflejo e instantáneas de base de datos &#40;SQL Server&#41;](database-snapshots-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="664ca-141">For more information, see [Database Mirroring and Database Snapshots &#40;SQL Server&#41;](database-snapshots-sql-server.md).</span></span>  
  
-   <span data-ttu-id="664ca-142">Protección de datos contra errores administrativos.</span><span class="sxs-lookup"><span data-stu-id="664ca-142">Safeguarding data against administrative error.</span></span>  
  
-   <span data-ttu-id="664ca-143">En el caso de que se produzca un error de usuario en una base de datos de origen, esta se puede revertir al estado en que se encontraba cuando se creó una determinada instantánea de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-143">In the event of a user error on a source database, you can revert the source database to the state it was in when a given database snapshot was created.</span></span> <span data-ttu-id="664ca-144">La pérdida de datos se limita a las actualizaciones de la base de datos desde la creación de la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-144">Data loss is confined to updates to the database since the snapshot's creation.</span></span>  
  
     <span data-ttu-id="664ca-145">Por ejemplo, antes de realizar actualizaciones principales, como una actualización masiva o un cambio de esquema, la creación de una instantánea de base de datos protege los datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-145">For example, before doing major updates, such as a bulk update or a schema change, create a database snapshot on the database protects data.</span></span> <span data-ttu-id="664ca-146">Si comete un error, podrá utilizar la instantánea para la recuperación devolviendo la base de datos al estado en el que estaba cuando se realizó la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-146">If you make a mistake, you can use the snapshot to recover by reverting the database to the snapshot.</span></span> <span data-ttu-id="664ca-147">Esta acción suele resultar mucho más rápida para este fin que la restauración a partir de una copia de seguridad, pero después no se puede realizar una puesta al día.</span><span class="sxs-lookup"><span data-stu-id="664ca-147">Reverting is potentially much faster for this purpose than restoring from a backup; however, you cannot roll forward afterward.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="664ca-148">La reversión no funciona en bases de datos sin conexión o dañadas.</span><span class="sxs-lookup"><span data-stu-id="664ca-148">Reverting does not work in an offline or corrupted database.</span></span> <span data-ttu-id="664ca-149">Por lo tanto, para proteger una base de datos es necesario hacer copias de seguridad con regularidad y probar el plan de restauración.</span><span class="sxs-lookup"><span data-stu-id="664ca-149">Therefore, taking regular backups and testing your restore plan are necessary to protect a database.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="664ca-150">Las instantáneas de base de datos dependen de la base de datos de origen.</span><span class="sxs-lookup"><span data-stu-id="664ca-150">Database snapshots are dependent on the source database.</span></span> <span data-ttu-id="664ca-151">Por lo tanto, el uso de instantáneas de base de datos para volver a un estado anterior no debe constituir un sustituto de la estrategia relativa a las copias de seguridad y restauración.</span><span class="sxs-lookup"><span data-stu-id="664ca-151">Therefore, using database snapshots for reverting a database is not a substitute for your backup and restore strategy.</span></span> <span data-ttu-id="664ca-152">Resulta esencial realizar todas las copias de seguridad programadas.</span><span class="sxs-lookup"><span data-stu-id="664ca-152">Performing all your scheduled backups remains essential.</span></span> <span data-ttu-id="664ca-153">Si tiene que restaurar la base de datos de origen al momento en que creó una instantánea de base de datos, implemente una directiva de copia de seguridad que le habilite para ello.</span><span class="sxs-lookup"><span data-stu-id="664ca-153">If you must restore the source database to the point in time at which you created a database snapshot, implement a backup policy that enables you to do that.</span></span>  
  
-   <span data-ttu-id="664ca-154">Protección de datos contra errores por parte de los usuarios.</span><span class="sxs-lookup"><span data-stu-id="664ca-154">Safeguarding data against user error.</span></span>  
  
     <span data-ttu-id="664ca-155">La creación de instantáneas de base de datos regularmente permite mitigar el impacto de un error importante por parte de un usuario, como la eliminación de una tabla.</span><span class="sxs-lookup"><span data-stu-id="664ca-155">By creating database snapshots on a regular basis, you can mitigate the impact of a major user error, such as a dropped table.</span></span> <span data-ttu-id="664ca-156">Para obtener una protección superior, puede crear una serie de instantáneas de base de datos que abarquen suficiente tiempo como para reconocer y responder a la mayoría de los errores cometidos por los usuarios.</span><span class="sxs-lookup"><span data-stu-id="664ca-156">For a high level of protection, you can create a series of database snapshots spanning enough time to recognize and respond to most user errors.</span></span> <span data-ttu-id="664ca-157">Por ejemplo, puede mantener entre 6 y 12 instantáneas que abarquen un intervalo de 24 horas, en función de los recursos del disco.</span><span class="sxs-lookup"><span data-stu-id="664ca-157">For instance, you might maintain 6 to 12 rolling snapshots spanning a 24-hour interval, depending on your disk resources.</span></span> <span data-ttu-id="664ca-158">A continuación, cada vez que se cree una nueva instantánea, se podrá eliminar la más antigua.</span><span class="sxs-lookup"><span data-stu-id="664ca-158">Then, each time a new snapshot is created, the earliest snapshot can be deleted.</span></span>  
  
    -   <span data-ttu-id="664ca-159">Para recuperarse de un error de usuario, puede devolver la base de datos al estado en el que se encontraba en el momento en el que se realizó la instantánea inmediatamente anterior al error.</span><span class="sxs-lookup"><span data-stu-id="664ca-159">To recover from a user error, you can revert the database to the snapshot immediately before the error.</span></span> <span data-ttu-id="664ca-160">Esta acción suele resultar mucho más rápida para este fin que la restauración a partir de una copia de seguridad, pero después no se puede realizar una puesta al día.</span><span class="sxs-lookup"><span data-stu-id="664ca-160">Reverting is potentially much faster for this purpose than restoring from a backup; however, you cannot roll forward afterward.</span></span>  
  
    -   <span data-ttu-id="664ca-161">Es posible que también pueda reconstruir manualmente una tabla eliminada u otros datos perdidos a partir de la información de una instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-161">Alternatively, you may be able to manually reconstruct a dropped table or other lost data from the information in a snapshot.</span></span> <span data-ttu-id="664ca-162">Por ejemplo, puede realizar una copia masiva de los datos de la instantánea en la base de datos y combinar manualmente los datos en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-162">For instance, you could bulk copy the data out of the snapshot into the database and manually merge the data back into the database.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="664ca-163">Los motivos para utilizar instantáneas de base de datos determinan cuántas instantáneas simultáneas se necesitan en una base de datos, la frecuencia con la que se debe crear cada nueva instantánea y el tiempo durante el cual se deben conservar.</span><span class="sxs-lookup"><span data-stu-id="664ca-163">Your reasons for using database snapshots determine how many concurrent snapshots you need on a database, how frequently to create a new snapshot, and how long to keep it.</span></span>  
  
-   <span data-ttu-id="664ca-164">Administrar una base de datos de prueba</span><span class="sxs-lookup"><span data-stu-id="664ca-164">Managing a test database</span></span>  
  
     <span data-ttu-id="664ca-165">En un entorno de pruebas, cuando se ejecuta un protocolo de pruebas de forma repetida, puede resultar útil que la base de datos contenga datos idénticos al inicio de cada ronda de pruebas.</span><span class="sxs-lookup"><span data-stu-id="664ca-165">In a testing environment, it can be useful when repeatedly running a test protocol for the database to contain identical data at the start of each round of testing.</span></span> <span data-ttu-id="664ca-166">Antes de ejecutar la primera ronda, un programador o evaluador de aplicaciones puede crear una instantánea de base de datos en la base de datos de prueba.</span><span class="sxs-lookup"><span data-stu-id="664ca-166">Before running the first round, an application developer or tester can create a database snapshot on the test database.</span></span> <span data-ttu-id="664ca-167">Después de cada serie de pruebas, puede devolver la base de datos rápidamente a su estado anterior revirtiendo la instantánea de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-167">After each test run, the database can be quickly returned to its prior state by reverting the database snapshot.</span></span>  
  
##  <a name="terms-and-definitions"></a><a name="TermsAndDefinitions"></a> <span data-ttu-id="664ca-168">Términos y definiciones</span><span class="sxs-lookup"><span data-stu-id="664ca-168">Terms and Definitions</span></span>  
 <span data-ttu-id="664ca-169">database snapshot</span><span class="sxs-lookup"><span data-stu-id="664ca-169">database snapshot</span></span>  
 <span data-ttu-id="664ca-170">Una vista estática, coherente y de solo lectura desde el punto de vista transaccional de una base de datos (la base de datos de origen).</span><span class="sxs-lookup"><span data-stu-id="664ca-170">A transactionally consistent, read-only, static view of a database (the source database).</span></span>  
  
 <span data-ttu-id="664ca-171">base de datos de origen</span><span class="sxs-lookup"><span data-stu-id="664ca-171">source database</span></span>  
 <span data-ttu-id="664ca-172">En el caso de una instantánea de base de datos, la base de datos en la que se creó la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-172">For a database snapshot, the database on which the snapshot was created.</span></span> <span data-ttu-id="664ca-173">Las instantáneas de base de datos dependen de la base de datos de origen.</span><span class="sxs-lookup"><span data-stu-id="664ca-173">Database snapshots are dependent on the source database.</span></span> <span data-ttu-id="664ca-174">Las instantáneas de base de datos deben residir en la misma instancia de servidor que la base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-174">The snapshots of a database must be on the same server instance as the database.</span></span> <span data-ttu-id="664ca-175">Además, si la base de datos deja de estar disponible por alguna razón, todas sus instantáneas de base de datos también dejan de estar disponibles.</span><span class="sxs-lookup"><span data-stu-id="664ca-175">Furthermore, if that database becomes unavailable for any reason, all of its database snapshots also become unavailable.</span></span>  
  
 <span data-ttu-id="664ca-176">archivo disperso</span><span class="sxs-lookup"><span data-stu-id="664ca-176">sparse file</span></span>  
 <span data-ttu-id="664ca-177">Archivo que proporciona el sistema de archivos NTFS y que requiere mucho menos espacio en disco del que se necesitaría de otro modo.</span><span class="sxs-lookup"><span data-stu-id="664ca-177">A file provided by the NTFS file system that requires much less disk space than would otherwise be needed.</span></span> <span data-ttu-id="664ca-178">Los archivos dispersos se usan para almacenar páginas copiadas en una instantánea de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-178">A sparse file is used to store pages copied to a database snapshot.</span></span> <span data-ttu-id="664ca-179">Cuando se crea por primera vez, un archivo disperso ocupa poco espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="664ca-179">When first created, a sparse file takes up little disk space.</span></span> <span data-ttu-id="664ca-180">Mientras los datos se escriben en una instantánea de base de datos, NTFS asigna espacio de disco gradualmente al archivo disperso correspondiente.</span><span class="sxs-lookup"><span data-stu-id="664ca-180">As data is written to a database snapshot, NTFS allocates disk space gradually to the corresponding sparse file.</span></span>  
  
##  <a name="prerequisites-for-and-limitations-on-database-snapshots"></a><a name="LimitationsRequirements"></a> <span data-ttu-id="664ca-181">Requisitos previos y limitaciones de las instantáneas de base de datos</span><span class="sxs-lookup"><span data-stu-id="664ca-181">Prerequisites for and Limitations on Database Snapshots</span></span>  
 <span data-ttu-id="664ca-182">**En esta sección:**</span><span class="sxs-lookup"><span data-stu-id="664ca-182">**In This Section:**</span></span>  
  
-   [<span data-ttu-id="664ca-183">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="664ca-183">Prerequisites</span></span>](#Prerequisites)  
  
-   [<span data-ttu-id="664ca-184">Limitaciones de la base de datos de origen</span><span class="sxs-lookup"><span data-stu-id="664ca-184">Limitations on the Source Database</span></span>](#LimitsOnSourceDb)  
  
-   [<span data-ttu-id="664ca-185">Limitaciones de las instantáneas de base de datos</span><span class="sxs-lookup"><span data-stu-id="664ca-185">Limitations on Database Snapshots</span></span>](#LimitsOnDbSS)  
  
-   [<span data-ttu-id="664ca-186">Requisitos de espacio en disco</span><span class="sxs-lookup"><span data-stu-id="664ca-186">Disk Space Requirements</span></span>](#DiskSpace)  
  
-   [<span data-ttu-id="664ca-187">Instantáneas de base de datos con grupos de archivos sin conexión</span><span class="sxs-lookup"><span data-stu-id="664ca-187">Database Snapshots with Offline Filegroups</span></span>](#OfflineFGs)  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="664ca-188">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="664ca-188">Prerequisites</span></span>  
 <span data-ttu-id="664ca-189">La base de datos de origen, que puede usar cualquier modelo de recuperación, debe cumplir los siguientes requisitos previos:</span><span class="sxs-lookup"><span data-stu-id="664ca-189">The source database, which can use any recovery model, must meet the following prerequisites:</span></span>  
  
-   <span data-ttu-id="664ca-190">La instancia de servidor debe ejecutarse en una edición de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que admita instantáneas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-190">The server instance must be running on an edition of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that supports database snapshots.</span></span> <span data-ttu-id="664ca-191">Para obtener más información, vea [características compatibles con las ediciones de SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="664ca-191">For more information, see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
-   <span data-ttu-id="664ca-192">La base de datos de origen debe estar en línea, a menos que sea una base de datos reflejada dentro de una sesión de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-192">The source database must be online, unless the database is a mirror database within a database mirroring session.</span></span>  
  
-   <span data-ttu-id="664ca-193">Puede crear una instantánea de base de datos en cualquier base de datos primaria o secundaria en un grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="664ca-193">You can create a database snapshot on any primary or secondary database in an availability group.</span></span> <span data-ttu-id="664ca-194">El rol de réplica debe ser PRIMARY o SECONDARY y no debe encontrarse en el estado RESOLVING.</span><span class="sxs-lookup"><span data-stu-id="664ca-194">The replica role must be either PRIMARY or SECONDARY, not in the RESOLVING state.</span></span>  
  
     <span data-ttu-id="664ca-195">Se recomienda que el estado de sincronización de la base de datos sea SYNCHRONIZING o SYNCHRONIZED cuando se crea una instantánea de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-195">We recommend that the database synchronization state be SYNCHRONIZING or SYNCHRONIZED when you create a database snapshot.</span></span> <span data-ttu-id="664ca-196">Sin embargo, las instantáneas de base de datos pueden crearse cuando el estado de sincronización de la base de datos sea NOT SYNCHRONIZING.</span><span class="sxs-lookup"><span data-stu-id="664ca-196">However, database snapshots can be created when the database synchronization state is NOT SYNCHRONIZING.</span></span>  
  
     <span data-ttu-id="664ca-197">Para obtener más información, vea [Instantáneas de bases de datos con grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/database-snapshots-with-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="664ca-197">For more information, see [Database Snapshots with AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/database-snapshots-with-always-on-availability-groups-sql-server.md).</span></span>  
  
-   <span data-ttu-id="664ca-198">Para crear la instantánea de una base de datos en una base de datos reflejada, la base de datos debe hallarse en estado de reflejo SYNCHRONIZED.</span><span class="sxs-lookup"><span data-stu-id="664ca-198">To create a database snapshot on a mirror database, the database must be in the SYNCHRONIZED mirroring state.</span></span>  
  
-   <span data-ttu-id="664ca-199">La base de datos de origen no se puede configurar como una base de datos compartida escalable.</span><span class="sxs-lookup"><span data-stu-id="664ca-199">The source database cannot be configured as a scalable shared database.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="664ca-200">Todos los modelos de recuperación admiten instantáneas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-200">All recovery models support database snapshots.</span></span>  
  
###  <a name="limitations-on-the-source-database"></a><a name="LimitsOnSourceDb"></a> <span data-ttu-id="664ca-201">Limitaciones de la base de datos de origen</span><span class="sxs-lookup"><span data-stu-id="664ca-201">Limitations on the Source Database</span></span>  
 <span data-ttu-id="664ca-202">En tanto exista una instantánea de base de datos, existirán las siguientes limitaciones de la base de datos de origen de la instantánea:</span><span class="sxs-lookup"><span data-stu-id="664ca-202">As long as a database snapshot exists, the following limitations exist on the snapshot's source database:</span></span>  
  
-   <span data-ttu-id="664ca-203">La base de datos no se puede quitar, separar ni restaurar.</span><span class="sxs-lookup"><span data-stu-id="664ca-203">The database cannot be dropped, detached, or restored.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="664ca-204">La copia de seguridad de la base de datos de origen funciona con normalidad; no resulta afectada por las instantáneas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-204">Backing up the source database works normally; it is unaffected by database snapshots.</span></span>  
  
-   <span data-ttu-id="664ca-205">El rendimiento se reduce por el aumento de E/S en la base de datos de origen resultante de una operación de copia por escritura en la instantánea cada vez que se actualiza una página.</span><span class="sxs-lookup"><span data-stu-id="664ca-205">Performance is reduced, due to increased I/O on the source database resulting from a copy-on-write operation to the snapshot every time a page is updated.</span></span>  
  
-   <span data-ttu-id="664ca-206">No se pueden quitar archivos de la base de datos de origen ni de las instantáneas.</span><span class="sxs-lookup"><span data-stu-id="664ca-206">Files cannot be dropped from the source database or from any snapshots.</span></span>  
  
###  <a name="limitations-on-database-snapshots"></a><a name="LimitsOnDbSS"></a> <span data-ttu-id="664ca-207">Limitaciones de las instantáneas de base de datos</span><span class="sxs-lookup"><span data-stu-id="664ca-207">Limitations on Database Snapshots</span></span>  
 <span data-ttu-id="664ca-208">Las siguientes limitaciones son aplicables a las instantáneas de base de datos:</span><span class="sxs-lookup"><span data-stu-id="664ca-208">The following limitations apply to database snapshots:</span></span>  
  
-   <span data-ttu-id="664ca-209">Una instantánea de base de datos debe crearse en la misma instancia de servidor que la base de datos de origen.</span><span class="sxs-lookup"><span data-stu-id="664ca-209">A database snapshot must be created and remain on the same server instance as the source database.</span></span>  
  
-   <span data-ttu-id="664ca-210">Las instantáneas de base de datos siempre trabajan en una base de datos completa.</span><span class="sxs-lookup"><span data-stu-id="664ca-210">Database snapshots always work on an entire database.</span></span>  
  
-   <span data-ttu-id="664ca-211">Las instantáneas de base de datos dependen de la base de datos de origen y no son almacenamiento redundante.</span><span class="sxs-lookup"><span data-stu-id="664ca-211">Database snapshots are dependent on the source database and are not redundant storage.</span></span> <span data-ttu-id="664ca-212">No protegen de los errores de disco u otros tipos de daños.</span><span class="sxs-lookup"><span data-stu-id="664ca-212">They do not protect against disk errors or other types of corruption.</span></span> <span data-ttu-id="664ca-213">Por lo tanto, el uso de instantáneas de base de datos para volver a un estado anterior no debe constituir un sustituto de la estrategia relativa a las copias de seguridad y restauración.</span><span class="sxs-lookup"><span data-stu-id="664ca-213">Therefore, using database snapshots for reverting a database is not a substitute for your backup and restore strategy.</span></span> <span data-ttu-id="664ca-214">Resulta esencial realizar todas las copias de seguridad programadas.</span><span class="sxs-lookup"><span data-stu-id="664ca-214">Performing all your scheduled backups remains essential.</span></span> <span data-ttu-id="664ca-215">Si tiene que restaurar la base de datos de origen al momento en que creó una instantánea de base de datos, implemente una directiva de copia de seguridad que le habilite para ello.</span><span class="sxs-lookup"><span data-stu-id="664ca-215">If you must restore the source database to the point in time at which you created a database snapshot, implement a backup policy that enables you to do that.</span></span>  
  
-   <span data-ttu-id="664ca-216">Cuando una página que se está actualizando en la base de datos de origen se inserta en una instantánea, si ésta se queda sin espacio en disco o encuentra algún otro error, la instantánea pasa a ser sospechosa y debe eliminarse.</span><span class="sxs-lookup"><span data-stu-id="664ca-216">When a page getting updated on the source database is pushed to a snapshot, if the snapshot runs out of disk space or encounters some other error, the snapshot becomes suspect and must be deleted.</span></span>  
  
-   <span data-ttu-id="664ca-217">Las instantáneas son de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="664ca-217">Snapshots are read-only.</span></span> <span data-ttu-id="664ca-218">Como son de solo lectura, no se pueden actualizar.</span><span class="sxs-lookup"><span data-stu-id="664ca-218">Since they are read only, they cannot be upgraded.</span></span> <span data-ttu-id="664ca-219">Por tanto, las instantáneas de base de datos no serán viables tras una actualización.</span><span class="sxs-lookup"><span data-stu-id="664ca-219">Therefore, database snapshots are not expected to be viable after an upgrade.</span></span>  
  
-   <span data-ttu-id="664ca-220">Las instantáneas de base de datos **model**, **master**y **tempdb** están prohibidas.</span><span class="sxs-lookup"><span data-stu-id="664ca-220">Snapshots of the **model**, **master**, and **tempdb** databases are prohibited.</span></span>  
  
-   <span data-ttu-id="664ca-221">No se pueden cambiar las especificaciones de los archivos de la instantánea de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-221">You cannot change any of the specifications of the database snapshot files.</span></span>  
  
-   <span data-ttu-id="664ca-222">No se pueden quitar archivos de una instantánea de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-222">You cannot drop files from a database snapshot.</span></span>  
  
-   <span data-ttu-id="664ca-223">No se pueden realizar copias de seguridad de las instantáneas de base de datos ni restaurarlas.</span><span class="sxs-lookup"><span data-stu-id="664ca-223">You cannot back up or restore database snapshots.</span></span>  
  
-   <span data-ttu-id="664ca-224">No se pueden adjuntar o separar instantáneas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-224">You cannot attach or detach database snapshots.</span></span>  
  
-   <span data-ttu-id="664ca-225">No se pueden crear instantáneas de base de datos en particiones con el sistema de archivos FAT32 o RAW.</span><span class="sxs-lookup"><span data-stu-id="664ca-225">You cannot create database snapshots on FAT32 file system or RAW partitions.</span></span> <span data-ttu-id="664ca-226">El sistema de archivos NTFS proporciona los archivos dispersos utilizados por las instantáneas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-226">The sparse files used by database snapshots are provided by the NTFS file system.</span></span>  
  
-   <span data-ttu-id="664ca-227">La indización de texto completo no se admite en instantáneas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-227">Full-text indexing is not supported on database snapshots.</span></span> <span data-ttu-id="664ca-228">Los catálogos de texto completo no se propagan desde la base de datos de origen.</span><span class="sxs-lookup"><span data-stu-id="664ca-228">Full-text catalogs are not propagated from the source database.</span></span>  
  
-   <span data-ttu-id="664ca-229">Las instantáneas de base de datos heredan las restricciones de seguridad de la base de datos de origen al crear la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-229">A database snapshot inherits the security constraints of its source database at the time of snapshot creation.</span></span> <span data-ttu-id="664ca-230">Como las instantáneas son de solo lectura, los permisos heredados no se pueden cambiar y los cambios de permisos realizados en el origen no se reflejarán en las instantáneas existentes.</span><span class="sxs-lookup"><span data-stu-id="664ca-230">Because snapshots are read-only, inherited permissions cannot be changed and permission changes made to the source will not be reflected in existing snapshots.</span></span>  
  
-   <span data-ttu-id="664ca-231">Las instantáneas siempre reflejan el estado de los grupos de archivos al crear la instantánea: los grupos de archivos en línea permanecen en línea y los grupos de archivos sin conexión permanecen sin conexión.</span><span class="sxs-lookup"><span data-stu-id="664ca-231">A snapshot always reflects the state of filegroups at the time of snapshot creation: online filegroups remain online, and offline filegroups remain offline.</span></span> <span data-ttu-id="664ca-232">Para obtener más información, vea "Instantáneas de base de datos con grupos de archivos sin conexión" más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="664ca-232">For more information, see "Database Snapshots with Offline Filegroups" later in this topic.</span></span>  
  
-   <span data-ttu-id="664ca-233">Si una base de datos de origen adquiere el estado RECOVERY_PENDING, puede que no sea posible tener acceso a las instantáneas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-233">If a source database becomes RECOVERY_PENDING, its database snapshots may become inaccessible.</span></span> <span data-ttu-id="664ca-234">Sin embargo, después de resolver el problema de la base de datos de origen, las instantáneas deberían estar disponibles de nuevo.</span><span class="sxs-lookup"><span data-stu-id="664ca-234">After the issue on the source database is resolved, however, its snapshots should become available again.</span></span>  
  
-   <span data-ttu-id="664ca-235">No se admite la reversión para los grupos de archivos de solo lectura ni para los grupos de archivos comprimidos.</span><span class="sxs-lookup"><span data-stu-id="664ca-235">Reverting is unsupported for read-only filegroups and for compressed filegroups.</span></span> <span data-ttu-id="664ca-236">Los intentos de revertir una base de datos que contiene uno de estos tipos de grupos de archivos generan un error.</span><span class="sxs-lookup"><span data-stu-id="664ca-236">Attempts to revert a database containing either of these types of filegroups fail.</span></span>  
  
-   <span data-ttu-id="664ca-237">En una configuración de trasvase de registros, las instantáneas de base de datos solo se pueden crear en la base de datos principal, no en una base de datos secundaria.</span><span class="sxs-lookup"><span data-stu-id="664ca-237">In a log shipping configuration, database snapshots can be created only on the primary database, not on a secondary database.</span></span> <span data-ttu-id="664ca-238">Si conmuta roles entre la instancia del servidor principal y una instancia del servidor secundario, debe quitar todas las instantáneas de base de datos antes de que pueda configurar la base de datos principal como una base de datos secundaria.</span><span class="sxs-lookup"><span data-stu-id="664ca-238">If you switch roles between the primary server instance and a secondary server instance, you must drop all the database snapshots before you can set the primary database up as a secondary database.</span></span>  
  
-   <span data-ttu-id="664ca-239">Una instantánea de base de datos no se puede configurar como base de datos compartida escalable.</span><span class="sxs-lookup"><span data-stu-id="664ca-239">A database snapshot cannot be configured as a scalable shared database.</span></span>  
  
-   <span data-ttu-id="664ca-240">Los grupos de archivos FILESTREAM no son compatibles con instantáneas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-240">FILESTREAM filegroups are not supported by database snapshots.</span></span> <span data-ttu-id="664ca-241">Si hay grupos de archivos FILESTREAM en una base de datos de origen, son marcados como sin conexión en sus instantáneas de base de datos y éstas no pueden ser usadas para revertir la base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-241">If FILESTREAM filegroups exist in a source database, they are marked as offline in its database snapshots, and the database snapshots cannot be used for reverting the database.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="664ca-242">Una instrucción SELECT que se ejecuta en una instantánea de base de datos no debe especificar una columna FILESTREAM; de lo contrario, se devolverá el mensaje de error siguiente: `Could not continue scan with NOLOCK due to data movement.`</span><span class="sxs-lookup"><span data-stu-id="664ca-242">A SELECT statement that is executed on a database snapshot must not specify a FILESTREAM column; otherwise, the following error message will be returned: `Could not continue scan with NOLOCK due to data movement.`</span></span>  
  
-   <span data-ttu-id="664ca-243">Cuando faltan las estadísticas de una instantánea de solo lectura o son obsoletas, [!INCLUDE[ssDE](../../includes/ssde-md.md)] crea y mantiene estadísticas temporales en tempdb.</span><span class="sxs-lookup"><span data-stu-id="664ca-243">When statistics on a read-only snapshot are missing or stale, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] creates and maintains temporary statistics in tempdb.</span></span> <span data-ttu-id="664ca-244">Para más información, consulte [Estadísticas](../statistics/statistics.md).</span><span class="sxs-lookup"><span data-stu-id="664ca-244">For more information, see [Statistics](../statistics/statistics.md).</span></span>  
  
###  <a name="disk-space-requirements"></a><a name="DiskSpace"></a> <span data-ttu-id="664ca-245">Requisitos de espacio en disco</span><span class="sxs-lookup"><span data-stu-id="664ca-245">Disk Space Requirements</span></span>  
 <span data-ttu-id="664ca-246">Las instantáneas de base de datos ocupan espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="664ca-246">Database snapshots consume disk space.</span></span> <span data-ttu-id="664ca-247">Si una instantánea de base de datos se queda sin espacio en disco, se marca como sospechosa y debe quitarse.</span><span class="sxs-lookup"><span data-stu-id="664ca-247">If a database snapshot runs out of disk space, it is marked as suspect and must be dropped.</span></span> <span data-ttu-id="664ca-248">(Sin embargo, la base de datos de origen no se ve afectada; las acciones sobre ella continúan normalmente). No obstante, en comparación con una copia completa de una base de datos, las instantáneas ocupan poco espacio.</span><span class="sxs-lookup"><span data-stu-id="664ca-248">(The source database, however, is not affected; actions on it continue normally.) Compared to a full copy of a database, however, snapshots are highly space efficient.</span></span> <span data-ttu-id="664ca-249">Una instantánea solo requiere suficiente espacio para las páginas que cambian durante su duración.</span><span class="sxs-lookup"><span data-stu-id="664ca-249">A snapshot requires only enough storage for the pages that change during its lifetime.</span></span> <span data-ttu-id="664ca-250">En general, las instantáneas se conservan durante un tiempo limitado, por lo que el tamaño no es un gran problema.</span><span class="sxs-lookup"><span data-stu-id="664ca-250">Generally, snapshots are kept for a limited time, so their size is not a major concern.</span></span>  
  
 <span data-ttu-id="664ca-251">Así y todo, cuanto más tiempo se mantenga una instantánea, más probable será que se agote el espacio disponible.</span><span class="sxs-lookup"><span data-stu-id="664ca-251">The longer you keep a snapshot, however, the more likely it is to use up available space.</span></span> <span data-ttu-id="664ca-252">El tamaño máximo que puede crecer un archivo disperso es el tamaño del archivo de base de datos de origen correspondiente al crear la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-252">The maximum size to which a sparse file can grow is the size of the corresponding source database file at the time of the snapshot creation.</span></span>  
  
 <span data-ttu-id="664ca-253">Si una instantánea de base de datos se queda sin espacio en disco, es necesario eliminarla (quitarla).</span><span class="sxs-lookup"><span data-stu-id="664ca-253">If a database snapshot runs out of disk space, it must be deleted (dropped).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="664ca-254">Una instantánea de base de datos consume casi los mismos recursos que una base de datos, salvo el espacio de archivo.</span><span class="sxs-lookup"><span data-stu-id="664ca-254">Except for file space, a database snapshot consumes roughly as many resources as a database.</span></span>  
  
###  <a name="database-snapshots-with-offline-filegroups"></a><a name="OfflineFGs"></a> <span data-ttu-id="664ca-255">Instantáneas de base de datos con grupos de archivos sin conexión</span><span class="sxs-lookup"><span data-stu-id="664ca-255">Database Snapshots with Offline Filegroups</span></span>  
 <span data-ttu-id="664ca-256">Los grupos de archivos sin conexión de la base de datos de origen afectan a las instantáneas de base de datos al intentar llevar a cabo una de las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="664ca-256">Offline filegroups in the source database affect database snapshots when you try to do any of the following:</span></span>  
  
-   <span data-ttu-id="664ca-257">Crear una instantánea</span><span class="sxs-lookup"><span data-stu-id="664ca-257">Create a snapshot</span></span>  
  
     <span data-ttu-id="664ca-258">Si una base de datos de origen tiene uno o varios grupos de archivos sin conexión, la creación de la instantánea tiene éxito con los grupos de archivos sin conexión.</span><span class="sxs-lookup"><span data-stu-id="664ca-258">When a source database has one or more offline filegroups, snapshot creation succeeds with the filegroups offline.</span></span> <span data-ttu-id="664ca-259">No se crean archivos dispersos para los grupos de archivos sin conexión.</span><span class="sxs-lookup"><span data-stu-id="664ca-259">Sparse files are not created for the offline filegroups.</span></span>  
  
-   <span data-ttu-id="664ca-260">Poner sin conexión un grupo de archivos</span><span class="sxs-lookup"><span data-stu-id="664ca-260">Take a filegroup offline</span></span>  
  
     <span data-ttu-id="664ca-261">Puede poner sin conexión un archivo en la base de datos de origen.</span><span class="sxs-lookup"><span data-stu-id="664ca-261">You can take a file offline in the source database.</span></span> <span data-ttu-id="664ca-262">Sin embargo, el grupo de archivos permanece en línea en las instantáneas de base de datos si estaba en línea al crear la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-262">However, the filegroup remains online in database snapshots if it was online when the snapshot was created.</span></span> <span data-ttu-id="664ca-263">Si los datos consultados han cambiado desde la creación de la instantánea, se podrá tener acceso a la página de datos original en la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-263">If the queried data has changed since snapshot creation, the original data page will be accessible in the snapshot.</span></span> <span data-ttu-id="664ca-264">Sin embargo, las consultas que utilicen la instantánea para tener acceso a los datos no modificados del grupo de archivos es probable que den errores de entrada/salida (E/S).</span><span class="sxs-lookup"><span data-stu-id="664ca-264">However, queries that use the snapshot to access unmodified data in the filegroup are likely to fail with input/output (I/O) errors.</span></span>  
  
-   <span data-ttu-id="664ca-265">Poner en línea un grupo de archivos</span><span class="sxs-lookup"><span data-stu-id="664ca-265">Bring a filegroup online</span></span>  
  
     <span data-ttu-id="664ca-266">No puede poner en línea un grupo de archivos en una base de datos que tenga instantáneas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-266">You cannot bring a filegroup online in a database that has any database snapshots.</span></span> <span data-ttu-id="664ca-267">Si un grupo de archivos está sin conexión en el momento de la creación de la instantánea o se queda sin conexión mientras existe una instantánea de base de datos, el grupo de archivos permanece sin conexión.</span><span class="sxs-lookup"><span data-stu-id="664ca-267">If a filegroup is offline at the time of snapshot creation or is taken offline while a database snapshot exists, the filegroup remains offline.</span></span> <span data-ttu-id="664ca-268">Esto se debe a que para poder poner un archivo en línea debe restaurarlo, y esto no es posible si existe una instantánea de base de datos en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="664ca-268">This is because bringing a file back online involves restoring it, which is not possible if a database snapshot exists on the database.</span></span>  
  
-   <span data-ttu-id="664ca-269">Revertir la base de datos de origen a la instantánea</span><span class="sxs-lookup"><span data-stu-id="664ca-269">Revert the source database to the snapshot</span></span>  
  
     <span data-ttu-id="664ca-270">La reversión de una base de datos de origen a una instantánea de base de datos requiere que se encuentren en línea todos los grupos de archivos excepto los grupos de archivos que estaban sin conexión al crear la instantánea.</span><span class="sxs-lookup"><span data-stu-id="664ca-270">Reverting a source database to a database snapshot requires that all of the filegroups are online except for filegroups that were offline when the snapshot was created.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="664ca-271">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="664ca-271">Related Tasks</span></span>  
  
-   [<span data-ttu-id="664ca-272">Crear una instantánea de base de datos &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="664ca-272">Create a Database Snapshot &#40;Transact-SQL&#41;</span></span>](create-a-database-snapshot-transact-sql.md)  
  
-   [<span data-ttu-id="664ca-273">Ver una instantánea de base de datos &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="664ca-273">View a Database Snapshot &#40;SQL Server&#41;</span></span>](view-a-database-snapshot-sql-server.md)  
  
-   [<span data-ttu-id="664ca-274">Ver el tamaño del archivo disperso de una instantánea de base de datos &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="664ca-274">View the Size of the Sparse File of a Database Snapshot &#40;Transact-SQL&#41;</span></span>](view-the-size-of-the-sparse-file-of-a-database-snapshot-transact-sql.md)  
  
-   [<span data-ttu-id="664ca-275">Revertir una base de datos a una instantánea de base de datos</span><span class="sxs-lookup"><span data-stu-id="664ca-275">Revert a Database to a Database Snapshot</span></span>](revert-a-database-to-a-database-snapshot.md)  
  
-   [<span data-ttu-id="664ca-276">Eliminar una instantánea de base de datos &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="664ca-276">Drop a Database Snapshot &#40;Transact-SQL&#41;</span></span>](drop-a-database-snapshot-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="664ca-277">Consulte también</span><span class="sxs-lookup"><span data-stu-id="664ca-277">See Also</span></span>  
 [<span data-ttu-id="664ca-278">Creación de reflejo e instantáneas de base de datos &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="664ca-278">Database Mirroring and Database Snapshots &#40;SQL Server&#41;</span></span>](database-snapshots-sql-server.md)  
  
  
