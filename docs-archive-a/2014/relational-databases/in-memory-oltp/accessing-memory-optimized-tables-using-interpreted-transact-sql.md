---
title: Acceso a tablas con optimización para memoria mediante Transact-SQL interpretado | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: 92a44d4d-0e53-4fb0-b890-de264c65c95a
author: rothja
ms.author: jroth
ms.openlocfilehash: af4b3ca7731e7ca13e697f43e76ac3cc3cacb4f1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87675858"
---
# <a name="accessing-memory-optimized-tables-using-interpreted-transact-sql"></a><span data-ttu-id="974ac-102">Acceso a tablas con optimización para memoria mediante Transact-SQL interpretado</span><span class="sxs-lookup"><span data-stu-id="974ac-102">Accessing Memory-Optimized Tables Using Interpreted Transact-SQL</span></span>
  <span data-ttu-id="974ac-103">Salvo unas pocas excepciones, puede acceder a las tablas optimizadas para memoria con cualquier consulta de [!INCLUDE[tsql](../../includes/tsql-md.md)] u operación DML (SELECT, INSERT, UPDATE o DELETE), lotes ad hoc y módulos de SQL como, por ejemplo, procedimientos almacenados, funciones con valores de tabla, desencadenadores y vistas.</span><span class="sxs-lookup"><span data-stu-id="974ac-103">With only a few exceptions, you can access memory-optimized tables using any [!INCLUDE[tsql](../../includes/tsql-md.md)] query or DML operation (SELECT, INSERT, UPDATE, or DELETE), ad hoc batches, and SQL modules such as stored procedures, table-value functions, triggers, and views.</span></span>  
  
 <span data-ttu-id="974ac-104">[!INCLUDE[tsql](../../includes/tsql-md.md)] interpretado hace referencia a procedimientos almacenados o lotes de [!INCLUDE[tsql](../../includes/tsql-md.md)] distintos de un procedimiento almacenado compilado de forma nativa.</span><span class="sxs-lookup"><span data-stu-id="974ac-104">Interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)] refers to [!INCLUDE[tsql](../../includes/tsql-md.md)] batches or stored procedures other than a natively compiled stored procedure.</span></span> <span data-ttu-id="974ac-105">El acceso de [!INCLUDE[tsql](../../includes/tsql-md.md)] interpretado a las tablas optimizadas para memoria se conoce como acceso de interoperabilidad.</span><span class="sxs-lookup"><span data-stu-id="974ac-105">Interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)] access to memory-optimized tables is referred to as interop access.</span></span>  
  
 <span data-ttu-id="974ac-106">También se puede tener acceso a las tablas con optimización para memoria mediante un procedimiento almacenado compilado de forma nativa.</span><span class="sxs-lookup"><span data-stu-id="974ac-106">Memory-optimized tables can also be accessed using a natively compiled stored procedure.</span></span> <span data-ttu-id="974ac-107">Los procedimientos almacenados compilados de forma nativa se recomiendan para las operaciones OLTP donde el rendimiento es un factor crítico.</span><span class="sxs-lookup"><span data-stu-id="974ac-107">Natively compiled stored procedures are recommended for performance-critical OLTP operations.</span></span>  
  
 <span data-ttu-id="974ac-108">El acceso interpretado de [!INCLUDE[tsql](../../includes/tsql-md.md)] se recomienda en estos casos:</span><span class="sxs-lookup"><span data-stu-id="974ac-108">Interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)] access is recommended for these scenarios:</span></span>  
  
-   <span data-ttu-id="974ac-109">Consultas ad hoc y tareas administrativas.</span><span class="sxs-lookup"><span data-stu-id="974ac-109">Ad hoc queries and administrative tasks.</span></span>  
  
-   <span data-ttu-id="974ac-110">Consultas de notificación, que suelen usar construcciones no disponibles en los procedimientos almacenados compilados de forma nativa (como funciones de ventana).</span><span class="sxs-lookup"><span data-stu-id="974ac-110">Reporting queries, which typically use constructs not available in natively compiled stored procedures (such as window functions).</span></span>  
  
-   <span data-ttu-id="974ac-111">Para migrar componentes esenciales para el rendimiento de su aplicación a tablas optimizadas para memoria, con cambios mínimos en el código de la aplicación (o sin ningún cambio).</span><span class="sxs-lookup"><span data-stu-id="974ac-111">To migrate performance-critical parts of your application to memory-optimized tables, with minimal (or no) application code changes.</span></span> <span data-ttu-id="974ac-112">Puede ver mejoras en el rendimiento si se migran las tablas.</span><span class="sxs-lookup"><span data-stu-id="974ac-112">You can potentially see performance improvements from migrating tables.</span></span> <span data-ttu-id="974ac-113">Si después migra los procedimientos almacenados a procedimientos almacenados compilados de forma nativa, puede ver una mejora adicional del rendimiento.</span><span class="sxs-lookup"><span data-stu-id="974ac-113">If you then migrate stored procedures to natively compiled stored procedures, you may see further performance improvement.</span></span>  
  
-   <span data-ttu-id="974ac-114">Cuando no hay disponible una instrucción [!INCLUDE[tsql](../../includes/tsql-md.md)] para los procedimientos almacenados compilados de forma nativa.</span><span class="sxs-lookup"><span data-stu-id="974ac-114">When a [!INCLUDE[tsql](../../includes/tsql-md.md)] statement is not available for natively compiled stored procedures.</span></span>  
  
 <span data-ttu-id="974ac-115">Las siguientes construcciones de [!INCLUDE[tsql](../../includes/tsql-md.md)] no se admiten en los procedimientos almacenados de [!INCLUDE[tsql](../../includes/tsql-md.md)] interpretado que acceden a los datos de tablas optimizadas para memoria.</span><span class="sxs-lookup"><span data-stu-id="974ac-115">The following [!INCLUDE[tsql](../../includes/tsql-md.md)] constructs are not supported in interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)] stored procedures that access data in a memory-optimized table.</span></span>  
  
|<span data-ttu-id="974ac-116">Área</span><span class="sxs-lookup"><span data-stu-id="974ac-116">Area</span></span>|<span data-ttu-id="974ac-117">No compatible</span><span class="sxs-lookup"><span data-stu-id="974ac-117">Unsupported</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="974ac-118">Acceso a tablas</span><span class="sxs-lookup"><span data-stu-id="974ac-118">Access to tables</span></span>|<span data-ttu-id="974ac-119">TRUNCATE TABLE</span><span class="sxs-lookup"><span data-stu-id="974ac-119">TRUNCATE TABLE</span></span><br /><br /> <span data-ttu-id="974ac-120">MERGE (tabla optimizada para memoria como destino).</span><span class="sxs-lookup"><span data-stu-id="974ac-120">MERGE (memory-optimized table as target)</span></span><br /><br /> <span data-ttu-id="974ac-121">Cursores dinámicos y keyset (se degradan automáticamente en cursores estáticos).</span><span class="sxs-lookup"><span data-stu-id="974ac-121">Dynamic and keyset cursors (these automatically degrade to static).</span></span><br /><br /> <span data-ttu-id="974ac-122">Acceso de los módulos CLR, con la conexión de contexto.</span><span class="sxs-lookup"><span data-stu-id="974ac-122">Access from CLR modules, using the context connection.</span></span><br /><br /> <span data-ttu-id="974ac-123">Hacen referencia a una tabla optimizada para memoria desde una vista indizada.</span><span class="sxs-lookup"><span data-stu-id="974ac-123">Referencing a memory-optimized table from an indexed view.</span></span>|  
|<span data-ttu-id="974ac-124">A través de bases de datos</span><span class="sxs-lookup"><span data-stu-id="974ac-124">Cross-database</span></span>|<span data-ttu-id="974ac-125">Consultas entre bases de datos</span><span class="sxs-lookup"><span data-stu-id="974ac-125">Cross-database queries</span></span><br /><br /> <span data-ttu-id="974ac-126">Transacciones a través de bases de datos</span><span class="sxs-lookup"><span data-stu-id="974ac-126">Cross-database transactions</span></span><br /><br /> <span data-ttu-id="974ac-127">Servidores vinculados</span><span class="sxs-lookup"><span data-stu-id="974ac-127">Linked servers</span></span>|  
  
## <a name="table-hints"></a><span data-ttu-id="974ac-128">Sugerencias de tabla</span><span class="sxs-lookup"><span data-stu-id="974ac-128">Table Hints</span></span>  
 <span data-ttu-id="974ac-129">Para obtener más información acerca de las sugerencias de tabla, vea:</span><span class="sxs-lookup"><span data-stu-id="974ac-129">For more information about table hints, see.</span></span> <span data-ttu-id="974ac-130">[Sugerencias de tabla &#40;Transact-SQL&#41;](/sql/t-sql/queries/hints-transact-sql-table).</span><span class="sxs-lookup"><span data-stu-id="974ac-130">[Table Hints &#40;Transact-SQL&#41;](/sql/t-sql/queries/hints-transact-sql-table).</span></span> <span data-ttu-id="974ac-131">Se agregó el aislamiento SNAPSHOT para admitir [!INCLUDE[hek_2](../../includes/hek-2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="974ac-131">SNAPSHOT isolation was added to support [!INCLUDE[hek_2](../../includes/hek-2-md.md)].</span></span>  
  
 <span data-ttu-id="974ac-132">Las siguientes sugerencias de tabla no se admiten cuando se obtiene acceso a una tabla optimizada para memoria mediante [!INCLUDE[tsql](../../includes/tsql-md.md)]interpretado.</span><span class="sxs-lookup"><span data-stu-id="974ac-132">The following table hints are not supported when accessing a memory-optimized table using interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)].</span></span>  
  
|||||  
|-|-|-|-|  
|<span data-ttu-id="974ac-133">HOLDLOCK</span><span class="sxs-lookup"><span data-stu-id="974ac-133">HOLDLOCK</span></span>|<span data-ttu-id="974ac-134">IGNORE_CONSTRAINTS</span><span class="sxs-lookup"><span data-stu-id="974ac-134">IGNORE_CONSTRAINTS</span></span>|<span data-ttu-id="974ac-135">IGNORE_TRIGGERS</span><span class="sxs-lookup"><span data-stu-id="974ac-135">IGNORE_TRIGGERS</span></span>|<span data-ttu-id="974ac-136">NOWAIT</span><span class="sxs-lookup"><span data-stu-id="974ac-136">NOWAIT</span></span>|  
|<span data-ttu-id="974ac-137">PAGLOCK</span><span class="sxs-lookup"><span data-stu-id="974ac-137">PAGLOCK</span></span>|<span data-ttu-id="974ac-138">READCOMMITTED</span><span class="sxs-lookup"><span data-stu-id="974ac-138">READCOMMITTED</span></span>|<span data-ttu-id="974ac-139">READCOMMITTEDLOCK</span><span class="sxs-lookup"><span data-stu-id="974ac-139">READCOMMITTEDLOCK</span></span>|<span data-ttu-id="974ac-140">READPAST</span><span class="sxs-lookup"><span data-stu-id="974ac-140">READPAST</span></span>|  
|<span data-ttu-id="974ac-141">READUNCOMMITTED</span><span class="sxs-lookup"><span data-stu-id="974ac-141">READUNCOMMITTED</span></span>|<span data-ttu-id="974ac-142">ROWLOCK</span><span class="sxs-lookup"><span data-stu-id="974ac-142">ROWLOCK</span></span>|<span data-ttu-id="974ac-143">SPATIAL_WINDOW_MAX_CELLS = *entero*</span><span class="sxs-lookup"><span data-stu-id="974ac-143">SPATIAL_WINDOW_MAX_CELLS = *integer*</span></span>|<span data-ttu-id="974ac-144">TABLOCK</span><span class="sxs-lookup"><span data-stu-id="974ac-144">TABLOCK</span></span>|  
|<span data-ttu-id="974ac-145">TABLOCKXX</span><span class="sxs-lookup"><span data-stu-id="974ac-145">TABLOCKXX</span></span>|<span data-ttu-id="974ac-146">UPDLOCK</span><span class="sxs-lookup"><span data-stu-id="974ac-146">UPDLOCK</span></span>|<span data-ttu-id="974ac-147">XLOCK</span><span class="sxs-lookup"><span data-stu-id="974ac-147">XLOCK</span></span>||  
  
 <span data-ttu-id="974ac-148">Al acceder a una tabla optimizada para memoria desde una transacción explícita o implícita con [!INCLUDE[tsql](../../includes/tsql-md.md)] interpretado, debe incluir una sugerencia de tabla de nivel de aislamiento como SNAPSHOT, REPEATABLEREAD o SERIALIZABLE, o bien MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT.</span><span class="sxs-lookup"><span data-stu-id="974ac-148">When accessing a memory-optimized table from an explicit or implicit transaction using interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)] you must include either an isolation level table hint such as SNAPSHOT, REPEATABLEREAD, or SERIALIZABLE, or you can use MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT.</span></span> <span data-ttu-id="974ac-149">Para obtener más información, vea [instrucciones para los niveles de aislamiento de transacción con tablas optimizadas para memoria](memory-optimized-tables.md) y [opciones set de ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-set-options).</span><span class="sxs-lookup"><span data-stu-id="974ac-149">For more information, see [Guidelines for Transaction Isolation Levels with Memory-Optimized Tables](memory-optimized-tables.md) and [ALTER DATABASE SET Options &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-set-options).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="974ac-150">Una sugerencia de tabla de nivel de aislamiento no es necesaria para las tablas optimizadas para memoria por las consultas que se ejecutan en modo de confirmación automática.</span><span class="sxs-lookup"><span data-stu-id="974ac-150">An isolation level table hint is not required for memory-optimized tables accessed by queries running in auto-commit mode.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="974ac-151">Consulte también</span><span class="sxs-lookup"><span data-stu-id="974ac-151">See Also</span></span>  
 <span data-ttu-id="974ac-152">[Compatibilidad de Transact-SQL con OLTP en memoria](transact-sql-support-for-in-memory-oltp.md) </span><span class="sxs-lookup"><span data-stu-id="974ac-152">[Transact-SQL Support for In-Memory OLTP](transact-sql-support-for-in-memory-oltp.md) </span></span>  
 [<span data-ttu-id="974ac-153">Migrar a OLTP en memoria</span><span class="sxs-lookup"><span data-stu-id="974ac-153">Migrating to In-Memory OLTP</span></span>](migrating-to-in-memory-oltp.md)  
  
  
