---
title: Resolver problemas de memoria insuficiente | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: f855e931-7502-44bd-8a8b-b8543645c7f4
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: f5f57725d559b0cd62679550e2bb7c04dbd7e2bd
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87671550"
---
# <a name="resolve-out-of-memory-issues"></a><span data-ttu-id="eeaeb-102">Resolver problemas de memoria insuficiente</span><span class="sxs-lookup"><span data-stu-id="eeaeb-102">Resolve Out Of Memory Issues</span></span>
  [!INCLUDE[hek_1](../../includes/hek-1-md.md)] <span data-ttu-id="eeaeb-103">usa más memoria y de maneras diferentes que [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="eeaeb-103">uses more memory and in different ways than does [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="eeaeb-104">Es posible que la cantidad de memoria que instaló y asignó para [!INCLUDE[hek_2](../../includes/hek-2-md.md)] no sea suficiente para sus necesidades en crecimiento.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-104">It is possible that the amount of memory you installed and allocated for [!INCLUDE[hek_2](../../includes/hek-2-md.md)] becomes inadequate for your growing needs.</span></span> <span data-ttu-id="eeaeb-105">En ese caso, podría quedarse sin memoria.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-105">If so, you could run out of memory.</span></span> <span data-ttu-id="eeaeb-106">En este tema se describe cómo recuperarse de una situación de OOM (memoria insuficiente).</span><span class="sxs-lookup"><span data-stu-id="eeaeb-106">This topic covers how to recover from an OOM situation.</span></span> <span data-ttu-id="eeaeb-107">Vea [Supervisar y solucionar problemas del uso de la memoria](monitor-and-troubleshoot-memory-usage.md) para obtener instrucciones específicas que pueden ayudarle a evitar muchas situaciones de memoria insuficiente.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-107">See [Monitor and Troubleshoot Memory Usage](monitor-and-troubleshoot-memory-usage.md) for guidance that can help you avoid many OOM situations.</span></span>  
  
## <a name="covered-in-this-topic"></a><span data-ttu-id="eeaeb-108">Las secciones de este tema son:</span><span class="sxs-lookup"><span data-stu-id="eeaeb-108">Covered in this topic</span></span>  
  
|<span data-ttu-id="eeaeb-109">Tema</span><span class="sxs-lookup"><span data-stu-id="eeaeb-109">Topic</span></span>|<span data-ttu-id="eeaeb-110">Información general</span><span class="sxs-lookup"><span data-stu-id="eeaeb-110">Overview</span></span>|  
|-----------|--------------|  
| [<span data-ttu-id="eeaeb-111">Resolver errores de restauración de bases de datos debidos a memoria insuficiente</span><span class="sxs-lookup"><span data-stu-id="eeaeb-111">Resolve database restore failures due to OOM</span></span>](#resolve-database-restore-failures-due-to-oom) |<span data-ttu-id="eeaeb-112">Se indica lo que debe hacer si aparece el mensaje de error "Error en la operación de restauración para la base de datos " *\<databaseName>* " debido a memoria insuficiente en el grupo de recursos de servidor " *\<resourcePoolName>* "".</span><span class="sxs-lookup"><span data-stu-id="eeaeb-112">What to do if you get the error message, "Restore operation failed for database '*\<databaseName>*' due to insufficient memory in the resource pool '*\<resourcePoolName>*'."</span></span>|  
| [<span data-ttu-id="eeaeb-113">Resolver el impacto de las condiciones de memoria insuficiente u OOM en la carga de trabajo</span><span class="sxs-lookup"><span data-stu-id="eeaeb-113">Resolve impact of low memory or OOM conditions on the workload</span></span>](#resolve-impact-of-low-memory-or-oom-conditions-on-the-workload)|<span data-ttu-id="eeaeb-114">Se describe lo que hay que hacer si percibe que las condiciones de memoria insuficiente están afectando negativamente al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-114">What to do if you find low memory issues are negatively impacting performance.</span></span>|  
| [<span data-ttu-id="eeaeb-115">Resolver los errores de asignación de páginas debidos a memoria insuficiente cuando hay suficiente memoria disponible</span><span class="sxs-lookup"><span data-stu-id="eeaeb-115">Resolve page allocation failures due to insufficient memory when sufficient memory is available</span></span>](#resolve-page-allocation-failures-due-to-insufficient-memory-when-sufficient-memory-is-available) |<span data-ttu-id="eeaeb-116">Se indica lo que debe hacer si aparece el mensaje de error "No se permiten asignaciones de páginas para la base de datos " *\<databaseName>* " debido a memoria insuficiente en el grupo de recursos de servidor " *\<resourcePoolName>* "".</span><span class="sxs-lookup"><span data-stu-id="eeaeb-116">What to do if you get the error message, "Disallowing page allocations for database '*\<databaseName>*' due to insufficient memory in the resource pool '*\<resourcePoolName>*'.</span></span> <span data-ttu-id="eeaeb-117">..." cuando hay suficiente memoria disponible para la operación.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-117">..." when available memory is sufficient for the operation.</span></span>|  
  
## <a name="resolve-database-restore-failures-due-to-oom"></a><span data-ttu-id="eeaeb-118">Resolver errores de restauración de bases de datos debidos a memoria insuficiente</span><span class="sxs-lookup"><span data-stu-id="eeaeb-118">Resolve database restore failures due to OOM</span></span>  
 <span data-ttu-id="eeaeb-119">Al intentar restaurar una base de datos, puede obtener el mensaje de error: "error en la operación de restauración de la base de datos ' *\<databaseName>* ' debido a memoria insuficiente en el grupo de recursos ' *\<resourcePoolName>* '". Antes de poder restaurar correctamente la base de datos, debe resolver el problema de memoria insuficiente al hacer que haya más memoria disponible.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-119">When you attempt to restore a database you may get the error message: "Restore operation failed for database '*\<databaseName>*' due to insufficient memory in the resource pool '*\<resourcePoolName>*'." Before you can successfully restore the database you must resolve the insufficient memory issue by making more memory available.</span></span>  
  
 <span data-ttu-id="eeaeb-120">Para resolver el error de recuperación debido a memoria insuficiente, aumente la memoria disponible mediante alguno de estos medios (o todos ellos) para incrementar temporalmente la memoria disponible para la operación de recuperación.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-120">To resolve recovery failure due to OOM increase available memory using any or al of these means to temporarily increase memory available for the recovery operation.</span></span>  
  
-   <span data-ttu-id="eeaeb-121">Cierre provisionalmente las aplicaciones en ejecución.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-121">Temporarily close running applications.</span></span>   
    <span data-ttu-id="eeaeb-122">Al cerrar una o varias aplicaciones en ejecución, como Visual Studio, Internet Explorer, OneNote y otras, dejará libre la memoria que están usando para la operación de restauración.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-122">By closing one or more running applications, such as Visual Studio, Internet Explorer, OneNote, and others, you make the memory they were using available for the restore operation.</span></span> <span data-ttu-id="eeaeb-123">Puede reiniciarlas una vez haya completado correctamente la restauración.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-123">You can restart them following the successful restore.</span></span>  
  
-   <span data-ttu-id="eeaeb-124">Aumente el valor de MAX_MEMORY_PERCENT.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-124">Increase the value of MAX_MEMORY_PERCENT.</span></span>   
    <span data-ttu-id="eeaeb-125">Este fragmento de código cambia el valor MAX_MEMORY_PERCENT para el grupo de recursos de servidor PoolHk y lo establece en el 70 % de la memoria instalada.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-125">This code snippet changes MAX_MEMORY_PERCENT for the resource pool PoolHk to 70% of installed memory.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="eeaeb-126">Si el servidor se está ejecutando en una máquina virtual y no está dedicado, establezca el valor de MIN_MEMORY_PERCENT en el mismo valor que MAX_MEMORY_PERCENT.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-126">If the server is running on a VM and is not dedicated, set the value of MIN_MEMORY_PERCENT to the same value as MAX_MEMORY_PERCENT.</span></span>   
    > <span data-ttu-id="eeaeb-127">Vea el tema [Prácticas recomendadas: usar OLTP en memoria en un entorno de máquinas virtuales](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-127">See the topic [Best Practices: Using In-Memory OLTP in a VM environment](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) for more information.</span></span>  
  
    ```sql  
  
    -- disable resource governor  
    ALTER RESOURCE GOVERNOR DISABLE  
  
    -- change the value of MAX_MEMORY_PERCENT  
    ALTER RESOURCE POOL PoolHk  
    WITH  
         ( MAX_MEMORY_PERCENT = 70 )  
    GO  
  
    -- reconfigure the Resource Governor  
    --    RECONFIGURE enables resource governor  
    ALTER RESOURCE GOVERNOR RECONFIGURE  
    GO  
  
    ```  
  
     <span data-ttu-id="eeaeb-128">Para obtener información sobre los valores máximos de MAX_MEMORY_PERCENT vea el tema sobre el [porcentaje de memoria disponible para tablas e índices optimizados para memoria](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#percent-of-memory-available-for-memory-optimized-tables-and-indexes) .</span><span class="sxs-lookup"><span data-stu-id="eeaeb-128">For information on maximum values for MAX_MEMORY_PERCENT see the topic section [Percent of memory available for memory-optimized tables and indexes](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#percent-of-memory-available-for-memory-optimized-tables-and-indexes)</span></span>
  
-   <span data-ttu-id="eeaeb-129">Reconfigurar la **memoria máxima del servidor**.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-129">Reconfigure **max server memory**.</span></span>  
    <span data-ttu-id="eeaeb-130">Para obtener información sobre la configuración de la **memoria máxima del servidor** see the topic [Optimizar el rendimiento del servidor mediante las opciones de configuración de memoria](https://technet.microsoft.com/library/ms177455\(v=SQL.105\).aspx).</span><span class="sxs-lookup"><span data-stu-id="eeaeb-130">For information on configuring **max server memory** see the topic [Optimizing Server Performance Using Memory Configuration Options](https://technet.microsoft.com/library/ms177455\(v=SQL.105\).aspx).</span></span>  
  
## <a name="resolve-impact-of-low-memory-or-oom-conditions-on-the-workload"></a><span data-ttu-id="eeaeb-131">Resolver el impacto de las condiciones de memoria insuficiente u OOM en la carga de trabajo</span><span class="sxs-lookup"><span data-stu-id="eeaeb-131">Resolve impact of low memory or OOM conditions on the workload</span></span>  
 <span data-ttu-id="eeaeb-132">Evidentemente, es mejor no verse en una situación de memoria insuficiente u OOM.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-132">Obviously, it is best to not get into a low memory or OOM (Out of Memory) situation.</span></span> <span data-ttu-id="eeaeb-133">Un planeamiento y supervisión adecuados puede ayudar a evitar situaciones OOM.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-133">Good planning and monitoring can help avoid OOM situations.</span></span> <span data-ttu-id="eeaeb-134">Aún así, incluso el mejor planeamiento no siempre puede prever lo que sucede en realidad y podría terminar con un problema de memoria insuficiente u OOM.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-134">Still, the best planning does not always foresee what actually happens and you might end up with low memory or OOM.</span></span> <span data-ttu-id="eeaeb-135">Hay dos pasos para recuperarse de una situación OOM:</span><span class="sxs-lookup"><span data-stu-id="eeaeb-135">There are two steps to recovering from OOM:</span></span>  
  
1.  [<span data-ttu-id="eeaeb-136">Abrir una DAC (conexión de administrador dedicada)</span><span class="sxs-lookup"><span data-stu-id="eeaeb-136">Open a DAC (Dedicated Administrator Connection)</span></span>](#open-a-dac-dedicated-administrator-connection) 
  
2.  [<span data-ttu-id="eeaeb-137">Tomar una acción correctora</span><span class="sxs-lookup"><span data-stu-id="eeaeb-137">Take corrective action</span></span>](#take-corrective-action) 
  
### <a name="open-a-dac-dedicated-administrator-connection"></a><span data-ttu-id="eeaeb-138">Abrir una DAC (conexión de administrador dedicada)</span><span class="sxs-lookup"><span data-stu-id="eeaeb-138">Open a DAC (Dedicated Administrator Connection)</span></span>  
 <span data-ttu-id="eeaeb-139">Microsoft SQL Server ofrece una conexión de administrador dedicada (DAC).</span><span class="sxs-lookup"><span data-stu-id="eeaeb-139">Microsoft SQL Server provides a dedicated administrator connection (DAC).</span></span> <span data-ttu-id="eeaeb-140">La DAC permite a los administradores acceder a una instancia en ejecución del motor de base de datos de SQL Server para solucionar problemas en el servidor, aunque el servidor no responda a otras conexiones de cliente.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-140">The DAC allows an administrator to access a running instance of SQL Server Database Engine to troubleshoot problems on the server-even when the server is unresponsive to other client connections.</span></span> <span data-ttu-id="eeaeb-141">La DAC está disponible a través de la utilidad `sqlcmd` y SQL Server Management Studio (SSMS).</span><span class="sxs-lookup"><span data-stu-id="eeaeb-141">The DAC is available through the `sqlcmd` utility and SQL Server Management Studio (SSMS).</span></span>  
  
 <span data-ttu-id="eeaeb-142">Para obtener información sobre cómo utilizar `sqlcmd` y la DAC, vea [Usar una conexión de administrador dedicada](../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span><span class="sxs-lookup"><span data-stu-id="eeaeb-142">For guidance on using `sqlcmd` and DAC see [Using a Dedicated Administrator Connection](../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span></span> <span data-ttu-id="eeaeb-143">Para obtener información sobre cómo utilizar la DAC a través de SSMS, vea [Cómo utilizar la conexión de administrador dedicada con SQL Server Management Studio](https://msdn.microsoft.com/library/ms178068.aspx).</span><span class="sxs-lookup"><span data-stu-id="eeaeb-143">For guidance on using DAC through SSMS see [How to: Use the Dedicated Administrator Connection with SQL Server Management Studio](https://msdn.microsoft.com/library/ms178068.aspx).</span></span>  
  
### <a name="take-corrective-action"></a><span data-ttu-id="eeaeb-144">Tomar una acción correctora</span><span class="sxs-lookup"><span data-stu-id="eeaeb-144">Take corrective action</span></span>  
 <span data-ttu-id="eeaeb-145">Para resolver la situación OOM, deberá liberar memoria existente reduciendo su uso u obtener más memoria disponible para las tablas en memoria.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-145">To resolve your OOM condition you need to either free up existing memory by reducing usage, or make more memory available to your in-memory tables.</span></span>  
  
#### <a name="free-up-existing-memory"></a><span data-ttu-id="eeaeb-146">Libere memoria existente</span><span class="sxs-lookup"><span data-stu-id="eeaeb-146">Free up existing memory</span></span>  
  
##### <a name="delete-non-essential-memory-optimized-table-rows-and-wait-for-garbage-collection"></a><span data-ttu-id="eeaeb-147">Elimine las filas que no sean esenciales de la tabla con optimización para memoria y espere a la recolección de elementos no utilizados</span><span class="sxs-lookup"><span data-stu-id="eeaeb-147">Delete non-essential memory optimized table rows and wait for garbage collection</span></span>  
 <span data-ttu-id="eeaeb-148">Puede quitar filas no esenciales de una tabla con optimización para memoria.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-148">You can remove non-essential rows from a memory optimized table.</span></span> <span data-ttu-id="eeaeb-149">El recolector de elementos no utilizados devuelve la memoria que usaban estas filas a la memoria disponible.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-149">The garbage collector returns the memory used by these rows to available memory.</span></span> <span data-ttu-id="eeaeb-150">.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-150">.</span></span> <span data-ttu-id="eeaeb-151">El motor de OLTP en memoria recopila filas de elementos no utilizados de forma intensa.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-151">In-memory OLTP engine collects garbage rows aggressively.</span></span> <span data-ttu-id="eeaeb-152">Sin embargo, una transacción de ejecución prolongada puede impedir la recolección de elementos no utilizados.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-152">However, a long running transaction can prevent garbage collection.</span></span> <span data-ttu-id="eeaeb-153">Por ejemplo, si hay una transacción que se ejecuta durante cinco minutos, no se pueden recopilar las versiones de filas no utilizadas creadas con las operaciones de actualización o eliminación mientras la transacción estaba activa.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-153">For example, if you have a transaction that runs for 5 minutes, any row versions created due to update/delete operations while the transaction was active can't be garbage collected.</span></span>  
  
##### <a name="move-one-or-more-rows-to-a-disk-based-table"></a><span data-ttu-id="eeaeb-154">Mover una o varias filas a una tabla basada en disco</span><span class="sxs-lookup"><span data-stu-id="eeaeb-154">Move one or more rows to a disk-based table</span></span>  
 <span data-ttu-id="eeaeb-155">Los siguientes artículos de TechNet proporcionan instrucciones para mover filas de una tabla optimizada para memoria a una tabla basada en disco.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-155">The following TechNet articles provide guidance on moving rows from a memory-optimized table to a disk-based table.</span></span>  
  
-   <span data-ttu-id="eeaeb-156">[Creación de particiones en el nivel de aplicación](https://technet.microsoft.com/library/dn296452\(v=sql.120\).aspx)</span><span class="sxs-lookup"><span data-stu-id="eeaeb-156">[Application-Level Partitioning](https://technet.microsoft.com/library/dn296452\(v=sql.120\).aspx)</span></span>  
  
-   <span data-ttu-id="eeaeb-157">[Patrón de aplicación para crear particiones de tablas con optimización para memoria](https://technet.microsoft.com/library/dn133171\(v=sql.120\).aspx)</span><span class="sxs-lookup"><span data-stu-id="eeaeb-157">[Application Pattern for Partitioning Memory-Optimized Tables](https://technet.microsoft.com/library/dn133171\(v=sql.120\).aspx)</span></span>  
  
#### <a name="increase-available-memory"></a><span data-ttu-id="eeaeb-158">Aumente la cantidad de memoria disponible</span><span class="sxs-lookup"><span data-stu-id="eeaeb-158">Increase available memory</span></span>  
  
##### <a name="increase-value-of-max_memory_percent-on-the-resource-pool"></a><span data-ttu-id="eeaeb-159">Aumente el valor de MAX_MEMORY_PERCENT en el grupo de recursos de servidor</span><span class="sxs-lookup"><span data-stu-id="eeaeb-159">Increase value of MAX_MEMORY_PERCENT on the resource pool</span></span>  
 <span data-ttu-id="eeaeb-160">Si no ha creado un grupo de recursos de servidor con nombre para las tablas en memoria, debe hacerlo y enlazar las bases de datos de [!INCLUDE[hek_2](../../includes/hek-2-md.md)] al mismo.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-160">If you have not created a named resource pool for your in-memory tables you should do that and bind your [!INCLUDE[hek_2](../../includes/hek-2-md.md)] databases to it.</span></span> <span data-ttu-id="eeaeb-161">Vea el tema [Enlazar una base de datos con tablas con optimización para memoria a un grupo de recursos de servidor](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md) para obtener instrucciones sobre cómo crear y enlazar sus bases de datos de [!INCLUDE[hek_2](../../includes/hek-2-md.md)] a un grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-161">See the topic [Bind a Database with Memory-Optimized Tables to a Resource Pool](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md) for guidance on creating and binding your [!INCLUDE[hek_2](../../includes/hek-2-md.md)] databases to a resource pool.</span></span>  
  
 <span data-ttu-id="eeaeb-162">Si la base de datos de [!INCLUDE[hek_2](../../includes/hek-2-md.md)] está enlazada a un grupo de recursos de servidor, es posible que pueda aumentar el porcentaje de memoria a la que puede tener acceso el grupo.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-162">If your [!INCLUDE[hek_2](../../includes/hek-2-md.md)] database is bound to a resource pool you may be able to increase the percent of memory the pool can access.</span></span> <span data-ttu-id="eeaeb-163">Vea el subtema [Cambiar MIN_MEMORY_PERCENT y MAX_MEMORY_PERCENT en un grupo existente](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#change-min-memory-percent-and-max-memory-percent-on-an-existing-pool) para obtener instrucciones sobre cómo cambiar el valor de MIN_MEMORY_PERCENT y MAX_MEMORY_PERCENT de un grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-163">See the sub-topic [Change MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT on an existing pool](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#change-min-memory-percent-and-max-memory-percent-on-an-existing-pool) for guidance on changing the value of MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT for a resource pool.</span></span>  
  
 <span data-ttu-id="eeaeb-164">Aumente el valor de MAX_MEMORY_PERCENT.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-164">Increase the value of MAX_MEMORY_PERCENT.</span></span>   
<span data-ttu-id="eeaeb-165">Este fragmento de código cambia el valor MAX_MEMORY_PERCENT para el grupo de recursos de servidor PoolHk y lo establece en el 70 % de la memoria instalada.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-165">This code snippet changes MAX_MEMORY_PERCENT for the resource pool PoolHk to 70% of installed memory.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="eeaeb-166">Si el servidor se está ejecutando en una máquina virtual y no está dedicado, establezca el valor de MIN_MEMORY_PERCENT en el mismo valor que MAX_MEMORY_PERCENT.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-166">If the server is running on a VM and is not dedicated, set the value of MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT to the same value.</span></span>   
> <span data-ttu-id="eeaeb-167">Vea el tema [Prácticas recomendadas: usar OLTP en memoria en un entorno de máquinas virtuales](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-167">See the topic [Best Practices: Using In-Memory OLTP in a VM environment](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) for more information.</span></span>  
  
```sql  
  
-- disable resource governor  
ALTER RESOURCE GOVERNOR DISABLE  
  
-- change the value of MAX_MEMORY_PERCENT  
ALTER RESOURCE POOL PoolHk  
WITH  
     ( MAX_MEMORY_PERCENT = 70 )  
GO  
  
-- reconfigure the Resource Governor  
--    RECONFIGURE enables resource governor  
ALTER RESOURCE GOVERNOR RECONFIGURE  
GO  
  
```  
  
 <span data-ttu-id="eeaeb-168">Para obtener información sobre los valores máximos para MAX_MEMORY_PERCENT, vea la sección del tema [Porcentaje de memoria disponible para tablas e índices optimizados para memoria](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#percent-of-memory-available-for-memory-optimized-tables-and-indexes).</span><span class="sxs-lookup"><span data-stu-id="eeaeb-168">For information on maximum values for MAX_MEMORY_PERCENT see the topic section [Percent of memory available for memory-optimized tables and indexes](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#percent-of-memory-available-for-memory-optimized-tables-and-indexes).</span></span>  
  
##### <a name="install-additional-memory"></a><span data-ttu-id="eeaeb-169">Instale memoria adicional</span><span class="sxs-lookup"><span data-stu-id="eeaeb-169">Install additional memory</span></span>  
 <span data-ttu-id="eeaeb-170">En última instancia, si es posible, la mejor solución es instalar memoria física adicional.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-170">Ultimately the best solution, if possible, is to install additional physical memory.</span></span> <span data-ttu-id="eeaeb-171">Si lo hace, recuerde que seguramente también podrá aumentar el valor de MAX_MEMORY_PERCENT (vea el subtema [Cambiar MIN_MEMORY_PERCENT y MAX_MEMORY_PERCENT en un grupo existente](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#change-min-memory-percent-and-max-memory-percent-on-an-existing-pool)), ya que [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] probablemente no necesitará más memoria, lo que permitirá asignar toda o gran parte de la memoria nueva instalada al grupo de recursos de servidor.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-171">If you do this, remember that you will probably be able to also increase the value of MAX_MEMORY_PERCENT (see the sub-topic [Change MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT on an existing pool](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#change-min-memory-percent-and-max-memory-percent-on-an-existing-pool)) since [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] won't likely need more memory, allowing you to make most if not all of the newly installed memory available to the resource pool.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="eeaeb-172">Si el servidor se está ejecutando en una máquina virtual y no está dedicado, establezca el valor de MIN_MEMORY_PERCENT en el mismo valor que MAX_MEMORY_PERCENT.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-172">If the server is running on a VM and is not dedicated, set the value of MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT to the same value.</span></span>   
> <span data-ttu-id="eeaeb-173">Vea el tema [Prácticas recomendadas: usar OLTP en memoria en un entorno de máquinas virtuales](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-173">See the topic [Best Practices: Using In-Memory OLTP in a VM environment](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) for more information.</span></span>  
  
## <a name="resolve-page-allocation-failures-due-to-insufficient-memory-when-sufficient-memory-is-available"></a><span data-ttu-id="eeaeb-174">Resolver los errores de asignación de páginas debidos a memoria insuficiente cuando hay suficiente memoria disponible</span><span class="sxs-lookup"><span data-stu-id="eeaeb-174">Resolve page allocation failures due to insufficient memory when sufficient memory is available</span></span>  
 <span data-ttu-id="eeaeb-175">Si aparece el mensaje de error "no se permiten asignaciones de páginas para la base de datos ' *\<databaseName>* ' debido a memoria insuficiente en el grupo de recursos de sitio ' *\<resourcePoolName>* '.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-175">If you get the error message, "Disallowing page allocations for database '*\<databaseName>*' due to insufficient memory in the resource pool '*\<resourcePoolName>*'.</span></span> <span data-ttu-id="eeaeb-176">Vea ' <https://go.microsoft.com/fwlink/?LinkId=330673> ' para obtener más información ".</span><span class="sxs-lookup"><span data-stu-id="eeaeb-176">See '<https://go.microsoft.com/fwlink/?LinkId=330673>' for more information."</span></span> <span data-ttu-id="eeaeb-177">en el registro de errores cuando hay suficiente memoria física disponible para asignar la página, puede ser debido a un regulador de recursos deshabilitado.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-177">in the error log when the available physical memory is sufficient to allocate the page, it may be due to a disabled Resource Governor.</span></span> <span data-ttu-id="eeaeb-178">Cuando el Regulador de recursos está deshabilitado, MEMORYBROKER_FOR_RESERVE induce una presión de memoria artificial.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-178">When the Resource Governor is disabled MEMORYBROKER_FOR_RESERVE induces artificial memory pressure.</span></span>  
  
 <span data-ttu-id="eeaeb-179">Para resolver este problema necesita habilitar el Regulador de recursos.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-179">To resolve this you need to enable the Resource Governor.</span></span>  
  
 <span data-ttu-id="eeaeb-180">Vea [Habilitar el regulador de recursos](https://technet.microsoft.com/library/bb895149.aspx) para obtener información sobre los límites y las restricciones, así como instrucciones para habilitar el Regulador de recursos mediante el Explorador de objetos, propiedades del Regulador de recursos o Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="eeaeb-180">See [Enable Resource Governor](https://technet.microsoft.com/library/bb895149.aspx) for information on Limits and Restrictions as well as guidance on enabling Resource Governor using Object Explorer, Resource Governor properties, or Transact-SQL.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="eeaeb-181">Consulte también</span><span class="sxs-lookup"><span data-stu-id="eeaeb-181">See Also</span></span>  
 <span data-ttu-id="eeaeb-182">[Administrar memoria para OLTP en memoria](../../database-engine/managing-memory-for-in-memory-oltp.md) </span><span class="sxs-lookup"><span data-stu-id="eeaeb-182">[Managing Memory for In-Memory OLTP](../../database-engine/managing-memory-for-in-memory-oltp.md) </span></span>  
 <span data-ttu-id="eeaeb-183">[Supervisar y solucionar problemas del uso de la memoria](monitor-and-troubleshoot-memory-usage.md) </span><span class="sxs-lookup"><span data-stu-id="eeaeb-183">[Monitor and Troubleshoot Memory Usage](monitor-and-troubleshoot-memory-usage.md) </span></span>  
 <span data-ttu-id="eeaeb-184">[Enlazar una base de datos con tablas con optimización para memoria a un grupo de recursos de servidor](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md) </span><span class="sxs-lookup"><span data-stu-id="eeaeb-184">[Bind a Database with Memory-Optimized Tables to a Resource Pool](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md) </span></span>  
 [<span data-ttu-id="eeaeb-185">Prácticas recomendadas: usar OLTP en memoria en un entorno de máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="eeaeb-185">Best Practices: Using In-Memory OLTP in a VM environment</span></span>](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md)  
  
  
