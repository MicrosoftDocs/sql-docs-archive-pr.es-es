---
title: Preparación para importar datos de forma masiva (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: data-movement
ms.topic: conceptual
helpviewer_keywords:
- bulk importing [SQL Server], about bulk importing
- BULK INSERT statement, guidelines
- BULK INSERT statement, restrictions
- bcp utility [SQL Server], guidelines
- bcp utility [SQL Server], restrictions
- hidden characters
- OPENROWSET function, BCP guidelines
ms.assetid: a82ef43c-d006-4c71-bfca-f001a3ba1ba0
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 03d45d9c79082b255e9b8b0e4804c50855a3ad7b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87749945"
---
# <a name="prepare-to-bulk-import-data-sql-server"></a><span data-ttu-id="b03d0-102">Prepararse para importar datos de forma masiva (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="b03d0-102">Prepare to Bulk Import Data (SQL Server)</span></span>
  <span data-ttu-id="b03d0-103">Puede usar el comando **bcp** , la instrucción BULK INSERT o la función OPENROWSET(BULK) para la importación masiva de datos solo desde un archivo de datos.</span><span class="sxs-lookup"><span data-stu-id="b03d0-103">You can use the **bcp** command, BULK INSERT statement, or OPENROWSET(BULK) function to bulk import data from a data file only.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b03d0-104">Es posible escribir una aplicación personalizada que importe de forma masiva datos desde objetos que no sean un archivo de texto.</span><span class="sxs-lookup"><span data-stu-id="b03d0-104">It is possible to write a custom application that bulk imports data from objects other than a text file.</span></span> <span data-ttu-id="b03d0-105">Para realizar la importación en bloque de datos desde búferes de memoria, use las extensiones de bcp a la interfaz de programación de aplicaciones (API) cliente nativa (ODBC) de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] o la interfaz **IRowsetFastLoad** de OLE DB.</span><span class="sxs-lookup"><span data-stu-id="b03d0-105">To bulk import data from memory buffers, use either the bcp extensions to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client (ODBC) application programming interface (API) or the OLE DB **IRowsetFastLoad** interface.</span></span>  <span data-ttu-id="b03d0-106">Para realizar la importación en bloque de datos desde una tabla de datos de C#, use la API de copia masiva de ADO.NET, **SqlBulkCopy**.</span><span class="sxs-lookup"><span data-stu-id="b03d0-106">To bulk import data from a C# data table, use the ADO.NET bulk-copy API, **SqlBulkCopy**.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b03d0-107">No se admite la importación masiva de datos en una tabla remota.</span><span class="sxs-lookup"><span data-stu-id="b03d0-107">Bulk importing data into a remote table is not supported.</span></span>  
  
 <span data-ttu-id="b03d0-108">Use las siguientes directrices cuando importe en bloque datos de un archivo de datos a una instancia de [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="b03d0-108">Use the following guidelines when you bulk import data from a data file to an instance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="b03d0-109">Obtenga los permisos necesarios para la cuenta de usuario.</span><span class="sxs-lookup"><span data-stu-id="b03d0-109">Obtain required permissions for your user account.</span></span>  
  
     <span data-ttu-id="b03d0-110">La cuenta de usuario en que use la utilidad **bcp**, la instrucción BULK INSERT o la instrucción INSERT ... SELECT \* FROM OPENROWSET(BULK...) debe tener los permisos necesarios sobre la tabla, que son asignados por el propietario de la tabla.</span><span class="sxs-lookup"><span data-stu-id="b03d0-110">The user account in which you use the **bcp** utility, the BULK INSERT statement, or the INSERT ... SELECT \* FROM OPENROWSET(BULK...) statement must have the required permissions on the table, which are assigned by the table owner.</span></span> <span data-ttu-id="b03d0-111">Para obtener más información sobre los permisos necesarios en cada método, vea [bcp (utilidad)](../../tools/bcp-utility.md), [OPENROWSET &#40;Transact-SQL&#41;](/sql/t-sql/functions/openrowset-transact-sql), y [BULK INSERT &#40;Transact-SQL&#41;](/sql/t-sql/statements/bulk-insert-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b03d0-111">For more information about permissions that are required by each method, see [bcp Utility](../../tools/bcp-utility.md), [OPENROWSET &#40;Transact-SQL&#41;](/sql/t-sql/functions/openrowset-transact-sql), and [BULK INSERT &#40;Transact-SQL&#41;](/sql/t-sql/statements/bulk-insert-transact-sql).</span></span>  
  
-   <span data-ttu-id="b03d0-112">Use el modelo de recuperación optimizado para cargas masivas de registros.</span><span class="sxs-lookup"><span data-stu-id="b03d0-112">Use the bulk-logged recovery model.</span></span>  
  
     <span data-ttu-id="b03d0-113">Esta indicación es para bases de datos que utilizan el modelo de recuperación completa.</span><span class="sxs-lookup"><span data-stu-id="b03d0-113">This guideline is for a database that uses the full recovery model.</span></span> <span data-ttu-id="b03d0-114">El modelo de recuperación optimizado para cargas masivas de registros resulta útil al realizar operaciones masivas en una tabla sin indexar (un *montón*).</span><span class="sxs-lookup"><span data-stu-id="b03d0-114">The bulk-logged recovery model is useful when performing bulk operations into an unindexed table (a *heap*).</span></span> <span data-ttu-id="b03d0-115">El uso de la recuperación por medio de registros de operaciones masivas ayuda a evitar que el registro de transacciones se quede sin espacio, ya que este tipo de recuperación no realiza la inserción de filas del registro.</span><span class="sxs-lookup"><span data-stu-id="b03d0-115">Using bulk-logged recovery helps prevent the transaction log from running out of space because bulk-logged recovery does not perform log row inserts.</span></span> <span data-ttu-id="b03d0-116">Para obtener más información sobre el modelo de recuperación optimizado para cargas masivas de registros, vea [Modelos de recuperación &#40;SQL Server&#41;](../backup-restore/recovery-models-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="b03d0-116">For more information about the bulk-logged recovery model, see [Recovery Models &#40;SQL Server&#41;](../backup-restore/recovery-models-sql-server.md).</span></span>  
  
     <span data-ttu-id="b03d0-117">Se recomienda cambiar la base de datos para que use el modelo de recuperación optimizado para cargas masivas de registros inmediatamente antes de la operación de importación masiva.</span><span class="sxs-lookup"><span data-stu-id="b03d0-117">We recommend that you change the database to use the bulk-logged recovery model immediately before the bulk import operation.</span></span> <span data-ttu-id="b03d0-118">Inmediatamente después, debe restablecer la base de datos al modelo de recuperación completa.</span><span class="sxs-lookup"><span data-stu-id="b03d0-118">Immediately afterwards, you should reset the database to the full recovery model.</span></span> <span data-ttu-id="b03d0-119">Para obtener más información, vea [Ver o cambiar el modelo de recuperación de una base de datos &#40;SQL Server&#41;](../backup-restore/view-or-change-the-recovery-model-of-a-database-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="b03d0-119">For more information, see [View or Change the Recovery Model of a Database &#40;SQL Server&#41;](../backup-restore/view-or-change-the-recovery-model-of-a-database-sql-server.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="b03d0-120">más información sobre cómo minimizar el registro durante las operaciones de importación en bloque, vea [Requisitos previos para el registro mínimo durante la importación en bloque](prerequisites-for-minimal-logging-in-bulk-import.md).</span><span class="sxs-lookup"><span data-stu-id="b03d0-120">more information about how to minimize logging during bulk import operations, see [Prerequisites for Minimal Logging in Bulk Import](prerequisites-for-minimal-logging-in-bulk-import.md).</span></span>  
  
-   <span data-ttu-id="b03d0-121">Realice una copia de seguridad después de la importación masiva de datos.</span><span class="sxs-lookup"><span data-stu-id="b03d0-121">Back up after bulk importing data.</span></span>  
  
     <span data-ttu-id="b03d0-122">Para una base de datos que utilice el modelo de recuperación simple, se recomienda realizar una copia de seguridad completa o diferencial cuando finalice la operación de importación masiva.</span><span class="sxs-lookup"><span data-stu-id="b03d0-122">For a database that uses the simple recovery model, we recommend that you take a full or differential backup after the bulk-import operation finishes.</span></span> <span data-ttu-id="b03d0-123">Para obtener más información, vea [Crear una copia de seguridad completa de una base de datos &#40;SQL Server&#41;](../backup-restore/create-a-full-database-backup-sql-server.md) o [Crear una copia de seguridad diferencial de una base de datos &#40;SQL Server&#41;](../backup-restore/create-a-differential-database-backup-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="b03d0-123">For more information, see [Create a Full Database Backup &#40;SQL Server&#41;](../backup-restore/create-a-full-database-backup-sql-server.md) or [Create a Differential Database Backup &#40;SQL Server&#41;](../backup-restore/create-a-differential-database-backup-sql-server.md).</span></span>  
  
     <span data-ttu-id="b03d0-124">Si se utiliza el modelo de recuperación optimizado para cargas masivas de registros o de recuperación completa, basta con una copia de seguridad de registros.</span><span class="sxs-lookup"><span data-stu-id="b03d0-124">For the bulk-logged recovery model or full recovery model, a log backup is enough.</span></span> <span data-ttu-id="b03d0-125">Para obtener más información, vea [Copias de seguridad del registro de transacciones &#40;SQL Server&#41;](../backup-restore/transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="b03d0-125">For more information, see [Transaction Log Backups &#40;SQL Server&#41;](../backup-restore/transaction-log-backups-sql-server.md).</span></span>  
  
-   <span data-ttu-id="b03d0-126">Elimine los índices de las tablas para mejorar el rendimiento de las importaciones masivas de gran tamaño.</span><span class="sxs-lookup"><span data-stu-id="b03d0-126">Drop table indexes to improve performance for large bulk imports.</span></span>  
  
     <span data-ttu-id="b03d0-127">Esta indicación es adecuada cuando vaya a importar una gran cantidad de datos en comparación con la cantidad de datos que ya tiene la tabla.</span><span class="sxs-lookup"><span data-stu-id="b03d0-127">This guideline is for when you are importing a large amount of data compared to the amount of data that is already in the table.</span></span> <span data-ttu-id="b03d0-128">En este caso, la eliminación de los índices de la tabla antes de realizar la operación de importación masiva puede aumentar el rendimiento considerablemente.</span><span class="sxs-lookup"><span data-stu-id="b03d0-128">In this case, dropping the indexes from the table before you perform the bulk-import operation can significantly increase performance.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="b03d0-129">Sin embargo, si va a cargar una cantidad pequeña de datos en comparición con la cantidad de datos ya incluidos en la tabla, quitar los índices es contraproducente.</span><span class="sxs-lookup"><span data-stu-id="b03d0-129">If you are loading a small amount of data compared to the amount of data already in the table, dropping the indexes is counterproductive.</span></span> <span data-ttu-id="b03d0-130">El tiempo necesario para volver a crear los índices puede ser mayor que el tiempo que se ahorra durante la operación de importación masiva.</span><span class="sxs-lookup"><span data-stu-id="b03d0-130">The time required to rebuild the indexes might be longer than the time saved during the bulk-import operation.</span></span>  
  
-   <span data-ttu-id="b03d0-131">Busque y quite los caracteres ocultos del archivo de datos.</span><span class="sxs-lookup"><span data-stu-id="b03d0-131">Find and remove hidden characters in the data file.</span></span>  
  
     <span data-ttu-id="b03d0-132">Muchas herramientas y editores de texto muestran los caracteres ocultos que suelen encontrarse al final del archivo de datos.</span><span class="sxs-lookup"><span data-stu-id="b03d0-132">Many utilities and text editors display hidden characters, which are usually at the end of the data file.</span></span> <span data-ttu-id="b03d0-133">Durante una operación de importación masiva, los caracteres ocultos en un archivo de datos ASCII pueden producir  problemas que den como resultado un error de tipo "se encontró un valor nulo inesperado".</span><span class="sxs-lookup"><span data-stu-id="b03d0-133">During a bulk-import operation, hidden characters in an ASCII data file can cause problems that cause an error of "unexpected null found".</span></span> <span data-ttu-id="b03d0-134">La búsqueda y eliminación de todos los caracteres ocultos debería solucionar el problema.</span><span class="sxs-lookup"><span data-stu-id="b03d0-134">Finding and removing all the hidden characters should help prevent this problem.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b03d0-135">Consulte también</span><span class="sxs-lookup"><span data-stu-id="b03d0-135">See Also</span></span>  
 <span data-ttu-id="b03d0-136">[Importar y exportar datos en bloque con la utilidad bcp &#40;SQL Server&#41;](import-and-export-bulk-data-by-using-the-bcp-utility-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b03d0-136">[Import and Export Bulk Data by Using the bcp Utility &#40;SQL Server&#41;](import-and-export-bulk-data-by-using-the-bcp-utility-sql-server.md) </span></span>  
 <span data-ttu-id="b03d0-137">[Importación en bloque de datos mediante las instrucciones BULK INSERT u OPENROWSET&#40;BULK...&#41; &#40;SQL Server&#41;](import-bulk-data-by-using-bulk-insert-or-openrowset-bulk-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b03d0-137">[Import Bulk Data by Using BULK INSERT or OPENROWSET&#40;BULK...&#41; &#40;SQL Server&#41;](import-bulk-data-by-using-bulk-insert-or-openrowset-bulk-sql-server.md) </span></span>  
 <span data-ttu-id="b03d0-138">[bcp (utilidad)](../../tools/bcp-utility.md) </span><span class="sxs-lookup"><span data-stu-id="b03d0-138">[bcp Utility](../../tools/bcp-utility.md) </span></span>  
 <span data-ttu-id="b03d0-139">[BULK INSERT &#40;Transact-SQL&#41;](/sql/t-sql/statements/bulk-insert-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="b03d0-139">[BULK INSERT &#40;Transact-SQL&#41;](/sql/t-sql/statements/bulk-insert-transact-sql) </span></span>  
 <span data-ttu-id="b03d0-140">[Formatos de datos para importación en bloque o exportación masiva &#40;SQL Server&#41;](data-formats-for-bulk-import-or-bulk-export-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b03d0-140">[Data Formats for Bulk Import or Bulk Export &#40;SQL Server&#41;](data-formats-for-bulk-import-or-bulk-export-sql-server.md) </span></span>  
 [<span data-ttu-id="b03d0-141">OPENROWSET &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="b03d0-141">OPENROWSET &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/functions/openrowset-transact-sql)  
  
  
