---
title: Sesiones de SQL Server Extended Events | Microsoft Docs
ms.custom: ''
ms.date: 05/26/2020
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xevents
ms.topic: conceptual
helpviewer_keywords:
- xe
- sessions
- extend events [SQL Server]
ms.assetid: c3c92544-351a-4bce-a06a-1f2a47e494e9
author: rothja
ms.author: jroth
ms.openlocfilehash: 3aab8c57a578ea60829514b575e168bc5a1dd8c7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87662920"
---
# <a name="sql-server-extended-events-sessions"></a><span data-ttu-id="d15ac-102">SQL Server Extended Events Sessions</span><span class="sxs-lookup"><span data-stu-id="d15ac-102">SQL Server Extended Events Sessions</span></span>
  <span data-ttu-id="d15ac-103">Una sesión de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Extended Events se crea en el proceso de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que hospeda el motor de Extended Events.</span><span class="sxs-lookup"><span data-stu-id="d15ac-103">A [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Extended Events session is created in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] process hosting the Extended Events engine.</span></span> <span data-ttu-id="d15ac-104">Los aspectos siguientes de una sesión de Extended Events proporcionan un contexto para entender la infraestructura de Extended Events y el procesamiento general que se produce:</span><span class="sxs-lookup"><span data-stu-id="d15ac-104">The following aspects of an Extended Events session provide a context for understanding the Extended Events infrastructure and the general processing that takes place:</span></span>  
  
-   <span data-ttu-id="d15ac-105">Estados de sesión.</span><span class="sxs-lookup"><span data-stu-id="d15ac-105">Session states.</span></span> <span data-ttu-id="d15ac-106">Los distintos estados en que se encuentra una sesión de Extended Events cuando se ejecutan las instrucciones CREATE EVENT SESSION y ALTER EVENT SESSION.</span><span class="sxs-lookup"><span data-stu-id="d15ac-106">The different states that an Extended Events session is in when CREATE EVENT SESSION and ALTER EVENT SESSION statements are executed.</span></span>  
  
-   <span data-ttu-id="d15ac-107">Contenido y características de la sesión.</span><span class="sxs-lookup"><span data-stu-id="d15ac-107">Session content and characteristics.</span></span> <span data-ttu-id="d15ac-108">Contenido de una sesión de Extended Events, por ejemplo destinos y eventos, y cómo estos objetos se relacionan en una sesión o entre sesiones.</span><span class="sxs-lookup"><span data-stu-id="d15ac-108">The content of an Extended Events session, such as targets and events, and how these objects are related in a session or between sessions.</span></span>  
  
## <a name="session-states"></a><span data-ttu-id="d15ac-109">Estados de sesión</span><span class="sxs-lookup"><span data-stu-id="d15ac-109">Session States</span></span>  
 <span data-ttu-id="d15ac-110">La ilustración siguiente muestra los diversos estados de una sesión de Extended Events.</span><span class="sxs-lookup"><span data-stu-id="d15ac-110">The following illustration shows the various states of an Extended Events session.</span></span>  

<span data-ttu-id="d15ac-111">![Estado de la sesión de eventos extendidos](../../database-engine/media/xesessionstate.png "Estado de la sesión de eventos extendidos")</span><span class="sxs-lookup"><span data-stu-id="d15ac-111">![Extended event session state](../../database-engine/media/xesessionstate.png "Extended event session state")</span></span>

 <span data-ttu-id="d15ac-112">En la figura anterior, observe que el estado de la sesión cambia cuando se emiten los distintos comandos DDL para una sesión de evento.</span><span class="sxs-lookup"><span data-stu-id="d15ac-112">Referring to the preceding figure, note that session state changes as the different DDL commands are issued for an event session.</span></span> <span data-ttu-id="d15ac-113">En la tabla siguiente se describen estos cambios de estado.</span><span class="sxs-lookup"><span data-stu-id="d15ac-113">The following table describes these changes in state.</span></span>  
  
|<span data-ttu-id="d15ac-114">Etiqueta de la ilustración</span><span class="sxs-lookup"><span data-stu-id="d15ac-114">Illustration label</span></span>|<span data-ttu-id="d15ac-115">Instrucción DDL</span><span class="sxs-lookup"><span data-stu-id="d15ac-115">DDL statement</span></span>|<span data-ttu-id="d15ac-116">Descripción</span><span class="sxs-lookup"><span data-stu-id="d15ac-116">Description</span></span>|  
|------------------------|-------------------|-----------------|  
|<span data-ttu-id="d15ac-117">Crear</span><span class="sxs-lookup"><span data-stu-id="d15ac-117">Create</span></span>|<span data-ttu-id="d15ac-118">CREATE EVENT SESSION</span><span class="sxs-lookup"><span data-stu-id="d15ac-118">CREATE EVENT SESSION</span></span>|<span data-ttu-id="d15ac-119">El proceso de host crea un objeto de sesión que contiene los metadatos proporcionados por CREATE EVENT SESSION.</span><span class="sxs-lookup"><span data-stu-id="d15ac-119">The host process creates a session object that contains the metadata provided by CREATE EVENT SESSION.</span></span> <span data-ttu-id="d15ac-120">El proceso de host valida la definición de la sesión, valida el nivel del permiso de usuario y almacena los metadatos en la base de datos maestra.</span><span class="sxs-lookup"><span data-stu-id="d15ac-120">The host process validates the session definition, validates the user permission level, and stores the metadata in the master database.</span></span> <span data-ttu-id="d15ac-121">En este punto la sesión no está activa.</span><span class="sxs-lookup"><span data-stu-id="d15ac-121">At this point the session is not active.</span></span>|  
|<span data-ttu-id="d15ac-122">Modificar</span><span class="sxs-lookup"><span data-stu-id="d15ac-122">Alter</span></span>|<span data-ttu-id="d15ac-123">ALTER EVENT SESSION, STATE=START</span><span class="sxs-lookup"><span data-stu-id="d15ac-123">ALTER EVENT SESSION, STATE=START</span></span>|<span data-ttu-id="d15ac-124">El proceso de host inicia la sesión.</span><span class="sxs-lookup"><span data-stu-id="d15ac-124">The host process starts the session.</span></span> <span data-ttu-id="d15ac-125">El proceso de host lee los metadatos almacenados, valida la definición de la sesión, comprueba el nivel del permiso de usuario y crea la sesión.</span><span class="sxs-lookup"><span data-stu-id="d15ac-125">The host process reads the stored metadata, validates the session definition, verifies the level of user permission level, and creates the session.</span></span> <span data-ttu-id="d15ac-126">Se cargan los objetos de sesión, como eventos y destinos, y el control de eventos está activo.</span><span class="sxs-lookup"><span data-stu-id="d15ac-126">Session objects, such as events and targets, are loaded and event handling is active.</span></span>|  
|<span data-ttu-id="d15ac-127">Modificar</span><span class="sxs-lookup"><span data-stu-id="d15ac-127">Alter</span></span>|<span data-ttu-id="d15ac-128">ALTER EVENT SESSION, STATE=STOP</span><span class="sxs-lookup"><span data-stu-id="d15ac-128">ALTER EVENT SESSION, STATE=STOP</span></span>|<span data-ttu-id="d15ac-129">El proceso de host detiene la sesión activa pero conserva los metadatos.</span><span class="sxs-lookup"><span data-stu-id="d15ac-129">The host process stops the active session but retains the metadata.</span></span>|  
|<span data-ttu-id="d15ac-130">Anular</span><span class="sxs-lookup"><span data-stu-id="d15ac-130">Drop</span></span>|<span data-ttu-id="d15ac-131">DROP EVENT SESSION</span><span class="sxs-lookup"><span data-stu-id="d15ac-131">DROP EVENT SESSION</span></span>|<span data-ttu-id="d15ac-132">Dependiendo de que la sesión esté activa o no, Drop (DROP SESSION) eliminará los metadatos y cerrará la sesión activa, o eliminará los metadatos de la sesión.</span><span class="sxs-lookup"><span data-stu-id="d15ac-132">Depending on whether or not the session is active, Drop (DROP SESSION) will delete the metadata and close the active session, or delete the session metadata.</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="d15ac-133">ALTER EVENT SESSION y DROP EVENT SESSION se pueden aplicar a los metadatos, o a una sesión activa y los metadatos.</span><span class="sxs-lookup"><span data-stu-id="d15ac-133">Both ALTER EVENT SESSION and DROP EVENT SESSION can be applied to the metadata or to an active session and the metadata.</span></span>  
  
## <a name="session-content-and-characteristics"></a><span data-ttu-id="d15ac-134">Contenido y características de la sesión</span><span class="sxs-lookup"><span data-stu-id="d15ac-134">Session Content and Characteristics</span></span>  
 <span data-ttu-id="d15ac-135">Las sesiones de Extended Events tienen límites implícitos en cuanto que la configuración de una sesión no cambia la configuración de otra.</span><span class="sxs-lookup"><span data-stu-id="d15ac-135">Extended Event sessions have implied boundaries in that the configuration of one session does not change the configuration of another session.</span></span> <span data-ttu-id="d15ac-136">Sin embargo, estos límites no impiden que un evento o destino se utilice en más de una sesión.</span><span class="sxs-lookup"><span data-stu-id="d15ac-136">However, these boundaries do not prevent an event or target from being used in more than one session.</span></span>  
  
 <span data-ttu-id="d15ac-137">En la siguiente ilustración se muestra el contenido de la sesión y la relación entre los paquetes y las sesiones.</span><span class="sxs-lookup"><span data-stu-id="d15ac-137">The following illustration shows session content and the relationship between packages and sessions.</span></span>  
  
 <span data-ttu-id="d15ac-138">![Coexistencia y uso compartido de objetos en las sesiones.](../../database-engine/media/xesessions.gif "Coexistencia y uso compartido de objetos en las sesiones.")</span><span class="sxs-lookup"><span data-stu-id="d15ac-138">![Object co-existance and sharing in sessions.](../../database-engine/media/xesessions.gif "Object co-existance and sharing in sessions.")</span></span>  
  
 <span data-ttu-id="d15ac-139">En la ilustración anterior, observe que:</span><span class="sxs-lookup"><span data-stu-id="d15ac-139">Referring to the preceding illustration, note that:</span></span>  
  
-   <span data-ttu-id="d15ac-140">La asignación entre los objetos de paquete y las sesiones es de varios a varios, lo que significa que un objeto puede aparecer en varias sesiones, y una sesión puede contener varios objetos.</span><span class="sxs-lookup"><span data-stu-id="d15ac-140">The mapping between package objects and sessions is many to many, which means that an object can appear in several sessions, and a session can contain several objects.</span></span>  
  
-   <span data-ttu-id="d15ac-141">El mismo evento (Event1) o destino (Target1) puede estar habilitado en más de una sesión.</span><span class="sxs-lookup"><span data-stu-id="d15ac-141">The same event (Event 1) or target (Target 1) can be enabled in more than one session.</span></span>  
  
 <span data-ttu-id="d15ac-142">Las sesiones tienen las características siguientes:</span><span class="sxs-lookup"><span data-stu-id="d15ac-142">Sessions have the following characteristics:</span></span>  
  
-   <span data-ttu-id="d15ac-143">Las acciones y predicados se enlazan a los eventos sesión por sesión.</span><span class="sxs-lookup"><span data-stu-id="d15ac-143">Actions and predicates are bound to events on a per-session basis.</span></span> <span data-ttu-id="d15ac-144">Si tiene el evento 1 en la sesión A con la acción 1 y el predicado Z, ello no impedirá en modo alguno tener el evento 1 en la sesión B con la acción 2 y la acción 3 sin predicado.</span><span class="sxs-lookup"><span data-stu-id="d15ac-144">If you have Event 1 in Session A with Action 1 and Predicate Z, this will not in any way affect having Event 1 in Session B with Action 2 and Action 3 with no predicate.</span></span>  
  
-   <span data-ttu-id="d15ac-145">Las directivas están asociadas a las sesiones para administrar el almacenamiento en búfer y el envío, y el seguimiento de causalidad.</span><span class="sxs-lookup"><span data-stu-id="d15ac-145">Policies are attached to sessions to handle buffering and dispatch, and causality tracking.</span></span>  
  
 <span data-ttu-id="d15ac-146">**Almacenamiento en búfer y envío**</span><span class="sxs-lookup"><span data-stu-id="d15ac-146">**Buffering and dispatch**</span></span>  
  
 <span data-ttu-id="d15ac-147">El almacenamiento en búfer hace referencia a cómo se almacenan los datos de eventos mientras se está ejecutando una sesión de eventos.</span><span class="sxs-lookup"><span data-stu-id="d15ac-147">Buffering refers to how event data is stored while an event session is running.</span></span>  <span data-ttu-id="d15ac-148">Las directivas de almacenamiento en búfer especifican cuánta memoria se debe utilizar para los datos de eventos y la directiva de pérdida para los eventos.</span><span class="sxs-lookup"><span data-stu-id="d15ac-148">Buffering policies specify how much memory to use for event data, and the loss policy for the events.</span></span> <span data-ttu-id="d15ac-149">El envío hace referencia a la cantidad de tiempo que los eventos estarán en los búferes antes de enviarse a los destinos para su procesamiento.</span><span class="sxs-lookup"><span data-stu-id="d15ac-149">Dispatch refers to the amount of time events will stay in buffers before being served to targets for processing.</span></span>  
  
 <span data-ttu-id="d15ac-150">**Seguimiento de causalidad**</span><span class="sxs-lookup"><span data-stu-id="d15ac-150">**Causality tracking**</span></span>  
  
 <span data-ttu-id="d15ac-151">El seguimiento de causalidad proporciona la capacidad de realizar el seguimiento de trabajo por varias tareas.</span><span class="sxs-lookup"><span data-stu-id="d15ac-151">Causality tracking provides the ability to track work across multiple tasks.</span></span> <span data-ttu-id="d15ac-152">Cuando el seguimiento de causalidad está habilitado, cada evento que se activa tiene un Id. de actividad único en todo el sistema.</span><span class="sxs-lookup"><span data-stu-id="d15ac-152">When causality tracking is enabled, each event fired has a unique activity ID across the system.</span></span> <span data-ttu-id="d15ac-153">El Id. de actividad es la combinación de un valor GUID constante en todos los eventos de una tarea y un número de secuencia que se incrementa cada vez que se activa un evento.</span><span class="sxs-lookup"><span data-stu-id="d15ac-153">The activity ID is a combination of a GUID value that remains constant across all events for a task, and a sequence number that is incremented each time an event is fired.</span></span> <span data-ttu-id="d15ac-154">Cuando una tarea produce trabajo que se debe realizar en otra, el identificador de actividad del elemento principal se envía a la tarea secundaria.</span><span class="sxs-lookup"><span data-stu-id="d15ac-154">When one task causes work to be done on another, the activity ID of the parent is sent to the child task.</span></span> <span data-ttu-id="d15ac-155">La tarea secundaria genera el identificador de actividad del elemento principal la primera vez que se activa un evento.</span><span class="sxs-lookup"><span data-stu-id="d15ac-155">The child task outputs the parent's activity ID the first time it fires an event.</span></span>  
  
 <span data-ttu-id="d15ac-156">La arquitectura de Extended Events constituye un sistema flexible que permite utilizar diversos objetos conjuntamente para resolver problemas concretos.</span><span class="sxs-lookup"><span data-stu-id="d15ac-156">The Extended Events architecture provides a flexible system that allows a variety of objects to be used together to solve specific problems.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d15ac-157">Consulte también</span><span class="sxs-lookup"><span data-stu-id="d15ac-157">See Also</span></span>  
 [<span data-ttu-id="d15ac-158">Eventos extendidos</span><span class="sxs-lookup"><span data-stu-id="d15ac-158">Extended Events</span></span>](extended-events.md)  
  
  
