---
title: Campos de descriptor de parámetros con valores de tabla | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
helpviewer_keywords:
- table-valued parameters (ODBC), descriptor fields
ms.assetid: 4e009eff-c156-4d63-abcf-082ddd304de2
author: rothja
ms.author: jroth
ms.openlocfilehash: 5365229aed0bc46315a7e6db5448bee6963b23fc
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87745277"
---
# <a name="table-valued-parameter-descriptor-fields"></a><span data-ttu-id="5efbc-102">Campos de descriptor de parámetros con valores de tabla</span><span class="sxs-lookup"><span data-stu-id="5efbc-102">Table-Valued Parameter Descriptor Fields</span></span>
  <span data-ttu-id="5efbc-103">La compatibilidad con los parámetros con valores de tabla incluye nuevos campos específicos de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en descriptores de parámetros de aplicación ODBC (APD) y descriptores de parámetros de implementación (IPD).</span><span class="sxs-lookup"><span data-stu-id="5efbc-103">Support for table-valued parameters includes new [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-specific fields in ODBC application parameter descriptors (APDs) and implementation parameter descriptors (IPDs).</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="5efbc-104">Observaciones</span><span class="sxs-lookup"><span data-stu-id="5efbc-104">Remarks</span></span>  
  
|<span data-ttu-id="5efbc-105">Nombre</span><span class="sxs-lookup"><span data-stu-id="5efbc-105">Name</span></span>|<span data-ttu-id="5efbc-106">Location</span><span class="sxs-lookup"><span data-stu-id="5efbc-106">Location</span></span>|<span data-ttu-id="5efbc-107">Tipo</span><span class="sxs-lookup"><span data-stu-id="5efbc-107">Type</span></span>|<span data-ttu-id="5efbc-108">Descripción</span><span class="sxs-lookup"><span data-stu-id="5efbc-108">Description</span></span>|  
|----------|--------------|----------|-----------------|  
|<span data-ttu-id="5efbc-109">SQL_CA_SS_TYPE_NAME</span><span class="sxs-lookup"><span data-stu-id="5efbc-109">SQL_CA_SS_TYPE_NAME</span></span>|<span data-ttu-id="5efbc-110">IPD</span><span class="sxs-lookup"><span data-stu-id="5efbc-110">IPD</span></span>|<span data-ttu-id="5efbc-111">SQLTCHAR\*</span><span class="sxs-lookup"><span data-stu-id="5efbc-111">SQLTCHAR\*</span></span>|<span data-ttu-id="5efbc-112">Nombre del tipo de servidor del parámetro con valores de tabla.</span><span class="sxs-lookup"><span data-stu-id="5efbc-112">The server type name of the table-valued parameter.</span></span><br /><br /> <span data-ttu-id="5efbc-113">Cuando se especifica un nombre de tipo de parámetro con valores de tabla en una llamada a SQLBindParameter, siempre debe especificarse como un valor Unicode, incluso en aplicaciones compiladas como aplicaciones ANSI.</span><span class="sxs-lookup"><span data-stu-id="5efbc-113">When a table-valued parameter type name is specified on a call to SQLBindParameter, it must always be specified as a Unicode value, even in applications that are built as ANSI applications.</span></span> <span data-ttu-id="5efbc-114">El valor usado para el parámetro *StrLen_or_IndPtr* debe ser SQL_NTS o la longitud de la cadena del nombre multiplicado por SIZEOF (WCHAR).</span><span class="sxs-lookup"><span data-stu-id="5efbc-114">The value used for the parameter *StrLen_or_IndPtr* should be either SQL_NTS or the string length of the name multiplied by sizeof(WCHAR).</span></span><br /><br /> <span data-ttu-id="5efbc-115">Cuando se especifica un nombre de tipo de parámetro con valores de tabla a través de SQLSetDescField, se puede especificar mediante un literal que se ajuste a la manera en que se compila la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5efbc-115">When a table-valued parameter type name is specified via SQLSetDescField, it can be specified by using a literal that conforms to the way the application is built.</span></span> <span data-ttu-id="5efbc-116">El administrador de controladores ODBC realizará cualquier conversión Unicode que sea necesaria.</span><span class="sxs-lookup"><span data-stu-id="5efbc-116">The ODBC Driver Manager will perform any required Unicode conversion.</span></span>|  
|<span data-ttu-id="5efbc-117">SQL_CA_SS_TYPE_CATALOG_NAME (solo lectura)</span><span class="sxs-lookup"><span data-stu-id="5efbc-117">SQL_CA_SS_TYPE_CATALOG_NAME (read only)</span></span>|<span data-ttu-id="5efbc-118">IPD</span><span class="sxs-lookup"><span data-stu-id="5efbc-118">IPD</span></span>|<span data-ttu-id="5efbc-119">SQLTCHAR\*</span><span class="sxs-lookup"><span data-stu-id="5efbc-119">SQLTCHAR\*</span></span>|<span data-ttu-id="5efbc-120">Catálogo donde se define el tipo.</span><span class="sxs-lookup"><span data-stu-id="5efbc-120">The catalog where the type is defined.</span></span>|  
|<span data-ttu-id="5efbc-121">SQL_CA_SS_TYPE_SCHEMA_NAME</span><span class="sxs-lookup"><span data-stu-id="5efbc-121">SQL_CA_SS_TYPE_SCHEMA_NAME</span></span>|<span data-ttu-id="5efbc-122">IPD</span><span class="sxs-lookup"><span data-stu-id="5efbc-122">IPD</span></span>|<span data-ttu-id="5efbc-123">SQLTCHAR\*</span><span class="sxs-lookup"><span data-stu-id="5efbc-123">SQLTCHAR\*</span></span>|<span data-ttu-id="5efbc-124">Esquema donde se define el tipo.</span><span class="sxs-lookup"><span data-stu-id="5efbc-124">The schema where the type is defined.</span></span>|  
  
 <span data-ttu-id="5efbc-125">Las aplicaciones no deben establecer SQL_CA_SS_TYPE_CATALOG_NAME en parámetros con valores de tabla.</span><span class="sxs-lookup"><span data-stu-id="5efbc-125">Applications must not set SQL_CA_SS_TYPE_CATALOG_NAME for table-valued parameters.</span></span> <span data-ttu-id="5efbc-126">Si se establece, se devolverá SQL_ERROR y se registrará un error de diagnóstico con SQLSTATE = HY091 y el mensaje "identificador de campo descriptor no válido".</span><span class="sxs-lookup"><span data-stu-id="5efbc-126">Doing so will return a SQL_ERROR and log a diagnostic record with SQLSTATE = HY091 and the message "Invalid descriptor field identifier".</span></span>  
  
 <span data-ttu-id="5efbc-127">Cuando el enfoque del parámetro se establece en un parámetro con valores de tabla, se aplican los siguientes campos de encabezado de descriptor y atributos de instrucción a los parámetros con valores de tabla:</span><span class="sxs-lookup"><span data-stu-id="5efbc-127">The following statement attributes and descriptor header fields apply to table-valued parameters when the parameter focus is set to a table-valued parameter:</span></span>  
  
|<span data-ttu-id="5efbc-128">Nombre</span><span class="sxs-lookup"><span data-stu-id="5efbc-128">Name</span></span>|<span data-ttu-id="5efbc-129">Location</span><span class="sxs-lookup"><span data-stu-id="5efbc-129">Location</span></span>|<span data-ttu-id="5efbc-130">Tipo</span><span class="sxs-lookup"><span data-stu-id="5efbc-130">Type</span></span>|<span data-ttu-id="5efbc-131">Descripción</span><span class="sxs-lookup"><span data-stu-id="5efbc-131">Description</span></span>|  
|----------|--------------|----------|-----------------|  
|<span data-ttu-id="5efbc-132">SQL_ATTR_PARAMSET_SIZE</span><span class="sxs-lookup"><span data-stu-id="5efbc-132">SQL_ATTR_PARAMSET_SIZE</span></span><br /><br /> <span data-ttu-id="5efbc-133">(Equivalente a SQL_DESC_ARRAY_SIZE en el APD.)</span><span class="sxs-lookup"><span data-stu-id="5efbc-133">(This is equivalent to SQL_DESC_ARRAY_SIZE in the APD.)</span></span>|<span data-ttu-id="5efbc-134">APD</span><span class="sxs-lookup"><span data-stu-id="5efbc-134">APD</span></span>|<span data-ttu-id="5efbc-135">SQLUINTEGER</span><span class="sxs-lookup"><span data-stu-id="5efbc-135">SQLUINTEGER</span></span>|<span data-ttu-id="5efbc-136">Tamaño de matriz de las matrices de búfer de un parámetro con valores de tabla.</span><span class="sxs-lookup"><span data-stu-id="5efbc-136">The array size of the buffer arrays for a table-valued parameter.</span></span> <span data-ttu-id="5efbc-137">Éste es el número máximo de filas que los búferes pueden incluir o el tamaño de los búferes en filas; el propio valor de parámetro con valores de tabla puede tener más o menos filas de las que pueden incluir los búferes.</span><span class="sxs-lookup"><span data-stu-id="5efbc-137">This is the maximum number of rows the buffers will accommodate or the size of the buffers in rows; the table-valued parameter value itself might have more or fewer rows than the buffers can hold.</span></span> <span data-ttu-id="5efbc-138">El valor predeterminado es 1.</span><span class="sxs-lookup"><span data-stu-id="5efbc-138">Default is 1.</span></span> <span data-ttu-id="5efbc-139">**Nota:**  Si SQL_SOPT_SS_PARAM_FOCUS se establece en su valor predeterminado de 0, SQL_ATTR_PARAMSET_SIZE hace referencia a la instrucción y especifica el número de conjuntos de parámetros.</span><span class="sxs-lookup"><span data-stu-id="5efbc-139">**Note:**  If SQL_SOPT_SS_PARAM_FOCUS is set to its default value of 0, SQL_ATTR_PARAMSET_SIZE refers to the statement and specifies the number of parameter sets.</span></span> <span data-ttu-id="5efbc-140">Si SQL_SOPT_SS_PARAM_FOCUS se establece en el ordinal de un parámetro con valores de tabla, hace referencia al parámetro con valores de tabla y especifica el número de filas por conjunto de parámetros del parámetro con valores de tabla.</span><span class="sxs-lookup"><span data-stu-id="5efbc-140">If SQL_SOPT_SS_PARAM_FOCUS is set to the ordinal of a table-valued parameter, it refers to the table-valued parameter and specifies the number of rows per parameter set for the table-valued parameter.</span></span>|  
|<span data-ttu-id="5efbc-141">SQL_ATTR_PARAM _BIND_TYPE</span><span class="sxs-lookup"><span data-stu-id="5efbc-141">SQL_ATTR_PARAM _BIND_TYPE</span></span>|<span data-ttu-id="5efbc-142">APD</span><span class="sxs-lookup"><span data-stu-id="5efbc-142">APD</span></span>|<span data-ttu-id="5efbc-143">SQLINTEGER</span><span class="sxs-lookup"><span data-stu-id="5efbc-143">SQLINTEGER</span></span>|<span data-ttu-id="5efbc-144">El valor predeterminado es SQL_PARAM_BIND_BY_COLUMN.</span><span class="sxs-lookup"><span data-stu-id="5efbc-144">The default is SQL_PARAM_BIND_BY_COLUMN.</span></span><br /><br /> <span data-ttu-id="5efbc-145">Para seleccionar el enlace de modo de fila, este campo se establece en la longitud de la estructura o en una instancia de un búfer que se enlazará a un conjunto de filas de parámetro con valores de tabla.</span><span class="sxs-lookup"><span data-stu-id="5efbc-145">To select row-wise binding, this field is set to the length of the structure or an instance of a buffer that will be bound to a set of table-valued parameter rows.</span></span> <span data-ttu-id="5efbc-146">Esta longitud debe incluir el espacio para todas las columnas enlazadas y cualquier relleno de la estructura o búfer.</span><span class="sxs-lookup"><span data-stu-id="5efbc-146">This length must include space for all of the bound columns and any padding of the structure or buffer.</span></span> <span data-ttu-id="5efbc-147">De esta forma se garantiza que, cuando la dirección de una columna enlazada se incrementa con la longitud especificada, el resultado señalará al principio de la misma columna en la fila siguiente.</span><span class="sxs-lookup"><span data-stu-id="5efbc-147">This ensures that when the address of a bound column is incremented with the specified length, the result will point to the beginning of the same column in the next row.</span></span> <span data-ttu-id="5efbc-148">Cuando se utiliza el operador `sizeof` en ANSI C, se garantiza este comportamiento.</span><span class="sxs-lookup"><span data-stu-id="5efbc-148">When using the `sizeof` operator in ANSI C, this behavior is guaranteed.</span></span>|  
|<span data-ttu-id="5efbc-149">SQL_ATTR_PARAM_BIND_OFFSET_PTR</span><span class="sxs-lookup"><span data-stu-id="5efbc-149">SQL_ATTR_PARAM_BIND_OFFSET_PTR</span></span>|<span data-ttu-id="5efbc-150">APD</span><span class="sxs-lookup"><span data-stu-id="5efbc-150">APD</span></span>|<span data-ttu-id="5efbc-151">SQLINTEGER\*</span><span class="sxs-lookup"><span data-stu-id="5efbc-151">SQLINTEGER\*</span></span>|<span data-ttu-id="5efbc-152">El valor predeterminado es un puntero NULL.</span><span class="sxs-lookup"><span data-stu-id="5efbc-152">The default is a null pointer.</span></span><br /><br /> <span data-ttu-id="5efbc-153">Si este campo es no NULL, el controlador elimina las referencias el puntero, agrega el valor sin referencia a cada uno de los campos aplazados del registro de descriptor (SQL_DESC_DATA_PTR, SQL_DESC_INDICATOR_PTR y SQL_DESC_OCTET_LENGTH_PTR) y utiliza los nuevos valores de puntero para tener acceso a los valores de datos.</span><span class="sxs-lookup"><span data-stu-id="5efbc-153">If this field is non-null, the driver dereferences the pointer, adds the dereferenced value to each of the deferred fields in the descriptor record (SQL_DESC_DATA_PTR, SQL_DESC_INDICATOR_PTR, and SQL_DESC_OCTET_LENGTH_PTR), and uses the new pointer values to access data values.</span></span>|  
  
 <span data-ttu-id="5efbc-154">Estos campos solo son válidos con parámetros con valores de tabla y se omiten en otros tipos de datos.</span><span class="sxs-lookup"><span data-stu-id="5efbc-154">These fields are only valid with table-valued parameters, and are ignored for other data types.</span></span>  
  
 <span data-ttu-id="5efbc-155">SQL_CA_SS_TYPE_NAME es opcional para las llamadas a procedimientos almacenados.</span><span class="sxs-lookup"><span data-stu-id="5efbc-155">SQL_CA_SS_TYPE_NAME is optional for stored procedure calls.</span></span> <span data-ttu-id="5efbc-156">Se debe especificar en instrucciones SQL que no son llamadas a procedimientos para permitir que el servidor determine el tipo de parámetro con valores de tabla.</span><span class="sxs-lookup"><span data-stu-id="5efbc-156">It must be specified for SQL statements that are not procedure calls to enable the server to determine the type of the table-valued parameter.</span></span>  
  
 <span data-ttu-id="5efbc-157">Si se necesita el nombre de tipo y el tipo de tabla del parámetro con valores de tabla se define en un esquema diferente del procedimiento almacenado, se debe especificar SQL_CA_SS_TYPE_SCHEMA_NAME en el descriptor del parámetro de implementación (IPD).</span><span class="sxs-lookup"><span data-stu-id="5efbc-157">If the type name is reqired and the table type for the table-valued parameter is defined in a different schema than the stored procedure, SQL_CA_SS_TYPE_SCHEMA_NAME must be specified in the implementation parameter descriptor (IPD).</span></span> <span data-ttu-id="5efbc-158">Si no se especifica, el servidor no podrá determinar el tipo del parámetro con valores de tabla.</span><span class="sxs-lookup"><span data-stu-id="5efbc-158">If not, the server will not be able to determine the type of the table-valued parameter.</span></span> <span data-ttu-id="5efbc-159">Esto producirá un error al llamar a SQLExecute o SQLExecDirect.</span><span class="sxs-lookup"><span data-stu-id="5efbc-159">This will result in an error when you call SQLExecute or SQLExecDirect.</span></span> <span data-ttu-id="5efbc-160">El error tendrá SQLSTATE = 07006 y el mensaje "Infracción del atributo de tipo de datos restringido".</span><span class="sxs-lookup"><span data-stu-id="5efbc-160">The error will have SQLSTATE= 07006 and the message "Restricted data type attribute violation".</span></span>  
  
 <span data-ttu-id="5efbc-161">Las columnas de parámetros con valores de tabla pueden utilizar el enlace de modo de fila o de modo de columna.</span><span class="sxs-lookup"><span data-stu-id="5efbc-161">Table-valued parameter columns can use either row-wise or column-wise binding.</span></span> <span data-ttu-id="5efbc-162">El valor predeterminado es el enlace de modo de columna.</span><span class="sxs-lookup"><span data-stu-id="5efbc-162">The default is column-wise binding.</span></span> <span data-ttu-id="5efbc-163">El enlace de modo de fila se puede especificar estableciendo SQL_ATTR_PARAM_BIND_TYPE y SQL_ATTR_ PARAM_BIND_OFFSET_PTR.</span><span class="sxs-lookup"><span data-stu-id="5efbc-163">Row-wise binding can be specified by setting SQL_ATTR_PARAM_BIND_TYPE and SQL_ATTR_ PARAM_BIND_OFFSET_PTR.</span></span> <span data-ttu-id="5efbc-164">Es similar al enlace de modo de fila de columnas y parámetros.</span><span class="sxs-lookup"><span data-stu-id="5efbc-164">This is analogous to row-wise binding of columns and parameters.</span></span>  
  
 <span data-ttu-id="5efbc-165">SQL_CA_SS_TYPE_CATALOG_NAME y SQL_CA_SS_TYPE_SCHEMA_NAME también pueden utilizarse para recuperar el catálogo y el esquema asociados a parámetros de tipo definidos por el usuario CLR.</span><span class="sxs-lookup"><span data-stu-id="5efbc-165">SQL_CA_SS_TYPE_CATALOG_NAME and SQL_CA_SS_TYPE_SCHEMA_NAME can also be used to retrieve the catalog and schema associated with CLR user-defined type parameters.</span></span> <span data-ttu-id="5efbc-166">Éstas son las alternativas a los atributos de esquema y catálogo específicos del tipo existentes para estos tipos.</span><span class="sxs-lookup"><span data-stu-id="5efbc-166">These are alternatives to the existing type specific catalog schema attributes for these types.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5efbc-167">Consulte también</span><span class="sxs-lookup"><span data-stu-id="5efbc-167">See Also</span></span>  
 [<span data-ttu-id="5efbc-168">Parámetros con valores de tabla &#40;ODBC&#41;</span><span class="sxs-lookup"><span data-stu-id="5efbc-168">Table-Valued Parameters &#40;ODBC&#41;</span></span>](table-valued-parameters-odbc.md)  
  
  
