---
title: Opción SORT_IN_TEMPDB para índices | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- SORT_IN_TEMPDB option
- disk space [SQL Server], indexes
- space [SQL Server], indexes
- tempdb database [SQL Server], indexes
- indexes [SQL Server], tempdb database
- index creation [SQL Server], tempdb database
ms.assetid: 754a003f-fe51-4d10-975a-f6b8c04ebd35
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 8feccc5b1d29617193f481569e10648c6ed77242
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87749308"
---
# <a name="sort_in_tempdb-option-for-indexes"></a><span data-ttu-id="33b62-102">Opción SORT_IN_TEMPDB para índices</span><span class="sxs-lookup"><span data-stu-id="33b62-102">SORT_IN_TEMPDB Option For Indexes</span></span>
  <span data-ttu-id="33b62-103">Cuando crea o vuelve a generar un índice, si establece la opción SORT_IN_TEMPDB en ON, puede indicar a [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] que use **tempdb** para almacenar los resultados de ordenación intermedios que se usan para generar el índice.</span><span class="sxs-lookup"><span data-stu-id="33b62-103">When you create or rebuild an index, by setting the SORT_IN_TEMPDB option to ON you can direct the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] to use **tempdb** to store the intermediate sort results that are used to build the index.</span></span> <span data-ttu-id="33b62-104">Aunque esta opción aumenta la cantidad de espacio en disco temporal utilizado para crear un índice, reduce el tiempo que tarda en crear o volver a generar un índice cuando **tempdb** está en un conjunto de discos diferente al de la base de datos de usuario.</span><span class="sxs-lookup"><span data-stu-id="33b62-104">Although this option increases the amount of temporary disk space that is used to create an index, the option could reduce the time that is required to create or rebuild an index when **tempdb** is on a set of disks different from that of the user database.</span></span> <span data-ttu-id="33b62-105">Para obtener más información acerca de **tempdb**, vea [Establecer la opción de configuración del servidor Memoria para creación de índices](../../database-engine/configure-windows/configure-the-index-create-memory-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="33b62-105">For more information about **tempdb**, see [Configure the index create memory Server Configuration Option](../../database-engine/configure-windows/configure-the-index-create-memory-server-configuration-option.md).</span></span>  
  
## <a name="phases-of-index-building"></a><span data-ttu-id="33b62-106">Fases de la generación de un índice</span><span class="sxs-lookup"><span data-stu-id="33b62-106">Phases of Index Building</span></span>  
 <span data-ttu-id="33b62-107">Para generar un índice, [!INCLUDE[ssDE](../../includes/ssde-md.md)] pasa por varias fases:</span><span class="sxs-lookup"><span data-stu-id="33b62-107">As the [!INCLUDE[ssDE](../../includes/ssde-md.md)] builds an index, it goes through the following phases:</span></span>  
  
-   <span data-ttu-id="33b62-108">[!INCLUDE[ssDE](../../includes/ssde-md.md)] recorre en primer lugar las páginas de datos de la tabla base para recuperar los valores clave y genera una fila hoja de índice para cada fila de datos.</span><span class="sxs-lookup"><span data-stu-id="33b62-108">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] first scans the data pages of the base table to retrieve key values and builds an index leaf row for each data row.</span></span> <span data-ttu-id="33b62-109">Cuando los búferes de orden interno se han llenado con las entradas del índice hoja, las entradas se ordenan y escriben en el disco como una ordenación intermedia.</span><span class="sxs-lookup"><span data-stu-id="33b62-109">When the internal sort buffers have been filled with leaf index entries, the entries are sorted and written to disk as an intermediate sort run.</span></span> <span data-ttu-id="33b62-110">[!INCLUDE[ssDE](../../includes/ssde-md.md)] reanuda entonces el recorrido de páginas de datos hasta que los búferes de orden se llenan de nuevo.</span><span class="sxs-lookup"><span data-stu-id="33b62-110">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] then resumes the data page scan until the sort buffers are again filled.</span></span> <span data-ttu-id="33b62-111">Este patrón de recorrido de varias páginas de datos seguido de la ordenación y escritura de una ejecución de orden continúa hasta que se han procesado todas las filas de la tabla base.</span><span class="sxs-lookup"><span data-stu-id="33b62-111">This pattern of scanning multiple data pages followed by sorting and writing a sort run continues until all the rows of the base table have been processed.</span></span>  
  
     <span data-ttu-id="33b62-112">En un índice clúster, las filas hoja del índice son las filas de datos de la tabla, de manera que las ordenaciones intermedias contienen todas las filas de datos.</span><span class="sxs-lookup"><span data-stu-id="33b62-112">In a clustered index, the leaf rows of the index are the data rows of the table; therefore, the intermediate sort runs contain all the data rows.</span></span> <span data-ttu-id="33b62-113">En un índice no clúster, las filas hoja no contienen valores de columnas sin clave, pero suelen ser más pequeñas que un índice clúster.</span><span class="sxs-lookup"><span data-stu-id="33b62-113">In a nonclustered index, the leaf rows may contain nonkey columns, but are generally smaller than a clustered index.</span></span> <span data-ttu-id="33b62-114">Si las claves de índice son grandes, o el índice incluye varias columnas sin clave, una ordenación no agrupada puede ser grande.</span><span class="sxs-lookup"><span data-stu-id="33b62-114">If the index keys are large, or there are several nonkey columns included in the index, a nonclustered sort run can be large.</span></span> <span data-ttu-id="33b62-115">Para obtener más información acerca de la inclusión de columnas sin clave, vea [Create Indexes with Included Columns](create-indexes-with-included-columns.md).</span><span class="sxs-lookup"><span data-stu-id="33b62-115">For more information about including nonkey columns, see [Create Indexes with Included Columns](create-indexes-with-included-columns.md).</span></span>  
  
-   <span data-ttu-id="33b62-116">[!INCLUDE[ssDE](../../includes/ssde-md.md)] mezcla las ordenaciones de las filas hoja del índice en un único flujo ordenado.</span><span class="sxs-lookup"><span data-stu-id="33b62-116">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] merges the sorted runs of index leaf rows into a single, sorted stream.</span></span> <span data-ttu-id="33b62-117">El componente de mezcla de ordenación de [!INCLUDE[ssDE](../../includes/ssde-md.md)] se inicia con la primera página de cada ordenación, busca la clave más baja en todas las páginas y pasa esa fila hoja al componente de creación del índice.</span><span class="sxs-lookup"><span data-stu-id="33b62-117">The sort merge component of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] starts with the first page of each sort run, finds the lowest key in all the pages, and passes that leaf row to the index create component.</span></span> <span data-ttu-id="33b62-118">La siguiente clave más baja se procesa a continuación, después la siguiente, etc.</span><span class="sxs-lookup"><span data-stu-id="33b62-118">The next lowest key is processed, and then the next, and so on.</span></span> <span data-ttu-id="33b62-119">Cuando se extrae la última fila del índice hoja de una página de ordenación, el proceso cambia a la página siguiente desde esa ordenación.</span><span class="sxs-lookup"><span data-stu-id="33b62-119">When the last leaf index row is extracted from a sort run page, the process shifts to the next page from that sort run.</span></span> <span data-ttu-id="33b62-120">Cuando se han procesado todas las páginas de una extensión de ordenación, la extensión se libera.</span><span class="sxs-lookup"><span data-stu-id="33b62-120">When all the pages in a sort run extent have been processed, the extent is freed.</span></span> <span data-ttu-id="33b62-121">Conforme se pasa cada fila de índice hoja al componente de creación del índice, se coloca en una página de índice hoja en el búfer.</span><span class="sxs-lookup"><span data-stu-id="33b62-121">As each leaf index row is passed to the index create component, it is included in a leaf index page in the buffer.</span></span> <span data-ttu-id="33b62-122">Cada página hoja se escribe conforme se llena.</span><span class="sxs-lookup"><span data-stu-id="33b62-122">Each leaf page is written as it is filled.</span></span> <span data-ttu-id="33b62-123">A medida que se escriben las páginas hoja, [!INCLUDE[ssDE](../../includes/ssde-md.md)] crea también los niveles superiores del índice.</span><span class="sxs-lookup"><span data-stu-id="33b62-123">As leaf pages are written, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] also builds the upper levels of the index.</span></span> <span data-ttu-id="33b62-124">Cada página de índice de nivel superior se escribe cuando se llena.</span><span class="sxs-lookup"><span data-stu-id="33b62-124">Each upper level index page is written when it is filled.</span></span>  
  
## <a name="sort_in_tempdb-option"></a><span data-ttu-id="33b62-125">SORT_IN_TEMPDB, opción</span><span class="sxs-lookup"><span data-stu-id="33b62-125">SORT_IN_TEMPDB Option</span></span>  
 <span data-ttu-id="33b62-126">Cuando SORT_IN_TEMPDB se establece en OFF (valor predeterminado), las ordenaciones se almacenan en el grupo de archivos de destino.</span><span class="sxs-lookup"><span data-stu-id="33b62-126">When SORT_IN_TEMPDB is set to OFF, the default, the sort runs are stored in the destination filegroup.</span></span> <span data-ttu-id="33b62-127">Durante la primera fase de la creación del índice, las lecturas alternas de las páginas de la tabla base y las escrituras de las ordenaciones mueven los cabezales de lectura/escritura del disco de un área a otra del disco.</span><span class="sxs-lookup"><span data-stu-id="33b62-127">During the first phase of creating the index, the alternating reads of the base table pages and writes of the sort runs move the disk read/write heads from one area of the disk to another.</span></span> <span data-ttu-id="33b62-128">Los cabezales están en el área de páginas de datos cuando se recorren las páginas de datos.</span><span class="sxs-lookup"><span data-stu-id="33b62-128">The heads are in the data page area as the data pages are scanned.</span></span> <span data-ttu-id="33b62-129">Se mueven a un área de espacio disponible cuando los búferes de orden se llenan y se tiene que escribir la ordenación actual en el disco. A continuación, vuelven al área de páginas de datos cuando se reanuda el recorrido de páginas de la tabla.</span><span class="sxs-lookup"><span data-stu-id="33b62-129">They move to an area of free space when the sort buffers fill and the current sort run has to be written to disk, and then move back to the data page area as the table page scan is resumed.</span></span> <span data-ttu-id="33b62-130">El movimiento de los cabezales de lectura/escritura es superior en la segunda fase.</span><span class="sxs-lookup"><span data-stu-id="33b62-130">The read/write head movement is greater in the second phase.</span></span> <span data-ttu-id="33b62-131">En ese momento, el proceso de ordenación está alternando lecturas de cada área de ordenación.</span><span class="sxs-lookup"><span data-stu-id="33b62-131">At that time the sort process is typically alternating reads from each sort run area.</span></span> <span data-ttu-id="33b62-132">Tanto las ordenaciones como las nuevas páginas de índice se crean en el grupo de archivos de destino,</span><span class="sxs-lookup"><span data-stu-id="33b62-132">Both the sort runs and the new index pages are built in the destination filegroup.</span></span> <span data-ttu-id="33b62-133">lo que significa que, al mismo tiempo que [!INCLUDE[ssDE](../../includes/ssde-md.md)] está repartiendo lecturas entre las ordenaciones, tiene que saltar periódicamente a las extensiones de índice para escribir nuevas páginas de índice conforme se llenan.</span><span class="sxs-lookup"><span data-stu-id="33b62-133">This means that at the same time the [!INCLUDE[ssDE](../../includes/ssde-md.md)] is spreading reads across the sort runs, it has to periodically jump to the index extents to write new index pages as they are filled.</span></span>  
  
 <span data-ttu-id="33b62-134">Si la opción SORT_IN_TEMPDB se ha establecido en ON y **tempdb** está en un conjunto de discos diferente del grupo de archivos de destino, durante la primera fase, las lecturas de las páginas de datos tienen lugar en un disco diferente que las escrituras en el área de trabajo de ordenación de **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="33b62-134">If the SORT_IN_TEMPDB option is set to ON and **tempdb** is on a separate set of disks from the destination filegroup, during the first phase, the reads of the data pages occur on a different disk from the writes to the sort work area in **tempdb**.</span></span> <span data-ttu-id="33b62-135">Esto significa que las lecturas del disco de las claves de datos tienden a proceder en serie en el disco, y las escrituras en el disco **tempdb** también tienden a ser en serie, igual que las escrituras para crear el índice final.</span><span class="sxs-lookup"><span data-stu-id="33b62-135">This means the disk reads of the data keys generally continue more serially across the disk, and the writes to the **tempdb** disk also are generally serial, as do the writes to build the final index.</span></span> <span data-ttu-id="33b62-136">Incluso si otros usuarios están utilizando la base de datos y están teniendo acceso a diferentes direcciones de disco, el patrón global de lecturas y escrituras es más eficaz cuando se especifica SORT_IN_TEMPDB que cuando no se especifica.</span><span class="sxs-lookup"><span data-stu-id="33b62-136">Even if other users are using the database and accessing separate disk addresses, the overall pattern of reads and writes are more efficient when SORT_IN_TEMPDB is specified than when it is not.</span></span>  
  
 <span data-ttu-id="33b62-137">La opción SORT_IN_TEMPDB puede mejorar la contigüidad de extensiones de índice, especialmente si la operación CREATE INDEX no se procesa en paralelo.</span><span class="sxs-lookup"><span data-stu-id="33b62-137">The SORT_IN_TEMPDB option may improve the contiguity of index extents, especially if the CREATE INDEX operation is not being processed in parallel.</span></span> <span data-ttu-id="33b62-138">Las extensiones del área de trabajo de ordenación se liberan de una manera en cierto modo aleatoria con respecto a su ubicación en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="33b62-138">The sort work area extents are freed on a somewhat random basis with regard to their location in the database.</span></span> <span data-ttu-id="33b62-139">Si las áreas de trabajo de ordenación están contenidas en el grupo de archivos de destino, a medida que se liberan las extensiones de trabajo de ordenación, pueden ser adquiridas por las solicitudes de extensiones para albergar la estructura de índice conforme ésta se crea.</span><span class="sxs-lookup"><span data-stu-id="33b62-139">If the sort work areas are contained in the destination filegroup, as the sort work extents are freed, they can be acquired by the requests for extents to hold the index structure as it is built.</span></span> <span data-ttu-id="33b62-140">Esto puede hacer que las ubicaciones de las extensiones del índice sean aleatorias hasta cierto punto.</span><span class="sxs-lookup"><span data-stu-id="33b62-140">This can randomize the locations of the index extents to a degree.</span></span> <span data-ttu-id="33b62-141">Si las extensiones de orden se mantienen por separado en **tempdb**, la secuencia en la que se liberan no afecta a la ubicación de las extensiones del índice.</span><span class="sxs-lookup"><span data-stu-id="33b62-141">If the sort extents are held separately in **tempdb**, the sequence in which they are freed has no effect on the location of the index extents.</span></span> <span data-ttu-id="33b62-142">Asimismo, cuando las ordenaciones intermedias se almacenan en **tempdb** en lugar del grupo de archivos de destino, hay más espacio disponible en el grupo de archivos de destino,</span><span class="sxs-lookup"><span data-stu-id="33b62-142">Also, when the intermediate sort runs are stored in **tempdb** instead of the destination filegroup, there is more space available in the destination filegroup.</span></span> <span data-ttu-id="33b62-143">lo que aumenta las posibilidades de que las extensiones del índice sean contiguas.</span><span class="sxs-lookup"><span data-stu-id="33b62-143">This increases the chances that index extents will be contiguous.</span></span>  
  
 <span data-ttu-id="33b62-144">La opción SORT_IN_TEMPDB afecta únicamente a la instrucción actual.</span><span class="sxs-lookup"><span data-stu-id="33b62-144">The SORT_IN_TEMPDB option affects only the current statement.</span></span> <span data-ttu-id="33b62-145">Los metadatos no registran que el índice se ordenó o no se ordenó en **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="33b62-145">No metadata records that the index was or was not sorted in **tempdb**.</span></span> <span data-ttu-id="33b62-146">Por ejemplo, si crea un índice no clúster utilizando la opción SORT_IN_TEMPDB y, más adelante, crea un índice clúster sin especificar la opción, [!INCLUDE[ssDE](../../includes/ssde-md.md)] no utiliza la opción cuando crea de nuevo el índice no clúster.</span><span class="sxs-lookup"><span data-stu-id="33b62-146">For example, if you create a nonclustered index using the SORT_IN_TEMPDB option, and at a later time create a clustered index without specifying the option, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] does not use the option when it re-creates the nonclustered index.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="33b62-147">Si no se necesita una operación de ordenación o si la ordenación se puede realizar en memoria, la opción SORT_IN_TEMPDB se omite.</span><span class="sxs-lookup"><span data-stu-id="33b62-147">If a sort operation is not required or if the sort can be performed in memory, the SORT_IN_TEMPDB option is ignored.</span></span>  
  
## <a name="disk-space-requirements"></a><span data-ttu-id="33b62-148">Requisitos de espacio en disco</span><span class="sxs-lookup"><span data-stu-id="33b62-148">Disk Space Requirements</span></span>  
 <span data-ttu-id="33b62-149">Si establece la opción SORT_IN_TEMPDB en ON, debe tener suficiente espacio de disco disponible en **tempdb** para contener las ordenaciones intermedias, así como suficiente espacio de disco disponible en el grupo de archivos de destino para contener el nuevo índice.</span><span class="sxs-lookup"><span data-stu-id="33b62-149">When you set the SORT_IN_TEMPDB option to ON, you must have sufficient free disk space available in **tempdb** to hold the intermediate sort runs, and enough free disk space in the destination filegroup to hold the new index.</span></span> <span data-ttu-id="33b62-150">La instrucción CREATE INDEX produce errores si no hay suficiente espacio disponible y hay alguna razón por la que las bases de datos no pueden crecer automáticamente para adquirir más espacio (como falta de espacio en el disco o el crecimiento automático desactivado).</span><span class="sxs-lookup"><span data-stu-id="33b62-150">The CREATE INDEX statement fails if there is insufficient free space and there is some reason the databases cannot autogrow to acquire more space, such as no space on the disk or autogrow is set to off.</span></span>  
  
 <span data-ttu-id="33b62-151">Si SORT_IN_TEMPDB se establece en OFF, el espacio de disco disponible en el grupo de archivos de destino debe ser aproximadamente el tamaño del índice final.</span><span class="sxs-lookup"><span data-stu-id="33b62-151">If SORT_IN_TEMPDB is set to OFF, the available free disk space in the destination filegroup must be roughly the size of the final index.</span></span> <span data-ttu-id="33b62-152">Durante la primera fase, se crean las ordenaciones y éstas requieren aproximadamente la misma cantidad de espacio que el índice final.</span><span class="sxs-lookup"><span data-stu-id="33b62-152">During the first phase, the sort runs are built and require about the same amount of space as the final index.</span></span> <span data-ttu-id="33b62-153">Durante la segunda fase, cada extensión de ordenación se libera después de haberla procesado.</span><span class="sxs-lookup"><span data-stu-id="33b62-153">During the second phase, each sort run extent is freed after it has been processed.</span></span> <span data-ttu-id="33b62-154">Esto significa que las extensiones de ordenación se liberan más o menos a la misma velocidad a la que se adquieren extensiones para albergar las páginas del índice final; por tanto, los requisitos de espacio globales no exceden en gran medida el tamaño del índice final.</span><span class="sxs-lookup"><span data-stu-id="33b62-154">This means that sort run extents are freed at about the same rate at which extents are acquired to hold the final index pages; therefore, the overall space requirements do not greatly exceed the size of the final index.</span></span> <span data-ttu-id="33b62-155">Un efecto secundario de esto es que, si la cantidad de espacio disponible es muy próxima al tamaño del índice final, [!INCLUDE[ssDE](../../includes/ssde-md.md)] tenderá a reutilizar las extensiones de ordenación con mucha rapidez cuando se liberen.</span><span class="sxs-lookup"><span data-stu-id="33b62-155">One side effect of this is that if the amount of free space is very close to the size of the final index, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] will generally reuse the sort run extents very quickly after they are freed.</span></span> <span data-ttu-id="33b62-156">Puesto que las extensiones de ordenación se liberan de una manera en cierto modo aleatoria, esto reduce la continuidad de las extensiones del índice en este escenario.</span><span class="sxs-lookup"><span data-stu-id="33b62-156">Because the sort run extents are freed in a somewhat random manner, this reduces the continuity of the index extents in this scenario.</span></span> <span data-ttu-id="33b62-157">Si SORT_IN_TEMPDB se establece en OFF, la continuidad de las extensiones del índice mejora si hay suficiente espacio disponible en el grupo de archivos de destino que se pueda asignar a las extensiones del índice desde un grupo contiguo en lugar de hacerlo desde extensiones de ordenación cuya asignación ha sido cancelada recientemente.</span><span class="sxs-lookup"><span data-stu-id="33b62-157">If SORT_IN_TEMPDB is set to OFF, the continuity of the index extents is improved if there is sufficient free space available in the destination filegroup that the index extents can be allocated from a contiguous pool instead of from the freshly deallocated sort run extents.</span></span>  
  
 <span data-ttu-id="33b62-158">Cuando crea un índice no clúster, debe tener como espacio disponible:</span><span class="sxs-lookup"><span data-stu-id="33b62-158">When you create a nonclustered index, you must have available as free space:</span></span>  
  
-   <span data-ttu-id="33b62-159">Si SORT_IN_TEMPDB se establece en ON, debe haber suficiente espacio disponible en **tempdb** para almacenar las ordenaciones y suficiente espacio disponible en el grupo de archivos de destino para almacenar la estructura del índice final.</span><span class="sxs-lookup"><span data-stu-id="33b62-159">If SORT_IN_TEMPDB is set to ON, there must be sufficient free space in **tempdb** to store the sort runs, and sufficient free space in the destination filegroup to store the final index structure.</span></span> <span data-ttu-id="33b62-160">Las ordenaciones contienen las filas hoja del índice.</span><span class="sxs-lookup"><span data-stu-id="33b62-160">The sort runs contain the leaf rows of the index.</span></span>  
  
-   <span data-ttu-id="33b62-161">Si SORT_IN_TEMPDB se establece en OFF, el espacio disponible del grupo de archivos de destino debe ser lo suficientemente extenso como para almacenar la estructura del índice final.</span><span class="sxs-lookup"><span data-stu-id="33b62-161">If SORT_IN_TEMPDB is set to OFF, the free space in the destination filegroup must be large enough to store the final index structure.</span></span> <span data-ttu-id="33b62-162">La continuidad de las extensiones del índice se puede mejorar si hay más espacio disponible.</span><span class="sxs-lookup"><span data-stu-id="33b62-162">The continuity of the index extends may be improved if more free space is available.</span></span>  
  
 <span data-ttu-id="33b62-163">Cuando crea un índice clúster en una tabla que carece de índices no clúster, debe tener disponible como espacio disponible:</span><span class="sxs-lookup"><span data-stu-id="33b62-163">When you create a clustered index on a table that does not have nonclustered indexes, you must have available as free space:</span></span>  
  
-   <span data-ttu-id="33b62-164">Si SORT_IN_TEMPDB se establece en ON, debe haber suficiente espacio disponible en **tempdb** para almacenar las ordenaciones.</span><span class="sxs-lookup"><span data-stu-id="33b62-164">If SORT_IN_TEMPDB is set to ON, there must be sufficient free space in **tempdb** to store the sort runs.</span></span> <span data-ttu-id="33b62-165">incluidas las filas de datos de la tabla,</span><span class="sxs-lookup"><span data-stu-id="33b62-165">These include the data rows of the table.</span></span> <span data-ttu-id="33b62-166">y suficiente espacio disponible en el grupo de archivos de destino para almacenar la estructura del índice final,</span><span class="sxs-lookup"><span data-stu-id="33b62-166">There must be sufficient free space in the destination filegroup to store the final index structure.</span></span> <span data-ttu-id="33b62-167">incluidas las filas de datos de la tabla y del árbol b del índice.</span><span class="sxs-lookup"><span data-stu-id="33b62-167">This includes the data rows of the table and the index B-tree.</span></span> <span data-ttu-id="33b62-168">Puede ser preciso ajustar la estimación para factores como tener un tamaño de clave grande o un factor de relleno con un valor bajo.</span><span class="sxs-lookup"><span data-stu-id="33b62-168">You may have to adjust the estimate for factors such as having a large key size or a fill factor with a low value.</span></span>  
  
-   <span data-ttu-id="33b62-169">Si SORT_IN_TEMPDB se establece en OFF, el espacio disponible del grupo de archivos de destino debe ser lo suficientemente extenso como para almacenar la tabla final.</span><span class="sxs-lookup"><span data-stu-id="33b62-169">If SORT_IN_TEMPDB is set to OFF, the free space in the destination filegroup must be large enough to store the final table.</span></span> <span data-ttu-id="33b62-170">Esto incluye la estructura del índice.</span><span class="sxs-lookup"><span data-stu-id="33b62-170">This includes the index structure.</span></span> <span data-ttu-id="33b62-171">La continuidad de la tabla y las extensiones del índice se puede mejorar si hay más espacio disponible.</span><span class="sxs-lookup"><span data-stu-id="33b62-171">The continuity of the table and index extents may be improved if more free space is available.</span></span>  
  
 <span data-ttu-id="33b62-172">Cuando crea un índice clúster en una tabla que tiene índices no clúster, debe tener disponible como espacio disponible:</span><span class="sxs-lookup"><span data-stu-id="33b62-172">When you create a clustered index on a table that has nonclustered indexes, you must have available as free space:</span></span>  
  
-   <span data-ttu-id="33b62-173">Si SORT_IN_TEMPDB se establece en ON, debe haber suficiente espacio disponible en **tempdb** para almacenar el conjunto de ordenaciones para el índice más grande, normalmente el índice agrupado, y suficiente espacio disponible en el grupo de archivos de destino para almacenar las estructuras finales de todos los índices.</span><span class="sxs-lookup"><span data-stu-id="33b62-173">If SORT_IN_TEMPDB is set to ON, there must be sufficient free space in **tempdb** to store the collection of sort runs for the largest index, typically the clustered index, and sufficient free space in the destination filegroup to store the final structures of all the indexes.</span></span> <span data-ttu-id="33b62-174">Esto incluye el índice clúster que contiene las filas de datos de la tabla.</span><span class="sxs-lookup"><span data-stu-id="33b62-174">This includes the clustered index that contains the data rows of the table.</span></span>  
  
-   <span data-ttu-id="33b62-175">Si SORT_IN_TEMPDB se establece en OFF, el espacio disponible del grupo de archivos de destino debe ser lo suficientemente extenso como para almacenar la tabla final.</span><span class="sxs-lookup"><span data-stu-id="33b62-175">If SORT_IN_TEMPDB is set to OFF, the free space in the destination filegroup must be large enough to store the final table.</span></span> <span data-ttu-id="33b62-176">Esto incluye las estructuras de todos los índices.</span><span class="sxs-lookup"><span data-stu-id="33b62-176">This includes the structures of all the indexes.</span></span> <span data-ttu-id="33b62-177">La continuidad de la tabla y las extensiones del índice se puede mejorar si hay más espacio disponible.</span><span class="sxs-lookup"><span data-stu-id="33b62-177">The continuity of the table and index extents may be improved if more free space is available.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="33b62-178">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="33b62-178">Related Tasks</span></span>  
 [<span data-ttu-id="33b62-179">CREATE INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="33b62-179">CREATE INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-index-transact-sql)  
  
 [<span data-ttu-id="33b62-180">Reorganizar y volver a generar índices</span><span class="sxs-lookup"><span data-stu-id="33b62-180">Reorganize and Rebuild Indexes</span></span>](indexes.md)  
  
## <a name="related-content"></a><span data-ttu-id="33b62-181">Contenido relacionado</span><span class="sxs-lookup"><span data-stu-id="33b62-181">Related Content</span></span>  
 [<span data-ttu-id="33b62-182">ALTER INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="33b62-182">ALTER INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-index-transact-sql)  
  
 [<span data-ttu-id="33b62-183">Establecer la opción de configuración del servidor Memoria para creación de índices</span><span class="sxs-lookup"><span data-stu-id="33b62-183">Configure the index create memory Server Configuration Option</span></span>](../../database-engine/configure-windows/configure-the-index-create-memory-server-configuration-option.md)  
  
 [<span data-ttu-id="33b62-184">Requisitos de espacio en disco para operaciones DDL de índice</span><span class="sxs-lookup"><span data-stu-id="33b62-184">Disk Space Requirements for Index DDL Operations</span></span>](disk-space-requirements-for-index-ddl-operations.md)  
  
  
