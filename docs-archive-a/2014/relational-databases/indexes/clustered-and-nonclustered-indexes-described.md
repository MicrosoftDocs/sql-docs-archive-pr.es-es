---
title: Índices agrupados y no agrupados descritos | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- query optimizer [SQL Server], index usage
- index concepts [SQL Server]
ms.assetid: b7d6b323-728d-4763-a987-92e6292f6f7a
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: c9eb51a24000b8af4a466fe4330644a722ad325b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87749866"
---
# <a name="clustered-and-nonclustered-indexes-described"></a><span data-ttu-id="d6f58-102">Índices agrupados y no agrupados descritos</span><span class="sxs-lookup"><span data-stu-id="d6f58-102">Clustered and Nonclustered Indexes Described</span></span>
  <span data-ttu-id="d6f58-103">Un índice es una estructura de disco asociada con una tabla o una vista que acelera la recuperación de filas de la tabla o de la vista.</span><span class="sxs-lookup"><span data-stu-id="d6f58-103">An index is an on-disk structure associated with a table or view that speeds retrieval of rows from the table or view.</span></span> <span data-ttu-id="d6f58-104">Un índice contiene claves generadas a partir de una o varias columnas de la tabla o la vista.</span><span class="sxs-lookup"><span data-stu-id="d6f58-104">An index contains keys built from one or more columns in the table or view.</span></span> <span data-ttu-id="d6f58-105">Dichas claves están almacenadas en una estructura (árbol b) que permite que [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] busque de forma rápida y eficiente la fila o filas asociadas a los valores de cada clave.</span><span class="sxs-lookup"><span data-stu-id="d6f58-105">These keys are stored in a structure (B-tree) that enables [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to find the row or rows associated with the key values quickly and efficiently.</span></span>  
  
 <span data-ttu-id="d6f58-106">Una tabla o una vista puede contener los siguientes tipos de índices:</span><span class="sxs-lookup"><span data-stu-id="d6f58-106">A table or view can contain the following types of indexes:</span></span>  
  
-   <span data-ttu-id="d6f58-107">Clúster</span><span class="sxs-lookup"><span data-stu-id="d6f58-107">Clustered</span></span>  
  
    -   <span data-ttu-id="d6f58-108">Los índices clúster ordenan y almacenan las filas de los datos de la tabla o vista de acuerdo con los valores de la clave del índice.</span><span class="sxs-lookup"><span data-stu-id="d6f58-108">Clustered indexes sort and store the data rows in the table or view based on their key values.</span></span> <span data-ttu-id="d6f58-109">Son columnas incluidas en la definición del índice.</span><span class="sxs-lookup"><span data-stu-id="d6f58-109">These are the columns included in the index definition.</span></span> <span data-ttu-id="d6f58-110">Solo puede haber un índice clúster por cada tabla, porque las filas de datos solo pueden estar ordenadas de una forma.</span><span class="sxs-lookup"><span data-stu-id="d6f58-110">There can be only one clustered index per table, because the data rows themselves can be sorted in only one order.</span></span>  
  
    -   <span data-ttu-id="d6f58-111">La única ocasión en la que las filas de datos de una tabla están ordenadas es cuando la tabla contiene un índice clúster.</span><span class="sxs-lookup"><span data-stu-id="d6f58-111">The only time the data rows in a table are stored in sorted order is when the table contains a clustered index.</span></span> <span data-ttu-id="d6f58-112">Cuando una tabla tiene un índice clúster, la tabla se denomina tabla agrupada.</span><span class="sxs-lookup"><span data-stu-id="d6f58-112">When a table has a clustered index, the table is called a clustered table.</span></span> <span data-ttu-id="d6f58-113">Si una tabla no tiene un índice clúster, sus filas de datos están almacenadas en una estructura sin ordenar denominada montón.</span><span class="sxs-lookup"><span data-stu-id="d6f58-113">If a table has no clustered index, its data rows are stored in an unordered structure called a heap.</span></span>  
  
-   <span data-ttu-id="d6f58-114">No agrupado</span><span class="sxs-lookup"><span data-stu-id="d6f58-114">Nonclustered</span></span>  
  
    -   <span data-ttu-id="d6f58-115">Los índices no clúster tienen una estructura separada de las filas de datos.</span><span class="sxs-lookup"><span data-stu-id="d6f58-115">Nonclustered indexes have a structure separate from the data rows.</span></span> <span data-ttu-id="d6f58-116">Un índice no clúster contiene los valores de clave de índice no clúster y cada entrada de valor de clave tiene un puntero a la fila de datos que contiene el valor clave.</span><span class="sxs-lookup"><span data-stu-id="d6f58-116">A nonclustered index contains the nonclustered index key values and each key value entry has a pointer to the data row that contains the key value.</span></span>  
  
    -   <span data-ttu-id="d6f58-117">El puntero de una fila de índice no clúster hacia una fila de datos se denomina localizador de fila.</span><span class="sxs-lookup"><span data-stu-id="d6f58-117">The pointer from an index row in a nonclustered index to a data row is called a row locator.</span></span> <span data-ttu-id="d6f58-118">La estructura del localizador de filas depende de si las páginas de datos están almacenadas en un montón o en una tabla agrupada.</span><span class="sxs-lookup"><span data-stu-id="d6f58-118">The structure of the row locator depends on whether the data pages are stored in a heap or a clustered table.</span></span> <span data-ttu-id="d6f58-119">Si están en un montón, el localizador de filas es un puntero hacia la fila.</span><span class="sxs-lookup"><span data-stu-id="d6f58-119">For a heap, a row locator is a pointer to the row.</span></span> <span data-ttu-id="d6f58-120">Si están en una tabla agrupada, el localizador de fila es la clave de índice clúster.</span><span class="sxs-lookup"><span data-stu-id="d6f58-120">For a clustered table, the row locator is the clustered index key.</span></span>  
  
    -   <span data-ttu-id="d6f58-121">Puede agregar columnas sin clave al nivel hoja de un índice no clúster con el fin de eludir los límites existentes para las claves de índice, 900 bytes y 16 columnas de clave, así como para ejecutar consultas indizadas y totalmente cubiertas.</span><span class="sxs-lookup"><span data-stu-id="d6f58-121">You can add nonkey columns to the leaf level of the nonclustered index to by-pass existing index key limits, 900 bytes and 16 key columns, and execute fully covered, indexed, queries.</span></span> <span data-ttu-id="d6f58-122">Para más información, consulte [Create Indexes with Included Columns](create-indexes-with-included-columns.md).</span><span class="sxs-lookup"><span data-stu-id="d6f58-122">For more information, see [Create Indexes with Included Columns](create-indexes-with-included-columns.md).</span></span>  
  
 <span data-ttu-id="d6f58-123">Tanto los índices clúster como los no clúster pueden ser únicos.</span><span class="sxs-lookup"><span data-stu-id="d6f58-123">Both clustered and nonclustered indexes can be unique.</span></span> <span data-ttu-id="d6f58-124">Esto significa que dos filas no pueden tener el mismo valor para la clave de índice.</span><span class="sxs-lookup"><span data-stu-id="d6f58-124">This means no two rows can have the same value for the index key.</span></span> <span data-ttu-id="d6f58-125">De lo contrario, el índice no es único y varias filas pueden compartir el mismo valor de clave.</span><span class="sxs-lookup"><span data-stu-id="d6f58-125">Otherwise, the index is not unique and multiple rows can share the same key value.</span></span> <span data-ttu-id="d6f58-126">Para obtener más información, vea [Crear vistas indexadas](create-unique-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="d6f58-126">For more information, see [Create Unique Indexes](create-unique-indexes.md).</span></span>  
  
 <span data-ttu-id="d6f58-127">Los índices se mantienen automáticamente para una tabla o vista cuando se modifican los datos de la tabla.</span><span class="sxs-lookup"><span data-stu-id="d6f58-127">Indexes are automatically maintained for a table or view whenever the table data is modified.</span></span>  
  
 <span data-ttu-id="d6f58-128">Vea [Indexes](indexes.md) para los tipos adicionales de índices de propósito especial.</span><span class="sxs-lookup"><span data-stu-id="d6f58-128">See [Indexes](indexes.md) for additional types of special purpose indexes.</span></span>  
  
## <a name="indexes-and-constraints"></a><span data-ttu-id="d6f58-129">Índices y restricciones</span><span class="sxs-lookup"><span data-stu-id="d6f58-129">Indexes and Constraints</span></span>  
 <span data-ttu-id="d6f58-130">Los índices se crean automáticamente cuando las restricciones PRIMARY KEY y UNIQUE se definen en las columnas de tabla.</span><span class="sxs-lookup"><span data-stu-id="d6f58-130">Indexes are automatically created when PRIMARY KEY and UNIQUE constraints are defined on table columns.</span></span> <span data-ttu-id="d6f58-131">Por ejemplo, cuando cree una tabla e identifique una determinada columna como la clave principal, el [!INCLUDE[ssDE](../../includes/ssde-md.md)] creará automáticamente una restricción PRIMARY KEY y un índice en esa columna.</span><span class="sxs-lookup"><span data-stu-id="d6f58-131">For example, when you create a table and identify a particular column to be the primary key, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] automatically creates a PRIMARY KEY constraint and index on that column.</span></span> <span data-ttu-id="d6f58-132">Para obtener más información, consulte [Create Primary Keys](../tables/create-primary-keys.md) y [Create Unique Constraints](../tables/create-unique-constraints.md).</span><span class="sxs-lookup"><span data-stu-id="d6f58-132">For more information, see [Create Primary Keys](../tables/create-primary-keys.md) and [Create Unique Constraints](../tables/create-unique-constraints.md).</span></span>  
  
## <a name="how-indexes-are-used-by-the-query-optimizer"></a><span data-ttu-id="d6f58-133">Cómo utiliza los índices el optimizador de consultas</span><span class="sxs-lookup"><span data-stu-id="d6f58-133">How Indexes Are Used by the Query Optimizer</span></span>  
 <span data-ttu-id="d6f58-134">Los índices bien diseñados pueden reducir las operaciones de E/S de disco y consumen menos recursos del sistema, con lo que mejoran el rendimiento de la consulta.</span><span class="sxs-lookup"><span data-stu-id="d6f58-134">Well-designed indexes can reduce disk I/O operations and consume fewer system resources therefore improving query performance.</span></span> <span data-ttu-id="d6f58-135">Los índices pueden ser útiles para diversas consultas que contienen instrucciones SELECT, UPDATE, DELETE o MERGE.</span><span class="sxs-lookup"><span data-stu-id="d6f58-135">Indexes can be helpful for a variety of queries that contain SELECT, UPDATE, DELETE, or MERGE statements.</span></span> <span data-ttu-id="d6f58-136">Fíjese en la consulta `SELECT Title, HireDate FROM HumanResources.Employee WHERE EmployeeID = 250` en la base de datos [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d6f58-136">Consider the query `SELECT Title, HireDate FROM HumanResources.Employee WHERE EmployeeID = 250` in the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database.</span></span> <span data-ttu-id="d6f58-137">Cuando se ejecuta la consulta, el optimizador de consultas evalúa cada método disponible para recuperar datos y selecciona el método más eficiente.</span><span class="sxs-lookup"><span data-stu-id="d6f58-137">When this query is executed, the query optimizer evaluates each available method for retrieving the data and selects the most efficient method.</span></span> <span data-ttu-id="d6f58-138">El método puede ser un recorrido de la tabla o puede ser recorrer uno o más índices si existen.</span><span class="sxs-lookup"><span data-stu-id="d6f58-138">The method may be a table scan, or may be scanning one or more indexes if they exist.</span></span>  
  
 <span data-ttu-id="d6f58-139">Al realizar un recorrido de la tabla, el optimizador de consultas leerá todas las filas de la tabla y extraerá las filas que cumplen con los criterios de la consulta.</span><span class="sxs-lookup"><span data-stu-id="d6f58-139">When performing a table scan, the query optimizer reads all the rows in the table, and extracts the rows that meet the criteria of the query.</span></span> <span data-ttu-id="d6f58-140">Un recorrido de la tabla genera muchas operaciones de E/S de disco y puede consumir recursos.</span><span class="sxs-lookup"><span data-stu-id="d6f58-140">A table scan generates many disk I/O operations and can be resource intensive.</span></span> <span data-ttu-id="d6f58-141">No obstante, puede ser el método más eficaz si, por ejemplo, el conjunto de resultados de la consulta es un porcentaje elevado de filas de la tabla.</span><span class="sxs-lookup"><span data-stu-id="d6f58-141">However, a table scan could be the most efficient method if, for example, the result set of the query is a high percentage of rows from the table.</span></span>  
  
 <span data-ttu-id="d6f58-142">Cuando el optimizador de consultas utiliza un índice, busca en las columnas de clave de índice, busca la ubicación de almacenamiento de las filas que necesita la consulta y extrae las filas coincidentes de esa ubicación.</span><span class="sxs-lookup"><span data-stu-id="d6f58-142">When the query optimizer uses an index, it searches the index key columns, finds the storage location of the rows needed by the query and extracts the matching rows from that location.</span></span> <span data-ttu-id="d6f58-143">Generalmente, la búsqueda del índice es mucho más rápida que la búsqueda de la tabla porque, a diferencia de la tabla, un índice frecuentemente contiene muy pocas columnas por fila y las filas están ordenadas.</span><span class="sxs-lookup"><span data-stu-id="d6f58-143">Generally, searching the index is much faster than searching the table because unlike a table, an index frequently contains very few columns per row and the rows are in sorted order.</span></span>  
  
 <span data-ttu-id="d6f58-144">El optimizador de consultas normalmente selecciona el método más eficaz cuando ejecuta consultas.</span><span class="sxs-lookup"><span data-stu-id="d6f58-144">The query optimizer typically selects the most efficient method when executing queries.</span></span> <span data-ttu-id="d6f58-145">No obstante, si no hay índices disponibles, el optimizador de consultas debe utilizar un recorrido de la tabla.</span><span class="sxs-lookup"><span data-stu-id="d6f58-145">However, if no indexes are available, the query optimizer must use a table scan.</span></span> <span data-ttu-id="d6f58-146">Su tarea consiste en designar y crear los índices que sean más educados para su entorno para que el optimizador de consultas tenga una selección de índices eficientes entre los cuales elegir.</span><span class="sxs-lookup"><span data-stu-id="d6f58-146">Your task is to design and create indexes that are best suited to your environment so that the query optimizer has a selection of efficient indexes from which to select.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="d6f58-147">proporciona el [Asistente para la optimización de motor de base de datos](../performance/database-engine-tuning-advisor.md) , que sirve de ayuda en el análisis del entorno de su base de datos y para seleccionar los índices apropiados.</span><span class="sxs-lookup"><span data-stu-id="d6f58-147">provides the [Database Engine Tuning Advisor](../performance/database-engine-tuning-advisor.md) to help with the analysis of your database environment and in the selection of appropriate indexes.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="d6f58-148">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="d6f58-148">Related Tasks</span></span>  
 [<span data-ttu-id="d6f58-149">Crear índices clúster</span><span class="sxs-lookup"><span data-stu-id="d6f58-149">Create Clustered Indexes</span></span>](create-clustered-indexes.md)  
  
 [<span data-ttu-id="d6f58-150">Crear índices no clúster</span><span class="sxs-lookup"><span data-stu-id="d6f58-150">Create Nonclustered Indexes</span></span>](create-nonclustered-indexes.md)  
  
  
