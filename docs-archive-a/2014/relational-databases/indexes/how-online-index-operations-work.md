---
title: Cómo funcionan las operaciones de índice en línea | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- online index operations
- source indexes [SQL Server]
- preexisting indexes [SQL Server]
- target indexes [SQL Server]
- temporary mapping index [SQL Server]
- index temporary mappings [SQL Server]
ms.assetid: eef0c9d1-790d-46e4-a758-d0bf6742e6ae
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 9b74690c9dfb980787087899200ffb45c2c4b6b6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87677086"
---
# <a name="how-online-index-operations-work"></a><span data-ttu-id="5c71d-102">Cómo funcionan las operaciones de índice en línea</span><span class="sxs-lookup"><span data-stu-id="5c71d-102">How Online Index Operations Work</span></span>
  <span data-ttu-id="5c71d-103">En este tema se definen las estructuras que existen durante una operación de índice en línea y se muestran las actividades asociadas a ellas.</span><span class="sxs-lookup"><span data-stu-id="5c71d-103">This topic defines the structures that exist during an online index operation and shows the activities associated with these structures.</span></span>  
  
## <a name="online-index-structures"></a><span data-ttu-id="5c71d-104">Estructuras de índice en línea</span><span class="sxs-lookup"><span data-stu-id="5c71d-104">Online Index Structures</span></span>  
 <span data-ttu-id="5c71d-105">Para que se puedan llevar a cabo actividades de usuario simultáneas durante una operación de lenguaje de definición de datos (DDL) de índice, se usan las siguientes estructuras en la operación de índice en línea: índices preexistentes y de origen, destino y, para volver a compilar un montón o quitar un índice en línea clúster, un índice de asignación temporal.</span><span class="sxs-lookup"><span data-stu-id="5c71d-105">To allow for concurrent user activity during an index data definition language (DDL) operation, the following structures are used during the online index operation: source and preexisting indexes, target, and for rebuilding a heap or dropping a clustered index online, a temporary mapping index.</span></span>  
  
-   <span data-ttu-id="5c71d-106">**Origen e índices preexistentes**</span><span class="sxs-lookup"><span data-stu-id="5c71d-106">**Source and preexisting indexes**</span></span>  
  
     <span data-ttu-id="5c71d-107">El origen es la tabla original o los datos del índice clúster.</span><span class="sxs-lookup"><span data-stu-id="5c71d-107">The source is the original table or clustered index data.</span></span> <span data-ttu-id="5c71d-108">Los índices preexistentes son los índices no clúster asociados con la estructura de origen.</span><span class="sxs-lookup"><span data-stu-id="5c71d-108">Preexisting indexes are any nonclustered indexes that are associated with the source structure.</span></span> <span data-ttu-id="5c71d-109">Por ejemplo, si la operación de índice en línea regenera un índice clúster que dispone de cuatro índices no clúster asociados, el origen es el índice clúster existente y los índices preexistentes son los índices no clúster.</span><span class="sxs-lookup"><span data-stu-id="5c71d-109">For example, if the online index operation is rebuilding a clustered index that has four associated nonclustered indexes, the source is the existing clustered index and the preexisting indexes are the nonclustered indexes.</span></span>  
  
     <span data-ttu-id="5c71d-110">Los índices preexistentes están disponibles para que los usuarios simultáneos realicen operaciones de selección, inserción, actualización y eliminación.</span><span class="sxs-lookup"><span data-stu-id="5c71d-110">The preexisting indexes are available to concurrent users for select, insert, update, and delete operations.</span></span> <span data-ttu-id="5c71d-111">Entre dichas operaciones se incluyen las inserciones masivas (que se admiten pero no se recomiendan) y las actualizaciones implícitas realizadas mediante desencadenadores y restricciones de integridad referencial.</span><span class="sxs-lookup"><span data-stu-id="5c71d-111">This includes bulk inserts (supported but not recommended) and implicit updates by triggers and referential integrity constraints.</span></span> <span data-ttu-id="5c71d-112">Los índices preexistentes están disponibles para las consultas y las búsquedas.</span><span class="sxs-lookup"><span data-stu-id="5c71d-112">All preexisting indexes are available for queries and searches.</span></span> <span data-ttu-id="5c71d-113">Esto significa que se pueden seleccionar en el optimizador de consultas y, si es necesario, se pueden especificar en sugerencias de índice.</span><span class="sxs-lookup"><span data-stu-id="5c71d-113">This means they may be selected by the query optimizer and, if necessary, specified in index hints.</span></span>  
  
-   <span data-ttu-id="5c71d-114">**Destino**</span><span class="sxs-lookup"><span data-stu-id="5c71d-114">**Target**</span></span>  
  
     <span data-ttu-id="5c71d-115">Los destinos son el nuevo índice (o montón) o un conjunto de nuevos índices que se crean o se regeneran.</span><span class="sxs-lookup"><span data-stu-id="5c71d-115">The target or targets is the new index (or heap) or a set of new indexes that is being created or rebuilt.</span></span> <span data-ttu-id="5c71d-116">Durante la operación de índice, [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] aplica al destino las operaciones de inserción, actualización y eliminación de los usuarios efectuadas en el origen.</span><span class="sxs-lookup"><span data-stu-id="5c71d-116">User insert, update, and delete operations to the source are applied by the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] to the target during the index operation.</span></span> <span data-ttu-id="5c71d-117">Por ejemplo, si la operación del índice en línea regenera un índice clúster, el destino es el índice clúster regenerado; [!INCLUDE[ssDE](../../includes/ssde-md.md)] no regenera los índices no clúster cuando se regenera un índice clúster.</span><span class="sxs-lookup"><span data-stu-id="5c71d-117">For example, if the online index operation is rebuilding a clustered index, the target is the rebuilt clustered index; the [!INCLUDE[ssDE](../../includes/ssde-md.md)] does not rebuild nonclustered indexes when a clustered index is rebuilt.</span></span>  
  
     <span data-ttu-id="5c71d-118">Cuando se procesan instrucciones SELECT, no se realizan búsquedas en el índice de destino hasta que se confirma la operación de índice.</span><span class="sxs-lookup"><span data-stu-id="5c71d-118">The target index is not searched while processing SELECT statements until the index operation is committed.</span></span> <span data-ttu-id="5c71d-119">Internamente, el índice está marcado como de solo escritura.</span><span class="sxs-lookup"><span data-stu-id="5c71d-119">Internally, the index is marked as write-only.</span></span>  
  
-   <span data-ttu-id="5c71d-120">**Índice de asignación temporal**</span><span class="sxs-lookup"><span data-stu-id="5c71d-120">**Temporary mapping index**</span></span>  
  
     <span data-ttu-id="5c71d-121">Las operaciones de índice en línea que crean, quitan o regeneran un índice clúster también precisan un índice de asignación temporal.</span><span class="sxs-lookup"><span data-stu-id="5c71d-121">Online index operations that create, drop, or rebuild a clustered index also require a temporary mapping index.</span></span> <span data-ttu-id="5c71d-122">Las transacciones simultáneas utilizan este índice temporal para determinar qué registros se deben eliminar en los nuevos índices que se regeneran cuando se actualizan o eliminan filas de la tabla subyacente.</span><span class="sxs-lookup"><span data-stu-id="5c71d-122">This temporary index is used by concurrent transactions to determine which records to delete in the new indexes that are being built when rows in the underlying table are updated or deleted.</span></span> <span data-ttu-id="5c71d-123">Este índice no clúster se crea en el mismo paso que el nuevo índice clúster (o montón) y no requiere una operación de ordenación separada.</span><span class="sxs-lookup"><span data-stu-id="5c71d-123">This nonclustered index is created in the same step as the new clustered index (or heap) and does not require a separate sort operation.</span></span> <span data-ttu-id="5c71d-124">Las transacciones simultáneas también mantienen el índice de asignación temporal en sus operaciones de inserción, actualización y eliminación.</span><span class="sxs-lookup"><span data-stu-id="5c71d-124">Concurrent transactions also maintain the temporary mapping index in all their insert, update, and delete operations.</span></span>  
  
## <a name="online-index-activities"></a><span data-ttu-id="5c71d-125">Actividades del índice en línea</span><span class="sxs-lookup"><span data-stu-id="5c71d-125">Online Index Activities</span></span>  
 <span data-ttu-id="5c71d-126">Durante una operación de índice en línea sencilla, como la creación de un índice clúster en una tabla no indizada (montón), el origen y el destino pasan por tres fases: preparación, generación y final.</span><span class="sxs-lookup"><span data-stu-id="5c71d-126">During a simple online index operation, such as creating a clustered index on a nonindexed table (heap), the source and target go through three phases: preparation, build, and final.</span></span>  
  
 <span data-ttu-id="5c71d-127">En la ilustración siguiente se muestra el proceso para crear un índice clúster inicial en línea.</span><span class="sxs-lookup"><span data-stu-id="5c71d-127">The following illustration shows the process for creating an initial clustered index online.</span></span> <span data-ttu-id="5c71d-128">El objeto de origen (el montón) no dispone de otros índices.</span><span class="sxs-lookup"><span data-stu-id="5c71d-128">The source object (the heap) has no other indexes.</span></span> <span data-ttu-id="5c71d-129">Se muestran las actividades de las estructuras de origen y destino en cada fase; también se muestran las operaciones de usuario simultáneas de selección, inserción, actualización y eliminación.</span><span class="sxs-lookup"><span data-stu-id="5c71d-129">The source and target structure activities are shown for each phase; concurrent user select, insert, update, and delete operations are also shown.</span></span> <span data-ttu-id="5c71d-130">Las fases de preparación, generación y final se indican con los modos de bloqueo empleados en cada una de ellas.</span><span class="sxs-lookup"><span data-stu-id="5c71d-130">The preparation, build, and final phases are indicated together with the lock modes used in each phase.</span></span>  
  
 <span data-ttu-id="5c71d-131">![Actividades realizadas durante operación de índice en línea](../../database-engine/media/online-index.gif "Actividades realizadas durante operación de índice en línea")</span><span class="sxs-lookup"><span data-stu-id="5c71d-131">![Activities performed during online index operation](../../database-engine/media/online-index.gif "Activities performed during online index operation")</span></span>  
  
## <a name="source-structure-activities"></a><span data-ttu-id="5c71d-132">Actividades de la estructura de origen</span><span class="sxs-lookup"><span data-stu-id="5c71d-132">Source Structure Activities</span></span>  
 <span data-ttu-id="5c71d-133">En la tabla siguiente se muestran las actividades relacionadas con las estructuras de origen durante cada fase de la operación de índice y la estrategia de bloqueo correspondiente.</span><span class="sxs-lookup"><span data-stu-id="5c71d-133">The following table lists the activities involving the source structures during each phase of the index operation and the corresponding locking strategy.</span></span>  
  
|<span data-ttu-id="5c71d-134">Fase</span><span class="sxs-lookup"><span data-stu-id="5c71d-134">Phase</span></span>|<span data-ttu-id="5c71d-135">Actividad de origen</span><span class="sxs-lookup"><span data-stu-id="5c71d-135">Source activity</span></span>|<span data-ttu-id="5c71d-136">Bloqueos de origen</span><span class="sxs-lookup"><span data-stu-id="5c71d-136">Source locks</span></span>|  
|-----------|---------------------|------------------|  
|<span data-ttu-id="5c71d-137">Preparación</span><span class="sxs-lookup"><span data-stu-id="5c71d-137">Preparation</span></span><br /><br /> <span data-ttu-id="5c71d-138">Fase muy breve</span><span class="sxs-lookup"><span data-stu-id="5c71d-138">Very short phase</span></span>|<span data-ttu-id="5c71d-139">Preparación de los metadatos del sistema para crear la nueva estructura de índice vacía.</span><span class="sxs-lookup"><span data-stu-id="5c71d-139">System metadata preparation to create the new empty index structure.</span></span><br /><br /> <span data-ttu-id="5c71d-140">Se define una instantánea de base de datos.</span><span class="sxs-lookup"><span data-stu-id="5c71d-140">A snapshot of the table is defined.</span></span> <span data-ttu-id="5c71d-141">Es decir, se utilizan las versiones de fila para proporcionar coherencia de lectura en la transacción.</span><span class="sxs-lookup"><span data-stu-id="5c71d-141">That is, row versioning is used to provide transaction-level read consistency.</span></span><br /><br /> <span data-ttu-id="5c71d-142">Las operaciones de usuario simultáneas de escritura se bloquean durante un período muy breve.</span><span class="sxs-lookup"><span data-stu-id="5c71d-142">Concurrent user write operations on the source are blocked for a very short period.</span></span><br /><br /> <span data-ttu-id="5c71d-143">No se admiten las operaciones DDL simultáneas, excepto la creación de varios índices no clúster.</span><span class="sxs-lookup"><span data-stu-id="5c71d-143">No concurrent DDL operations are allowed except creating multiple nonclustered indexes.</span></span>|<span data-ttu-id="5c71d-144">S (Compartido) en la tabla\*</span><span class="sxs-lookup"><span data-stu-id="5c71d-144">S (Shared) on the table\*</span></span><br /><br /> <span data-ttu-id="5c71d-145">IS (Intención compartida)</span><span class="sxs-lookup"><span data-stu-id="5c71d-145">IS (Intent Shared)</span></span><br /><br /> <span data-ttu-id="5c71d-146">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="5c71d-146">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span>|  
|<span data-ttu-id="5c71d-147">Build</span><span class="sxs-lookup"><span data-stu-id="5c71d-147">Build</span></span><br /><br /> <span data-ttu-id="5c71d-148">Fase principal</span><span class="sxs-lookup"><span data-stu-id="5c71d-148">Main phase</span></span>|<span data-ttu-id="5c71d-149">Los datos se recorren, ordenan, combinan e insertan en el destino en operaciones de carga masiva.</span><span class="sxs-lookup"><span data-stu-id="5c71d-149">The data is scanned, sorted, merged, and inserted into the target in bulk load operations.</span></span><br /><br /> <span data-ttu-id="5c71d-150">Las operaciones de usuario simultáneas de selección, inserción, actualización y eliminación se aplican a los índices preexistentes y a los nuevos índices que se generan.</span><span class="sxs-lookup"><span data-stu-id="5c71d-150">Concurrent user select, insert, update, and delete operations are applied to both the preexisting indexes and any new indexes being built.</span></span>|<span data-ttu-id="5c71d-151">IS</span><span class="sxs-lookup"><span data-stu-id="5c71d-151">IS</span></span><br /><br /> <span data-ttu-id="5c71d-152">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="5c71d-152">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span>|  
|<span data-ttu-id="5c71d-153">Final</span><span class="sxs-lookup"><span data-stu-id="5c71d-153">Final</span></span><br /><br /> <span data-ttu-id="5c71d-154">Fase muy breve</span><span class="sxs-lookup"><span data-stu-id="5c71d-154">Very short phase</span></span>|<span data-ttu-id="5c71d-155">Antes de iniciar esta fase deben completarse todas las transacciones de actualización no confirmadas.</span><span class="sxs-lookup"><span data-stu-id="5c71d-155">All uncommitted update transactions must complete before this phase starts.</span></span> <span data-ttu-id="5c71d-156">Según el bloqueo aplicado, se bloquean brevemente las nuevas transacciones de lectura y escritura de usuario hasta que finaliza esta fase.</span><span class="sxs-lookup"><span data-stu-id="5c71d-156">Depending on the acquired lock, all new user read or write transactions are blocked for a very short period until this phase is completed.</span></span><br /><br /> <span data-ttu-id="5c71d-157">Se actualizan los metadatos del sistema para reemplazar el origen con el destino.</span><span class="sxs-lookup"><span data-stu-id="5c71d-157">System metadata is updated to replace the source with the target.</span></span><br /><br /> <span data-ttu-id="5c71d-158">Si es preciso, el origen se quita.</span><span class="sxs-lookup"><span data-stu-id="5c71d-158">The source is dropped if it is required.</span></span> <span data-ttu-id="5c71d-159">Por ejemplo, después de regenerar o quitar un índice clúster.</span><span class="sxs-lookup"><span data-stu-id="5c71d-159">For example, after rebuilding or dropping a clustered index.</span></span>|<span data-ttu-id="5c71d-160">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="5c71d-160">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span><br /><br /> <span data-ttu-id="5c71d-161">S en la tabla si se crea un índice no agrupado.\*</span><span class="sxs-lookup"><span data-stu-id="5c71d-161">S on the table if creating a nonclustered index.\*</span></span><br /><br /> <span data-ttu-id="5c71d-162">SCH-M (Modificación del esquema) si se quita alguna estructura de origen (índice o tabla).\*</span><span class="sxs-lookup"><span data-stu-id="5c71d-162">SCH-M (Schema Modification) if any source structure (index or table) is dropped.\*</span></span>|  
  
 <span data-ttu-id="5c71d-163">\* La operación de índice esperará a que se completen las transacciones de actualización no confirmadas antes de aplicar un bloqueo S o SCH-M a la tabla.</span><span class="sxs-lookup"><span data-stu-id="5c71d-163">\* The index operation will wait for any uncommitted update transactions to complete before acquiring the S lock or SCH-M lock on the table.</span></span>  
  
 <span data-ttu-id="5c71d-164">\*\* El bloqueo de recurso INDEX_BUILD_INTERNAL_RESOURCE impide la ejecución de operaciones de lenguaje de definición de datos (DDL) simultáneas en las estructuras preexistentes y de origen mientras la operación de índice está en proceso.</span><span class="sxs-lookup"><span data-stu-id="5c71d-164">\*\* The resource lock INDEX_BUILD_INTERNAL_RESOURCE prevents the execution of concurrent data definition language (DDL) operations on the source and preexisting structures while the index operation is in progress.</span></span> <span data-ttu-id="5c71d-165">Por ejemplo, este bloqueo impide la regeneración simultánea de dos índices en la misma tabla.</span><span class="sxs-lookup"><span data-stu-id="5c71d-165">For example, this lock prevents concurrent rebuild of two indexes on the same table.</span></span> <span data-ttu-id="5c71d-166">Este bloqueo de recurso está asociado con el bloqueo Sch-M; sin embargo, no impide las instrucciones de manipulación de datos.</span><span class="sxs-lookup"><span data-stu-id="5c71d-166">Although this resource lock is associated with the Sch-M lock, it does not prevent data manipulation statements.</span></span>  
  
 <span data-ttu-id="5c71d-167">En la tabla anterior se muestra un solo bloqueo compartido (S) adquirido en la fase de generación de una operación de índice en línea que únicamente utiliza un índice.</span><span class="sxs-lookup"><span data-stu-id="5c71d-167">The previous table shows a single Shared (S) lock acquired during the build phase of an online index operation that involves a single index.</span></span> <span data-ttu-id="5c71d-168">Cuando se generan o se vuelven a generar índices clúster y no clúster en una sola operación de índice en línea (por ejemplo, durante la creación del índice clúster inicial en una tabla que contiene uno o varios índices no clúster) se aplican dos bloqueos S a corto plazo durante la fase de generación, seguidos de bloqueos de intención compartida (IS) a largo plazo.</span><span class="sxs-lookup"><span data-stu-id="5c71d-168">When clustered and nonclustered indexes are built, or rebuilt, in a single online index operation (for example, during the initial clustered index creation on a table that contains one or more nonclustered indexes) two short-term S locks are acquired during the build phase followed by long-term Intent Shared (IS) locks.</span></span> <span data-ttu-id="5c71d-169">En primer lugar, se aplica un bloqueo S para la creación del índice clúster; cuando esta operación finaliza, se aplica un segundo bloqueo S breve para crear los índices no clúster.</span><span class="sxs-lookup"><span data-stu-id="5c71d-169">One S lock is acquired first for the clustered index creation and when creating the clustered index is completed, a second short-term S lock is acquired for creating the nonclustered indexes.</span></span> <span data-ttu-id="5c71d-170">Después de crear los índices no clúster, el bloqueo S se reduce a un bloqueo IS hasta la fase final de la operación de índice en línea.</span><span class="sxs-lookup"><span data-stu-id="5c71d-170">After the nonclustered indexes are created, the S lock is downgraded to an IS lock until the final phase of the online index operation.</span></span>  
  
### <a name="target-structure-activities"></a><span data-ttu-id="5c71d-171">Actividades de la estructura de destino</span><span class="sxs-lookup"><span data-stu-id="5c71d-171">Target Structure Activities</span></span>  
 <span data-ttu-id="5c71d-172">En la tabla siguiente se muestran las actividades relacionadas con la estructura de destino durante cada fase de la operación de índice y la estrategia de bloqueo correspondiente.</span><span class="sxs-lookup"><span data-stu-id="5c71d-172">The following table lists the activities that involve the target structure during each phase of the index operation and the corresponding locking strategy.</span></span>  
  
|<span data-ttu-id="5c71d-173">Fase</span><span class="sxs-lookup"><span data-stu-id="5c71d-173">Phase</span></span>|<span data-ttu-id="5c71d-174">Actividad de destino</span><span class="sxs-lookup"><span data-stu-id="5c71d-174">Target activity</span></span>|<span data-ttu-id="5c71d-175">Bloqueos de destino</span><span class="sxs-lookup"><span data-stu-id="5c71d-175">Target locks</span></span>|  
|-----------|---------------------|------------------|  
|<span data-ttu-id="5c71d-176">Preparación</span><span class="sxs-lookup"><span data-stu-id="5c71d-176">Preparation</span></span>|<span data-ttu-id="5c71d-177">Se crea un nuevo índice y se define como de solo escritura.</span><span class="sxs-lookup"><span data-stu-id="5c71d-177">New index is created and set to write-only.</span></span>|<span data-ttu-id="5c71d-178">IS</span><span class="sxs-lookup"><span data-stu-id="5c71d-178">IS</span></span>|  
|<span data-ttu-id="5c71d-179">Build</span><span class="sxs-lookup"><span data-stu-id="5c71d-179">Build</span></span>|<span data-ttu-id="5c71d-180">Se insertan datos del origen.</span><span class="sxs-lookup"><span data-stu-id="5c71d-180">Data is inserted from source.</span></span><br /><br /> <span data-ttu-id="5c71d-181">Se aplican las modificaciones de usuario (inserciones, actualizaciones, eliminaciones) aplicadas al origen.</span><span class="sxs-lookup"><span data-stu-id="5c71d-181">User modifications (inserts, updates, deletes) applied to the source are applied.</span></span><br /><br /> <span data-ttu-id="5c71d-182">Esta actividad resulta transparente para el usuario.</span><span class="sxs-lookup"><span data-stu-id="5c71d-182">This activity is transparent to the user.</span></span>|<span data-ttu-id="5c71d-183">IS</span><span class="sxs-lookup"><span data-stu-id="5c71d-183">IS</span></span>|  
|<span data-ttu-id="5c71d-184">Final</span><span class="sxs-lookup"><span data-stu-id="5c71d-184">Final</span></span>|<span data-ttu-id="5c71d-185">Se actualizan los metadatos de índice.</span><span class="sxs-lookup"><span data-stu-id="5c71d-185">Index metadata is updated.</span></span><br /><br /> <span data-ttu-id="5c71d-186">El índice se establece en un estado de lectura/escritura.</span><span class="sxs-lookup"><span data-stu-id="5c71d-186">Index is set to read/write status.</span></span>|<span data-ttu-id="5c71d-187">S</span><span class="sxs-lookup"><span data-stu-id="5c71d-187">S</span></span><br /><br /> <span data-ttu-id="5c71d-188">or</span><span class="sxs-lookup"><span data-stu-id="5c71d-188">or</span></span><br /><br /> <span data-ttu-id="5c71d-189">SCH-M</span><span class="sxs-lookup"><span data-stu-id="5c71d-189">SCH-M</span></span>|  
  
 <span data-ttu-id="5c71d-190">Las instrucciones SELECT del usuario no tienen acceso al destino hasta que finaliza la operación de índice.</span><span class="sxs-lookup"><span data-stu-id="5c71d-190">The target is not accessed by SELECT statements issued by the user until the index operation is completed.</span></span>  
  
 <span data-ttu-id="5c71d-191">Una vez finalizadas las fases de preparación y final, los planes de consulta y actualización almacenados en la memoria caché del procedimiento dejan de ser válidos.</span><span class="sxs-lookup"><span data-stu-id="5c71d-191">After the preparation and final phase is completed, the query and update plans that are stored in the procedure cache are invalidated.</span></span> <span data-ttu-id="5c71d-192">Las consultas posteriores utilizarán el nuevo índice.</span><span class="sxs-lookup"><span data-stu-id="5c71d-192">Subsequent queries will use the new index.</span></span>  
  
 <span data-ttu-id="5c71d-193">La duración de un cursor declarado en una tabla implicada en una operación de índice en línea está limitada por las fases de dicho índice.</span><span class="sxs-lookup"><span data-stu-id="5c71d-193">The lifetime of a cursor declared on a table that is involved in an online index operation is limited by the online index phases.</span></span> <span data-ttu-id="5c71d-194">Los cursores de actualización dejan de ser válidos en cada fase.</span><span class="sxs-lookup"><span data-stu-id="5c71d-194">Update cursors are invalidated at each phase.</span></span> <span data-ttu-id="5c71d-195">Los cursores de solo lectura dejan de ser válidos después de la fase final.</span><span class="sxs-lookup"><span data-stu-id="5c71d-195">Read-only cursors are invalidated only after the final phase.</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="5c71d-196">Contenido relacionado</span><span class="sxs-lookup"><span data-stu-id="5c71d-196">Related Content</span></span>  
 [<span data-ttu-id="5c71d-197">Realizar operaciones de índice en línea</span><span class="sxs-lookup"><span data-stu-id="5c71d-197">Perform Index Operations Online</span></span>](perform-index-operations-online.md)  
  
 [<span data-ttu-id="5c71d-198">Directrices para operaciones de índices en línea</span><span class="sxs-lookup"><span data-stu-id="5c71d-198">Guidelines for Online Index Operations</span></span>](guidelines-for-online-index-operations.md)  
  
  
