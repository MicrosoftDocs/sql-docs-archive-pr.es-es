---
title: Mitigar amenazas y vulnerabilidades (replicación) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- attacks [SQL Server replication]
- threats [SQL Server replication security]
- security [SQL Server replication], threats
- security threats [SQL Server replication]
ms.assetid: 314fe497-56d8-4192-98e9-21b87cf8db04
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: c1a9c2c646f26d0cb61ae3d41ccdbd72551094d4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87748027"
---
# <a name="threat-and-vulnerability-mitigation-replication"></a><span data-ttu-id="739ba-102">Mitigar amenazas y vulnerabilidades (replicación)</span><span class="sxs-lookup"><span data-stu-id="739ba-102">Threat and Vulnerability Mitigation (Replication)</span></span>
  <span data-ttu-id="739ba-103">En este tema se describen las técnicas para reducir las amenazas a una topología de replicación.</span><span class="sxs-lookup"><span data-stu-id="739ba-103">This topic describes techniques to reduce threats to a replication topology.</span></span>  
  
## <a name="encryption"></a><span data-ttu-id="739ba-104">Cifrado</span><span class="sxs-lookup"><span data-stu-id="739ba-104">Encryption</span></span>  
 <span data-ttu-id="739ba-105">El cifrado es el proceso de convertir datos en un formato que no puede leerse sin una clave especial, por lo que solamente el destinatario previsto puede leer los datos.</span><span class="sxs-lookup"><span data-stu-id="739ba-105">Encryption is the process of converting data into a form that cannot be read without a special key, so that only the intended recipient can read the data.</span></span> <span data-ttu-id="739ba-106">La replicación no cifra datos almacenados en tablas o enviados mediante conexiones de red.</span><span class="sxs-lookup"><span data-stu-id="739ba-106">Replication does not encrypt data stored in tables or sent over network connections.</span></span> <span data-ttu-id="739ba-107">Es así por diseño, porque el cifrado está disponible en el nivel de transporte con varias tecnologías, incluidas las siguientes tecnologías estándar: redes privadas virtuales (VPN), capa de sockets seguros (SSL) y seguridad IP (IPSEC).</span><span class="sxs-lookup"><span data-stu-id="739ba-107">This is by design, because encryption is available at the transport level with a number of technologies, including the following industry standard technologies: Virtual Private Networks (VPN), Secure Sockets Layer (SSL), and IP Security (IPSEC).</span></span> <span data-ttu-id="739ba-108">Se recomienda utilizar uno de estos métodos de cifrado para las conexiones entre equipos en una topología de replicación.</span><span class="sxs-lookup"><span data-stu-id="739ba-108">We recommend using one of these encryption methods for the connections between computers in a replication topology.</span></span> <span data-ttu-id="739ba-109">Para obtener más información, vea [Habilitar conexiones cifradas en el motor de base de datos &#40;Administrador de configuración de SQL Server&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="739ba-109">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span> <span data-ttu-id="739ba-110">Para obtener información sobre cómo utilizar VPN y SSL para replicar datos en Internet, vea [Securing Replication Over the Internet](securing-replication-over-the-internet.md).</span><span class="sxs-lookup"><span data-stu-id="739ba-110">For information about using VPN and SSL for replicating data over the Internet, see [Securing Replication Over the Internet](securing-replication-over-the-internet.md).</span></span>  
  
 <span data-ttu-id="739ba-111">Si utiliza SSL para proteger las conexiones entre equipos en una topología de replicación, especifique un valor de **1** o **2** para el parámetro **EncryptionLevel** de cada agente de replicación (se recomienda utilizar el valor **2** ).</span><span class="sxs-lookup"><span data-stu-id="739ba-111">If you use SSL to secure the connections between computers in a replication topology, specify a value of **1** or **2** for the **-EncryptionLevel** parameter of each replication agent (a value of **2** is recommended).</span></span> <span data-ttu-id="739ba-112">El valor **1** especifica que se debe utilizar el cifrado, pero el agente no comprueba si el certificado de servidor SSL está firmado por una entidad de confianza; el valor **2** especifica que se debe comprobar el certificado.</span><span class="sxs-lookup"><span data-stu-id="739ba-112">A value of **1** specifies that encryption is used, but the agent does not verify that the SSL server certificate is signed by a trusted issuer; a value of **2** specifies that the certificate is verified.</span></span> <span data-ttu-id="739ba-113">Los parámetros del agente se pueden especificar en los perfiles del agente y en la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="739ba-113">Agent parameters can be specified in agent profiles and on the command line.</span></span> <span data-ttu-id="739ba-114">Para más información, consulte:</span><span class="sxs-lookup"><span data-stu-id="739ba-114">For more information, see:</span></span>  
  
-   [<span data-ttu-id="739ba-115">Trabajar con perfiles del Agente de replicación</span><span class="sxs-lookup"><span data-stu-id="739ba-115">Work with Replication Agent Profiles</span></span>](../agents/replication-agent-profiles.md)  
  
-   [<span data-ttu-id="739ba-116">Ver y modificar parámetros del símbolo del sistema de los agentes de replicación &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="739ba-116">View and Modify Replication Agent Command Prompt Parameters &#40;SQL Server Management Studio&#41;</span></span>](../agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
-   [<span data-ttu-id="739ba-117">Conceptos de los ejecutables del Agente de replicación</span><span class="sxs-lookup"><span data-stu-id="739ba-117">Replication Agent Executables Concepts</span></span>](../concepts/replication-agent-executables-concepts.md)  
  
 <span data-ttu-id="739ba-118">La replicación tiene el siguiente comportamiento respecto a las claves maestras de bases de datos, que se utilizan para cifrar datos:</span><span class="sxs-lookup"><span data-stu-id="739ba-118">Replication has the following behavior with respect to database Master Keys, which are used to encrypt data:</span></span>  
  
-   <span data-ttu-id="739ba-119">Si existe una clave maestra en una base de datos que interviene en la replicación (una base de datos de publicaciones, una base de datos de suscripciones o una base de datos de distribución), la replicación cifra y descifra contraseñas de agentes en la base de datos con una clave simétrica de base de datos de [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="739ba-119">If a Master Key is present in a database involved in replication (a publication database, subscription database, or distribution database), replication encrypts and decrypts agent passwords in that database using a [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] database symmetric key.</span></span> <span data-ttu-id="739ba-120">Si se utilizan claves maestras, debe crearse una en cada base de datos que interviene en la replicación.</span><span class="sxs-lookup"><span data-stu-id="739ba-120">If Master Keys are used, a Master Key should be created in each database involved in replication.</span></span> <span data-ttu-id="739ba-121">Para más información sobre la creación de claves maestras, vea [CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="739ba-121">For more information about creating Master Keys, see [CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql).</span></span>  
  
-   <span data-ttu-id="739ba-122">La replicación no replica claves maestras.</span><span class="sxs-lookup"><span data-stu-id="739ba-122">Replication does not replicate Master Keys.</span></span> <span data-ttu-id="739ba-123">Si necesita la clave maestra en el suscriptor, debe exportarla de la base de datos de publicación mediante BACKUP MASTER KEY y, a continuación, importarla en la base de datos de suscripciones con RESTORE MASTER KEY.</span><span class="sxs-lookup"><span data-stu-id="739ba-123">If you require the Master Key at the Subscriber, you must export it from the publication database using BACKUP MASTER KEY and then import it into the subscription database using RESTORE MASTER KEY.</span></span> <span data-ttu-id="739ba-124">Para más información, vea [BACKUP MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-master-key-transact-sql) y [RESTORE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-master-key-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="739ba-124">For more information, see [BACKUP MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-master-key-transact-sql) and [RESTORE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-master-key-transact-sql).</span></span>  
  
-   <span data-ttu-id="739ba-125">Si se define una clave maestra para una base de datos de suscripciones adjuntables, especifique la contraseña de la clave maestra mediante el **@db_master_key_password** parámetro de [sp_attachsubscription &#40;&#41;de TRANSACT-SQL ](/sql/relational-databases/system-stored-procedures/sp-attachsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="739ba-125">If a Master Key is defined for an attachable subscription database, specify the Master Key password using the **@db_master_key_password** parameter of [sp_attachsubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-attachsubscription-transact-sql).</span></span> <span data-ttu-id="739ba-126">Esto permite adjuntar la base de datos al suscriptor.</span><span class="sxs-lookup"><span data-stu-id="739ba-126">This allows the database to be attached at the Subscriber.</span></span>  
  
 <span data-ttu-id="739ba-127">Para obtener más información sobre el cifrado y las claves maestras, vea [Encryption Hierarchy](../../security/encryption/encryption-hierarchy.md).</span><span class="sxs-lookup"><span data-stu-id="739ba-127">For more information about encryption and Master Keys, see [Encryption Hierarchy](../../security/encryption/encryption-hierarchy.md).</span></span>  
  
 <span data-ttu-id="739ba-128">La replicación le permite publicar datos de columna cifrados.</span><span class="sxs-lookup"><span data-stu-id="739ba-128">Replication enables you to publish encrypted column data.</span></span> <span data-ttu-id="739ba-129">Para descifrar y usar estos datos en el suscriptor, la clave usada para cifrar los datos en el publicador también debe estar presente en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="739ba-129">To decrypt and use this data at the Subscriber, the key that was used to encrypt the data at the Publisher must also be present on the Subscriber.</span></span> <span data-ttu-id="739ba-130">La replicación no ofrece un mecanismo de seguridad para transportar las claves de cifrado.</span><span class="sxs-lookup"><span data-stu-id="739ba-130">Replication does not provide a secure mechanism to transport encryption keys.</span></span> <span data-ttu-id="739ba-131">Debe volver a crear manualmente la clave de cifrado en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="739ba-131">You must manually re-create the encryption key at the Subscriber.</span></span> <span data-ttu-id="739ba-132">Para más información, vea [Replicar datos en columnas cifradas &#40;SQL Server Management Studio&#41;](replicate-data-in-encrypted-columns-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="739ba-132">For more information, see [Replicate Data in Encrypted Columns &#40;SQL Server Management Studio&#41;](replicate-data-in-encrypted-columns-sql-server-management-studio.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="739ba-133">Consulte también</span><span class="sxs-lookup"><span data-stu-id="739ba-133">See Also</span></span>  
 <span data-ttu-id="739ba-134">[Identidad y Access Control replicación &#40;&#41;](identity-and-access-control-replication.md) </span><span class="sxs-lookup"><span data-stu-id="739ba-134">[Identity and Access Control &#40;Replication&#41;](identity-and-access-control-replication.md) </span></span>  
 [<span data-ttu-id="739ba-135">Implementación de la replicación segura</span><span class="sxs-lookup"><span data-stu-id="739ba-135">Secure Replication Deployment</span></span>](view-and-modify-replication-security-settings.md)  
  
  
