---
title: Actualizar scripts de replicación (programación de la replicación con Transact-SQL) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
dev_langs:
- TSQL
helpviewer_keywords:
- scripts [SQL Server replication], upgrading
- upgrading SQL Server, replicated databases
- upgrading replication applications
- replication [SQL Server], scripting
- replication [SQL Server], upgrading
- upgrading replicated databases
ms.assetid: 0b8720bd-f339-4842-bc8f-b35a46f6d3ee
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: c47101c76ca2c585accd493b74f0e59c56bf009e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87670960"
---
# <a name="upgrade-replication-scripts-replication-transact-sql-programming"></a><span data-ttu-id="f8b05-102">Actualizar scripts de replicación (programación de la replicación con Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="f8b05-102">Upgrade Replication Scripts (Replication Transact-SQL Programming)</span></span>
  <span data-ttu-id="f8b05-103">Los archivos de script[!INCLUDE[tsql](../../../includes/tsql-md.md)] se pueden utilizar para configurar mediante programación una topología de replicación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-103">[!INCLUDE[tsql](../../../includes/tsql-md.md)] script files can be used to programmatically configure a replication topology.</span></span> <span data-ttu-id="f8b05-104">Para obtener más información, consulte [Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) (Conceptos sobre los procedimientos almacenados del sistema de replicación).</span><span class="sxs-lookup"><span data-stu-id="f8b05-104">For more information, see [Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="f8b05-105">Aunque no necesita actualizar scripts ejecutados por miembros del rol `sysadmin`, se recomienda modificar los ya existentes tal como se describe en este tema.</span><span class="sxs-lookup"><span data-stu-id="f8b05-105">Although you are not required to upgrade scripts that are executed by members of the `sysadmin` role, we recommend that you modify existing scripts as described in this topic.</span></span> <span data-ttu-id="f8b05-106">Especifique una cuenta que tenga permisos mínimos para cada agente de replicación tal como se describe en la sección sobre permisos requeridos por el agente del tema [Replication Agent Security Model](../security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="f8b05-106">Specify an account that has minimum permissions for each replication agent as described in the "Permissions Required By Agents" section of the topic [Replication Agent Security Model](../security/replication-agent-security-model.md).</span></span>  
  
 <span data-ttu-id="f8b05-107">Estas mejoras de seguridad, que hacen posible un mayor control sobre los permisos permitiéndole especificar de manera explícita las cuentas [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows bajo las cuales se ejecutan los trabajos del agente de replicación, afectan a los siguientes procedimientos almacenados de scripts existentes:</span><span class="sxs-lookup"><span data-stu-id="f8b05-107">These security improvements, which enable more control over permissions by allowing you to explicitly specify the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows accounts under which replication agent jobs are executed, affect the following stored procedures in existing scripts:</span></span>  
  
-   <span data-ttu-id="f8b05-108">**sp_addpublication_snapshot**:</span><span class="sxs-lookup"><span data-stu-id="f8b05-108">**sp_addpublication_snapshot**:</span></span>  
  
     <span data-ttu-id="f8b05-109">Ahora debe proporcionar las credenciales de Windows como **@job_login** y **@job_password** al ejecutar [sp_addpublication_snapshot &#40;&#41;de Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) para crear el trabajo en el que se ejecuta la agente de instantáneas en el distribuidor.</span><span class="sxs-lookup"><span data-stu-id="f8b05-109">You should now supply the Windows credentials as **@job_login** and **@job_password** when executing [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) to create the job under which the Snapshot Agent runs at the Distributor.</span></span>  
  
-   <span data-ttu-id="f8b05-110">**sp_addpushsubscription_agent**:</span><span class="sxs-lookup"><span data-stu-id="f8b05-110">**sp_addpushsubscription_agent**:</span></span>  
  
     <span data-ttu-id="f8b05-111">Debería ejecutar ahora [sp_addpushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql) para agregar explícitamente un trabajo y proporcionar las credenciales de Windows (**@job_login** y **@job_password**) bajo las que se ejecuta el Agente de distribución en el distribuidor.</span><span class="sxs-lookup"><span data-stu-id="f8b05-111">You should now execute [sp_addpushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql) to explicitly add a job and supply the Windows credentials (**@job_login** and **@job_password**) under which the Distribution Agent job runs at the Distributor.</span></span> <span data-ttu-id="f8b05-112">En las versiones de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] antes de [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], esto se hacía automáticamente cuando se creaba una suscripción de inserción.</span><span class="sxs-lookup"><span data-stu-id="f8b05-112">In versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] before [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], this was done automatically when a push subscription was created.</span></span>  
  
-   <span data-ttu-id="f8b05-113">**sp_addmergepushsubscription_agent**:</span><span class="sxs-lookup"><span data-stu-id="f8b05-113">**sp_addmergepushsubscription_agent**:</span></span>  
  
     <span data-ttu-id="f8b05-114">Debería ejecutar ahora [sp_addmergepushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepushsubscription-agent-transact-sql) para agregar explícitamente un trabajo y proporcionar las credenciales de Windows (**@job_login** y **@job_password**) bajo las que se ejecuta el Agente de mezcla en el distribuidor.</span><span class="sxs-lookup"><span data-stu-id="f8b05-114">You should now execute [sp_addmergepushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepushsubscription-agent-transact-sql) to explicitly add a job and supply the Windows credentials (**@job_login** and **@job_password**) under which the Merge Agent job runs at the Distributor.</span></span> <span data-ttu-id="f8b05-115">En las versiones de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] antes de [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], esto se hacía automáticamente cuando se creaba una suscripción de inserción.</span><span class="sxs-lookup"><span data-stu-id="f8b05-115">In versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] before [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], this was done automatically when a push subscription was created.</span></span>  
  
-   <span data-ttu-id="f8b05-116">**sp_addpullsubscription_agent**:</span><span class="sxs-lookup"><span data-stu-id="f8b05-116">**sp_addpullsubscription_agent**:</span></span>  
  
     <span data-ttu-id="f8b05-117">Ahora debe proporcionar las credenciales de Windows como **@job_login** y **@job_password** al ejecutar [sp_addpullsubscription_agent &#40;&#41;de Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql) para crear el trabajo en el que se ejecuta la agente de distribución en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="f8b05-117">You should now supply the Windows credentials as **@job_login** and **@job_password** when executing [sp_addpullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql) to create the job under which the Distribution Agent runs at the Subscriber.</span></span>  
  
-   <span data-ttu-id="f8b05-118">**sp_addmergepullsubscription_agent**:</span><span class="sxs-lookup"><span data-stu-id="f8b05-118">**sp_addmergepullsubscription_agent**:</span></span>  
  
     <span data-ttu-id="f8b05-119">Ahora debe proporcionar las credenciales de Windows como **@job_login** y **@job_password** al ejecutar [sp_addmergepullsubscription_agent &#40;&#41;de Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) para crear el trabajo en el que se ejecuta la agente de mezcla en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="f8b05-119">You should now supply the Windows credentials as **@job_login** and **@job_password** when executing [sp_addmergepullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) to create the job under which the Merge Agent runs at the Subscriber.</span></span>  
  
-   <span data-ttu-id="f8b05-120">**sp_addlogreader_agent**:</span><span class="sxs-lookup"><span data-stu-id="f8b05-120">**sp_addlogreader_agent**:</span></span>  
  
     <span data-ttu-id="f8b05-121">Debería ejecutar ahora [sp_addlogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql) para agregar manualmente el trabajo y proporcionar las credenciales de Windows bajo las que se ejecuta el Agente de registro del LOG en el distribuidor.</span><span class="sxs-lookup"><span data-stu-id="f8b05-121">You should now execute [sp_addlogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql) to manually add the job and supply the Windows credentials under which the Log Reader Agent runs at the Distributor.</span></span> <span data-ttu-id="f8b05-122">En las versiones de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] antes de [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], esto se hacía automáticamente cuando se creaba una publicación transaccional.</span><span class="sxs-lookup"><span data-stu-id="f8b05-122">In versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] before [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], this was done automatically when a transactional publication was created.</span></span>  
  
-   <span data-ttu-id="f8b05-123">**sp_addqreader_agent**:</span><span class="sxs-lookup"><span data-stu-id="f8b05-123">**sp_addqreader_agent**:</span></span>  
  
     <span data-ttu-id="f8b05-124">Debería ejecutar ahora [sp_addqreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addqreader-agent-transact-sql) para agregar manualmente el trabajo y proporcionar las credenciales de Windows bajo las que se ejecuta el Agente de lectura de cola en el distribuidor.</span><span class="sxs-lookup"><span data-stu-id="f8b05-124">You should now execute [sp_addqreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addqreader-agent-transact-sql) to manually add the job and supply the Windows credentials under which the Queue Reader Agent runs at the Distributor.</span></span> <span data-ttu-id="f8b05-125">En las versiones de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] antes de [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], esto se hacía automáticamente cuando se creaba una publicación transaccional que admitía actualización en cola.</span><span class="sxs-lookup"><span data-stu-id="f8b05-125">In versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] before [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], this was done automatically when a transactional publication that supported queued updating was created.</span></span>  
  
 <span data-ttu-id="f8b05-126">En el modelo de seguridad introducido en [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] , los agentes de replicación realizan siempre las conexiones a la instancia local de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] con autenticación de Windows mediante las credenciales proporcionadas en **@job_name** y **@job_password** .</span><span class="sxs-lookup"><span data-stu-id="f8b05-126">In the security model introduced in [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], replication agents always make connections to the local instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] with Windows Authentication using the credentials supplied in **@job_name** and **@job_password**.</span></span> <span data-ttu-id="f8b05-127">Para obtener información sobre los requisitos de cuentas de Windows utilizadas al ejecutar los trabajos del Agente de replicación, vea [Replication Agent Security Model](../security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="f8b05-127">For information about the requirements of Windows accounts used when running replication agent jobs, see [Replication Agent Security Model](../security/replication-agent-security-model.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="f8b05-128">Cuando sea posible, pida a los usuarios que proporcionen credenciales de seguridad en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="f8b05-128">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="f8b05-129">Si almacena las credenciales en un archivo de script, asegúrese de que dicho archivo está protegido.</span><span class="sxs-lookup"><span data-stu-id="f8b05-129">If you store credentials in a script file, ensure that the file itself is secured.</span></span>  
  
### <a name="to-upgrade-scripts-that-configure-a-snapshot-or-transactional-publication"></a><span data-ttu-id="f8b05-130">Para actualizar scripts que configuran una instantánea o publicación transaccional</span><span class="sxs-lookup"><span data-stu-id="f8b05-130">To upgrade scripts that configure a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="f8b05-131">En el script existente, antes de [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql), ejecute [sp_addlogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql) en el publicador de la base de datos de publicación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-131">In the existing script, before [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql), execute [sp_addlogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="f8b05-132">Especifique las credenciales de Windows con las que se ejecuta el Agente de registro del LOG para **@job_name** y **@job_password** .</span><span class="sxs-lookup"><span data-stu-id="f8b05-132">Specify the Windows credentials under which the Log Reader Agent runs for **@job_name** and **@job_password**.</span></span> <span data-ttu-id="f8b05-133">Si el agente va a usar autenticación de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] al conectarse al publicador, también debe especificar un valor de **0** para **@publisher_security_mode** y la información de inicio de sesión de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para **@publisher_login** y **@publisher_password**.</span><span class="sxs-lookup"><span data-stu-id="f8b05-133">If the agent will use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication when connecting to the Publisher, you must also specify a value of **0** for **@publisher_security_mode** and the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login information for **@publisher_login** and **@publisher_password**.</span></span> <span data-ttu-id="f8b05-134">Con ello se crea un trabajo del Agente de registro del LOG para la base de datos de publicación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-134">This creates a Log Reader Agent job for the publication database.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="f8b05-135">Este paso es solo para las publicaciones transaccionales y no se requiere para las publicaciones de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="f8b05-135">This step is only for transactional publications and is not required for snapshot publications.</span></span>  
  
2.  <span data-ttu-id="f8b05-136">(Opcional) Antes de [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql), ejecute [sp_addqreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addqreader-agent-transact-sql) en el distribuidor de la base de datos de distribución.</span><span class="sxs-lookup"><span data-stu-id="f8b05-136">(Optional) Before [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql), execute [sp_addqreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addqreader-agent-transact-sql) at the Distributor on the distribution database.</span></span> <span data-ttu-id="f8b05-137">Especifique las credenciales de Windows con las que se ejecuta el Agente de lectura de cola para **@job_name** y **@job_password** .</span><span class="sxs-lookup"><span data-stu-id="f8b05-137">Specify the Windows credentials under which the Queue Reader Agent runs for **@job_name** and **@job_password**.</span></span> <span data-ttu-id="f8b05-138">Con ello se crea un trabajo del Agente de lectura de cola para el distribuidor.</span><span class="sxs-lookup"><span data-stu-id="f8b05-138">This creates a Queue Reader Agent job for the Distributor.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="f8b05-139">Este paso solamente se requiere para las publicaciones transaccionales que admiten los suscriptores de actualización en cola.</span><span class="sxs-lookup"><span data-stu-id="f8b05-139">This step is only required for transactional publications that support queued updating subscribers.</span></span>  
  
3.  <span data-ttu-id="f8b05-140">(Opcional) Actualice la ejecución de [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) para establecer cualquier valor no predeterminado para los parámetros que implementan nuevas funcionalidades de replicación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-140">(Optional) Update the execution of [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) to set any non-default values for parameters that implement new replication functionalities.</span></span>  
  
4.  <span data-ttu-id="f8b05-141">Después de [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql), ejecute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) en el publicador de la base de datos de publicación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-141">After [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql), execute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="f8b05-142">Especifique **@publication** y las credenciales de Windows con las que se ejecuta el agente de instantáneas para **@job_name** y **@job_password** .</span><span class="sxs-lookup"><span data-stu-id="f8b05-142">Specify **@publication** and the Windows credentials under which the Snapshot Agent runs for **@job_name** and **@job_password**.</span></span> <span data-ttu-id="f8b05-143">Si el agente va a usar autenticación de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] al conectarse al publicador, también debe especificar un valor de **0** para **@publisher_security_mode** y la información de inicio de sesión de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para **@publisher_login** y **@publisher_password**.</span><span class="sxs-lookup"><span data-stu-id="f8b05-143">If the agent will use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication when connecting to the Publisher, you must also specify a value of **0** for **@publisher_security_mode** and the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login information for **@publisher_login** and **@publisher_password**.</span></span> <span data-ttu-id="f8b05-144">Esto crea un trabajo de Agente de instantáneas para la publicación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-144">This creates a Snapshot Agent job for the publication.</span></span>  
  
5.  <span data-ttu-id="f8b05-145">(Opcional) Actualice la ejecución de [sp_addarticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql) para establecer cualquier valor no predeterminado para los parámetros que implementan nuevas funcionalidades de replicación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-145">(Optional) Update the execution of [sp_addarticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql) to set any non-default values for parameters that implement new replication functionalities.</span></span>  
  
### <a name="to-upgrade-scripts-that-add-subscriptions-to-a-snapshot-or-transactional-publication"></a><span data-ttu-id="f8b05-146">Para actualizar scripts que agregan suscripciones a una instantánea o publicación transaccional</span><span class="sxs-lookup"><span data-stu-id="f8b05-146">To upgrade scripts that add subscriptions to a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="f8b05-147">Después de ejecutar el procedimiento almacenado que crea la suscripción, asegúrese de que ejecuta el procedimiento almacenado que crea un trabajo de Agente de distribución para sincronizar la suscripción.</span><span class="sxs-lookup"><span data-stu-id="f8b05-147">After executing the stored procedure that creates the subscription, ensure that you execute the stored procedure that creates a Distribution Agent job to synchronize the subscription.</span></span> <span data-ttu-id="f8b05-148">El procedimiento almacenado que utilice dependerá del tipo de suscripción.</span><span class="sxs-lookup"><span data-stu-id="f8b05-148">The stored procedure that you use will depend on the type of subscription.</span></span>  
  
    -   <span data-ttu-id="f8b05-149">Para una suscripción de extracción, actualice la ejecución de [sp_addpullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql) para proporcionar las credenciales de Windows bajo las que se ejecuta el Agente de distribución en el suscriptor para **@job_name** y **@job_password**.</span><span class="sxs-lookup"><span data-stu-id="f8b05-149">For a pull subscription, update the execution of [sp_addpullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql) to supply the Windows credentials under which the Distribution Agent runs at the Subscriber for **@job_name** and **@job_password**.</span></span> <span data-ttu-id="f8b05-150">Esto se hace después de la ejecución de [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="f8b05-150">This is done after the execution of [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span></span> <span data-ttu-id="f8b05-151">Para obtener más información, consulte [Create a Pull Subscription](../create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="f8b05-151">For more information, see [Create a Pull Subscription](../create-a-pull-subscription.md).</span></span>  
  
    -   <span data-ttu-id="f8b05-152">Para una suscripción de inserción, ejecute [sp_addpushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql) en el publicador.</span><span class="sxs-lookup"><span data-stu-id="f8b05-152">For a push subscription, execute [sp_addpushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql) at the Publisher.</span></span> <span data-ttu-id="f8b05-153">Especifique **@subscriber** **@subscriber_db** **@publication** las credenciales de Windows con las que se ejecuta el agente de distribución en el distribuidor para **@job_name** y **@job_password** , y una programación para este trabajo del agente.</span><span class="sxs-lookup"><span data-stu-id="f8b05-153">Specify **@subscriber**, **@subscriber_db**, **@publication**, Windows credentials under which the Distribution Agent runs at the Distributor for **@job_name** and **@job_password**, and a schedule for this agent job.</span></span> <span data-ttu-id="f8b05-154">Para obtener más información, consulte [Specify Synchronization Schedules](../specify-synchronization-schedules.md).</span><span class="sxs-lookup"><span data-stu-id="f8b05-154">For more information, see [Specify Synchronization Schedules](../specify-synchronization-schedules.md).</span></span> <span data-ttu-id="f8b05-155">Esto se hace después de la ejecución de [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="f8b05-155">This is done after the execution of [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="f8b05-156">Para obtener más información, consulte [Create a Push Subscription](../create-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="f8b05-156">For more information, see [Create a Push Subscription](../create-a-push-subscription.md).</span></span>  
  
### <a name="to-upgrade-scripts-that-configure-a-merge-publication"></a><span data-ttu-id="f8b05-157">Para actualizar scripts que configuran una publicación de combinación</span><span class="sxs-lookup"><span data-stu-id="f8b05-157">To upgrade scripts that configure a merge publication</span></span>  
  
1.  <span data-ttu-id="f8b05-158">(Opcional) En el script existente, actualice la ejecución de [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql) para establecer cualquier valor no predeterminado para los parámetros que implementan nuevas funcionalidades de la replicación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-158">(Optional) In the existing script, update the execution of [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql) to set any non-default values for parameters that implement new replication functionalities.</span></span>  
  
2.  <span data-ttu-id="f8b05-159">Después de [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql), ejecute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) en el publicador de la base de datos de publicación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-159">After [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql), execute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="f8b05-160">Especifique **@publication** y las credenciales de Windows con las que se ejecuta el agente de instantáneas para **@job_name** y **@job_password** .</span><span class="sxs-lookup"><span data-stu-id="f8b05-160">Specify **@publication** and the Windows credentials under which the Snapshot Agent runs for **@job_name** and **@job_password**.</span></span> <span data-ttu-id="f8b05-161">Si el agente va a usar autenticación de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] al conectarse al publicador, también debe especificar un valor de **0** para **@publisher_security_mode** y la información de inicio de sesión de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para **@publisher_login** y **@publisher_password**.</span><span class="sxs-lookup"><span data-stu-id="f8b05-161">If the agent will use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication when connecting to the Publisher, you must also specify a value of **0** for **@publisher_security_mode** and the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login information for **@publisher_login** and **@publisher_password**.</span></span> <span data-ttu-id="f8b05-162">Esto crea un trabajo de Agente de instantáneas para la publicación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-162">This creates a Snapshot Agent job for the publication.</span></span>  
  
3.  <span data-ttu-id="f8b05-163">(Opcional) Actualice la ejecución de [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) para establecer cualquier valor no predeterminado para los parámetros que implementan nuevas funcionalidades de replicación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-163">(Optional) Update the execution of [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) to set any non-default values for parameters that implement new replication functionalities.</span></span>  
  
### <a name="to-upgrade-scripts-that-add-subscriptions-to-a-merge-publication"></a><span data-ttu-id="f8b05-164">Para actualizar scripts que agregan suscripciones a una publicación de combinación</span><span class="sxs-lookup"><span data-stu-id="f8b05-164">To upgrade scripts that add subscriptions to a merge publication</span></span>  
  
1.  <span data-ttu-id="f8b05-165">Después de ejecutar el procedimiento almacenado que crea la suscripción, asegúrese de que ejecuta el procedimiento almacenado que crea un trabajo de Agente de mezcla para sincronizar la suscripción.</span><span class="sxs-lookup"><span data-stu-id="f8b05-165">After executing the stored procedure that creates the subscription, ensure that you execute the stored procedure that creates a Merge Agent job to synchronize the subscription.</span></span> <span data-ttu-id="f8b05-166">El procedimiento almacenado que utilice dependerá del tipo de suscripción.</span><span class="sxs-lookup"><span data-stu-id="f8b05-166">The stored procedure that you use will depend on the type of subscription.</span></span>  
  
    -   <span data-ttu-id="f8b05-167">Para una suscripción de extracción, actualice la ejecución de [sp_addmergepullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) para proporcionar las credenciales de Windows bajo las que se ejecuta el Agente de mezcla en el suscriptor para **@job_name** y **@job_password**.</span><span class="sxs-lookup"><span data-stu-id="f8b05-167">For a pull subscription, update the execution of [sp_addmergepullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) to supply the Windows credentials under which the Merge Agent runs at the Subscriber for **@job_name** and **@job_password**.</span></span> <span data-ttu-id="f8b05-168">Esto se hace después de la ejecución de [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="f8b05-168">This is done after the execution of [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql).</span></span> <span data-ttu-id="f8b05-169">Para obtener más información, consulte [Create a Pull Subscription](../create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="f8b05-169">For more information, see [Create a Pull Subscription](../create-a-pull-subscription.md).</span></span>  
  
    -   <span data-ttu-id="f8b05-170">Para una suscripción de inserción, ejecute [sp_addmergepushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepushsubscription-agent-transact-sql) en el publicador.</span><span class="sxs-lookup"><span data-stu-id="f8b05-170">For a push subscription, execute [sp_addmergepushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepushsubscription-agent-transact-sql) at the Publisher.</span></span> <span data-ttu-id="f8b05-171">Especifique **@subscriber** , **@subscriber_db** , **@publication** , las credenciales de Windows con las que se ejecuta el agente de mezcla en el distribuidor para **@job_name** y **@job_password** , y una programación para este trabajo del agente.</span><span class="sxs-lookup"><span data-stu-id="f8b05-171">Specify **@subscriber**, **@subscriber_db**, **@publication**, the Windows credentials under which the Merge Agent at the Distributor runs for **@job_name** and **@job_password**, and a schedule for this agent job.</span></span> <span data-ttu-id="f8b05-172">Para obtener más información, consulte [Specify Synchronization Schedules](../specify-synchronization-schedules.md).</span><span class="sxs-lookup"><span data-stu-id="f8b05-172">For more information, see [Specify Synchronization Schedules](../specify-synchronization-schedules.md).</span></span> <span data-ttu-id="f8b05-173">Esto se hace después de la ejecución de [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="f8b05-173">This is done after the execution of [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span></span> <span data-ttu-id="f8b05-174">Para obtener más información, consulte [Create a Push Subscription](../create-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="f8b05-174">For more information, see [Create a Push Subscription](../create-a-push-subscription.md).</span></span>  
  
## <a name="example"></a><span data-ttu-id="f8b05-175">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="f8b05-175">Example</span></span>  
 <span data-ttu-id="f8b05-176">A continuación, se muestra un ejemplo de un script [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] que crea una publicación transaccional para la tabla Product.</span><span class="sxs-lookup"><span data-stu-id="f8b05-176">The following is an example of a [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] script that creates a transactional publication for the Product table.</span></span> <span data-ttu-id="f8b05-177">Esta publicación admite la actualización inmediata con actualización en cola como conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="f8b05-177">This publication supports immediate updating with queued updating as failover.</span></span> <span data-ttu-id="f8b05-178">Los parámetros predeterminados se han quitado para mayor legibilidad.</span><span class="sxs-lookup"><span data-stu-id="f8b05-178">Default parameters have been removed for readability.</span></span>  
  
 [!code-sql[HowTo#sp_createtranpub_NWpreupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwtranpub80.sql#sp_createtranpub_nwpreupgrade)]  
  
## <a name="example"></a><span data-ttu-id="f8b05-179">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="f8b05-179">Example</span></span>  
 <span data-ttu-id="f8b05-180">A continuación, se muestra un ejemplo de actualización del script anterior, que crea una publicación transaccional, para ejecutarse correctamente para [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] y las versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="f8b05-180">The following is an example of upgrading the previous script, which creates a transactional publication, to run successfully for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions.</span></span> <span data-ttu-id="f8b05-181">Esta publicación admite la actualización inmediata con actualización en cola como conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="f8b05-181">This publication supports immediate updating with queued updating as failover.</span></span> <span data-ttu-id="f8b05-182">Los valores predeterminados de los nuevos parámetros se ha declarado explícitamente.</span><span class="sxs-lookup"><span data-stu-id="f8b05-182">Defaults for new parameters have been explicitly declared.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f8b05-183"> Las credenciales de Windows se proporcionan en el tiempo de ejecución mediante las variables de scripting **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="f8b05-183">Windows credentials are supplied at runtime using **sqlcmd** scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_createtranpub_NWpostupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwtranpublication.sql#sp_createtranpub_nwpostupgrade)]  
  
## <a name="example"></a><span data-ttu-id="f8b05-184">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="f8b05-184">Example</span></span>  
 <span data-ttu-id="f8b05-185">A continuación, se muestra un ejemplo de un script [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] que crea una publicación de combinación para la tabla Customers.</span><span class="sxs-lookup"><span data-stu-id="f8b05-185">The following is an example of a [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] script that creates a merge publication for the Customers table.</span></span> <span data-ttu-id="f8b05-186">Los parámetros predeterminados se han quitado para mayor legibilidad.</span><span class="sxs-lookup"><span data-stu-id="f8b05-186">Default parameters have been removed for readability.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepub_NWpreupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwmergepub80.sql#sp_createmergepub_nwpreupgrade)]  
  
## <a name="example"></a><span data-ttu-id="f8b05-187">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="f8b05-187">Example</span></span>  
 <span data-ttu-id="f8b05-188">A continuación, se muestra un ejemplo del script anterior, que crea una publicación de combinación, actualizada para ejecutarse correctamente para [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] y las versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="f8b05-188">The following is an example of the previous script, which creates a merge publication, upgraded to run successfully for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions.</span></span> <span data-ttu-id="f8b05-189">Los valores predeterminados de los nuevos parámetros se ha declarado explícitamente.</span><span class="sxs-lookup"><span data-stu-id="f8b05-189">Defaults for new parameters have been explicitly declared.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f8b05-190"> Las credenciales de Windows se proporcionan en el tiempo de ejecución mediante las variables de scripting **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="f8b05-190">Windows credentials are supplied at runtime using **sqlcmd** scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepub_NWpostupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwmergepublication.sql#sp_createmergepub_nwpostupgrade)]  
  
## <a name="example"></a><span data-ttu-id="f8b05-191">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="f8b05-191">Example</span></span>  
 <span data-ttu-id="f8b05-192">A continuación, se muestra un ejemplo de un script [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] que crea una suscripción de inserción a una publicación transaccional.</span><span class="sxs-lookup"><span data-stu-id="f8b05-192">The following is an example of a [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] script that creates a push subscription to a transactional publication.</span></span> <span data-ttu-id="f8b05-193">Los parámetros predeterminados se han quitado para mayor legibilidad.</span><span class="sxs-lookup"><span data-stu-id="f8b05-193">Default parameters have been removed for readability.</span></span>  
  
 [!code-sql[HowTo#sp_createtranpushsub_NWpreupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwtranpushsub80.sql#sp_createtranpushsub_nwpreupgrade)]  
  
## <a name="example"></a><span data-ttu-id="f8b05-194">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="f8b05-194">Example</span></span>  
 <span data-ttu-id="f8b05-195">A continuación, se muestra un ejemplo de actualización del script anterior, que crea una suscripción de inserción, para ejecutarse correctamente para [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] y las versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="f8b05-195">The following is an example of the previous script, which creates a push subscription to a transactional publication, upgraded to run successfully for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions.</span></span> <span data-ttu-id="f8b05-196">Los valores predeterminados de los nuevos parámetros se ha declarado explícitamente.</span><span class="sxs-lookup"><span data-stu-id="f8b05-196">Defaults for new parameters have been explicitly declared.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f8b05-197"> Las credenciales de Windows se proporcionan en el tiempo de ejecución mediante las variables de scripting **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="f8b05-197">Windows credentials are supplied at runtime using **sqlcmd** scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_createtranpushsub_NWpostupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwpushsub.sql#sp_createtranpushsub_nwpostupgrade)]  
  
## <a name="example"></a><span data-ttu-id="f8b05-198">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="f8b05-198">Example</span></span>  
 <span data-ttu-id="f8b05-199">A continuación, se muestra un ejemplo de un script [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] que crea una suscripción de inserción a una publicación de combinación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-199">The following is an example of a [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] script that creates a push subscription to a merge publication.</span></span> <span data-ttu-id="f8b05-200">Los parámetros predeterminados se han quitado para mayor legibilidad.</span><span class="sxs-lookup"><span data-stu-id="f8b05-200">Default parameters have been removed for readability.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepushsub_NWpreupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwmergepushsub80.sql#sp_createmergepushsub_nwpreupgrade)]  
  
## <a name="example"></a><span data-ttu-id="f8b05-201">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="f8b05-201">Example</span></span>  
 <span data-ttu-id="f8b05-202">A continuación, se muestra un ejemplo del script anterior, que crea una suscripción de inserción en una publicación de combinación, actualizado para ejecutarse correctamente para [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] y las versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="f8b05-202">The following is an example of the previous script, which creates a push subscription to a merge publication, upgraded to run successfully for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions.</span></span> <span data-ttu-id="f8b05-203">Los valores predeterminados de los nuevos parámetros se ha declarado explícitamente.</span><span class="sxs-lookup"><span data-stu-id="f8b05-203">Defaults for new parameters have been explicitly declared.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f8b05-204"> Las credenciales de Windows se proporcionan en el tiempo de ejecución mediante las variables de scripting **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="f8b05-204">Windows credentials are supplied at runtime using **sqlcmd** scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepushsub_NWpostupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwpushsub.sql#sp_createmergepushsub_nwpostupgrade)]  
  
## <a name="example"></a><span data-ttu-id="f8b05-205">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="f8b05-205">Example</span></span>  
 <span data-ttu-id="f8b05-206">A continuación, se muestra un ejemplo de un script [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] que crea una suscripción de extracción a una publicación transaccional.</span><span class="sxs-lookup"><span data-stu-id="f8b05-206">The following is an example of a [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] script that creates a pull subscription to a transactional publication.</span></span> <span data-ttu-id="f8b05-207">Los parámetros predeterminados se han quitado para mayor legibilidad.</span><span class="sxs-lookup"><span data-stu-id="f8b05-207">Default parameters have been removed for readability.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepushsub_NWpreupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwmergepushsub80.sql#sp_createmergepushsub_nwpreupgrade)]  
  
## <a name="example"></a><span data-ttu-id="f8b05-208">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="f8b05-208">Example</span></span>  
 <span data-ttu-id="f8b05-209">A continuación, se muestra un ejemplo de actualización del script anterior, que crea una suscripción de extracción, actualizado para ejecutarse correctamente para [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] y las versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="f8b05-209">The following is an example of the previous script, which creates a pull subscription to a transactional publication, upgraded to run successfully for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions.</span></span> <span data-ttu-id="f8b05-210">Los valores predeterminados de los nuevos parámetros se ha declarado explícitamente.</span><span class="sxs-lookup"><span data-stu-id="f8b05-210">Defaults for new parameters have been explicitly declared.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f8b05-211"> Las credenciales de Windows se proporcionan en el tiempo de ejecución mediante las variables de scripting **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="f8b05-211">Windows credentials are supplied at runtime using **sqlcmd** scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_createtranpullsub_NWpostupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwpullsub.sql#sp_createtranpullsub_nwpostupgrade)]  
  
## <a name="example"></a><span data-ttu-id="f8b05-212">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="f8b05-212">Example</span></span>  
 <span data-ttu-id="f8b05-213">A continuación, se muestra un ejemplo de un script [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] que crea una suscripción de extracción a una publicación de combinación.</span><span class="sxs-lookup"><span data-stu-id="f8b05-213">The following is an example of a [!INCLUDE[ssVersion2000](../../../includes/ssversion2000-md.md)] script that creates a pull subscription to a merge publication.</span></span> <span data-ttu-id="f8b05-214">Los parámetros predeterminados se han quitado para mayor legibilidad.</span><span class="sxs-lookup"><span data-stu-id="f8b05-214">Default parameters have been removed for readability.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepullsub_NWpreupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwmergepullsub80.sql#sp_createmergepullsub_nwpreupgrade)]  
  
## <a name="example"></a><span data-ttu-id="f8b05-215">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="f8b05-215">Example</span></span>  
 <span data-ttu-id="f8b05-216">A continuación, se muestra un ejemplo del script anterior, que crea una suscripción de extracción en una publicación de combinación, actualizado para ejecutarse correctamente para [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] y las versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="f8b05-216">The following is an example of the previous script, which creates a pull subscription to a merge publication, upgraded to run successfully for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions.</span></span> <span data-ttu-id="f8b05-217">Los valores predeterminados de los nuevos parámetros se ha declarado explícitamente.</span><span class="sxs-lookup"><span data-stu-id="f8b05-217">Defaults for new parameters have been explicitly declared.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f8b05-218"> Las credenciales de Windows se proporcionan en el tiempo de ejecución mediante las variables de scripting **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="f8b05-218">Windows credentials are supplied at runtime using **sqlcmd** scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_createmergepullsub_NWpostupgrade](../../../snippets/tsql/SQL15/replication/howto/tsql/createnwpullsub.sql#sp_createmergepullsub_nwpostupgrade)]  
  
## <a name="see-also"></a><span data-ttu-id="f8b05-219">Consulte también</span><span class="sxs-lookup"><span data-stu-id="f8b05-219">See Also</span></span>  
 <span data-ttu-id="f8b05-220">[Create a Publication](../publish/create-a-publication.md) </span><span class="sxs-lookup"><span data-stu-id="f8b05-220">[Create a Publication](../publish/create-a-publication.md) </span></span>  
 <span data-ttu-id="f8b05-221">[Create a Push Subscription](../create-a-push-subscription.md) </span><span class="sxs-lookup"><span data-stu-id="f8b05-221">[Create a Push Subscription](../create-a-push-subscription.md) </span></span>  
 <span data-ttu-id="f8b05-222">[Create a Pull Subscription](../create-a-pull-subscription.md) </span><span class="sxs-lookup"><span data-stu-id="f8b05-222">[Create a Pull Subscription](../create-a-pull-subscription.md) </span></span>  
 <span data-ttu-id="f8b05-223">[View and Modify Replication Security Settings](../security/view-and-modify-replication-security-settings.md)  (Ver y modificar la configuración de seguridad de la replicación)</span><span class="sxs-lookup"><span data-stu-id="f8b05-223">[View and Modify Replication Security Settings](../security/view-and-modify-replication-security-settings.md) </span></span>  
 <span data-ttu-id="f8b05-224">[MSSQL_ENG021797](../mssql-eng021797.md) </span><span class="sxs-lookup"><span data-stu-id="f8b05-224">[MSSQL_ENG021797](../mssql-eng021797.md) </span></span>  
 <span data-ttu-id="f8b05-225">[MSSQL_ENG021798](../mssql-eng021798.md) </span><span class="sxs-lookup"><span data-stu-id="f8b05-225">[MSSQL_ENG021798](../mssql-eng021798.md) </span></span>  
 <span data-ttu-id="f8b05-226">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="f8b05-226">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 [<span data-ttu-id="f8b05-227">Actualizar bases de datos replicadas</span><span class="sxs-lookup"><span data-stu-id="f8b05-227">Upgrade Replicated Databases</span></span>](../../../database-engine/install-windows/upgrade-replicated-databases.md)  
  
  
