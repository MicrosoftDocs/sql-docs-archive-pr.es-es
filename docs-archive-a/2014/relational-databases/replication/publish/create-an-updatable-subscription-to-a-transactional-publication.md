---
title: Crear una suscripción actualizable a una publicación transaccional (Management Studio) | Microsoft Docs
ms.custom: ''
ms.date: 07/20/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- updateable transactional subscriptions
- updateable transactional subscriptions, SSMS
ms.assetid: f9ef89ed-36f6-431b-8843-25d445ec137f
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: e784216116bdb9ab308dff5fa998740b0fa459b0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87750686"
---
# <a name="create-an-updatable-subscription-to-a-transactional-publication-management-studio"></a><span data-ttu-id="b8299-102">Crear una suscripción actualizable a una publicación transaccional [Management Studio]</span><span class="sxs-lookup"><span data-stu-id="b8299-102">Create an Updatable Subscription to a Transactional Publication (Management Studio)</span></span>

> [!NOTE]  
>  [!INCLUDE[ssNoteDepFutureAvoid](../../../includes/ssnotedepfutureavoid-md.md)]  
 
<span data-ttu-id="b8299-103">La replicación transaccional permite que los cambios realizados en un suscriptor puedan volver a propagarse al publicador utilizando suscripciones de actualización inmediatas o en cola.</span><span class="sxs-lookup"><span data-stu-id="b8299-103">Transactional replication enables changes made at a Subscriber to be propagated back to the Publisher using either immediate or queued updating subscriptions.</span></span> <span data-ttu-id="b8299-104">Puede crear las suscripciones de actualización mediante programación usando procedimientos almacenados de replicación.</span><span class="sxs-lookup"><span data-stu-id="b8299-104">You can create an updating subscription programmatically using replication stored procedures.</span></span>

<span data-ttu-id="b8299-105">Configure suscripciones actualizables en la página **Suscripciones actualizables** del **Asistente para nuevas suscripciones**.</span><span class="sxs-lookup"><span data-stu-id="b8299-105">Configure updatable subscriptions on the **Updatable Subscriptions** page of the **New Subscription Wizard**.</span></span> <span data-ttu-id="b8299-106">Esta página solo está disponible si ha habilitado una publicación transaccional para suscripciones actualizables.</span><span class="sxs-lookup"><span data-stu-id="b8299-106">This page is only available if you have enabled a transactional publication for updatable subscriptions.</span></span> <span data-ttu-id="b8299-107">Para obtener más información sobre cómo habilitar las suscripciones actualizables, vea [Habilitar suscripciones actualizables para publicaciones transaccionales](enable-updating-subscriptions-for-transactional-publications.md).</span><span class="sxs-lookup"><span data-stu-id="b8299-107">For more information about enabling updatable subscriptions, see [Enable Updating Subscriptions for Transactional Publications](enable-updating-subscriptions-for-transactional-publications.md).</span></span>   
  
## <a name="configure-an-updatable-subscription-from-the-publisher"></a><span data-ttu-id="b8299-108">Configuración de una suscripción actualizable desde el publicador</span><span class="sxs-lookup"><span data-stu-id="b8299-108">Configure an updatable subscription from the Publisher</span></span>  

1. <span data-ttu-id="b8299-109">Conéctese al publicador en Microsoft SQL Server Management Studio y, a continuación, expanda el nodo del servidor.</span><span class="sxs-lookup"><span data-stu-id="b8299-109">Connect to the Publisher in Microsoft SQL Server Management Studio, and then expand the server node.</span></span>
2. <span data-ttu-id="b8299-110">Expanda la carpeta **Replicación** y, a continuación, expanda la carpeta **Publicaciones locales** .</span><span class="sxs-lookup"><span data-stu-id="b8299-110">Expand the **Replication** folder, and then expand the **Local Publications** folder.</span></span>
3. <span data-ttu-id="b8299-111">Haga clic con el botón derecho en una publicación transaccional habilitada para actualizar suscripciones y, a continuación, haga clic en **Nuevas suscripciones**.</span><span class="sxs-lookup"><span data-stu-id="b8299-111">Right-click a transactional publication enabled for updating subscriptions, and then click **New Subscriptions**.</span></span>
4. <span data-ttu-id="b8299-112">Siga las indicaciones del asistente para especificar opciones para la suscripción, por ejemplo dónde debe ejecutarse el Agente de distribución.</span><span class="sxs-lookup"><span data-stu-id="b8299-112">Follow pages in the wizard to specify options for the subscription, such as where the Distribution Agent should run.</span></span>
5. <span data-ttu-id="b8299-113">En la página **Suscripciones actualizables** del **Asistente para nuevas suscripciones**, asegúrese de que **Replicar está seleccionado**.</span><span class="sxs-lookup"><span data-stu-id="b8299-113">On the **Updatable Subscriptions** page of the **New Subscription Wizard**, ensure **Replicate** is selected.</span></span>
6. <span data-ttu-id="b8299-114">Seleccione una opción en la lista desplegable **Confirmar en el publicador**:</span><span class="sxs-lookup"><span data-stu-id="b8299-114">Select an option from the **Commit at Publisher** drop-down list:</span></span>

    *  <span data-ttu-id="b8299-115">Para utilizar las suscripciones de actualización inmediata, seleccione **Confirmar cambios simultáneamente**.</span><span class="sxs-lookup"><span data-stu-id="b8299-115">To use immediate updating subscriptions, select **Simultaneously commit changes**.</span></span> <span data-ttu-id="b8299-116">Si selecciona esta opción y la publicación permite suscripciones de actualización en cola (el valor predeterminado para suscripciones creadas con el Asistente para nueva publicación), la propiedad **update_mode** de la suscripción se establece en **failover**.</span><span class="sxs-lookup"><span data-stu-id="b8299-116">If you select this option, and the publication allows queued updating subscriptions (the default for publications created with the New Publication Wizard), the subscription property **update_mode** is set to **failover**.</span></span> <span data-ttu-id="b8299-117">Este modo le permite cambiar a la actualización en cola más adelante en caso necesario.</span><span class="sxs-lookup"><span data-stu-id="b8299-117">This mode allows you to switch to queued updating later if necessary.</span></span>
    *  <span data-ttu-id="b8299-118">Para utilizar las suscripciones de actualización en cola, seleccione **Poner en cola cambios y confirmar cuando sea posible**.</span><span class="sxs-lookup"><span data-stu-id="b8299-118">To use queued updating subscriptions, select **Queue changes and commit when possible**.</span></span> <span data-ttu-id="b8299-119">Si selecciona esta opción y la publicación permite suscripciones de actualización inmediata (el valor predeterminado para suscripciones creadas con el Asistente para nueva publicación), y el suscriptor se está ejecutando en SQL Server 2005 o una versión posterior, la propiedad **update_mode** de la suscripción se establece en queued failover.</span><span class="sxs-lookup"><span data-stu-id="b8299-119">If you select this option, and the publication allows immediate updating subscriptions (the default for publications created with the New Publication Wizard), and the Subscriber is running SQL Server 2005 or a later version, the subscription property **update_mode** is set to queued failover.</span></span> <span data-ttu-id="b8299-120">Este modo le permite cambiar a la actualización inmediata más adelante en caso necesario.</span><span class="sxs-lookup"><span data-stu-id="b8299-120">This mode allows you to switch to immediate updating later if necessary.</span></span>

    <span data-ttu-id="b8299-121">Para obtener más información sobre cómo cambiar los modos de actualización, consulte [Cambiar entre modos de actualización para una suscripción transaccional actualizable](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="b8299-121">For information about switching update modes, see [Switch Between Update Modes for an Updatable Transactional Subscription](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span></span>

7. <span data-ttu-id="b8299-122">La página **Inicio de sesión para suscripciones actualizables** se muestra para las suscripciones que utilizan la actualización inmediata o tienen **update_mode** establecida en **queued failover**.</span><span class="sxs-lookup"><span data-stu-id="b8299-122">The **Login for Updatable Subscriptions** page is displayed for subscriptions that use immediate updating or have **update_mode** set to **queued failover**.</span></span> <span data-ttu-id="b8299-123">En la página **Inicio de sesión para suscripciones actualizables**, especifique un servidor vinculado mediante el que se realicen las conexiones al publicador para las suscripciones de actualización inmediata.</span><span class="sxs-lookup"><span data-stu-id="b8299-123">On the **Login for Updatable Subscriptions** page, specify a linked server over which connections to the Publisher are made for immediate updating subscriptions.</span></span> <span data-ttu-id="b8299-124">Las conexiones las utilizan los desencadenadores que se activan en el suscriptor y propagan los cambios al publicador.</span><span class="sxs-lookup"><span data-stu-id="b8299-124">Connections are used by the triggers that fire at the Subscriber and propagate changes to the Publisher.</span></span> <span data-ttu-id="b8299-125">Seleccione una de las siguientes opciones:</span><span class="sxs-lookup"><span data-stu-id="b8299-125">Select one of the following options:</span></span>

    * <span data-ttu-id="b8299-126">**Crear un servidor vinculado que se conecte mediante la autenticación de SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="b8299-126">**Create a linked server that connects using SQL Server Authentication.**</span></span> <span data-ttu-id="b8299-127">Seleccione esta opción si no ha definido un servidor remoto o un servidor vinculado entre el suscriptor y el publicador.</span><span class="sxs-lookup"><span data-stu-id="b8299-127">Select this option if you have not defined a remote server or linked server between the Subscriber and the Publisher.</span></span> <span data-ttu-id="b8299-128">La replicación crea un servidor vinculado automáticamente.</span><span class="sxs-lookup"><span data-stu-id="b8299-128">Replication creates a linked server for you.</span></span> <span data-ttu-id="b8299-129">La cuenta que especifique debe existir ya en el publicador.</span><span class="sxs-lookup"><span data-stu-id="b8299-129">The account you specify must already exist at the Publisher.</span></span>
    * <span data-ttu-id="b8299-130">**Utilizar un servidor vinculado o un servidor remoto que ya está definido.**</span><span class="sxs-lookup"><span data-stu-id="b8299-130">**Use a linked server or remote server that you have already defined.**</span></span> <span data-ttu-id="b8299-131">Seleccione esta opción si ha definido un servidor remoto o un servidor vinculado entre el suscriptor y el publicador mediante [sp_addserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addserver-transact-sql), [sp_addlinkedserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql), SQL Server Management Studio u otro método.</span><span class="sxs-lookup"><span data-stu-id="b8299-131">Select this option if you have defined a remote server or linked server between the Subscriber and the Publisher using [sp_addserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addserver-transact-sql), [sp_addlinkedserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql), SQL Server Management Studio, or another method.</span></span>

    <span data-ttu-id="b8299-132">Para obtener información acerca de los permisos que requiere la cuenta del servidor vinculado, vea la sección sobre las **suscripciones de actualización** en [Escriba aquí la descripción del vínculo](../security/secure-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="b8299-132">For information about the permissions required by the linked server account, see the **Queued Updating Subscriptions** of [enter link description here](../security/secure-the-subscriber.md).</span></span>

8. <span data-ttu-id="b8299-133">Finalice el asistente.</span><span class="sxs-lookup"><span data-stu-id="b8299-133">Complete the wizard.</span></span>

## <a name="configure-an-updatable-subscription-from-the-subscriber"></a><span data-ttu-id="b8299-134">Configuración de una suscripción actualizable desde el suscriptor</span><span class="sxs-lookup"><span data-stu-id="b8299-134">Configure an updatable subscription from the Subscriber</span></span>


1. <span data-ttu-id="b8299-135">Conéctese al suscriptor en SQL Server Management Studio y expanda el nodo de servidor.</span><span class="sxs-lookup"><span data-stu-id="b8299-135">Connect to the Subscriber in SQL Server Management Studio, and then expand the server node.</span></span>
2. <span data-ttu-id="b8299-136">Expanda la carpeta **Replicación** .</span><span class="sxs-lookup"><span data-stu-id="b8299-136">Expand the **Replication** folder.</span></span>
3. <span data-ttu-id="b8299-137">Haga clic con el botón secundario en la carpeta **Suscripciones locales** y, a continuación, haga clic en **Nuevas suscripciones**.</span><span class="sxs-lookup"><span data-stu-id="b8299-137">Right-click the **Local Subscriptions** folder, and then click **New Subscriptions**.</span></span>
4. <span data-ttu-id="b8299-138">En la página **Publicación** del **Asistente para nuevas suscripciones**, seleccione **Buscar SQL Server Publisher** de la lista desplegable **Publicador**.</span><span class="sxs-lookup"><span data-stu-id="b8299-138">On the **Publication** page of the **New Subscription Wizard**, select **Find SQL Server Publisher** from the **Publisher** drop-down list.</span></span>
5. <span data-ttu-id="b8299-139">Conéctese al publicador en el cuadro de diálogo **Conectar al servidor** .</span><span class="sxs-lookup"><span data-stu-id="b8299-139">Connect to the Publisher in the **Connect to Server** dialog box.</span></span>
6. <span data-ttu-id="b8299-140">Seleccione una publicación transaccional habilitada para suscripciones de actualización en la página **Publicación**.</span><span class="sxs-lookup"><span data-stu-id="b8299-140">Select a transactional publication enabled for updating subscriptions on the **Publication** page.</span></span>
7. <span data-ttu-id="b8299-141">Siga las indicaciones del asistente para especificar opciones para la suscripción, por ejemplo dónde debe ejecutarse el Agente de distribución.</span><span class="sxs-lookup"><span data-stu-id="b8299-141">Follow pages in the wizard to specify options for the subscription, such as where the Distribution Agent should run.</span></span>
8. <span data-ttu-id="b8299-142">En la página **Suscripciones actualizables** del Asistente para nuevas suscripciones, asegúrese de que **Replicar** está seleccionado.</span><span class="sxs-lookup"><span data-stu-id="b8299-142">On the **Updatable Subscriptions** page of the New Subscription Wizard, ensure **Replicate** is selected.</span></span>
9. <span data-ttu-id="b8299-143">Seleccione una opción en la lista desplegable **Confirmar en el publicador**:</span><span class="sxs-lookup"><span data-stu-id="b8299-143">Select an option from the **Commit at Publisher** drop-down list:</span></span>

    * <span data-ttu-id="b8299-144">Para utilizar las suscripciones de actualización inmediata, seleccione **Confirmar cambios simultáneamente**.</span><span class="sxs-lookup"><span data-stu-id="b8299-144">To use immediate updating subscriptions, select **Simultaneously commit changes**.</span></span> <span data-ttu-id="b8299-145">Si selecciona esta opción y la publicación permite suscripciones de actualización en cola (el valor predeterminado para suscripciones creadas con el Asistente para nueva publicación), la propiedad **update_mode** de la suscripción se establece en **failover**.</span><span class="sxs-lookup"><span data-stu-id="b8299-145">If you select this option, and the publication allows queued updating subscriptions (the default for publications created with the New Publication Wizard), the subscription property **update_mode** is set to **failover**.</span></span> <span data-ttu-id="b8299-146">Este modo le permite cambiar a la actualización en cola más adelante en caso necesario.</span><span class="sxs-lookup"><span data-stu-id="b8299-146">This mode allows you to switch to queued updating later if necessary.</span></span>
    * <span data-ttu-id="b8299-147">Para utilizar las suscripciones de actualización en cola, seleccione **Poner en cola cambios y confirmar cuando sea posible**.</span><span class="sxs-lookup"><span data-stu-id="b8299-147">To use queued updating subscriptions, select **Queue changes and commit when possible**.</span></span> <span data-ttu-id="b8299-148">Si selecciona esta opción y la publicación permite suscripciones de actualización inmediata (el valor predeterminado para suscripciones creadas con el Asistente para nueva publicación), y el suscriptor se está ejecutando en SQL Server 2005 o una versión posterior, la propiedad **update_mode** de la suscripción se establece en **queued failover**.</span><span class="sxs-lookup"><span data-stu-id="b8299-148">If you select this option, and the publication allows immediate updating subscriptions (the default for publications created with the New Publication Wizard), and the Subscriber is running SQL Server 2005 or a later version, the subscription property **update_mode** is set to queued **failover**.</span></span> <span data-ttu-id="b8299-149">Este modo le permite cambiar a la actualización inmediata más adelante en caso necesario.</span><span class="sxs-lookup"><span data-stu-id="b8299-149">This mode allows you to switch to immediate updating later if necessary.</span></span>

    <span data-ttu-id="b8299-150">Para obtener más información sobre cómo cambiar los modos de actualización, consulte [Cambiar entre modos de actualización para una suscripción transaccional actualizable](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="b8299-150">For information about switching update modes, see [Switch Between Update Modes for an Updatable Transactional Subscription](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span></span>

10. <span data-ttu-id="b8299-151">La página **Inicio de sesión para suscripciones actualizables** se muestra para las suscripciones que utilizan la actualización inmediata o tienen **update_mode** establecida en **queued failover**.</span><span class="sxs-lookup"><span data-stu-id="b8299-151">The **Login for Updatable Subscriptions** page is displayed for subscriptions that use immediate updating or have **update_mode** set to queued **failover**.</span></span> <span data-ttu-id="b8299-152">En la página **Inicio de sesión para suscripciones actualizables**, especifique un servidor vinculado mediante el que se realicen las conexiones al publicador para las suscripciones de actualización inmediata.</span><span class="sxs-lookup"><span data-stu-id="b8299-152">On the **Login for Updatable Subscriptions** page, specify a linked server over which connections to the Publisher are made for immediate updating subscriptions.</span></span> <span data-ttu-id="b8299-153">Las conexiones las utilizan los desencadenadores que se activan en el suscriptor y propagan los cambios al publicador.</span><span class="sxs-lookup"><span data-stu-id="b8299-153">Connections are used by the triggers that fire at the Subscriber and propagate changes to the Publisher.</span></span> <span data-ttu-id="b8299-154">Seleccione una de las siguientes opciones:</span><span class="sxs-lookup"><span data-stu-id="b8299-154">Select one of the following options:</span></span>

    * <span data-ttu-id="b8299-155">**Crear un servidor vinculado que se conecte mediante la autenticación de SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="b8299-155">**Create a linked server that connects using SQL Server Authentication.**</span></span> <span data-ttu-id="b8299-156">Seleccione esta opción si no ha definido un servidor remoto o un servidor vinculado entre el suscriptor y el publicador.</span><span class="sxs-lookup"><span data-stu-id="b8299-156">Select this option if you have not defined a remote server or linked server between the Subscriber and the Publisher.</span></span> <span data-ttu-id="b8299-157">La replicación crea un servidor vinculado automáticamente.</span><span class="sxs-lookup"><span data-stu-id="b8299-157">Replication creates a linked server for you.</span></span> <span data-ttu-id="b8299-158">La cuenta que especifique debe existir ya en el publicador.</span><span class="sxs-lookup"><span data-stu-id="b8299-158">The account you specify must already exist at the Publisher.</span></span>
    * <span data-ttu-id="b8299-159">**Utilizar un servidor vinculado o un servidor remoto que ya está definido.**</span><span class="sxs-lookup"><span data-stu-id="b8299-159">**Use a linked server or remote server that you have already defined.**</span></span> <span data-ttu-id="b8299-160">Seleccione esta opción si ha definido un servidor remoto o un servidor vinculado entre el suscriptor y el publicador mediante [sp_addserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addserver-transact-sql), [sp_addlinkedserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql), SQL Server Management Studio u otro método.</span><span class="sxs-lookup"><span data-stu-id="b8299-160">Select this option if you have defined a remote server or linked server between the Subscriber and the Publisher using [sp_addserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addserver-transact-sql), [sp_addlinkedserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql), SQL Server Management Studio, or another method.</span></span>

    <span data-ttu-id="b8299-161">Para obtener información acerca de los permisos que requiere la cuenta del servidor vinculado, vea la sección sobre las **suscripciones de actualización** en [Escriba aquí la descripción del vínculo](../security/secure-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="b8299-161">For information about the permissions required by the linked server account, see the **Queued Updating Subscriptions** of [enter link description here](../security/secure-the-subscriber.md).</span></span>

11. <span data-ttu-id="b8299-162">Finalice el asistente.</span><span class="sxs-lookup"><span data-stu-id="b8299-162">Complete the wizard.</span></span>

## <a name="create-an-immediate-updating-pull-subscription"></a><span data-ttu-id="b8299-163">Creación de una suscripción de extracción de actualización inmediata</span><span class="sxs-lookup"><span data-stu-id="b8299-163">Create an immediate updating pull subscription</span></span>

1. <span data-ttu-id="b8299-164">En el publicado, ejecute [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql)para comprobar que la publicación admite las suscripciones de actualización inmediata.</span><span class="sxs-lookup"><span data-stu-id="b8299-164">At the Publisher, verify that the publication supports immediate updating subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="b8299-165">Si el valor de `allow_sync_tran` en el conjunto de resultados es `1`, la publicación admite las suscripciones de actualización inmediata.</span><span class="sxs-lookup"><span data-stu-id="b8299-165">If the value of `allow_sync_tran` in the result set is `1`, the publication supports immediate updating subscriptions.</span></span>
    * <span data-ttu-id="b8299-166">Si el valor de `allow_sync_tran` en el conjunto de resultados es `0`, la publicación se debe volver a crear con suscripciones de actualización inmediata habilitadas.</span><span class="sxs-lookup"><span data-stu-id="b8299-166">If the value of `allow_sync_tran` in the result set is `0`, the publication must be recreated with immediate updating subscriptions enabled.</span></span>

2. <span data-ttu-id="b8299-167">En el publicador, ejecute [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql)para comprobar que la publicación admite las suscripciones de extracción.</span><span class="sxs-lookup"><span data-stu-id="b8299-167">At the Publisher, verify that the publication supports pull subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="b8299-168">Si el valor de `allow_pull` en el conjunto de resultados es `1`, la publicación admite las suscripciones de extracción.</span><span class="sxs-lookup"><span data-stu-id="b8299-168">If the value of `allow_pull` in the result set is `1`, the publication supports pull subscriptions.</span></span>
    * <span data-ttu-id="b8299-169">Si el valor de `allow_pull` es `0`, ejecute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql)y especifique `allow_pull` para `@property` y `true` para `@value`.</span><span class="sxs-lookup"><span data-stu-id="b8299-169">If the value of `allow_pull` is `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying `allow_pull` for `@property` and `true` for `@value`.</span></span> 

3. <span data-ttu-id="b8299-170">En el suscriptor, ejecute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b8299-170">At the Subscriber, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span></span> <span data-ttu-id="b8299-171">Especifique `@publisher` , `@publication`y uno de los valores siguientes para `@update_mode`:</span><span class="sxs-lookup"><span data-stu-id="b8299-171">Specify `@publisher` and `@publication`, and one of the following values for `@update_mode`:</span></span>

    * <span data-ttu-id="b8299-172">`sync tran` : habilita la suscripción de actualización inmediata.</span><span class="sxs-lookup"><span data-stu-id="b8299-172">`sync tran` - enables the subscription for immediate updating.</span></span>
    * <span data-ttu-id="b8299-173">`failover` : habilita la suscripción de actualización inmediata con la actualización en cola como opción de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="b8299-173">`failover` - enables the subscription for immediate updating with queued updating as a failover option.</span></span>

    > [!NOTE]  
>  <span data-ttu-id="b8299-174">`failover` requiere que la publicación también esté habilitada para las suscripciones de actualización en cola.</span><span class="sxs-lookup"><span data-stu-id="b8299-174">`failover` requires that the publication also be enabled for queued updating subscriptions.</span></span> 
 
4. <span data-ttu-id="b8299-175">En el suscriptor, ejecute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b8299-175">At the Subscriber, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="b8299-176">Especifique lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="b8299-176">Specify the following:</span></span>

    * <span data-ttu-id="b8299-177">Los parámetros `@publisher`, `@publisher_db`y `@publication` .</span><span class="sxs-lookup"><span data-stu-id="b8299-177">The `@publisher`, `@publisher_db`, and `@publication` parameters.</span></span> 
    * <span data-ttu-id="b8299-178">Las credenciales de Microsoft Windows con las que se ejecuta el Agente de distribución en el suscriptor para `@job_login` y `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="b8299-178">The Microsoft Windows credentials under which the Distribution Agent at the Subscriber runs for `@job_login` and `@job_password`.</span></span> 

    > [!NOTE]  
>  <span data-ttu-id="b8299-179">Las conexiones que se realicen con la autenticación integrada de Windows siempre usan las credenciales de Windows especificadas por `@job_login` y `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="b8299-179">Connections made using Windows Integrated Authentication are always made using the Windows credentials specified by `@job_login` and `@job_password`.</span></span> <span data-ttu-id="b8299-180">El Agente de distribución siempre realiza la conexión local con el suscriptor mediante la autenticación integrada de Windows.</span><span class="sxs-lookup"><span data-stu-id="b8299-180">The Distribution Agent always makes the local connection to the Subscriber using Windows Integrated Authentication.</span></span> <span data-ttu-id="b8299-181">De forma predeterminada, el agente se conecta al distribuidor usando la autenticación integrada de Windows.</span><span class="sxs-lookup"><span data-stu-id="b8299-181">By default, the agent connects to the Distributor using Windows Integrated Authentication.</span></span> 
 
    * <span data-ttu-id="b8299-182">(Opcional) Un valor de `0` para `@distributor_security_mode` y la información de inicio de sesión de Microsoft SQL Server para `@distributor_login` y `@distributor_password`, en caso de que necesite usar Autenticación de SQL Server cuando se conecte al distribuidor.</span><span class="sxs-lookup"><span data-stu-id="b8299-182">(Optional) A value of `0` for `@distributor_security_mode` and the Microsoft SQL Server login information for `@distributor_login` and `@distributor_password`, if you need to use SQL Server Authentication when connecting to the Distributor.</span></span> 
    * <span data-ttu-id="b8299-183">Una programación para el trabajo del Agente de distribución de esta suscripción.</span><span class="sxs-lookup"><span data-stu-id="b8299-183">A schedule for the Distribution Agent job for this subscription.</span></span> 

5. <span data-ttu-id="b8299-184">En el suscriptor de la base de datos de suscripción, ejecute [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b8299-184">At the Subscriber on the subscription database, execute [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span></span> <span data-ttu-id="b8299-185">Especifique `@publisher`, `@publication`, el nombre de la base de datos de publicación para `@publisher_db`y uno de los valores siguientes para `@security_mode`:</span><span class="sxs-lookup"><span data-stu-id="b8299-185">Specify `@publisher`, `@publication`, the name of the publication database for `@publisher_db`, and one of the following values for `@security_mode`:</span></span> 

    * <span data-ttu-id="b8299-186">`0` - Use Autenticación de SQL Server al realizar las actualizaciones en el publicador.</span><span class="sxs-lookup"><span data-stu-id="b8299-186">`0` - Use SQL Server Authentication when making updates at the Publisher.</span></span> <span data-ttu-id="b8299-187">Esta opción le exige que especifique un inicio de sesión válido en el publicador para `@login` y `@password`.</span><span class="sxs-lookup"><span data-stu-id="b8299-187">This option requires you to specify a valid login at the Publisher for `@login` and `@password`.</span></span>
    * <span data-ttu-id="b8299-188">`1` - Use el contexto de seguridad del usuario que realiza modificaciones en el suscriptor al conectarse al publicador.</span><span class="sxs-lookup"><span data-stu-id="b8299-188">`1` - Use the security context of the user making changes at the Subscriber when connecting to the Publisher.</span></span> <span data-ttu-id="b8299-189">Consulte [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) para conocer las restricciones relacionadas con este modo de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b8299-189">See [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) for restrictions related to this security mode.</span></span>
    * <span data-ttu-id="b8299-190">`2` - Use un inicio de sesión vinculado definido por el usuario ya existente y creado con [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b8299-190">`2` - Use an existing, user-defined linked server login created using [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span></span>

6. <span data-ttu-id="b8299-191">En el publicador, ejecute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql) y especifique `@publication`, `@subscriber`, `@destination_db`, un valor de extracción para `@subscription_type`y el mismo valor que especificó en el paso 3 para `@update_mode`.</span><span class="sxs-lookup"><span data-stu-id="b8299-191">At the publisher, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql) specifying `@publication`, `@subscriber`, `@destination_db`, a value of pull for `@subscription_type`, and the same value specified in step 3 for `@update_mode`.</span></span>

<span data-ttu-id="b8299-192">Esto registra la suscripción de extracción en el publicador.</span><span class="sxs-lookup"><span data-stu-id="b8299-192">This registers the pull subscription at the Publisher.</span></span> 


## <a name="create-an-immediate-updating-push-subscription"></a><span data-ttu-id="b8299-193">Creación de una suscripción de inserción de actualización inmediata</span><span class="sxs-lookup"><span data-stu-id="b8299-193">Create an immediate updating push subscription</span></span> 

1. <span data-ttu-id="b8299-194">En el publicado, ejecute [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql)para comprobar que la publicación admite las suscripciones de actualización inmediata.</span><span class="sxs-lookup"><span data-stu-id="b8299-194">At the Publisher, verify that the publication supports immediate updating subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="b8299-195">Si el valor de `allow_sync_tran` en el conjunto de resultados es `1`, la publicación admite las suscripciones de actualización inmediata.</span><span class="sxs-lookup"><span data-stu-id="b8299-195">If the value of `allow_sync_tran` in the result set is `1`, the publication supports immediate updating subscriptions.</span></span>
    * <span data-ttu-id="b8299-196">Si el valor de `allow_sync_tran` en el conjunto de resultados es `0`, la publicación se debe volver a crear con suscripciones de actualización inmediata habilitadas.</span><span class="sxs-lookup"><span data-stu-id="b8299-196">If the value of `allow_sync_tran` in the result set is `0`, the publication must be recreated with immediate updating subscriptions enabled.</span></span>

2. <span data-ttu-id="b8299-197">En el publicador, ejecute [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql)para comprobar que la publicación admite suscripciones de inserción.</span><span class="sxs-lookup"><span data-stu-id="b8299-197">At the Publisher, verify that the publication supports push subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="b8299-198">Si el valor de `allow_push` en el conjunto de resultados es `1`, la publicación admite las suscripciones de inserción.</span><span class="sxs-lookup"><span data-stu-id="b8299-198">If the value of `allow_push` in the result set is `1`, the publication supports push subscriptions.</span></span>
    * <span data-ttu-id="b8299-199">Si el valor de `allow_push` es `0`, ejecute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql)y especifique `allow_push` para `@property` y `true` para `@value`.</span><span class="sxs-lookup"><span data-stu-id="b8299-199">If the value of `allow_push` is `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying `allow_push` for `@property` and `true` for `@value`.</span></span> 

3. <span data-ttu-id="b8299-200">En el publicador, ejecute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b8299-200">At the Publisher, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="b8299-201">Especifique `@publication`, `@subscriber`, `@destination_db`y uno de los valores siguientes para `@update_mode`:</span><span class="sxs-lookup"><span data-stu-id="b8299-201">Specify `@publication`, `@subscriber`, `@destination_db`, and one of the following values for `@update_mode`:</span></span>

    * <span data-ttu-id="b8299-202">`sync tran` : habilita la compatibilidad con la actualización inmediata.</span><span class="sxs-lookup"><span data-stu-id="b8299-202">`sync tran` - enables support for immediate updating.</span></span>
    * <span data-ttu-id="b8299-203">`failover` : habilita la compatibilidad con la actualización inmediata con actualización en cola como opción de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="b8299-203">`failover` - enables support for immediate updating with queued updating as a failover option.</span></span>

    > [!NOTE]  
>  <span data-ttu-id="b8299-204">`failover` requiere que la publicación también esté habilitada para las suscripciones de actualización en cola.</span><span class="sxs-lookup"><span data-stu-id="b8299-204">`failover` requires that the publication also be enabled for queued updating subscriptions.</span></span> 
 
4. <span data-ttu-id="b8299-205">En el publicador, ejecute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b8299-205">At the Publisher, execute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span></span> <span data-ttu-id="b8299-206">Especifique los parámetros siguientes:</span><span class="sxs-lookup"><span data-stu-id="b8299-206">Specify the following parameters:</span></span>

    * <span data-ttu-id="b8299-207">`@subscriber`, `@subscriber_db`y `@publication`.</span><span class="sxs-lookup"><span data-stu-id="b8299-207">`@subscriber`, `@subscriber_db`, and `@publication`.</span></span> 
    * <span data-ttu-id="b8299-208">Las credenciales de Windows con las que se ejecuta el Agente de distribución en el distribuidor para `@job_login` y `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="b8299-208">The Windows credentials under which the Distribution Agent at the Distributor runs for `@job_login` and `@job_password`.</span></span> 

    > [!NOTE]  
>  <span data-ttu-id="b8299-209">Las conexiones que se realicen con la autenticación integrada de Windows siempre usan las credenciales de Windows especificadas por `@job_login` y `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="b8299-209">Connections made using Windows Integrated Authentication are always made using the Windows credentials specified by `@job_login` and `@job_password`.</span></span> <span data-ttu-id="b8299-210">El Agente de distribución siempre realiza la conexión local con el distribuidor mediante la autenticación integrada de Windows.</span><span class="sxs-lookup"><span data-stu-id="b8299-210">The Distribution Agent always makes the local connection to the Distributor using Windows Integrated Authentication.</span></span> <span data-ttu-id="b8299-211">De forma predeterminada, el agente se conectará con el suscriptor mediante la autenticación integrada de Windows.</span><span class="sxs-lookup"><span data-stu-id="b8299-211">By default, the agent will connect to the Subscriber using Windows Integrated Authentication.</span></span> 

    * <span data-ttu-id="b8299-212">(Opcional) Un valor de `0` para `@subscriber_security_mode` y la información de inicio de sesión de SQL Server para `@subscriber_login` y `@subscriber_password`, en caso de que necesite usar Autenticación de SQL Server cuando se conecte al suscriptor.</span><span class="sxs-lookup"><span data-stu-id="b8299-212">(Optional) A value of `0` for `@subscriber_security_mode` and the SQL Server login information for `@subscriber_login` and `@subscriber_password`, if you need to use SQL Server Authentication when connecting to the Subscriber.</span></span> 
    * <span data-ttu-id="b8299-213">Una programación para el trabajo del Agente de distribución de esta suscripción.</span><span class="sxs-lookup"><span data-stu-id="b8299-213">A schedule for the Distribution Agent job for this subscription.</span></span>

5. <span data-ttu-id="b8299-214">En el suscriptor de la base de datos de suscripción, ejecute [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b8299-214">At the Subscriber on the subscription database, execute [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span></span> <span data-ttu-id="b8299-215">Especifique `@publisher`, `@publication`, el nombre de la base de datos de publicación para `@publisher_db`y uno de los valores siguientes para `@security_mode`:</span><span class="sxs-lookup"><span data-stu-id="b8299-215">Specify `@publisher`, `@publication`, the name of the publication database for `@publisher_db`, and one of the following values for `@security_mode`:</span></span> 

     * <span data-ttu-id="b8299-216">`0` - Use Autenticación de SQL Server al realizar las actualizaciones en el publicador.</span><span class="sxs-lookup"><span data-stu-id="b8299-216">`0` - Use SQL Server Authentication when making updates at the Publisher.</span></span> <span data-ttu-id="b8299-217">Esta opción le exige que especifique un inicio de sesión válido en el publicador para `@login` y `@password`.</span><span class="sxs-lookup"><span data-stu-id="b8299-217">This option requires you to specify a valid login at the Publisher for `@login` and `@password`.</span></span>
     * <span data-ttu-id="b8299-218">`1` - Use el contexto de seguridad del usuario que realiza modificaciones en el suscriptor al conectarse al publicador.</span><span class="sxs-lookup"><span data-stu-id="b8299-218">`1` - Use the security context of the user making changes at the Subscriber when connecting to the Publisher.</span></span> <span data-ttu-id="b8299-219">Consulte [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) para conocer las restricciones relacionadas con este modo de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b8299-219">See [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) for restrictions related to this security mode.</span></span>
     * <span data-ttu-id="b8299-220">`2` - Use un inicio de sesión vinculado definido por el usuario ya existente y creado con [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b8299-220">`2` - Use an existing, user-defined linked server login created using [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span></span>


## <a name="create-a-queued-updating-pull-subscription"></a><span data-ttu-id="b8299-221">Creación de una suscripción de extracción de la actualización en cola</span><span class="sxs-lookup"><span data-stu-id="b8299-221">Create a queued updating pull subscription</span></span> ##

1. <span data-ttu-id="b8299-222">En el publicador, ejecute [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql)para comprobar que la publicación admite suscripciones de actualización en cola.</span><span class="sxs-lookup"><span data-stu-id="b8299-222">At the Publisher, verify that the publication supports queued updating subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="b8299-223">Si el valor de `allow_queued_tran` en el conjunto de resultados es `1`, la publicación admite las suscripciones de actualización inmediata.</span><span class="sxs-lookup"><span data-stu-id="b8299-223">If the value of `allow_queued_tran` in the result set is `1`, the publication supports immediate updating subscriptions.</span></span>
    * <span data-ttu-id="b8299-224">Si el valor de `allow_queued_tran` en el conjunto de resultados es `0`, la publicación se debe volver a crear con suscripciones de actualización en cola habilitadas.</span><span class="sxs-lookup"><span data-stu-id="b8299-224">If the value of `allow_queued_tran` in the result set is `0`, the publication must be recreated with queued updating subscriptions enabled.</span></span>

2. <span data-ttu-id="b8299-225">En el publicador, ejecute [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql)para comprobar que la publicación admite las suscripciones de extracción.</span><span class="sxs-lookup"><span data-stu-id="b8299-225">At the Publisher, verify that the publication supports pull subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="b8299-226">Si el valor de `allow_pull` en el conjunto de resultados es `1`, la publicación admite las suscripciones de extracción.</span><span class="sxs-lookup"><span data-stu-id="b8299-226">If the value of `allow_pull` in the result set is `1`, the publication supports pull subscriptions.</span></span>
    * <span data-ttu-id="b8299-227">Si el valor de `allow_pull` es `0`, ejecute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql)y especifique `allow_pull` para `@property` y `true` para `@value`.</span><span class="sxs-lookup"><span data-stu-id="b8299-227">If the value of `allow_pull` is `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying `allow_pull` for `@property` and `true` for `@value`.</span></span> 

3. <span data-ttu-id="b8299-228">En el suscriptor, ejecute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b8299-228">At the Subscriber, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span></span> <span data-ttu-id="b8299-229">Especifique `@publisher` , `@publication`y uno de los valores siguientes para `@update_mode`:</span><span class="sxs-lookup"><span data-stu-id="b8299-229">Specify `@publisher` and `@publication`, and one of the following values for `@update_mode`:</span></span>

    * <span data-ttu-id="b8299-230">`queued tran` : habilita la suscripción para actualización en cola.</span><span class="sxs-lookup"><span data-stu-id="b8299-230">`queued tran` - enables the subscription for queued updating.</span></span>
    * <span data-ttu-id="b8299-231">`queued failover` : habilita la compatibilidad con la actualización en cola con actualización inmediata como opción de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="b8299-231">`queued failover` - enables support for queued updating with immediate updating as a failover option.</span></span>

    > [!NOTE]  
>  <span data-ttu-id="b8299-232">`queued failover` requiere que la publicación también esté habilitada para la suscripción de actualización inmediata.</span><span class="sxs-lookup"><span data-stu-id="b8299-232">`queued failover` requires that the publication also be enabled for immediate updating subscriptions.</span></span> <span data-ttu-id="b8299-233">Para conmutar por error a la actualización inmediata, debe usar [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) para definir las credenciales bajo las que se replican en el publicador los cambios realizados en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="b8299-233">To fail over to immediate updating, you must use [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) to define the credentials under which changes at the Subscriber are replicated to the Publisher.</span></span>
 
4. <span data-ttu-id="b8299-234">En el suscriptor, ejecute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b8299-234">At the Subscriber, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="b8299-235">Especifique los parámetros siguientes:</span><span class="sxs-lookup"><span data-stu-id="b8299-235">Specify the following parameters:</span></span>

    * <span data-ttu-id="b8299-236">@publisher, `@publisher_db`y `@publication`.</span><span class="sxs-lookup"><span data-stu-id="b8299-236">@publisher, `@publisher_db`, and `@publication`.</span></span> 
    * <span data-ttu-id="b8299-237">Las credenciales de Windows con las que se ejecuta el Agente de distribución en el suscriptor para `@job_login` y `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="b8299-237">The Windows credentials under which the Distribution Agent at the Subscriber runs for `@job_login` and `@job_password`.</span></span> 

    > [!NOTE]  
>  <span data-ttu-id="b8299-238">Las conexiones que se realicen con la autenticación integrada de Windows siempre usan las credenciales de Windows especificadas por `@job_login` y `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="b8299-238">Connections made using Windows Integrated Authentication are always made using the Windows credentials specified by `@job_login` and `@job_password`.</span></span> <span data-ttu-id="b8299-239">El Agente de distribución siempre realiza la conexión local con el suscriptor mediante la autenticación integrada de Windows.</span><span class="sxs-lookup"><span data-stu-id="b8299-239">The Distribution Agent always makes the local connection to the Subscriber using Windows Integrated Authentication.</span></span> <span data-ttu-id="b8299-240">De forma predeterminada, el agente se conecta al distribuidor usando la autenticación integrada de Windows.</span><span class="sxs-lookup"><span data-stu-id="b8299-240">By default, the agent connects to the Distributor using Windows Integrated Authentication.</span></span> 
 
    * <span data-ttu-id="b8299-241">(Opcional) Un valor de `0` para `@distributor_security_mode` y la información de inicio de sesión de SQL Server para `@distributor_login` y `@distributor_password`, en caso de que necesite usar Autenticación de SQL Server cuando se conecte al distribuidor.</span><span class="sxs-lookup"><span data-stu-id="b8299-241">(Optional) A value of `0` for `@distributor_security_mode` and the SQL Server login information for `@distributor_login` and `@distributor_password`, if you need to use SQL Server Authentication when connecting to the Distributor.</span></span> 
    * <span data-ttu-id="b8299-242">Una programación para el trabajo del Agente de distribución de esta suscripción.</span><span class="sxs-lookup"><span data-stu-id="b8299-242">A schedule for the Distribution Agent job for this subscription.</span></span>

5. <span data-ttu-id="b8299-243">En el publicador, ejecute [sp_addsubscriber](/sql/relational-databases/system-stored-procedures/sp-addsubscriber-transact-sql) para registrar el suscriptor en el publicador y especifique `@publication`, `@subscriber`, `@destination_db`, un valor de extracción para `@subscription_type`y el mismo valor que especificó en el paso 3 para `@update_mode`.</span><span class="sxs-lookup"><span data-stu-id="b8299-243">At the publisher, execute [sp_addsubscriber](/sql/relational-databases/system-stored-procedures/sp-addsubscriber-transact-sql) to register the Subscriber at the Publisher, specifying `@publication`, `@subscriber`, `@destination_db`, a value of pull for `@subscription_type`, and the same value specified in step 3 for `@update_mode`.</span></span>

<span data-ttu-id="b8299-244">Esto registra la suscripción de extracción en el publicador.</span><span class="sxs-lookup"><span data-stu-id="b8299-244">This registers the pull subscription at the Publisher.</span></span> 


## <a name="to-create-a-queued-updating-push-subscription"></a><span data-ttu-id="b8299-245">Para crear una suscripción de inserción de la actualización en cola</span><span class="sxs-lookup"><span data-stu-id="b8299-245">To create a queued updating push subscription</span></span> ##

1. <span data-ttu-id="b8299-246">En el publicador, ejecute [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql)para comprobar que la publicación admite suscripciones de actualización en cola.</span><span class="sxs-lookup"><span data-stu-id="b8299-246">At the Publisher, verify that the publication supports queued updating subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="b8299-247">Si el valor de allow_queued_tran en el conjunto de resultados es 1, la publicación admite suscripciones de actualización inmediata.</span><span class="sxs-lookup"><span data-stu-id="b8299-247">If the value of allow_queued_tran in the result set is 1, the publication supports immediate updating subscriptions.</span></span>
    * <span data-ttu-id="b8299-248">Si el valor de allow_queued_tran en el conjunto de resultados es 0, la publicación se debe volver a crear con suscripciones de actualización en cola habilitadas.</span><span class="sxs-lookup"><span data-stu-id="b8299-248">If the value of allow_queued_tran in the result set is 0, the publication must be recreated with queued updating subscriptions enabled.</span></span> <span data-ttu-id="b8299-249">Para más información, vea: Cómo: Habilitar suscripciones actualizables para publicaciones transaccionales (programación de la replicación con Transact-SQL).</span><span class="sxs-lookup"><span data-stu-id="b8299-249">For more information, see How to: Enable Updating Subscriptions for Transactional Publications (Replication Transact-SQL Programming).</span></span>

2. <span data-ttu-id="b8299-250">En el publicador, ejecute [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql)para comprobar que la publicación admite suscripciones de inserción.</span><span class="sxs-lookup"><span data-stu-id="b8299-250">At the Publisher, verify that the publication supports push subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="b8299-251">Si el valor de `allow_push` en el conjunto de resultados es `1`, la publicación admite las suscripciones de inserción.</span><span class="sxs-lookup"><span data-stu-id="b8299-251">If the value of `allow_push` in the result set is `1`, the publication supports push subscriptions.</span></span>
    * <span data-ttu-id="b8299-252">Si el valor de `allow_push` es `0`, ejecute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql)y especifiqueallow_push para `@property` y `true` para `@value`.</span><span class="sxs-lookup"><span data-stu-id="b8299-252">If the value of `allow_push` is `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying allow_push for `@property` and `true` for `@value`.</span></span> 

3. <span data-ttu-id="b8299-253">En el publicador, ejecute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b8299-253">At the Publisher, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="b8299-254">Especifique `@publication`, `@subscriber`, `@destination_db`y uno de los valores siguientes para `@update_mode`:</span><span class="sxs-lookup"><span data-stu-id="b8299-254">Specify `@publication`, `@subscriber`, `@destination_db`, and one of the following values for `@update_mode`:</span></span>

    * <span data-ttu-id="b8299-255">`queued tran` : habilita la suscripción para actualización en cola.</span><span class="sxs-lookup"><span data-stu-id="b8299-255">`queued tran` - enables the subscription for queued updating.</span></span>
    * <span data-ttu-id="b8299-256">`queued failover` : habilita la compatibilidad con la actualización en cola con actualización inmediata como opción de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="b8299-256">`queued failover` - enables support for queued updating with immediate updating as a failover option.</span></span>

    > [!NOTE]  
>  <span data-ttu-id="b8299-257">La opción queued failover option requiere que la publicación también esté habilitada para las suscripciones de actualización inmediatas.</span><span class="sxs-lookup"><span data-stu-id="b8299-257">The queued failover option requires that the publication also be enabled for immediate updating subscriptions.</span></span> <span data-ttu-id="b8299-258">Para conmutar por error a la actualización inmediata, debe usar [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) para definir las credenciales bajo las que se replican en el publicador los cambios realizados en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="b8299-258">To fail over to immediate updating, you must use [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) to define the credentials under which changes at the Subscriber are replicated to the Publisher.</span></span>

4. <span data-ttu-id="b8299-259">En el publicador, ejecute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b8299-259">At the Publisher, execute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span></span> <span data-ttu-id="b8299-260">Especifique los parámetros siguientes:</span><span class="sxs-lookup"><span data-stu-id="b8299-260">Specify the following parameters:</span></span>

    * <span data-ttu-id="b8299-261">`@subscriber`, `@subscriber_db`y `@publication`.</span><span class="sxs-lookup"><span data-stu-id="b8299-261">`@subscriber`, `@subscriber_db`, and `@publication`.</span></span> 
    * <span data-ttu-id="b8299-262">Las credenciales de Windows con las que se ejecuta el Agente de distribución en el distribuidor para `@job_login` y `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="b8299-262">The Windows credentials under which the Distribution Agent at the Distributor runs for `@job_login` and `@job_password`.</span></span> 

    > [!NOTE]  
>  <span data-ttu-id="b8299-263">Las conexiones que se realicen con la autenticación integrada de Windows siempre usan las credenciales de Windows especificadas por `@job_login` y `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="b8299-263">Connections made using Windows Integrated Authentication are always made using the Windows credentials specified by `@job_login` and `@job_password`.</span></span> <span data-ttu-id="b8299-264">El Agente de distribución siempre realiza la conexión local con el distribuidor mediante la autenticación integrada de Windows.</span><span class="sxs-lookup"><span data-stu-id="b8299-264">The Distribution Agent always makes the local connection to the Distributor using Windows Integrated Authentication.</span></span> <span data-ttu-id="b8299-265">De forma predeterminada, el agente se conecta al suscriptor usando la autenticación integrada de Windows.</span><span class="sxs-lookup"><span data-stu-id="b8299-265">By default, the agent connects to the Subscriber using Windows Integrated Authentication.</span></span> 
 
    * <span data-ttu-id="b8299-266">(Opcional) Un valor de `0` para `@subscriber_security_mode` y la información de inicio de sesión de SQL Server para `@subscriber_login` y `@subscriber_password`, en caso de que necesite usar Autenticación de SQL Server cuando se conecte al suscriptor.</span><span class="sxs-lookup"><span data-stu-id="b8299-266">(Optional) A value of `0` for `@subscriber_security_mode` and the SQL Server login information for `@subscriber_login` and `@subscriber_password`, if you need to use SQL Server Authentication when connecting to the Subscriber.</span></span> 
    * <span data-ttu-id="b8299-267">Una programación para el trabajo del Agente de distribución de esta suscripción.</span><span class="sxs-lookup"><span data-stu-id="b8299-267">A schedule for the Distribution Agent job for this subscription.</span></span>


## <a name="example"></a><span data-ttu-id="b8299-268">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="b8299-268">Example</span></span> ##

<span data-ttu-id="b8299-269">Este ejemplo crea una suscripción de extracción de actualización inmediata a una publicación que admite suscripciones de actualización inmediatas.</span><span class="sxs-lookup"><span data-stu-id="b8299-269">This example creates an immediate updating pull subscription to a publication that supports immediate updating subscriptions.</span></span> <span data-ttu-id="b8299-270">Los valores de inicio de sesión y contraseña se proporcionan en tiempo de ejecución mediante variables de scripting de sqlcmd.</span><span class="sxs-lookup"><span data-stu-id="b8299-270">Login and password values are supplied at runtime using sqlcmd scripting variables.</span></span>

> [!NOTE]  
>  <span data-ttu-id="b8299-271">Este script usa variables de scripting de sqlcmd.</span><span class="sxs-lookup"><span data-stu-id="b8299-271">This script uses sqlcmd scripting variables.</span></span> <span data-ttu-id="b8299-272">Estas variables tienen el formato `$(MyVariable)`.</span><span class="sxs-lookup"><span data-stu-id="b8299-272">They are in the form `$(MyVariable)`.</span></span> <span data-ttu-id="b8299-273">Para información sobre cómo usar las variables de scripting en la línea de comandos y en SQL Server Management Studio, consulte la sección **Ejecutar scripts de replicación** en el tema [Conceptos sobre los procedimientos almacenados del sistema de replicación](../concepts/replication-system-stored-procedures-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="b8299-273">For information about how to use scripting variables on the command line and in SQL Server Management Studio, see the **Executing Replication Scripts** section in the topic [Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md).</span></span>

```sql
-- Execute this batch at the Subscriber.
DECLARE @publication AS sysname;
DECLARE @publicationDB AS sysname;
DECLARE @publisher AS sysname;
DECLARE @login AS sysname;
DECLARE @password AS nvarchar(512);
SET @publication = N'AdvWorksProductTran';
SET @publicationDB = N'AdventureWorks2008R2';
SET @publisher = $(PubServer);
SET @login = $(Login);
SET @password = $(Password);

-- At the subscription database, create a pull subscription to a transactional 
-- publication using immediate updating with queued updating as a failover.
EXEC sp_addpullsubscription 
    @publisher = @publisher, 
    @publication = @publication, 
    @publisher_db = @publicationDB, 
    @update_mode = N'failover', 
    @subscription_type = N'pull';

-- Add an agent job to synchronize the pull subscription, 
-- which uses Windows Authentication when connecting to the Distributor.
EXEC sp_addpullsubscription_agent 
    @publisher = @publisher, 
    @publisher_db = @publicationDB, 
    @publication = @publication,
    @job_login = @login,
    @job_password = @password; 

-- Add a Windows Authentication-based linked server that enables the 
-- Subscriber-side triggers to make updates at the Publisher. 
EXEC sp_link_publication 
    @publisher = @publisher, 
    @publication = @publication,
    @publisher_db = @publicationDB, 
    @security_mode = 0,
    @login = @login,
    @password = @password;
GO

USE AdventureWorks2008R2;
GO

-- Execute this batch at the Publisher.
DECLARE @publication AS sysname;
DECLARE @subscriptionDB AS sysname;
DECLARE @subscriber AS sysname;
SET @publication = N'AdvWorksProductTran'; 
SET @subscriptionDB = N'AdventureWorks2008R2Replica'; 
SET @subscriber = $(SubServer);

-- At the Publisher, register the subscription, using the defaults.
USE [AdventureWorks2008R2]
EXEC sp_addsubscription 
    @publication = @publication, 
    @subscriber = @subscriber, 
    @destination_db = @subscriptionDB, 
    @subscription_type = N'pull', 
    @update_mode = N'failover';
GO
```

## <a name="set-queued-updating-conflict-resolution-options-sql-server-management-studio"></a><span data-ttu-id="b8299-274">Establecer opciones de resolución de conflictos de actualización en cola (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="b8299-274">Set Queued Updating Conflict Resolution Options (SQL Server Management Studio)</span></span>
  <span data-ttu-id="b8299-275">Establezca las opciones de resolución de conflictos para las publicaciones que admiten suscripciones de actualización en cola en la página **Opciones de suscripción** del cuadro de diálogo **Propiedades de la publicación: \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="b8299-275">Set conflict resolution options for publications that support queued updating subscriptions on the **Subscription Options** page of the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="b8299-276">Para obtener más información sobre el acceso a este cuadro de diálogo, vea [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="b8299-276">For more information about accessing this dialog box, see [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
### <a name="to-set-queued-updating-conflict-resolution-options"></a><span data-ttu-id="b8299-277">Para establecer las opciones de resolución de conflictos de actualización en cola</span><span class="sxs-lookup"><span data-stu-id="b8299-277">To set queued updating conflict resolution options</span></span>  
  
1.  <span data-ttu-id="b8299-278">En la página **Opciones de suscripción**, del cuadro de diálogo **Propiedades de la publicación: \<Publication>** , seleccione uno de los valores siguientes para la opción **Directiva de resolución de conflictos**:</span><span class="sxs-lookup"><span data-stu-id="b8299-278">On the **Subscription Options** page of the **Publication Properties - \<Publication>** dialog box, select one of the following values for the **Conflict resolution policy** option:</span></span>    
    -   <span data-ttu-id="b8299-279">**Mantener el cambio del publicador**</span><span class="sxs-lookup"><span data-stu-id="b8299-279">**Keep the Publisher change**</span></span>    
    -   <span data-ttu-id="b8299-280">**Mantener el cambio del suscriptor**</span><span class="sxs-lookup"><span data-stu-id="b8299-280">**Keep the Subscriber change**</span></span>    
    -   <span data-ttu-id="b8299-281">**Reinicializar la suscripción**</span><span class="sxs-lookup"><span data-stu-id="b8299-281">**Reinitialize the subscription**</span></span>    
2.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  

## <a name="see-also"></a><span data-ttu-id="b8299-282">Consulte también</span><span class="sxs-lookup"><span data-stu-id="b8299-282">See Also</span></span> ##
 <span data-ttu-id="b8299-283">[Create a Publication](create-a-publication.md) </span><span class="sxs-lookup"><span data-stu-id="b8299-283">[Create a Publication](create-a-publication.md) </span></span>  
 <span data-ttu-id="b8299-284">[Updatable Subscriptions for Transactional Replication](../transactional/updatable-subscriptions-for-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="b8299-284">[Updatable Subscriptions for Transactional Replication](../transactional/updatable-subscriptions-for-transactional-replication.md) </span></span>  
 [<span data-ttu-id="b8299-285">Usar sqlcmd con variables de script</span><span class="sxs-lookup"><span data-stu-id="b8299-285">Use sqlcmd with Scripting Variables</span></span>](../../scripting/sqlcmd-use-with-scripting-variables.md)   

  
