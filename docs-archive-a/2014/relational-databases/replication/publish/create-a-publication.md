---
title: Creación de una publicación | Microsoft Docs
ms.custom: ''
ms.date: 06/30/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- publications [SQL Server replication], creating
- articles [SQL Server replication], defining
- adding articles
- articles [SQL Server replication], adding
ms.assetid: 52ee6de9-1d58-4cb9-8711-372bddbe7154
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 14d8b3f1a998b18ae0153c1771fa11afd925da9c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87677556"
---
# <a name="create-a-publication"></a><span data-ttu-id="88bd5-102">Create a Publication</span><span class="sxs-lookup"><span data-stu-id="88bd5-102">Create a Publication</span></span>
  <span data-ttu-id="88bd5-103">En este tema se describe cómo crear una publicación en [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] mediante [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)]o Replication Management Objects (RMO).</span><span class="sxs-lookup"><span data-stu-id="88bd5-103">This topic describes how to create a publication in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)], or Replication Management Objects (RMO).</span></span>  
  
 <span data-ttu-id="88bd5-104">**En este tema**</span><span class="sxs-lookup"><span data-stu-id="88bd5-104">**In This Topic**</span></span>  
  
-   <span data-ttu-id="88bd5-105">**Antes de empezar:**</span><span class="sxs-lookup"><span data-stu-id="88bd5-105">**Before you begin:**</span></span>  
  
     [<span data-ttu-id="88bd5-106">Limitaciones y restricciones</span><span class="sxs-lookup"><span data-stu-id="88bd5-106">Limitations and Restrictions</span></span>](#Restrictions)  
  
     [<span data-ttu-id="88bd5-107">Seguridad</span><span class="sxs-lookup"><span data-stu-id="88bd5-107">Security</span></span>](#Security)  
  
-   <span data-ttu-id="88bd5-108">**Para crear una publicación y definir artículos con:**</span><span class="sxs-lookup"><span data-stu-id="88bd5-108">**To create a publication and define articles, using:**</span></span>  
  
     [<span data-ttu-id="88bd5-109">SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="88bd5-109">SQL Server Management Studio</span></span>](#SSMSProcedure)  
  
     [<span data-ttu-id="88bd5-110">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="88bd5-110">Transact-SQL</span></span>](#TsqlProcedure)  
  
     [<span data-ttu-id="88bd5-111">Replication Management Objects (RMO)</span><span class="sxs-lookup"><span data-stu-id="88bd5-111">Replication Management Objects (RMO)</span></span>](#RMOProcedure)  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="88bd5-112">Antes de comenzar</span><span class="sxs-lookup"><span data-stu-id="88bd5-112">Before You Begin</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="88bd5-113">Limitaciones y restricciones</span><span class="sxs-lookup"><span data-stu-id="88bd5-113">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="88bd5-114">Los nombres de publicaciones y artículos no pueden contener ninguno de los siguientes caracteres: % , \* , [ , ] , | , : , " , ?</span><span class="sxs-lookup"><span data-stu-id="88bd5-114">Publication and article names cannot include any of the following characters: % , \* , [ , ] , | , : , " , ?</span></span> <span data-ttu-id="88bd5-115">, ' , \ , / , \< , >.</span><span class="sxs-lookup"><span data-stu-id="88bd5-115">, ' , \ , / , \< , >.</span></span> <span data-ttu-id="88bd5-116">Si los objetos de la base de datos contienen cualquiera de esos caracteres y quiere replicarlos, debe especificar un nombre de artículo distinto del nombre del objeto en el cuadro de diálogo **Propiedades del artículo: \<Article>** , que se encuentra en la página **Artículos** del asistente.</span><span class="sxs-lookup"><span data-stu-id="88bd5-116">If objects in the database include any of these characters and you want to replicate them, you must specify an article name that is different from the object name in the **Article Properties - \<Article>** dialog box, which is available from the **Articles** page in the wizard.</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="88bd5-117">Seguridad</span><span class="sxs-lookup"><span data-stu-id="88bd5-117">Security</span></span>  
 <span data-ttu-id="88bd5-118">Cuando sea posible, pida a los usuarios que proporcionen credenciales de seguridad en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="88bd5-118">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="88bd5-119">Si debe almacenar credenciales, use los [servicios de cifrado](https://go.microsoft.com/fwlink/?LinkId=34733) (en inglés) proporcionados por [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="88bd5-119">If you must store credentials, use the [cryptographic services](https://go.microsoft.com/fwlink/?LinkId=34733) provided by the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows .NET Framework.</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="88bd5-120">Uso de SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="88bd5-120">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="88bd5-121">Cree publicaciones y defina artículos con el Asistente para nueva publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-121">Create publications and define articles with the New Publication Wizard.</span></span> <span data-ttu-id="88bd5-122">Una vez que se ha creado la publicación, se pueden ver y modificar sus propiedades en el cuadro de diálogo **Propiedades de la publicación: \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="88bd5-122">After a publication is created, view and modify publication properties in the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="88bd5-123">Para obtener información sobre cómo crear una publicación de una base de datos de Oracle, vea [Crear una publicación a partir de una base de datos de Oracle](create-a-publication-from-an-oracle-database.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-123">For information about creating a publication from an Oracle database, see [Create a Publication from an Oracle Database](create-a-publication-from-an-oracle-database.md).</span></span>  
  
#### <a name="to-create-a-publication-and-define-articles"></a><span data-ttu-id="88bd5-124">Para crear publicaciones y definir artículos</span><span class="sxs-lookup"><span data-stu-id="88bd5-124">To create a publication and define articles</span></span>  
  
1.  <span data-ttu-id="88bd5-125">Conéctese al publicador de [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] y expanda el nodo de servidor.</span><span class="sxs-lookup"><span data-stu-id="88bd5-125">Connect to the Publisher in [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], and then expand the server node.</span></span>  
  
2.  <span data-ttu-id="88bd5-126">Expanda la carpeta **Replicación** y, a continuación, haga clic con el botón secundario en la carpeta **Publicaciones locales** .</span><span class="sxs-lookup"><span data-stu-id="88bd5-126">Expand the **Replication** folder, and then right-click the **Local Publications** folder.</span></span>  
  
3.  <span data-ttu-id="88bd5-127">Haga clic en **Nueva publicación**.</span><span class="sxs-lookup"><span data-stu-id="88bd5-127">Click **New Publication**.</span></span>  
  
4.  <span data-ttu-id="88bd5-128">Siga las indicaciones de las páginas del Asistente para nueva publicación para:</span><span class="sxs-lookup"><span data-stu-id="88bd5-128">Follow the pages in the New Publication Wizard to:</span></span>  
  
    -   <span data-ttu-id="88bd5-129">Especificar un distribuidor si la distribución no se ha configurado en el servidor.</span><span class="sxs-lookup"><span data-stu-id="88bd5-129">Specify a Distributor if distribution has not been configured on the server.</span></span> <span data-ttu-id="88bd5-130">Para obtener más información sobre cómo configurar la distribución, vea [Configurar la publicación y la distribución](../configure-publishing-and-distribution.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-130">For more information about configuring distribution, see [Configure Publishing and Distribution](../configure-publishing-and-distribution.md).</span></span>  
  
         <span data-ttu-id="88bd5-131">Si en la página **Distribuidor** especifica que el servidor del publicador actúe como su propio distribuidor (un distribuidor local) y el servidor no está configurado como tal, el Asistente para nueva publicación configurará el servidor.</span><span class="sxs-lookup"><span data-stu-id="88bd5-131">If you specify on the **Distributor** page that the Publisher server will act as its own Distributor (a local Distributor), and the server is not configured as a Distributor, the New Publication Wizard will configure the server.</span></span> <span data-ttu-id="88bd5-132">Especifique una carpeta de instantáneas predeterminada para el distribuidor en la página **Carpeta de instantáneas** .</span><span class="sxs-lookup"><span data-stu-id="88bd5-132">You will specify a default snapshot folder for the Distributor on the **Snapshot Folder** page.</span></span> <span data-ttu-id="88bd5-133">La carpeta de instantáneas es simplemente un directorio designado como recurso compartido; los agentes que leen y escriben en esta carpeta deben tener permisos de acceso suficientes a ella.</span><span class="sxs-lookup"><span data-stu-id="88bd5-133">The snapshot folder is simply a directory that you have designated as a share; agents that read from and write to this folder must have sufficient permissions to access it.</span></span> <span data-ttu-id="88bd5-134">Para obtener más información sobre cómo proteger la carpeta adecuadamente, vea [Proteger la carpeta de instantáneas](../security/secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-134">For more information about securing the folder appropriately, see [Secure the Snapshot Folder](../security/secure-the-snapshot-folder.md).</span></span>  
  
         <span data-ttu-id="88bd5-135">Si especifica que otro servidor actúe como distribuidor, deberá escribir una contraseña en la página **Contraseña administrativa** para las conexiones que se realicen desde el publicador al distribuidor.</span><span class="sxs-lookup"><span data-stu-id="88bd5-135">If you specify that another server should act as the Distributor, you must enter a password on the **Administrative Password** page for connections made from the Publisher to the Distributor.</span></span> <span data-ttu-id="88bd5-136">Esta contraseña debe coincidir con la especificada cuando se habilitó el publicador en el distribuidor remoto.</span><span class="sxs-lookup"><span data-stu-id="88bd5-136">This password must match the password specified when the Publisher was enabled at the remote Distributor.</span></span>  
  
         <span data-ttu-id="88bd5-137">Para más información, consulte [Configure Distribution](../configure-distribution.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-137">For more information, see [Configure Distribution](../configure-distribution.md).</span></span>  
  
    -   <span data-ttu-id="88bd5-138">Elegir una base de datos de publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-138">Choose a publication database.</span></span>  
  
    -   <span data-ttu-id="88bd5-139">Seleccionar un tipo de publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-139">Select a publication type.</span></span> <span data-ttu-id="88bd5-140">Para obtener más información, vea [Tipos de replicación](../types-of-replication.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-140">For more information, see [Types of Replication](../types-of-replication.md).</span></span>  
  
    -   <span data-ttu-id="88bd5-141">Especificar los datos y los objetos de base de datos que se van a publicar; de forma opcional, filtrar columnas de artículos de tablas y establecer las propiedades de los artículos.</span><span class="sxs-lookup"><span data-stu-id="88bd5-141">Specify data and database objects to publish; optionally filter columns from table articles, and set article properties.</span></span>  
  
    -   <span data-ttu-id="88bd5-142">De forma opcional, filtrar filas de artículos de tablas.</span><span class="sxs-lookup"><span data-stu-id="88bd5-142">Optionally filter rows from table articles.</span></span> <span data-ttu-id="88bd5-143">Para obtener más información, vea [Filtrar datos publicados](filter-published-data.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-143">For more information, see [Filter Published Data](filter-published-data.md).</span></span>  
  
    -   <span data-ttu-id="88bd5-144">Establecer la programación del Agente de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="88bd5-144">Set the Snapshot Agent schedule.</span></span>  
  
    -   <span data-ttu-id="88bd5-145">Especificar las credenciales con las que los siguientes agentes de replicación se ejecutan y efectúan conexiones:</span><span class="sxs-lookup"><span data-stu-id="88bd5-145">Specify the credentials under which the following replication agents run and make connections:</span></span>  
  
         <span data-ttu-id="88bd5-146">\- Agente de instantáneas (para todas las publicaciones)</span><span class="sxs-lookup"><span data-stu-id="88bd5-146">\- Snapshot Agent for all publications.</span></span>  
  
         <span data-ttu-id="88bd5-147">\- Agente de registro del LOG (para todas las publicaciones transaccionales)</span><span class="sxs-lookup"><span data-stu-id="88bd5-147">\- Log Reader Agent for all transactional publications.</span></span>  
  
         <span data-ttu-id="88bd5-148">\- Agente de lectura de cola para publicaciones transaccionales que permiten suscripciones de actualización.</span><span class="sxs-lookup"><span data-stu-id="88bd5-148">\- Queue Reader Agent for transactional publications that allow updating subscriptions.</span></span>  
  
         <span data-ttu-id="88bd5-149">Para obtener más información, consulte [Replication Agent Security Model](../security/replication-agent-security-model.md) y [Replication Security Best Practices](../security/replication-security-best-practices.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-149">For more information, see [Replication Agent Security Model](../security/replication-agent-security-model.md) and [Replication Security Best Practices](../security/replication-security-best-practices.md).</span></span>  
  
    -   <span data-ttu-id="88bd5-150">De forma opcional, incluir la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-150">Optionally script the publication.</span></span> <span data-ttu-id="88bd5-151">Para más información, consulte [Scripting Replication](../scripting-replication.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-151">For more information, see [Scripting Replication](../scripting-replication.md).</span></span>  
  
    -   <span data-ttu-id="88bd5-152">Especificar un nombre para la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-152">Specify a name for the publication.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="88bd5-153">Usar Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="88bd5-153">Using Transact-SQL</span></span>  
 <span data-ttu-id="88bd5-154">Las publicaciones pueden crearse mediante programación con procedimientos almacenados de replicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-154">Publications can be created programmatically using replication stored procedures.</span></span> <span data-ttu-id="88bd5-155">Los procedimientos almacenados que se usen dependerán del tipo de publicación creado.</span><span class="sxs-lookup"><span data-stu-id="88bd5-155">The stored procedures that are used will depend on the type of publication being created.</span></span>  
  
#### <a name="to-create-a-snapshot-or-transactional-publication"></a><span data-ttu-id="88bd5-156">Para crear una publicación transaccional o de instantáneas</span><span class="sxs-lookup"><span data-stu-id="88bd5-156">To create a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="88bd5-157">En la base de datos de publicación del publicador, ejecute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql) para habilitar la publicación de la base de datos actual con la replicación transaccional o de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="88bd5-157">At the Publisher on the publication database, execute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql) to enable publication of the current database using snapshot or transactional replication.</span></span>  
  
2.  <span data-ttu-id="88bd5-158">En el caso de una publicación transaccional, determine si existe un trabajo de Agente de registro del LOG para la base de datos de publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-158">For a transactional publication, determine whether a Log Reader Agent job exists for the publication database.</span></span> <span data-ttu-id="88bd5-159">Este paso no es necesario para las publicaciones de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="88bd5-159">(This step is not required for snapshot publications.)</span></span>  
  
    -   <span data-ttu-id="88bd5-160">Si existe un trabajo de Agente de registro del LOG para la base de datos de publicación, continúe en el paso 3.</span><span class="sxs-lookup"><span data-stu-id="88bd5-160">If a Log Reader Agent job exists for the publication database, proceed to step 3.</span></span>  
  
    -   <span data-ttu-id="88bd5-161">Si no está seguro de que exista un Agente de registro del LOG para una base de datos publicada, ejecute [sp_helplogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helplogreader-agent-transact-sql) en la base de datos de publicación del publicador.</span><span class="sxs-lookup"><span data-stu-id="88bd5-161">If you are unsure whether a Log Reader Agent job exists for a published database, execute [sp_helplogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helplogreader-agent-transact-sql) at the Publisher on the publication database.</span></span>  
  
    -   <span data-ttu-id="88bd5-162">Si el conjunto de resultados está vacío, cree un trabajo de Agente de registro del LOG.</span><span class="sxs-lookup"><span data-stu-id="88bd5-162">If the result set is empty, create a Log Reader Agent job.</span></span> <span data-ttu-id="88bd5-163">En el publicador, ejecute [sp_addlogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="88bd5-163">At the Publisher, execute [sp_addlogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql).</span></span> <span data-ttu-id="88bd5-164">Especifique las credenciales de [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows con las que se ejecuta el agente para **\@job_name** y **\@password**.</span><span class="sxs-lookup"><span data-stu-id="88bd5-164">Specify the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows credentials under which the agent runs for **\@job_name** and **\@password**.</span></span> <span data-ttu-id="88bd5-165">Si el agente va a usar la autenticación de SQL Server al conectarse al publicador, también debe especificar un valor de **0** para **\@publisher_security_mode** y la [!INCLUDE[msCoName](../../../includes/msconame-md.md)] información de inicio de sesión de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para **\@publisher_login** y **\@publisher_password**.</span><span class="sxs-lookup"><span data-stu-id="88bd5-165">If the agent will use SQL Server Authentication when connecting to the Publisher, you must also specify a value of **0** for **\@publisher_security_mode** and the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login information for **\@publisher_login** and **\@publisher_password**.</span></span> <span data-ttu-id="88bd5-166">Continúe en el paso 3.</span><span class="sxs-lookup"><span data-stu-id="88bd5-166">Proceed to step 3.</span></span>  
  
3.  <span data-ttu-id="88bd5-167">En el publicador, ejecute [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="88bd5-167">At the Publisher, execute [sp_addpublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql).</span></span> <span data-ttu-id="88bd5-168">Especifique un nombre de publicación para la \*\* \@ publicación**y, para el parámetro \*\* \@ repl_freq** , especifique un valor de `snapshot` para una publicación de instantáneas o un valor de `continuous` para una publicación transaccional.</span><span class="sxs-lookup"><span data-stu-id="88bd5-168">Specify a publication name for **\@publication**, and, for the **\@repl_freq** parameter, specify a value of `snapshot` for a snapshot publication or a value of `continuous` for a transactional publication.</span></span> <span data-ttu-id="88bd5-169">Especifique cualquier otra opción de publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-169">Specify any other publication options.</span></span> <span data-ttu-id="88bd5-170">Esto define la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-170">This defines the publication.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="88bd5-171">Los nombres de publicación no pueden incluir los caracteres siguientes:</span><span class="sxs-lookup"><span data-stu-id="88bd5-171">Publication names cannot include the following characters:</span></span>  
    >   
    >  <span data-ttu-id="88bd5-172">% \* [ ] | : " ?</span><span class="sxs-lookup"><span data-stu-id="88bd5-172">% \* [ ] | : " ?</span></span> <span data-ttu-id="88bd5-173">\ / \< ></span><span class="sxs-lookup"><span data-stu-id="88bd5-173">\ / \< ></span></span>  
  
4.  <span data-ttu-id="88bd5-174">En el publicador, ejecute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="88bd5-174">At the Publisher, execute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql).</span></span> <span data-ttu-id="88bd5-175">Especifique el nombre de publicación usado en el paso 3 para **\@publication** y las credenciales de Windows con las que se ejecuta el Agente de instantáneas para **\@snapshot_job_name** y **\@password**.</span><span class="sxs-lookup"><span data-stu-id="88bd5-175">Specify the publication name used in step 3 for **\@publication** and the Windows credentials under which the Snapshot Agent runs for **\@snapshot_job_name** and **\@password**.</span></span> <span data-ttu-id="88bd5-176">Si el agente va a usar la autenticación de SQL Server al conectarse al publicador, también debe especificar un valor de **0** para **\@publisher_security_mode** y la información de inicio de sesión de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para **\@publisher_login** y **\@publisher_password**.</span><span class="sxs-lookup"><span data-stu-id="88bd5-176">If the agent will use SQL Server Authentication when connecting to the Publisher, you must also specify a value of **0** for **\@publisher_security_mode** and the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login information for **\@publisher_login** and **\@publisher_password**.</span></span> <span data-ttu-id="88bd5-177">Esto crea un trabajo de Agente de instantáneas para la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-177">This creates a Snapshot Agent job for the publication.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="88bd5-178">Al configurar un publicador con un distribuidor remoto, los valores suministrados para todos los parámetros, incluidos *job_login* y *job_password*, se envían al distribuidor como texto sin formato.</span><span class="sxs-lookup"><span data-stu-id="88bd5-178">When configuring a Publisher with a remote Distributor, the values supplied for all parameters, including *job_login* and *job_password*, are sent to the Distributor as plain text.</span></span> <span data-ttu-id="88bd5-179">Antes de ejecutar este procedimiento almacenado, se recomienda cifrar la conexión entre el publicador y su distribuidor remoto.</span><span class="sxs-lookup"><span data-stu-id="88bd5-179">You should encrypt the connection between the Publisher and its remote Distributor before executing this stored procedure.</span></span> <span data-ttu-id="88bd5-180">Para obtener más información, vea [Habilitar conexiones cifradas en el motor de base de datos &#40;Administrador de configuración de SQL Server&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-180">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span>  
  
5.  <span data-ttu-id="88bd5-181">Agregue artículos a la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-181">Add articles to the publication.</span></span> <span data-ttu-id="88bd5-182">Para más información, consulte [Define an Article](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-182">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
6.  <span data-ttu-id="88bd5-183">Inicie el trabajo del Agente de instantáneas para generar la instantánea inicial de esta publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-183">Start the Snapshot Agent job to generate the initial snapshot for this publication.</span></span> <span data-ttu-id="88bd5-184">Para más información, consulte [Crear y aplicar la instantánea inicial](../create-and-apply-the-initial-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-184">For more information, see [Create and Apply the Initial Snapshot](../create-and-apply-the-initial-snapshot.md).</span></span>  
  
#### <a name="to-create-a-merge-publication"></a><span data-ttu-id="88bd5-185">Para crear una publicación de combinación</span><span class="sxs-lookup"><span data-stu-id="88bd5-185">To create a merge publication</span></span>  
  
1.  <span data-ttu-id="88bd5-186">En el publicador, ejecute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql) para habilitar la publicación de la base de datos actual con la replicación de mezcla.</span><span class="sxs-lookup"><span data-stu-id="88bd5-186">At the Publisher, execute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql) to enable publication of the current database using merge replication.</span></span>  
  
2.  <span data-ttu-id="88bd5-187">En el publicador de la base de datos de publicación, ejecute [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="88bd5-187">At the Publisher on the publication database, execute [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql).</span></span> <span data-ttu-id="88bd5-188">Especifique un nombre de publicación para **\@publication** y cualquier otra opción de publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-188">Specify a name for the publication for **\@publication** and any other publication options.</span></span> <span data-ttu-id="88bd5-189">Esto define la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-189">This defines the publication.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="88bd5-190">Los nombres de publicación no pueden incluir los caracteres siguientes:</span><span class="sxs-lookup"><span data-stu-id="88bd5-190">Publication names cannot include the following characters:</span></span>  
    >   
    >  <span data-ttu-id="88bd5-191">% \* [ ] | : " ?</span><span class="sxs-lookup"><span data-stu-id="88bd5-191">% \* [ ] | : " ?</span></span> <span data-ttu-id="88bd5-192">\ / \< ></span><span class="sxs-lookup"><span data-stu-id="88bd5-192">\ / \< ></span></span>  
  
3.  <span data-ttu-id="88bd5-193">En el publicador, ejecute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="88bd5-193">At the Publisher, execute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql).</span></span> <span data-ttu-id="88bd5-194">Especifique el nombre de publicación usado en el paso 2 para **\@publication** y las credenciales de Windows con las que se ejecuta el Agente de instantáneas para **\@snapshot_job_name** y **\@password**.</span><span class="sxs-lookup"><span data-stu-id="88bd5-194">Specify the publication name used in step 2 for **\@publication** and the Windows credentials under which the Snapshot Agent runs for **\@snapshot_job_name** and **\@password**.</span></span> <span data-ttu-id="88bd5-195">Si el agente va a usar la autenticación de SQL Server al conectarse al publicador, también debe especificar un valor de **0** para **\@publisher_security_mode** y la información de inicio de sesión de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] para **\@publisher_login** y **\@publisher_password**.</span><span class="sxs-lookup"><span data-stu-id="88bd5-195">If the agent will use SQL Server Authentication when connecting to the Publisher, you must also specify a value of **0** for **\@publisher_security_mode** and the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login information for **\@publisher_login** and **\@publisher_password**.</span></span> <span data-ttu-id="88bd5-196">Esto crea un trabajo de Agente de instantáneas para la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-196">This creates a Snapshot Agent job for the publication.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="88bd5-197">Al configurar un publicador con un distribuidor remoto, los valores suministrados para todos los parámetros, incluidos *job_login* y *job_password*, se envían al distribuidor como texto sin formato.</span><span class="sxs-lookup"><span data-stu-id="88bd5-197">When configuring a Publisher with a remote Distributor, the values supplied for all parameters, including *job_login* and *job_password*, are sent to the Distributor as plain text.</span></span> <span data-ttu-id="88bd5-198">Antes de ejecutar este procedimiento almacenado, se recomienda cifrar la conexión entre el publicador y su distribuidor remoto.</span><span class="sxs-lookup"><span data-stu-id="88bd5-198">You should encrypt the connection between the Publisher and its remote Distributor before executing this stored procedure.</span></span> <span data-ttu-id="88bd5-199">Para obtener más información, vea [Habilitar conexiones cifradas en el motor de base de datos &#40;Administrador de configuración de SQL Server&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-199">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span>  
  
4.  <span data-ttu-id="88bd5-200">Agregue artículos a la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-200">Add articles to the publication.</span></span> <span data-ttu-id="88bd5-201">Para más información, consulte [Define an Article](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-201">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
5.  <span data-ttu-id="88bd5-202">Inicie el trabajo del Agente de instantáneas para generar la instantánea inicial de esta publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-202">Start the Snapshot Agent job to generate the initial snapshot for this publication.</span></span> <span data-ttu-id="88bd5-203">Para más información, consulte [Crear y aplicar la instantánea inicial](../create-and-apply-the-initial-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-203">For more information, see [Create and Apply the Initial Snapshot](../create-and-apply-the-initial-snapshot.md).</span></span>  
  
###  <a name="example-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="88bd5-204">Ejemplo (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="88bd5-204">Example (Transact-SQL)</span></span>  
 <span data-ttu-id="88bd5-205">Este ejemplo crea una publicación transaccional.</span><span class="sxs-lookup"><span data-stu-id="88bd5-205">This example creates a transactional publication.</span></span> <span data-ttu-id="88bd5-206">Las variables de scripting se usan para pasar las credenciales de Windows necesarias para crear los trabajos del Agente de instantáneas y del Agente de registro del LOG.</span><span class="sxs-lookup"><span data-stu-id="88bd5-206">Scripting variables are used to pass Windows credentials that are needed to create jobs for the Snapshot Agent and Log Reader Agent.</span></span>  
  
 [!code-sql[HowTo#sp_AddTranPub](../../../snippets/tsql/SQL15/replication/howto/tsql/createtranpub.sql#sp_addtranpub)]  
  
 <span data-ttu-id="88bd5-207">Este ejemplo crea una publicación de combinación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-207">This example creates a merge publication.</span></span> <span data-ttu-id="88bd5-208">Las variables de scripting se usan para pasar las credenciales de Windows necesarias para crear el trabajo del Agente de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="88bd5-208">Scripting variables are used to pass Windows credentials that are needed to create the job for the Snapshot Agent.</span></span>  
  
 [!code-sql[HowTo#sp_AddMergePub](../../../snippets/tsql/SQL15/replication/howto/tsql/createmergepub.sql#sp_addmergepub)]  
  
##  <a name="using-replication-management-objects-rmo"></a><a name="RMOProcedure"></a> <span data-ttu-id="88bd5-209">Uso de Replication Management Objects (RMO)</span><span class="sxs-lookup"><span data-stu-id="88bd5-209">Using Replication Management Objects (RMO)</span></span>  
 <span data-ttu-id="88bd5-210">Puede crear publicaciones mediante programación utilizando Replication Management Objects (RMO).</span><span class="sxs-lookup"><span data-stu-id="88bd5-210">You can create publications programmatically by using Replication Management Objects (RMO).</span></span> <span data-ttu-id="88bd5-211">Las clases RMO que usa para crear una publicación dependen del tipo de publicación que crea.</span><span class="sxs-lookup"><span data-stu-id="88bd5-211">The RMO classes that you use to create a publication depend on the type of publication you create.</span></span>  
  
#### <a name="to-create-a-snapshot-or-transactional-publication"></a><span data-ttu-id="88bd5-212">Para crear una publicación transaccional o de instantáneas</span><span class="sxs-lookup"><span data-stu-id="88bd5-212">To create a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="88bd5-213">Cree una conexión al publicador mediante la clase <xref:Microsoft.SqlServer.Management.Common.ServerConnection> .</span><span class="sxs-lookup"><span data-stu-id="88bd5-213">Create a connection to the Publisher by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
2.  <span data-ttu-id="88bd5-214">Cree una instancia de la clase <xref:Microsoft.SqlServer.Replication.ReplicationDatabase> para la base de datos de publicación, establezca la propiedad <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> en la instancia de <xref:Microsoft.SqlServer.Management.Common.ServerConnection> del paso 1 y llame al método <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> .</span><span class="sxs-lookup"><span data-stu-id="88bd5-214">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationDatabase> class for the publication database, set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the instance of <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1, and call the <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> method.</span></span> <span data-ttu-id="88bd5-215">Si <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> devuelve `false`, compruebe que la base de datos existe.</span><span class="sxs-lookup"><span data-stu-id="88bd5-215">If <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> returns `false`, verify that the database exists.</span></span>  
  
3.  <span data-ttu-id="88bd5-216">Si la propiedad <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.EnabledTransPublishing%2A> es `false`, establézcala en `true`.</span><span class="sxs-lookup"><span data-stu-id="88bd5-216">If the <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.EnabledTransPublishing%2A> property is `false`, set it to `true`.</span></span>  
  
4.  <span data-ttu-id="88bd5-217">Para una publicación transaccional, compruebe el valor de la propiedad <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.LogReaderAgentExists%2A> .</span><span class="sxs-lookup"><span data-stu-id="88bd5-217">For a transactional publication, check the value of the <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.LogReaderAgentExists%2A> property.</span></span> <span data-ttu-id="88bd5-218">Si esta propiedad es `true`, un trabajo del Agente de registro del LOG ya existe para esta base de datos.</span><span class="sxs-lookup"><span data-stu-id="88bd5-218">If this property is `true`, a Log Read Agent job already exists for this database.</span></span> <span data-ttu-id="88bd5-219">Si esta propiedad es `false`, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="88bd5-219">If this property is `false`, do the following:</span></span>  
  
    -   <span data-ttu-id="88bd5-220">Establezca los campos <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Login%2A> y <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Password%2A> o <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.SecurePassword%2A> de <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.LogReaderAgentProcessSecurity%2A> para proporcionar las credenciales para la cuenta de [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows con la que se ejecuta el Agente de registro del LOG.</span><span class="sxs-lookup"><span data-stu-id="88bd5-220">Set the <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Login%2A> and <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Password%2A> or <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.SecurePassword%2A> fields of <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.LogReaderAgentProcessSecurity%2A> to provide the credentials for the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows account under which the Log Reader Agent runs.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="88bd5-221">No es necesario configurar <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.LogReaderAgentProcessSecurity%2A> cuando un miembro del rol fijo de servidor `sysadmin` crea la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-221">Setting <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.LogReaderAgentProcessSecurity%2A> is not required when the publication is created by a member of the `sysadmin` fixed server role.</span></span> <span data-ttu-id="88bd5-222">En este caso, el agente suplantará a la cuenta del Agente SQL Server.</span><span class="sxs-lookup"><span data-stu-id="88bd5-222">In this case, the agent will impersonate the SQL Server Agent account.</span></span> <span data-ttu-id="88bd5-223">Para más información, consulte [Modelo de seguridad del agente de replicación](../security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-223">For more information, see [Replication Agent Security Model](../security/replication-agent-security-model.md).</span></span>  
  
    -   <span data-ttu-id="88bd5-224">(Opcional) configure los campos <xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.SqlStandardLogin%2A> y <xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.SqlStandardPassword%2A> o <xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.SecureSqlStandardPassword%2A> de <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.LogReaderAgentPublisherSecurity%2A> si utiliza la autenticación de SQL Server para conectarse al publicador.</span><span class="sxs-lookup"><span data-stu-id="88bd5-224">(Optional) Set the <xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.SqlStandardLogin%2A> and <xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.SqlStandardPassword%2A> or <xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.SecureSqlStandardPassword%2A> fields of <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.LogReaderAgentPublisherSecurity%2A> when using SQL Server Authentication to connect to the Publisher.</span></span>  
  
    -   <span data-ttu-id="88bd5-225">Llame al método <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.CreateLogReaderAgent%2A> para crear el trabajo del Agente de registro del LOG para la base de datos.</span><span class="sxs-lookup"><span data-stu-id="88bd5-225">Call the <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.CreateLogReaderAgent%2A> method to create the Log Reader Agent job for the database.</span></span>  
  
5.  <span data-ttu-id="88bd5-226">Cree una instancia de la clase <xref:Microsoft.SqlServer.Replication.TransPublication> y establezca las propiedades siguientes para este objeto:</span><span class="sxs-lookup"><span data-stu-id="88bd5-226">Create an instance of the <xref:Microsoft.SqlServer.Replication.TransPublication> class, and set the following properties for this object:</span></span>  
  
    -   <span data-ttu-id="88bd5-227">La <xref:Microsoft.SqlServer.Management.Common.ServerConnection> del paso 1 para <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A>.</span><span class="sxs-lookup"><span data-stu-id="88bd5-227">The <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1 for <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A>.</span></span>  
  
    -   <span data-ttu-id="88bd5-228">El nombre de la base de datos publicada para <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A>.</span><span class="sxs-lookup"><span data-stu-id="88bd5-228">The name of the published database for <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A>.</span></span>  
  
    -   <span data-ttu-id="88bd5-229">Un nombre de publicación para <xref:Microsoft.SqlServer.Replication.Publication.Name%2A>.</span><span class="sxs-lookup"><span data-stu-id="88bd5-229">A name for the publication for <xref:Microsoft.SqlServer.Replication.Publication.Name%2A>.</span></span>  
  
    -   <span data-ttu-id="88bd5-230">Un <xref:Microsoft.SqlServer.Replication.PublicationType> de <xref:Microsoft.SqlServer.Replication.PublicationType.Transactional> o <xref:Microsoft.SqlServer.Replication.PublicationType.Snapshot>.</span><span class="sxs-lookup"><span data-stu-id="88bd5-230">A <xref:Microsoft.SqlServer.Replication.PublicationType> of either <xref:Microsoft.SqlServer.Replication.PublicationType.Transactional> or <xref:Microsoft.SqlServer.Replication.PublicationType.Snapshot>.</span></span>  
  
    -   <span data-ttu-id="88bd5-231">Los campos <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Login%2A> y <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Password%2A> de <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A> para proporcionar las credenciales de la cuenta de Windows con la que se ejecuta el trabajo del Agente de mezcla.</span><span class="sxs-lookup"><span data-stu-id="88bd5-231">The <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Login%2A> and <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Password%2A> fields of <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A> to provide the credentials for the Windows account under which the Snapshot Agent runs.</span></span> <span data-ttu-id="88bd5-232">Se usa esta cuenta también cuando el Agente de instantáneas realiza las conexiones al Distribuidor local y para cualquier conexión remota cuando se usa Autenticación de Windows.</span><span class="sxs-lookup"><span data-stu-id="88bd5-232">This account is also used when the Snapshot Agent makes connections to the local Distributor and for any remote connections when using Windows Authentication.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="88bd5-233">No es necesario configurar <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A> cuando un miembro del rol fijo de servidor `sysadmin` crea la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-233">Setting <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A> is not required when the publication is created by a member of the `sysadmin` fixed server role.</span></span> <span data-ttu-id="88bd5-234">En este caso, el agente suplantará a la cuenta del Agente SQL Server.</span><span class="sxs-lookup"><span data-stu-id="88bd5-234">In this case, the agent will impersonate the SQL Server Agent account.</span></span> <span data-ttu-id="88bd5-235">Para más información, consulte [Modelo de seguridad del agente de replicación](../security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-235">For more information, see [Replication Agent Security Model](../security/replication-agent-security-model.md).</span></span>  
  
    -   <span data-ttu-id="88bd5-236">(Opcional) Los campos <xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.SqlStandardLogin%2A> y <xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.SqlStandardPassword%2A> o <xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.SecureSqlStandardPassword%2A> de <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentPublisherSecurity%2A> si usa la autenticación de SQL Server para conectarse al Publicador.</span><span class="sxs-lookup"><span data-stu-id="88bd5-236">(Optional) The <xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.SqlStandardLogin%2A> and <xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.SqlStandardPassword%2A> or <xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.SecureSqlStandardPassword%2A> fields of <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentPublisherSecurity%2A> when using SQL Server Authentication to connect to the Publisher.</span></span>  
  
    -   <span data-ttu-id="88bd5-237">(Opcional) Use el operador lógico OR inclusivo (`|` en Visual C# y `Or` en Visual Basic) y el operador lógico OR exclusivo (`^` en Visual C# y `Xor` en Visual Basic) para establecer los valores <xref:Microsoft.SqlServer.Replication.PublicationAttributes> para la propiedad <xref:Microsoft.SqlServer.Replication.Publication.Attributes%2A>.</span><span class="sxs-lookup"><span data-stu-id="88bd5-237">(Optional) Use the inclusive logical OR operator (`|` in Visual C# and `Or` in Visual Basic) and the exclusive logical OR operator (`^` in Visual C# and `Xor` in Visual Basic) to set the <xref:Microsoft.SqlServer.Replication.PublicationAttributes> values for the <xref:Microsoft.SqlServer.Replication.Publication.Attributes%2A> property.</span></span>  
  
    -   <span data-ttu-id="88bd5-238">(Opcional) El nombre del Publicador para <xref:Microsoft.SqlServer.Replication.TransPublication.PublisherName%2A> cuando el Publicador no es de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="88bd5-238">(Optional) The name of the Publisher for <xref:Microsoft.SqlServer.Replication.TransPublication.PublisherName%2A> when the Publisher is a non-SQL Server Publisher.</span></span>  
  
6.  <span data-ttu-id="88bd5-239">Llame al método <xref:Microsoft.SqlServer.Replication.Publication.Create%2A> para crear la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-239">Call the <xref:Microsoft.SqlServer.Replication.Publication.Create%2A> method to create the publication.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="88bd5-240">Cuando se configura un Publicador con un Distribuidor remoto, los valores suministrados para todas las propiedades, incluidos <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A>, se envían al Distribuidor como texto simple.</span><span class="sxs-lookup"><span data-stu-id="88bd5-240">When configuring a Publisher with a remote Distributor, the values supplied for all properties, including <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A>, are sent to the Distributor as plain text.</span></span> <span data-ttu-id="88bd5-241">Debe cifrar la conexión entre el publicador y su distribuidor remoto antes de llamar al método <xref:Microsoft.SqlServer.Replication.Publication.Create%2A> .</span><span class="sxs-lookup"><span data-stu-id="88bd5-241">You should encrypt the connection between the Publisher and its remote Distributor before calling the <xref:Microsoft.SqlServer.Replication.Publication.Create%2A> method.</span></span> <span data-ttu-id="88bd5-242">Para obtener más información, vea [Habilitar conexiones cifradas en el motor de base de datos &#40;Administrador de configuración de SQL Server&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-242">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span>  
  
7.  <span data-ttu-id="88bd5-243">Llame al método <xref:Microsoft.SqlServer.Replication.Publication.CreateSnapshotAgent%2A> para crear el trabajo del Agente de instantáneas para la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-243">Call the <xref:Microsoft.SqlServer.Replication.Publication.CreateSnapshotAgent%2A> method to create the Snapshot Agent job for the publication.</span></span>  
  
#### <a name="to-create-a-merge-publication"></a><span data-ttu-id="88bd5-244">Para crear una publicación de combinación</span><span class="sxs-lookup"><span data-stu-id="88bd5-244">To create a merge publication</span></span>  
  
1.  <span data-ttu-id="88bd5-245">Cree una conexión al publicador mediante la clase <xref:Microsoft.SqlServer.Management.Common.ServerConnection> .</span><span class="sxs-lookup"><span data-stu-id="88bd5-245">Create a connection to the Publisher by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
2.  <span data-ttu-id="88bd5-246">Cree una instancia de la clase <xref:Microsoft.SqlServer.Replication.ReplicationDatabase> para la base de datos de publicación, establezca la propiedad <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> en la instancia de <xref:Microsoft.SqlServer.Management.Common.ServerConnection> del paso 1 y llame al método <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> .</span><span class="sxs-lookup"><span data-stu-id="88bd5-246">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationDatabase> class for the publication database, set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the instance of <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1, and call the <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> method.</span></span> <span data-ttu-id="88bd5-247">Si <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> devuelve `false`, compruebe que la base de datos existe.</span><span class="sxs-lookup"><span data-stu-id="88bd5-247">If <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> returns `false`, verify that the database exists.</span></span>  
  
3.  <span data-ttu-id="88bd5-248">Si la propiedad <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.EnabledMergePublishing%2A> es `false`, establézcala en `true` y llame a <xref:Microsoft.SqlServer.Replication.ReplicationObject.CommitPropertyChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="88bd5-248">If <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.EnabledMergePublishing%2A> Property is `false`, set it to `true`, and call <xref:Microsoft.SqlServer.Replication.ReplicationObject.CommitPropertyChanges%2A>.</span></span>  
  
4.  <span data-ttu-id="88bd5-249">Cree una instancia de la clase <xref:Microsoft.SqlServer.Replication.MergePublication> y establezca las propiedades siguientes para este objeto:</span><span class="sxs-lookup"><span data-stu-id="88bd5-249">Create an instance of the <xref:Microsoft.SqlServer.Replication.MergePublication> class, and set the following properties for this object:</span></span>  
  
    -   <span data-ttu-id="88bd5-250">La <xref:Microsoft.SqlServer.Management.Common.ServerConnection> del paso 1 para <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A>.</span><span class="sxs-lookup"><span data-stu-id="88bd5-250">The <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1 for <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A>.</span></span>  
  
    -   <span data-ttu-id="88bd5-251">El nombre de la base de datos publicada para <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A>.</span><span class="sxs-lookup"><span data-stu-id="88bd5-251">The name of the published database for <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A>.</span></span>  
  
    -   <span data-ttu-id="88bd5-252">Un nombre de publicación para <xref:Microsoft.SqlServer.Replication.Publication.Name%2A>.</span><span class="sxs-lookup"><span data-stu-id="88bd5-252">A name for the publication for <xref:Microsoft.SqlServer.Replication.Publication.Name%2A>.</span></span>  
  
    -   <span data-ttu-id="88bd5-253">Los campos <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Login%2A> y <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Password%2A> de <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A> para proporcionar las credenciales de la cuenta de Windows con la que se ejecuta el trabajo del Agente de mezcla.</span><span class="sxs-lookup"><span data-stu-id="88bd5-253">The <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Login%2A> and <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Password%2A> fields of <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A> to provide the credentials for the Windows account under which the Snapshot Agent runs.</span></span> <span data-ttu-id="88bd5-254">Se usa esta cuenta también cuando el Agente de instantáneas realiza las conexiones al Distribuidor local y para cualquier conexión remota cuando se usa Autenticación de Windows.</span><span class="sxs-lookup"><span data-stu-id="88bd5-254">This account is also used when the Snapshot Agent makes connections to the local Distributor and for any remote connections when using Windows Authentication.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="88bd5-255">No es necesario configurar <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A> cuando un miembro del rol fijo de servidor `sysadmin` crea la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-255">Setting <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A> is not required when the publication is created by a member of the `sysadmin` fixed server role.</span></span> <span data-ttu-id="88bd5-256">Para más información, consulte [Modelo de seguridad del agente de replicación](../security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-256">For more information, see [Replication Agent Security Model](../security/replication-agent-security-model.md).</span></span>  
  
    -   <span data-ttu-id="88bd5-257">(Opcional) Use el operador lógico OR inclusivo (`|` en Visual C# y `Or` en Visual Basic) y el operador lógico OR exclusivo (`^` en Visual C# y `Xor` en Visual Basic) para establecer los valores <xref:Microsoft.SqlServer.Replication.PublicationAttributes> para la propiedad <xref:Microsoft.SqlServer.Replication.Publication.Attributes%2A>.</span><span class="sxs-lookup"><span data-stu-id="88bd5-257">(Optional) Use the inclusive logical OR operator (`|` in Visual C# and `Or` in Visual Basic) and the exclusive logical OR operator (`^` in Visual C# and `Xor` in Visual Basic) to set the <xref:Microsoft.SqlServer.Replication.PublicationAttributes> values for the <xref:Microsoft.SqlServer.Replication.Publication.Attributes%2A> property.</span></span>  
  
5.  <span data-ttu-id="88bd5-258">Llame al método <xref:Microsoft.SqlServer.Replication.Publication.Create%2A> para crear la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-258">Call the <xref:Microsoft.SqlServer.Replication.Publication.Create%2A> method to create the publication.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="88bd5-259">Cuando se configura un Publicador con un Distribuidor remoto, los valores suministrados para todas las propiedades, incluidos <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A>, se envían al Distribuidor como texto simple.</span><span class="sxs-lookup"><span data-stu-id="88bd5-259">When configuring a Publisher with a remote Distributor, the values supplied for all properties, including <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A>, are sent to the Distributor as plain text.</span></span> <span data-ttu-id="88bd5-260">Debe cifrar la conexión entre el publicador y su distribuidor remoto antes de llamar al método <xref:Microsoft.SqlServer.Replication.Publication.Create%2A> .</span><span class="sxs-lookup"><span data-stu-id="88bd5-260">You should encrypt the connection between the Publisher and its remote Distributor before calling the <xref:Microsoft.SqlServer.Replication.Publication.Create%2A> method.</span></span> <span data-ttu-id="88bd5-261">Para obtener más información, vea [Habilitar conexiones cifradas en el motor de base de datos &#40;Administrador de configuración de SQL Server&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-261">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span>  
  
6.  <span data-ttu-id="88bd5-262">Llame al método <xref:Microsoft.SqlServer.Replication.Publication.CreateSnapshotAgent%2A> para crear el trabajo del Agente de instantáneas para la publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-262">Call the <xref:Microsoft.SqlServer.Replication.Publication.CreateSnapshotAgent%2A> method to create the Snapshot Agent job for the publication.</span></span>  
  
###  <a name="examples-rmo"></a><a name="PShellExample"></a> <span data-ttu-id="88bd5-263">Ejemplos (RMO)</span><span class="sxs-lookup"><span data-stu-id="88bd5-263">Examples (RMO)</span></span>  
 <span data-ttu-id="88bd5-264">Este ejemplo habilita la base de datos de AdventureWorks para la publicación transaccional, define un trabajo del Agente de registro del LOG y crea la publicación de AdvWorksProductTran.</span><span class="sxs-lookup"><span data-stu-id="88bd5-264">This example enables the AdventureWorks database for transactional publishing, defines a Log Reader Agent job, and creates the AdvWorksProductTran publication.</span></span> <span data-ttu-id="88bd5-265">Se debe definir un artículo para esta publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-265">An article must be defined for this publication.</span></span> <span data-ttu-id="88bd5-266">Las credenciales de cuenta de Windows que se necesitan para crear el trabajo del Agente de registro del LOG y el trabajo del Agente de instantáneas se pasan en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="88bd5-266">The Windows account credentials that are needed to create the Log Reader Agent job and the Snapshot Agent job are passed at runtime.</span></span> <span data-ttu-id="88bd5-267">Para obtener información sobre cómo usar RMO para definir artículos de instantáneas y de transacciones, vea [Define an Article](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-267">To learn how to use RMO to define snapshot and transactional articles, see [Define an Article](define-an-article.md).</span></span>  
  
 [!code-csharp[HowTo#rmo_CreateTranPub](../../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_createtranpub)]  
  
 [!code-vb[HowTo#rmo_vb_CreateTranPub](../../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_createtranpub)]  
  
 <span data-ttu-id="88bd5-268">Este ejemplo habilita la base de datos de AdventureWorks para la publicación de combinación y crea la publicación de AdvWorksSalesOrdersMerge.</span><span class="sxs-lookup"><span data-stu-id="88bd5-268">This example enables the AdventureWorks database for merge publishing and creates the AdvWorksSalesOrdersMerge publication.</span></span> <span data-ttu-id="88bd5-269">Todavía se deben definir artículos para esta publicación.</span><span class="sxs-lookup"><span data-stu-id="88bd5-269">Articles must still be defined for this publication.</span></span> <span data-ttu-id="88bd5-270">Las credenciales de cuenta de Windows que se necesitan para crear el trabajo del Agente de registro del LOG se pasan en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="88bd5-270">The Windows account credentials that are needed to create the Snapshot Agent job are passed at runtime.</span></span> <span data-ttu-id="88bd5-271">Para obtener información sobre cómo usar RMO para definir artículos de mezcla, vea [Define an Article](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="88bd5-271">To learn how to use RMO to define merge articles, see [Define an Article](define-an-article.md).</span></span>  
  
 [!code-csharp[HowTo#rmo_CreateMergePub](../../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_createmergepub)]  
  
 [!code-vb[HowTo#rmo_vb_CreateMergePub](../../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_createmergepub)]  
  
## <a name="see-also"></a><span data-ttu-id="88bd5-272">Consulte también</span><span class="sxs-lookup"><span data-stu-id="88bd5-272">See Also</span></span>  
 <span data-ttu-id="88bd5-273">[Usar sqlcmd con variables de script](../../scripting/sqlcmd-use-with-scripting-variables.md) </span><span class="sxs-lookup"><span data-stu-id="88bd5-273">[Use sqlcmd with Scripting Variables](../../scripting/sqlcmd-use-with-scripting-variables.md) </span></span>  
 <span data-ttu-id="88bd5-274">[Publicar datos y objetos de base de datos](publish-data-and-database-objects.md) </span><span class="sxs-lookup"><span data-stu-id="88bd5-274">[Publish Data and Database Objects](publish-data-and-database-objects.md) </span></span>  
 <span data-ttu-id="88bd5-275">[Replication Management Objects Concepts](../concepts/replication-management-objects-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="88bd5-275">[Replication Management Objects Concepts](../concepts/replication-management-objects-concepts.md) </span></span>  
 <span data-ttu-id="88bd5-276">[Define an Article](define-an-article.md) </span><span class="sxs-lookup"><span data-stu-id="88bd5-276">[Define an Article](define-an-article.md) </span></span>  
 <span data-ttu-id="88bd5-277">[Ver y modificar propiedades de publicación](view-and-modify-publication-properties.md) </span><span class="sxs-lookup"><span data-stu-id="88bd5-277">[View and Modify Publication Properties](view-and-modify-publication-properties.md) </span></span>  
 <span data-ttu-id="88bd5-278">[Configurar distribución](../configure-distribution.md) </span><span class="sxs-lookup"><span data-stu-id="88bd5-278">[Configure Distribution](../configure-distribution.md) </span></span>  
 <span data-ttu-id="88bd5-279">[Proteger el distribuidor](../security/secure-the-distributor.md) </span><span class="sxs-lookup"><span data-stu-id="88bd5-279">[Secure the Distributor](../security/secure-the-distributor.md) </span></span>  
 [<span data-ttu-id="88bd5-280">Proteger al publicador</span><span class="sxs-lookup"><span data-stu-id="88bd5-280">Secure the Publisher</span></span>](../security/secure-the-publisher.md)  
  
  
