---
title: Suscripciones actualizables para la replicación transaccional | Microsoft Docs
ms.custom: ''
ms.date: 03/31/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- transactional replication, updatable subscriptions
- updatable subscriptions, about updatable subscriptions
- queued updating subscriptions [SQL Server replication]
- immediate updating subscriptions
- subscriptions [SQL Server replication], updatable
- updatable subscriptions
ms.assetid: 8eec95cb-3a11-436e-bcee-bdcd05aa5c5a
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: e0b739ffe34a14519ff5290c406805ff7715edce
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87677530"
---
# <a name="updatable-subscriptions-for-transactional-replication"></a><span data-ttu-id="c3c2d-102">Updatable Subscriptions for Transactional Replication</span><span class="sxs-lookup"><span data-stu-id="c3c2d-102">Updatable Subscriptions for Transactional Replication</span></span>

<span data-ttu-id="c3c2d-103">**Se aplica a:** SQL Server 2008 (y versiones posteriores)</span><span class="sxs-lookup"><span data-stu-id="c3c2d-103">**Applies to:** SQL Server 2008 (and later)</span></span>

    
> [!NOTE]  
>  [!INCLUDE[ssNoteDepFutureAvoid](../../../includes/ssnotedepfutureavoid-md.md)]  
  
<span data-ttu-id="c3c2d-104">En SQL Server 2014, la replicación transaccional admite actualizaciones en los suscriptores a través de suscripciones actualizables y replicación punto a punto.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-104">In SQL Server 2014, transactional replication supports updates at Subscribers through updatable subscriptions and peer-to-peer replication.</span></span> <span data-ttu-id="c3c2d-105">A continuación se indican los dos tipos de suscripciones actualizables:</span><span class="sxs-lookup"><span data-stu-id="c3c2d-105">The following are the two types of updatable subscriptions:</span></span>  
  
-   <span data-ttu-id="c3c2d-106">Actualización inmediata.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-106">Immediate updating.</span></span> <span data-ttu-id="c3c2d-107">Para actualizar datos en el suscriptor, el publicador y el suscriptor deben estar conectados.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-107">The Publisher and Subscriber must be connected to update data at the Subscriber.</span></span>  
  
-   <span data-ttu-id="c3c2d-108">Actualización en cola. No es necesario que el publicador y el suscriptor estén conectados para actualizar datos en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-108">Queued updating The Publisher and Subscriber do not have to be connected to update data at the Subscriber.</span></span> <span data-ttu-id="c3c2d-109">Las actualizaciones se pueden realizar mientras el suscriptor o el publicador están sin conexión.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-109">Updates can be made while the Subscriber or Publisher is offline.</span></span>  
  
 <span data-ttu-id="c3c2d-110">Cuando se actualizan datos en un suscriptor, primero se propagan al publicador y después a los otros suscriptores.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-110">When data is updated at a Subscriber, it is first propagated to the Publisher and then propagated to other Subscribers.</span></span> <span data-ttu-id="c3c2d-111">Si se utiliza la actualización inmediata, los cambios se propagan inmediatamente mediante el protocolo de confirmación en dos fases.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-111">If immediate updating is used, the changes are propagated immediately using the two-phase commit protocol.</span></span> <span data-ttu-id="c3c2d-112">Si se utiliza la actualización en cola, los cambios se almacenan en una cola; después, las transacciones en cola se aplican de forma asincrónica en el publicador cuando exista conectividad de red.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-112">If queued updating is used, the changes are stored in a queue; the queued transactions are then applied asynchronously at the Publisher whenever network connectivity is available.</span></span> <span data-ttu-id="c3c2d-113">Debido a que las actualizaciones se propagan de forma asincrónica al publicador, los mismos datos pueden haber sido actualizados por el publicador o por otro suscriptor y, por lo tanto, se pueden producir conflictos al aplicar las actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-113">Because the updates are propagated asynchronously to the Publisher, the same data may have been updated by the Publisher or by another Subscriber and conflicts can occur when applying the updates.</span></span> <span data-ttu-id="c3c2d-114">Los conflictos se detectan y resuelven según una directiva de resolución de conflictos establecida al crear la publicación.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-114">Conflicts are detected and resolved according to a conflict resolution policy that is set when creating the publication.</span></span>  
  
 <span data-ttu-id="c3c2d-115">Si crea una publicación transaccional con suscripciones actualizables en el Asistente para nueva publicación, se habilitan la actualización inmediata y la actualización en cola.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-115">If you create a transactional publication with updatable subscriptions in the New Publication Wizard, both immediate updating and queued updating are enabled.</span></span> <span data-ttu-id="c3c2d-116">Si crea una publicación con procedimientos almacenados, puede habilitar una o ambas opciones.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-116">If you create a publication with stored procedures, you can enable one or both options.</span></span> <span data-ttu-id="c3c2d-117">Al crear una suscripción a la publicación, se especifica el modo de actualización que se va a utilizar.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-117">When you create a subscription to the publication, you specify which update mode to use.</span></span> <span data-ttu-id="c3c2d-118">Después, puede cambiar entre modos de actualización si es necesario.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-118">You can then switch between update modes if necessary.</span></span> <span data-ttu-id="c3c2d-119">Para obtener más información, vea la sección siguiente "Cambio entre modos de actualización".</span><span class="sxs-lookup"><span data-stu-id="c3c2d-119">For more information, see the following section "Switching between Update Modes".</span></span>  
  
 <span data-ttu-id="c3c2d-120">Para habilitar las suscripciones actualizables para publicaciones transaccionales, [Enable Updating Subscriptions for Transactional Publications](../publish/enable-updating-subscriptions-for-transactional-publications.md)</span><span class="sxs-lookup"><span data-stu-id="c3c2d-120">To enable updatable subscriptions for transactional publications, [Enable Updating Subscriptions for Transactional Publications](../publish/enable-updating-subscriptions-for-transactional-publications.md)</span></span>  
  
 <span data-ttu-id="c3c2d-121">Para crear suscripciones actualizables para publicaciones transaccionales, vea [Create an Updatable Subscription to a Transactional Publication](../publish/create-an-updatable-subscription-to-a-transactional-publication.md)</span><span class="sxs-lookup"><span data-stu-id="c3c2d-121">To create updatable subscriptions for transactional publications, see [Create an Updatable Subscription to a Transactional Publication](../publish/create-an-updatable-subscription-to-a-transactional-publication.md)</span></span>  
  
## <a name="switching-between-update-modes"></a><span data-ttu-id="c3c2d-122">Cambio entre modos de actualización</span><span class="sxs-lookup"><span data-stu-id="c3c2d-122">Switching Between Update Modes</span></span>  
 <span data-ttu-id="c3c2d-123">Al utilizar las suscripciones actualizables, puede especificar que una suscripción utilice un modo de actualización y, después, cambie al otro si la aplicación lo requiere.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-123">When using updatable subscriptions you can specify that a subscription should use one update mode and then switch to the other if the application requires it.</span></span> <span data-ttu-id="c3c2d-124">Por ejemplo, puede especificar que una suscripción utilice la actualización inmediata, pero cambie a la actualización en cola si se pierde la conectividad de red por un error del sistema.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-124">For example, you can specify that a subscription should use immediate updating, but switch to queued updating if a system failure results in the loss of network connectivity.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c3c2d-125">La replicación no cambia automáticamente entre modos de actualización.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-125">Replication does not switch automatically between update modes.</span></span> <span data-ttu-id="c3c2d-126">Debe establecer el modo de actualización mediante SQL Server Management Studio o la aplicación debe llamar a [sp_setreplfailovermode &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setreplfailovermode-transact-sql) para cambiar entre modos.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-126">You must set the update mode through SQL Server Management Studio or your application must call [sp_setreplfailovermode &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setreplfailovermode-transact-sql) to switch between modes.</span></span>  
  
 <span data-ttu-id="c3c2d-127">Si se cambia de actualización inmediata a actualización en cola, no puede volver a cambiar a la actualización inmediata hasta que el suscriptor y el publicador estén conectados y el Agente de lectura de cola haya aplicado todos los mensajes pendientes en la cola al publicador.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-127">If you switch from immediate updating to queued updating, you cannot switch back to immediate updating until the Subscriber and Publisher are connected and the Queue Reader Agent has applied all pending messages in the queue to the Publisher.</span></span>  
  
 <span data-ttu-id="c3c2d-128">**Para cambiar entre modos de actualización**</span><span class="sxs-lookup"><span data-stu-id="c3c2d-128">**To switch between update modes**</span></span>  
  
 <span data-ttu-id="c3c2d-129">Para cambiar entre modos de actualización, debe habilitar la publicación y suscripción para ambos modos de actualización y, a continuación, cambiar entre ellos si es necesario.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-129">To switch between updating modes, you must enable the publication and subscription for both update modes, and then switch between them if necessary.</span></span> <span data-ttu-id="c3c2d-130">Para obtener más información, vea</span><span class="sxs-lookup"><span data-stu-id="c3c2d-130">For more information, see</span></span>  
<span data-ttu-id="c3c2d-131">[Cambiar entre modos de actualización para una suscripción transaccional actualizable](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="c3c2d-131">[Switch Between Update Modes for an Updatable Transactional Subscription](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span></span>  
  
### <a name="considerations-for-using-updatable-subscriptions"></a><span data-ttu-id="c3c2d-132">Consideraciones para el uso de suscripciones actualizables</span><span class="sxs-lookup"><span data-stu-id="c3c2d-132">Considerations for Using Updatable Subscriptions</span></span>  
  
-   <span data-ttu-id="c3c2d-133">Después de haber habilitado una publicación para suscripciones de actualización o suscripciones de actualización en cola, no se puede deshabilitar la opción para la publicación (aunque las suscripciones no necesitan utilizarla).</span><span class="sxs-lookup"><span data-stu-id="c3c2d-133">After a publication is enabled for updating subscriptions or queued updating subscriptions, the option cannot be disabled for the publication (although subscriptions do not need to use it).</span></span> <span data-ttu-id="c3c2d-134">Para deshabilitar la opción, se debe eliminar la publicación y crear una nueva.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-134">To disable the option, the publication must be deleted and a new one created.</span></span>  
  
-   <span data-ttu-id="c3c2d-135">No se admiten los datos de republicación.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-135">Republishing data is not supported.</span></span>  
  
-   <span data-ttu-id="c3c2d-136">La replicación agrega la columna **msrepl_tran_version** a las tablas publicadas con fines de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-136">Replication adds the **msrepl_tran_version** column to published tables for tracking purposes.</span></span> <span data-ttu-id="c3c2d-137">A consecuencia de esta columna adicional, todas las instrucciones `INSERT` deben incluir una lista de columnas.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-137">Because of this additional column, all `INSERT` statements should include a column list.</span></span>  
  
-   <span data-ttu-id="c3c2d-138">Para realizar cambios de esquema en una tabla de una publicación que admita suscripciones de actualización, se debe detener toda la actividad de la tabla en el publicador y los suscriptores, y se deben propagar los cambios de datos pendientes a todos los nodos antes de realizar cambios de esquema.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-138">To make schema changes on a table in a publication that supports updating subscriptions, all activity on the table must be stopped at the Publisher and Subscribers, and pending data changes must be propagated to all nodes before making any schema changes.</span></span> <span data-ttu-id="c3c2d-139">De esta forma se garantiza que las transacciones pendientes no entren en conflicto con el cambio de esquema pendiente.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-139">This ensures that outstanding transactions do not conflict with the pending schema change.</span></span> <span data-ttu-id="c3c2d-140">Una vez propagados los cambios de esquema a todos los nodos, se puede reiniciar la actividad en las tablas publicadas.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-140">After the schema changes have propagated to all nodes, activity can resume on the published tables.</span></span> <span data-ttu-id="c3c2d-141">Para más información, vea [Poner en modo inactivo una topología de replicación &#40;programación de la replicación con Transact-SQL&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md).</span><span class="sxs-lookup"><span data-stu-id="c3c2d-141">For more information, see [Quiesce a Replication Topology &#40;Replication Transact-SQL Programming&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md).</span></span>  
  
-   <span data-ttu-id="c3c2d-142">Si planea cambiar entre modos de actualización, el Agente de lectura de cola se debe ejecutar una vez como mínimo después de que se haya inicializado la suscripción (de manera predeterminada, el Agente de lectura de cola se ejecuta de forma continua).</span><span class="sxs-lookup"><span data-stu-id="c3c2d-142">If you plan to switch between update modes, the Queue Reader Agent must run at least once after the subscription has been initialized (by default, the Queue Reader Agent runs continuously).</span></span>  
  
-   <span data-ttu-id="c3c2d-143">Si se realiza una partición horizontal de la base de datos de suscriptor y hay filas en la partición que existen en el suscriptor, pero no en el publicador, el suscriptor no podrá actualizar las filas preexistentes.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-143">If the Subscriber database is partitioned horizontally and there are rows in the partition that exist at the Subscriber, but not at the Publisher, the Subscriber cannot update the preexisting rows.</span></span> <span data-ttu-id="c3c2d-144">Si intenta actualizar estas filas, se obtendrá un error.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-144">Attempting to update these rows returns an error.</span></span> <span data-ttu-id="c3c2d-145">Las filas deben eliminarse de la tabla y agregarse después al publicador.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-145">The rows should be deleted from the table and then added at the Publisher.</span></span>  
  
### <a name="updates-at-the-subscriber"></a><span data-ttu-id="c3c2d-146">Actualizaciones en el suscriptor</span><span class="sxs-lookup"><span data-stu-id="c3c2d-146">Updates at the Subscriber</span></span>  
  
-   <span data-ttu-id="c3c2d-147">Las actualizaciones en el suscriptor se propagan al publicador incluso cuando una suscripción ha expirado o está inactiva.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-147">Updates at the Subscriber are propagated to the Publisher even if a subscription is expired or is inactive.</span></span> <span data-ttu-id="c3c2d-148">Asegúrese de que tales suscripciones se quitan o reinicializan.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-148">Ensure that any such subscriptions are either dropped or reinitialized.</span></span>  
  
-   <span data-ttu-id="c3c2d-149">Si se usan columnas `TIMESTAMP` o `IDENTITY`, y se replican como sus tipos de datos base, los valores de estas columnas no se deben actualizar en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-149">If `TIMESTAMP` or `IDENTITY` columns are used, and they are replicated as their base data types, values in these columns should not be updated at the Subscriber.</span></span>  
  
-   <span data-ttu-id="c3c2d-150">Los suscriptores no pueden actualizar o insertar valores `text`, `ntext` o `image` porque no es posible leer en las tablas insertadas o eliminadas dentro de los desencadenadores de seguimiento de cambios de replicación.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-150">Subscribers cannot update or insert `text`, `ntext` or `image` values because it is not possible to read from the inserted or deleted tables inside the replication change-tracking triggers.</span></span> <span data-ttu-id="c3c2d-151">Igualmente, los suscriptores no pueden actualizar o insertar valores `text` o `image` utilizando `WRITETEXT` o `UPDATETEXT` porque el publicador sobrescribe los datos.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-151">Similarly, Subscribers cannot update or insert `text` or `image` values using `WRITETEXT` or `UPDATETEXT` because the data is overwritten by the Publisher.</span></span> <span data-ttu-id="c3c2d-152">En su lugar, puede dividir las columnas `text` y `image` en una tabla independiente y modificar las dos tablas en una transacción.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-152">Instead, you could partition the `text` and `image` columns into a separate table and modify the two tables within a transaction.</span></span>  
  
     <span data-ttu-id="c3c2d-153">Para actualizar los objetos grandes de un suscriptor, utilice los tipos de datos `varchar(max)`, `nvarchar(max)` y `varbinary(max)` en lugar de `text`, `ntext` y `image`, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-153">To update large objects at a Subscriber, use the data types `varchar(max)`, `nvarchar(max)`, `varbinary(max)` instead of `text`, `ntext`, and `image` data types, respectively.</span></span>  
  
-   <span data-ttu-id="c3c2d-154">No se permiten actualizaciones de claves únicas (incluidas las claves principales) que generen duplicados (por ejemplo, una actualización con el formato `UPDATE <column> SET <column> =<column>+1` ) y se rechazarán debido a una infracción de unicidad.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-154">Updates to unique keys (including primary keys) that generate duplicates (for example, an update of the form `UPDATE <column> SET <column> =<column>+1` are not allowed and will be rejected because of a uniqueness violation.</span></span> <span data-ttu-id="c3c2d-155">Esto se debe a que la replicación propaga las actualizaciones de conjuntos realizadas en el suscriptor como instrucciones `UPDATE` individuales para cada fila afectada.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-155">This is because set updates made at the Subscriber are propagated by replication as individual `UPDATE` statements for each row affected.</span></span>  
  
-   <span data-ttu-id="c3c2d-156">Si se realiza una partición horizontal de la base de datos de suscriptor y hay filas en la partición que existen en el suscriptor pero no en el publicador, el suscriptor no podrá actualizar las filas preexistentes.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-156">If the Subscriber database is partitioned horizontally and there are rows in the partition that exist at the Subscriber but not at the Publisher, the Subscriber cannot update the pre-existing rows.</span></span> <span data-ttu-id="c3c2d-157">Si intenta actualizar estas filas, se obtendrá un error.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-157">Attempting to update these rows returns an error.</span></span> <span data-ttu-id="c3c2d-158">Las filas deben eliminarse de la tabla e insertarse de nuevo.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-158">The rows should be deleted from the table and inserted again.</span></span>  
  
### <a name="user-defined-triggers"></a><span data-ttu-id="c3c2d-159">Desencadenadores definidos por el usuario</span><span class="sxs-lookup"><span data-stu-id="c3c2d-159">User-defined Triggers</span></span>  
  
-   <span data-ttu-id="c3c2d-160">Si la aplicación requiere desencadenadores en el suscriptor, éstos se deben definir con la opción `NOT FOR REPLICATION` en el publicador y en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-160">If the application requires triggers at the Subscriber, the triggers should be defined with the `NOT FOR REPLICATION` option at the Publisher and Subscriber.</span></span> <span data-ttu-id="c3c2d-161">Así se garantiza que los desencadenadores se activen solamente para los cambios de datos originales, pero no cuando el cambio se replique.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-161">This ensures that triggers fire only for the original data change, but not when that change is replicated.</span></span>  
  
     <span data-ttu-id="c3c2d-162">Asegúrese de que el desencadenador definido por el usuario no se active cuando el desencadenador de replicación actualice la tabla.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-162">Ensure that the user-defined trigger does not fire when the replication trigger updates the table.</span></span> <span data-ttu-id="c3c2d-163">Para lograrlo, debe llamar al procedimiento `sp_check_for_sync_trigger` en el cuerpo del desencadenador definido por el usuario.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-163">This is accomplished by calling the procedure `sp_check_for_sync_trigger` in the body of the user-defined trigger.</span></span> <span data-ttu-id="c3c2d-164">Para obtener más información, consulte [sp_check_for_sync_trigger &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-check-for-sync-trigger-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c3c2d-164">For more information, see [sp_check_for_sync_trigger &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-check-for-sync-trigger-transact-sql).</span></span>  
  
### <a name="immediate-updating"></a><span data-ttu-id="c3c2d-165">Actualización inmediata</span><span class="sxs-lookup"><span data-stu-id="c3c2d-165">Immediate Updating</span></span>  
  
-   <span data-ttu-id="c3c2d-166">Para las suscripciones de actualización inmediata, los cambios en el suscriptor se propagan al publicador y se aplican mediante Microsoft DTC (Coordinador de transacciones distribuidas).</span><span class="sxs-lookup"><span data-stu-id="c3c2d-166">For immediate updating subscriptions, changes at the Subscriber are propagated to the Publisher and applied using Microsoft Distributed Transaction Coordinator (MS DTC).</span></span> <span data-ttu-id="c3c2d-167">Asegúrese de que MS DTC se ha instalado y configurado en el publicador y en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-167">Ensure that MS DTC is installed and configured at the Publisher and Subscriber.</span></span> <span data-ttu-id="c3c2d-168">Para obtener más información, consulte la documentación de Windows.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-168">For more information, see the Windows documentation.</span></span>  
  
-   <span data-ttu-id="c3c2d-169">Los desencadenadores que se utilizan en las suscripciones de actualización inmediata requieren una conexión al publicador para replicar los cambios.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-169">The triggers used by immediate updating subscriptions require a connection to the Publisher to replicate changes.</span></span>  
  
-   <span data-ttu-id="c3c2d-170">Si la publicación admite suscripciones de actualización inmediata y un artículo de la publicación tiene un filtro de columna, no puede excluir columnas que no admitan valores NULL y que no tengan valores predeterminados.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-170">If the publication allows immediate updating subscriptions and an article in the publication has a column filter, you cannot filter out non-nullable columns without defaults.</span></span>  
  
### <a name="queued-updating"></a><span data-ttu-id="c3c2d-171">Actualización en cola</span><span class="sxs-lookup"><span data-stu-id="c3c2d-171">Queued Updating</span></span>  
  
-   <span data-ttu-id="c3c2d-172">Las tablas incluidas en una publicación de combinación no se pueden publicar como parte de una publicación transaccional que admite suscripciones de actualización en cola.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-172">Tables included in a merge publication cannot also be published as part of a transactional publication that allows queued updating subscriptions.</span></span>  
  
-   <span data-ttu-id="c3c2d-173">No se recomienda realizar actualizaciones en columnas de clave principal al utilizar la actualización en cola, ya que se utiliza la clave principal como localizador de registros para todas las consultas.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-173">Updates made to primary key columns are not recommended when using queued updating because the primary key is used as a record locator for all queries.</span></span> <span data-ttu-id="c3c2d-174">Cuando la directiva de resolución de conflictos está establecida en El suscriptor gana, las actualizaciones de las claves principales deben realizarse con precaución.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-174">When the conflict resolution policy is set to Subscriber Wins, updates to primary keys should be made with caution.</span></span> <span data-ttu-id="c3c2d-175">Si se realizan actualizaciones de la clave principal en el publicador y en el suscriptor, el resultado serán dos filas con claves principales diferentes.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-175">If updates to the primary key are made at both the Publisher and at the Subscriber, the result will be two rows with different primary keys.</span></span>  
  
-   <span data-ttu-id="c3c2d-176">Para las columnas de tipo de datos `SQL_VARIANT`, cuando los datos se insertan o actualizan en el suscriptor, son asignados del siguiente modo por el Agente de lectura de cola al copiarlos del suscriptor a la cola:</span><span class="sxs-lookup"><span data-stu-id="c3c2d-176">For columns of data type `SQL_VARIANT`: when data is inserted or updated at the Subscriber, it is mapped in the following way by the Queue Reader Agent when it is copied from the Subscriber to the queue:</span></span>  
  
    -   <span data-ttu-id="c3c2d-177">`BIGINT`, `DECIMAL`, `NUMERIC`, `MONEY` y `SMALLMONEY` se asignan a `NUMERIC`.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-177">`BIGINT`, `DECIMAL`, `NUMERIC`, `MONEY`, and `SMALLMONEY` are mapped to `NUMERIC`.</span></span>  
  
    -   <span data-ttu-id="c3c2d-178">`BINARY` y `VARBINARY` se asignan a datos `VARBINARY`.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-178">`BINARY` and `VARBINARY` are mapped to `VARBINARY` data.</span></span>  
  
### <a name="conflict-detection-and-resolution"></a><span data-ttu-id="c3c2d-179">Detección y resolución de conflictos</span><span class="sxs-lookup"><span data-stu-id="c3c2d-179">Conflict Detection and Resolution</span></span>  
  
-   <span data-ttu-id="c3c2d-180">Para la directiva de conflictos El suscriptor gana: no se admite la resolución de conflictos para actualizaciones de columnas de clave principal.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-180">For the Subscriber Wins conflict policy: conflict resolution is not supported for updates to primary key columns.</span></span>  
  
-   <span data-ttu-id="c3c2d-181">Los conflictos causados por errores de restricción de clave externa no se resuelven con la replicación:</span><span class="sxs-lookup"><span data-stu-id="c3c2d-181">Conflicts due to foreign key constraint failures are not resolved by replication:</span></span>  
  
    -   <span data-ttu-id="c3c2d-182">Si no se esperan conflictos y los datos están correctamente divididos en particiones (los suscriptores no actualizan las mismas filas), puede utilizar restricciones de clave externa en el publicador y los suscriptores.</span><span class="sxs-lookup"><span data-stu-id="c3c2d-182">If conflicts are not expected and data is well partitioned (Subscribers do not update the same rows), you can use foreign key constraints on the Publisher and Subscribers.</span></span>  
  
    -   <span data-ttu-id="c3c2d-183">Si se esperan conflictos, no debe utilizar restricciones de clave externa en el publicador o suscriptor si utiliza la resolución de conflictos "El suscriptor gana"; no debe utilizar restricciones de clave externa en el suscriptor si utiliza la resolución de conflictos "El publicador gana".</span><span class="sxs-lookup"><span data-stu-id="c3c2d-183">If conflicts are expected: you should not use foreign key constraints at the Publisher or Subscriber if you use "Subscriber wins" conflict resolution; you should not use foreign key constraints at the Subscriber if you use "Publisher wins" conflict resolution.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c3c2d-184">Consulte también</span><span class="sxs-lookup"><span data-stu-id="c3c2d-184">See Also</span></span>  
 <span data-ttu-id="c3c2d-185">[Peer-to-Peer Transactional Replication](peer-to-peer-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="c3c2d-185">[Peer-to-Peer Transactional Replication](peer-to-peer-transactional-replication.md) </span></span>  
 <span data-ttu-id="c3c2d-186">[Replicación transaccional](transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="c3c2d-186">[Transactional Replication](transactional-replication.md) </span></span>  
 <span data-ttu-id="c3c2d-187">[Publicar datos y objetos de base de datos](../publish/publish-data-and-database-objects.md) </span><span class="sxs-lookup"><span data-stu-id="c3c2d-187">[Publish Data and Database Objects](../publish/publish-data-and-database-objects.md) </span></span>  
 [<span data-ttu-id="c3c2d-188">Suscribirse a publicaciones</span><span class="sxs-lookup"><span data-stu-id="c3c2d-188">Subscribe to Publications</span></span>](../subscribe-to-publications.md)  
  
  
