---
title: Detección de conflictos en la replicación punto a punto | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- transactional replication, peer-to-peer replication
- peer-to-peer transactional replication, conflict detection
ms.assetid: 754a1070-59bc-438d-998b-97fdd77d45ca
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 301a751bf5b5959ab1fc434ac2a583a6b0378fdd
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87673626"
---
# <a name="conflict-detection-in-peer-to-peer-replication"></a><span data-ttu-id="7d0a5-102">Detección de conflictos en la replicación punto a punto</span><span class="sxs-lookup"><span data-stu-id="7d0a5-102">Conflict Detection in Peer-to-Peer Replication</span></span>
  <span data-ttu-id="7d0a5-103">La replicación transaccional punto a punto permite insertar, actualizar o eliminar datos en cualquier nodo de una topología y propagar los cambios de los datos a los demás nodos.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-103">Peer-to-peer transactional replication lets you insert, update, or delete data at any node in a topology and have data changes propagated to the other nodes.</span></span> <span data-ttu-id="7d0a5-104">Dado que se pueden cambiar los datos de cualquier nodo, podrían producirse conflictos entre los datos modificados en los distintos nodos.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-104">Because you can change data at any node, data changes at different nodes could conflict with each other.</span></span> <span data-ttu-id="7d0a5-105">Si una fila se modifica en más de un nodo, puede producirse un conflicto o incluso la pérdida de una actualización cuando la fila se propaga a otros nodos.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-105">If a row is modified at more than one node, it can cause a conflict or even a lost update when the row is propagated to other nodes.</span></span>  
  
 <span data-ttu-id="7d0a5-106">La replicación punto a punto de [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] y versiones posteriores ofrece la posibilidad de habilitar la detección de conflictos en una topología punto a punto.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-106">Peer-to-peer replication in [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] and later versions provides the option to enable conflict detection across a peer-to-peer topology.</span></span> <span data-ttu-id="7d0a5-107">Esta opción contribuye a evitar los problemas causados por los conflictos no detectados, como son el comportamiento incoherente de las aplicaciones y las actualizaciones perdidas.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-107">This option would help prevent the issues that are caused by undetected conflicts, including inconsistent application behavior and lost updates.</span></span> <span data-ttu-id="7d0a5-108">Cuando se habilita esta opción, de forma predeterminada, un cambio conflictivo se trata como un error crítico que produce el error del Agente de distribución.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-108">With this option enabled, by default a conflicting change is treated as a critical error that causes the failure of the Distribution Agent.</span></span> <span data-ttu-id="7d0a5-109">En caso de conflicto, la topología permanece en un estado incoherente hasta que se resuelve el conflicto y se restablece la coherencia de los datos en toda la topología.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-109">In the event of a conflict, the topology remains in an inconsistent state until the conflict is resolved and the data is made consistent across the topology.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7d0a5-110">Para evitar la posible incoherencia de datos, asegúrese de evitar los conflictos en una topología punto a punto, incluso con la detección de conflictos habilitada.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-110">To avoid potential data inconsistency, make sure that you avoid conflicts in a peer-to-peer topology, even with conflict detection enabled.</span></span> <span data-ttu-id="7d0a5-111">Para asegurarse de que las operaciones de escritura para una fila determinada se realizan en un solo nodo, las aplicaciones que tienen acceso y cambian datos deben particionar las operaciones de inserción, actualización y eliminación.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-111">To ensure that write operations for a particular row are performed at only one node, applications that access and change data must partition insert, update, and delete operations.</span></span> <span data-ttu-id="7d0a5-112">Este particionamiento asegura que las modificaciones introducidas en una fila determinada que se originan en un nodo se sincronizan con todos los demás nodos de la topología antes de que se modifique la fila en otro nodo.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-112">This partitioning ensures that modifications to a given row that is originating at one node are synchronized with all other nodes in the topology before the row is modified by a different node.</span></span> <span data-ttu-id="7d0a5-113">Si una aplicación requiere funcionalidades sofisticadas de detección y resolución de conflictos, use la replicación de mezcla.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-113">If an application requires sophisticated conflict detection and resolution capabilities, use merge replication.</span></span> <span data-ttu-id="7d0a5-114">Para obtener más información, consulte [Replicación de mezcla](../merge/merge-replication.md) y [Detectar y solucionar conflictos de replicación de mezcla](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="7d0a5-114">For more information, see [Merge Replication](../merge/merge-replication.md) and [Detect and Resolve Merge Replication Conflicts](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span></span>  
  
## <a name="understanding-conflicts-and-conflict-detection"></a><span data-ttu-id="7d0a5-115">Descripción de los conflictos y de la detección de conflictos</span><span class="sxs-lookup"><span data-stu-id="7d0a5-115">Understanding Conflicts and Conflict Detection</span></span>  
 <span data-ttu-id="7d0a5-116">En una única base de datos, los cambios realizados en la misma fila por parte de aplicaciones diferentes no provocan conflictos.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-116">In a single database, changes that are made to the same row by different applications do not cause a conflict.</span></span> <span data-ttu-id="7d0a5-117">Esto se debe a que las transacciones se serializan y se utilizan bloqueos para controlar los cambios simultáneos.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-117">This is because transactions are serialized, and locks are used to handle concurrent changes.</span></span> <span data-ttu-id="7d0a5-118">En un sistema distribuido asincrónico, como en uno de replicación punto a punto, las transacciones se producen de forma independiente en cada nodo, y no hay ningún mecanismo para serializarlas por los distintos nodos.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-118">In an asynchronous distributed system such as peer-to-peer replication, transactions act independently on each node; and there is no mechanism to serialize transactions across multiple nodes.</span></span> <span data-ttu-id="7d0a5-119">Se podría usar una confirmación en dos fases de tipo protocolo, pero esto afecta de forma significativa al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-119">A protocol like two-phase commit could be used, but this affects performance significantly.</span></span>  
  
 <span data-ttu-id="7d0a5-120">En sistemas como la replicación punto a punto, los conflictos no se detectan cuando los cambios se confirman en cada uno de los nodos del mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-120">In systems such as peer-to-peer replication, conflicts are not detected when changes are committed at individual peers.</span></span> <span data-ttu-id="7d0a5-121">En su lugar, se detectan al replicar los cambios y aplicarlos a los demás nodos del mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-121">Instead, they are detected when those changes are replicated and applied at other peers.</span></span> <span data-ttu-id="7d0a5-122">En la replicación punto a punto, los conflictos se detectan mediante los procedimientos almacenados que aplican los cambios a cada nodo, basándose en una columna oculta de cada tabla publicada.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-122">In peer-to-peer replication, conflicts are detected by the stored procedures that apply changes to each node, based on a hidden column in each published table.</span></span> <span data-ttu-id="7d0a5-123">En esta columna oculta, se almacena un identificador que combina la versión de la fila con un *identificador de originador* que se especifica para cada nodo.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-123">This hidden column stores an ID that combines an *originator ID* that you specify for each node and the version of the row.</span></span> <span data-ttu-id="7d0a5-124">Durante la sincronización, el Agente de distribución ejecuta los procedimientos para cada tabla.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-124">During synchronization, the Distribution Agent executes procedures for each table.</span></span> <span data-ttu-id="7d0a5-125">Estos procedimientos aplican las operaciones de inserción, actualización y eliminación procedentes de los demás nodos del mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-125">These procedures apply insert, update, and delete operations from other peers.</span></span> <span data-ttu-id="7d0a5-126">Si uno de los procedimientos detecta un conflicto cuando lee el valor de la columna oculta, genera el error 22815 que tiene un nivel de gravedad de 16:</span><span class="sxs-lookup"><span data-stu-id="7d0a5-126">If one of the procedures detects a conflict when it reads the hidden column value, it raises error 22815 that has a severity level of 16:</span></span>  
  
 `A conflict of type '%s' was detected at peer %d between peer %d (incoming), transaction id %s  and peer %d (on disk), transaction id %s`  
  
 <span data-ttu-id="7d0a5-127">Este error hace que, de forma predeterminada, el Agente de distribución deje de aplicar cambios a ese nodo.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-127">By default, this error causes the Distribution Agent to stop applying changes to that node.</span></span> <span data-ttu-id="7d0a5-128">Para obtener información sobre cómo tratar los conflictos detectados, vea "Controlar los conflictos" más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-128">For information about how to handle the conflicts that are detected, see "Handling Conflicts" later in this topic.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7d0a5-129">Solo pueden tener acceso a la columna oculta los usuarios que hayan iniciado una sesión a través de la conexión de administrador dedicada (DAC).</span><span class="sxs-lookup"><span data-stu-id="7d0a5-129">The hidden column can be accessed only by a user that is logged in through the Dedicated Administrator Connection (DAC).</span></span> <span data-ttu-id="7d0a5-130">Para obtener más información sobre DAC, vea [Conexión de diagnóstico para administradores de bases de datos](../../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span><span class="sxs-lookup"><span data-stu-id="7d0a5-130">For information about DAC, see [Diagnostic Connection for Database Administrators](../../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span></span>  
  
 <span data-ttu-id="7d0a5-131">La replicación punto a punto detecta los tipos de conflictos siguientes:</span><span class="sxs-lookup"><span data-stu-id="7d0a5-131">Peer-to-peer replication detects the following types of conflicts:</span></span>  
  
-   <span data-ttu-id="7d0a5-132">Inserción-inserción</span><span class="sxs-lookup"><span data-stu-id="7d0a5-132">Insert-insert</span></span>  
  
     <span data-ttu-id="7d0a5-133">Todas las filas de cada tabla que participa en una replicación punto a punto se identifican de forma exclusiva mediante valores de clave principal.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-133">All rows in each table participating in peer-to-peer replication are uniquely identified by using primary key values.</span></span> <span data-ttu-id="7d0a5-134">Se produce un conflicto de inserción-inserción al insertar una fila con el mismo valor de clave en más de un nodo.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-134">An insert-insert conflict occurs when a row with the same key value was inserted at more than one node.</span></span>  
  
-   <span data-ttu-id="7d0a5-135">Actualización-actualización</span><span class="sxs-lookup"><span data-stu-id="7d0a5-135">Update-update</span></span>  
  
     <span data-ttu-id="7d0a5-136">Se produce cuando se actualiza la misma fila en más de un nodo.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-136">Occurs when the same row was updated at more than one node.</span></span>  
  
-   <span data-ttu-id="7d0a5-137">Inserción-actualización</span><span class="sxs-lookup"><span data-stu-id="7d0a5-137">Insert-update</span></span>  
  
     <span data-ttu-id="7d0a5-138">Se produce cuando se actualiza una fila en un nodo, pero la misma fila se ha eliminado y, a continuación, se ha vuelto a insertar en otro nodo.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-138">Occurs if a row was updated at one node, but the same row was deleted and then reinserted at another node.</span></span>  
  
-   <span data-ttu-id="7d0a5-139">Inserción-eliminación</span><span class="sxs-lookup"><span data-stu-id="7d0a5-139">Insert-delete</span></span>  
  
     <span data-ttu-id="7d0a5-140">Se produce cuando se elimina una fila en un nodo, pero la misma fila se ha eliminado y, a continuación, se ha vuelto a insertar en otro nodo.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-140">Occurs if a row was deleted at one node, but the same row was deleted and then reinserted at another node.</span></span>  
  
-   <span data-ttu-id="7d0a5-141">Actualización-eliminación</span><span class="sxs-lookup"><span data-stu-id="7d0a5-141">Update-delete</span></span>  
  
     <span data-ttu-id="7d0a5-142">Se produce cuando se actualiza una fila en un nodo, pero la misma fila se ha eliminado en otro nodo.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-142">Occurs if a row was updated at one node, but the same row was deleted at another node.</span></span>  
  
-   <span data-ttu-id="7d0a5-143">Eliminación-eliminación</span><span class="sxs-lookup"><span data-stu-id="7d0a5-143">Delete-delete</span></span>  
  
     <span data-ttu-id="7d0a5-144">Se produce cuando se elimina una fila en más de un nodo.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-144">Occurs when a row was deleted at more than one node.</span></span>  
  
## <a name="enabling-conflict-detection"></a><span data-ttu-id="7d0a5-145">Habilitar la detección de conflictos</span><span class="sxs-lookup"><span data-stu-id="7d0a5-145">Enabling Conflict Detection</span></span>  
 <span data-ttu-id="7d0a5-146">Para utilizar la detección de conflictos, todos los nodos deben estar ejecutando [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] o una versión posterior, y debe haberse habilitado la detección para todos los nodos.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-146">To use conflict detection, all nodes must be running [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] or a later version; and detection must be enabled for all nodes.</span></span> <span data-ttu-id="7d0a5-147">De forma predeterminada, en [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] y versiones posteriores, la detección de conflictos está habilitada en [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7d0a5-147">In [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] and later versions, by default, conflict detection is enabled in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="7d0a5-148">Se recomienda tener habilitada la detección, incluso en escenarios en los que no se espere ningún conflicto.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-148">We recommend that you have detection enabled, even in scenarios in which you do not expect any conflicts.</span></span> <span data-ttu-id="7d0a5-149">La detección de conflictos se puede habilitar y deshabilitar utilizando [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] o procedimientos almacenados de [!INCLUDE[tsql](../../../includes/tsql-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="7d0a5-149">Conflict detection can be enabled and disabled by using [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)] stored procedures:</span></span>  
  
-   <span data-ttu-id="7d0a5-150">Puede habilitar y deshabilitar la detección en [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] mediante la página **Opciones de suscripción** del cuadro de diálogo **Propiedades de la publicación** o con la página **Configurar topología** del Asistente de configuración de la topología punto a punto.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-150">You can enable and disable detection in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] either by using the **Subscription Options** page of the **Publication Properties** dialog box or the **Configure Topology** page of the Configure Peer-to-Peer Topology Wizard.</span></span>  
  
     <span data-ttu-id="7d0a5-151">Si configura la detección de conflictos mediante [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], el Agente de distribución se configura para que deje de aplicar cambios cuando se detecte un conflicto.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-151">If you configure conflict detection by using [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], the Distribution Agent is configured to stop applying changes when a conflict is detected.</span></span>  
  
-   <span data-ttu-id="7d0a5-152">También puede habilitar y deshabilitar la detección con los procedimientos almacenados siguientes: [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) o [sp_configure_peerconflictdetection](/sql/relational-databases/system-stored-procedures/sp-configure-peerconflictdetection-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="7d0a5-152">You can also enable and disable detection by using the following stored procedures: [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) or [sp_configure_peerconflictdetection](/sql/relational-databases/system-stored-procedures/sp-configure-peerconflictdetection-transact-sql).</span></span>  
  
     <span data-ttu-id="7d0a5-153">Si configura la detección de conflictos mediante procedimientos almacenados, puede especificar si el Agente de distribución debe dejar de aplicar cambios cuando se detecte un conflicto.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-153">If you configure conflict detection by using stored procedures, you can specify whether the Distribution Agent should stop applying changes when a conflict is detected.</span></span> <span data-ttu-id="7d0a5-154">La configuración predeterminada hace que el agente se detenga.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-154">The default is for the agent to stop.</span></span> <span data-ttu-id="7d0a5-155">Se recomienda utilizar la configuración predeterminada.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-155">We recommend that you use the default setting.</span></span>  
  
## <a name="handling-conflicts"></a><span data-ttu-id="7d0a5-156">Controlar los conflictos</span><span class="sxs-lookup"><span data-stu-id="7d0a5-156">Handling Conflicts</span></span>  
 <span data-ttu-id="7d0a5-157">Cuando se produce un conflicto en la replicación punto a punto, se genera la alerta de detección de conflictos punto a punto.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-157">When a conflict occurs in peer-to-peer replication, the Peer-to-peer conflict detection alert is raised.</span></span> <span data-ttu-id="7d0a5-158">Se recomienda configurar esta alerta para que se notifique la existencia de conflictos.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-158">We recommend that you configure this alert so that you are notified when a conflict occurs.</span></span> <span data-ttu-id="7d0a5-159">Para obtener más información sobre las alertas, vea [Usar alertas para eventos del Agente de replicación](../agents/use-alerts-for-replication-agent-events.md).</span><span class="sxs-lookup"><span data-stu-id="7d0a5-159">For more information about alerts, see [Use Alerts for Replication Agent Events](../agents/use-alerts-for-replication-agent-events.md).</span></span>  
  
 <span data-ttu-id="7d0a5-160">Una vez que se detenga el Agente de distribución y se genere la alerta, use uno de los métodos siguientes para controlar los conflictos existentes:</span><span class="sxs-lookup"><span data-stu-id="7d0a5-160">After the Distribution Agent stops and the alert is raised, use one of the following approaches to handle the conflicts that occurred:</span></span>  
  
-   <span data-ttu-id="7d0a5-161">Reinicialice el nodo en el que se detectó el conflicto a partir de la copia de seguridad de un nodo que contenga los datos necesarios (este es el enfoque recomendado).</span><span class="sxs-lookup"><span data-stu-id="7d0a5-161">Reinitialize the node where the conflict was detected from the backup of a node that contains the required data (the recommended approach).</span></span> <span data-ttu-id="7d0a5-162">Este método garantiza que los datos sean coherentes.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-162">This method ensures that data is in a consistent state.</span></span>  
  
-   <span data-ttu-id="7d0a5-163">Intente sincronizar de nuevo el nodo permitiendo que el Agente de distribución continúe aplicando los cambios:</span><span class="sxs-lookup"><span data-stu-id="7d0a5-163">Try to synchronize the node again by enabling the Distribution Agent to continue to apply changes:</span></span>  
  
    1.  <span data-ttu-id="7d0a5-164">Ejecutar [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): especifique ' p2p_continue_onconflict ' para el @property parámetro y `true` para el @value parámetro.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-164">Execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): specify 'p2p_continue_onconflict' for the @property parameter and `true` for the @value parameter.</span></span>  
  
    2.  <span data-ttu-id="7d0a5-165">Reinicie el Agente de distribución.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-165">Restart the Distribution Agent.</span></span>  
  
    3.  <span data-ttu-id="7d0a5-166">Use el visor de conflictos para comprobar los conflictos detectados y determine las filas afectadas, el tipo de conflicto y la fila ganadora.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-166">Verify the conflicts that were detected by using the conflict viewer and determine the rows that were involved, the type of conflict, and the winner.</span></span> <span data-ttu-id="7d0a5-167">El conflicto se resuelve en función del valor del identificador de originador que se especificó durante la configuración: la fila procedente del nodo con el identificador más alto gana el conflicto.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-167">The conflict is resolved based on the originator ID value that you specified during configuration: the row that originated at the node with the highest ID wins the conflict.</span></span> <span data-ttu-id="7d0a5-168">Para obtener más información, vea [Ver conflictos de datos para publicaciones transaccionales &#40;SQL Server Management Studio&#41;](../view-data-conflicts-for-transactional-publications-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="7d0a5-168">For more information, see [View Data Conflicts for Transactional Publications &#40;SQL Server Management Studio&#41;](../view-data-conflicts-for-transactional-publications-sql-server-management-studio.md).</span></span>  
  
    4.  <span data-ttu-id="7d0a5-169">Ejecute la validación para asegurarse de que las filas en conflicto convergieron correctamente.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-169">Run validation to ensure that the conflicting rows converged correctly.</span></span> <span data-ttu-id="7d0a5-170">Para obtener más información, vea [Validar datos replicados](../validate-data-at-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="7d0a5-170">For more information, see [Validate Replicated Data](../validate-data-at-the-subscriber.md).</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="7d0a5-171">Si los datos son incoherentes después de este paso, debe actualizar manualmente las filas en el nodo que tenga la prioridad más alta y, a continuación, dejar que se propaguen los cambios desde ese nodo.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-171">If data is inconsistent after this step, you must manually update rows on the node that has the highest priority, and then let the changes propagate from this node.</span></span> <span data-ttu-id="7d0a5-172">Si no hay ningún otro conflicto relacionado con los cambios en la topología, todos los nodos se encontrarán en un estado coherente.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-172">If there are no further conflicting changes in the topology, all nodes will be brought to a consistent state.</span></span>  
  
    5.  <span data-ttu-id="7d0a5-173">Ejecutar [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): especifique ' p2p_continue_onconflict ' para el @property parámetro y `false` para el @value parámetro.</span><span class="sxs-lookup"><span data-stu-id="7d0a5-173">Execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): specify 'p2p_continue_onconflict' for the @property parameter and `false` for the @value parameter.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7d0a5-174">Consulte también</span><span class="sxs-lookup"><span data-stu-id="7d0a5-174">See Also</span></span>  
 [<span data-ttu-id="7d0a5-175">Peer-to-Peer Transactional Replication</span><span class="sxs-lookup"><span data-stu-id="7d0a5-175">Peer-to-Peer Transactional Replication</span></span>](peer-to-peer-transactional-replication.md)  
  
  
