---
title: Inicializar una suscripción transaccional sin una instantánea | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- transactional replication, initializing
- replication [SQL Server], initializing
- initializing subscriptions [SQL Server replication], without snapshots
ms.assetid: 75c8c1f8-60bc-44a8-944b-d18d1f6bda11
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 88e240b75cdbb239548cfcb8e5d8df5eb2af2973
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87663343"
---
# <a name="initialize-a-transactional-subscription-without-a-snapshot"></a><span data-ttu-id="336ee-102">Inicializar una suscripción transaccional sin una instantánea</span><span class="sxs-lookup"><span data-stu-id="336ee-102">Initialize a Transactional Subscription Without a Snapshot</span></span>
  <span data-ttu-id="336ee-103">De forma predeterminada, una suscripción a una publicación transaccional se inicializa con una instantánea generada por el Agente de instantáneas y aplicada por el Agente de distribución.</span><span class="sxs-lookup"><span data-stu-id="336ee-103">By default, a subscription to a transactional publication is initialized with a snapshot, which is generated by the Snapshot Agent and applied by the Distribution Agent.</span></span> <span data-ttu-id="336ee-104">En algunos escenarios, como aquellos en los que intervienen grandes conjuntos de datos iniciales, es preferible inicializar una suscripción mediante otro método.</span><span class="sxs-lookup"><span data-stu-id="336ee-104">In some scenarios, such as those involving large initial datasets, it is preferable to initialize a subscription using another method.</span></span> <span data-ttu-id="336ee-105">Otros métodos para inicializar un suscriptor incluyen:</span><span class="sxs-lookup"><span data-stu-id="336ee-105">Other methods of initializing a Subscriber include:</span></span>  
  
-   <span data-ttu-id="336ee-106">Especificar una copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="336ee-106">Specifying a backup.</span></span> <span data-ttu-id="336ee-107">Se restaura la copia de seguridad en el suscriptor y, a continuación, el Agente de distribución copia los metadatos de replicación y los procedimientos del sistema necesarios.</span><span class="sxs-lookup"><span data-stu-id="336ee-107">Restore the backup on the Subscriber, and then the Distribution Agent copies any required replication metadata and system procedures.</span></span> <span data-ttu-id="336ee-108">La inicialización con una copia de seguridad es la forma más rápida de entregar datos al suscriptor, además de resultar cómoda, ya que se puede utilizar cualquier copia de seguridad reciente si se ha realizado después de que se habilitara la publicación para inicialización mediante una copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="336ee-108">Initializing with a backup is the fastest way to deliver data to the Subscriber and is convenient, because any recent backup can be used if it was taken after the publication was enabled for initialization with a backup.</span></span>  
  
-   <span data-ttu-id="336ee-109">Copiar un conjunto de datos inicial en el suscriptor mediante otro mecanismo, como adjuntar una base de datos.</span><span class="sxs-lookup"><span data-stu-id="336ee-109">Copying an initial dataset to the Subscriber through another mechanism, such as attaching a database.</span></span> <span data-ttu-id="336ee-110">Debe asegurarse de que los datos y el esquema correctos se encuentran en el suscriptor. A continuación, el Agente de distribución copia los metadatos y los procedimientos del sistema necesarios.</span><span class="sxs-lookup"><span data-stu-id="336ee-110">You must ensure the correct data and schema are at the Subscriber, and then the Distribution Agent copies any required metadata and system procedures.</span></span>  
  
## <a name="initializing-a-subscription-with-a-backup"></a><span data-ttu-id="336ee-111">Inicializar una suscripción con una copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="336ee-111">Initializing a subscription with a backup</span></span>  
 <span data-ttu-id="336ee-112">Una copia de seguridad contiene una base de datos completa; por esa razón, cada base de datos de suscripciones contendrá una copia completa de la base de datos de publicación cuando se inicialice.</span><span class="sxs-lookup"><span data-stu-id="336ee-112">A backup contains an entire database; therefore each subscription database will contain a complete copy of the publication database when it is initialized:</span></span>  
  
-   <span data-ttu-id="336ee-113">La copia de seguridad incluye tablas no especificadas como artículos de la publicación.</span><span class="sxs-lookup"><span data-stu-id="336ee-113">The backup includes tables not specified as articles for the publication.</span></span>  
  
-   <span data-ttu-id="336ee-114">La copia de seguridad incluye todos los datos, incluso si se han especificado filtros de fila o columna en una tabla.</span><span class="sxs-lookup"><span data-stu-id="336ee-114">The backup includes all data, even if row or column filters are specified on a table.</span></span>  
  
 <span data-ttu-id="336ee-115">Es responsabilidad del administrador o la aplicación quitar los objetos o los datos no deseados una vez restaurada la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="336ee-115">It is the responsibility of the administrator or application to remove any unwanted objects or data after the backup has been restored.</span></span> <span data-ttu-id="336ee-116">En las sincronizaciones posteriores, las modificaciones de los datos solo se replican si se aplican a las tablas especificadas como artículos y si estas modificaciones cumplen los criterios de filtrado especificados.</span><span class="sxs-lookup"><span data-stu-id="336ee-116">In subsequent synchronizations, data changes are only replicated if they apply to tables specified as articles, and the changes meet any filtering criteria you specified.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="336ee-117">Al restaurar una copia de seguridad, si desea que el suscriptor se sincronice automáticamente, debe asegurarse de que dicha copia proviene del publicador.</span><span class="sxs-lookup"><span data-stu-id="336ee-117">When restoring a backup, you must ensure that the backup came from the Publisher if you want the Subscriber to automatically synchronize.</span></span> <span data-ttu-id="336ee-118">Los valores de número de secuencia de registro (LSN) de la copia de seguridad (que se utilizan para establecer el punto en el que se inicia la sincronización) son específicos del publicador.</span><span class="sxs-lookup"><span data-stu-id="336ee-118">The log sequence number (LSN) values in the backup (which are used to set the point at which to start synchronizing) are specific to the Publisher.</span></span>  
  
 <span data-ttu-id="336ee-119">**Para inicializar una suscripción con una copia de seguridad**</span><span class="sxs-lookup"><span data-stu-id="336ee-119">**To initialize a subscription with a backup**</span></span>  
  
 <span data-ttu-id="336ee-120">Para inicializar una suscripción con una copia de seguridad, primero debe habilitar la opción al crear una publicación y, a continuación, al crear una suscripción, especificar valores para una serie de opciones.</span><span class="sxs-lookup"><span data-stu-id="336ee-120">To initialize a subscription with a backup, you first must enable the option when you create a publication, and then specify values for a number of options when you create a subscription.</span></span> <span data-ttu-id="336ee-121">Las publicaciones se pueden habilitar mediante el Asistente para nueva publicación o mediante programación.</span><span class="sxs-lookup"><span data-stu-id="336ee-121">Publications can be enabled through the New Publication Wizard or programmatically.</span></span> <span data-ttu-id="336ee-122">Sin embargo, los valores necesarios para las opciones de suscripción solo se pueden especificar mediante programación.</span><span class="sxs-lookup"><span data-stu-id="336ee-122">However, the values required for the subscription options can only be specified programmatically.</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="336ee-123">: [Habilitar la inicialización con una copia de seguridad para las publicaciones transaccionales &#40;SQL Server Management Studio&#41;](enable-initialization-with-backup-for-transactional-publications.md)</span><span class="sxs-lookup"><span data-stu-id="336ee-123">: [Enable Initialization with a Backup for Transactional Publications &#40;SQL Server Management Studio&#41;](enable-initialization-with-backup-for-transactional-publications.md)</span></span>  
  
-   <span data-ttu-id="336ee-124">Programación de la replicación con Transact-SQL: [Inicializar una suscripción transaccional a partir de un copia de seguridad &#40;programación de la replicación con Transact-SQL&#41;](initialize-a-transactional-subscription-from-a-backup.md)</span><span class="sxs-lookup"><span data-stu-id="336ee-124">Replication Transact-SQL programming: [Initialize a Transactional Subscription from a Backup &#40;Replication Transact-SQL Programming&#41;](initialize-a-transactional-subscription-from-a-backup.md)</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="336ee-125">Si una suscripción se inicializa sin una instantánea, la cuenta con la que se ejecuta el servicio SQL Server en el publicador debe contar con permisos de escritura en la carpeta de instantáneas en el distribuidor.</span><span class="sxs-lookup"><span data-stu-id="336ee-125">If a subscription is initialized without using a snapshot, the account under which the SQL Server service runs at the Publisher must have write permissions on the snapshot folder at the Distributor.</span></span> <span data-ttu-id="336ee-126">Para obtener más información sobre los permisos, vea [Replication Agent Security Model](security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="336ee-126">For more information about permissions, see [Replication Agent Security Model](security/replication-agent-security-model.md).</span></span>  
  
### <a name="ensuring-the-suitability-of-a-backup"></a><span data-ttu-id="336ee-127">Asegurar la idoneidad de una copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="336ee-127">Ensuring the suitability of a backup</span></span>  
 <span data-ttu-id="336ee-128">Una copia de seguridad es adecuada para inicializar un suscriptor si todas las transacciones que se producen después de realizar la copia de seguridad se almacenan en el distribuidor.</span><span class="sxs-lookup"><span data-stu-id="336ee-128">A backup is suitable for initializing a Subscriber if all transactions that occur after the backup was taken are stored at the Distributor.</span></span> <span data-ttu-id="336ee-129">Si la copia de seguridad no es adecuada, la replicación mostrará un mensaje de error.</span><span class="sxs-lookup"><span data-stu-id="336ee-129">Replication will display an error message if the backup is not suitable.</span></span>  
  
 <span data-ttu-id="336ee-130">Para ayudar a asegurar que una copia de seguridad es adecuada, siga estas directrices:</span><span class="sxs-lookup"><span data-stu-id="336ee-130">To help ensure that a backup is suitable for use, follow these guidelines:</span></span>  
  
-   <span data-ttu-id="336ee-131">Utilice la última copia de seguridad disponible. Si ésta fuera más antigua que el período máximo de retención de distribución, cree una nueva antes de intentar inicializar una suscripción con una copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="336ee-131">Use the latest backup available, and if the latest backup is older than the maximum distribution retention period, create a new backup before attempting to initialize a subscription with a backup.</span></span> <span data-ttu-id="336ee-132">Para obtener más información acerca del período de retención, vea [Subscription Expiration and Deactivation](subscription-expiration-and-deactivation.md).</span><span class="sxs-lookup"><span data-stu-id="336ee-132">For more information about retention period, see [Subscription Expiration and Deactivation](subscription-expiration-and-deactivation.md).</span></span>  
  
-   <span data-ttu-id="336ee-133">De forma predeterminada, el trabajo de limpieza de distribución borra de la base de datos de distribución aquellas transacciones que superan las 72 horas.</span><span class="sxs-lookup"><span data-stu-id="336ee-133">By default, the distribution cleanup job clears transactions older than 72 hours from the distribution database.</span></span> <span data-ttu-id="336ee-134">La limpieza se basa en el período de retención establecido para la publicación.</span><span class="sxs-lookup"><span data-stu-id="336ee-134">Cleanup is based on the retention period set for the publication.</span></span> <span data-ttu-id="336ee-135">Si realiza la sincronización con copias de seguridad más antiguas, considere la posibilidad de deshabilitar el trabajo de forma temporal antes de restaurar la copia de seguridad y volver a habilitarlo después de que la suscripción se haya creado correctamente.</span><span class="sxs-lookup"><span data-stu-id="336ee-135">When synchronizing with older backups, consider temporarily disabling the job before the backup you would like to restore and re-enabling it after the subscription is successfully created.</span></span> <span data-ttu-id="336ee-136">Esto evita la eliminación de transacciones de la base de datos de distribución que pudieran ser necesarias para sincronizar correctamente desde la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="336ee-136">This prevents removal of transactions from the distribution database that might be needed to synchronize successfully from the backup.</span></span> <span data-ttu-id="336ee-137">Para información sobre la ejecución de trabajos de limpieza, vea [Ejecutar trabajos de mantenimiento de replicación &#40;SQL Server Management Studio&#41;](administration/run-replication-maintenance-jobs-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="336ee-137">For information about running cleanup jobs, see [Run Replication Maintenance Jobs &#40;SQL Server Management Studio&#41;](administration/run-replication-maintenance-jobs-sql-server-management-studio.md).</span></span>  
  
 <span data-ttu-id="336ee-138">En algunos casos, deberá realizar personalizaciones de forma manual en la base de datos del suscriptor restaurada después de configurar las suscripciones inicializadas con una copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="336ee-138">In some cases you must manually perform customizations in the restored Subscriber database after setting up subscriptions that are initialized with a backup.</span></span> <span data-ttu-id="336ee-139">En general, las modificaciones manuales en la base de datos del suscriptor restaurada son necesarias si la publicación está definida de tal modo que se espera que el contenido de la base de datos del suscriptor sea diferente al de la base de datos del publicador.</span><span class="sxs-lookup"><span data-stu-id="336ee-139">In general, manual modifications at the restored Subscriber database are required if the Publication is defined in such a way that the Subscriber database content is expected to be different from the Publisher database content.</span></span>  
  
-   <span data-ttu-id="336ee-140">Las vistas indizadas de la base de datos restaurada deben convertirse en tablas si se publican como artículos de vista indizada a tabla basados en registros.</span><span class="sxs-lookup"><span data-stu-id="336ee-140">Indexed-views at the restored database have to be converted to tables if they are published as log-based indexed-view-to-table articles</span></span>  
  
-   <span data-ttu-id="336ee-141">Las columnas de marca de tiempo suscritas de la base de datos restaurada deben convertirse en columnas **binary(8)** : copie el contenido de las tablas que contienen columnas de marca de tiempo en nuevas tablas con esquemas coincidentes, excepto las que tengan columnas **binary(8)** en lugar de columnas de marca de tiempo, quite las tablas originales y cambie el nombre de las tablas nuevas por el que tenían las tablas originales.</span><span class="sxs-lookup"><span data-stu-id="336ee-141">Subscribed timestamp columns at the restored database must be converted to **binary(8)** columns: copy the content of the tables containing timestamp columns to new tables with matching schemas except having **binary(8)** columns in place of the timestamp columns, drop the original tables, and rename the new tables with the same names as the original tables.</span></span>  
  
## <a name="initializing-a-subscription-with-an-alternative-method"></a><span data-ttu-id="336ee-142">Inicializar una suscripción con un método alternativo</span><span class="sxs-lookup"><span data-stu-id="336ee-142">Initializing a subscription with an alternative method</span></span>  
 <span data-ttu-id="336ee-143">Es posible inicializar una suscripción mediante cualquier método que permita copiar el esquema y los datos de la base de datos de publicación en el suscriptor, como [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="336ee-143">It is possible to initialize a subscription using any method that allows you to copy the publication database schema and data to the Subscriber, such as [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span></span> <span data-ttu-id="336ee-144">Cuando se utiliza un método alternativo para inicializar el suscriptor, los objetos de soporte de replicación se copian en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="336ee-144">When you use an alternative method to initialize the Subscriber, replication support objects are copied to the Subscriber.</span></span>  
  
 <span data-ttu-id="336ee-145">A diferencia de lo que ocurre al inicializar con una copia de seguridad, el usuario o la aplicación debe asegurarse de que los datos y el esquema se han sincronizado correctamente en el momento de agregar la suscripción.</span><span class="sxs-lookup"><span data-stu-id="336ee-145">Unlike initializing with a backup, you or your application must ensure the data and schema are properly synchronized at the time you add the subscription.</span></span> <span data-ttu-id="336ee-146">Por ejemplo, si se produce actividad en el publicador entre el momento en que se copian los datos y el esquema en el suscriptor y el momento en que se agrega la suscripción, es posible que los cambios que resulten de dicha actividad no se repliquen en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="336ee-146">If, for example, there is activity on the Publisher between the time data and schema are copied to the Subscriber and the time at which the subscription is added, changes resulting from this activity might not be replicated to the Subscriber.</span></span>  
  
 <span data-ttu-id="336ee-147">Para inicializar una suscripción con un método alternativo, vea [Initialize a Subscription Manually](initialize-a-subscription-manually.md).</span><span class="sxs-lookup"><span data-stu-id="336ee-147">To initialize a subscription with an alternative method, see [Initialize a Subscription Manually](initialize-a-subscription-manually.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="336ee-148">Consulte también</span><span class="sxs-lookup"><span data-stu-id="336ee-148">See Also</span></span>  
 [<span data-ttu-id="336ee-149">Inicializar una suscripción</span><span class="sxs-lookup"><span data-stu-id="336ee-149">Initialize a Subscription</span></span>](initialize-a-subscription.md)  
  
  
