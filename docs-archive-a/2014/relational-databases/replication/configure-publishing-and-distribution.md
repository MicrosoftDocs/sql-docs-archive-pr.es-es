---
title: Configuración de la publicación y la distribución | Microsoft Docs
ms.custom: ''
ms.date: 06/30/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- replication [SQL Server], distribution
- distribution configuration [SQL Server replication]
- publishing [SQL Server replication], configuring
ms.assetid: 3cfc8966-833e-42fa-80cb-09175d1feed7
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: afd1544b5412c6ce2d83a9a1e9a50ddf662b3056
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87662853"
---
# <a name="configure-publishing-and-distribution"></a><span data-ttu-id="834d8-102">Configurar la publicación y la distribución</span><span class="sxs-lookup"><span data-stu-id="834d8-102">Configure Publishing and Distribution</span></span>
  <span data-ttu-id="834d8-103">En este tema se describe cómo configurar la publicación y distribución en [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] mediante [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)]o Replication Management Objects (RMO).</span><span class="sxs-lookup"><span data-stu-id="834d8-103">This topic describes how to configure publishing and distribution in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)], or Replication Management Objects (RMO).</span></span>  
  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="834d8-104">Antes de comenzar</span><span class="sxs-lookup"><span data-stu-id="834d8-104">Before You Begin</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="834d8-105">Seguridad</span><span class="sxs-lookup"><span data-stu-id="834d8-105">Security</span></span>  
 <span data-ttu-id="834d8-106">Para obtener más información, vea implementación de la [replicación segura](security/view-and-modify-replication-security-settings.md).</span><span class="sxs-lookup"><span data-stu-id="834d8-106">For more information, see [Secure Replication Deployment](security/view-and-modify-replication-security-settings.md).</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="834d8-107">Uso de SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="834d8-107">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="834d8-108">Configure la distribución con el Asistente para nueva publicación o el Asistente para configurar la distribución.</span><span class="sxs-lookup"><span data-stu-id="834d8-108">Configure distribution using the New Publication Wizard or the Configure Distribution Wizard.</span></span> <span data-ttu-id="834d8-109">Después de configurar el distribuidor, vea y modifique las propiedades en el cuadro de diálogo **Propiedades del distribuidor: \<Distributor>** .</span><span class="sxs-lookup"><span data-stu-id="834d8-109">After the Distributor is configured, view and modify properties in the **Distributor Properties - \<Distributor>** dialog box.</span></span> <span data-ttu-id="834d8-110">Utilice el Asistente para configurar la distribución si desea configurar un distribuidor para que los miembros de los roles fijos de base de datos **db_owner** puedan crear publicaciones o si desea configurar un distribuidor remoto que no sea un publicador.</span><span class="sxs-lookup"><span data-stu-id="834d8-110">Use the Configure Distribution Wizard if you want to configure a Distributor so that members of the **db_owner** fixed database roles can create publications, or because you want to configure a remote Distributor that is not a Publisher.</span></span>  
  
#### <a name="to-configure-distribution"></a><span data-ttu-id="834d8-111">Para configurar la distribución</span><span class="sxs-lookup"><span data-stu-id="834d8-111">To configure distribution</span></span>  
  
1.  <span data-ttu-id="834d8-112">En [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], conecte con el servidor que vaya a ser el distribuidor (en muchos casos, el publicador y el distribuidor son el mismo servidor) y expanda el nodo de servidor.</span><span class="sxs-lookup"><span data-stu-id="834d8-112">In [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], connect to the server that will be the Distributor (in many cases, the Publisher and Distributor are the same server), and then expand the server node.</span></span>  
  
2.  <span data-ttu-id="834d8-113">Haga clic con el botón secundario en la carpeta **Replicación** y, a continuación, en **Configurar distribución**.</span><span class="sxs-lookup"><span data-stu-id="834d8-113">Right-click the **Replication** folder, and then click **Configure Distribution**.</span></span>  
  
3.  <span data-ttu-id="834d8-114">Siga las indicaciones del Asistente para configurar la distribución:</span><span class="sxs-lookup"><span data-stu-id="834d8-114">Follow the Configure Distribution Wizard to:</span></span>  
  
    -   <span data-ttu-id="834d8-115">Seleccione un distribuidor.</span><span class="sxs-lookup"><span data-stu-id="834d8-115">Select a Distributor.</span></span> <span data-ttu-id="834d8-116">Para usar un distribuidor local, seleccione **' \<ServerName> ' actuará como su propio distribuidor; SQL Server creará una base de datos y un registro de distribución**.</span><span class="sxs-lookup"><span data-stu-id="834d8-116">To use a local Distributor, select **'\<ServerName>' will act as its own Distributor; SQL Server will create a distribution database and log**.</span></span> <span data-ttu-id="834d8-117">Para utilizar un distribuidor remoto, seleccione **Utilizar el siguiente servidor como distribuidor**y, a continuación, seleccione un servidor.</span><span class="sxs-lookup"><span data-stu-id="834d8-117">To use a remote Distributor, select **Use the following server as the Distributor**, and then select a server.</span></span> <span data-ttu-id="834d8-118">El servidor ya debe estar configurado como distribuidor y el publicador debe estar habilitado para usar el distribuidor.</span><span class="sxs-lookup"><span data-stu-id="834d8-118">The server must already be configured as a Distributor, and the Publisher must be enabled to use the Distributor.</span></span> <span data-ttu-id="834d8-119">Para más información, vea [Habilitar un publicador remoto en un distribuidor &#40;SQL Server Management Studio&#41;](enable-a-remote-publisher-at-a-distributor-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="834d8-119">For more information, see [Enable a Remote Publisher at a Distributor &#40;SQL Server Management Studio&#41;](enable-a-remote-publisher-at-a-distributor-sql-server-management-studio.md).</span></span>  
  
         <span data-ttu-id="834d8-120">Si selecciona un distribuidor remoto, debe escribir una contraseña en la página **Contraseña administrativa** para las conexiones realizadas desde el publicador al distribuidor.</span><span class="sxs-lookup"><span data-stu-id="834d8-120">If you select a remote Distributor, you must enter a password on the **Administrative Password** page for connections made from the Publisher to the Distributor.</span></span> <span data-ttu-id="834d8-121">Esta contraseña debe coincidir con la especificada cuando se habilitó el publicador en el distribuidor remoto.</span><span class="sxs-lookup"><span data-stu-id="834d8-121">This password must match the password specified when the Publisher was enabled at the remote Distributor.</span></span>  
  
    -   <span data-ttu-id="834d8-122">Especifique una carpeta de instantáneas raíz (para un distribuidor local).</span><span class="sxs-lookup"><span data-stu-id="834d8-122">Specify a root snapshot folder (for a local Distributor).</span></span> <span data-ttu-id="834d8-123">La carpeta de instantáneas es simplemente un directorio designado como recurso compartido; los agentes que leen y escriben en esta carpeta deben tener permisos de acceso suficientes a ella.</span><span class="sxs-lookup"><span data-stu-id="834d8-123">The snapshot folder is simply a directory that you have designated as a share; agents that read from and write to this folder must have sufficient permissions to access it.</span></span> <span data-ttu-id="834d8-124">Cada publicador que utiliza este distribuidor crea una carpeta bajo la carpeta raíz, y cada publicación crea carpetas bajo la carpeta de publicador donde almacena los archivos de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="834d8-124">Each Publisher that uses this Distributor creates a folder under the root folder, and each publication creates folders under the Publisher folder in which to store snapshot files.</span></span> <span data-ttu-id="834d8-125">Para más información sobre cómo proteger la carpeta adecuadamente, vea [Proteger la carpeta de instantáneas](security/secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="834d8-125">For more information on securing the folder appropriately, see [Secure the Snapshot Folder](security/secure-the-snapshot-folder.md).</span></span>  
  
    -   <span data-ttu-id="834d8-126">Especifique la base de datos de distribución (para un distribuidor local).</span><span class="sxs-lookup"><span data-stu-id="834d8-126">Specify the distribution database (for a local Distributor).</span></span> <span data-ttu-id="834d8-127">La base de datos de distribución almacena metadatos y datos del historial de todos los tipos de replicación y transacciones para la replicación transaccional.</span><span class="sxs-lookup"><span data-stu-id="834d8-127">The distribution database stores metadata and history data for all types of replication and transactions for transactional replication.</span></span>  
  
    -   <span data-ttu-id="834d8-128">Opcionalmente, habilite otros publicadores para utilizar el distribuidor.</span><span class="sxs-lookup"><span data-stu-id="834d8-128">Optionally enable other Publishers to use the Distributor.</span></span> <span data-ttu-id="834d8-129">Si se habilitan otros publicadores para utilizar el distribuidor, debe escribir una contraseña en la página **Contraseña del distribuidor** para las conexiones realizadas desde esos publicadores al distribuidor.</span><span class="sxs-lookup"><span data-stu-id="834d8-129">If other Publishers are enabled to use the Distributor, you must enter a password on the **Distributor Password** page for connections made from these Publishers to the Distributor.</span></span>  
  
    -   <span data-ttu-id="834d8-130">Opcionalmente, genere un script de opciones de configuración.</span><span class="sxs-lookup"><span data-stu-id="834d8-130">Optionally script configuration settings.</span></span> <span data-ttu-id="834d8-131">Para más información, consulte [Scripting Replication](scripting-replication.md).</span><span class="sxs-lookup"><span data-stu-id="834d8-131">For more information, see [Scripting Replication](scripting-replication.md).</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="834d8-132">Usar Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="834d8-132">Using Transact-SQL</span></span>  
 <span data-ttu-id="834d8-133">La publicación y distribución de replicaciones se puede configurar mediante programación usando procedimientos almacenados de replicación.</span><span class="sxs-lookup"><span data-stu-id="834d8-133">Replication publishing and distribution can be configured programmatically using replication stored procedures.</span></span>  
  
#### <a name="to-configure-publishing-using-a-local-distributor"></a><span data-ttu-id="834d8-134">Para configurar la publicación mediante un distribuidor local</span><span class="sxs-lookup"><span data-stu-id="834d8-134">To configure publishing using a local distributor</span></span>  
  
1.  <span data-ttu-id="834d8-135">Ejecute [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) para determinar si el servidor ya está configurado como un distribuidor.</span><span class="sxs-lookup"><span data-stu-id="834d8-135">Execute [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) to determine if the server is already configured as a Distributor.</span></span>  
  
    -   <span data-ttu-id="834d8-136">Si el valor de **installed** en el conjunto de resultados es **0**, ejecute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) en el distribuidor en la base de datos maestra.</span><span class="sxs-lookup"><span data-stu-id="834d8-136">If the value of **installed** in the result set is **0**, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) at the Distributor on the master database.</span></span>  
  
    -   <span data-ttu-id="834d8-137">Si el valor de **distribution db installed** en el conjunto de resultados es **0**, ejecute [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) en el distribuidor en la base de datos maestra.</span><span class="sxs-lookup"><span data-stu-id="834d8-137">If the value of **distribution db installed** in the result set is **0**, execute [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) at the Distributor on the master database.</span></span> <span data-ttu-id="834d8-138">Especifique el nombre de la base de datos de distribución para la \*\* \@ base de datos\*\*.</span><span class="sxs-lookup"><span data-stu-id="834d8-138">Specify the name of the distribution database for **\@database**.</span></span> <span data-ttu-id="834d8-139">Opcionalmente, puede especificar el período de retención transaccional máximo para \*\* \@ max_distretention\*\* y el período de retención del historial para \*\* \@ history_retention\*\*.</span><span class="sxs-lookup"><span data-stu-id="834d8-139">Optionally, you can specify the maximum transactional retention period for **\@max_distretention** and the history retention period for **\@history_retention**.</span></span> <span data-ttu-id="834d8-140">Si se está creando una nueva base de datos, especifique los parámetros de propiedad de la base de datos que desee.</span><span class="sxs-lookup"><span data-stu-id="834d8-140">If a new database is being created, specify the desired database property parameters.</span></span>  
  
2.  <span data-ttu-id="834d8-141">En el distribuidor, que también es el publicador, ejecute [sp_adddistpublisher &#40;&#41;de Transact-SQL ](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql)y especifique el recurso compartido UNC que se usará como carpeta de instantáneas predeterminada para \*\* \@ working_directory\*\*.</span><span class="sxs-lookup"><span data-stu-id="834d8-141">At the Distributor, which is also the Publisher, execute [sp_adddistpublisher &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql), specifying the UNC share that will be used as default snapshot folder for **\@working_directory**.</span></span>  
  
3.  <span data-ttu-id="834d8-142">En el publicador, ejecute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="834d8-142">At the Publisher, execute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span></span> <span data-ttu-id="834d8-143">Especifique la base de datos que se está publicando para \*\* \@ dbname**, el tipo de replicación para \*\* \@ optname**y un valor de `true` para \*\* \@ valor\*\*.</span><span class="sxs-lookup"><span data-stu-id="834d8-143">Specify the database being published for **\@dbname**, the type of replication for **\@optname**, and a value of `true` for **\@value**.</span></span>  
  
#### <a name="to-configure-publishing-using-a-remote-distributor"></a><span data-ttu-id="834d8-144">Para configurar la publicación mediante un distribuidor remoto</span><span class="sxs-lookup"><span data-stu-id="834d8-144">To configure publishing using a remote distributor</span></span>  
  
1.  <span data-ttu-id="834d8-145">Ejecute [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) para determinar si el servidor ya está configurado como un distribuidor.</span><span class="sxs-lookup"><span data-stu-id="834d8-145">Execute [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) to determine if the server is already configured as a Distributor.</span></span>  
  
    -   <span data-ttu-id="834d8-146">Si el valor de **installed** en el conjunto de resultados es **0**, ejecute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) en el distribuidor en la base de datos maestra.</span><span class="sxs-lookup"><span data-stu-id="834d8-146">If the value of **installed** in the result set is **0**, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) at the Distributor on the master database.</span></span> <span data-ttu-id="834d8-147">Especifique una contraseña segura para la \*\* \@ contraseña\*\*.</span><span class="sxs-lookup"><span data-stu-id="834d8-147">Specify a strong password for **\@password**.</span></span> <span data-ttu-id="834d8-148">Esta contraseña para la cuenta **distributor_admin** la utilizará el publicador para conectarse al distribuidor.</span><span class="sxs-lookup"><span data-stu-id="834d8-148">This password for the **distributor_admin** account will be used by the Publisher when connecting to the Distributor.</span></span>  
  
    -   <span data-ttu-id="834d8-149">Si el valor de **distribution db installed** en el conjunto de resultados es **0**, ejecute [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) en el distribuidor en la base de datos maestra.</span><span class="sxs-lookup"><span data-stu-id="834d8-149">If the value of **distribution db installed** in the result set is **0**, execute [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) at the Distributor on the master database.</span></span> <span data-ttu-id="834d8-150">Especifique el nombre de la base de datos de distribución para la \*\* \@ base de datos\*\*.</span><span class="sxs-lookup"><span data-stu-id="834d8-150">Specify the name of the distribution database for **\@database**.</span></span> <span data-ttu-id="834d8-151">Opcionalmente, puede especificar el período de retención transaccional máximo para \*\* \@ max_distretention\*\* y el período de retención del historial para \*\* \@ history_retention\*\*.</span><span class="sxs-lookup"><span data-stu-id="834d8-151">Optionally, you can specify the maximum transactional retention period for **\@max_distretention** and the history retention period for **\@history_retention**.</span></span> <span data-ttu-id="834d8-152">Si se está creando una nueva base de datos, especifique los parámetros de propiedad de la base de datos que desee.</span><span class="sxs-lookup"><span data-stu-id="834d8-152">If a new database is being created, specify the desired database property parameters.</span></span>  
  
2.  <span data-ttu-id="834d8-153">En el distribuidor, ejecute [sp_adddistpublisher &#40;&#41;de Transact-SQL ](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql), especificando el recurso compartido UNC que se usará como carpeta de instantáneas predeterminada para \*\* \@ working_directory\*\*.</span><span class="sxs-lookup"><span data-stu-id="834d8-153">At the Distributor, execute [sp_adddistpublisher &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql), specifying the UNC share that will be used as default snapshot folder for **\@working_directory**.</span></span> <span data-ttu-id="834d8-154">Si el distribuidor va a usar la [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] autenticación de al conectarse al publicador, también debe especificar un valor de **0** para \*\* \@ security_mode\*\* y la [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] información de inicio de sesión para el \*\* \@ Inicio de sesión\*\* y la \*\* \@ contraseña\*\*.</span><span class="sxs-lookup"><span data-stu-id="834d8-154">If the Distributor will use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Authentication when connecting to the Publisher, you must also specify a value of **0** for **\@security_mode** and the [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login information for **\@login** and **\@password**.</span></span>  
  
3.  <span data-ttu-id="834d8-155">En la base de datos maestra del publicador, ejecute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="834d8-155">At the Publisher on the master database, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql).</span></span> <span data-ttu-id="834d8-156">Especifique la contraseña segura utilizada en el paso 1 para la \*\* \@ contraseña\*\*.</span><span class="sxs-lookup"><span data-stu-id="834d8-156">Specify the strong password used in step 1 for **\@password**.</span></span> <span data-ttu-id="834d8-157">El publicador utilizará esta contraseña cuando se conecte al distribuidor.</span><span class="sxs-lookup"><span data-stu-id="834d8-157">This password will be used by the Publisher when connecting to the Distributor.</span></span>  
  
4.  <span data-ttu-id="834d8-158">En el publicador, ejecute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="834d8-158">At the Publisher, execute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span></span> <span data-ttu-id="834d8-159">Especifique la base de datos que se está publicando para \*\* \@ dbname**, el tipo de replicación para \*\* \@ optname**y el valor true para \*\* \@ Value\*\*.</span><span class="sxs-lookup"><span data-stu-id="834d8-159">Specify the database being published for **\@dbname**, the type of replication for **\@optname**, and a value of true for **\@value**.</span></span>  
  
###  <a name="example-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="834d8-160">Ejemplo (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="834d8-160">Example (Transact-SQL)</span></span>  
 <span data-ttu-id="834d8-161">El ejemplo siguiente muestra cómo configurar mediante programación la publicación y la distribución.</span><span class="sxs-lookup"><span data-stu-id="834d8-161">The following example demonstrates how to configure publishing and distribution programmatically.</span></span> <span data-ttu-id="834d8-162">En este ejemplo, se proporciona el nombre del servidor que se está configurando como un publicador y un distribuidor local mediante las variables de scripting.</span><span class="sxs-lookup"><span data-stu-id="834d8-162">In this example, the name of the server that is being configured as a publisher and a local distributor is supplied using scripting variables.</span></span> <span data-ttu-id="834d8-163">La publicación y distribución de replicaciones se puede configurar mediante programación usando procedimientos almacenados de replicación.</span><span class="sxs-lookup"><span data-stu-id="834d8-163">Replication publishing and distribution can be configured programmatically using replication stored procedures.</span></span>  
  
 [!code-sql[HowTo#AddDistPub](../../snippets/tsql/SQL15/replication/howto/tsql/adddistpub.sql#adddistpub)]  
  
##  <a name="using-replication-management-objects-rmo"></a><a name="RMOProcedure"></a> <span data-ttu-id="834d8-164">Uso de Replication Management Objects (RMO)</span><span class="sxs-lookup"><span data-stu-id="834d8-164">Using Replication Management Objects (RMO)</span></span>  
  
#### <a name="to-configure-publishing-and-distribution-on-a-single-server"></a><span data-ttu-id="834d8-165">Para configurar la publicación y distribución en un único servidor</span><span class="sxs-lookup"><span data-stu-id="834d8-165">To configure publishing and distribution on a single server</span></span>  
  
1.  <span data-ttu-id="834d8-166">Cree una conexión al servidor mediante la clase <xref:Microsoft.SqlServer.Management.Common.ServerConnection> .</span><span class="sxs-lookup"><span data-stu-id="834d8-166">Create a connection to the server by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
2.  <span data-ttu-id="834d8-167">Cree una instancia de la clase <xref:Microsoft.SqlServer.Replication.ReplicationServer>.</span><span class="sxs-lookup"><span data-stu-id="834d8-167">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationServer> class.</span></span> <span data-ttu-id="834d8-168">Pase el objeto <xref:Microsoft.SqlServer.Management.Common.ServerConnection> del paso 1.</span><span class="sxs-lookup"><span data-stu-id="834d8-168">Pass the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
3.  <span data-ttu-id="834d8-169">Cree una instancia de la clase <xref:Microsoft.SqlServer.Replication.DistributionDatabase>.</span><span class="sxs-lookup"><span data-stu-id="834d8-169">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> class.</span></span>  
  
4.  <span data-ttu-id="834d8-170">Establezca la propiedad <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> en el nombre de la base de datos y la propiedad <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> en el <xref:Microsoft.SqlServer.Management.Common.ServerConnection> del paso 1.</span><span class="sxs-lookup"><span data-stu-id="834d8-170">Set the <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> property to the database name and set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
5.  <span data-ttu-id="834d8-171">Instale el distribuidor llamando al método <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> .</span><span class="sxs-lookup"><span data-stu-id="834d8-171">Install the Distributor by calling the <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> method.</span></span> <span data-ttu-id="834d8-172">Pase el objeto <xref:Microsoft.SqlServer.Replication.DistributionDatabase> del paso 3.</span><span class="sxs-lookup"><span data-stu-id="834d8-172">Pass the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> object from step 3.</span></span>  
  
6.  <span data-ttu-id="834d8-173">Cree una instancia de la clase <xref:Microsoft.SqlServer.Replication.DistributionPublisher>.</span><span class="sxs-lookup"><span data-stu-id="834d8-173">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionPublisher> class.</span></span>  
  
7.  <span data-ttu-id="834d8-174">Establezca las siguientes propiedades de <xref:Microsoft.SqlServer.Replication.DistributionPublisher>:</span><span class="sxs-lookup"><span data-stu-id="834d8-174">Set the following properties of <xref:Microsoft.SqlServer.Replication.DistributionPublisher>:</span></span>  
  
    -   <span data-ttu-id="834d8-175"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - nombre del publicador.</span><span class="sxs-lookup"><span data-stu-id="834d8-175"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - name of the Publisher.</span></span>  
  
    -   <span data-ttu-id="834d8-176"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - el <xref:Microsoft.SqlServer.Management.Common.ServerConnection> del paso 1.</span><span class="sxs-lookup"><span data-stu-id="834d8-176"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
    -   <span data-ttu-id="834d8-177"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - el nombre de la base de datos creada en el paso 5.</span><span class="sxs-lookup"><span data-stu-id="834d8-177"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - the name of the database created in step 5.</span></span>  
  
    -   <span data-ttu-id="834d8-178"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - el recurso compartido utilizado para tener acceso a los archivos de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="834d8-178"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - the share used to access snapshot files.</span></span>  
  
    -   <span data-ttu-id="834d8-179"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> : el modo de seguridad empleado cuando se conecta con el publicador.</span><span class="sxs-lookup"><span data-stu-id="834d8-179"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> - the security mode used when connecting to the Publisher.</span></span> <span data-ttu-id="834d8-180">Se recomienda<xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> .</span><span class="sxs-lookup"><span data-stu-id="834d8-180"><xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> is recommended.</span></span>  
  
8.  <span data-ttu-id="834d8-181">Llame al método <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> .</span><span class="sxs-lookup"><span data-stu-id="834d8-181">Call the <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> method.</span></span>  
  
#### <a name="to-configure-publishing-and-distribution-using-a-remote-distributor"></a><span data-ttu-id="834d8-182">Para configurar la publicación y distribución mediante un distribuidor remoto</span><span class="sxs-lookup"><span data-stu-id="834d8-182">To configure publishing and distribution using a remote Distributor</span></span>  
  
1.  <span data-ttu-id="834d8-183">Cree una conexión al servidor del distribuidor remoto mediante la clase <xref:Microsoft.SqlServer.Management.Common.ServerConnection> .</span><span class="sxs-lookup"><span data-stu-id="834d8-183">Create a connection to the remote Distributor server by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
2.  <span data-ttu-id="834d8-184">Cree una instancia de la clase <xref:Microsoft.SqlServer.Replication.ReplicationServer>.</span><span class="sxs-lookup"><span data-stu-id="834d8-184">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationServer> class.</span></span> <span data-ttu-id="834d8-185">Pase el objeto <xref:Microsoft.SqlServer.Management.Common.ServerConnection> del paso 1.</span><span class="sxs-lookup"><span data-stu-id="834d8-185">Pass the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
3.  <span data-ttu-id="834d8-186">Cree una instancia de la clase <xref:Microsoft.SqlServer.Replication.DistributionDatabase>.</span><span class="sxs-lookup"><span data-stu-id="834d8-186">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> class.</span></span>  
  
4.  <span data-ttu-id="834d8-187">Establezca la propiedad <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> en el nombre de la base de datos y la propiedad <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> en el <xref:Microsoft.SqlServer.Management.Common.ServerConnection> del paso 1.</span><span class="sxs-lookup"><span data-stu-id="834d8-187">Set the <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> property to the database name, and set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
5.  <span data-ttu-id="834d8-188">Instale el distribuidor llamando al método <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> .</span><span class="sxs-lookup"><span data-stu-id="834d8-188">Install the Distributor by calling the <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> method.</span></span> <span data-ttu-id="834d8-189">Especifique una contraseña segura (la que utiliza el publicador al conectarse al distribuidor remoto) y el objeto <xref:Microsoft.SqlServer.Replication.DistributionDatabase> del paso 3.</span><span class="sxs-lookup"><span data-stu-id="834d8-189">Specify a secure password (used by the Publisher when connecting to the remote Distributor) and the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> object from step 3.</span></span> <span data-ttu-id="834d8-190">Para más información, vea [Proteger el distribuidor](security/secure-the-distributor.md).</span><span class="sxs-lookup"><span data-stu-id="834d8-190">For more information, see [Secure the Distributor](security/secure-the-distributor.md).</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="834d8-191">Cuando sea posible, pida a los usuarios que proporcionen credenciales de seguridad en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="834d8-191">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="834d8-192">Si debe almacenar credenciales, use los [servicios de cifrado](https://go.microsoft.com/fwlink/?LinkId=34733) (en inglés) proporcionados por [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="834d8-192">If you must store credentials, use the [cryptographic services](https://go.microsoft.com/fwlink/?LinkId=34733) provided by the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows .NET Framework.</span></span>  
  
6.  <span data-ttu-id="834d8-193">Cree una instancia de la clase <xref:Microsoft.SqlServer.Replication.DistributionPublisher>.</span><span class="sxs-lookup"><span data-stu-id="834d8-193">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionPublisher> class.</span></span>  
  
7.  <span data-ttu-id="834d8-194">Establezca las siguientes propiedades de <xref:Microsoft.SqlServer.Replication.DistributionPublisher>:</span><span class="sxs-lookup"><span data-stu-id="834d8-194">Set the following properties of <xref:Microsoft.SqlServer.Replication.DistributionPublisher>:</span></span>  
  
    -   <span data-ttu-id="834d8-195"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - nombre del servidor publicador local.</span><span class="sxs-lookup"><span data-stu-id="834d8-195"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - name of the local Publisher server.</span></span>  
  
    -   <span data-ttu-id="834d8-196"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - el <xref:Microsoft.SqlServer.Management.Common.ServerConnection> del paso 1.</span><span class="sxs-lookup"><span data-stu-id="834d8-196"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
    -   <span data-ttu-id="834d8-197"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - el nombre de la base de datos creada en el paso 5.</span><span class="sxs-lookup"><span data-stu-id="834d8-197"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - the name of the database created in step 5.</span></span>  
  
    -   <span data-ttu-id="834d8-198"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - el recurso compartido utilizado para tener acceso a los archivos de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="834d8-198"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - the share used to access snapshot files.</span></span>  
  
    -   <span data-ttu-id="834d8-199"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> : el modo de seguridad empleado cuando se conecta con el publicador.</span><span class="sxs-lookup"><span data-stu-id="834d8-199"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> - the security mode used when connecting to the Publisher.</span></span> <span data-ttu-id="834d8-200">Se recomienda<xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> .</span><span class="sxs-lookup"><span data-stu-id="834d8-200"><xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> is recommended.</span></span>  
  
8.  <span data-ttu-id="834d8-201">Llame al método <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> .</span><span class="sxs-lookup"><span data-stu-id="834d8-201">Call the <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> method.</span></span>  
  
9. <span data-ttu-id="834d8-202">Cree una conexión al servidor publicador local mediante la clase <xref:Microsoft.SqlServer.Management.Common.ServerConnection> .</span><span class="sxs-lookup"><span data-stu-id="834d8-202">Create a connection to the local Publisher server by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
10. <span data-ttu-id="834d8-203">Cree una instancia de la clase <xref:Microsoft.SqlServer.Replication.ReplicationServer>.</span><span class="sxs-lookup"><span data-stu-id="834d8-203">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationServer> class.</span></span> <span data-ttu-id="834d8-204">Transfiera el objeto <xref:Microsoft.SqlServer.Management.Common.ServerConnection> del paso 9.</span><span class="sxs-lookup"><span data-stu-id="834d8-204">Pass the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 9.</span></span>  
  
11. <span data-ttu-id="834d8-205">Llame al método <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> .</span><span class="sxs-lookup"><span data-stu-id="834d8-205">Call the <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> method.</span></span> <span data-ttu-id="834d8-206">Pase el nombre del distribuidor remoto y la contraseña para el distribuidor remoto especificado en el paso 5.</span><span class="sxs-lookup"><span data-stu-id="834d8-206">Pass the name of the remote Distributor and the password for the remote Distributor specified in step 5.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="834d8-207">Cuando sea posible, pida a los usuarios que proporcionen credenciales de seguridad en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="834d8-207">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="834d8-208">Si debe almacenar credenciales, use los [servicios de cifrado](https://go.microsoft.com/fwlink/?LinkId=34733) (en inglés) proporcionados por Windows .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="834d8-208">If you must store credentials, use the [cryptographic services](https://go.microsoft.com/fwlink/?LinkId=34733) provided by the Windows .NET Framework.</span></span>  
  
###  <a name="example-rmo"></a><a name="PShellExample"></a> <span data-ttu-id="834d8-209">Ejemplo (RMO)</span><span class="sxs-lookup"><span data-stu-id="834d8-209">Example (RMO)</span></span>  
 <span data-ttu-id="834d8-210">Puede configurar la publicación y distribución de replicación mediante programación utilizando Replication Management Objects (RMO).</span><span class="sxs-lookup"><span data-stu-id="834d8-210">You can programmatically configure replication publishing and distribution by using Replication Management Objects (RMO).</span></span>  
  
 [!code-csharp[HowTo#rmo_AddDistPub](../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_adddistpub)]  
  
 [!code-vb[HowTo#rmo_vb_AddDistPub](../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_adddistpub)]  
  
## <a name="see-also"></a><span data-ttu-id="834d8-211">Consulte también</span><span class="sxs-lookup"><span data-stu-id="834d8-211">See Also</span></span>  
 <span data-ttu-id="834d8-212">[Ver y modificar las propiedades del distribuidor y del publicador](view-and-modify-distributor-and-publisher-properties.md) </span><span class="sxs-lookup"><span data-stu-id="834d8-212">[View and Modify Distributor and Publisher Properties](view-and-modify-distributor-and-publisher-properties.md) </span></span>  
 <span data-ttu-id="834d8-213">[Replication System Stored Procedures Concepts](concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="834d8-213">[Replication System Stored Procedures Concepts](concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 <span data-ttu-id="834d8-214">[Configurar distribución](configure-distribution.md) </span><span class="sxs-lookup"><span data-stu-id="834d8-214">[Configure Distribution](configure-distribution.md) </span></span>  
 <span data-ttu-id="834d8-215">[Replication Management Objects Concepts](concepts/replication-management-objects-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="834d8-215">[Replication Management Objects Concepts](concepts/replication-management-objects-concepts.md) </span></span>  
 [<span data-ttu-id="834d8-216">Configurar la replicación para el SQL Server de &#40;de Grupos de disponibilidad AlwaysOn&#41;</span><span class="sxs-lookup"><span data-stu-id="834d8-216">Configure Replication for AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](../../database-engine/availability-groups/windows/always-on-availability-groups-sql-server.md) 
  
  
