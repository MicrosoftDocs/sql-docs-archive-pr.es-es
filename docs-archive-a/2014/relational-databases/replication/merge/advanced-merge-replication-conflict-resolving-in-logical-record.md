---
title: Detectar y solucionar conflictos en registros lógicos | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- logical records [SQL Server replication]
- conflict resolution [SQL Server replication], merge replication
ms.assetid: f2e55040-ca69-4ccf-97d1-c362e1633f26
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f9822cd153af67538a36a894de0ec1b4716e54cf
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87661980"
---
# <a name="detecting-and-resolving-conflicts-in-logical-records"></a><span data-ttu-id="3efa2-102">Detectar y solucionar conflictos en registros lógicos</span><span class="sxs-lookup"><span data-stu-id="3efa2-102">Detecting and Resolving Conflicts in Logical Records</span></span>
  <span data-ttu-id="3efa2-103">En este tema se tratan las diferentes combinaciones de opciones de detección y resolución de conflictos posibles al utilizar registros lógicos.</span><span class="sxs-lookup"><span data-stu-id="3efa2-103">This topic covers the various combinations of conflict detection and conflict resolution approaches possible when using logical records.</span></span> <span data-ttu-id="3efa2-104">Los conflictos en la replicación de mezcla se producen cuando más de un nodo cambia los mismos datos o, al replicar cambios, la replicación de mezcla encuentra determinados tipos de errores, por ejemplo una infracción de restricción.</span><span class="sxs-lookup"><span data-stu-id="3efa2-104">A conflict in merge replication occurs when more than one node changes the same data, or merge replication encounters certain types of errors, such as a constraint violation, when replicating changes.</span></span> <span data-ttu-id="3efa2-105">Para obtener más información acerca de la detección y resolución de conflictos, vea [Advanced Merge Replication Conflict Detection and Resolution](advanced-merge-replication-conflict-detection-and-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="3efa2-105">For more information about conflict detection and resolution, see [Advanced Merge Replication Conflict Detection and Resolution](advanced-merge-replication-conflict-detection-and-resolution.md).</span></span>

 <span data-ttu-id="3efa2-106">Para especificar el seguimiento de conflictos y el nivel de resolución para un artículo, vea [especificar el nivel de resolución y de seguimiento de conflictos para artículos de mezcla](../publish/specify-merge-replication-properties.md#interactive-conflict-resolution).</span><span class="sxs-lookup"><span data-stu-id="3efa2-106">To specify the conflict tracking and resolution level for an article, see [Specify the Conflict Tracking and Resolution Level for Merge Articles](../publish/specify-merge-replication-properties.md#interactive-conflict-resolution).</span></span>

## <a name="conflict-detection"></a><span data-ttu-id="3efa2-107">Detección de conflictos</span><span class="sxs-lookup"><span data-stu-id="3efa2-107">Conflict Detection</span></span>
 <span data-ttu-id="3efa2-108">Dos propiedades de artículo determinan la manera en que se detectan conflictos para los registros lógicos: **column_tracking** y **logical_record_level_conflict_detection**.</span><span class="sxs-lookup"><span data-stu-id="3efa2-108">The way in which conflicts are detected for logical records is determined by two article properties: **column_tracking** and **logical_record_level_conflict_detection**.</span></span> [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] <span data-ttu-id="3efa2-109">y las versiones posteriores también admiten la detección de nivel de registro lógico.</span><span class="sxs-lookup"><span data-stu-id="3efa2-109">and later versions also support logical record-level detection.</span></span>

 <span data-ttu-id="3efa2-110">La propiedad del artículo **logical_record_level_conflict_detection** se puede establecer en TRUE o FALSE.</span><span class="sxs-lookup"><span data-stu-id="3efa2-110">The **logical_record_level_conflict_detection** article property can be set to TRUE or FALSE.</span></span> <span data-ttu-id="3efa2-111">El valor solamente se debe establecer para el artículo primario de nivel superior y se omitirá en los artículos secundarios.</span><span class="sxs-lookup"><span data-stu-id="3efa2-111">The value should only be set for the top-level parent article and will be ignored by child articles.</span></span> <span data-ttu-id="3efa2-112">Si el valor es FALSE, la replicación de mezcla detecta conflictos como en las versiones anteriores de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], basados únicamente en el valor de la propiedad **column_tracking** del artículo.</span><span class="sxs-lookup"><span data-stu-id="3efa2-112">If this value is FALSE, merge replication detects conflicts as in previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], based solely on the value of the **column_tracking** property for the article.</span></span> <span data-ttu-id="3efa2-113">Si el valor es TRUE, la replicación de mezcla omitirá la propiedad **column_tracking** del artículo y detectará un conflicto si se realizan cambios en cualquier lugar del registro lógico.</span><span class="sxs-lookup"><span data-stu-id="3efa2-113">If this value is TRUE, merge replication will ignore the **column_tracking** property of the article, and detect a conflict if changes are made anywhere in the logical record.</span></span> <span data-ttu-id="3efa2-114">Por ejemplo, considere este escenario:</span><span class="sxs-lookup"><span data-stu-id="3efa2-114">For example, consider this scenario:</span></span>

 <span data-ttu-id="3efa2-115">![Tres registros lógicos de tabla con valores](../media/logical-records-05.gif "Tres registros lógicos de tabla con valores")</span><span class="sxs-lookup"><span data-stu-id="3efa2-115">![Three table logical record with values](../media/logical-records-05.gif "Three table logical record with values")</span></span>

 <span data-ttu-id="3efa2-116">Un conflicto se detecta si dos usuarios cambian cualquier valor del registro lógico Customer2 en las tablas **Customers**, **Orders**u **OrderItems** .</span><span class="sxs-lookup"><span data-stu-id="3efa2-116">A conflict is detected if two users change any values for the Customer2 logical record in the **Customers**, **Orders**, or **OrderItems** tables.</span></span> <span data-ttu-id="3efa2-117">Este ejemplo conlleva cambios realizados mediante una instrucción UPDATE, pero el conflicto también se puede detectar mediante los cambios realizados con las instrucciones INSERT o DELETE.</span><span class="sxs-lookup"><span data-stu-id="3efa2-117">This example involves changes made via an UPDATE statement, but the conflict can also be detected by changes made with INSERT or DELETE statements.</span></span>

## <a name="conflict-resolution"></a><span data-ttu-id="3efa2-118">Resolución de conflictos</span><span class="sxs-lookup"><span data-stu-id="3efa2-118">Conflict Resolution</span></span>
 <span data-ttu-id="3efa2-119">De manera predeterminada, la replicación de mezcla utiliza la lógica basada en prioridad para solucionar conflictos.</span><span class="sxs-lookup"><span data-stu-id="3efa2-119">By default, merge replication uses priority-based logic to resolve conflicts.</span></span> <span data-ttu-id="3efa2-120">Si se realiza un cambio conflictivo en dos bases de datos de suscriptor, gana el cambio para el suscriptor con la prioridad de suscripción más alta. O bien, si la prioridad es la misma, gana el primer cambio que llegue al publicador.</span><span class="sxs-lookup"><span data-stu-id="3efa2-120">If a conflicting change is made in two Subscriber databases, the change for the Subscriber with the higher subscription priority wins, or if the priority is the same, the first change to reach the Publisher wins.</span></span> <span data-ttu-id="3efa2-121">Con la detección en el nivel de fila y de columna, toda la fila ganadora sobrescribe siempre la fila perdedora.</span><span class="sxs-lookup"><span data-stu-id="3efa2-121">With row-level and column-level detection, the entire winning row always overwrites the losing row.</span></span>

 <span data-ttu-id="3efa2-122">La propiedad del artículo **logical_record_level_conflict_resolution** se puede establecer en TRUE o FALSE.</span><span class="sxs-lookup"><span data-stu-id="3efa2-122">The **logical_record_level_conflict_resolution** article property can be set to TRUE or FALSE.</span></span> <span data-ttu-id="3efa2-123">El valor solamente se debe establecer para el artículo primario de nivel superior y se omitirá en los artículos secundarios.</span><span class="sxs-lookup"><span data-stu-id="3efa2-123">The value should only be set for the top-level parent article and will be ignored by child articles.</span></span> <span data-ttu-id="3efa2-124">Si el valor es TRUE, todo el registro lógico ganador sobrescribe el registro lógico perdedor.</span><span class="sxs-lookup"><span data-stu-id="3efa2-124">If the value is TRUE, the entire winning logical record overwrites the losing logical record.</span></span> <span data-ttu-id="3efa2-125">Si es FALSE, las filas ganadoras individuales pueden proceder de diferentes suscriptores o publicadores.</span><span class="sxs-lookup"><span data-stu-id="3efa2-125">If it is FALSE, individual winning rows can come from different Subscribers or Publishers.</span></span> <span data-ttu-id="3efa2-126">Por ejemplo, el suscriptor A puede ganar un conflicto en una fila de la tabla **Orders** , y el suscriptor B puede ganar en una fila relacionada de la tabla **OrderItems** .</span><span class="sxs-lookup"><span data-stu-id="3efa2-126">For example, Subscriber A could win a conflict on a row from the **Orders** table, and Subscriber B could win on a related row from the **OrderItems** table.</span></span> <span data-ttu-id="3efa2-127">El resultado es un registro lógico con la fila **Orders** del suscriptor A y la fila **OrderItems** del suscriptor B.</span><span class="sxs-lookup"><span data-stu-id="3efa2-127">The result is a logical record with the **Orders** row from Subscriber A and the **OrderItems** row from Subscriber B.</span></span>

## <a name="interaction-of-conflict-resolution-and-detection-settings"></a><span data-ttu-id="3efa2-128">Configurar la interacción de detección y resolución de conflictos</span><span class="sxs-lookup"><span data-stu-id="3efa2-128">Interaction of Conflict Resolution and Detection Settings</span></span>
 <span data-ttu-id="3efa2-129">La aparición de conflictos depende de la configuración de la interacción de detección y resolución de conflictos.</span><span class="sxs-lookup"><span data-stu-id="3efa2-129">The outcome of conflicts depends on the interaction of conflict detection and resolution settings.</span></span> <span data-ttu-id="3efa2-130">En los siguientes ejemplos se supone que se ha utilizado la resolución de conflictos basada en prioridad.</span><span class="sxs-lookup"><span data-stu-id="3efa2-130">For the examples below, it is assumed that the priority-based conflict resolution is being used.</span></span> <span data-ttu-id="3efa2-131">Al utilizar registros lógicos, las posibilidades son:</span><span class="sxs-lookup"><span data-stu-id="3efa2-131">When using logical records, the possibilities are:</span></span>

-   <span data-ttu-id="3efa2-132">Detección en el nivel de fila o columna, resolución en el nivel de fila</span><span class="sxs-lookup"><span data-stu-id="3efa2-132">Row or column level detection, row level resolution</span></span>

-   <span data-ttu-id="3efa2-133">Detección en el nivel de columna, resolución de registro lógico</span><span class="sxs-lookup"><span data-stu-id="3efa2-133">Column level detection, logical record resolution</span></span>

-   <span data-ttu-id="3efa2-134">Detección en el nivel de fila, resolución de registro lógico</span><span class="sxs-lookup"><span data-stu-id="3efa2-134">Row level detection, logical record resolution</span></span>

-   <span data-ttu-id="3efa2-135">Detección en el nivel de registro lógico, resolución de registro lógico</span><span class="sxs-lookup"><span data-stu-id="3efa2-135">Logical record detection, logical record resolution</span></span>

### <a name="row-or-column-level-detection-row-level-resolution"></a><span data-ttu-id="3efa2-136">Detección en el nivel de fila o columna, resolución en el nivel de fila</span><span class="sxs-lookup"><span data-stu-id="3efa2-136">Row or Column Level Detection, Row Level Resolution</span></span>
 <span data-ttu-id="3efa2-137">En este ejemplo, la publicación se ha configurado de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="3efa2-137">In this example, the publication is configured with:</span></span>

-   <span data-ttu-id="3efa2-138">**column_tracking** es TRUE o FALSE</span><span class="sxs-lookup"><span data-stu-id="3efa2-138">**column_tracking** is TRUE or FALSE</span></span>

-   <span data-ttu-id="3efa2-139">**logical_record_level_conflict_detection** es FALSE</span><span class="sxs-lookup"><span data-stu-id="3efa2-139">**logical_record_level_conflict_detection** is FALSE</span></span>

-   <span data-ttu-id="3efa2-140">**logical_record_level_conflict_resolution** es FALSE</span><span class="sxs-lookup"><span data-stu-id="3efa2-140">**logical_record_level_conflict_resolution** is FALSE</span></span>

 <span data-ttu-id="3efa2-141">En este caso, la detección se produce en el nivel de fila o columna, y la resolución tiene lugar en el nivel de fila.</span><span class="sxs-lookup"><span data-stu-id="3efa2-141">In this case, detection is at the row or column level and resolution is at the row level.</span></span> <span data-ttu-id="3efa2-142">Esta configuración se utiliza para aprovechar que todos los cambios de un registro lógico se repliquen como una unidad, pero sin detección ni resolución de conflictos en el nivel de registro lógico.</span><span class="sxs-lookup"><span data-stu-id="3efa2-142">These settings are used to take advantage of having all changes to a logical record replicate as a unit, but without conflict detection or resolution at the logical record level.</span></span>

### <a name="column-level-detection-logical-record-resolution"></a><span data-ttu-id="3efa2-143">Detección en el nivel de columna, resolución de registro lógico</span><span class="sxs-lookup"><span data-stu-id="3efa2-143">Column Level Detection, Logical Record Resolution</span></span>
 <span data-ttu-id="3efa2-144">En este ejemplo, la publicación se ha configurado de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="3efa2-144">In this example, the publication is configured with:</span></span>

-   <span data-ttu-id="3efa2-145">**column_tracking** es TRUE</span><span class="sxs-lookup"><span data-stu-id="3efa2-145">**column_tracking** is TRUE</span></span>

-   <span data-ttu-id="3efa2-146">**logical_record_level_conflict_detection** es FALSE</span><span class="sxs-lookup"><span data-stu-id="3efa2-146">**logical_record_level_conflict_detection** is FALSE</span></span>

-   <span data-ttu-id="3efa2-147">**logical_record_level_conflict_resolution** es TRUE</span><span class="sxs-lookup"><span data-stu-id="3efa2-147">**logical_record_level_conflict_resolution** is TRUE</span></span>

 <span data-ttu-id="3efa2-148">Un publicador y un suscriptor empiezan con el mismo conjunto de datos y se define un registro lógico entre las tablas **orders** y **customers** .</span><span class="sxs-lookup"><span data-stu-id="3efa2-148">A Publisher and Subscriber start with the same data set, and a logical record is defined between the **orders** and **customers** tables.</span></span> <span data-ttu-id="3efa2-149">El publicador cambia la columna **custcol1** en la tabla **customers** y la columna **ordercol1** en la tabla **orders** .</span><span class="sxs-lookup"><span data-stu-id="3efa2-149">The Publisher changes the **custcol1** column in the **customers** table and the **ordercol1** in the **orders** table.</span></span> <span data-ttu-id="3efa2-150">El suscriptor cambia **custcol1** en la misma fila de la tabla **customers** y la columna **ordercol2** en la misma fila de la tabla **orders** .</span><span class="sxs-lookup"><span data-stu-id="3efa2-150">The Subscriber changes **custcol1** in the same row of the **customers** table and the **ordercol2** column in the same row of the **orders** table.</span></span> <span data-ttu-id="3efa2-151">Los cambios en la misma columna de la tabla **customer** dan como resultado un conflicto, pero los cambios de la tabla **orders** no están en conflicto.</span><span class="sxs-lookup"><span data-stu-id="3efa2-151">The changes to the same column in the **customer** table result in a conflict, but the changes to the **orders** table are not in conflict.</span></span>

 <span data-ttu-id="3efa2-152">Debido a que los conflictos se resuelven en el nivel de registro lógico, los cambios ganadores realizados en el publicador sustituyen a los cambios realizados en las tablas del suscriptor durante el proceso de replicación.</span><span class="sxs-lookup"><span data-stu-id="3efa2-152">Because the conflicts are resolved at the logical record level, the winning changes made at the Publisher replace the changes made in the Subscriber tables during replication processing.</span></span>

 <span data-ttu-id="3efa2-153">![Series de tablas en las que se muestran cambios en filas relacionadas](../media/logical-records-06.gif "Series de tablas en las que se muestran cambios en filas relacionadas")</span><span class="sxs-lookup"><span data-stu-id="3efa2-153">![Series of tables showing changes to related rows](../media/logical-records-06.gif "Series of tables showing changes to related rows")</span></span>

### <a name="row-level-detection-logical-record-resolution"></a><span data-ttu-id="3efa2-154">Detección en el nivel de fila, resolución de registro lógico</span><span class="sxs-lookup"><span data-stu-id="3efa2-154">Row Level Detection, Logical Record Resolution</span></span>
 <span data-ttu-id="3efa2-155">En este ejemplo, la publicación se ha configurado de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="3efa2-155">In this example, the publication is configured with:</span></span>

-   <span data-ttu-id="3efa2-156">**column_tracking** es FALSE</span><span class="sxs-lookup"><span data-stu-id="3efa2-156">**column_tracking** is FALSE</span></span>

-   <span data-ttu-id="3efa2-157">**logical_record_level_conflict_detection** es FALSE</span><span class="sxs-lookup"><span data-stu-id="3efa2-157">**logical_record_level_conflict_detection** is FALSE</span></span>

-   <span data-ttu-id="3efa2-158">**logical_record_level_conflict_resolution** es TRUE</span><span class="sxs-lookup"><span data-stu-id="3efa2-158">**logical_record_level_conflict_resolution** is TRUE</span></span>

 <span data-ttu-id="3efa2-159">Un publicador y un suscriptor empiezan con el mismo conjunto de datos.</span><span class="sxs-lookup"><span data-stu-id="3efa2-159">A Publisher and Subscriber start with the same data set.</span></span> <span data-ttu-id="3efa2-160">El publicador cambia la columna **custcol1** en la tabla **customers** .</span><span class="sxs-lookup"><span data-stu-id="3efa2-160">The Publisher changes the **custcol1** column in the **customers** table.</span></span> <span data-ttu-id="3efa2-161">El suscriptor cambia la columna **custcol2** en la tabla **customers** y la columna **ordercol2** en la tabla **orders** .</span><span class="sxs-lookup"><span data-stu-id="3efa2-161">The Subscriber changes **custcol2** in the **customers** table and the **ordercol2** column in the **orders** table.</span></span> <span data-ttu-id="3efa2-162">Los cambios en la misma fila de la tabla **customers** dan como resultado un conflicto, pero los cambios de suscriptor la tabla **orders** no están en conflicto.</span><span class="sxs-lookup"><span data-stu-id="3efa2-162">The changes to the same row in the **customers** table result in a conflict, but the Subscriber changes to the **orders** table are not in conflict.</span></span>

 <span data-ttu-id="3efa2-163">Debido a que los conflictos se resuelven en el nivel de registro lógico, durante la sincronización los cambios ganadores realizados en el publicador reemplazan los cambios realizados en las tablas del suscriptor.</span><span class="sxs-lookup"><span data-stu-id="3efa2-163">Because the conflicts are resolved at the logical record level, during synchronization the winning changes made at the Publisher replace the changes made in the Subscriber tables.</span></span>

 <span data-ttu-id="3efa2-164">![Series de tablas en las que se muestran cambios en filas relacionadas](../media/logical-records-07.gif "Series de tablas en las que se muestran cambios en filas relacionadas")</span><span class="sxs-lookup"><span data-stu-id="3efa2-164">![Series of tables showing changes to related rows](../media/logical-records-07.gif "Series of tables showing changes to related rows")</span></span>

### <a name="logical-record-detection-logical-record-resolution"></a><span data-ttu-id="3efa2-165">Detección en el nivel de registro lógico, resolución de registro lógico</span><span class="sxs-lookup"><span data-stu-id="3efa2-165">Logical Record Detection, Logical Record Resolution</span></span>
 <span data-ttu-id="3efa2-166">En este ejemplo, la publicación se ha configurado de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="3efa2-166">In this example, the publication is configured with:</span></span>

-   <span data-ttu-id="3efa2-167">**logical_record_level_conflict_detection** es TRUE</span><span class="sxs-lookup"><span data-stu-id="3efa2-167">**logical_record_level_conflict_detection** is TRUE</span></span>

-   <span data-ttu-id="3efa2-168">**logical_record_level_conflict_resolution** es TRUE</span><span class="sxs-lookup"><span data-stu-id="3efa2-168">**logical_record_level_conflict_resolution** is TRUE</span></span>

 <span data-ttu-id="3efa2-169">Un publicador y un suscriptor empiezan con el mismo conjunto de datos.</span><span class="sxs-lookup"><span data-stu-id="3efa2-169">A Publisher and Subscriber start with the same data set.</span></span> <span data-ttu-id="3efa2-170">El publicador cambia la columna **custcol1** en la tabla **customers** .</span><span class="sxs-lookup"><span data-stu-id="3efa2-170">The Publisher changes the **custcol1** column in the **customers** table.</span></span> <span data-ttu-id="3efa2-171">El suscriptor cambia la columna **ordercol1** en la tabla **orders** .</span><span class="sxs-lookup"><span data-stu-id="3efa2-171">The Subscriber changes the **ordercol1** column in the **orders** table.</span></span> <span data-ttu-id="3efa2-172">No hay cambios en la misma fila o columna, pero como los cambios se han realizado en el mismo registro lógico para **custid**=1, los cambios se detectan como un conflicto de nivel de registro lógico.</span><span class="sxs-lookup"><span data-stu-id="3efa2-172">There are no changes to the same row or columns, but because the changes are made in the same logical record for **custid**=1, the changes are detected as a conflict at the logical record level.</span></span>

 <span data-ttu-id="3efa2-173">Puesto que los conflictos también se resuelven en el nivel de registro lógico, durante la sincronización los cambios ganadores realizados en el publicador reemplazan los cambios realizados en las tablas del suscriptor.</span><span class="sxs-lookup"><span data-stu-id="3efa2-173">Because the conflicts are also resolved at the logical record level, during synchronization the winning change made at the Publisher replaces the change made in the Subscriber tables.</span></span>

 <span data-ttu-id="3efa2-174">![Series de tablas en las que se muestran cambios en filas relacionadas](../media/logical-records-08.gif "Series de tablas en las que se muestran cambios en filas relacionadas")</span><span class="sxs-lookup"><span data-stu-id="3efa2-174">![Series of tables showing changes to related rows](../media/logical-records-08.gif "Series of tables showing changes to related rows")</span></span>

## <a name="see-also"></a><span data-ttu-id="3efa2-175">Consulte también</span><span class="sxs-lookup"><span data-stu-id="3efa2-175">See Also</span></span>
 [<span data-ttu-id="3efa2-176">Agrupar cambios en filas relacionadas con registros lógicos</span><span class="sxs-lookup"><span data-stu-id="3efa2-176">Group Changes to Related Rows with Logical Records</span></span>](group-changes-to-related-rows-with-logical-records.md)


