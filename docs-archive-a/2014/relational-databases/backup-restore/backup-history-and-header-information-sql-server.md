---
title: Historial de copias de seguridad e información de encabezados (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- backup headers [SQL Server]
- history tables [SQL Server]
- file restores [SQL Server], status information
- backup sets [SQL Server], status information
- listing backed up databases
- status information [SQL Server], backups
- backing up [SQL Server], viewing backup sets
- restoring [SQL Server], history tables
- restoring databases [SQL Server], status information
- backups [SQL Server], status information
- headers [SQL Server]
- media headers [SQL Server]
- backup history tables [SQL Server]
- viewing backup information
- restoring files [SQL Server], viewing backup information
- restoring databases [SQL Server], history tables
- displaying backup information
- restoring files [SQL Server], status information
- historical information [SQL Server], backups
- database restores [SQL Server], history tables
- restore history tables [SQL Server]
- listing backed up files
ms.assetid: 799b9934-0ec2-4f43-960b-5c9653f18374
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: ff1e75cc88e51de75af32bcd9d48860be52d5861
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87752221"
---
# <a name="backup-history-and-header-information-sql-server"></a><span data-ttu-id="253d6-102">Historial de copias de seguridad e información de encabezados (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="253d6-102">Backup History and Header Information (SQL Server)</span></span>
  <span data-ttu-id="253d6-103">En la base de datos [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] msdb **se almacena un historial completo de todas las operaciones de copia de seguridad y restauración de** de una instancia de servidor.</span><span class="sxs-lookup"><span data-stu-id="253d6-103">A complete history of all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backup and restore operations on a server instance is stored in the **msdb** database.</span></span> <span data-ttu-id="253d6-104">En este tema se describen las tablas del historial de copias de seguridad y restauración, así como las instrucciones de [!INCLUDE[tsql](../../includes/tsql-md.md)] que se usan para tener acceso al historial de copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-104">This topic introduces the backup and restore history tables and also the [!INCLUDE[tsql](../../includes/tsql-md.md)] statements that are used to access backup history.</span></span> <span data-ttu-id="253d6-105">En el tema también se explica cuándo resulta útil la lista de archivos de base de datos y de registro de transacciones, y cuándo se debe usar la información de encabezado de medios con respecto a cuándo se debe usar la información de encabezado de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-105">The topic also discusses when listing database and transaction log files is useful and when to use media-header information compared to when to use backup-header information.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="253d6-106">Para administrar el riesgo de perder cambios recientes en el historial de copias de seguridad y restauración, realice copias de seguridad de **msdb** con frecuencia.</span><span class="sxs-lookup"><span data-stu-id="253d6-106">To manage the risk of losing recent changes to your backup and restore history, back up **msdb** frequently.</span></span> <span data-ttu-id="253d6-107">Para obtener información sobre las bases de datos del sistema de las que debe hacer copias de seguridad, vea [Realizar copias de seguridad y restaurar bases de datos del sistema &#40;SQL Server&#41;](back-up-and-restore-of-system-databases-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="253d6-107">For information about which of the system databases you must back up, see [Back Up and Restore of System Databases &#40;SQL Server&#41;](back-up-and-restore-of-system-databases-sql-server.md).</span></span>  
  
 <span data-ttu-id="253d6-108">**En este tema:**</span><span class="sxs-lookup"><span data-stu-id="253d6-108">**In This Topic:**</span></span>  
  
-   [<span data-ttu-id="253d6-109">Tablas del historial de copias de seguridad y restauración</span><span class="sxs-lookup"><span data-stu-id="253d6-109">Backup and Restore History Tables</span></span>](#BnRHistoryTables)  
  
-   [<span data-ttu-id="253d6-110">Instrucciones Transact-SQL para tener acceso al historial de copias de seguridad</span><span class="sxs-lookup"><span data-stu-id="253d6-110">Transact-SQL Statements for Accessing Backup History</span></span>](#TsqlStatementsForBackupHistory)  
  
-   [<span data-ttu-id="253d6-111">Archivos de base de datos y de registro de transacciones</span><span class="sxs-lookup"><span data-stu-id="253d6-111">Database and Transaction Log Files</span></span>](#ListDbTlogFiles)  
  
-   [<span data-ttu-id="253d6-112">Información de encabezado de medios</span><span class="sxs-lookup"><span data-stu-id="253d6-112">Media-Header Information</span></span>](#MediaHeader)  
  
-   [<span data-ttu-id="253d6-113">Información de encabezado de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="253d6-113">Backup-Header Information</span></span>](#BackupHeader)  
  
-   [<span data-ttu-id="253d6-114">Comparación de la información del encabezado de medios y del encabezado de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="253d6-114">Comparison of Media-Header and Backup-Header Information</span></span>](#CompareMediaHeaderBackupHeader)  
  
-   [<span data-ttu-id="253d6-115">Comprobación de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="253d6-115">Backup Verification</span></span>](#Verification)  
  
-   [<span data-ttu-id="253d6-116">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="253d6-116">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="backup-and-restore-history-tables"></a><a name="BnRHistoryTables"></a> <span data-ttu-id="253d6-117">Tablas del historial de copias de seguridad y restauración</span><span class="sxs-lookup"><span data-stu-id="253d6-117">Backup and Restore History Tables</span></span>  
 <span data-ttu-id="253d6-118">En esta sección se presentan las tablas del historial que almacenan metadatos de copias de seguridad y restauración en la base de datos del sistema **msdb** .</span><span class="sxs-lookup"><span data-stu-id="253d6-118">This section introduces the history tables that store backup and restore metadata in the **msdb** system database.</span></span>  
  
|<span data-ttu-id="253d6-119">Tabla del historial</span><span class="sxs-lookup"><span data-stu-id="253d6-119">History table</span></span>|<span data-ttu-id="253d6-120">Descripción</span><span class="sxs-lookup"><span data-stu-id="253d6-120">Description</span></span>|  
|-------------------|-----------------|  
|[<span data-ttu-id="253d6-121">backupfile</span><span class="sxs-lookup"><span data-stu-id="253d6-121">backupfile</span></span>](/sql/relational-databases/system-tables/backupfile-transact-sql)|<span data-ttu-id="253d6-122">Contiene una fila por cada archivo de datos o de registro del que se hace una copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-122">Contains one row for each data or log file that is backed up.</span></span>|  
|[<span data-ttu-id="253d6-123">backupfilegroup</span><span class="sxs-lookup"><span data-stu-id="253d6-123">backupfilegroup</span></span>](/sql/relational-databases/system-tables/backupfilegroup-transact-sql)|<span data-ttu-id="253d6-124">Contiene una fila por cada grupo de archivos de un conjunto de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-124">Contains a row for each filegroup in a backup set.</span></span>|  
|[<span data-ttu-id="253d6-125">backupmediafamily</span><span class="sxs-lookup"><span data-stu-id="253d6-125">backupmediafamily</span></span>](/sql/relational-databases/system-tables/backupmediafamily-transact-sql)|<span data-ttu-id="253d6-126">Contiene una fila por cada familia de medios.</span><span class="sxs-lookup"><span data-stu-id="253d6-126">Contains one row for each media family.</span></span> <span data-ttu-id="253d6-127">Si una familia de medios reside en un conjunto de medios reflejado, la familia tiene una fila independiente para cada reflejo del conjunto de medios.</span><span class="sxs-lookup"><span data-stu-id="253d6-127">If a media family resides in a mirrored media set, the family has a separate row for each mirror in the media set.</span></span>|  
|[<span data-ttu-id="253d6-128">backupmediaset</span><span class="sxs-lookup"><span data-stu-id="253d6-128">backupmediaset</span></span>](/sql/relational-databases/system-tables/backupmediaset-transact-sql)|<span data-ttu-id="253d6-129">Contiene una fila por cada conjunto de medios de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-129">Contains one row for each backup media set.</span></span>|  
|[<span data-ttu-id="253d6-130">backupset</span><span class="sxs-lookup"><span data-stu-id="253d6-130">backupset</span></span>](/sql/relational-databases/system-tables/backupset-transact-sql)|<span data-ttu-id="253d6-131">Contiene una fila por cada conjunto de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-131">Contains a row for each backup set.</span></span>|  
|[<span data-ttu-id="253d6-132">restorefile</span><span class="sxs-lookup"><span data-stu-id="253d6-132">restorefile</span></span>](/sql/relational-databases/system-tables/restorefile-transact-sql)|<span data-ttu-id="253d6-133">Contiene una fila por cada archivo restaurado.</span><span class="sxs-lookup"><span data-stu-id="253d6-133">Contains one row for each restored file.</span></span> <span data-ttu-id="253d6-134">Se incluyen los archivos restaurados indirectamente por nombre de grupo de archivos.</span><span class="sxs-lookup"><span data-stu-id="253d6-134">This includes files restored indirectly by filegroup name.</span></span>|  
|[<span data-ttu-id="253d6-135">restorefilegroup</span><span class="sxs-lookup"><span data-stu-id="253d6-135">restorefilegroup</span></span>](/sql/relational-databases/system-tables/restorefilegroup-transact-sql)|<span data-ttu-id="253d6-136">Contiene una fila por cada grupo de archivos restaurado.</span><span class="sxs-lookup"><span data-stu-id="253d6-136">Contains one row for each restored filegroup.</span></span>|  
|[<span data-ttu-id="253d6-137">restorehistory</span><span class="sxs-lookup"><span data-stu-id="253d6-137">restorehistory</span></span>](/sql/relational-databases/system-tables/restorehistory-transact-sql)|<span data-ttu-id="253d6-138">Contiene una fila por cada operación de restauración.</span><span class="sxs-lookup"><span data-stu-id="253d6-138">Contains one row for each restore operation.</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="253d6-139">Cuando se realiza una restauración, se modifican las tablas del historial de copias de seguridad y las del historial de restauraciones.</span><span class="sxs-lookup"><span data-stu-id="253d6-139">When a restore is performed, backup history tables and restore history tables are modified.</span></span>  
  
##  <a name="transact-sql-statements-for-accessing-backup-history"></a><a name="TsqlStatementsForBackupHistory"></a> <span data-ttu-id="253d6-140">Instrucciones Transact-SQL para tener acceso al historial de copias de seguridad</span><span class="sxs-lookup"><span data-stu-id="253d6-140">Transact-SQL Statements for Accessing Backup History</span></span>  
 <span data-ttu-id="253d6-141">Las instrucciones de información de la restauración corresponden a información almacenada en ciertas tablas del historial de copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-141">The restore information statements correspond with information stored in certain backup history tables.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="253d6-142">Las instrucciones Transact-SQL RESTORE FILELISTONLY, RESTORE HEADERONLY, RESTORE LABELONLY y RESTORE VERIFYONLY requieren el permiso CREATE DATABASE.</span><span class="sxs-lookup"><span data-stu-id="253d6-142">The RESTORE FILELISTONLY, RESTORE HEADERONLY, RESTORE LABELONLY, and RESTORE VERIFYONLY Transact-SQL statements require CREATE DATABASE permission.</span></span> <span data-ttu-id="253d6-143">Este requisito proporciona una protección más completa que en versiones anteriores de los archivos de copia de seguridad y de la información que contienen.</span><span class="sxs-lookup"><span data-stu-id="253d6-143">This requirement secures your backup files and protects your backup information more fully than in previous versions.</span></span> <span data-ttu-id="253d6-144">Para obtener información sobre este permiso, vea [GRANT &#40;permisos de base de datos de Transact-SQL&#41;](/sql/t-sql/statements/grant-database-permissions-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="253d6-144">For information about this permission, see [GRANT Database Permissions &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-database-permissions-transact-sql).</span></span>  
  
|<span data-ttu-id="253d6-145">Instrucción de información</span><span class="sxs-lookup"><span data-stu-id="253d6-145">Information statement</span></span>|<span data-ttu-id="253d6-146">Tabla del historial de copias de seguridad</span><span class="sxs-lookup"><span data-stu-id="253d6-146">Backup history table</span></span>|<span data-ttu-id="253d6-147">Descripción</span><span class="sxs-lookup"><span data-stu-id="253d6-147">Description</span></span>|  
|---------------------------|--------------------------|-----------------|  
|[<span data-ttu-id="253d6-148">RESTORE FILELISTONLY</span><span class="sxs-lookup"><span data-stu-id="253d6-148">RESTORE FILELISTONLY</span></span>](/sql/t-sql/statements/restore-statements-filelistonly-transact-sql)|[<span data-ttu-id="253d6-149">backupfile</span><span class="sxs-lookup"><span data-stu-id="253d6-149">backupfile</span></span>](/sql/relational-databases/system-tables/backupfile-transact-sql)|<span data-ttu-id="253d6-150">Devuelve un conjunto de resultados que contiene la lista de los archivos de base de datos y de registro del conjunto de copia de seguridad especificado.</span><span class="sxs-lookup"><span data-stu-id="253d6-150">Returns a result set that has a list of the database and log files that are contained in the specified backup set.</span></span><br /><br /> <span data-ttu-id="253d6-151">Para obtener más información, vea "Enumerar los archivos de base de datos y del registro de transacciones" más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="253d6-151">For more information, see "Listing Database and Transaction Log Files," later in this topic.</span></span>|  
|[<span data-ttu-id="253d6-152">RESTORE HEADERONLY</span><span class="sxs-lookup"><span data-stu-id="253d6-152">RESTORE HEADERONLY</span></span>](/sql/t-sql/statements/restore-statements-headeronly-transact-sql)|[<span data-ttu-id="253d6-153">backupset</span><span class="sxs-lookup"><span data-stu-id="253d6-153">backupset</span></span>](/sql/relational-databases/system-tables/backupset-transact-sql)|<span data-ttu-id="253d6-154">Obtiene la información del encabezado sobre todos los conjuntos de copias de seguridad de un dispositivo determinado.</span><span class="sxs-lookup"><span data-stu-id="253d6-154">Retrieves all the backup header information for all backup sets on a particular backup device.</span></span> <span data-ttu-id="253d6-155">El resultado de la ejecución de RESTORE HEADERONLY es un conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="253d6-155">The result from executing RESTORE HEADERONLY is a result set.</span></span><br /><br /> <span data-ttu-id="253d6-156">Para obtener más información, vea "Ver la información de encabezado de copia de seguridad" más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="253d6-156">For more information, see "Viewing the Backup-Header Information," later in this topic.</span></span>|  
|[<span data-ttu-id="253d6-157">RESTORE LABELONLY</span><span class="sxs-lookup"><span data-stu-id="253d6-157">RESTORE LABELONLY</span></span>](/sql/t-sql/statements/restore-statements-labelonly-transact-sql)|[<span data-ttu-id="253d6-158">backupmediaset</span><span class="sxs-lookup"><span data-stu-id="253d6-158">backupmediaset</span></span>](/sql/relational-databases/system-tables/backupmediaset-transact-sql)|<span data-ttu-id="253d6-159">Devuelve un conjunto de resultados que contiene información acerca del medio de copia de seguridad de un dispositivo de copia de seguridad especificado.</span><span class="sxs-lookup"><span data-stu-id="253d6-159">Returns a result set that contains information about the backup media on a specified backup device.</span></span><br /><br /> <span data-ttu-id="253d6-160">Para obtener más información, vea "Ver la información de encabezado de medios" más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="253d6-160">For more information, see "Viewing the Media-Header Information," later in this topic.</span></span>|  
  
##  <a name="database-and-transaction-log-files"></a><a name="ListDbTlogFiles"></a> <span data-ttu-id="253d6-161">Archivos de base de datos y de registro de transacciones</span><span class="sxs-lookup"><span data-stu-id="253d6-161">Database and Transaction Log Files</span></span>  
 <span data-ttu-id="253d6-162">La información que se muestra al enumerar los archivos de base de datos y del registro de transacciones de una copia de seguridad incluye el nombre lógico, nombre físico, tipo de archivo (base de datos o registro), pertenencia a grupos de archivos, tamaño del archivo (en bytes), máximo tamaño de archivo permitido y tamaño de crecimiento de archivos predefinido (en bytes).</span><span class="sxs-lookup"><span data-stu-id="253d6-162">Information that is displayed when the database and transaction log files are listed in a backup includes the logical name, physical name, file type (database or log), filegroup membership, file size (in bytes), the maximum allowed file size, and the predefined file growth size (in bytes).</span></span> <span data-ttu-id="253d6-163">Esta información es útil, en las situaciones siguientes, para determinar los nombres de los archivos de una copia de seguridad de base de datos antes de restaurarla cuando:</span><span class="sxs-lookup"><span data-stu-id="253d6-163">This information is useful, in the following situations, to determine the names of the files in a database backup before you restore the database backup:</span></span>  
  
-   <span data-ttu-id="253d6-164">Ha perdido una unidad de disco que contiene uno o más archivos de una base de datos.</span><span class="sxs-lookup"><span data-stu-id="253d6-164">You have lost a disk drive that contains one or more of the files for a database.</span></span>  
  
     <span data-ttu-id="253d6-165">Puede enumerar los archivos de la copia de seguridad de la base de datos para determinar los archivos afectados y, a continuación, restaurar dichos archivos en una unidad diferente, al restaurar la base de datos completa, o restaurar solamente estos archivos y aplicar las copias del registro de transacciones creadas desde que se realizó la copia de seguridad de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="253d6-165">You can list the files in the database backup to determine which files were affected, and then restore those files onto a different drive when you restore the whole database; or restore just those files and apply any transaction log backups created since the database was backed up.</span></span>  
  
-   <span data-ttu-id="253d6-166">Va a restaurar una base de datos de un servidor en otro servidor pero la estructura de directorios y asignación de unidades no existen en el servidor.</span><span class="sxs-lookup"><span data-stu-id="253d6-166">You are restoring a database from one server onto another server, but the directory structure and drive mapping does not exist on the server.</span></span>  
  
     <span data-ttu-id="253d6-167">Enumerar los archivos de la copia de seguridad le permite determinar los archivos afectados.</span><span class="sxs-lookup"><span data-stu-id="253d6-167">Listing the files in the backup let you determine which files are affected.</span></span> <span data-ttu-id="253d6-168">Por ejemplo, la copia de seguridad contiene un archivo que es necesario restaurar en la unidad E, pero el servidor de destino no tiene una unidad E. Es necesario cambiar el archivo a otra ubicación, por ejemplo, la unidad Z, cuando se restaure.</span><span class="sxs-lookup"><span data-stu-id="253d6-168">For example, the backup contains a file that it has to restore to drive E, but the destination server does not have a drive E. The file must be relocated to another location, such as drive Z, when the file is restored.</span></span>  
  
##  <a name="media-header-information"></a><a name="MediaHeader"></a> <span data-ttu-id="253d6-169">Información de encabezado de medios</span><span class="sxs-lookup"><span data-stu-id="253d6-169">Media-Header Information</span></span>  
 <span data-ttu-id="253d6-170">La información de encabezado de medios muestra información acerca del propio medio y no de las copias de seguridad del medio.</span><span class="sxs-lookup"><span data-stu-id="253d6-170">Viewing the media header displays information about the media itself, instead of about the backups on the media.</span></span> <span data-ttu-id="253d6-171">La información de encabezado de medios mostrada incluye el nombre del medio, la descripción, el nombre del software que lo creó y la fecha en que se escribió.</span><span class="sxs-lookup"><span data-stu-id="253d6-171">Media header information that is displayed includes the media name, description, name of the software that created the media header, and the date the media header was written.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="253d6-172">Ver la información de encabezado de medios es muy rápido.</span><span class="sxs-lookup"><span data-stu-id="253d6-172">Viewing the media header is quick.</span></span>  
  
 <span data-ttu-id="253d6-173">Para obtener más información, vea [Comparación de la información del encabezado de medios y del encabezado de copias de seguridad](#CompareMediaHeaderBackupHeader), más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="253d6-173">For more information, see [Comparison of Media-Header and Backup-Header Information](#CompareMediaHeaderBackupHeader), later in this topic.</span></span>  
  
##  <a name="backup-header-information"></a><a name="BackupHeader"></a> <span data-ttu-id="253d6-174">Información de encabezado de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="253d6-174">Backup-Header Information</span></span>  
 <span data-ttu-id="253d6-175">La información del encabezado de copia de seguridad muestra información acerca de todos los conjuntos de copia de seguridad de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] y no[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en el medio.</span><span class="sxs-lookup"><span data-stu-id="253d6-175">Viewing the backup header displays information about all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backup sets on the media.</span></span> <span data-ttu-id="253d6-176">La información mostrada incluye los tipos de dispositivos de copia de seguridad utilizados, los tipos de copia de seguridad (por ejemplo, base de datos, transacción, archivo o diferencial de la base de datos) así como información acerca de la fecha y hora inicial y final de la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-176">Information that is displayed includes the types of backup devices that are used, the types of backup (for example, database, transaction, file, or differential database), and backup start and stop date/time information.</span></span> <span data-ttu-id="253d6-177">Esta información es útil cuando se necesita determinar el conjunto de copia de seguridad que se va a restaurar en la cinta o las copias de seguridad que contiene el medio.</span><span class="sxs-lookup"><span data-stu-id="253d6-177">This information is useful when you have to determine which backup set on the tape to restore, or the backups that are contained on the media.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="253d6-178">Se puede tardar mucho en ver la información de encabezado de la copia de seguridad de las cintas de alta capacidad debido a que se debe examinar el medio completo para mostrar información acerca de cada copia de seguridad del mismo.</span><span class="sxs-lookup"><span data-stu-id="253d6-178">Viewing backup header information can take a long time for high-capacity tapes, because the whole media must be scanned to display information about each backup on the media.</span></span>  
  
 <span data-ttu-id="253d6-179">Para obtener más información, vea [Comparación de la información del encabezado de medios y del encabezado de copias de seguridad](#CompareMediaHeaderBackupHeader), más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="253d6-179">For more information, see [Comparison of Media-Header and Backup-Header Information](#CompareMediaHeaderBackupHeader), later in this topic.</span></span>  
  
### <a name="which-backup-set-to-restore"></a><span data-ttu-id="253d6-180">Qué conjunto de copia de seguridad se debe restaurar</span><span class="sxs-lookup"><span data-stu-id="253d6-180">Which Backup Set to Restore</span></span>  
 <span data-ttu-id="253d6-181">Puede usar información en el encabezado de copia de seguridad para identificar qué conjunto de copia de seguridad se va a restaurar.</span><span class="sxs-lookup"><span data-stu-id="253d6-181">You can use information in the backup header to identify which backup set to restore.</span></span> <span data-ttu-id="253d6-182">El Motor de base de datos numera cada conjunto de copia de seguridad en los medios de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-182">The Database Engine numbers each backup set on the backup media.</span></span> <span data-ttu-id="253d6-183">Esto permite identificar el conjunto de copia de seguridad que desea restaurar mediante su posición en los medios.</span><span class="sxs-lookup"><span data-stu-id="253d6-183">This lets you identify the backup set you want to restore by using its position on the media.</span></span> <span data-ttu-id="253d6-184">Por ejemplo, el siguiente medio contiene tres conjuntos de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-184">For example, the following media contains three backup sets.</span></span>  
  
 <span data-ttu-id="253d6-185">![Medio de copia de seguridad que contiene conjuntos de copia de seguridad de SQL Server](../../database-engine/media/bnr-media-backup-sets.gif "Medio de copia de seguridad que contiene conjuntos de copia de seguridad de SQL Server")</span><span class="sxs-lookup"><span data-stu-id="253d6-185">![Backup media containing SQL Server backup sets](../../database-engine/media/bnr-media-backup-sets.gif "Backup media containing SQL Server backup sets")</span></span>  
  
 <span data-ttu-id="253d6-186">Para restaurar un conjunto de copia de seguridad específico, especifique el número de posición de ese conjunto.</span><span class="sxs-lookup"><span data-stu-id="253d6-186">To restore a specific backup set, specify the position number of the backup set you want to restore.</span></span> <span data-ttu-id="253d6-187">Por ejemplo, para restaurar el segundo conjunto de copia de seguridad, especifique 2 como el conjunto de copia de seguridad para restaurar.</span><span class="sxs-lookup"><span data-stu-id="253d6-187">For example, to restore the second backup set, specify 2 as the backup set to restore.</span></span>  
  
##  <a name="comparison-of-media-header-and-backup-header-information"></a><a name="CompareMediaHeaderBackupHeader"></a> <span data-ttu-id="253d6-188">Comparación de la información del encabezado de medios y del encabezado de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="253d6-188">Comparison of Media-Header and Backup-Header Information</span></span>  
 <span data-ttu-id="253d6-189">En la siguiente ilustración se muestra un ejemplo de las diferencias entre ver la información del encabezado de la copia de seguridad y del encabezado del medio.</span><span class="sxs-lookup"><span data-stu-id="253d6-189">The following illustration provides an example of the differences between viewing backup-header and media-header information.</span></span> <span data-ttu-id="253d6-190">Obtener el encabezado de medios requiere que se recupere solo la información del principio de la cinta.</span><span class="sxs-lookup"><span data-stu-id="253d6-190">Obtaining the media header requires retrieving information from only the start of the tape.</span></span> <span data-ttu-id="253d6-191">Obtener el encabezado de copia de seguridad requiere examinar la cinta completa para ver el encabezado de cada conjunto de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-191">Obtaining the backup header requires scanning the whole tape to look at the header of every backup set.</span></span>  
  
 <span data-ttu-id="253d6-192">![Conjunto de medios que contiene tres conjuntos de copia de seguridad de SQL Server](../../database-engine/media/bnr-media-label.gif "Conjunto de medios que contiene tres conjuntos de copia de seguridad de SQL Server")</span><span class="sxs-lookup"><span data-stu-id="253d6-192">![Media set containing three SQL Server backup sets](../../database-engine/media/bnr-media-label.gif "Media set containing three SQL Server backup sets")</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="253d6-193">Si se utilizan conjuntos de medios con varias familias de medios, el encabezado de medios y el conjunto de copia de seguridad se escriben en todas las familias de medios.</span><span class="sxs-lookup"><span data-stu-id="253d6-193">When you use media sets that have multiple media families, the media header and backup set are written to all media families.</span></span> <span data-ttu-id="253d6-194">Por tanto, solo es necesario proporcionar una sola familia de medios para estas operaciones de generación de informes.</span><span class="sxs-lookup"><span data-stu-id="253d6-194">Therefore, you only have to provide a single media family for these reporting operations.</span></span>  
  
 <span data-ttu-id="253d6-195">Para obtener información sobre cómo ver el encabezado de medios, vea "Ver la información de encabezado de medios" ya descrito en en este tema.</span><span class="sxs-lookup"><span data-stu-id="253d6-195">For information about how to view the media-header, see "Viewing the Media-Header Information," earlier in this topic.</span></span>  
  
 <span data-ttu-id="253d6-196">Para obtener información sobre cómo ver la información del encabezado de copia de seguridad de todos los conjuntos de copia de seguridad de un dispositivo, vea "Ver la información de encabezado de copia de seguridad" anteriormente en este tema.</span><span class="sxs-lookup"><span data-stu-id="253d6-196">For information about how to view the backup header information for all backup sets on a backup device, see "Viewing the Backup-Header Information," earlier in this topic.</span></span>  
  
##  <a name="backup-verification"></a><a name="Verification"></a> <span data-ttu-id="253d6-197">Comprobación de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="253d6-197">Backup Verification</span></span>  
 <span data-ttu-id="253d6-198">Aunque no es obligatoria, la práctica de comprobar una copia de seguridad resulta útil.</span><span class="sxs-lookup"><span data-stu-id="253d6-198">Although not required, verifying a backup is a useful practice.</span></span> <span data-ttu-id="253d6-199">La comprobación de una copia de seguridad comprueba que esté intacta físicamente, para asegurar que todos los archivos de la copia de seguridad se puedan leer y restaurar, y que se pueda restaurar la copia de seguridad en caso de necesidad.</span><span class="sxs-lookup"><span data-stu-id="253d6-199">Verifying a backup checks that the backup is intact physically, to ensure that all the files in the backup are readable and can be restored, and that you can restore your backup in the event you need to use it.</span></span> <span data-ttu-id="253d6-200">Es importante entender que la comprobación de una copia de seguridad no comprueba la estructura de los datos en la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-200">It is important to understand that verifying a backup does not verify the structure of the data on the backup.</span></span> <span data-ttu-id="253d6-201">Sin embargo, si la copia de seguridad se creó usando WITH CHECKSUMS, la comprobación de la copia de seguridad usando WITH CHECKSUMS puede proporcionar un buen indicativo de la confiabilidad de los datos de la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="253d6-201">However, if the backup was created using WITH CHECKSUMS, verifying the backup using WITH CHECKSUMS can provide a good indication of the reliability of the data on the backup.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="253d6-202">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="253d6-202">Related Tasks</span></span>  
 <span data-ttu-id="253d6-203">**Para eliminar filas antiguas de las tablas del historial de copias de seguridad y restauración**</span><span class="sxs-lookup"><span data-stu-id="253d6-203">**To delete old rows from backup and restore history tables**</span></span>  
  
-   [<span data-ttu-id="253d6-204">sp_delete_backuphistory &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-204">sp_delete_backuphistory &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-backuphistory-transact-sql)  
  
 <span data-ttu-id="253d6-205">**Para eliminar todas las filas de las tablas del historial de copias de seguridad y restauración de una base de datos determinada**</span><span class="sxs-lookup"><span data-stu-id="253d6-205">**To delete all rows for a specific database from backup and restore history tables**</span></span>  
  
-   [<span data-ttu-id="253d6-206">sp_delete_database_backuphistory &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-206">sp_delete_database_backuphistory &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-database-backuphistory-transact-sql)  
  
 <span data-ttu-id="253d6-207">**Para ver los archivos de datos y de registro en un conjunto de copia de seguridad**</span><span class="sxs-lookup"><span data-stu-id="253d6-207">**To view the data and log files in a backup set**</span></span>  
  
-   [<span data-ttu-id="253d6-208">RESTORE FILELISTONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-208">RESTORE FILELISTONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-filelistonly-transact-sql)  
  
-   <span data-ttu-id="253d6-209"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadFileList%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="253d6-209"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadFileList%2A> (SMO)</span></span>  
  
 <span data-ttu-id="253d6-210">**Para ver la información de encabezado de medios**</span><span class="sxs-lookup"><span data-stu-id="253d6-210">**To view media header information**</span></span>  
  
-   [<span data-ttu-id="253d6-211">RESTORE LABELONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-211">RESTORE LABELONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-labelonly-transact-sql)  
  
-   [<span data-ttu-id="253d6-212">Ver las propiedades y el contenido de un dispositivo lógico de copia de seguridad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-212">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)  
  
-   [<span data-ttu-id="253d6-213">Ver el contenido de una cinta o un archivo de copia de seguridad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-213">View the Contents of a Backup Tape or File &#40;SQL Server&#41;</span></span>](view-the-contents-of-a-backup-tape-or-file-sql-server.md)  
  
-   <span data-ttu-id="253d6-214"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadMediaHeader%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="253d6-214"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadMediaHeader%2A> (SMO)</span></span>  
  
 <span data-ttu-id="253d6-215">**Para ver la información de encabezado de la copia de seguridad**</span><span class="sxs-lookup"><span data-stu-id="253d6-215">**To view backup header information**</span></span>  
  
-   [<span data-ttu-id="253d6-216">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-216">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-headeronly-transact-sql)  
  
-   [<span data-ttu-id="253d6-217">Ver el contenido de una cinta o un archivo de copia de seguridad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-217">View the Contents of a Backup Tape or File &#40;SQL Server&#41;</span></span>](view-the-contents-of-a-backup-tape-or-file-sql-server.md)  
  
-   [<span data-ttu-id="253d6-218">Ver las propiedades y el contenido de un dispositivo lógico de copia de seguridad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-218">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)  
  
-   <span data-ttu-id="253d6-219"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadBackupHeader%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="253d6-219"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadBackupHeader%2A> (SMO)</span></span>  
  
 <span data-ttu-id="253d6-220">**Para eliminar filas antiguas de las tablas del historial de copias de seguridad y restauración**</span><span class="sxs-lookup"><span data-stu-id="253d6-220">**To delete old rows from backup and restore history tables**</span></span>  
  
-   [<span data-ttu-id="253d6-221">sp_delete_backuphistory &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-221">sp_delete_backuphistory &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-backuphistory-transact-sql)  
  
 <span data-ttu-id="253d6-222">**Para eliminar todas las filas de las tablas del historial de copias de seguridad y restauración de una base de datos determinada**</span><span class="sxs-lookup"><span data-stu-id="253d6-222">**To delete all rows for a specific database from backup and restore history tables**</span></span>  
  
-   [<span data-ttu-id="253d6-223">sp_delete_database_backuphistory &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-223">sp_delete_database_backuphistory &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-database-backuphistory-transact-sql)  
  
 <span data-ttu-id="253d6-224">**Para ver la información de encabezado de medios**</span><span class="sxs-lookup"><span data-stu-id="253d6-224">**To view media header information**</span></span>  
  
-   [<span data-ttu-id="253d6-225">RESTORE LABELONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-225">RESTORE LABELONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-labelonly-transact-sql)  
  
-   [<span data-ttu-id="253d6-226">Ver las propiedades y el contenido de un dispositivo lógico de copia de seguridad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-226">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)  
  
-   [<span data-ttu-id="253d6-227">Ver el contenido de una cinta o un archivo de copia de seguridad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-227">View the Contents of a Backup Tape or File &#40;SQL Server&#41;</span></span>](view-the-contents-of-a-backup-tape-or-file-sql-server.md)  
  
-   <span data-ttu-id="253d6-228"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadMediaHeader%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="253d6-228"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadMediaHeader%2A> (SMO)</span></span>  
  
 <span data-ttu-id="253d6-229">**Para ver la información de encabezado de la copia de seguridad**</span><span class="sxs-lookup"><span data-stu-id="253d6-229">**To view backup header information**</span></span>  
  
-   [<span data-ttu-id="253d6-230">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-230">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-headeronly-transact-sql)  
  
-   [<span data-ttu-id="253d6-231">Ver el contenido de una cinta o un archivo de copia de seguridad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-231">View the Contents of a Backup Tape or File &#40;SQL Server&#41;</span></span>](view-the-contents-of-a-backup-tape-or-file-sql-server.md)  
  
-   [<span data-ttu-id="253d6-232">Ver las propiedades y el contenido de un dispositivo lógico de copia de seguridad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-232">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)  
  
-   <span data-ttu-id="253d6-233"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadBackupHeader%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="253d6-233"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadBackupHeader%2A> (SMO)</span></span>  
  
 <span data-ttu-id="253d6-234">**Para ver los archivos de un conjunto de copia de seguridad**</span><span class="sxs-lookup"><span data-stu-id="253d6-234">**To view the files in a backup set**</span></span>  
  
-   [<span data-ttu-id="253d6-235">Ver los archivos de datos y de registro en un conjunto de copia de seguridad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-235">View the Data and Log Files in a Backup Set &#40;SQL Server&#41;</span></span>](view-the-data-and-log-files-in-a-backup-set-sql-server.md)  
  
-   [<span data-ttu-id="253d6-236">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-236">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-headeronly-transact-sql)  
  
 <span data-ttu-id="253d6-237">**Para comprobar una copia de seguridad**</span><span class="sxs-lookup"><span data-stu-id="253d6-237">**To verify a backup**</span></span>  
  
-   [<span data-ttu-id="253d6-238">RESTORE VERIFYONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-238">RESTORE VERIFYONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-verifyonly-transact-sql)  
  
-   <span data-ttu-id="253d6-239"><xref:Microsoft.SqlServer.Management.Smo.Restore.SqlVerify%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="253d6-239"><xref:Microsoft.SqlServer.Management.Smo.Restore.SqlVerify%2A> (SMO)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="253d6-240">Consulte también</span><span class="sxs-lookup"><span data-stu-id="253d6-240">See Also</span></span>  
 <span data-ttu-id="253d6-241">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="253d6-241">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span></span>  
 <span data-ttu-id="253d6-242">[Conjuntos de medios, familias de medios y conjuntos de copias de seguridad &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="253d6-242">[Media Sets, Media Families, and Backup Sets &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md) </span></span>  
 <span data-ttu-id="253d6-243">[Dispositivos de copia de seguridad &#40;SQL Server&#41;](backup-devices-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="253d6-243">[Backup Devices &#40;SQL Server&#41;](backup-devices-sql-server.md) </span></span>  
 <span data-ttu-id="253d6-244">[Conjuntos de medios de copia de seguridad reflejados &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="253d6-244">[Mirrored Backup Media Sets &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md) </span></span>  
 [<span data-ttu-id="253d6-245">Errores posibles de medios durante copia de seguridad y restauración &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="253d6-245">Possible Media Errors During Backup and Restore &#40;SQL Server&#41;</span></span>](possible-media-errors-during-backup-and-restore-sql-server.md)  
  
  
