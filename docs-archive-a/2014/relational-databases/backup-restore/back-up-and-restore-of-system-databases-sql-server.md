---
title: Realizar copias de seguridad y restaurar bases de datos del sistema (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- system databases [SQL Server], backing up and restoring
- restoring system databases [SQL Server]
- backing up [SQL Server], system databases
- database backups [SQL Server], system databases
- servers [SQL Server], backup
ms.assetid: aef0c4fa-ba67-413d-9359-1a67682fdaab
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 51ccf1aeadcf4ab9a662cdd629a812d3ee4b82aa
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87677729"
---
# <a name="back-up-and-restore-of-system-databases-sql-server"></a><span data-ttu-id="47be6-102">Realizar copias de seguridad y restaurar bases de datos del sistema (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="47be6-102">Back Up and Restore of System Databases (SQL Server)</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="47be6-103">tiene un conjunto de bases de datos de nivel de sistema,*bases de datos del sistema*, esenciales para el funcionamiento de una instancia del servidor.</span><span class="sxs-lookup"><span data-stu-id="47be6-103">maintains a set of system-level databases, s*ystem databases*, which are essential for the operation of a server instance.</span></span> <span data-ttu-id="47be6-104">Varias de las bases de datos del sistema requieren que se hagan copias de seguridad tras cualquier actualización de importancia.</span><span class="sxs-lookup"><span data-stu-id="47be6-104">Several of the system databases must be backed up after every significant update.</span></span> <span data-ttu-id="47be6-105">Las bases de datos del sistema de las que siempre debe realizar copias de seguridad son **msdb**, **maestra**y **model**.</span><span class="sxs-lookup"><span data-stu-id="47be6-105">The system databases that you must always back up include **msdb**, **master**, and **model**.</span></span> <span data-ttu-id="47be6-106">Si alguna base de datos utiliza la replicación en la instancia de servidor, existe la base de datos del sistema **distribution** de la que también debe hacer una copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="47be6-106">If any database uses replication on the server instance, there is a **distribution** system database that you must also back up.</span></span> <span data-ttu-id="47be6-107">La copia de seguridad de estas bases de datos del sistema le permite restaurar y recuperar el sistema [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en el caso de producirse un error del sistema, por ejemplo una pérdida del disco duro.</span><span class="sxs-lookup"><span data-stu-id="47be6-107">Backups of these system databases let you restore and recover the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] system in the event of system failure, such as the loss of a hard disk.</span></span>  
  
 <span data-ttu-id="47be6-108">En la tabla siguiente se resumen todas las bases de datos del sistema.</span><span class="sxs-lookup"><span data-stu-id="47be6-108">The following table summarizes all of the system databases.</span></span>  
  
|<span data-ttu-id="47be6-109">Base de datos del sistema</span><span class="sxs-lookup"><span data-stu-id="47be6-109">System database</span></span>|<span data-ttu-id="47be6-110">Descripción</span><span class="sxs-lookup"><span data-stu-id="47be6-110">Description</span></span>|<span data-ttu-id="47be6-111">¿Son necesarias copias de seguridad?</span><span class="sxs-lookup"><span data-stu-id="47be6-111">Are backups required?</span></span>|<span data-ttu-id="47be6-112">modelo de recuperación</span><span class="sxs-lookup"><span data-stu-id="47be6-112">Recovery model</span></span>|<span data-ttu-id="47be6-113">Comentarios</span><span class="sxs-lookup"><span data-stu-id="47be6-113">Comments</span></span>|  
|---------------------|-----------------|---------------------------|--------------------|--------------|  
|[<span data-ttu-id="47be6-114">maestra</span><span class="sxs-lookup"><span data-stu-id="47be6-114">master</span></span>](../databases/master-database.md)|<span data-ttu-id="47be6-115">Base de datos en la que se registra toda la información del sistema de un sistema [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="47be6-115">The database that records all of the system level information for a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] system.</span></span>|<span data-ttu-id="47be6-116">Sí</span><span class="sxs-lookup"><span data-stu-id="47be6-116">Yes</span></span>|<span data-ttu-id="47be6-117">Simple</span><span class="sxs-lookup"><span data-stu-id="47be6-117">Simple</span></span>|<span data-ttu-id="47be6-118">Realice copias de seguridad de la base de datos **maestra** con la frecuencia necesaria para que los datos estén suficientemente protegidos según sus necesidades empresariales.</span><span class="sxs-lookup"><span data-stu-id="47be6-118">Back up **master** as often as necessary to protect the data sufficiently for your business needs.</span></span> <span data-ttu-id="47be6-119">Se recomienda llevar a cabo una programación periódica de copias de seguridad, que se puede complementar con copias de seguridad adicionales cuando exista una actualización sustancial.</span><span class="sxs-lookup"><span data-stu-id="47be6-119">We recommend a regular backup schedule, which you can supplement with an additional backup after a substantial update.</span></span>|  
|[<span data-ttu-id="47be6-120">model</span><span class="sxs-lookup"><span data-stu-id="47be6-120">model</span></span>](../databases/model-database.md)|<span data-ttu-id="47be6-121">Plantilla para todas las bases de datos creadas en la instancia de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="47be6-121">The template for all databases that are created on the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|<span data-ttu-id="47be6-122">Sí</span><span class="sxs-lookup"><span data-stu-id="47be6-122">Yes</span></span>|<span data-ttu-id="47be6-123">Configurable por el usuario<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="47be6-123">User configurable<sup>1</sup></span></span>|<span data-ttu-id="47be6-124">Haga una copia de seguridad de **model** solo cuando sea necesario para sus necesidades empresariales: por ejemplo, después de personalizar las opciones de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="47be6-124">Back up **model** only when necessary for your business needs; for example, immediately after customizing its database options.</span></span><br /><br /> <span data-ttu-id="47be6-125">**Procedimiento recomendado:** es aconsejable crear copias de seguridad completas de base de datos de **model**, solo cuando sea necesario.</span><span class="sxs-lookup"><span data-stu-id="47be6-125">**Best practice:** We recommend that you create only full database backups of **model**, as required.</span></span> <span data-ttu-id="47be6-126">Puesto que **model** es de pequeño tamaño y no suele cambiar, no es necesario realizar copia de seguridad del registro.</span><span class="sxs-lookup"><span data-stu-id="47be6-126">Because **model** is small and rarely changes, backing up the log is unnecessary.</span></span>|  
|[<span data-ttu-id="47be6-127">msdb</span><span class="sxs-lookup"><span data-stu-id="47be6-127">msdb</span></span>](../databases/msdb-database.md)|<span data-ttu-id="47be6-128">La base de datos usada por el Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] para programar alertas y trabajos y para registrar operadores.</span><span class="sxs-lookup"><span data-stu-id="47be6-128">The database used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent for scheduling alerts and jobs, and for recording operators.</span></span> <span data-ttu-id="47be6-129">**msdb** también contiene tablas de historial y tablas de historial de copias de seguridad y restauración.</span><span class="sxs-lookup"><span data-stu-id="47be6-129">**msdb** also contains history tables such as the backup and restore history tables.</span></span>|<span data-ttu-id="47be6-130">Sí</span><span class="sxs-lookup"><span data-stu-id="47be6-130">Yes</span></span>|<span data-ttu-id="47be6-131">Simple (valor predeterminado)</span><span class="sxs-lookup"><span data-stu-id="47be6-131">Simple (default)</span></span>|<span data-ttu-id="47be6-132">Realice copias de seguridad de la base de datos **msdb** cuando se actualice.</span><span class="sxs-lookup"><span data-stu-id="47be6-132">Back up **msdb** whenever it is updated.</span></span>|  
|<span data-ttu-id="47be6-133">[Resource](../databases/resource-database.md) (RDB)</span><span class="sxs-lookup"><span data-stu-id="47be6-133">[Resource](../databases/resource-database.md) (RDB)</span></span>|<span data-ttu-id="47be6-134">Base de datos de solo lectura que contiene copias de todos los objetos del sistema que se incluyen con [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="47be6-134">A read-only database that contains copies of all system objects that ship with [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|<span data-ttu-id="47be6-135">No</span><span class="sxs-lookup"><span data-stu-id="47be6-135">No</span></span>|-|<span data-ttu-id="47be6-136">La base de datos **Resource** se encuentra en el archivo mssqlsystemresource.mdf, que solo contiene código.</span><span class="sxs-lookup"><span data-stu-id="47be6-136">The **Resource** database resides in the mssqlsystemresource.mdf file, which contains only code.</span></span> <span data-ttu-id="47be6-137">Por lo tanto, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] no puede hacer una copia de seguridad de la base de datos **Resource** .</span><span class="sxs-lookup"><span data-stu-id="47be6-137">Therefore, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot back up the **Resource** database.</span></span><br /><br /> <span data-ttu-id="47be6-138">Nota: Puede realizar una copia de seguridad basada en archivos o basada en disco del archivo mssqlsystemresource.mdf si lo trata como si fuese binario (.exe), en lugar de un archivo de base de datos.</span><span class="sxs-lookup"><span data-stu-id="47be6-138">Note: You can perform a file-based or a disk-based backup on the mssqlsystemresource.mdf file by treating the file as if it were a binary (.exe) file, instead of a database file.</span></span> <span data-ttu-id="47be6-139">No obstante, no puede utilizar la restauración de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en las copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="47be6-139">But you cannot use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] restore on the backups.</span></span> <span data-ttu-id="47be6-140">La restauración de una copia de seguridad de mssqlsystemresource.mdf solo se puede hacer de forma manual y hay que tener cuidado de no sobrescribir la base de datos **Resource** actual con una versión obsoleta o potencialmente insegura.</span><span class="sxs-lookup"><span data-stu-id="47be6-140">Restoring a backup copy of mssqlsystemresource.mdf can only be done manually, and you must be careful not to overwrite the current **Resource** database with an out-of-date or potentially insecure version.</span></span>|  
|[<span data-ttu-id="47be6-141">tempdb</span><span class="sxs-lookup"><span data-stu-id="47be6-141">tempdb</span></span>](../databases/tempdb-database.md)|<span data-ttu-id="47be6-142">Área de trabajo que contiene conjuntos de resultados temporales o intermedios.</span><span class="sxs-lookup"><span data-stu-id="47be6-142">A workspace for holding temporary or intermediate result sets.</span></span> <span data-ttu-id="47be6-143">Esta base de datos se vuelve a crear cada vez que se inicia una instancia de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="47be6-143">This database is re-created every time an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is started.</span></span> <span data-ttu-id="47be6-144">Cuando se cierra la instancia de servidor, los datos de la base de datos **tempdb** se eliminan de manera permanente.</span><span class="sxs-lookup"><span data-stu-id="47be6-144">When the server instance is shut down, any data in **tempdb** is deleted permanently.</span></span>|<span data-ttu-id="47be6-145">No</span><span class="sxs-lookup"><span data-stu-id="47be6-145">No</span></span>|<span data-ttu-id="47be6-146">Simple</span><span class="sxs-lookup"><span data-stu-id="47be6-146">Simple</span></span>|<span data-ttu-id="47be6-147">No se pueden realizar copias de seguridad de la base de datos del sistema **tempdb** .</span><span class="sxs-lookup"><span data-stu-id="47be6-147">You cannot back up the **tempdb** system database.</span></span>|  
|[<span data-ttu-id="47be6-148">Configurar distribución</span><span class="sxs-lookup"><span data-stu-id="47be6-148">Configure Distribution</span></span>](../replication/configure-distribution.md)|<span data-ttu-id="47be6-149">Base de datos que solo existe si el servidor está configurado como un distribuidor de replicación.</span><span class="sxs-lookup"><span data-stu-id="47be6-149">A database that exists only if the server is configured as a replication Distributor.</span></span> <span data-ttu-id="47be6-150">En esta base de datos se almacenan metadatos y datos del historial de todos los tipos de replicación y transacciones de replicación transaccional.</span><span class="sxs-lookup"><span data-stu-id="47be6-150">This database stores metadata and history data for all types of replication, and transactions for transactional replication.</span></span>|<span data-ttu-id="47be6-151">Sí</span><span class="sxs-lookup"><span data-stu-id="47be6-151">Yes</span></span>|<span data-ttu-id="47be6-152">Simple</span><span class="sxs-lookup"><span data-stu-id="47be6-152">Simple</span></span>|<span data-ttu-id="47be6-153">Para obtener más información sobre cuándo realizar copias de seguridad de la base de datos **distribution** , vea [Hacer copias de seguridad y restaurar bases de datos replicadas](../replication/administration/back-up-and-restore-replicated-databases.md).</span><span class="sxs-lookup"><span data-stu-id="47be6-153">For information about when to back up the **distribution** database, see [Back Up and Restore Replicated Databases](../replication/administration/back-up-and-restore-replicated-databases.md).</span></span>|  
  
 <span data-ttu-id="47be6-154"><sup>1</sup> para obtener información sobre el modelo de recuperación actual del modelo, vea [ver o cambiar el modelo de recuperación de una base de datos &#40;SQL Server&#41;](view-or-change-the-recovery-model-of-a-database-sql-server.md) o [sys. Databases &#40;&#41;de Transact-SQL ](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="47be6-154"><sup>1</sup> To learn the current recovery model of the model, see [View or Change the Recovery Model of a Database &#40;SQL Server&#41;](view-or-change-the-recovery-model-of-a-database-sql-server.md) or [sys.databases &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql).</span></span>  
  
## <a name="limitations-on-restoring-system-databases"></a><span data-ttu-id="47be6-155">Limitaciones sobre la restauración de las bases de datos del sistema</span><span class="sxs-lookup"><span data-stu-id="47be6-155">Limitations on Restoring System Databases</span></span>  
  
-   <span data-ttu-id="47be6-156">Las bases de datos del sistema solo se pueden restaurar a partir de copias de seguridad creadas en la versión de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en que se ejecuta actualmente la instancia de servidor.</span><span class="sxs-lookup"><span data-stu-id="47be6-156">System databases can be restored only from backups that are created on the version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that the server instance is currently running.</span></span> <span data-ttu-id="47be6-157">Por ejemplo, para restaurar una base de datos del sistema en una instancia de servidor que se ejecuta en [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP1.</span><span class="sxs-lookup"><span data-stu-id="47be6-157">For example, to restore a system database on a server instance that is running on [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP1.</span></span>  
  
-   <span data-ttu-id="47be6-158">Para restaurar una base de datos, la instancia de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] debe estar ejecutándose.</span><span class="sxs-lookup"><span data-stu-id="47be6-158">To restore any database, the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must be running.</span></span> <span data-ttu-id="47be6-159">El inicio de una instancia de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] requiere el acceso a la base de datos **maestra** y la posibilidad de utilizarla al menos parcialmente.</span><span class="sxs-lookup"><span data-stu-id="47be6-159">Startup of an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] requires that the **master** database is accessible and at least partly usable.</span></span> <span data-ttu-id="47be6-160">Si la base de datos **maestra** está inutilizable, puede devolverla a un estado válido de dos formas:</span><span class="sxs-lookup"><span data-stu-id="47be6-160">If **master** becomes unusable, you can return the database to a usable state in either of the following ways:</span></span>  
  
    -   <span data-ttu-id="47be6-161">Restaure la base de datos **maestra** desde una copia de seguridad de la base de datos actual.</span><span class="sxs-lookup"><span data-stu-id="47be6-161">Restore **master** from a current database backup.</span></span>  
  
         <span data-ttu-id="47be6-162">Si puede iniciar la instancia de servidor, debería poder restaurar la base de datos **maestra** desde una copia de seguridad completa de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="47be6-162">If you can start the server instance, you should be able to restore **master** from a full database backup.</span></span>  
  
    -   <span data-ttu-id="47be6-163">Vuelva a generar la base de datos **maestra** completamente.</span><span class="sxs-lookup"><span data-stu-id="47be6-163">Rebuild **master** completely.</span></span>  
  
         <span data-ttu-id="47be6-164">Si no puede iniciar **a causa de daños graves en la base de datos** maestra [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], deberá volver a generar la base de datos **maestra**.</span><span class="sxs-lookup"><span data-stu-id="47be6-164">If severe damage to **master** prevents you from starting [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you must rebuild **master**.</span></span> <span data-ttu-id="47be6-165">Para obtener más información, vea [Volver a generar bases de datos del sistema](../databases/system-databases.md).</span><span class="sxs-lookup"><span data-stu-id="47be6-165">For more information, see [Rebuild System Databases](../databases/system-databases.md).</span></span>  
  
        > [!IMPORTANT]  
        >  <span data-ttu-id="47be6-166">Al recompilar la base de datos **maestra** , se recompilan todas las bases de datos del sistema.</span><span class="sxs-lookup"><span data-stu-id="47be6-166">Rebuilding **master** rebuilds all of the system databases.</span></span>  
  
-   <span data-ttu-id="47be6-167">En algunas circunstancias, los problemas para recuperar la base de datos modelo pueden requerir la recompilación de las bases de datos del sistema o el reemplazo de los archivos mdf y ldf para la base de datos modelo.</span><span class="sxs-lookup"><span data-stu-id="47be6-167">Under some circumstances, problems recovering the model database may require rebuilding the system databases or replacing the mdf and ldf files for the model database.</span></span> <span data-ttu-id="47be6-168">Para obtener más información, vea [Volver a generar bases de datos del sistema](../databases/system-databases.md).</span><span class="sxs-lookup"><span data-stu-id="47be6-168">For more information, see [Rebuild System Databases](../databases/system-databases.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="47be6-169">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="47be6-169">Related Tasks</span></span>  
  
-   [<span data-ttu-id="47be6-170">Crear una copia de seguridad completa de base de datos &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="47be6-170">Create a Full Database Backup &#40;SQL Server&#41;</span></span>](create-a-full-database-backup-sql-server.md)  
  
-   [<span data-ttu-id="47be6-171">Restauraciones de base de datos completas &#40;modelo de recuperación simple&#41;</span><span class="sxs-lookup"><span data-stu-id="47be6-171">Complete Database Restores &#40;Simple Recovery Model&#41;</span></span>](complete-database-restores-simple-recovery-model.md)  
  
-   [<span data-ttu-id="47be6-172">Restaurar la base de datos maestra &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="47be6-172">Restore the master Database &#40;Transact-SQL&#41;</span></span>](restore-the-master-database-transact-sql.md)  
  
-   [<span data-ttu-id="47be6-173">Ver o cambiar el modelo de recuperación de una base de datos &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="47be6-173">View or Change the Recovery Model of a Database &#40;SQL Server&#41;</span></span>](view-or-change-the-recovery-model-of-a-database-sql-server.md)  
  
-   [<span data-ttu-id="47be6-174">Mover bases de datos del sistema</span><span class="sxs-lookup"><span data-stu-id="47be6-174">Move System Databases</span></span>](../databases/move-system-databases.md)  
  
## <a name="see-also"></a><span data-ttu-id="47be6-175">Consulte también</span><span class="sxs-lookup"><span data-stu-id="47be6-175">See Also</span></span>  
 <span data-ttu-id="47be6-176">[Base de datos de distribución](../../relational-databases/replication/distribution-database.md) </span><span class="sxs-lookup"><span data-stu-id="47be6-176">[Distribution Database](../../relational-databases/replication/distribution-database.md) </span></span>  
 <span data-ttu-id="47be6-177">[Base de datos maestra](../databases/master-database.md) </span><span class="sxs-lookup"><span data-stu-id="47be6-177">[master Database](../databases/master-database.md) </span></span>  
 <span data-ttu-id="47be6-178">[Base de datos msdb](../databases/msdb-database.md) </span><span class="sxs-lookup"><span data-stu-id="47be6-178">[msdb Database](../databases/msdb-database.md) </span></span>  
 <span data-ttu-id="47be6-179">[Base de datos model](../databases/model-database.md) </span><span class="sxs-lookup"><span data-stu-id="47be6-179">[model Database](../databases/model-database.md) </span></span>  
 <span data-ttu-id="47be6-180">[Base de datos Resource](../databases/resource-database.md) </span><span class="sxs-lookup"><span data-stu-id="47be6-180">[Resource Database](../databases/resource-database.md) </span></span>  
 [<span data-ttu-id="47be6-181">Base de datos tempdb</span><span class="sxs-lookup"><span data-stu-id="47be6-181">tempdb Database</span></span>](../databases/tempdb-database.md)  
  
  
