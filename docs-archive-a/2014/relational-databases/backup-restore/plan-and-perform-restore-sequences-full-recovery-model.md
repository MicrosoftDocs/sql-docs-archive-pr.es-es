---
title: Planeación y realización de secuencias de restauración (modelo de recuperación completa) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- restore sequences [SQL Server], planning for
- full recovery model [SQL Server], planning restore sequences
ms.assetid: 9cbefaf8-d2b6-41c9-83fc-b3807a841fe2
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 85558c0a6361837b5645b9fc38ad040254265d72
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87675472"
---
# <a name="plan-and-perform-restore-sequences-full-recovery-model"></a><span data-ttu-id="fe129-102">Planear y realizar secuencias de restauración (modelo de recuperación completa)</span><span class="sxs-lookup"><span data-stu-id="fe129-102">Plan and Perform Restore Sequences (Full Recovery Model)</span></span>
  <span data-ttu-id="fe129-103">En este tema se explica cómo planear y realizar una secuencia de restauración para bases de datos de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] que usa normalmente el modelo de recuperación completa.</span><span class="sxs-lookup"><span data-stu-id="fe129-103">This topic explains how to plan and perform a restore sequence for a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases that ordinarily uses the full recovery model.</span></span> <span data-ttu-id="fe129-104">Una *secuencia de restauración* es una secuencia formada por una o varias instrucciones [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="fe129-104">A *restore sequence* is a sequence of one or more [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) statements.</span></span> <span data-ttu-id="fe129-105">Por lo general, una secuencia de restauración inicializa el contenido de la base de datos, archivos y/o páginas que se van a restaurar (la fase de copia de datos), pone al día las transacciones registradas (fase de rehacer) y revierte las transacciones no confirmadas (fase de deshacer).</span><span class="sxs-lookup"><span data-stu-id="fe129-105">Typically, a restore sequences initializes the contents of the database, files, and/or pages being restored (the data-copy phase), rolls forward logged transactions (the redo phase), and rolls back uncommitted transactions (the undo phase).</span></span>  
  
 <span data-ttu-id="fe129-106">En los casos más sencillos, la secuencia de restauración solo requiere una copia de seguridad completa de la base de datos, una copia de seguridad diferencial de la base de datos y las copias de seguridad de registros subsiguientes.</span><span class="sxs-lookup"><span data-stu-id="fe129-106">In simple cases, a restore sequence requires only a full database backup, a differential database backup, and the subsequent log backups.</span></span> <span data-ttu-id="fe129-107">En estos casos, la creación de una secuencia de restauración correcta es fácil.</span><span class="sxs-lookup"><span data-stu-id="fe129-107">In these cases, constructing a correct restore sequence is easy.</span></span> <span data-ttu-id="fe129-108">Por ejemplo, para restaurar una base de datos completa al punto de error, empiece por hacer una copia de seguridad del registro de transacciones activo (el *tail* del registro).</span><span class="sxs-lookup"><span data-stu-id="fe129-108">For example, to restore a whole database to the point of a failure, start by backing up the active transaction log (the *tail* of the log).</span></span> <span data-ttu-id="fe129-109">A continuación, restaure la copia de seguridad más reciente de la base de datos completa, la copia de seguridad diferencial más reciente (si la hay) y todas las copias de seguridad de registros subsiguientes en el orden en que se realizaron.</span><span class="sxs-lookup"><span data-stu-id="fe129-109">Then, restore the most recent full database backup, the most recent differential backup (if any), and all subsequent log backups in the order in which they were taken.</span></span>  
  
 <span data-ttu-id="fe129-110">En casos más complejos, la creación de un flujo de restauración correcta puede ser un proceso complejo.</span><span class="sxs-lookup"><span data-stu-id="fe129-110">In more complex cases, constructing a correct restore sequence can be a complex process.</span></span> <span data-ttu-id="fe129-111">Por ejemplo, una secuencia de restauración podría requerir varias copias de seguridad de archivos o la restauración de los datos a un momento dado.</span><span class="sxs-lookup"><span data-stu-id="fe129-111">For example, a restore sequence might require multiple file backups or restoring data to a specific point in time.</span></span> <span data-ttu-id="fe129-112">En casos muy complejos, podría ser necesario recorrer una ruta de recuperación bifurcada que abarque una o varias bifurcaciones de recuperación.</span><span class="sxs-lookup"><span data-stu-id="fe129-112">In very complex cases, you might even have to traverse a forked recovery path that spans one or more recovery forks.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="fe129-113">Una *ruta de recuperación* es la secuencia de copias de seguridad de datos y de registros que sitúan la base de datos en un momento dado (denominado punto de recuperación).</span><span class="sxs-lookup"><span data-stu-id="fe129-113">A *recovery path* is the sequence of data and log backups that have brought a database to a particular point in time (known as a recovery point).</span></span> <span data-ttu-id="fe129-114">Una ruta de recuperación es un conjunto específico de transformaciones que han hecho evolucionar la base de datos a lo largo del tiempo manteniendo su coherencia.</span><span class="sxs-lookup"><span data-stu-id="fe129-114">A recovery path is a specific set of transformations that have evolved the database over time, yet have maintained the consistency of the database.</span></span> <span data-ttu-id="fe129-115">Una ruta de recuperación describe una serie de LSN desde un punto de inicio (LSN o GUID) hasta un extremo (LSN o GUID).</span><span class="sxs-lookup"><span data-stu-id="fe129-115">A recovery path describes a range of LSNs from a start point (LSN,GUID) to an end point (LSN,GUID).</span></span> <span data-ttu-id="fe129-116">La serie de LSN de una ruta de recuperación puede incluir una o varias ramas de recuperación desde el principio hasta el final.</span><span class="sxs-lookup"><span data-stu-id="fe129-116">The range of LSNs in a recovery path can traverse one or more recovery branches from start to end.</span></span>  
  
## <a name="to-plan-a-restore-sequence"></a><span data-ttu-id="fe129-117">Para planear una secuencia de restauración</span><span class="sxs-lookup"><span data-stu-id="fe129-117">To Plan a Restore Sequence</span></span>  
 <span data-ttu-id="fe129-118">Antes de iniciar una secuencia de restauración, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="fe129-118">Before you start a restore sequence, follow these steps:</span></span>  
  
1.  <span data-ttu-id="fe129-119">Cree una copia del final del registro de la base de datos, si puede.</span><span class="sxs-lookup"><span data-stu-id="fe129-119">Create a tail-log backup of the database, if you can.</span></span> <span data-ttu-id="fe129-120">Para obtener más información, vea [Copias del final del registro &#40;SQL Server&#41;](tail-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="fe129-120">For more information, see [Tail-Log Backups &#40;SQL Server&#41;](tail-log-backups-sql-server.md).</span></span>  
  
2.  <span data-ttu-id="fe129-121">Determine el punto de recuperación de destino.</span><span class="sxs-lookup"><span data-stu-id="fe129-121">Determine the target recovery point.</span></span>  
  
     <span data-ttu-id="fe129-122">El punto de recuperación de destino puede ser cualquier momento dado o cualquier marca de la copia de seguridad de un registro de transacciones.</span><span class="sxs-lookup"><span data-stu-id="fe129-122">The target recovery point can be any point in time or mark within a transaction log backup.</span></span> <span data-ttu-id="fe129-123">Para obtener más información, vea [Restaurar una base de datos de SQL Server a un momento dado &#40;modelo de recuperación completa&#41;](restore-a-sql-server-database-to-a-point-in-time-full-recovery-model.md) y [Usar transacciones marcadas para recuperar bases de datos relacionadas sistemáticamente &#40;modelo de recuperación completa&#41;](use-marked-transactions-to-recover-related-databases-consistently.md).</span><span class="sxs-lookup"><span data-stu-id="fe129-123">For more information, see [Restore a SQL Server Database to a Point in Time &#40;Full Recovery Model&#41;](restore-a-sql-server-database-to-a-point-in-time-full-recovery-model.md) or [Use Marked Transactions to Recover Related Databases Consistently &#40;Full Recovery Model&#41;](use-marked-transactions-to-recover-related-databases-consistently.md).</span></span>  
  
3.  <span data-ttu-id="fe129-124">Determine el tipo de restauración que desee realizar.</span><span class="sxs-lookup"><span data-stu-id="fe129-124">Determine the type of restore you want to perform.</span></span> <span data-ttu-id="fe129-125">Para obtener más información, vea [Información general sobre restauración y recuperación &#40;SQL Server&#41;](restore-and-recovery-overview-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="fe129-125">For more information, see [Restore and Recovery Overview &#40;SQL Server&#41;](restore-and-recovery-overview-sql-server.md).</span></span>  
  
4.  <span data-ttu-id="fe129-126">Identifique qué copias de seguridad son necesarias y asegúrese de que están disponibles los conjuntos de medios y los dispositivos de copia de seguridad necesarios.</span><span class="sxs-lookup"><span data-stu-id="fe129-126">Identify which backups you require and make sure that the necessary media sets and backup devices are available.</span></span> <span data-ttu-id="fe129-127">Para obtener más información, vea [ Dispositivos de copia de seguridad &#40;SQL Server&#41;](backup-devices-sql-server.md) y [Conjuntos de medios, familias de medios y conjuntos de copias de seguridad &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="fe129-127">For more information, see [Backup Devices &#40;SQL Server&#41;](backup-devices-sql-server.md) and [Media Sets, Media Families, and Backup Sets &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md).</span></span>  
  
## <a name="to-perform-a-restore-sequence"></a><span data-ttu-id="fe129-128">Para realizar una secuencia de restauración</span><span class="sxs-lookup"><span data-stu-id="fe129-128">To Perform a Restore Sequence</span></span>  
 <span data-ttu-id="fe129-129">Para llevar a cabo una secuencia de restauración, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="fe129-129">To perform a restore sequence, follow these steps:</span></span>  
  
1.  <span data-ttu-id="fe129-130">Para empezar la secuencia, restaure una o varias copias de seguridad de los datos, como una copia de seguridad de la base de datos, una copia de seguridad parcial, o una o varias copias de seguridad de archivos.</span><span class="sxs-lookup"><span data-stu-id="fe129-130">To start the sequence, restore a one or more data backups, such as: a database backup, a partial backup, one or more file backups.</span></span>  
  
2.  <span data-ttu-id="fe129-131">Si lo desea, restaure las copias de seguridad diferenciales más recientes que se basan en estas copias de seguridad completas.</span><span class="sxs-lookup"><span data-stu-id="fe129-131">Optionally, restore the latest differential backups that are based on these full backups.</span></span>  
  
     <span data-ttu-id="fe129-132">Para cada copia de seguridad completa que piense restaurar, determine si es la base de alguna copia de seguridad diferencial.</span><span class="sxs-lookup"><span data-stu-id="fe129-132">For each full backup that you plan to restore, determine whether it is the base for any differential backups.</span></span> <span data-ttu-id="fe129-133">Si es así, restaure la copia de seguridad diferencial más reciente, si se puede.</span><span class="sxs-lookup"><span data-stu-id="fe129-133">If so, restore most recent differential backup, if you can.</span></span> <span data-ttu-id="fe129-134">Para obtener más información, vea [Copias de seguridad diferenciales &#40;SQL Server&#41;](differential-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="fe129-134">For more information, see [Differential Backups &#40;SQL Server&#41;](differential-backups-sql-server.md).</span></span>  
  
3.  <span data-ttu-id="fe129-135">Ponga al día la base de datos mediante la restauración de las copias de seguridad de registros en secuencia, terminando con la copia de seguridad que contenga el punto de recuperación.</span><span class="sxs-lookup"><span data-stu-id="fe129-135">Roll forward the database by restoring log backups in sequence, finishing with the backup that contains the recovery point.</span></span> <span data-ttu-id="fe129-136">Que tenga que aplicar todas las copias de seguridad de registros depende de la copia de seguridad de registros que contenga el punto de recuperación de destino, como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="fe129-136">Whether you have to apply all the log backups depends on what log backup contains the target recovery point, as follows:</span></span>  
  
    -   <span data-ttu-id="fe129-137">Si el punto de recuperación es el punto de un error, debe restaurar todas las copias de seguridad de registros creadas desde la última copia de seguridad (completa o diferencial) de datos restaurada.</span><span class="sxs-lookup"><span data-stu-id="fe129-137">If the recovery point is the point of a failure, you must restore every log backup that was created since the last data (full or differential) backup you restored.</span></span> <span data-ttu-id="fe129-138">Para obtener más información, vea [Aplicar copias de seguridad del registro de transacciones &#40;SQL Server&#41;](transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="fe129-138">For more information, see [Apply Transaction Log Backups &#40;SQL Server&#41;](transaction-log-backups-sql-server.md).</span></span>  
  
    -   <span data-ttu-id="fe129-139">Para las restauraciones a un momento dado, podría no necesitar las copias de seguridad de registros más recientes.</span><span class="sxs-lookup"><span data-stu-id="fe129-139">For a point-in-time restore, you might not require the most recent log backups.</span></span> <span data-ttu-id="fe129-140">Si usa [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], el Asesor para recuperación de base de datos se asegura de que solo estén seleccionadas las copias de seguridad necesarias para restaurar al momento que ha especificado.</span><span class="sxs-lookup"><span data-stu-id="fe129-140">If you use [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], the Database Recovery Advisor ensures that only backups that are required to restore to your specified point in time are selected.</span></span> <span data-ttu-id="fe129-141">Estas copias de seguridad componen el plan de restauraciones recomendado para la restauración a un momento dado.</span><span class="sxs-lookup"><span data-stu-id="fe129-141">These backups make up the recommended restore plan for your point-in-time restore.</span></span> <span data-ttu-id="fe129-142">Para obtener más información, vea [Restaurar una base de datos de SQL Server a un momento dado &#40;modelo de recuperación completa&#41;](restore-a-sql-server-database-to-a-point-in-time-full-recovery-model.md).</span><span class="sxs-lookup"><span data-stu-id="fe129-142">For more information, see [Restore a SQL Server Database to a Point in Time &#40;Full Recovery Model&#41;](restore-a-sql-server-database-to-a-point-in-time-full-recovery-model.md).</span></span>  
  
## <a name="restarting-a-restore-sequence"></a><span data-ttu-id="fe129-143">Reiniciar una secuencia de restauración</span><span class="sxs-lookup"><span data-stu-id="fe129-143">Restarting a Restore Sequence</span></span>  
 <span data-ttu-id="fe129-144">Si encuentra algún problema con el resultado de una secuencia de restauración, puede salir de ella y reiniciarla desde el principio.</span><span class="sxs-lookup"><span data-stu-id="fe129-144">If you encounter a problem with the outcome of a restore sequence, you can quit it and restart the restore sequence over from the start.</span></span> <span data-ttu-id="fe129-145">Por ejemplo, si accidentalmente restaura demasiadas copias de seguridad de registros y se supera el punto de recuperación deseado, debe reiniciar la secuencia de restauración hasta la copia de seguridad de registros que contenga el punto de recuperación de destino.</span><span class="sxs-lookup"><span data-stu-id="fe129-145">For example, if you accidentally restore too many log backups and overshoot the intended recovery point, you must restart the restore sequence up to log backup that contains the target recovery point.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fe129-146">Consulte también</span><span class="sxs-lookup"><span data-stu-id="fe129-146">See Also</span></span>  
 <span data-ttu-id="fe129-147">[Información general de copia de seguridad &#40;SQL Server&#41;](backup-overview-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="fe129-147">[Backup Overview &#40;SQL Server&#41;](backup-overview-sql-server.md) </span></span>  
 <span data-ttu-id="fe129-148">[Información general sobre restauración y recuperación &#40;SQL Server&#41;](restore-and-recovery-overview-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="fe129-148">[Restore and Recovery Overview &#40;SQL Server&#41;](restore-and-recovery-overview-sql-server.md) </span></span>  
 <span data-ttu-id="fe129-149">[Restauraciones de base de datos completas &#40;modelo de recuperación completa&#41;](complete-database-restores-full-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="fe129-149">[Complete Database Restores &#40;Full Recovery Model&#41;](complete-database-restores-full-recovery-model.md) </span></span>  
 <span data-ttu-id="fe129-150">[Restauración con conexión &#40;SQL Server&#41;](online-restore-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="fe129-150">[Online Restore &#40;SQL Server&#41;](online-restore-sql-server.md) </span></span>  
 <span data-ttu-id="fe129-151">[Restauraciones de archivos &#40;modelo de recuperación completa&#41;](file-restores-full-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="fe129-151">[File Restores &#40;Full Recovery Model&#41;](file-restores-full-recovery-model.md) </span></span>  
 <span data-ttu-id="fe129-152">[Restaurar páginas &#40;SQL Server&#41;](restore-pages-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="fe129-152">[Restore Pages &#40;SQL Server&#41;](restore-pages-sql-server.md) </span></span>  
 [<span data-ttu-id="fe129-153">Restauraciones por etapas &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="fe129-153">Piecemeal Restores &#40;SQL Server&#41;</span></span>](piecemeal-restores-sql-server.md)  
  
  
