---
title: Optimización del seguimiento de SQL | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- time [SQL Server], traces
- SQL Trace, performance
- traces [SQL Server], performance
- performance [SQL Server], trace
ms.assetid: 50944218-925f-4576-aec8-4379846d7681
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 831875218423bdb9106d7d84995af1e788da44db
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87663304"
---
# <a name="optimize-sql-trace"></a><span data-ttu-id="69260-102">Optimizar el seguimiento de SQL</span><span class="sxs-lookup"><span data-stu-id="69260-102">Optimize SQL Trace</span></span>
  <span data-ttu-id="69260-103">Aunque la ejecución de Seguimiento de SQL supone un costo de rendimiento porque utiliza recursos del sistema para recopilar datos, dicho costo se puede reducir al mínimo de muchas maneras.</span><span class="sxs-lookup"><span data-stu-id="69260-103">Although running SQL Trace incurs a performance cost because it uses system resources to gather data, you can do many things to minimize it.</span></span> <span data-ttu-id="69260-104">Para minimizar el costo de rendimiento que provoca un seguimiento, intente las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="69260-104">To minimize the performance cost incurred by a trace, try the following:</span></span>  
  
-   <span data-ttu-id="69260-105">Considere el uso del símbolo del sistema para ejecutar seguimientos.</span><span class="sxs-lookup"><span data-stu-id="69260-105">Consider using the command prompt to run traces.</span></span> <span data-ttu-id="69260-106">El uso de una interfaz gráfica de usuario afecta negativamente al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="69260-106">Using a graphical user interface hinders performance.</span></span> <span data-ttu-id="69260-107">Para obtener más información, vea [sp_trace_create &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-trace-create-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="69260-107">For more information, see [sp_trace_create &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-trace-create-transact-sql).</span></span>  
  
-   <span data-ttu-id="69260-108">Evite incluir eventos que tienen lugar con frecuencia.</span><span class="sxs-lookup"><span data-stu-id="69260-108">Avoid including events that occur frequently.</span></span> <span data-ttu-id="69260-109">Si es posible, ajuste el seguimiento con clases de eventos específicas y filtros.</span><span class="sxs-lookup"><span data-stu-id="69260-109">If possible, narrow your trace by means of specific event classes and filters.</span></span> <span data-ttu-id="69260-110">Si se recopilan menos eventos de seguimiento, serán necesarios menos recursos del sistema para admitir las trazas.</span><span class="sxs-lookup"><span data-stu-id="69260-110">If fewer trace events are gathered, fewer system resources are required to support tracing.</span></span>  
  
-   <span data-ttu-id="69260-111">Ajuste el seguimiento para que solo recopile eventos que proporcionen datos relevantes.</span><span class="sxs-lookup"><span data-stu-id="69260-111">Focus the trace to collect only events that provide relevant data.</span></span> <span data-ttu-id="69260-112">Por ejemplo, si el seguimiento va a identificar interbloqueos, incluya la clase de evento **Lock:Deadlock** , pero no la clase **Lock:Acquired** .</span><span class="sxs-lookup"><span data-stu-id="69260-112">For example, if your trace is to identify deadlocks, include the **Lock:Deadlock** event class, but not the **Lock:Acquired** event class.</span></span> <span data-ttu-id="69260-113">Si incluye ambas clases de eventos, el seguimiento debe responder a todos los bloqueos que se adquieren y el costo de ejecución se duplica.</span><span class="sxs-lookup"><span data-stu-id="69260-113">If you include both event classes, the trace has to respond to every lock that is acquired, and your execution cost is doubled.</span></span>  
  
-   <span data-ttu-id="69260-114">Evite recopilar datos duplicados.</span><span class="sxs-lookup"><span data-stu-id="69260-114">Avoid collecting duplicate data.</span></span> <span data-ttu-id="69260-115">Por ejemplo, si recopila datos de **SQL:BatchStarted** y **SQL:BatchCompleted**, puede minimizar el tamaño del conjunto de resultados recopilando datos de texto únicamente para la clase de evento **SQL:BatchStarted** .</span><span class="sxs-lookup"><span data-stu-id="69260-115">For example, if you collect **SQL:BatchStarted** and the **SQL:BatchCompleted**, you can minimize the size of the results set by collecting text data for the **SQL:BatchStarted** event class only.</span></span>  
  
-   <span data-ttu-id="69260-116">Utilice filtros en la definición del seguimiento.</span><span class="sxs-lookup"><span data-stu-id="69260-116">Use filters in the trace definition.</span></span> <span data-ttu-id="69260-117">Por ejemplo, si sabe que determinado usuario obtiene un rendimiento lento durante las consultas ad hoc, cree un filtro por **LoginName**.</span><span class="sxs-lookup"><span data-stu-id="69260-117">For example, if you know that a certain user is reporting slow performance during ad hoc queries, create a filter on **LoginName**.</span></span> <span data-ttu-id="69260-118">Configure el filtro para incluir solo los eventos en los que **LoginName** coincida con el nombre de usuario.</span><span class="sxs-lookup"><span data-stu-id="69260-118">Set the filter to include only events where the **LoginName** matches that user name.</span></span>  
  
 <span data-ttu-id="69260-119">Si debe ejecutar un seguimiento para eventos que afectan significativamente al rendimiento, considere la posibilidad de limitar el impacto en el servidor mediante uno de los siguientes métodos:</span><span class="sxs-lookup"><span data-stu-id="69260-119">If you need to run a trace for events that create a significant impact on performance, consider limiting the performance impact on the server by using one of the following methods:</span></span>  
  
-   <span data-ttu-id="69260-120">Ejecute los seguimientos durante períodos más breves.</span><span class="sxs-lookup"><span data-stu-id="69260-120">Run traces for shorter periods of time.</span></span> <span data-ttu-id="69260-121">Puede controlar el tiempo de ejecución de un seguimiento habilitando una hora de detención.</span><span class="sxs-lookup"><span data-stu-id="69260-121">You can control the length of time that a trace runs by enabling a stop time.</span></span> <span data-ttu-id="69260-122">Esto es especialmente importante si no puede limitar las clases de eventos o filtrar un evento.</span><span class="sxs-lookup"><span data-stu-id="69260-122">This is especially important if you cannot limit the event classes or filter an event.</span></span> <span data-ttu-id="69260-123">La habilitación de una hora de detención asegura que la duración del costo de rendimiento no es indefinida.</span><span class="sxs-lookup"><span data-stu-id="69260-123">Enabling a stop time ensures that the performance incurred does not last indefinitely.</span></span>  
  
-   <span data-ttu-id="69260-124">Limite el tamaño de los resultados del seguimiento.</span><span class="sxs-lookup"><span data-stu-id="69260-124">Limit the size of the trace results.</span></span> <span data-ttu-id="69260-125">Puede limitar el tamaño de los resultados del seguimiento a un tamaño de archivo máximo.</span><span class="sxs-lookup"><span data-stu-id="69260-125">You can limit the size of the trace results to a maximum file size.</span></span> <span data-ttu-id="69260-126">Esta estrategia asegura que el costo de rendimiento se detiene cuando se alcanza el límite de tamaño del archivo (si no está habilitada la sustitución incremental de archivos).</span><span class="sxs-lookup"><span data-stu-id="69260-126">This strategy ensures that the performance cost stops when the file-size limit is reached (if file rollover is not enabled).</span></span>  
  
-   <span data-ttu-id="69260-127">Limite el número de eventos que se devuelven.</span><span class="sxs-lookup"><span data-stu-id="69260-127">Limit the number of events returned.</span></span> <span data-ttu-id="69260-128">Con [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] , puede limitar el número de eventos devueltos guardando el seguimiento en una tabla y configurando el número máximo de filas.</span><span class="sxs-lookup"><span data-stu-id="69260-128">With [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] you can limit the number of events returned by saving the trace to a table and setting the maximum number of rows.</span></span> <span data-ttu-id="69260-129">Los resultados del seguimiento siguen mostrándose en la pantalla de [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] tras alcanzar el número máximo de filas, pero se elimina el costo de registrar los resultados en una tabla.</span><span class="sxs-lookup"><span data-stu-id="69260-129">Trace results are still returned to the [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] screen after the maximum number of rows has been reached, but the cost of recording the results to a table is eliminated.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="69260-130">Consulte también</span><span class="sxs-lookup"><span data-stu-id="69260-130">See Also</span></span>  
 [<span data-ttu-id="69260-131">Filtrar un seguimiento</span><span class="sxs-lookup"><span data-stu-id="69260-131">Filter a Trace</span></span>](../sql-trace/filter-a-trace.md)  
  
  
