---
title: Proteger informes y recursos | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- security [Reporting Services], reports
- security [Reporting Services], resources
- reports [Reporting Services], security
- confidential reports [Reporting Services]
- resources [Reporting Services], security
ms.assetid: 63cd55c7-fd2a-49e3-a3f8-59eb1a1c6e83
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 6c8eef86da2fe9c7dcc92488a08516a73aa37e92
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87673468"
---
# <a name="secure-reports-and-resources"></a><span data-ttu-id="66d17-102">Proteger informes y recursos</span><span class="sxs-lookup"><span data-stu-id="66d17-102">Secure Reports and Resources</span></span>
  <span data-ttu-id="66d17-103">Puede establecer la seguridad para informes y recursos individuales a fin de controlar el grado de acceso de los usuarios a estos elementos.</span><span class="sxs-lookup"><span data-stu-id="66d17-103">You can set security for individual reports and resources to control the degree of access that users have to these items.</span></span> <span data-ttu-id="66d17-104">De manera predeterminada, solo los usuarios que pertenezcan al grupo integrado **Administradores** pueden ejecutar informes, ver recursos, modificar propiedades y eliminar elementos.</span><span class="sxs-lookup"><span data-stu-id="66d17-104">By default, only users who are members of the **Administrators** built-in group can run reports, view resources, modify properties, and delete the items.</span></span> <span data-ttu-id="66d17-105">Para los demás usuarios se deben crear asignaciones de roles que concedan acceso a un informe o recurso.</span><span class="sxs-lookup"><span data-stu-id="66d17-105">All other users must have role assignments created for them that allow access to a report or resource.</span></span>  
  
## <a name="role-based-access-to-reports-and-resources"></a><span data-ttu-id="66d17-106">Acceso a informes y recursos basado en roles</span><span class="sxs-lookup"><span data-stu-id="66d17-106">Role-based Access to Reports and Resources</span></span>  
 <span data-ttu-id="66d17-107">Para concecer acceso a informes y recursos, puede permitir que los usuarios hereden las asignaciones de roles existentes en una carpeta primaria o crear una nueva asignación de rol en el propio elemento.</span><span class="sxs-lookup"><span data-stu-id="66d17-107">To grant access to reports and resources, you can allow users to inherit existing role assignments from a parent folder or create a new role assignment on the item itself.</span></span>  
  
 <span data-ttu-id="66d17-108">Es posible que en la mayoría de los casos se usen los permisos heredados de una carpeta primaria.</span><span class="sxs-lookup"><span data-stu-id="66d17-108">In most cases, you will probably want to use the permissions that are inherited from a parent folder.</span></span> <span data-ttu-id="66d17-109">Establezca la seguridad en un informe o recurso individual solamente si desea ocultar el informe o el recurso a los usuarios que no necesitan saber que existe, o para aumentar el nivel de acceso para un informe o elemento.</span><span class="sxs-lookup"><span data-stu-id="66d17-109">Setting security on individual reports and resources should only be necessary if you want to hide the report or resource from users who do not need to know that the report or resource exists, or to increase the level of access for a report or item.</span></span> <span data-ttu-id="66d17-110">Estos objetivos no se excluyen mutuamente.</span><span class="sxs-lookup"><span data-stu-id="66d17-110">These objectives are not mutually exclusive.</span></span> <span data-ttu-id="66d17-111">Puede restringir el acceso a un informe a un conjunto más reducido de usuarios y proporcionar a todos o a parte de ellos privilegios adicionales para administrar el informe.</span><span class="sxs-lookup"><span data-stu-id="66d17-111">You can restrict access to a report to a smaller set of users, and provide all or some of them with additional privileges to manage the report.</span></span>  
  
 <span data-ttu-id="66d17-112">Es posible que necesite crear varias asignaciones de roles para lograr sus objetivos.</span><span class="sxs-lookup"><span data-stu-id="66d17-112">You may need to create multiple role assignments to achieve your objectives.</span></span> <span data-ttu-id="66d17-113">Por ejemplo, supongamos que tiene un informe que desea poner a disposición de los usuarios Ana y Pablo, y del grupo Directores de recursos humanos.</span><span class="sxs-lookup"><span data-stu-id="66d17-113">For example, suppose you have a report that you want to make accessible to two users, Ann and Fernando, and to the Human Resource Managers group.</span></span> <span data-ttu-id="66d17-114">Ana y Pablo deben ser capaces de administrar el informe, pero los miembros de Directores de recursos humanos solo necesitan ejecutarlo.</span><span class="sxs-lookup"><span data-stu-id="66d17-114">Ann and Fernando must be able to manage the report, but the Human Resource Managers members need only to run it.</span></span> <span data-ttu-id="66d17-115">Para adaptarse a todos estos usuarios, deberá crear tres asignaciones de roles diferentes: una para convertir a Ana en administradora de contenido del informe, otra para convertir a Pablo en administrador de contenido del informe y una última para permitir tareas de solo vista al grupo Directores de recursos humanos.</span><span class="sxs-lookup"><span data-stu-id="66d17-115">To accommodate all of these users, you would create three separate role assignments: one to make Ann a content manager of the report, one to make Fernando a content manager of the report, and one to support view-only tasks for the Human Resource Managers group.</span></span>  
  
 <span data-ttu-id="66d17-116">Una vez que haya establecido la seguridad para un informe o recurso, esta configuración permanecerá con el elemento incluso si lo mueve a otra ubicación.</span><span class="sxs-lookup"><span data-stu-id="66d17-116">Once you set security on a report or resource, those settings stay with the item even if you move the item to a new location.</span></span> <span data-ttu-id="66d17-117">Por ejemplo, si mueve un informe al que solo varias personas están autorizadas a tener acceso, el informe continúa estando disponible solamente para esos usuarios, incluso si lo mueve a una carpeta con una directiva de seguridad relativamente abierta.</span><span class="sxs-lookup"><span data-stu-id="66d17-117">For example, if you move a report that only a few people are authorized to access, the report continues to be available to just those users even if you move it to a folder that has a relatively open security policy.</span></span>  
  
## <a name="mitigating-html-injection-attacks-in-a-published-report-or-document"></a><span data-ttu-id="66d17-118">Mitigar los ataques por inyección de código HTML en un informe o documento publicado</span><span class="sxs-lookup"><span data-stu-id="66d17-118">Mitigating HTML Injection Attacks in a Published Report or Document</span></span>  
 <span data-ttu-id="66d17-119">En [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], los informes y recursos se procesan con la identidad de seguridad del usuario que ejecuta el informe.</span><span class="sxs-lookup"><span data-stu-id="66d17-119">In [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], reports and resources are processed under the security identity of the user who is running the report.</span></span> <span data-ttu-id="66d17-120">Si el informe contiene expresiones, script, elementos de informe personalizados o ensamblados personalizados, el código se ejecuta con las credenciales del usuario.</span><span class="sxs-lookup"><span data-stu-id="66d17-120">If the report contains expressions, script, custom report items, or custom assemblies, the code runs under the user's credentials.</span></span> <span data-ttu-id="66d17-121">Si un recurso es un documento HTML que contiene script, éste se ejecutará cuando el usuario abra el documento en el servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="66d17-121">If a resource is an HTML document that contains script, the script will run when the user opens the document on the report server.</span></span> <span data-ttu-id="66d17-122">La posibilidad de ejecutar script o código en un informe es una característica relevante, pero conlleva ciertos riesgos.</span><span class="sxs-lookup"><span data-stu-id="66d17-122">The ability to run script or code within a report is a powerful feature that comes with a certain level of risk.</span></span> <span data-ttu-id="66d17-123">Si el código es malintencionado, el servidor de informes y el usuario que ejecuta el informe son vulnerables a los ataques.</span><span class="sxs-lookup"><span data-stu-id="66d17-123">If the code is malicious, the report server and the user who is running the report are vulnerable to attack.</span></span>  
  
 <span data-ttu-id="66d17-124">A la hora de conceder acceso a los informes y recursos que se procesan como HTML, es importante recordar que los informes se procesan con plena confianza y que puede enviarse al cliente script posiblemente malintencionado.</span><span class="sxs-lookup"><span data-stu-id="66d17-124">When granting access to reports and to resources that are processed as HTML, it is important to remember that reports are processed in full trust and that potentially malicious script might be sent to the client.</span></span> <span data-ttu-id="66d17-125">El cliente ejecutará el código HTML en el nivel de confianza que se haya configurado en el explorador.</span><span class="sxs-lookup"><span data-stu-id="66d17-125">Depending on browser settings, the client will execute the HTML at the level of trust that is specified in the browser.</span></span>  
  
 <span data-ttu-id="66d17-126">Para mitigar el riesgo de ejecutar script malintencionado, tome las siguientes precauciones:</span><span class="sxs-lookup"><span data-stu-id="66d17-126">You can mitigate the risk of running malicious script by taking the following precautions:</span></span>  
  
-   <span data-ttu-id="66d17-127">Sea selectivo a la hora de decidir quién puede publicar contenido en un servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="66d17-127">Be selective when deciding who can publish content to a report server.</span></span> <span data-ttu-id="66d17-128">Dado que existe la posibilidad de que se publique contenido malintencionado, debe limitar los usuarios que pueden publicar contenido a un pequeño número de usuarios de confianza.</span><span class="sxs-lookup"><span data-stu-id="66d17-128">Because the potential for publishing malicious content exists, you should limit users who can publish content to a small number of trusted users.</span></span>  
  
-   <span data-ttu-id="66d17-129">Todos los publicadores deben evitar publicar informes y recursos que procedan de fuentes desconocidas o que no sean de confianza.</span><span class="sxs-lookup"><span data-stu-id="66d17-129">All publishers should avoid publishing reports and resources that come from unknown or untrusted sources.</span></span> <span data-ttu-id="66d17-130">Si es necesario, abra el archivo en un editor de texto y compruebe si hay script y direcciones URL sospechosos.</span><span class="sxs-lookup"><span data-stu-id="66d17-130">If necessary, open the file in a text editor and look for suspicious script and URLs.</span></span>  
  
## <a name="report-parameters-and-script-injection"></a><span data-ttu-id="66d17-131">Parámetros de informe e inyección de script</span><span class="sxs-lookup"><span data-stu-id="66d17-131">Report Parameters and Script Injection</span></span>  
 <span data-ttu-id="66d17-132">Los parámetros de informe proporcionan la flexibilidad para todo el diseño y ejecución del informe.</span><span class="sxs-lookup"><span data-stu-id="66d17-132">Report Parameters provide flexibility for the overall report design and execution.</span></span> <span data-ttu-id="66d17-133">Sin embargo, esta misma flexibilidad puede, en algunos casos, ser usada para atraer ataques por señuelo.</span><span class="sxs-lookup"><span data-stu-id="66d17-133">However, this same flexibility can, in some cases be used by an attacker in luring attacks.</span></span> <span data-ttu-id="66d17-134">Para reducir el riesgo de ejecución accidental de scripts malintencionados, abra los informes representados exclusivamente desde orígenes de confianza.</span><span class="sxs-lookup"><span data-stu-id="66d17-134">To mitigate the risk of inadvertently running malicious scripts, only open rendered reports from trusted sources.</span></span> <span data-ttu-id="66d17-135">Se recomienda que considere el siguiente escenario que es un ataque potencial de inyección de script de representación HTML:</span><span class="sxs-lookup"><span data-stu-id="66d17-135">It is recommended you consider the following scenario that is a potential HTML Renderer script injection attack:</span></span>  
  
1.  <span data-ttu-id="66d17-136">Un informe contiene un cuadro de texto con la acción de hipervínculo establecida en el valor de un parámetro que podría contener texto malintencionado.</span><span class="sxs-lookup"><span data-stu-id="66d17-136">A report contains a text box with the hyperlink action set to the value of a parameter which could contain malicious text.</span></span>  
  
2.  <span data-ttu-id="66d17-137">El informe se publica en un servidor de informes o se hace disponible de cualquier otra forma de manera que el valor del parámetro del informe se puede controlar desde la URL de una página web.</span><span class="sxs-lookup"><span data-stu-id="66d17-137">The report is published to a report server or otherwise made available in such a way that the report parameter value can be controlled from the URL of a web page.</span></span>  
  
3.  <span data-ttu-id="66d17-138">Un atacante crea un vínculo a la página web o al servidor de informes que especifica el valor del parámetro con el formato "JavaScript: \<malicious script here> " y envía ese vínculo a alguien más en un ataque por señuelo.</span><span class="sxs-lookup"><span data-stu-id="66d17-138">An attacker creates a link to the web page or report server specifying the value of the parameter in the form "javascript:\<malicious script here>" and sends that link to someone else in a luring attack.</span></span>  
  
## <a name="mitigating-script-injection-attacks-in-a-hyperlink-in-a-published-report-or-document"></a><span data-ttu-id="66d17-139">Mitigar los ataques con inyección de scripts en hipervínculos en un informe publicado o documento</span><span class="sxs-lookup"><span data-stu-id="66d17-139">Mitigating Script Injection Attacks in a Hyperlink in a Published Report or Document</span></span>  
 <span data-ttu-id="66d17-140">Los informes pueden contener hipervínculos incrustados en el valor de la propiedad Action en un elemento de informe o parte de un elemento de informe.</span><span class="sxs-lookup"><span data-stu-id="66d17-140">Reports can contain embedded hyperlinks in the value of the Action property on a report item or part of a report item.</span></span> <span data-ttu-id="66d17-141">Los hipervínculos se pueden enlazar a datos que se recuperan de un origen de datos externo cuando se procesa el informe.</span><span class="sxs-lookup"><span data-stu-id="66d17-141">Hyperlinks can be bound to data that is retrieved from an external data source when the report is processed.</span></span> <span data-ttu-id="66d17-142">Si un usuario malintencionado modifica los datos subyacentes, el hipervínculo podría hacer peligroso el scripting.</span><span class="sxs-lookup"><span data-stu-id="66d17-142">If a malicious user modifies the underlying data, the hyperlink might be at risk for scripting exploits.</span></span> <span data-ttu-id="66d17-143">Si un usuario hace clic en el vínculo en el informe publicado o exportado, podrían ejecutarse scripts malintencionados.</span><span class="sxs-lookup"><span data-stu-id="66d17-143">If a user clicks the link in the published or exported report, malicious script could run.</span></span>  
  
 <span data-ttu-id="66d17-144">Para mitigar el riesgo de incluir vínculos en un informe que inadvertidamente ejecuten script malintencionado, enlace solo hipervínculos a datos de fuentes de confianza.</span><span class="sxs-lookup"><span data-stu-id="66d17-144">To mitigate the risk of including links in a report that inadvertently run malicious scripts, only bind hyperlinks to data from trusted sources.</span></span> <span data-ttu-id="66d17-145">Compruebe que los datos de los resultados de la consulta y las expresiones que enlazan los datos con los hipervínculos no crean vínculos de los que se pueda sacar provecho negativo.</span><span class="sxs-lookup"><span data-stu-id="66d17-145">Verify that data from the query results and the expressions that bind data to hyperlinks do not create links that can be exploited.</span></span> <span data-ttu-id="66d17-146">Por ejemplo, no base un hipervínculo en una expresión que concatena los datos de varios campos de conjunto de datos.</span><span class="sxs-lookup"><span data-stu-id="66d17-146">For example, do not base a hyperlink on an expression that concatenates data from multiple dataset fields.</span></span> <span data-ttu-id="66d17-147">Si es necesario, vaya al informe y use "Ver origen" para comprobar scripts sospechosos y URLS.</span><span class="sxs-lookup"><span data-stu-id="66d17-147">If necessary, browse to the report and use "View Source" to check for suspicious scripts and URLs.</span></span>  
  
## <a name="mitigating-sql-injection-attacks-in-a-parameterized-report"></a><span data-ttu-id="66d17-148">Mitigar los ataques por inyección de código SQL en un informe con parámetros</span><span class="sxs-lookup"><span data-stu-id="66d17-148">Mitigating SQL Injection Attacks in a Parameterized Report</span></span>  
 <span data-ttu-id="66d17-149">En cualquier informe que incluya un parámetro de tipo `String`, utilice una lista de valores disponibles (también conocida como lista de valores válidos) y asegúrese de que los usuarios que ejecuten el informe solamente dispongan de los permisos necesarios para ver los datos del mismo.</span><span class="sxs-lookup"><span data-stu-id="66d17-149">In any report that includes a parameter of type `String`, be sure to use an available values list (also known as a valid values list) and ensure that any user running the report has only the permissions required to view the data in the report.</span></span> <span data-ttu-id="66d17-150">Cuando se define un parámetro de tipo `String`, el usuario ve un cuadro de texto que admite cualquier valor.</span><span class="sxs-lookup"><span data-stu-id="66d17-150">When you define a parameter of type `String`, the user is presented with a text box that can take any value.</span></span> <span data-ttu-id="66d17-151">Una lista de valores disponibles limita los valores que se pueden especificar.</span><span class="sxs-lookup"><span data-stu-id="66d17-151">An available values list limits the values that can be entered.</span></span> <span data-ttu-id="66d17-152">Si el parámetro de informe está asociado a un parámetro de consulta y no se utiliza una lista de valores disponibles, un usuario del informe podría escribir sintaxis SQL en el cuadro de texto y exponer el informe y el servidor a un ataque por inyección de código SQL.</span><span class="sxs-lookup"><span data-stu-id="66d17-152">If the report parameter is tied to a query parameter and you do not use an available values list, it is possible for a report user to type SQL syntax into the text box, potentially opening the report and your server to a SQL injection attack.</span></span> <span data-ttu-id="66d17-153">Si el usuario tiene permisos suficientes para ejecutar la nueva instrucción SQL, podría provocar resultados no deseados en el servidor.</span><span class="sxs-lookup"><span data-stu-id="66d17-153">If the user has sufficient permissions to execute the new SQL statement, it may produce unwanted results on the server.</span></span>  
  
 <span data-ttu-id="66d17-154">Si un parámetro de informe no está asociado a un parámetro de consulta y los valores de parámetro están incluidos en el informe, un usuario del informe podría escribir sintaxis de expresiones o una dirección URL en el valor de parámetro y representar el informe en Excel o HTML.</span><span class="sxs-lookup"><span data-stu-id="66d17-154">If a report parameter is not tied to a query parameter and the parameter values are included in the report, it is possible for a report user to type expression syntax or a URL into the parameter value and render the report to Excel or HTML.</span></span> <span data-ttu-id="66d17-155">Si, posteriormente, otro usuario visualiza el informe y hace clic en el contenido del parámetro representado, el usuario podría ejecutar accidentalmente el script o el vínculo malintencionados.</span><span class="sxs-lookup"><span data-stu-id="66d17-155">If another user then views the report and clicks the rendered parameter contents, the user may inadvertently execute the malicious script or link.</span></span>  
  
 <span data-ttu-id="66d17-156">Para reducir el riesgo de ejecución accidental de scripts malintencionados, abra los informes representados exclusivamente desde orígenes de confianza.</span><span class="sxs-lookup"><span data-stu-id="66d17-156">To mitigate the risk of inadvertently running malicious scripts, open rendered reports only from trusted sources.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="66d17-157">En versiones anteriores de la documentación, se incluía un ejemplo de cómo crear una consulta dinámica como una expresión.</span><span class="sxs-lookup"><span data-stu-id="66d17-157">In previous releases of the documentation, an example of creating a dynamic query as an expression was included.</span></span> <span data-ttu-id="66d17-158">Este tipo de consulta genera vulnerabilidad a los ataques por inyección de código SQL y, por lo tanto, no se recomienda.</span><span class="sxs-lookup"><span data-stu-id="66d17-158">This type of query creates a vulnerability to SQL injection attacks and therefore is not recommended.</span></span>  
  
## <a name="securing-confidential-reports"></a><span data-ttu-id="66d17-159">Proteger informes confidenciales</span><span class="sxs-lookup"><span data-stu-id="66d17-159">Securing Confidential Reports</span></span>  
 <span data-ttu-id="66d17-160">Los informes que contienen información confidencial deberían protegerse en el nivel de acceso a datos requiriendo que los usuarios proporcionen credenciales para tener acceso a datos confidenciales.</span><span class="sxs-lookup"><span data-stu-id="66d17-160">Reports that contain confidential information should be secured at the data-access level, by requiring users to provide credentials to access sensitive data.</span></span> <span data-ttu-id="66d17-161">Para más información, consulte [Especificar información de credenciales y conexión para los orígenes de datos de informes](../report-data/specify-credential-and-connection-information-for-report-data-sources.md).</span><span class="sxs-lookup"><span data-stu-id="66d17-161">For more information, see [Specify Credential and Connection Information for Report Data Sources](../report-data/specify-credential-and-connection-information-for-report-data-sources.md).</span></span> <span data-ttu-id="66d17-162">También puede proteger una carpeta para que no resulte accesible a usuarios no autorizados.</span><span class="sxs-lookup"><span data-stu-id="66d17-162">You can also secure a folder to make it inaccessible to unauthorized users.</span></span> <span data-ttu-id="66d17-163">Para obtener más información, vea [Proteger carpetas](secure-folders.md).</span><span class="sxs-lookup"><span data-stu-id="66d17-163">For more information, see [Secure Folders](secure-folders.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="66d17-164">Consulte también</span><span class="sxs-lookup"><span data-stu-id="66d17-164">See Also</span></span>  
 <span data-ttu-id="66d17-165">(create-and-manage-role-assignments.md)</span><span class="sxs-lookup"><span data-stu-id="66d17-165">(create-and-manage-role-assignments.md)</span></span>   
 <span data-ttu-id="66d17-166">[Configurar el acceso a Generador de informes](../report-server/configure-report-builder-access.md) </span><span class="sxs-lookup"><span data-stu-id="66d17-166">[Configure Report Builder Access](../report-server/configure-report-builder-access.md) </span></span>  
 <span data-ttu-id="66d17-167">[Conceder permisos en un servidor de informes en modo nativo](granting-permissions-on-a-native-mode-report-server.md) </span><span class="sxs-lookup"><span data-stu-id="66d17-167">[Granting Permissions on a Native Mode Report Server](granting-permissions-on-a-native-mode-report-server.md) </span></span>  
 <span data-ttu-id="66d17-168">[Proteger elementos de orígenes de datos compartidos](secure-shared-data-source-items.md) </span><span class="sxs-lookup"><span data-stu-id="66d17-168">[Secure Shared Data Source Items](secure-shared-data-source-items.md) </span></span>  
 [<span data-ttu-id="66d17-169">Almacenamiento de las credenciales en un origen de datos de Reporting Services</span><span class="sxs-lookup"><span data-stu-id="66d17-169">Store Credentials in a Reporting Services Data Source</span></span>](../report-data/store-credentials-in-a-reporting-services-data-source.md)  
  
  
