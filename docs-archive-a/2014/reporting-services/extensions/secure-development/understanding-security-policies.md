---
title: Descripción de las directivas de seguridad | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services
ms.topic: reference
helpviewer_keywords:
- code groups [Reporting Services]
- code access security [Reporting Services], security policies
- Execution permission set
- custom assemblies [Reporting Services], security
- permission sets [Reporting Services]
- expressions [Reporting Services], security
- evidence [Reporting Services]
- FullTrust permission set
- security policies [Reporting Services]
- named permission sets [Reporting Services]
ms.assetid: a9bf043a-139a-4929-9a58-244815323df0
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e03f2ca7aae75f692ba2c888d1fb6bd3f60fb4a4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87677432"
---
# <a name="understanding-security-policies"></a><span data-ttu-id="f1061-102">Descripción de las directivas de seguridad</span><span class="sxs-lookup"><span data-stu-id="f1061-102">Understanding Security Policies</span></span>
  <span data-ttu-id="f1061-103">Cualquier código ejecutado por un servidor de informes debe formar parte de una directiva de seguridad de acceso del código concreta.</span><span class="sxs-lookup"><span data-stu-id="f1061-103">Any code that is executed by a report server must be part of a specific code access security policy.</span></span> <span data-ttu-id="f1061-104">Estas directivas de seguridad constan de grupos de código que asignan evidencias a un conjunto de conjuntos de permisos con nombre.</span><span class="sxs-lookup"><span data-stu-id="f1061-104">These security policies consist of code groups that map evidence to a set of named permission sets.</span></span> <span data-ttu-id="f1061-105">Con frecuencia, los grupos de código están asociados a un conjunto de permisos con nombre que especifica los permisos que puede tener el código de ese grupo.</span><span class="sxs-lookup"><span data-stu-id="f1061-105">Often, code groups are associated with a named permission set that specifies the allowable permissions for code in that group.</span></span> <span data-ttu-id="f1061-106">El motor en tiempo de ejecución usa las evidencias proporcionadas por un host de confianza o por el cargador para determinar a qué grupos de código pertenece el código y, por tanto, qué permisos se deben conceder al código.</span><span class="sxs-lookup"><span data-stu-id="f1061-106">The runtime uses evidence provided by a trusted host or by the loader to determine which code groups the code belongs to and, therefore, which permissions to grant the code.</span></span> [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] <span data-ttu-id="f1061-107">cumple esta arquitectura de la directiva de seguridad como lo define Common Language Runtime (CLR) de [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f1061-107">adheres to this security policy architecture as defined by the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] common language runtime (CLR).</span></span> <span data-ttu-id="f1061-108">En las secciones siguientes se describen los distintos tipos de código de [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] y las reglas de directivas asociadas a los mismos.</span><span class="sxs-lookup"><span data-stu-id="f1061-108">The following sections describe the various types of code in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] and the policy rules associated with them.</span></span>  
  
## <a name="report-server-assemblies"></a><span data-ttu-id="f1061-109">Ensamblados del servidor de informes</span><span class="sxs-lookup"><span data-stu-id="f1061-109">Report Server Assemblies</span></span>  
 <span data-ttu-id="f1061-110">Los ensamblados del servidor de informes son aquellos que contienen código que forma parte del producto [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f1061-110">Report server assemblies are those that contain code that is part of the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] product.</span></span> [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] <span data-ttu-id="f1061-111">se escribe mediante ensamblados de código administrado; todos estos ensamblados tienen nombres seguros (es decir, están firmados digitalmente).</span><span class="sxs-lookup"><span data-stu-id="f1061-111">is written using managed code assemblies; all of these assemblies are strong-named (that is, digitally signed).</span></span> <span data-ttu-id="f1061-112">Los grupos de código para estos ensamblados se definen mediante **StrongNameMembershipCondition**, que proporciona evidencias basadas en información de clave pública para el nombre seguro del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="f1061-112">The code groups for these assemblies are defined using the **StrongNameMembershipCondition**, which provides evidence based on public key information for the assembly's strong name.</span></span> <span data-ttu-id="f1061-113">Al grupo de código se le permite el conjunto de permisos **FullTrust**.</span><span class="sxs-lookup"><span data-stu-id="f1061-113">The code group is granted the **FullTrust** permission set.</span></span>  
  
## <a name="report-server-extensions-rendering-data-delivery-and-security"></a><span data-ttu-id="f1061-114">Extensiones del servidor de informes (Representación, Datos, Entrega y Seguridad)</span><span class="sxs-lookup"><span data-stu-id="f1061-114">Report Server Extensions (Rendering, Data, Delivery, and Security)</span></span>  
 <span data-ttu-id="f1061-115">Las extensiones del servidor de informes son extensiones de seguridad, representación, entrega y datos personalizados que crean los usuarios para extender la funcionalidad de [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f1061-115">Report server extensions are custom data, delivery, rendering, and security extensions that you or other third-parties create in order to extend the functionality of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="f1061-116">Debe conceder el permiso **FullTrust** a estas extensiones o código de ensamblado en los archivos de configuración de directivas asociados al componente [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] que está extendiendo.</span><span class="sxs-lookup"><span data-stu-id="f1061-116">You must grant **FullTrust** to these extensions or assembly code in the policy configuration files associated with the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] component you are extending.</span></span> <span data-ttu-id="f1061-117">Las extensiones incluidas como parte de [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] se firman con la clave pública del servidor de informes y reciben el conjunto de permisos **FullTrust**.</span><span class="sxs-lookup"><span data-stu-id="f1061-117">Extensions shipped as a part of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] are signed with the report server public key and receive the **FullTrust** permission set.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="f1061-118">Debe modificar los archivos de configuración de directivas de [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] para permitir **FullTrust** a cualquier extensión de otro fabricante.</span><span class="sxs-lookup"><span data-stu-id="f1061-118">You must modify the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] policy configuration files to allow **FullTrust** for any third-party extensions.</span></span> <span data-ttu-id="f1061-119">Si no agrega un grupo de código con **FullTrust** para sus extensiones personalizadas, el servidor de informes no podrá usarlas.</span><span class="sxs-lookup"><span data-stu-id="f1061-119">If you do not add a code group with **FullTrust** for your custom extensions, they cannot be used by the report server.</span></span>  
  
 <span data-ttu-id="f1061-120">Para más información sobre los archivos de configuración de directivas de [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], vea [Using Reporting Services Security Policy Files](using-reporting-services-security-policy-files.md) (Usar los archivos de directivas de seguridad de Reporting Services).</span><span class="sxs-lookup"><span data-stu-id="f1061-120">For more information about the policy configuration files in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], see [Using Reporting Services Security Policy Files](using-reporting-services-security-policy-files.md).</span></span>  
  
## <a name="expressions-used-in-reports"></a><span data-ttu-id="f1061-121">Expresiones usadas en informes</span><span class="sxs-lookup"><span data-stu-id="f1061-121">Expressions Used in Reports</span></span>  
 <span data-ttu-id="f1061-122">Las expresiones de informes son expresiones de código insertado o métodos definidos por el usuario incluidos dentro del elemento **Code** de un archivo de lenguaje RDL (Report Definition Language).</span><span class="sxs-lookup"><span data-stu-id="f1061-122">Report expressions are inline code expressions or user-defined methods contained within the **Code** element of a report definition language file.</span></span> <span data-ttu-id="f1061-123">Hay un grupo de código ya configurado en los archivos de directivas que concede a estas expresiones el conjunto de permisos **Ejecución** de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="f1061-123">There is a code group that is already configured in the policy files that grants these expressions the **Execution** permission set by default.</span></span> <span data-ttu-id="f1061-124">El grupo de código tiene un aspecto similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="f1061-124">The code group looks like the following:</span></span>  
  
```  
<CodeGroup  
   class="UnionCodeGroup"  
   version="1"  
   PermissionSetName="Execution"  
   Name="Report_Expressions_Default_Permissions"  
   Description="This code group grants default permissions for code in report expressions and Code element. ">  
    <IMembershipCondition  
       class="StrongNameMembershipCondition"  
       version="1"  
       PublicKeyBlob="002400..."  
    />  
</CodeGroup>  
```  
  
 <span data-ttu-id="f1061-125">El permiso **Ejecución** permite la ejecución del código, pero no el uso de recursos protegidos.</span><span class="sxs-lookup"><span data-stu-id="f1061-125">**Execution** permission allows code to run (execute), but not to use protected resources.</span></span> <span data-ttu-id="f1061-126">Todas las expresiones incluidas en un informe se compilan en un ensamblado (denominado "ensamblado de expresiones") que se almacena como parte del informe compilado.</span><span class="sxs-lookup"><span data-stu-id="f1061-126">All expressions found within a report are compiled into an assembly (called an "expression host" assembly) that is stored as a part of the compiled report.</span></span> <span data-ttu-id="f1061-127">Cuando se ejecuta el informe, el servidor de informes carga el ensamblado de expresiones y realiza llamadas a ese ensamblado para ejecutar expresiones.</span><span class="sxs-lookup"><span data-stu-id="f1061-127">When the report is executed, the report server loads the expression host assembly and makes calls into that assembly to execute expressions.</span></span> <span data-ttu-id="f1061-128">Los ensamblados de expresiones se firman con una clave concreta que se usa para definir el grupo de código para todos los ensamblados de expresiones.</span><span class="sxs-lookup"><span data-stu-id="f1061-128">Expression host assemblies are signed with a specific key that is used to define the code group for all expression hosts.</span></span>  
  
 <span data-ttu-id="f1061-129">Las expresiones de informe hacen referencia a las colecciones de modelos de objetos (campos, parámetros, etc.) y realizan tareas simples como operaciones de cadenas y aritméticas.</span><span class="sxs-lookup"><span data-stu-id="f1061-129">Report expressions reference report object model collections (fields, parameters, etc.) and perform simple tasks like arithmetic and string operations.</span></span> <span data-ttu-id="f1061-130">El código que realiza estas operaciones simples solo requiere el permiso **Ejecución**.</span><span class="sxs-lookup"><span data-stu-id="f1061-130">Code that performs these simple operations only requires **Execution** permission.</span></span> <span data-ttu-id="f1061-131">De forma predeterminada, a los métodos definidos por el usuario en el elemento **Code** y cualquier ensamblado personalizado se les concede el permiso **Ejecución** en [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f1061-131">By default, user-defined methods in the **Code** element and any custom assemblies are granted **Execution** permission in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="f1061-132">Así, para la mayoría de las expresiones, la configuración actual no requiere la modificación de ningún archivo de directiva de seguridad.</span><span class="sxs-lookup"><span data-stu-id="f1061-132">Thus, for most expressions, the current configuration does not require that you modify any security policy files.</span></span> <span data-ttu-id="f1061-133">Para conceder permisos adicionales a los ensamblados de expresiones, un administrador tiene que modificar los archivos de configuración de directivas del servidor de informes y el Diseñador de informes, y cambiar el grupo de código de expresiones de informe.</span><span class="sxs-lookup"><span data-stu-id="f1061-133">To grant additional permissions to expression host assemblies, an administrator needs to modify the policy configuration files of the report server and Report Designer, and change the report expressions code group.</span></span> <span data-ttu-id="f1061-134">Dado que es un valor global, el cambio de los permisos predeterminados para los ensamblados de expresiones afecta a todos los informes.</span><span class="sxs-lookup"><span data-stu-id="f1061-134">Because it is a global setting, changing default permissions for the expression hosts affects all reports.</span></span> <span data-ttu-id="f1061-135">Por esta razón, resulta muy recomendable que coloque todo el código que requiere seguridad adicional en un ensamblado personalizado.</span><span class="sxs-lookup"><span data-stu-id="f1061-135">For this reason, it is highly recommended that you place all code that requires additional security into a custom assembly.</span></span> <span data-ttu-id="f1061-136">Solo a este ensamblado se le concederán los permisos que necesita.</span><span class="sxs-lookup"><span data-stu-id="f1061-136">Only this assembly will be granted the permissions you need.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="f1061-137">El código que llama a ensamblados externos o a recursos protegidos debe incorporarse a un ensamblado personalizado para usarlo en informes.</span><span class="sxs-lookup"><span data-stu-id="f1061-137">Code that calls external assemblies or protected resources should be incorporated into a custom assembly for use in reports.</span></span> <span data-ttu-id="f1061-138">Al hacerlo, obtendrá más control sobre los permisos solicitados y validados por su código.</span><span class="sxs-lookup"><span data-stu-id="f1061-138">Doing so gives you more control over the permissions requested and asserted by your code.</span></span> <span data-ttu-id="f1061-139">No debería realizar llamadas para proteger métodos dentro del elemento **Code**.</span><span class="sxs-lookup"><span data-stu-id="f1061-139">You should not make calls to secure methods within the **Code** element.</span></span> <span data-ttu-id="f1061-140">Si lo hace, se le exigirá que conceda el permiso **FullTrust** al ensamblado de expresiones de informe y se concederá todo el acceso total del código personalizado al CLR.</span><span class="sxs-lookup"><span data-stu-id="f1061-140">Doing so requires you to grant **FullTrust** to the report expression host and grants all custom code full access to the CLR.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="f1061-141">No conceda el permiso **FullTrust** al grupo de código de un ensamblado de expresiones de informe.</span><span class="sxs-lookup"><span data-stu-id="f1061-141">Do not grant **FullTrust** to the code group for a report expression host.</span></span> <span data-ttu-id="f1061-142">Si lo hace, permitirá que todas las expresiones de informe realicen llamadas al sistema protegidas.</span><span class="sxs-lookup"><span data-stu-id="f1061-142">If you do, you enable all report expressions to make protected system calls.</span></span>  
  
## <a name="custom-assemblies-referenced-in-reports"></a><span data-ttu-id="f1061-143">Ensamblados personalizados a los que se hace referencia en informes</span><span class="sxs-lookup"><span data-stu-id="f1061-143">Custom Assemblies Referenced in Reports</span></span>  
 <span data-ttu-id="f1061-144">Algunas expresiones de informes pueden llamar a ensamblados de terceros, también conocidos en [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] como ensamblados personalizados.</span><span class="sxs-lookup"><span data-stu-id="f1061-144">Some report expressions can call third-party code assemblies, also known in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] as custom assemblies.</span></span> <span data-ttu-id="f1061-145">El servidor de informes espera que estos ensamblados tengan al menos el permiso **Ejecución** en los archivos de configuración de directivas.</span><span class="sxs-lookup"><span data-stu-id="f1061-145">The report server expects these assemblies to have at least **Execution** permission in the policy configuration files.</span></span> <span data-ttu-id="f1061-146">De forma predeterminada, los archivos de directivas que se incluyen con [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] conceden el permiso **Ejecución** a todos los ensamblados que se inician desde la zona 'Mi PC'.</span><span class="sxs-lookup"><span data-stu-id="f1061-146">By default, policy files that ship with [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] grant **Execution** permission to all assemblies starting from the 'My Computer' zone.</span></span> <span data-ttu-id="f1061-147">Puede conceder permisos adicionales a ensamblados personalizados según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="f1061-147">You can grant additional permissions to custom assemblies as needed.</span></span>  
  
 <span data-ttu-id="f1061-148">En algunos casos, puede que necesite realizar una operación que requiera permisos de código concretos en una expresión de informe.</span><span class="sxs-lookup"><span data-stu-id="f1061-148">In some cases, you may need to perform an operation that requires specific code permissions in a report expression.</span></span> <span data-ttu-id="f1061-149">Normalmente, esto significa que una expresión de informe tiene que realizar una llamada a un método de biblioteca CLR protegido (como uno que tiene acceso a archivos o al Registro del sistema).</span><span class="sxs-lookup"><span data-stu-id="f1061-149">Typically, this means that a report expression needs to make a call to a secured CLR library method (such as one that accesses files or the system registry).</span></span> <span data-ttu-id="f1061-150">La documentación de [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] describe los permisos de código que se exigen para realizar esta llamada segura; para ejecutar la llamada, al código de llamada se le deben conceder estos permisos concretos y seguros.</span><span class="sxs-lookup"><span data-stu-id="f1061-150">The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] documentation describes the code permissions that are required to make this secure call; to execute the call, the calling code must be granted these specific, secure permissions.</span></span> <span data-ttu-id="f1061-151">Si realiza la llamada desde una expresión de informe o el elemento **Code**, al ensamblado de expresiones se le deben conceder los permisos adecuados.</span><span class="sxs-lookup"><span data-stu-id="f1061-151">If you make the call from a report expression or the **Code** element, the expression host assembly must be granted the appropriate permissions.</span></span> <span data-ttu-id="f1061-152">Sin embargo, una vez que concede los permisos al ensamblado de expresiones, a todo el código que se ejecuta en cualquier expresión de cualquier informe se le concede dicho permiso concreto.</span><span class="sxs-lookup"><span data-stu-id="f1061-152">However, once you grant the expression host the permissions, all code that runs in any expression in any report is now granted that specific permission.</span></span> <span data-ttu-id="f1061-153">Es mucho más seguro realizar la llamada desde un ensamblado personalizado y conceder los permisos concretos a dicho ensamblado personalizado.</span><span class="sxs-lookup"><span data-stu-id="f1061-153">It is much more secure to make the call from a custom assembly and grant that custom assembly the specific permissions.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f1061-154">Consulte también</span><span class="sxs-lookup"><span data-stu-id="f1061-154">See Also</span></span>  
 <span data-ttu-id="f1061-155">[Seguridad de acceso del código en Reporting Services](code-access-security-in-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="f1061-155">[Code Access Security in Reporting Services](code-access-security-in-reporting-services.md) </span></span>  
 [<span data-ttu-id="f1061-156">Desarrollo seguro &#40;Reporting Services&#41;</span><span class="sxs-lookup"><span data-stu-id="f1061-156">Secure Development &#40;Reporting Services&#41;</span></span>](secure-development-reporting-services.md)  
  
  
