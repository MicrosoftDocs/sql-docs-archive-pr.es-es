---
title: Eliminar y volver a crear claves de cifrado (Administrador de configuración de SSRS) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- re-creating encryption keys
- encryption keys [Reporting Services]
- deleting encryption keys
- symmetric keys [Reporting Services]
- removing encryption keys
- resetting encryption keys
ms.assetid: 201afe5f-acc9-4a37-b5ec-121dc7df2a61
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 8fa5138e4bbb84395bad79a272d2bde31389396b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751833"
---
# <a name="delete-and-re-create-encryption-keys--ssrs-configuration-manager"></a><span data-ttu-id="6524a-102">Eliminar y volver a crear claves de cifrado (Administrador de configuración de SSRS)</span><span class="sxs-lookup"><span data-stu-id="6524a-102">Delete and Re-create Encryption Keys  (SSRS Configuration Manager)</span></span>
  <span data-ttu-id="6524a-103">Las actividades de eliminación y nueva creación de claves de cifrado quedan fuera del mantenimiento rutinario de las claves de cifrado.</span><span class="sxs-lookup"><span data-stu-id="6524a-103">Deleting and re-creating encryption keys are activities that fall outside of routine encryption key maintenance.</span></span> <span data-ttu-id="6524a-104">Estas tareas se realizan en respuesta a una amenaza específica al servidor de informes o como último recurso cuando ya no se tiene acceso a una base de datos del servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="6524a-104">You perform these tasks in response to a specific threat to your report server, or as a last resort when you can no longer access a report server database.</span></span>  
  
-   <span data-ttu-id="6524a-105">Vuelva a crear la clave simétrica cuando crea que la existente está en riesgo.</span><span class="sxs-lookup"><span data-stu-id="6524a-105">Re-create the symmetric key when you believe the existing symmetric key is compromised.</span></span> <span data-ttu-id="6524a-106">También puede volver a crearla con una frecuencia determinada, como práctica recomendada de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6524a-106">You can also re-create the key on a regular basis as a security best practice.</span></span>  
  
-   <span data-ttu-id="6524a-107">Elimine claves de cifrado existentes y el contenido cifrado no utilizable cuando no pueda restaurar la clave simétrica.</span><span class="sxs-lookup"><span data-stu-id="6524a-107">Delete existing encryption keys and unusable encrypted content when you cannot restore the symmetric key.</span></span>  
  
## <a name="re-creating-encryption-keys"></a><span data-ttu-id="6524a-108">volver a crear claves de cifrado</span><span class="sxs-lookup"><span data-stu-id="6524a-108">Re-creating Encryption Keys</span></span>  
 <span data-ttu-id="6524a-109">Si tiene pruebas de que hay usuarios no autorizados que conocen la clave simétrica, o si el servidor de informes ha sufrido algún ataque y desea restablecer la clave simétrica como medida de precaución, puede volver a crearla.</span><span class="sxs-lookup"><span data-stu-id="6524a-109">If you have evidence that the symmetric key is known to unauthorized users, or if your report server has been under attack and you want to reset the symmetric key as a precaution, you can re-create the symmetric key.</span></span> <span data-ttu-id="6524a-110">Cuando se vuelve a crear la clave simétrica, todos los valores cifrados se cifran de nuevo con este valor.</span><span class="sxs-lookup"><span data-stu-id="6524a-110">When you re-create the symmetric key, all encrypted values will be re-encrypted using the new value.</span></span> <span data-ttu-id="6524a-111">Si se ejecutan varios servidores de informes en una implementación escalada, todas las copias de la clave simétrica se actualizan con el nuevo valor.</span><span class="sxs-lookup"><span data-stu-id="6524a-111">If you are running multiple report servers in a scale-out deployment, all copies of the symmetric key will be updated to the new value.</span></span> <span data-ttu-id="6524a-112">El servidor de informes utiliza las claves públicas disponibles para actualizar la clave simétrica en cada servidor de la implementación.</span><span class="sxs-lookup"><span data-stu-id="6524a-112">The report server uses the public keys available to it to update the symmetric key for each server in the deployment.</span></span>  
  
 <span data-ttu-id="6524a-113">Solo se puede volver a crear la clave simétrica cuando el servidor de informes se encuentre en un estado de funcionamiento.</span><span class="sxs-lookup"><span data-stu-id="6524a-113">You can only re-create the symmetric key when the report server is in a working state.</span></span> <span data-ttu-id="6524a-114">La creación de claves de cifrado y el cifrado de contenido interrumpen las operaciones del servidor.</span><span class="sxs-lookup"><span data-stu-id="6524a-114">Re-creating the encryption keys and re-encrypting content disrupts server operations.</span></span> <span data-ttu-id="6524a-115">Debe poner el servidor en modo sin conexión durante el proceso de nuevo cifrado.</span><span class="sxs-lookup"><span data-stu-id="6524a-115">You must take the server offline while re-encryption is underway.</span></span> <span data-ttu-id="6524a-116">No se deben realizar solicitudes al servidor de informes durante este proceso.</span><span class="sxs-lookup"><span data-stu-id="6524a-116">There should be no requests made to the report server during re-encryption.</span></span>  
  
 <span data-ttu-id="6524a-117">Para restablecer la clave simétrica y los datos cifrados, se puede usar la herramienta de configuración de Reporting Services o la utilidad **rskeymgmt** .</span><span class="sxs-lookup"><span data-stu-id="6524a-117">You can use the Reporting Services Configuration tool or the **rskeymgmt** utility to reset the symmetric key and encrypted data.</span></span> <span data-ttu-id="6524a-118">Para más información sobre cómo se crea la clave simétrica, vea [Inicializar un servidor de informes &#40;Administrador de configuración de SSRS&#41;](ssrs-encryption-keys-initialize-a-report-server.md).</span><span class="sxs-lookup"><span data-stu-id="6524a-118">For more information about how the symmetric key is created, see [Initialize a Report Server &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-initialize-a-report-server.md).</span></span>  
  
#### <a name="how-to-re-create-encryption-keys-reporting-services-configuration-tool"></a><span data-ttu-id="6524a-119">Cómo volver a crear claves de cifrado (herramienta de configuración de Reporting Services)</span><span class="sxs-lookup"><span data-stu-id="6524a-119">How to re-create encryption keys (Reporting Services Configuration Tool)</span></span>  
  
1.  <span data-ttu-id="6524a-120">Deshabilite el acceso HTTP y el servicio web del servidor de informes modificando la propiedad `IsWebServiceEnabled` en el archivo rsreportserver.config.</span><span class="sxs-lookup"><span data-stu-id="6524a-120">Disable the Report Server Web service and HTTP access by modifying the `IsWebServiceEnabled` property in the rsreportserver.config file.</span></span> <span data-ttu-id="6524a-121">Este paso evita temporalmente que las solicitudes de autenticación se envíen al servidor de informes sin cerrar el servidor completamente.</span><span class="sxs-lookup"><span data-stu-id="6524a-121">This step temporarily stops authentication requests from being sent to the report server without completely shutting down the server.</span></span> <span data-ttu-id="6524a-122">Debe tener el servicio mínimo para poder volver a crear las claves.</span><span class="sxs-lookup"><span data-stu-id="6524a-122">You must have minimal service so that you can recreate the keys.</span></span>  
  
     <span data-ttu-id="6524a-123">Si vuelve a crear claves de cifrado para una implementación escalada del servidor de informes, deshabilite esta propiedad en todas las instancias de la implementación.</span><span class="sxs-lookup"><span data-stu-id="6524a-123">If you are recreating encryption keys for a report server scale-out deployment, disable this property on all instances in the deployment.</span></span>  
  
    1.  <span data-ttu-id="6524a-124">Abra el Explorador de Windows y navegue a *unidad*:\Archivos de programa\Microsoft SQL Server\\*instancia_servidor_informes*\Reporting Services.</span><span class="sxs-lookup"><span data-stu-id="6524a-124">Open Windows Explorer and navigate to *drive*:\Program Files\Microsoft SQL Server\\*report_server_instance*\Reporting Services.</span></span> <span data-ttu-id="6524a-125">Reemplace *unidad* por su letra de unidad e *instancia_servidor_informes* por el nombre de carpeta que corresponde a la instancia del servidor de informes para la que quiere deshabilitar el acceso HTTP y el servicio web.</span><span class="sxs-lookup"><span data-stu-id="6524a-125">Replace *drive* with your drive letter and *report_server_instance* with the folder name that corresponds to the report server instance for which you want to disable the Web service and HTTP access.</span></span> <span data-ttu-id="6524a-126">Por ejemplo, C:\Archivos de programa\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services.</span><span class="sxs-lookup"><span data-stu-id="6524a-126">For example, C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services.</span></span>  
  
    2.  <span data-ttu-id="6524a-127">Abra el archivo rsreportserver.config.</span><span class="sxs-lookup"><span data-stu-id="6524a-127">Open the rsreportserver.config file.</span></span>  
  
    3.  <span data-ttu-id="6524a-128">Para la propiedad `IsWebServiceEnabled`, especifique `False` y, a continuación, guarde los cambios.</span><span class="sxs-lookup"><span data-stu-id="6524a-128">For the `IsWebServiceEnabled` property, specify `False`, and then save your changes.</span></span>  
  
2.  <span data-ttu-id="6524a-129">Inicie la herramienta de configuración de Reporting Services y, a continuación, conéctese a la instancia del servidor de informes que desea configurar.</span><span class="sxs-lookup"><span data-stu-id="6524a-129">Start the Reporting Services Configuration tool, and then connect to the report server instance you want to configure.</span></span>  
  
3.  <span data-ttu-id="6524a-130">En la página Claves de cifrado, haga clic en **Cambiar**.</span><span class="sxs-lookup"><span data-stu-id="6524a-130">On the Encryption Keys page, click **Change**.</span></span> [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
4.  <span data-ttu-id="6524a-131">Reinicie el servicio Servidor de informes de Windows.</span><span class="sxs-lookup"><span data-stu-id="6524a-131">Restart the Report Server Windows service.</span></span> <span data-ttu-id="6524a-132">Si vuelve a crear claves de cifrado para una implementación escalada, reinicie el servicio en todas las instancias.</span><span class="sxs-lookup"><span data-stu-id="6524a-132">If you are recreating encryption keys for a scale-out deployment, restart the service on all instances.</span></span>  
  
5.  <span data-ttu-id="6524a-133">Vuelva a habilitar el acceso HTTP y el servicio web modificando la propiedad `IsWebServiceEnabled` en el archivo rsreportserver.config.</span><span class="sxs-lookup"><span data-stu-id="6524a-133">Re-enable the Web service and HTTP access by modifying the `IsWebServiceEnabled` property in the rsreportserver.config file.</span></span> <span data-ttu-id="6524a-134">Hágalo para todas las instancias si está trabajando con una implementación escalada.</span><span class="sxs-lookup"><span data-stu-id="6524a-134">Do this for all instances if you are working with a scale out deployment.</span></span>  
  
#### <a name="how-to-re-create-encryption-keys-rskeymgmt"></a><span data-ttu-id="6524a-135">Cómo volver a crear claves de cifrado (rskeymgmt)</span><span class="sxs-lookup"><span data-stu-id="6524a-135">How to re-create encryption keys (rskeymgmt)</span></span>  
  
1.  <span data-ttu-id="6524a-136">Deshabilite el acceso HTTP y el servicio web del servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="6524a-136">Disable the Report Server Web service and HTTP access.</span></span> <span data-ttu-id="6524a-137">Siga las instrucciones del procedimiento anterior para detener las operaciones de los servicios web.</span><span class="sxs-lookup"><span data-stu-id="6524a-137">Use the instructions in the previous procedure to stop Web service operations.</span></span>  
  
2.  <span data-ttu-id="6524a-138">Ejecute **rskeymgmt.exe** localmente en el equipo que hospeda el servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="6524a-138">Run **rskeymgmt.exe** locally on the computer that hosts the report server.</span></span> <span data-ttu-id="6524a-139">Utilice el argumento `-s` para restablecer la clave simétrica.</span><span class="sxs-lookup"><span data-stu-id="6524a-139">Use the `-s` argument to reset the symmetric key.</span></span> <span data-ttu-id="6524a-140">No se requieren más argumentos:</span><span class="sxs-lookup"><span data-stu-id="6524a-140">No other arguments are required:</span></span>  
  
    ```  
    rskeymgmt -s  
    ```  
  
3.  <span data-ttu-id="6524a-141">Reinicie el servicio Windows y habilite las operaciones de los servicios web.</span><span class="sxs-lookup"><span data-stu-id="6524a-141">Restart the Windows service and enable Web service operations.</span></span>  
  
## <a name="deleting-unusable-encrypted-content"></a><span data-ttu-id="6524a-142">Eliminar contenido cifrado que no pueda utilizarse</span><span class="sxs-lookup"><span data-stu-id="6524a-142">Deleting Unusable Encrypted Content</span></span>  
 <span data-ttu-id="6524a-143">Si, por algún motivo, no puede restaurar la clave de cifrado, el servidor de informes nunca podrá descifrar ni utilizar los datos que se hayan cifrado con esa clave.</span><span class="sxs-lookup"><span data-stu-id="6524a-143">If for some reason you cannot restore the encryption key, the report server will never be able to decrypt and use any data that is encrypted with that key.</span></span> <span data-ttu-id="6524a-144">Para devolver al servidor de informes a un estado de funcionamiento, se deben eliminar los valores cifrados almacenados actualmente en la base de datos del servidor de informes y después, volver a especificar manualmente los valores que se necesiten.</span><span class="sxs-lookup"><span data-stu-id="6524a-144">To return the report server to a working state, you must delete the encrypted values that are currently stored in the report server database and then manually re-specify the values you need.</span></span>  
  
 <span data-ttu-id="6524a-145">La eliminación de las claves de cifrado provoca la supresión de toda información de clave simétrica de la base de datos del servidor de informes y elimina todo el contenido cifrado.</span><span class="sxs-lookup"><span data-stu-id="6524a-145">Deleting the encryption keys removes all symmetric key information from the report server database and deletes any encrypted content.</span></span> <span data-ttu-id="6524a-146">Los datos no cifrados permanecen intactos; solo se suprime el contenido cifrado.</span><span class="sxs-lookup"><span data-stu-id="6524a-146">All unencrypted data is left intact; only encrypted content is removed.</span></span> <span data-ttu-id="6524a-147">Cuando se eliminan las claves de cifrado, el servidor de informes se reinicializa automáticamente agregando una nueva clave simétrica.</span><span class="sxs-lookup"><span data-stu-id="6524a-147">When you delete the encryption keys, the report server re-initializes itself automatically by adding a new symmetric key.</span></span> <span data-ttu-id="6524a-148">Cuando se elimina el contenido cifrado, ocurre lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="6524a-148">The following occurs when you delete encrypted content:</span></span>  
  
-   <span data-ttu-id="6524a-149">Se eliminan las cadenas de conexión en orígenes de datos compartidos.</span><span class="sxs-lookup"><span data-stu-id="6524a-149">Connection strings in shared data sources are deleted.</span></span> <span data-ttu-id="6524a-150">Los usuarios que ejecutan informes obtienen el error "No se inicializó la propiedad ConnectionString".</span><span class="sxs-lookup"><span data-stu-id="6524a-150">Users who run reports get the error "The ConnectionString property has not been initialized."</span></span>  
  
-   <span data-ttu-id="6524a-151">Se eliminan las credenciales almacenadas.</span><span class="sxs-lookup"><span data-stu-id="6524a-151">Stored credentials are deleted.</span></span> <span data-ttu-id="6524a-152">Los informes y los orígenes de datos compartidos se reconfiguran para que utilicen credenciales solicitadas.</span><span class="sxs-lookup"><span data-stu-id="6524a-152">Reports and shared data sources are reconfigured to use prompted credentials.</span></span>  
  
-   <span data-ttu-id="6524a-153">No se pueden ejecutar los informes que se basan en modelos (y que requieren orígenes de datos compartidos configurados con credenciales almacenadas o sin ninguna credencial).</span><span class="sxs-lookup"><span data-stu-id="6524a-153">Reports that are based on models (and require shared data sources configured with stored or no credentials) will not run.</span></span>  
  
-   <span data-ttu-id="6524a-154">Las suscripciones se desactivan.</span><span class="sxs-lookup"><span data-stu-id="6524a-154">Subscriptions are deactivated.</span></span>  
  
 <span data-ttu-id="6524a-155">Una vez eliminado el contenido cifrado, ya no es posible recuperarlo.</span><span class="sxs-lookup"><span data-stu-id="6524a-155">Once you delete encrypted content, you cannot recover it.</span></span> <span data-ttu-id="6524a-156">Se deben volver a especificar cadenas de conexión y credenciales almacenadas, y es necesario activar las suscripciones.</span><span class="sxs-lookup"><span data-stu-id="6524a-156">You must re-specify connection strings and stored credentials, and you must activate subscriptions.</span></span>  
  
 <span data-ttu-id="6524a-157">Para quitar los valores, se puede usar la herramienta de configuración de Reporting Services o la utilidad **rskeymgmt** .</span><span class="sxs-lookup"><span data-stu-id="6524a-157">You can use the Reporting Services Configuration tool or the **rskeymgmt** utility to remove the values.</span></span>  
  
#### <a name="how-to-delete-encryption-keys-reporting-services-configuration-tool"></a><span data-ttu-id="6524a-158">Cómo eliminar claves de cifrado (herramienta de configuración de Reporting Services)</span><span class="sxs-lookup"><span data-stu-id="6524a-158">How to delete encryption keys (Reporting Services Configuration Tool)</span></span>  
  
1.  <span data-ttu-id="6524a-159">Inicie la herramienta de configuración de Reporting Services y, a continuación, conéctese a la instancia del servidor de informes que desea configurar.</span><span class="sxs-lookup"><span data-stu-id="6524a-159">Start the Reporting Services Configuration tool, and then connect to the report server instance you want to configure.</span></span>  
  
2.  <span data-ttu-id="6524a-160">Haga clic en **Claves de cifrado**y, a continuación, en **Eliminar**.</span><span class="sxs-lookup"><span data-stu-id="6524a-160">Click **Encryption Keys**, and then click **Delete**.</span></span> [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
3.  <span data-ttu-id="6524a-161">Reinicie el servicio Servidor de informes de Windows.</span><span class="sxs-lookup"><span data-stu-id="6524a-161">Restart the Report Server Windows service.</span></span> <span data-ttu-id="6524a-162">En una implementación escalada, repita el procedimiento con todas las instancias del servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="6524a-162">For a scale-out deployment, do this on all report server instances.</span></span>  
  
#### <a name="how-to-delete-encryption-keys-rskeymmgt"></a><span data-ttu-id="6524a-163">Cómo eliminar claves de cifrado (rskeymmgt)</span><span class="sxs-lookup"><span data-stu-id="6524a-163">How to delete encryption keys (rskeymmgt)</span></span>  
  
1.  <span data-ttu-id="6524a-164">Ejecute **rskeymgmt.exe** localmente en el equipo que hospeda el servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="6524a-164">Run **rskeymgmt.exe** locally on the computer that hosts the report server.</span></span> <span data-ttu-id="6524a-165">Debe usar el argumento de aplicación **-d** .</span><span class="sxs-lookup"><span data-stu-id="6524a-165">You must use the **-d** apply argument.</span></span> <span data-ttu-id="6524a-166">El siguiente ejemplo ilustra el argumento que debe especificar:</span><span class="sxs-lookup"><span data-stu-id="6524a-166">The following example illustrates the argument you must specify:</span></span>  
  
    ```  
    rskeymgmt -d  
    ```  
  
2.  <span data-ttu-id="6524a-167">Reinicie el servicio Servidor de informes de Windows.</span><span class="sxs-lookup"><span data-stu-id="6524a-167">Restart the Report Server Windows service.</span></span> <span data-ttu-id="6524a-168">En una implementación escalada, repita el procedimiento con todas las instancias del servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="6524a-168">For a scale-out deployment, do this on all report server instances.</span></span>  
  
#### <a name="how-to-re-specify-encrypted-values"></a><span data-ttu-id="6524a-169">Cómo volver a especificar valores cifrados</span><span class="sxs-lookup"><span data-stu-id="6524a-169">How to re-specify encrypted values</span></span>  
  
1.  <span data-ttu-id="6524a-170">En cada origen de datos compartido se debe volver a escribir la cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="6524a-170">For each shared data source, you must retype the connection string.</span></span>  
  
2.  <span data-ttu-id="6524a-171">Para cada informe y origen de datos compartido que utilice credenciales almacenadas, debe volver a escribir el nombre de usuario y la contraseña y luego guardarlos.</span><span class="sxs-lookup"><span data-stu-id="6524a-171">For each report and shared data source that uses stored credentials, you must retype the user name and password, and then save.</span></span> <span data-ttu-id="6524a-172">Para obtener más información, vea [Especificar información de credenciales y conexión para los orígenes de datos de informes](../../integration-services/connection-manager/data-sources.md) en Libros en pantalla de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6524a-172">For more information, see [Specify Credential and Connection Information for Report Data Sources](../../integration-services/connection-manager/data-sources.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
3.  <span data-ttu-id="6524a-173">Para cada suscripción controlada por datos, ábrala y vuelva a escribir las credenciales de la base de datos de suscripciones.</span><span class="sxs-lookup"><span data-stu-id="6524a-173">For each data-driven subscription, open each subscription and retype the credentials to the subscription database.</span></span>  
  
4.  <span data-ttu-id="6524a-174">Para suscripciones que utilizan datos cifrados (como la extensión de entrega de recurso compartido de archivos y todas las extensiones de entrega de terceros que utilicen cifrado), abra cada suscripción y vuelva a escribir las credenciales.</span><span class="sxs-lookup"><span data-stu-id="6524a-174">For subscriptions that use encrypted data (this includes the File Share delivery extension and any third-party delivery extension that uses encryption), open each subscription and retype credentials.</span></span> <span data-ttu-id="6524a-175">Las suscripciones que usan entrega por correo electrónico del Servidor de informes no emplean datos cifrados y, por tanto, no les afecta el cambio de clave.</span><span class="sxs-lookup"><span data-stu-id="6524a-175">Subscriptions that use Report Server e-mail delivery do not use encrypted data and are unaffected by the key change.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6524a-176">Consulte también</span><span class="sxs-lookup"><span data-stu-id="6524a-176">See Also</span></span>  
 <span data-ttu-id="6524a-177">[Configurar y administrar claves de cifrado &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-manage-encryption-keys.md) </span><span class="sxs-lookup"><span data-stu-id="6524a-177">[Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-manage-encryption-keys.md) </span></span>  
 [<span data-ttu-id="6524a-178">Almacenar datos cifrados del servidor de informes &#40;Administrador de configuración de SSRS&#41;</span><span class="sxs-lookup"><span data-stu-id="6524a-178">Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;</span></span>](ssrs-encryption-keys-store-encrypted-report-server-data.md)  
  
  
