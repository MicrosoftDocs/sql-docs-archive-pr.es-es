---
title: Copia de seguridad y restauración de claves de cifrado de Reporting Services | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- backing up encryption keys [Reporting Services]
- restoring encryption keys [Reporting Services]
- encryption keys [Reporting Services]
- symmetric keys [Reporting Services]
ms.assetid: 6773d5df-03ef-4781-beb7-9f6825bac979
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: c8e7e61f58632898fc6150210598a671157639a3
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751841"
---
# <a name="back-up-and-restore-reporting-services-encryption-keys"></a><span data-ttu-id="b9b0e-102">Hacer copia de seguridad y restaurar claves de cifrado de Reporting Services</span><span class="sxs-lookup"><span data-stu-id="b9b0e-102">Back Up and Restore Reporting Services Encryption Keys</span></span>
  <span data-ttu-id="b9b0e-103">Una parte importante de la configuración del servidor de informes es la creación de una copia de seguridad de la clave simétrica utilizada para cifrar información confidencial.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-103">An important part of report server configuration is creating a backup copy of the symmetric key used for encrypting sensitive information.</span></span> <span data-ttu-id="b9b0e-104">La copia de seguridad de la clave se necesita para varias operaciones rutinarias y, además, permite volver a utilizar una base de datos del servidor de informes existente en una nueva instalación.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-104">A backup copy of the key is required for many routine operations, and enables you to reuse an existing report server database in a new installation.</span></span>  
  
 <span data-ttu-id="b9b0e-105">**[!INCLUDE[applies](../../includes/applies-md.md)]** Modo nativo de [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] | Modo de SharePoint de [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="b9b0e-105">**[!INCLUDE[applies](../../includes/applies-md.md)]**  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Native Mode | [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] SharePoint mode</span></span>  
  
 <span data-ttu-id="b9b0e-106">Es necesario restaurar la copia de seguridad de la clave de cifrado cuando se produce alguno de los siguientes eventos:</span><span class="sxs-lookup"><span data-stu-id="b9b0e-106">It is necessary to restore the backup copy of the encryption key when any of the following events occur:</span></span>  
  
-   <span data-ttu-id="b9b0e-107">Cambio de nombre de la cuenta de servicio de Windows del servidor de informes o restablecimiento de la contraseña.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-107">Changing the Report Server Windows service account name or resetting the password.</span></span> <span data-ttu-id="b9b0e-108">Cuando se usa el Administrador de configuración de Reporting Services, la creación de una copia de seguridad de la clave forma parte de la operación de cambio del nombre de la cuenta de servicio.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-108">When you use the Reporting Services Configuration Manager, backing up the key is part of a service account name change operation.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="b9b0e-109">Restablecer la contraseña no es lo mismo que cambiarla.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-109">Resetting the password is not the same as changing the password.</span></span> <span data-ttu-id="b9b0e-110">Para restablecer una contraseña se requiere permiso para sobrescribir la información de cuenta en el controlador de dominio.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-110">A password reset requires permission to overwrite account information on the domain controller.</span></span> <span data-ttu-id="b9b0e-111">El administrador del sistema es quien restablece una contraseña cuando el usuario la olvida o no conoce una contraseña determinada.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-111">Password resets are performed by a system administrator when you forget or do not know a particular password.</span></span> <span data-ttu-id="b9b0e-112">Solo los restablecimientos de contraseña requieren la restauración de la clave simétrica.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-112">Only password resets require symmetric key restoration.</span></span> <span data-ttu-id="b9b0e-113">El cambio que se realiza periódicamente de una contraseña de cuenta no requiere que se restablezca la clave simétrica.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-113">Periodically changing an account password does not require you to reset the symmetric key.</span></span>  
  
-   <span data-ttu-id="b9b0e-114">Cambio de nombre del equipo o de la instancia que hospeda al servidor de informes (una instancia del servidor de informes se basa en un nombre de instancia de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ).</span><span class="sxs-lookup"><span data-stu-id="b9b0e-114">Renaming the computer or instance that hosts the report server (a report server instance is based on a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name).</span></span>  
  
-   <span data-ttu-id="b9b0e-115">Migración de una instalación del servidor de informes o configuración de un servidor de informes para utilizar una base de datos del servidor de informes diferente.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-115">Migrating a report server installation or configuring a report server to use a different report server database.</span></span>  
  
-   <span data-ttu-id="b9b0e-116">Recuperación de una instalación del servidor de informes debido a un error de hardware.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-116">Recovering a report server installation due to hardware failure.</span></span>  
  
 <span data-ttu-id="b9b0e-117">Solo es necesario realizar una copia de seguridad de la clave simétrica.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-117">You only need to back up one copy of the symmetric key.</span></span> <span data-ttu-id="b9b0e-118">Hay una correspondencia de uno a uno entre una base de datos del servidor de informes y una clave simétrica.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-118">There is a one-to-one correspondence between a report server database and a symmetric key.</span></span> <span data-ttu-id="b9b0e-119">Si bien solo debe realizar una copia de seguridad, es posible que necesite restaurar la clave varias veces cuando ejecute varios servidores de informes en un modelo de implementación escalada.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-119">Although you only need to back up one copy, you might need to restore the key multiple times if you are running multiple report servers in a scale-out deployment model.</span></span> <span data-ttu-id="b9b0e-120">Cada instancia del servidor de informes deberá tener su copia de la clave simétrica para bloquear y desbloquear datos en la base de datos del servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-120">Each report server instance will need its copy of the symmetric key to lock and unlock data in the report server database.</span></span>  
  
  
## <a name="backing-up-the-encryption-keys"></a><span data-ttu-id="b9b0e-121">Realizar copias de seguridad de claves de cifrado</span><span class="sxs-lookup"><span data-stu-id="b9b0e-121">Backing Up the Encryption Keys</span></span>  
 <span data-ttu-id="b9b0e-122">La copia de seguridad de la clave simétrica es un proceso que escribe la clave en el archivo que se especifique y después la codifica mediante la contraseña que se proporcione.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-122">Backing up the symmetric key is a process that writes the key to a file that you specify, and then scrambles the key using a password that you provide.</span></span> <span data-ttu-id="b9b0e-123">La clave simétrica no puede almacenarse nunca en un estado no cifrado, por lo que debe proporcionar una contraseña para cifrarla cuando la guarde en disco.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-123">The symmetric key can never be stored in an unencrypted state so you must provide a password to encrypt the key when you save it to disk.</span></span> <span data-ttu-id="b9b0e-124">Una vez creado el archivo, debe almacenarlo en una ubicación segura **y recordar la contraseña** que se usa para desbloquearlo.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-124">After the file is created, you must store it in a secure location **and remember the password** that is used to unlock the file.</span></span> <span data-ttu-id="b9b0e-125">Para hacer copia de seguridad de la clave simétrica, puede usar las siguientes herramientas:</span><span class="sxs-lookup"><span data-stu-id="b9b0e-125">To backup the symmetric key, you can use the following tools:</span></span>  
  
 <span data-ttu-id="b9b0e-126">**Modo nativo** : el Administrador de configuración de Reporting Services o la utilidad **rskeymgmt** .</span><span class="sxs-lookup"><span data-stu-id="b9b0e-126">**Native mode:** Either the Reporting Services Configuration Manager or the **rskeymgmt** utility.</span></span>  
  
 <span data-ttu-id="b9b0e-127">**Modo de SharePoint** : páginas de Administración central de SharePoint o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-127">**SharePoint mode:** SharePoint Central Administration pages or PowerShell.</span></span>  
  
####  <a name="backup-sharepoint-mode-report-servers"></a><a name="bkmk_backup_sharepoint"></a> <span data-ttu-id="b9b0e-128">Hacer copia de seguridad de servidores de informes en modo de SharePoint</span><span class="sxs-lookup"><span data-stu-id="b9b0e-128">Backup SharePoint Mode Report Servers</span></span>  
 <span data-ttu-id="b9b0e-129">Para los servidores de informes en modo de SharePoint puede usar comandos de PowerShell o usar las páginas de administración para la aplicación de servicios de [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b9b0e-129">For SharePoint mode report servers you can either use PowerShell commands or use the management pages for the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] service application.</span></span> <span data-ttu-id="b9b0e-130">Para obtener más información, vea la sección "Administración de claves" de [Administrar una aplicación de servicio de SharePoint para Reporting Services](../manage-a-reporting-services-sharepoint-service-application.md).</span><span class="sxs-lookup"><span data-stu-id="b9b0e-130">For more information, see the "Key Management" section of [Manage a Reporting Services SharePoint Service Application](../manage-a-reporting-services-sharepoint-service-application.md)</span></span>  
  
####  <a name="back-up-encryption-keys--reporting-services-configuration-manager-native-mode"></a><a name="bkmk_backup_configuration_manager"></a> <span data-ttu-id="b9b0e-131">Hacer copia de seguridad de las claves de cifrado - Administrador de configuración de Reporting Services (modo nativo)</span><span class="sxs-lookup"><span data-stu-id="b9b0e-131">Back up encryption keys -Reporting Services Configuration Manager (Native Mode)</span></span>  
  
1.  <span data-ttu-id="b9b0e-132">Inicie el Administrador de configuración de Reporting Services y, a continuación, conéctese a la instancia del servidor de informes que desea configurar.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-132">Start the Reporting Services Configuration Manager, and then connect to the report server instance you want to configure.</span></span>  
  
2.  <span data-ttu-id="b9b0e-133">Haga clic en **Claves de cifrado**y, a continuación, en **Copia de seguridad**.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-133">Click **Encryption Keys**, and then click **Back Up**.</span></span>  
  
3.  <span data-ttu-id="b9b0e-134">Escriba una contraseña segura.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-134">Type a strong password.</span></span>  
  
4.  <span data-ttu-id="b9b0e-135">Especifique un archivo para incluir la clave almacenada.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-135">Specify a file to contain the stored key.</span></span> [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="b9b0e-136">anexa una extensión de archivo .snk al archivo.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-136">appends a .snk file extension to the file.</span></span> <span data-ttu-id="b9b0e-137">Considere la posibilidad de almacenar el archivo en un disco diferente del servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-137">Consider storing the file on a disk separate from the report server.</span></span>  
  
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
####  <a name="back-up-encryption-keys--rskeymgmt-native-mode"></a><a name="bkmk_backup_rskeymgmt"></a><span data-ttu-id="b9b0e-138">Copia de seguridad de claves de cifrado-rskeymgmt (modo nativo)</span><span class="sxs-lookup"><span data-stu-id="b9b0e-138">Back up encryption keys -rskeymgmt (Native Mode)</span></span>  
  
1.  <span data-ttu-id="b9b0e-139">Ejecute **rskeymgmt.exe** localmente en el equipo que hospeda el servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-139">Run **rskeymgmt.exe** locally on the computer that hosts the report server.</span></span> <span data-ttu-id="b9b0e-140">Debe utilizar el argumento de extracción `-e` para copiar la clave, proporcionar un nombre de archivo y especificar una contraseña.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-140">You must use the `-e` extract argument to copy the key, provide a file name, and specify a password.</span></span> <span data-ttu-id="b9b0e-141">El siguiente ejemplo ilustra los argumentos que debe especificar:</span><span class="sxs-lookup"><span data-stu-id="b9b0e-141">The following example illustrates the arguments you must specify:</span></span>  
  
    ```cmd
    rskeymgmt -e -f d:\rsdbkey.snk -p<password>  
    ```  
  
## <a name="restore-encryption-keys"></a><span data-ttu-id="b9b0e-142">Restaurar las claves de cifrado</span><span class="sxs-lookup"><span data-stu-id="b9b0e-142">Restore Encryption Keys</span></span>  
 <span data-ttu-id="b9b0e-143">La restauración de la clave de cifrado sobrescribe la clave simétrica existente que se almacena en la base de datos del servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-143">Restoring the symmetric key overwrites the existing symmetric key that is stored in the report server database.</span></span> <span data-ttu-id="b9b0e-144">La restauración de una clave de cifrado reemplaza una clave que no se puede utilizar con una copia que se guardó anteriormente en el disco.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-144">Restoring an encryption key replaces an unusable key with a copy that you previously saved to disk.</span></span> <span data-ttu-id="b9b0e-145">La restauración de claves de cifrado se traduce en las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="b9b0e-145">Restoring encryption keys results in the following actions:</span></span>  
  
-   <span data-ttu-id="b9b0e-146">Se abre la clave simétrica desde el archivo de copia de seguridad protegido mediante contraseña.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-146">The symmetric key is opened from the password protected backup file.</span></span>  
  
-   <span data-ttu-id="b9b0e-147">Se cifra la clave simétrica mediante la clave pública del servicio de Windows del servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-147">The symmetric key is encrypted using the public key of the Report Server Windows service.</span></span>  
  
-   <span data-ttu-id="b9b0e-148">Se almacena la clave simétrica cifrada en la base de datos del servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-148">The encrypted symmetric key is stored in the report server database.</span></span>  
  
-   <span data-ttu-id="b9b0e-149">Se eliminan los datos de la clave simétrica anteriormente almacenada (por ejemplo, la información de la clave que se encontraba en la base de datos del servidor de informes desde una implementación anterior).</span><span class="sxs-lookup"><span data-stu-id="b9b0e-149">The previously stored symmetric key data (for example, key information that was already in the report server database from a previous deployment) is deleted.</span></span>  
  
 <span data-ttu-id="b9b0e-150">Para restaurar la clave de cifrado, debe tener una copia de la clave de cifrado en el archivo.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-150">To restore the encryption key, you must have a copy of the encryption key on file.</span></span> <span data-ttu-id="b9b0e-151">También debe conocer la contraseña que desbloquea la copia almacenada.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-151">You must also know the password that unlocks the stored copy.</span></span> <span data-ttu-id="b9b0e-152">Si conoce la clave y la contraseña, puede ejecutar la herramienta de configuración de Reporting Services o la utilidad **rskeymgmt** para restaurar la clave.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-152">If you have the key and the password, you can run the Reporting Services Configuration tool or **rskeymgmt** utility to restore the key.</span></span> <span data-ttu-id="b9b0e-153">La clave simétrica debe ser la misma que bloquea y desbloquea los datos cifrados almacenados actualmente en la base de datos del servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-153">The symmetric key must be the same one that locks and unlocks encrypted data currently stored in the report server database.</span></span> <span data-ttu-id="b9b0e-154">Si restaura una copia que no es válida, el servidor de informes no puede obtener acceso a los datos cifrados almacenados actualmente en la base de datos del servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-154">If you restore a copy that is not valid, the report server cannot access the encrypted data currently stored in the report server database.</span></span> <span data-ttu-id="b9b0e-155">Si esto sucede, es posible que deba eliminar todos los valores cifrados cuando no pueda restaurar una clave válida.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-155">If this occurs, you might need to delete all encrypted values if you cannot restore a valid key.</span></span> <span data-ttu-id="b9b0e-156">Si por algún motivo no puede restaurar la clave de cifrado (por ejemplo, si no tiene una copia de seguridad), debe eliminar la clave existente y el contenido cifrado.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-156">If for some reason you cannot restore the encryption key (for example, if you do not have a backup copy), you must delete the existing key and encrypted content.</span></span> <span data-ttu-id="b9b0e-157">Para más información, vea [Claves de cifrado de SSRS: eliminar y volver a crear las claves de cifrado](ssrs-encryption-keys-delete-and-re-create-encryption-keys.md).</span><span class="sxs-lookup"><span data-stu-id="b9b0e-157">For more information, see [Delete and Re-create Encryption Keys  &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-delete-and-re-create-encryption-keys.md).</span></span> <span data-ttu-id="b9b0e-158">Para obtener más información sobre la creación de claves simétrica, vea [Inicializar un servidor de informes &#40;Administrador de configuración de SSRS&#41;](ssrs-encryption-keys-initialize-a-report-server.md).</span><span class="sxs-lookup"><span data-stu-id="b9b0e-158">For more information about creating symmetric keys, see [Initialize a Report Server &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-initialize-a-report-server.md).</span></span>  
  
####  <a name="restore-encryption-keys--reporting-services-configuration-manager-native-mode"></a><a name="bkmk_restore_configuration_manager"></a><span data-ttu-id="b9b0e-159">Restaurar claves de cifrado: Administrador de configuración de Reporting Services (modo nativo)</span><span class="sxs-lookup"><span data-stu-id="b9b0e-159">Restore encryption keys -Reporting Services Configuration Manager (Native Mode)</span></span>  
  
1.  <span data-ttu-id="b9b0e-160">Inicie el Administrador de configuración de Reporting Services y, a continuación, conéctese a la instancia del servidor de informes que desea configurar.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-160">Start the Reporting Services Configuration Manager, and then connect to the report server instance you want to configure.</span></span>  
  
2.  <span data-ttu-id="b9b0e-161">En la página claves de cifrado, haga clic en **restaurar**.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-161">On the Encryption Keys page, click **Restore**.</span></span>  
  
3.  <span data-ttu-id="b9b0e-162">Seleccione el archivo .snk que contiene la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-162">Select the .snk file that contains the back up copy.</span></span>  
  
4.  <span data-ttu-id="b9b0e-163">Escriba la contraseña que desbloquea el archivo.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-163">Type the password that unlocks the file.</span></span>  
  
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
####  <a name="restore-encryption-keys---rskeymgmt-native-mode"></a><a name="bkmk_restore_rskeymgmt"></a> <span data-ttu-id="b9b0e-164">Restaurar las claves de cifrado: rskeymgmt (modo nativo)</span><span class="sxs-lookup"><span data-stu-id="b9b0e-164">Restore encryption keys - rskeymgmt (Native Mode)</span></span>  
  
1.  <span data-ttu-id="b9b0e-165">Ejecute **rskeymgmt.exe** localmente en el equipo que hospeda el servidor de informes.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-165">Run **rskeymgmt.exe** locally on the computer that hosts the report server.</span></span> <span data-ttu-id="b9b0e-166">Utilice el argumento `-a` para restaurar las claves.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-166">Use the `-a` argument to restore the keys.</span></span> <span data-ttu-id="b9b0e-167">Debe proporcionar un nombre de archivo completo y especificar una contraseña.</span><span class="sxs-lookup"><span data-stu-id="b9b0e-167">You must provide a fully-qualified file name and specify a password.</span></span> <span data-ttu-id="b9b0e-168">El siguiente ejemplo ilustra los argumentos que debe especificar:</span><span class="sxs-lookup"><span data-stu-id="b9b0e-168">The following example illustrates the arguments you must specify:</span></span>  
  
    ```cmd
    rskeymgmt -a -f d:\rsdbkey.snk -p<password>  
    ```  
  
## <a name="see-also"></a><span data-ttu-id="b9b0e-169">Consulte también</span><span class="sxs-lookup"><span data-stu-id="b9b0e-169">See Also</span></span>  
 [<span data-ttu-id="b9b0e-170">Configurar y administrar claves de cifrado &#40;Administrador de configuración de SSRS&#41;</span><span class="sxs-lookup"><span data-stu-id="b9b0e-170">Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;</span></span>](ssrs-encryption-keys-manage-encryption-keys.md)  
