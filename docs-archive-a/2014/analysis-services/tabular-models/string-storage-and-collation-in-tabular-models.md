---
title: Almacenamiento e intercalación de cadenas en modelos tabulares | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 8516f0ad-32ee-4688-a304-e705143642ca
author: minewiskan
ms.author: owend
ms.openlocfilehash: 3aad4cf16c39897bc0796f4fb161eaf39abdb5fd
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87748936"
---
# <a name="string-storage-and-collation-in-tabular-models"></a><span data-ttu-id="a4aa4-102">Almacenamiento e intercalación de cadenas en modelos tabulares</span><span class="sxs-lookup"><span data-stu-id="a4aa4-102">String Storage and Collation in Tabular Models</span></span>
  <span data-ttu-id="a4aa4-103">Las cadenas (valores de texto) se almacenan en los modelos tabulares utilizando un formato muy comprimido; debido a esta compresión, puede obtener resultados inesperados al recuperar cadenas completas o parciales.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-103">Strings (text values) are stored in a highly compressed format in tabular models; because of this compression, you can get unexpected results when you retrieve entire or partial strings.</span></span> <span data-ttu-id="a4aa4-104">Además, dado que la configuración regional y las intercalaciones de las cadenas se heredan jerárquicamente del objeto primario más próximo, si no se define explícitamente el idioma de las cadenas, la configuración regional y la intercalación del elemento primario pueden afectar a la forma de almacenamiento de cada una de las cadenas y determinar si la cadena es única o se combina con cadenas similares tal como se define en la intercalación primaria.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-104">Also, because string locale and collations are inherited hierarchically from the closest parent object, if the string language is not explicitly defined, the locale and collation of the parent can affect how each string is stored and whether the string is unique or conflated with similar strings as defined by the parent collation.</span></span>  
  
 <span data-ttu-id="a4aa4-105">En este tema se describe el mecanismo mediante el cual se comprimen y almacenan las cadenas, y se proporcionan ejemplos de cómo afectan la intercalación y el idioma a los resultados de las fórmulas de texto en los modelos tabulares.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-105">This topic describes the mechanism by which strings are compressed and stored, and provides examples of how collation and language affect the results of text formulas in tabular models.</span></span>  
  
## <a name="storage"></a><span data-ttu-id="a4aa4-106">Storage</span><span class="sxs-lookup"><span data-stu-id="a4aa4-106">Storage</span></span>  
 <span data-ttu-id="a4aa4-107">En los modelos tabulares, todos los datos están muy comprimidos para que puedan almacenarse sin problemas en la memoria.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-107">In tabular models all data is highly compressed to better fit in memory.</span></span> <span data-ttu-id="a4aa4-108">En consecuencia, todas las cadenas consideradas léxicamente equivalentes se almacenan solo una vez.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-108">As a consequence, all strings that can be considered lexically equivalent are stored only once.</span></span> <span data-ttu-id="a4aa4-109">La primera instancia de la cadena se utiliza como la representación canónica y a partir de este momento cada cadena equivalente se indiza al mismo valor comprimido que la primera repetición.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-109">The first instance of the string is used as the canonical representation and thereafter each equivalent string is indexed to the same compressed value as the first occurrence.</span></span>  
  
 <span data-ttu-id="a4aa4-110">La pregunta clave es: ¿qué constituye una cadena léxicamente equivalente?</span><span class="sxs-lookup"><span data-stu-id="a4aa4-110">The key question is: what constitutes a lexically equivalent string?</span></span> <span data-ttu-id="a4aa4-111">Dos cadenas se consideran léxicamente equivalentes si se pueden considerar como la misma palabra.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-111">Two strings are considered lexically equivalent if they can be considered as the same word.</span></span> <span data-ttu-id="a4aa4-112">Por ejemplo, cuando busca la palabra **violin** en inglés en un diccionario, puede encontrar la entrada **Violin** o **violin**, dependiendo de la directiva editorial del diccionario, pero generalmente considerará ambas palabras equivalentes, y no tendrá en cuenta la diferencia en el uso de mayúsculas.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-112">For example, in English when you search for the word **violin** in a dictionary, you might find the entry **Violin** or **violin**, depending on the editorial policy of the dictionary, but generally you consider both words equivalent, and disregard the difference in capitalization.</span></span> <span data-ttu-id="a4aa4-113">En un modelo tabular, el factor que determina si dos cadenas son léxicamente equivalentes no es la directiva editorial ni las preferencias del usuario, sino la configuración regional y la intercalación asignadas a la columna.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-113">In a tabular model, the factor that determines whether two strings are lexically equivalent is not editorial policy or even user preference, but the locale and collation order assigned to the column.</span></span>  
  
 <span data-ttu-id="a4aa4-114">Por lo tanto, la decisión de si las letras mayúsculas y minúsculas se deben considerar iguales o diferentes dependerá de la intercalación y de la configuración regional.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-114">Therefore, the decision of whether uppercase and lowercase letters should be handled as the same or different depends on the collation and locale.</span></span> <span data-ttu-id="a4aa4-115">De esta manera, para cualquier palabra concreta incluida en esa configuración regional, la primera repetición que se encuentre dentro una determinada columna actuará como la representación canónica de dicha palabra, y la cadena se almacenará en un formato sin comprimir.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-115">For any particular word within that locale, the first occurrence of the word that is found within a particular column therefore serves as the canonical representation of that word and that string is stored in uncompressed format.</span></span>  <span data-ttu-id="a4aa4-116">Todas las demás cadenas se compararán con la primera repetición y, si pasan la prueba de equivalencia, se asignarán al valor comprimido de dicha repetición.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-116">All other strings are tested against the first occurrence, and if they match the equivalence test, they are assigned to the compressed value of the first occurrence.</span></span> <span data-ttu-id="a4aa4-117">Más adelante, cuando se recuperen los valores comprimidos, se representarán mediante el valor sin comprimir de la primera repetición de la cadena.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-117">Later, when the compressed values are retrieved they are represented using the uncompressed value of the first occurrence of the string.</span></span>  
  
 <span data-ttu-id="a4aa4-118">Un ejemplo ayudará a clarificar su funcionamiento.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-118">An example will help to clarify how this works.</span></span> <span data-ttu-id="a4aa4-119">La columna siguiente, "Classification - English", se ha extraído de una tabla que contiene información sobre plantas y árboles.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-119">The following column "Classification - English" was extracted from a table that contains information about plants and trees.</span></span> <span data-ttu-id="a4aa4-120">La columna de clasificación muestra la categoría general para cada planta (los nombres de las plantas no se muestran aquí).</span><span class="sxs-lookup"><span data-stu-id="a4aa4-120">For each plant (the names of the plants are not shown here) the classification column shows the general category of plant.</span></span>  
  
|<span data-ttu-id="a4aa4-121">Classification - English</span><span class="sxs-lookup"><span data-stu-id="a4aa4-121">Classification - English</span></span>|  
|-------------------------------|  
|<span data-ttu-id="a4aa4-122">trEE</span><span class="sxs-lookup"><span data-stu-id="a4aa4-122">trEE</span></span>|  
|<span data-ttu-id="a4aa4-123">PlAnT</span><span class="sxs-lookup"><span data-stu-id="a4aa4-123">PlAnT</span></span>|  
|<span data-ttu-id="a4aa4-124">trEE</span><span class="sxs-lookup"><span data-stu-id="a4aa4-124">TREE</span></span>|  
|<span data-ttu-id="a4aa4-125">PlAnT</span><span class="sxs-lookup"><span data-stu-id="a4aa4-125">PLANT</span></span>|  
|<span data-ttu-id="a4aa4-126">Plant</span><span class="sxs-lookup"><span data-stu-id="a4aa4-126">Plant</span></span>|  
|<span data-ttu-id="a4aa4-127">Árbol</span><span class="sxs-lookup"><span data-stu-id="a4aa4-127">Tree</span></span>|  
|<span data-ttu-id="a4aa4-128">PlAnT</span><span class="sxs-lookup"><span data-stu-id="a4aa4-128">plant</span></span>|  
|<span data-ttu-id="a4aa4-129">trEE</span><span class="sxs-lookup"><span data-stu-id="a4aa4-129">tReE</span></span>|  
|<span data-ttu-id="a4aa4-130">tree</span><span class="sxs-lookup"><span data-stu-id="a4aa4-130">tree</span></span>|  
|<span data-ttu-id="a4aa4-131">PlAnT</span><span class="sxs-lookup"><span data-stu-id="a4aa4-131">pLaNt</span></span>|  
|<span data-ttu-id="a4aa4-132">trEE</span><span class="sxs-lookup"><span data-stu-id="a4aa4-132">tREE</span></span>|  
  
 <span data-ttu-id="a4aa4-133">Es posible que los datos procediesen de varios orígenes diferentes, y por lo tanto el estilo de mayúsculas y minúsculas y el uso de los acentos fuese incoherente, y la base de datos relacional almacenase estas diferencias tal cual.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-133">Perhaps the data came from many different sources, and so the casing and use of accents was inconsistent, and the relational database stored those differences as is.</span></span> <span data-ttu-id="a4aa4-134">Pero, en general, los valores son **Plant** o **Tree**, solo que con estilos distintos de mayúscula y minúscula.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-134">But in general the values are either **Plant** or **Tree**, just with different casing.</span></span>  
  
 <span data-ttu-id="a4aa4-135">Cuando estos valores se cargan en un modelo tabular que utiliza la intercalación y el criterio de ordenación predeterminados para inglés (Estados Unidos), el caso no es importante, por lo que solo se almacenarán dos valores para toda la columna:</span><span class="sxs-lookup"><span data-stu-id="a4aa4-135">When these values are loaded into a tabular model that uses the default collation and sorting order for English (United States), case is not important, so only two values would be stored for the entire column:</span></span>  
  
|<span data-ttu-id="a4aa4-136">Classification - English</span><span class="sxs-lookup"><span data-stu-id="a4aa4-136">Classification - English</span></span>|  
|-------------------------------|  
|<span data-ttu-id="a4aa4-137">trEE</span><span class="sxs-lookup"><span data-stu-id="a4aa4-137">trEE</span></span>|  
|<span data-ttu-id="a4aa4-138">PlAnT</span><span class="sxs-lookup"><span data-stu-id="a4aa4-138">PlAnT</span></span>|  
  
 <span data-ttu-id="a4aa4-139">Si usa la columna **clasificación-inglés**en el modelo, siempre que muestre la clasificación de planta, no verá los valores originales, con sus distintos usos de mayúsculas y minúsculas, sino solo la primera instancia.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-139">If you use the column, **Classification - English**, in your model, wherever you display plant classification you will see not the original values, with their various uses of upper and lower case, but only the first instance.</span></span> <span data-ttu-id="a4aa4-140">El motivo es que todas las variantes de mayúsculas y minúsculas de **tree** se consideran equivalentes en esta intercalación y configuración regional; por lo tanto, solo se conservó una cadena y la primera instancia de esta que encuentre el sistema será la que se guarde.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-140">The reason is that all the uppercase and lowercase variants of **tree** are considered equivalent in this collation and locale; therefore, only one string was preserved and the first instance of that string that is encountered by the system is the one that is saved.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="a4aa4-141">Quizá decida que desea definir la cadena que se almacenará en primer lugar, de acuerdo con lo que considera correcto, pero esto puede resultar muy difícil.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-141">You might decide that you want to define which string will be the first to store, according to what you consider correct, but this could be very hard to so.</span></span> <span data-ttu-id="a4aa4-142">No es fácil determinar con antelación qué fila debe procesar el motor en primer lugar, dado que todos los valores se consideran iguales.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-142">There is no simple way to determine in advance which row should be processed first by the engine, given that all values are considered to be the same.</span></span> <span data-ttu-id="a4aa4-143">En lugar de ello, si necesita establecer el valor estándar, deberá limpiar todas las cadenas antes de cargar el modelo.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-143">Instead, if you need to set the standard value, you should cleanse all your strings before loading the model.</span></span>  
  
## <a name="locale-and-collation-order"></a><span data-ttu-id="a4aa4-144">Orden de la intercalación y de la configuración regional</span><span class="sxs-lookup"><span data-stu-id="a4aa4-144">Locale and Collation Order</span></span>  
 <span data-ttu-id="a4aa4-145">Cuando se comparan cadenas (valores de texto), lo que define la equivalencia es normalmente el aspecto cultural de cómo se interpretan dichas cadenas.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-145">When comparing strings (text values), what defines equivalence is normally the cultural aspect of how such strings are interpreted.</span></span> <span data-ttu-id="a4aa4-146">En algunas referencias culturales, el acento o el uso de mayúsculas en un carácter puede cambiar completamente el significado de la cadena; por lo tanto, normalmente están diferencias se tienen en consideración a la hora de determinar la equivalencia para un idioma o una región concretos.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-146">In some cultures an accent or the capitalization of a character can completely change the meaning of the string; therefore, typically such differences are considered when determining equivalency for any particular language or region.</span></span>  
  
 <span data-ttu-id="a4aa4-147">Generalmente, cuando utiliza su equipo, este ya está configurado para que reconozca sus propias expectativas culturales y comportamientos lingüísticos, y las operaciones de cadena como la ordenación y la comparación de valores de texto se comportan de la forma esperada.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-147">Usually, when you use your computer it is already configured to match your own cultural expectations and linguistic behavior, and string operations such as sorting and comparing text values behaves as you would expect.</span></span> <span data-ttu-id="a4aa4-148">La configuración que controla el comportamiento específico del idioma se define con los valores de **Configuración regional** de Windows.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-148">The settings that control language-specific behavior are defined through the **Locale and Regional** settings in Windows.</span></span> <span data-ttu-id="a4aa4-149">Las aplicaciones leen estos valores y cambian su comportamiento en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-149">Applications read those settings and change their behavior accordingly.</span></span> <span data-ttu-id="a4aa4-150">En algunos casos, una aplicación puede incluir una característica que le permita cambiar su comportamiento cultural o la manera en que se comparan las cadenas.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-150">In some cases, an application might have a feature that allows you to change the cultural behavior of the application or the way in which strings are compared.</span></span>  
  
 <span data-ttu-id="a4aa4-151">Cuando se crea una base de datos de modelos tabulares, esta hereda de forma predeterminada estos valores culturales y lingüísticos en forma de un identificador de idioma y una intercalación.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-151">When you are creating a tabular model database, by default the database inherits these cultural and linguistic settings in the form of a language identifier and collation.</span></span>  
  
-   <span data-ttu-id="a4aa4-152">El identificador de idioma define el juego de caracteres que se desea utilizar para las cadenas en función de las referencias culturales.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-152">The language identifier defines the character set you want to use for your strings according to your culture.</span></span>  
  
-   <span data-ttu-id="a4aa4-153">La intercalación define el orden de los caracteres y su equivalencia.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-153">The collation defines the ordering of the characters and their equivalence.</span></span>  
  
 <span data-ttu-id="a4aa4-154">Es importante resaltar que un identificador de idioma no solo identifica un idioma, sino también el país o la región donde se utiliza dicho idioma.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-154">It is important to note that a language identifier not only identifies a language but, also the country or region where the language is used.</span></span> <span data-ttu-id="a4aa4-155">Cada identificador de idioma también tiene una especificación de intercalación predeterminada.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-155">Each language identifier also has a default collation specification.</span></span> <span data-ttu-id="a4aa4-156">Para obtener más información acerca de los identificadores de idioma, vea [Id. de configuración regional asignados por Microsoft](https://msdn.microsoft.com/goglobal/bb964664.aspx).</span><span class="sxs-lookup"><span data-stu-id="a4aa4-156">For more information about language identifiers, see [Locale IDs Assigned by Microsoft](https://msdn.microsoft.com/goglobal/bb964664.aspx).</span></span> <span data-ttu-id="a4aa4-157">Puede utilizar la columna LCID Dec para obtener el identificador correcto al insertar manualmente un valor.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-157">You can use the LCID Dec column to get the correct ID when manually inserting a value.</span></span> <span data-ttu-id="a4aa4-158">Para más información sobre el concepto de intercalaciones en SQL, vea [COLLATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/collations).</span><span class="sxs-lookup"><span data-stu-id="a4aa4-158">For more information about the SQL concept of collations, see [COLLATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/collations).</span></span> <span data-ttu-id="a4aa4-159">Para obtener información sobre los designadores de colación y los estilos de comparación para los nombres de intercalación de Windows, vea [Nombre de intercalación de Windows &#40;Transact-SQL&#41;](/sql/t-sql/statements/windows-collation-name-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="a4aa4-159">For information about the collation designators and the comparison styles for Windows collation names, see [Windows Collation Name &#40;Transact-SQL&#41;](/sql/t-sql/statements/windows-collation-name-transact-sql).</span></span> <span data-ttu-id="a4aa4-160">En el tema [Nombre de intercalación de SQL Server &#40;Transact-SQL&#41;](/sql/t-sql/statements/sql-server-collation-name-transact-sql) se asignan los nombres de intercalación de Windows a los nombres usados para SQL.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-160">The topic, [SQL Server Collation Name &#40;Transact-SQL&#41;](/sql/t-sql/statements/sql-server-collation-name-transact-sql), maps the Windows collation names to the names used for SQL.</span></span>  
  
 <span data-ttu-id="a4aa4-161">Una vez creada la base de datos de modelos tabulares, todos los objetos nuevos del modelo heredarán los atributos de idioma y de intercalación de los atributos de base de datos.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-161">Once your tabular model database has been created, all new objects in the model will inherit the language and collation attributes from the database attributes.</span></span> <span data-ttu-id="a4aa4-162">Esto es válido para todos los objetos.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-162">This is true for all objects.</span></span> <span data-ttu-id="a4aa4-163">La ruta de herencia comienza en el objeto, examina el elemento primario para comprobar si se debe heredar algún atributo de idioma y de intercalación y, si no encuentra ninguno, continúa hacia la parte superior y busca los atributos de idioma e intercalación en el nivel de base de datos.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-163">The inheritance path begins at the object, looks at the parent for any language and collation attributes to inherit, and if none are found, continues to the top and finds the language and collation attributes at the database level.</span></span> <span data-ttu-id="a4aa4-164">En otras palabras, si no se especifican los atributos de idioma y de intercalación para un objeto, este hereda de forma predeterminada los atributos de su elemento primario más próximo.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-164">In other words, if you do not specify the language and collation attributes for an object, by default, the object inherits the attributes of its closest parent.</span></span>  
  
 <span data-ttu-id="a4aa4-165">En las columnas, los atributos de idioma y de intercalación se heredan en el momento de su creación, según las reglas siguientes:</span><span class="sxs-lookup"><span data-stu-id="a4aa4-165">For columns, the language and collation attributes are inherited at creation, according to the following rules:</span></span>  
  
1.  <span data-ttu-id="a4aa4-166">Los atributos de idioma y de intercalación se buscan en el objeto de dimensión primario.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-166">The parent dimension object is searched for language and collation attributes.</span></span> <span data-ttu-id="a4aa4-167">Si existen ambos valores, estos se copian a los atributos de la columna; si solo existe uno de ellos, el otro se deduce de este y se asignan ambos; si no existe ninguno, ir al paso siguiente.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-167">If both values exist, they are copied to the column attributes; if only one exists, the other is inferred from the existing one and both are assigned; if none exist, move to next step.</span></span>  
  
2.  <span data-ttu-id="a4aa4-168">Los atributos se buscan en el objeto de base de datos utilizando el mismo proceso descrito en el paso 1 para las dimensiones; si no se encuentra ninguno, ir al paso siguiente.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-168">The database object is searched using the same process described in Step 1 for dimensions; if no attributes are found, move to the next step.</span></span>  
  
3.  <span data-ttu-id="a4aa4-169">Los atributos se buscan en el objeto de servidor utilizando el mismo proceso descrito en el paso 1 para las dimensiones; si no se encuentra ninguno, la columna utiliza el identificador de idioma de Windows y deduce el atributo de intercalación de ese valor.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-169">The server object is searched using the same process described in Step 1 for dimensions; if no attributes are found, the column uses the Windows language identifier and infers the collation attribute from that value.</span></span>  
  
 <span data-ttu-id="a4aa4-170">Es importante resaltar que, normalmente, el identificador de idioma y la intercalación de la base de datos de origen apenas influyen en la forma en la que se almacenan los valores en la columna del modelo tabular.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-170">It is important to note that typically the language identifier and collation order in the source database has little to no effect on how values are stored in the tabular model column.</span></span> <span data-ttu-id="a4aa4-171">La excepción es cuando la base de datos de origen transforma o filtra los valores solicitados.</span><span class="sxs-lookup"><span data-stu-id="a4aa4-171">The exception is if the source database transforms or filters the requested values.</span></span>  
  
  
