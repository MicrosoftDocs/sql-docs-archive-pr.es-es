---
title: Definir una relación de varios a varios | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 7bebb174-148c-4cbb-a285-2f6d536a16d5
author: minewiskan
ms.author: owend
ms.openlocfilehash: fb4e18831ae23b8cf1f0702b357672f7520478a8
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87745493"
---
# <a name="defining-a-many-to-many-relationship"></a><span data-ttu-id="619b5-102">Definir una relación de varios a varios</span><span class="sxs-lookup"><span data-stu-id="619b5-102">Defining a Many-to-Many Relationship</span></span>
  <span data-ttu-id="619b5-103">Generalmente, cuando se define una dimensión cada hecho se combina con un único miembro de dimensión, mientras que un mismo miembro puede estar asociado a varios hechos distintos.</span><span class="sxs-lookup"><span data-stu-id="619b5-103">When you define a dimension, typically each fact joins to one and only one dimension member, whereas a single dimension member can be associated with many different facts.</span></span> <span data-ttu-id="619b5-104">Por ejemplo, cada cliente puede tener varios pedidos, pero cada pedido pertenece a un solo cliente.</span><span class="sxs-lookup"><span data-stu-id="619b5-104">For example, each customer can have many orders but each order belongs to a single customer.</span></span> <span data-ttu-id="619b5-105">En terminología de bases de datos relacionales, esto se conoce como una *relación de uno a varios*.</span><span class="sxs-lookup"><span data-stu-id="619b5-105">In relational database terminology, this is referred to as a *one-to-many relationship*.</span></span> <span data-ttu-id="619b5-106">No obstante, algunas veces un único hecho puede combinarse con varios miembros de dimensión.</span><span class="sxs-lookup"><span data-stu-id="619b5-106">However, sometimes a single fact can join to multiple dimension members.</span></span> <span data-ttu-id="619b5-107">En terminología de bases de datos relacionales, esto se conoce como *relación de varios a varios*.</span><span class="sxs-lookup"><span data-stu-id="619b5-107">In relational database terminology, this is referred to as a *many-to-many relationship*.</span></span> <span data-ttu-id="619b5-108">Por ejemplo, un cliente puede tener varios motivos para realizar una compra, y un motivo de compra puede estar asociado a varias compras.</span><span class="sxs-lookup"><span data-stu-id="619b5-108">For example, a customer may have multiple reasons for making a purchase, and a purchase reason can be associated with multiple purchases.</span></span> <span data-ttu-id="619b5-109">Para definir los motivos de venta que se relacionan con cada compra, se utiliza una tabla de combinación.</span><span class="sxs-lookup"><span data-stu-id="619b5-109">A join table is used to define the sales reasons that relate to each purchase.</span></span> <span data-ttu-id="619b5-110">Una dimensión de motivo de venta creada a partir de relaciones de este tipo tendría varios miembros que estarían relacionados a una única transacción de venta.</span><span class="sxs-lookup"><span data-stu-id="619b5-110">A Sales Reason dimension constructed from such relationships would then have multiple members that relate to a single sales transaction.</span></span> <span data-ttu-id="619b5-111">Las dimensiones de varios a varios amplían el modelo dimensional más allá del esquema de estrella y admiten análisis complejos cuando las dimensiones no están directamente relacionadas con una tabla de hechos.</span><span class="sxs-lookup"><span data-stu-id="619b5-111">Many-to-many dimensions expand the dimensional model beyond the classic star schema and support complex analytics when dimensions are not directly related to a fact table.</span></span>

 <span data-ttu-id="619b5-112">En [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)], para definir una relación de varios a varios entre una dimensión y un grupo de medida se especifica una tabla de hechos intermedia que está combinada con la tabla de dimensiones.</span><span class="sxs-lookup"><span data-stu-id="619b5-112">In [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)], you define a many-to-many relationship between a dimension and a measure group by specifying an intermediate fact table that is joined to the dimension table.</span></span> <span data-ttu-id="619b5-113">Una tabla de hechos intermedia, a su vez, se combina con una tabla de dimensiones intermedia con la que la tabla de hechos está combinada.</span><span class="sxs-lookup"><span data-stu-id="619b5-113">An intermediate fact table is joined, in turn, to an intermediate dimension table to which the fact table is joined.</span></span> <span data-ttu-id="619b5-114">Las relaciones de varios a varios entre la tabla de hechos intermedia y las tablas de dimensiones de la relación y la dimensión intermedia crean las relaciones de varios a varios entre los miembros de dimensión primaria y las medidas del grupo de medida especificado por la relación.</span><span class="sxs-lookup"><span data-stu-id="619b5-114">The many-to-many relationships between the intermediate fact table and both the dimension tables in the relationship and the intermediate dimension creates the many-to-many relationships between members of the primary dimension and measures in the measure group that is specified by the relationship.</span></span> <span data-ttu-id="619b5-115">Para definir una relación de varios a varios entre una dimensión y un grupo de medida a través de un grupo de medida intermedio, el grupo de medida intermedio debe compartir una o varias dimensiones con el grupo de medida original.</span><span class="sxs-lookup"><span data-stu-id="619b5-115">In order to define a many-to-many relationship between a dimension and a measure group through an intermediate measure group, the intermediate measure group must share one or more dimensions with the original measure group.</span></span>

 <span data-ttu-id="619b5-116">Con una dimensión de varios a varios, los valores distintos se suman, lo que significa que no se agregan más de una vez al miembro Todos.</span><span class="sxs-lookup"><span data-stu-id="619b5-116">With a many-to-many dimension, values are distinct summed, which means that they do not aggregate more than once to the All member.</span></span>

> [!NOTE]
>  <span data-ttu-id="619b5-117">Para admitir una relación de dimensión de varios a varios, se debe definir una relación de clave principal y clave externa en la vista del origen de datos entre todas las tablas implicadas.</span><span class="sxs-lookup"><span data-stu-id="619b5-117">In order to support a many-to-many dimension relationship, a primary key-foreign key relationship must be defined in the data source view between all the tables that are involved.</span></span> <span data-ttu-id="619b5-118">De lo contrario, no podrá seleccionar el grupo de medida intermedio correcto cuando establezca la relación en la pestaña **Uso de dimensiones** del Diseñador de cubos.</span><span class="sxs-lookup"><span data-stu-id="619b5-118">Otherwise, you will not be able to select the correct intermediate measure group when you establish the relationship in the **Dimension Usage** tab of Cube Designer.</span></span>

 <span data-ttu-id="619b5-119">Para obtener más información, consulte [Relaciones de dimensión](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md)y [Definir una relación de varios a varios y las propiedades de las relaciones de varios a varios](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).</span><span class="sxs-lookup"><span data-stu-id="619b5-119">For more information, see [Dimension Relationships](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md), and [Define a Many-to-Many Relationship and Many-to-Many Relationship Properties](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).</span></span>

 <span data-ttu-id="619b5-120">En las tareas de este tema, debe definir la dimensión Sales Reasons y el grupo de medida Sales Reasons, y definir una relación de varios a varios entre la dimensión Sales Reasons y el grupo de medida Internet Sales a través del grupo de medida Sales Reasons.</span><span class="sxs-lookup"><span data-stu-id="619b5-120">In the tasks in this topic, you define the Sales Reasons dimension and the Sales Reasons measure group, and you define a many-to-many relationship between the Sales Reasons dimension and the Internet Sales measure group through the Sales Reasons measure group.</span></span>

## <a name="adding-required-tables-to-the-data-source-view"></a><span data-ttu-id="619b5-121">Agregar tablas necesarias a la vista del origen de datos</span><span class="sxs-lookup"><span data-stu-id="619b5-121">Adding Required Tables to the Data Source View</span></span>

1.  <span data-ttu-id="619b5-122">Abra el Diseñador de vistas del origen de datos para la vista del origen de datos **Adventure Works DW 2012** .</span><span class="sxs-lookup"><span data-stu-id="619b5-122">Open Data Source View Designer for the **Adventure Works DW 2012** data source view.</span></span>

2.  <span data-ttu-id="619b5-123">Haga clic con el botón secundario en cualquier lugar del panel **organizador de diagramas** , haga clic en **nuevo diagrama**y especifique `Internet Sales Order Reasons` como nombre de este nuevo diagrama.</span><span class="sxs-lookup"><span data-stu-id="619b5-123">Right-click anywhere in the **Diagram Organizer** pane, click **New Diagram**, and specify `Internet Sales Order Reasons` as the name for this new diagram.</span></span>

3.  <span data-ttu-id="619b5-124">Arrastre la tabla **InternetSales** al panel **Diagrama** desde el panel **Tablas** .</span><span class="sxs-lookup"><span data-stu-id="619b5-124">Drag the **InternetSales** table to the **Diagram** pane from the **Tables** pane.</span></span>

4.  <span data-ttu-id="619b5-125">Haga clic con el botón derecho en cualquier punto del panel **Diagrama** y luego haga clic en **Agregar o quitar tablas**.</span><span class="sxs-lookup"><span data-stu-id="619b5-125">Right-click anywhere in the **Diagram** pane, and then click **Add/Remove Tables**.</span></span>

5.  <span data-ttu-id="619b5-126">En el cuadro de diálogo **Agregar o quitar tablas** , agregue la tabla **DimSalesReason** y la tabla **FactInternetSalesReason** a la lista **Objetos incluidos** y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="619b5-126">In the **Add/Remove Tables** dialog box, add the **DimSalesReason** table and the **FactInternetSalesReason** table to the **Included objects** list, and then click **OK**.</span></span>

     <span data-ttu-id="619b5-127">Observe que las relaciones de clave principal y clave externa entre las tablas implicadas se establecen automáticamente porque dichas relaciones se definen en la base de datos relacional subyacente.</span><span class="sxs-lookup"><span data-stu-id="619b5-127">Notice that the primary key-foreign key relationships between the tables that are involved are established automatically because those relationships are defined in the underlying relational database.</span></span> <span data-ttu-id="619b5-128">Si dichas relaciones no se hubiesen definido en la base de datos relacional subyacente, tendría que definirlas en la vista del origen de datos.</span><span class="sxs-lookup"><span data-stu-id="619b5-128">If these relationships were not defined in the underlying relational database, you would have to define them in the data source view.</span></span>

6.  <span data-ttu-id="619b5-129">En el menú **Formato** , seleccione **Diseño automático**y haga clic en **Diagrama**.</span><span class="sxs-lookup"><span data-stu-id="619b5-129">On the **Format** menu, point to **Auto Layout**, and then click **Diagram**.</span></span>

7.  <span data-ttu-id="619b5-130">En el ventana Propiedades, cambie la propiedad **FriendlyName** de la tabla **DimSalesReason** a `SalesReason` y, a continuación, cambie la propiedad **FriendlyName** de la tabla **FactInternetSalesReason** a `InternetSalesReason` .</span><span class="sxs-lookup"><span data-stu-id="619b5-130">In the Properties window, change the **FriendlyName** property of the **DimSalesReason** table to `SalesReason`, and then change the **FriendlyName** property of the **FactInternetSalesReason** table to `InternetSalesReason`.</span></span>

8.  <span data-ttu-id="619b5-131">En el panel **Tablas** , expanda **InternetSalesReason (dbo.FactInternetSalesReason)**, haga clic en **SalesOrderNumber**y luego revise la propiedad **DataType** para esta columna de datos en la ventana Propiedades.</span><span class="sxs-lookup"><span data-stu-id="619b5-131">In the **Tables** pane, expand **InternetSalesReason (dbo.FactInternetSalesReason)**, click **SalesOrderNumber**, and then review the **DataType** property for this data column in the Properties window.</span></span>

     <span data-ttu-id="619b5-132">Observe que el tipo de datos para la columna **SalesOrderNumber** es un tipo de datos de cadena.</span><span class="sxs-lookup"><span data-stu-id="619b5-132">Notice that the data type for the **SalesOrderNumber** column is a string data type.</span></span>

9. <span data-ttu-id="619b5-133">Revise los tipos de datos de las demás columnas de la `InternetSalesReason` tabla.</span><span class="sxs-lookup"><span data-stu-id="619b5-133">Review the data types for the other columns in the `InternetSalesReason` table.</span></span>

     <span data-ttu-id="619b5-134">Observe que los datos de las otras dos columnas de esta tabla son de tipo numérico.</span><span class="sxs-lookup"><span data-stu-id="619b5-134">Notice that the data types for the other two columns in this table are numeric data types.</span></span>

10. <span data-ttu-id="619b5-135">En el panel **Tablas** , haga clic con el botón derecho en **InternetSalesReason (dbo.FactInternetSalesReason)** y seleccione **Explorar datos**.</span><span class="sxs-lookup"><span data-stu-id="619b5-135">In the **Tables** pane, right-click **InternetSalesReason (dbo.FactInternetSalesReason)**, and then click **Explore Data**.</span></span>

     <span data-ttu-id="619b5-136">Observe que, para cada número de línea de cada pedido, un valor clave identifica el motivo de venta para la compra del artículo de la línea, como se muestra en la imagen siguiente.</span><span class="sxs-lookup"><span data-stu-id="619b5-136">Notice that, for each line number within each order, a key value identifies the sales reason for the purchase of that line item, as shown in the following image.</span></span>

     <span data-ttu-id="619b5-137">![Valor de clave para identificar la razón de venta para adquisiciones](../../2014/tutorials/media/l5-many-to-many-1.gif "Valor de clave para identificar la razón de venta para adquisiciones")</span><span class="sxs-lookup"><span data-stu-id="619b5-137">![Key value to identify sales reason for purchases](../../2014/tutorials/media/l5-many-to-many-1.gif "Key value to identify sales reason for purchases")</span></span>

## <a name="defining-the-intermediate-measure-group"></a><span data-ttu-id="619b5-138">Definir el grupo de medida intermedio</span><span class="sxs-lookup"><span data-stu-id="619b5-138">Defining the Intermediate Measure Group</span></span>

1.  <span data-ttu-id="619b5-139">Cambie al Diseñador de cubos para el cubo Tutorial de [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] y haga clic en la pestaña **Estructura de cubo** .</span><span class="sxs-lookup"><span data-stu-id="619b5-139">Switch to Cube Designer for the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube, and then click the **Cube Structure** tab.</span></span>

2.  <span data-ttu-id="619b5-140">Haga clic con el botón derecho en cualquier punto del panel **Medidas** y, después, haga clic en **Nuevo grupo de medida**.</span><span class="sxs-lookup"><span data-stu-id="619b5-140">Right-click anywhere in the **Measures** pane, and then click **New Measure Group**.</span></span> <span data-ttu-id="619b5-141">Para obtener más información, consulte [Crear medidas y grupos de medida en modelos multidimensionales](multidimensional-models/create-measures-and-measure-groups-in-multidimensional-models.md).</span><span class="sxs-lookup"><span data-stu-id="619b5-141">For more information, see [Create Measures and Measure Groups in Multidimensional Models](multidimensional-models/create-measures-and-measure-groups-in-multidimensional-models.md).</span></span>

3.  <span data-ttu-id="619b5-142">En el cuadro de diálogo **nuevo grupo de medida** , seleccione `InternetSalesReason` en la lista **Seleccione una tabla de la vista del origen de datos** y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="619b5-142">In the **New Measure Group** dialog box, select `InternetSalesReason` in the **Select a table from the data source view** list, and then click **OK**.</span></span>

     <span data-ttu-id="619b5-143">Observe que el grupo de medida **Internet Sales Reason** ahora aparece en el panel **Medidas** .</span><span class="sxs-lookup"><span data-stu-id="619b5-143">Notice that the **Internet Sales Reason** measure group now appears in the **Measures** pane.</span></span>

4.  <span data-ttu-id="619b5-144">Expanda el grupo de medida **Internet Sales Reason** .</span><span class="sxs-lookup"><span data-stu-id="619b5-144">Expand the **Internet Sales Reason** measure group.</span></span>

     <span data-ttu-id="619b5-145">Como puede observar, solo hay una medida definida para este nuevo grupo de medida, la medida **Internet Sales Reason Count** .</span><span class="sxs-lookup"><span data-stu-id="619b5-145">Notice that only a single measure is defined for this new measure group, the **Internet Sales Reason Count** measure.</span></span>

5.  <span data-ttu-id="619b5-146">Seleccione **Internet Sales Reason Count** y revise las propiedades de esta medida en la ventana Propiedades.</span><span class="sxs-lookup"><span data-stu-id="619b5-146">Select **Internet Sales Reason Count** and review the properties of this measure in the Properties window.</span></span>

     <span data-ttu-id="619b5-147">Observe que la propiedad **AggregateFunction** para esta medida está definida como **Recuento** en lugar de como **Suma**.</span><span class="sxs-lookup"><span data-stu-id="619b5-147">Notice that the **AggregateFunction** property for this measure is defined as **Count** instead of **Sum**.</span></span> [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)]<span data-ttu-id="619b5-148">elige **recuento** porque el tipo de datos subyacente es un tipo de datos de cadena.</span><span class="sxs-lookup"><span data-stu-id="619b5-148">chose **Count** because the underlying data type is a string data type.</span></span> <span data-ttu-id="619b5-149">Las otras dos columnas de la tabla de hechos subyacente no estaban seleccionadas como medias porque [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] las detectó como claves numéricas y no como medidas reales.</span><span class="sxs-lookup"><span data-stu-id="619b5-149">The other two columns in the underlying fact table were not selected as measures because [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] detected them as numeric keys instead of as actual measures.</span></span> <span data-ttu-id="619b5-150">Para obtener más información, consulte [Definir el comportamiento de suma parcial](multidimensional-models/define-semiadditive-behavior.md).</span><span class="sxs-lookup"><span data-stu-id="619b5-150">For more information, see [Define Semiadditive Behavior](multidimensional-models/define-semiadditive-behavior.md).</span></span>

6.  <span data-ttu-id="619b5-151">En la ventana Propiedades, cambie la propiedad **Visible** de la medida **Internet Sales Reason Count** a **False**.</span><span class="sxs-lookup"><span data-stu-id="619b5-151">In the Properties window, change the **Visible** property of the **Internet Sales Reason Count** measure to **False**.</span></span>

     <span data-ttu-id="619b5-152">Esta medida solo podrá utilizarse para combinar la dimensión Sales Reason que definirá junto al grupo de medida Internet Sales.</span><span class="sxs-lookup"><span data-stu-id="619b5-152">This measure will only be used to join the Sales Reason dimension that you will define next to the Internet Sales measure group.</span></span> <span data-ttu-id="619b5-153">Los usuarios no examinarán esta medida directamente.</span><span class="sxs-lookup"><span data-stu-id="619b5-153">Users will not browse this measure directly.</span></span>

     <span data-ttu-id="619b5-154">En la ilustración siguiente se muestran las propiedades de la medida **Internet Sales Reason Count** .</span><span class="sxs-lookup"><span data-stu-id="619b5-154">The following image shows the properties for the **Internet Sales Reason Count** measure.</span></span>

     <span data-ttu-id="619b5-155">![Propiedades de la medida Internet Sales Reason Count](../../2014/tutorials/media/l5-many-to-many-2.gif "Propiedades de la medida Internet Sales Reason Count")</span><span class="sxs-lookup"><span data-stu-id="619b5-155">![Properties for Internet Sales Reason Count measure](../../2014/tutorials/media/l5-many-to-many-2.gif "Properties for Internet Sales Reason Count measure")</span></span>

## <a name="defining-the-many-to-many-dimension"></a><span data-ttu-id="619b5-156">Definir la dimensión de varios a varios</span><span class="sxs-lookup"><span data-stu-id="619b5-156">Defining the Many-to-Many Dimension</span></span>

1.  <span data-ttu-id="619b5-157">En el Explorador de soluciones, haga clic con el botón derecho en **Dimensiones**y, después, haga clic en **Nueva dimensión**.</span><span class="sxs-lookup"><span data-stu-id="619b5-157">In Solution Explorer, right-click **Dimensions**, and then click **New Dimension**.</span></span>

2.  <span data-ttu-id="619b5-158">En la página **Asistente para dimensiones** , haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="619b5-158">On the **Welcome to the Dimension Wizard** page, click **Next**.</span></span>

3.  <span data-ttu-id="619b5-159">En la página **Seleccionar método de creación** , compruebe que la opción **Usar una tabla existente** está seleccionada y, a continuación, haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="619b5-159">On the **Select Creation Method** page, verify that the **Use an existing table** option is selected, and then click **Next**.</span></span>

4.  <span data-ttu-id="619b5-160">En la página **Especificar información de origen** , compruebe que la vista del origen de datos [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] DW 2012 está seleccionada.</span><span class="sxs-lookup"><span data-stu-id="619b5-160">On the **Specify Source Information** page, verify that the [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] DW 2012 data source view is selected.</span></span>

5.  <span data-ttu-id="619b5-161">En la lista **tabla principal** , seleccione `SalesReason` .</span><span class="sxs-lookup"><span data-stu-id="619b5-161">In the **Main table** list, select `SalesReason`.</span></span>

6.  <span data-ttu-id="619b5-162">En la lista **Columnas de clave** , compruebe que aparece **SalesReasonKey** .</span><span class="sxs-lookup"><span data-stu-id="619b5-162">In the **Key columns** list, verify that **SalesReasonKey** is listed.</span></span>

7.  <span data-ttu-id="619b5-163">En la lista **Columna de nombre** , seleccione **SalesReasonName**.</span><span class="sxs-lookup"><span data-stu-id="619b5-163">In the **Name column** list, select **SalesReasonName**.</span></span>

8.  <span data-ttu-id="619b5-164">Haga clic en **Next**.</span><span class="sxs-lookup"><span data-stu-id="619b5-164">Click **Next**.</span></span>

9. <span data-ttu-id="619b5-165">En la página **Seleccionar los atributos de la dimensión** , el atributo **Sales Reason Key** se selecciona automáticamente porque es el atributo clave.</span><span class="sxs-lookup"><span data-stu-id="619b5-165">On the **Select Dimension Attributes** page, the **Sales Reason Key** attribute is automatically selected because it is the key attribute.</span></span> <span data-ttu-id="619b5-166">Active la casilla situada junto al atributo **sales Reason Reason Type** , cambie su nombre a `Sales Reason Type` y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="619b5-166">Select the check box beside the **Sales Reason Reason Type** attribute, change its name to `Sales Reason Type`, and then click **Next**.</span></span>

10. <span data-ttu-id="619b5-167">En la página **Finalización del asistente** , haga clic en **Finalizar** para crear la dimensión Sales Reason.</span><span class="sxs-lookup"><span data-stu-id="619b5-167">On the **Completing the Wizard** page, click **Finish** to create the Sales Reason dimension.</span></span>

11. <span data-ttu-id="619b5-168">En el menú **Archivo**, haga clic en **Guardar todo**.</span><span class="sxs-lookup"><span data-stu-id="619b5-168">On the **File** menu, click **Save All**.</span></span>

12. <span data-ttu-id="619b5-169">En el panel **atributos** del diseñador de dimensiones para la dimensión **sales Reason** , seleccione **sales Reason Key**y, a continuación, cambie la propiedad **Name** en el ventana Propiedades a`Sales Reason.`</span><span class="sxs-lookup"><span data-stu-id="619b5-169">In the **Attributes** pane of the Dimension Designer for the **Sales Reason** dimension, select **Sales Reason Key**, and then change the **Name** property in the Properties window to `Sales Reason.`</span></span>

13. <span data-ttu-id="619b5-170">En el panel **jerarquías** del diseñador de dimensiones, cree una jerarquía de usuario **sales reasons** que contenga el nivel `Sales Reason Type` y el nivel **sales Reason** , en ese orden.</span><span class="sxs-lookup"><span data-stu-id="619b5-170">In the **Hierarchies** pane of the Dimension Designer, create a **Sales Reasons** user hierarchy that contains the `Sales Reason Type` level and the **Sales Reason** level, in that order.</span></span>

14. <span data-ttu-id="619b5-171">En el ventana Propiedades, defina `All Sales Reasons` como el valor de la propiedad **AllMemberName** de la jerarquía sales reasons.</span><span class="sxs-lookup"><span data-stu-id="619b5-171">In the Properties window, define `All Sales Reasons` as the value for the **AllMemberName** property of the Sales Reasons hierarchy.</span></span>

15. <span data-ttu-id="619b5-172">Defina `All Sales Reasons` como el valor de la propiedad **AttributeAllMemberName** de la dimensión sales Reason.</span><span class="sxs-lookup"><span data-stu-id="619b5-172">Define `All Sales Reasons` as the value for **AttributeAllMemberName** property of the Sales Reason dimension.</span></span>

16. <span data-ttu-id="619b5-173">Para agregar la dimensión que acaba de crear al cubo Tutorial de [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] como una dimensión de cubo, cambie al **Diseñador de cubos**.</span><span class="sxs-lookup"><span data-stu-id="619b5-173">To add the newly created dimension to the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube as a cube dimension, switch to **Cube Designer**.</span></span> <span data-ttu-id="619b5-174">En la pestaña **Estructura de cubo** , haga clic con el botón derecho en el panel **Dimensiones** y seleccione **Agregar dimensión de cubo**.</span><span class="sxs-lookup"><span data-stu-id="619b5-174">On the **Cube Structure** tab, right-click in the **Dimensions** pane and select **Add Cube Dimension**.</span></span>

17. <span data-ttu-id="619b5-175">En el cuadro de diálogo **Agregar dimensión de cubo** , seleccione **Sales Reason** y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="619b5-175">In the **Add Cube Dimension** dialog box, select **Sales Reason** and then click **OK**.</span></span>

18. <span data-ttu-id="619b5-176">En el menú **Archivo**, haga clic en **Guardar todo**.</span><span class="sxs-lookup"><span data-stu-id="619b5-176">On the **File** menu, click **Save All**.</span></span>

## <a name="defining-the-many-to-many-relationship"></a><span data-ttu-id="619b5-177">Definir la relación de varios a varios</span><span class="sxs-lookup"><span data-stu-id="619b5-177">Defining the Many to Many Relationship</span></span>

1.  <span data-ttu-id="619b5-178">Cambie al Diseñador de cubos para el cubo Tutorial de [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] y haga clic en la pestaña **Uso de dimensiones** .</span><span class="sxs-lookup"><span data-stu-id="619b5-178">Switch to Cube Designer for the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube, and then click the **Dimension Usage** tab.</span></span>

     <span data-ttu-id="619b5-179">Observe que la dimensión **Sales Reason** tiene una relación regular definida con el grupo de medida **Internet Sales Reason** , pero no tiene ninguna relación definida con los grupos de medida **Internet Sales** ni **Reseller Sales** .</span><span class="sxs-lookup"><span data-stu-id="619b5-179">Notice that the **Sales Reason** dimension has a regular relationship defined with the **Internet Sales Reason** measure group, but has no relationship defined with the **Internet Sales** or **Reseller Sales** measure groups.</span></span> <span data-ttu-id="619b5-180">Observe también que la dimensión **Internet Sales Order Details** tiene una relación normal definida con la dimensión **Internet Sales Reason** , que a su vez tiene una **relación de hechos** con el grupo de medida **Internet Sales** .</span><span class="sxs-lookup"><span data-stu-id="619b5-180">Notice also that the **Internet Sales Order Details** dimension has a regular relationship defined with the **Internet Sales Reason** dimension, which in turn has a **Fact Relationship** with the **Internet Sales** measure group.</span></span> <span data-ttu-id="619b5-181">Si esta dimensión no estaba presente (u otra dimensión con una relación con **Internet Sales Reason** y el grupo de medida **Internet Sales** no estaban presentes), no se podría definir la relación de varios a varios.</span><span class="sxs-lookup"><span data-stu-id="619b5-181">If this dimension was not present (or another dimension with a relationship with both the **Internet Sales Reason** and the **Internet Sales** measure group were not present), you would not be able to define the many-to-many relationship.</span></span>

2.  <span data-ttu-id="619b5-182">Haga clic en la celda en la intersección del grupo de medida **Internet Sales** y la dimensión **Sales Reasons** y, después, haga clic en el botón Examinar (**…**).</span><span class="sxs-lookup"><span data-stu-id="619b5-182">Click the cell at the intersection of the **Internet Sales** measure group and the **Sales Reason** dimension and then click the browse button (**...**).</span></span>

3.  <span data-ttu-id="619b5-183">En el cuadro de diálogo **Definir relación** , seleccione **Varios a varios** en la lista **Seleccionar tipo de relación** .</span><span class="sxs-lookup"><span data-stu-id="619b5-183">In the **Define Relationship** dialog box, select **Many-to-Many** in the **Select relationship type** list.</span></span>

     <span data-ttu-id="619b5-184">Debe definir el grupo de medida intermedio que conecta la dimensión Sales Reason al grupo de medida Internet Sales.</span><span class="sxs-lookup"><span data-stu-id="619b5-184">You have to define the intermediate measure group that connects the Sales Reason dimension to the Internet Sales measure group.</span></span>

4.  <span data-ttu-id="619b5-185">En la lista **Grupo de medida intermedio** , seleccione **Internet Sales Reason**.</span><span class="sxs-lookup"><span data-stu-id="619b5-185">In the **Intermediate measure group** list, select **Internet Sales Reason**.</span></span>

     <span data-ttu-id="619b5-186">En la imagen siguiente se muestran los cambios realizados en el cuadro de diálogo **Definir relación** .</span><span class="sxs-lookup"><span data-stu-id="619b5-186">The following image shows the changes in the **Define Relationship** dialog box.</span></span>

     <span data-ttu-id="619b5-187">![Cuadro de diálogo Definir relación](../../2014/tutorials/media/l5-many-to-many-3.gif "Cuadro de diálogo Definir relación")</span><span class="sxs-lookup"><span data-stu-id="619b5-187">![Define Relationship dialog box](../../2014/tutorials/media/l5-many-to-many-3.gif "Define Relationship dialog box")</span></span>

5.  <span data-ttu-id="619b5-188">Haga clic en **OK**.</span><span class="sxs-lookup"><span data-stu-id="619b5-188">Click **OK**.</span></span>

     <span data-ttu-id="619b5-189">Observe el icono de varios a varios que representa la relación existente entre la dimensión Sales Reason y el grupo de medida Internet Sales.</span><span class="sxs-lookup"><span data-stu-id="619b5-189">Notice the many-to-many icon that represents the relationship between the Sales Reason dimension and the Internet Sales measure group.</span></span>

## <a name="browsing-the-cube-and-the-many-to-many-dimension"></a><span data-ttu-id="619b5-190">Examinar el cubo y la dimensión de varios a varios</span><span class="sxs-lookup"><span data-stu-id="619b5-190">Browsing the Cube and the Many-to-Many Dimension</span></span>

1.  <span data-ttu-id="619b5-191">En el menú **Compilar** , haga clic en **Tutorial de Implementar Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="619b5-191">On the **Build** menu, click **Deploy Analysis Services Tutorial**.</span></span>

2.  <span data-ttu-id="619b5-192">Cuando la implementación se haya completado correctamente, cambie a la pestaña **Explorador** del Diseñador de cubos para el cubo Tutorial de [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] y, a continuación, haga clic en **Volver a conectar**.</span><span class="sxs-lookup"><span data-stu-id="619b5-192">When deployment has successfully completed, switch to the **Browser** tab in Cube Designer for the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube, and then click **Reconnect**.</span></span>

3.  <span data-ttu-id="619b5-193">Agregue la medida **Internet Sales-Sales Amount** al área de datos del panel de datos.</span><span class="sxs-lookup"><span data-stu-id="619b5-193">Add the **Internet Sales-Sales Amount** measure to the data area of the data pane.</span></span>

4.  <span data-ttu-id="619b5-194">Agregue la jerarquía definida por el usuario **Sales Reason** de la dimensión **Sales Reason** al área de filas del panel de datos.</span><span class="sxs-lookup"><span data-stu-id="619b5-194">Add the **Sales Reasons** user-defined hierarchy from the **Sales Reason** dimension to the row area of the data pane.</span></span>

5.  <span data-ttu-id="619b5-195">En el panel de metadatos, expanda sucesivamente **Customer**, **Location**, **Customer Geography**, **Members**, **All Customers**y **Australia**, haga clic con el botón derecho en **Queensland**y, después, haga clic en **Agregar a filtro**.</span><span class="sxs-lookup"><span data-stu-id="619b5-195">In the metadata pane, expand **Customer**, expand **Location**, expand **Customer Geography**, expand **Members**, expand **All Customers**, expand **Australia**, right-click **Queensland**, and then click **Add to Filter**.</span></span>

6.  <span data-ttu-id="619b5-196">Expanda cada miembro del `Sales Reason Type` nivel para revisar los valores en dólares que están asociados a cada razón que un cliente de Queensland dio por su compra de un [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] producto a través de Internet.</span><span class="sxs-lookup"><span data-stu-id="619b5-196">Expand each member of the `Sales Reason Type` level to review the dollar values that are associated with each reason a customer in Queensland gave for their purchase of an [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] product over the Internet.</span></span>

     <span data-ttu-id="619b5-197">Observe que los totales que están asociados con cada motivo de ventas se suman y dan lugar a un valor superior a las ventas totales.</span><span class="sxs-lookup"><span data-stu-id="619b5-197">Notice that the totals that are associated with each sales reason add up to more than the total sales.</span></span> <span data-ttu-id="619b5-198">Esto es así porque algunos clientes citaron varios motivos para su compra.</span><span class="sxs-lookup"><span data-stu-id="619b5-198">This is because some customers cited multiple reasons for their purchase.</span></span>

     <span data-ttu-id="619b5-199">En la imagen siguiente se muestran los paneles **Filtro** y **Datos** del Diseñador de cubos.</span><span class="sxs-lookup"><span data-stu-id="619b5-199">The following image shows the **Filter** pane and **Data** pane of Cube Designer.</span></span>

     <span data-ttu-id="619b5-200">![Paneles Filtro y Datos del Diseñador de cubos](../../2014/tutorials/media/l5-many-to-many-5.gif "Paneles Filtro y Datos del Diseñador de cubos")</span><span class="sxs-lookup"><span data-stu-id="619b5-200">![Filter and Data panes of Cube Designer](../../2014/tutorials/media/l5-many-to-many-5.gif "Filter and Data panes of Cube Designer")</span></span>

## <a name="next-task-in-lesson"></a><span data-ttu-id="619b5-201">Siguiente tarea de la lección</span><span class="sxs-lookup"><span data-stu-id="619b5-201">Next Task in Lesson</span></span>
 [<span data-ttu-id="619b5-202">Definir la granularidad de las dimensiones en un grupo de medida</span><span class="sxs-lookup"><span data-stu-id="619b5-202">Defining Dimension Granularity within a Measure Group</span></span>](lesson-5-4-defining-dimension-granularity-within-a-measure-group.md)

## <a name="see-also"></a><span data-ttu-id="619b5-203">Consulte también</span><span class="sxs-lookup"><span data-stu-id="619b5-203">See Also</span></span>
 <span data-ttu-id="619b5-204">[Trabajar con diagramas en el diseñador de vistas del origen de datos &#40;Analysis Services&#41;](multidimensional-models/work-with-diagrams-in-data-source-view-designer-analysis-services.md) [relaciones de dimensión](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md) [definir una relación de varios a varios y propiedades de la relación de varios a varios](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md)</span><span class="sxs-lookup"><span data-stu-id="619b5-204">[Work with Diagrams in Data Source View Designer &#40;Analysis Services&#41;](multidimensional-models/work-with-diagrams-in-data-source-view-designer-analysis-services.md) [Dimension Relationships](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md) [Define a Many-to-Many Relationship and Many-to-Many Relationship Properties](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md)</span></span>


