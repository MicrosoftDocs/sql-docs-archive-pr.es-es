---
title: Tablas anidadas (Analysis Services minería de datos) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- data mining [Analysis Services], nested tables
- tables [Analysis Services], nested
- nested tables
ms.assetid: cb192aa2-597e-4d4f-ac34-3556d037fed4
author: minewiskan
ms.author: owend
ms.openlocfilehash: 78b1022751ae6d381b86512f45f7232bebe7fcd0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87744439"
---
# <a name="nested-tables-analysis-services---data-mining"></a><span data-ttu-id="18b5c-102">Tablas anidadas (Analysis Services - Minería de datos)</span><span class="sxs-lookup"><span data-stu-id="18b5c-102">Nested Tables (Analysis Services - Data Mining)</span></span>
  <span data-ttu-id="18b5c-103">En [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] , los datos se deben alimentar a un algoritmo de minería de datos como una serie de casos contenidos en una tabla de casos.</span><span class="sxs-lookup"><span data-stu-id="18b5c-103">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], data must be fed to a data mining algorithm as a series of cases that are contained within a case table.</span></span> <span data-ttu-id="18b5c-104">Sin embargo, no todos los casos pueden describirse mediante una sola fila de datos.</span><span class="sxs-lookup"><span data-stu-id="18b5c-104">However, not all cases can be described by a single row of data.</span></span> <span data-ttu-id="18b5c-105">Por ejemplo, un caso puede derivarse de dos tablas: una que contenga la información del cliente y otra que contenga las compras de ese cliente.</span><span class="sxs-lookup"><span data-stu-id="18b5c-105">For example, a case might be derived from two tables: one table that contains customer information, and another table that contains customer purchases.</span></span> <span data-ttu-id="18b5c-106">Un solo cliente de la tabla de información de clientes podría tener varios elementos en la tabla de compras del cliente, lo que dificulta describir los datos mediante una sola fila.</span><span class="sxs-lookup"><span data-stu-id="18b5c-106">A single customer in the customer information table might have multiple items in the customer purchases table, which makes it difficult to describe the data by using a single row.</span></span> [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]<span data-ttu-id="18b5c-107">proporciona un método único para controlar estos casos mediante el uso de *tablas anidadas*.</span><span class="sxs-lookup"><span data-stu-id="18b5c-107">provides a unique method for handling these cases, by using *nested tables*.</span></span> <span data-ttu-id="18b5c-108">El concepto de una tabla anidada se muestra en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="18b5c-108">The concept of a nested table is demonstrated in the following illustration.</span></span>  
  
 <span data-ttu-id="18b5c-109">![Dos tablas combinadas mediante una tabla anidada](../media/nested-tables.gif "Dos tablas combinadas mediante una tabla anidada")</span><span class="sxs-lookup"><span data-stu-id="18b5c-109">![Two tables combined by using a nested table](../media/nested-tables.gif "Two tables combined by using a nested table")</span></span>  
  
 <span data-ttu-id="18b5c-110">En este diagrama, la primera tabla, que es la tabla primaria, contiene información sobre los clientes y asocia cada cliente con un único identificador.</span><span class="sxs-lookup"><span data-stu-id="18b5c-110">In this diagram, the first table, which is the parent table, contains information about customers, and associates a unique identifier for each customer.</span></span> <span data-ttu-id="18b5c-111">La segunda tabla, la tabla secundaria, contiene las compras de cada cliente.</span><span class="sxs-lookup"><span data-stu-id="18b5c-111">The second table, the child table, contains the purchases for each customer.</span></span> <span data-ttu-id="18b5c-112">Las compras de la tabla secundaria se relacionan con la tabla primaria mediante el identificador único, la columna **CustomerKey** .</span><span class="sxs-lookup"><span data-stu-id="18b5c-112">The purchases in the child table are related to the parent table by the unique identifier, the **CustomerKey** column.</span></span> <span data-ttu-id="18b5c-113">La tercera tabla del diagrama muestra cómo se combinan ambas tablas.</span><span class="sxs-lookup"><span data-stu-id="18b5c-113">The third table in the diagram shows the two tables combined.</span></span>  
  
 <span data-ttu-id="18b5c-114">Una tabla anidada se representa en la tabla de casos como una columna especial que tiene un tipo de datos **TABLE**.</span><span class="sxs-lookup"><span data-stu-id="18b5c-114">A nested table is represented in the case table as a special column that has a data type of **TABLE**.</span></span> <span data-ttu-id="18b5c-115">En las filas específicas de caso, esta clase de columna contiene filas seleccionadas de la tabla secundaria que forman parte de la tabla primaria.</span><span class="sxs-lookup"><span data-stu-id="18b5c-115">For any particular case row, this kind of column contains selected rows from the child table that pertain to the parent table.</span></span>  
  
 <span data-ttu-id="18b5c-116">Los datos de una tabla anidada se pueden utilizar para la predicción, como entrada o para ambos.</span><span class="sxs-lookup"><span data-stu-id="18b5c-116">The data in a nested table can be used for prediction or for input, or for both.</span></span> <span data-ttu-id="18b5c-117">Por ejemplo, podría tener dos columnas de tabla anidada en un modelo: una podría contener una lista de los productos que un cliente ha comprado, mientras que la otra podría contener información sobre las aficiones e intereses del cliente, posiblemente obtenidas en un estudio.</span><span class="sxs-lookup"><span data-stu-id="18b5c-117">For example, you might have two nested table columns in a model: one nested table column might contain a list of the products that a customer has purchased, while the other nested table column contains information about the customer's hobbies and interests, possibly obtained from a survey.</span></span> <span data-ttu-id="18b5c-118">Podría utilizar las aficiones e intereses del cliente como entrada para analizar el comportamiento de compra y predecir las compras probables.</span><span class="sxs-lookup"><span data-stu-id="18b5c-118">In this scenario, you could use the customer's hobbies and interests as an input for analyzing purchasing behavior, and predicting likely purchases.</span></span>  
  
## <a name="joining-case-tables-and-nested-tables"></a><span data-ttu-id="18b5c-119">Combinar tablas de casos y tablas anidadas</span><span class="sxs-lookup"><span data-stu-id="18b5c-119">Joining Case Tables and Nested Tables</span></span>  
 <span data-ttu-id="18b5c-120">A fin de crear una tabla anidada, las dos tablas de origen deben contener una relación definida de forma que los elementos de una tabla puedan relacionarse con los de la otra.</span><span class="sxs-lookup"><span data-stu-id="18b5c-120">In order to create a nested table, the two source tables must contain a defined relationship so that the items in one table can be related to the other table.</span></span> <span data-ttu-id="18b5c-121">En [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], se puede definir esta relación en la vista del origen de datos.</span><span class="sxs-lookup"><span data-stu-id="18b5c-121">In [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], you can define this relationship in the data source view.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="18b5c-122">El campo **CustomerKey** es la clave relacional usada para vincular la tabla de casos y la tabla anidada dentro de la definición de vista del origen de datos, así como para establecer la relación de las columnas dentro de la estructura de minería de datos.</span><span class="sxs-lookup"><span data-stu-id="18b5c-122">The **CustomerKey** field is the relational key that is used to link the case table and the nested table within the data source view definition, and to establish the relationship of the columns within the mining structure.</span></span> <span data-ttu-id="18b5c-123">Sin embargo, normalmente no se debe usar esta clave relacional en los modelos de minería de datos generados en dicha estructura.</span><span class="sxs-lookup"><span data-stu-id="18b5c-123">However, typically you should not use this relational key in mining models built on that structure.</span></span> <span data-ttu-id="18b5c-124">Por lo general, es preferible omitir la columna de clave relacional del modelo de minería de datos si solo sirve para combinar las tablas y no proporciona información que merezca la pena analizar.</span><span class="sxs-lookup"><span data-stu-id="18b5c-124">Usually it is best to omit the relational key column from the mining model if it serves only to join the tables and does not provide information that is interesting for analysis.</span></span>  
  
 <span data-ttu-id="18b5c-125">Puede crear tablas anidadas mediante programación usando Extensiones de minería de datos (DMX) u Objetos de administración de análisis (AMO), o puede utilizar el Asistente para minería de datos y el Diseñador de minería de datos de [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="18b5c-125">You can create nested tables programmatically by either using Data Mining Extensions (DMX) or Analysis Management Objects (AMO), or you can use the Data Mining Wizard and Data Mining Designer in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
## <a name="using-nested-table-columns-in-a-mining-model"></a><span data-ttu-id="18b5c-126">Usar columnas de tabla anidada en un modelo de minería de datos</span><span class="sxs-lookup"><span data-stu-id="18b5c-126">Using Nested Table Columns in a Mining Model</span></span>  
 <span data-ttu-id="18b5c-127">En la tabla de casos, la clave es a menudo un identificador de cliente, un nombre de producto o una fecha dentro una serie; es decir, datos que identifican una fila en la tabla de forma inequívoca.</span><span class="sxs-lookup"><span data-stu-id="18b5c-127">In the case table, the key is often a customer ID, a product name, or date in a series: data that uniquely identifies a row in the table.</span></span> <span data-ttu-id="18b5c-128">.</span><span class="sxs-lookup"><span data-stu-id="18b5c-128">.</span></span> <span data-ttu-id="18b5c-129">Sin embargo, en las tablas anidadas, normalmente la clave no es la clave relacional (o clave externa), sino la columna que representa el atributo que se está modelando.</span><span class="sxs-lookup"><span data-stu-id="18b5c-129">However, in nested tables, the key is typically not the relational key (or foreign key) but rather the column that represents the attribute that you are modeling.</span></span>  
  
 <span data-ttu-id="18b5c-130">Por ejemplo, si la tabla de casos contiene pedidos y la tabla anidada contiene los artículos de cada uno de dichos pedidos, le interesaría modelar la relación entre los artículos almacenados en la tabla anidada y los pedidos, que se almacenan en la tabla de casos.</span><span class="sxs-lookup"><span data-stu-id="18b5c-130">For example, if the case table contains orders, and the nested table contains items in the order, you would be interested in modeling the relationship between items stored in the nested table across multiple orders, which are stored in the case table.</span></span> <span data-ttu-id="18b5c-131">Por lo tanto, aunque la tabla anidada **Items** se combina con la tabla de casos **Orders** mediante la clave relacional **OrderID**, no se debe usar **OrderID** como clave de la tabla anidada.</span><span class="sxs-lookup"><span data-stu-id="18b5c-131">Therefore, although the **Items** nested table is joined to the **Orders** case table by the relational key **OrderID**, you should not use **OrderID** as the nested table key.</span></span> <span data-ttu-id="18b5c-132">En su lugar, se debe seleccionar la columna **Items** , ya que dicha columna contiene los datos que se desea modelar.</span><span class="sxs-lookup"><span data-stu-id="18b5c-132">Instead, you would select the **Items** column as the nested table key, because that column contains the data that you want to model.</span></span> <span data-ttu-id="18b5c-133">En la mayoría de los casos, se puede pasar por alto **OrderID** sin ningún problema en el modelo de minería de datos, ya que la relación entre la tabla de casos y la tabla anidada ya ha sido establecida por la definición de vista del origen de datos.</span><span class="sxs-lookup"><span data-stu-id="18b5c-133">In most cases, you can safely ignore **OrderID** in the mining model, because the relationship between the case table and the nested table has already been established by the data source view definition.</span></span>  
  
 <span data-ttu-id="18b5c-134">Cuando elija la columna que se va a usar como clave de la tabla anidada, debe asegurarse de que los valores de dicha columna sean únicos para cada caso.</span><span class="sxs-lookup"><span data-stu-id="18b5c-134">When you choose a column to use as the nested table key, you must ensure that the values in that column are unique for each case.</span></span> <span data-ttu-id="18b5c-135">Por ejemplo, si la tabla de casos representa clientes y la tabla anidada representa los artículos adquiridos por cada cliente, debe asegurarse de que ningún artículo aparezca varias veces por cliente.</span><span class="sxs-lookup"><span data-stu-id="18b5c-135">For example, if the case table represents customers and the nested table represents items purchased by the customer, you must ensure that no item is listed more than one time per customer.</span></span> <span data-ttu-id="18b5c-136">Si un cliente ha adquirido el mismo artículos varias veces, debe crear una vista diferente con una columna que agregue el número de compras para cada producto único.</span><span class="sxs-lookup"><span data-stu-id="18b5c-136">If a customer has purchased the same item more than one time, you might want to create a different view that has a column that aggregates the count of purchases for each unique product.</span></span>  
  
 <span data-ttu-id="18b5c-137">La decisión de cómo administrar los valores duplicados en una tabla anidada dependerá del modelo de minería de datos que esté creando y del problema empresarial que esté intentando resolver.</span><span class="sxs-lookup"><span data-stu-id="18b5c-137">How you decide to handle duplicate values in a nested table depends on the mining model that you are creating and the business problem that you are solving.</span></span> <span data-ttu-id="18b5c-138">En algunos escenarios, es posible que no le interese el número de veces que un cliente ha adquirido un determinado producto sino que solo desee comprobar la existencia de al menos una compra.</span><span class="sxs-lookup"><span data-stu-id="18b5c-138">In some scenarios you might not care how many times a customer has purchased a particular product, but want to check for the existence of at least one purchase.</span></span> <span data-ttu-id="18b5c-139">En otros escenarios, es posible que la cantidad y la secuencia de compras sean de gran importancia.</span><span class="sxs-lookup"><span data-stu-id="18b5c-139">In other scenarios, the quantity and sequence of purchases might be very important.</span></span>  
  
 <span data-ttu-id="18b5c-140">Si el orden de los artículos es importante, puede que necesite una columna adicional que indique la secuencia.</span><span class="sxs-lookup"><span data-stu-id="18b5c-140">If the order of items is important, you might need an additional column that indicates the sequence.</span></span> <span data-ttu-id="18b5c-141">Cuando use el algoritmo de clústeres de secuencia para crear un modelo, deberá elegir una columna *Key Sequence* adicional para representar el orden de los artículos.</span><span class="sxs-lookup"><span data-stu-id="18b5c-141">When you use the sequence clustering algorithm to create a model, you must choose an additional *key sequence* column to represent the order of the items.</span></span> <span data-ttu-id="18b5c-142">La columna Key Sequence es una clase especial de clave anidada que solo se usa en modelos de agrupación en clústeres de secuencia, y requiere un tipo de datos numérico único.</span><span class="sxs-lookup"><span data-stu-id="18b5c-142">The key sequence column is a special kind of nested key that is used only in sequence clustering models, and requires a unique numeric data type.</span></span> <span data-ttu-id="18b5c-143">Por ejemplo, los enteros y las fechas se pueden usar como columna Key Sequence, pero todos los valores de secuencia deben ser únicos.</span><span class="sxs-lookup"><span data-stu-id="18b5c-143">For example, integers and dates can both be used as a key sequence column, but all sequence values must be unique.</span></span> <span data-ttu-id="18b5c-144">Además de la columna Key Sequence, un modelo de agrupación en clústeres de secuencia también incluye una clave de tabla anidada que representa el atributo que se está modelando, como los productos que se han adquirido.</span><span class="sxs-lookup"><span data-stu-id="18b5c-144">In addition to the key sequence column, a sequence clustering model also has a nested table key that represents the attribute that is being modeled, such as the products that have been purchased.</span></span>  
  
### <a name="using-non-key-nested-columns-from-a-nested-table"></a><span data-ttu-id="18b5c-145">Usar columnas anidadas sin clave desde una tabla anidada</span><span class="sxs-lookup"><span data-stu-id="18b5c-145">Using Non-Key Nested Columns from a Nested Table</span></span>  
 <span data-ttu-id="18b5c-146">Una vez definida la combinación entre la tabla de casos y la tabla anidada, y después de elegir la columna que contiene atributos interesantes y únicos que se pueden usar como clave de la tabla anidada, puede incluir otras columnas de la tabla anidada para usarlas como entrada para el modelo.</span><span class="sxs-lookup"><span data-stu-id="18b5c-146">After you have defined the join between the case table and the nested table, and you have chosen a column that contains interesting and unique attributes to use as the nested table key, you can include other columns from the nested table to use as input to the model.</span></span> <span data-ttu-id="18b5c-147">Todas las columnas de la tabla anidada se pueden usar como entrada, como predicción y entrada, o solo como predicción.</span><span class="sxs-lookup"><span data-stu-id="18b5c-147">All columns from the nested table can be used for input, prediction and input, or for prediction only.</span></span>  
  
 <span data-ttu-id="18b5c-148">Por ejemplo, si la tabla anidada contiene las columnas **Product**, **ProductQuantity**y **ProductPrice**, se puede elegir **Product** como clave de la tabla anidada, pero se ha de agregar **ProductQuantity** a la estructura de minería de datos para usarla como entrada.</span><span class="sxs-lookup"><span data-stu-id="18b5c-148">For example, if the nested table contains the columns **Product**, **ProductQuantity**, and **ProductPrice**, you might choose **Product** as the nested table key, but add **ProductQuantity** to the mining structure to use as input.</span></span>  
  
## <a name="filtering-nested-table-data"></a><span data-ttu-id="18b5c-149">Filtrar datos de tablas anidadas</span><span class="sxs-lookup"><span data-stu-id="18b5c-149">Filtering Nested Table Data</span></span>  
 <span data-ttu-id="18b5c-150">En [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]se pueden crear filtros para los datos que se usan en la comprobación o el entrenamiento de un modelo de minería de datos.</span><span class="sxs-lookup"><span data-stu-id="18b5c-150">In [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you can create filters on the data that is used to train or test a data mining model.</span></span> <span data-ttu-id="18b5c-151">Se puede usar un filtro que afecte a la composición del modelo o que compruebe éste en un subconjunto de casos.</span><span class="sxs-lookup"><span data-stu-id="18b5c-151">A filer can be used to affect the composition of the model, or to test the model on a subset of cases.</span></span> <span data-ttu-id="18b5c-152">Los filtros también se pueden aplicar a las tablas anidadas.</span><span class="sxs-lookup"><span data-stu-id="18b5c-152">Filters can also be applied to nested tables.</span></span> <span data-ttu-id="18b5c-153">Sin embargo, existen limitaciones en cuanto a la sintaxis que se puede usar con dichas tablas.</span><span class="sxs-lookup"><span data-stu-id="18b5c-153">However, there are limitations on the syntax that can be used with nested tables.</span></span>  
  
 <span data-ttu-id="18b5c-154">A menudo se aplica un filtro a una tabla anidada para comprobar si un atributo existe o no existe.</span><span class="sxs-lookup"><span data-stu-id="18b5c-154">Often when you apply a filter to a nested table you are testing for the existence or nonexistence of an attribute.</span></span> <span data-ttu-id="18b5c-155">Por ejemplo, se puede aplicar un filtro que restrinja los casos usados en el modelo a solo aquellos que tengan un valor especificado en la tabla anidada.</span><span class="sxs-lookup"><span data-stu-id="18b5c-155">For example, you can apply a filter that restricts the cases used in the model to only those cases that have a specified value in the nested table.</span></span> <span data-ttu-id="18b5c-156">O bien, se pueden restringir los casos utilizados en el modelo a los clientes que no han adquirido un artículo determinado.</span><span class="sxs-lookup"><span data-stu-id="18b5c-156">Or, you could restrict the cases used in the model to customers who have not purchased a particular item.</span></span>  
  
 <span data-ttu-id="18b5c-157">Al crear filtros en una tabla anidada, también se pueden usar operadores, como mayor que o menor que.</span><span class="sxs-lookup"><span data-stu-id="18b5c-157">When you create filters on a nested table, you can also use operators such as greater than or less than.</span></span> <span data-ttu-id="18b5c-158">Por ejemplo, puede restringir los casos usados en el modelo a los clientes que hayan comprado al menos n unidades del producto en cuestión.</span><span class="sxs-lookup"><span data-stu-id="18b5c-158">For example, you could restrict the cases used in the model to customers who had purchased at least n units of the target product.</span></span> <span data-ttu-id="18b5c-159">La posibilidad de filtrar atributos de tabla anidada proporciona una gran flexibilidad a la hora de personalizar los modelos.</span><span class="sxs-lookup"><span data-stu-id="18b5c-159">The ability to filter on nested table attributes provides great flexibility for customizing models.</span></span>  
  
 <span data-ttu-id="18b5c-160">Para obtener más información sobre cómo crear y usar filtros de modelos, vea [Filtros para modelos de minería &#40;Analysis Services - Minería de datos&#41;](mining-models-analysis-services-data-mining.md).</span><span class="sxs-lookup"><span data-stu-id="18b5c-160">For more information about how to create and use model filters, see [Filters for Mining Models &#40;Analysis Services - Data Mining&#41;](mining-models-analysis-services-data-mining.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="18b5c-161">Consulte también</span><span class="sxs-lookup"><span data-stu-id="18b5c-161">See Also</span></span>  
 <span data-ttu-id="18b5c-162">[Algoritmos de minería de datos &#40;Analysis Services:&#41;de minería de datos](data-mining-algorithms-analysis-services-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="18b5c-162">[Data Mining Algorithms &#40;Analysis Services - Data Mining&#41;](data-mining-algorithms-analysis-services-data-mining.md) </span></span>  
 [<span data-ttu-id="18b5c-163">Estructuras de minería de datos &#40;Analysis Services - Minería de datos&#41;</span><span class="sxs-lookup"><span data-stu-id="18b5c-163">Mining Structures &#40;Analysis Services - Data Mining&#41;</span></span>](mining-structures-analysis-services-data-mining.md)  
  
  
