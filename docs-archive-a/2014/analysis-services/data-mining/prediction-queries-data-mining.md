---
title: Consultas de predicción (minería de datos) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: e5e6686c-1360-480e-8c0d-8a56204fbed9
author: minewiskan
ms.author: owend
ms.openlocfilehash: 543055aaed5d8991ed2c913a6ae46575c774e216
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87747268"
---
# <a name="prediction-queries-data-mining"></a><span data-ttu-id="fa0da-102">Consultas de predicción (minería de datos)</span><span class="sxs-lookup"><span data-stu-id="fa0da-102">Prediction Queries (Data Mining)</span></span>
  <span data-ttu-id="fa0da-103">El objetivo de un proyecto de minería de datos típico es usar el modelo de minería de datos para realizar predicciones.</span><span class="sxs-lookup"><span data-stu-id="fa0da-103">The goal of a typical data mining project is to use the mining model to make predictions.</span></span> <span data-ttu-id="fa0da-104">Por ejemplo, quizás desee predecir el tiempo de inactividad esperado para un clúster de servidores determinado, o generar una puntuación que indique si es probable que los segmentos de clientes respondan a una campaña de publicidad.</span><span class="sxs-lookup"><span data-stu-id="fa0da-104">For example, you might want to predict the amount of expected downtime for a certain cluster of servers, or generate a score that indicates whether segments of customers are likely to respond to an advertising campaign.</span></span> <span data-ttu-id="fa0da-105">Para hacer todas estas cosas, crearía una consulta de predicción.</span><span class="sxs-lookup"><span data-stu-id="fa0da-105">To do all these things, you would create a prediction query.</span></span>  
  
 <span data-ttu-id="fa0da-106">Funcionalmente, hay diferentes tipos de consultas de predicción admitidos en SQL Server, dependiendo del tipo de entradas a la consulta:</span><span class="sxs-lookup"><span data-stu-id="fa0da-106">Functionally, there are different types of prediction queries supported in SQL Server, depending on the type of inputs to the query:</span></span>  
  
|<span data-ttu-id="fa0da-107">Tipo de consulta</span><span class="sxs-lookup"><span data-stu-id="fa0da-107">Query Type</span></span>|<span data-ttu-id="fa0da-108">Opciones de consulta</span><span class="sxs-lookup"><span data-stu-id="fa0da-108">Query Options</span></span>|  
|----------------|-------------------|  
|<span data-ttu-id="fa0da-109">Consultas de predicción singleton</span><span class="sxs-lookup"><span data-stu-id="fa0da-109">Singleton prediction queries</span></span>|<span data-ttu-id="fa0da-110">Utilice una consulta singleton si desea predecir los resultados de un nuevo caso único, o de varios casos nuevos.</span><span class="sxs-lookup"><span data-stu-id="fa0da-110">Use a singleton query when you want to predict outcomes for a single new case, or multiple new cases.</span></span> <span data-ttu-id="fa0da-111">Proporcione directamente los valores de entrada en la consulta, y la consulta se ejecuta como una sesión única.</span><span class="sxs-lookup"><span data-stu-id="fa0da-111">You provide the input values directly in the query, and the query is executed as a single session.</span></span>|  
|<span data-ttu-id="fa0da-112">Predicciones por lotes</span><span class="sxs-lookup"><span data-stu-id="fa0da-112">Batch predictions</span></span>|<span data-ttu-id="fa0da-113">Utilice las predicciones por lotes si tiene datos externos que desea incorporar al modelo, para utilizarlos como base para las predicciones.</span><span class="sxs-lookup"><span data-stu-id="fa0da-113">Use batch predictions when you have external data that you want to feed into the model, to use as the basis for predictions.</span></span> <span data-ttu-id="fa0da-114">Para realizar predicciones para un conjunto de datos completo, asigne los datos del origen externo a las columnas del modelo y, a continuación, especifique el tipo de datos predictivos que desea generar.</span><span class="sxs-lookup"><span data-stu-id="fa0da-114">To make predictions for an entire set of data, you map the data in the external source to the columns in the model, and then specify the type of predictive data you want to output.</span></span><br /><br /> <span data-ttu-id="fa0da-115">La consulta del conjunto de datos completo se ejecuta en una única sesión, siendo esta opción mucho más eficaz que enviar varias consultas repetidas.</span><span class="sxs-lookup"><span data-stu-id="fa0da-115">The query for the entire dataset is executed in a single session, making this option much more efficient than sending multiple repeated queries.</span></span>|  
|<span data-ttu-id="fa0da-116">Predicciones de serie temporal</span><span class="sxs-lookup"><span data-stu-id="fa0da-116">Time Series predictions</span></span>|<span data-ttu-id="fa0da-117">Utilice una consulta de serie temporal si desea predecir un valor para un número concreto de pasos futuros.</span><span class="sxs-lookup"><span data-stu-id="fa0da-117">Use a time series query when you want to predict a value over some number of future steps.</span></span> <span data-ttu-id="fa0da-118">La minería de datos de SQL Server también proporciona la siguiente funcionalidad en las consultas de serie temporal:</span><span class="sxs-lookup"><span data-stu-id="fa0da-118">SQL Server Data Mining also provides the following functionality in time series queries:</span></span><br /><br /> <span data-ttu-id="fa0da-119">Puede ampliar un modelo existente agregando nuevos datos como parte de la consulta, y realizar predicciones basadas en la serie compuesta.</span><span class="sxs-lookup"><span data-stu-id="fa0da-119">You can extend an existing model by adding new data as part of the query, and make predictions based on the composite series.</span></span><br /><br /> <span data-ttu-id="fa0da-120">Puede aplicar un modelo existente a una nueva serie de datos usando la opción REPLACE_MODEL_CASES.</span><span class="sxs-lookup"><span data-stu-id="fa0da-120">You can apply an existing model to a new data series by using the REPLACE_MODEL_CASES option.</span></span><br /><br /> <span data-ttu-id="fa0da-121">Puede realizar una predicción cruzada.</span><span class="sxs-lookup"><span data-stu-id="fa0da-121">You can perform cross-prediction.</span></span>|  
  
 <span data-ttu-id="fa0da-122">En las secciones siguientes se describen la sintaxis general de las consultas de predicción, los diferentes tipos de consultas de predicción y cómo trabajar con los resultados de estas consultas.</span><span class="sxs-lookup"><span data-stu-id="fa0da-122">The following sections describe the general syntax of prediction queries, the different types of prediction queries, and how to work with the results of prediction queries.</span></span>  
  
 [<span data-ttu-id="fa0da-123">Diseño de consulta de predicción básica</span><span class="sxs-lookup"><span data-stu-id="fa0da-123">Basic Prediction Query Design</span></span>](#bkmk_PredQuery)  
  
-   [<span data-ttu-id="fa0da-124">Agregar funciones de predicción</span><span class="sxs-lookup"><span data-stu-id="fa0da-124">Adding Prediction Functions</span></span>](#bkmk_PredFunc)  
  
-   [<span data-ttu-id="fa0da-125">Consultas singleton</span><span class="sxs-lookup"><span data-stu-id="fa0da-125">Singleton Queries</span></span>](#bkmk_SingletonQuery)  
  
-   [<span data-ttu-id="fa0da-126">Consultas de predicción por lotes</span><span class="sxs-lookup"><span data-stu-id="fa0da-126">Batch Prediction Queries</span></span>](#bkmk_BatchQuery)  
  
 [<span data-ttu-id="fa0da-127">Trabajar con los resultados de las consultas</span><span class="sxs-lookup"><span data-stu-id="fa0da-127">Working with the Results of Queries</span></span>](#bkmk_WorkResults)  
  
##  <a name="basic-prediction-query-design"></a><a name="bkmk_PredQuery"></a> <span data-ttu-id="fa0da-128">Diseño de una consulta de predicción básica</span><span class="sxs-lookup"><span data-stu-id="fa0da-128">Basic Prediction Query Design</span></span>  
 <span data-ttu-id="fa0da-129">Cuando se crea una predicción, normalmente se proporcionan algunos datos nuevos y se pide al modelo que genere la predicción basándose en dichos datos.</span><span class="sxs-lookup"><span data-stu-id="fa0da-129">When you create a prediction, you typically provide some piece of new data and ask the model to generate a prediction based on the new data.</span></span>  
  
-   <span data-ttu-id="fa0da-130">En una consulta de predicción por lotes, puede asignar el modelo a un origen externo de datos mediante una *combinación de predicción*.</span><span class="sxs-lookup"><span data-stu-id="fa0da-130">In a batch prediction query, you map the model to an external source of data by using a *prediction join*.</span></span>  
  
-   <span data-ttu-id="fa0da-131">En una consulta de predicción singleton, puede escribir uno o más valores para utilizar como entradas.</span><span class="sxs-lookup"><span data-stu-id="fa0da-131">In a singleton prediction query, you type one or more values to use as inputs.</span></span> <span data-ttu-id="fa0da-132">Puede crear varias predicciones mediante una consulta de predicción singleton.</span><span class="sxs-lookup"><span data-stu-id="fa0da-132">You can create multiple predictions using a singleton prediction query.</span></span> <span data-ttu-id="fa0da-133">Sin embargo, si necesita crear muchas predicciones, el rendimiento es mejor si utiliza una consulta por lotes.</span><span class="sxs-lookup"><span data-stu-id="fa0da-133">However, if you need to create many predictions, performance is better when you use a batch query.</span></span>  
  
 <span data-ttu-id="fa0da-134">Ambas consultas, las de predicción por lotes y las consultas singleton, usan la sintaxis de PREDICTION JOIN para definir los datos nuevos.</span><span class="sxs-lookup"><span data-stu-id="fa0da-134">Both singleton and batch prediction queries use the PREDICTION JOIN syntax to define the new data.</span></span> <span data-ttu-id="fa0da-135">La diferencia radica en cómo se especifica el lado de entrada de la combinación de predicción.</span><span class="sxs-lookup"><span data-stu-id="fa0da-135">The difference is in how the input side of the prediction join is specified.</span></span>  
  
-   <span data-ttu-id="fa0da-136">En una consulta de predicción por lotes, los datos proceden de un origen de datos externo que se especifica usando la sintaxis de OPENQUERY.</span><span class="sxs-lookup"><span data-stu-id="fa0da-136">In a batch prediction query, the data comes from an external data source that is specified by using the OPENQUERY syntax.</span></span>  
  
-   <span data-ttu-id="fa0da-137">En una consulta de predicción singleton, los datos se proporcionan insertados como parte de la consulta.</span><span class="sxs-lookup"><span data-stu-id="fa0da-137">In a singleton prediction query, the data is supplied inline as part of the query.</span></span>  
  
 <span data-ttu-id="fa0da-138">Para los modelos de serie temporal, los datos de entrada no siempre son necesarios; es posible realizar predicciones simplemente utilizando los datos que ya se encuentran en el modelo.</span><span class="sxs-lookup"><span data-stu-id="fa0da-138">For time series models, input data is not always required; it is possible to make predictions using just the data already in the model.</span></span> <span data-ttu-id="fa0da-139">Sin embargo, si especifica nuevos datos de entrada, debe decidir si utilizará los nuevos datos para actualizar y ampliar el modelo, o reemplazar la serie de datos original que se utilizó en el modelo.</span><span class="sxs-lookup"><span data-stu-id="fa0da-139">However, if you do specify new input data, you must decide whether you will use the new data to update and extend the model, or to replace the original series of data that was used in the model.</span></span>  <span data-ttu-id="fa0da-140">Para obtener más información acerca de estas opciones, consulte [Time Series Model Query Examples](time-series-model-query-examples.md).</span><span class="sxs-lookup"><span data-stu-id="fa0da-140">For more information about these options, see [Time Series Model Query Examples](time-series-model-query-examples.md).</span></span>  
  
###  <a name="adding-prediction-functions"></a><a name="bkmk_PredFunc"></a><span data-ttu-id="fa0da-141">Agregar funciones de predicción</span><span class="sxs-lookup"><span data-stu-id="fa0da-141">Adding Prediction Functions</span></span>  
 <span data-ttu-id="fa0da-142">Además de predecir un valor concreto, puede personalizar una consulta de predicción para que devuelva diversos tipos de información relacionados con la predicción.</span><span class="sxs-lookup"><span data-stu-id="fa0da-142">In addition to predicting a value, you can customize a prediction query to return various kinds of information that are related to the prediction.</span></span> <span data-ttu-id="fa0da-143">Por ejemplo, si la predicción crea una lista de productos para recomendar a un cliente, es posible que también desee devolver la probabilidad de cada predicción, de modo que pueda clasificarlas y mostrar únicamente las principales recomendaciones al usuario.</span><span class="sxs-lookup"><span data-stu-id="fa0da-143">For example, if the prediction creates a list of products to recommend to a customer, you might also want to return the probability for each prediction, so that you can rank them and present only the top recommendations to the user.</span></span>  
  
 <span data-ttu-id="fa0da-144">Para ello, agregue *funciones de predicción* a la consulta.</span><span class="sxs-lookup"><span data-stu-id="fa0da-144">To do this, you add *prediction functions* to the query.</span></span> <span data-ttu-id="fa0da-145">Cada modelo o tipo de consulta admite unas determinadas funciones.</span><span class="sxs-lookup"><span data-stu-id="fa0da-145">Each model or query type supports specific functions.</span></span> <span data-ttu-id="fa0da-146">Por ejemplo, los modelos de agrupación en clústeres admiten funciones de predicción especiales que proporcionan detalles adicionales sobre los clústeres creados por el modelo, mientras que los modelos de serie temporal tienen funciones que calculan las diferencias a lo largo del tiempo.</span><span class="sxs-lookup"><span data-stu-id="fa0da-146">For example, clustering models support special prediction functions that provide extra detail about the clusters created by the model, whereas time series models have functions that calculate differences over time.</span></span> <span data-ttu-id="fa0da-147">También existen funciones de predicción generales que funcionan con casi todos los tipos de modelos.</span><span class="sxs-lookup"><span data-stu-id="fa0da-147">There are also general prediction functions that work with almost all model types.</span></span> <span data-ttu-id="fa0da-148">Para obtener una lista de las funciones de predicción admitidas en los diferentes tipos de consultas, vea este tema en la referencia de DMX: [Funciones de predicción generales &#40;DMX&#41;](/sql/dmx/general-prediction-functions-dmx).</span><span class="sxs-lookup"><span data-stu-id="fa0da-148">For a list of the prediction functions supported in different types of queries, see this topic the DMX reference:  [General Prediction Functions &#40;DMX&#41;](/sql/dmx/general-prediction-functions-dmx).</span></span>  
  
###  <a name="creating-singleton-prediction-queries"></a><a name="bkmk_SingletonQuery"></a><span data-ttu-id="fa0da-149">Crear consultas de predicción singleton</span><span class="sxs-lookup"><span data-stu-id="fa0da-149">Creating Singleton Prediction Queries</span></span>  
 <span data-ttu-id="fa0da-150">Las consultas de predicción singleton resultan de gran utilidad para crear predicciones rápidas en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="fa0da-150">A singleton prediction query is useful when you want to create quick predictions in real time.</span></span> <span data-ttu-id="fa0da-151">Un escenario habitual podría ser en el que ha obtenido información de un cliente, quizás mediante un formulario en un sitio web, y desea enviar dicha información como entrada a una consulta de predicción singleton.</span><span class="sxs-lookup"><span data-stu-id="fa0da-151">A common scenario might be that you have obtained information from a customer, perhaps by using a form on a Web site, and you want to submit that data as the input to a singleton prediction query.</span></span> <span data-ttu-id="fa0da-152">Por ejemplo, cuando un cliente elige un producto de una lista, podría utilizar esa selección como la entrada a una consulta que prediga los mejores productos que puede recomendar.</span><span class="sxs-lookup"><span data-stu-id="fa0da-152">For example, when a customer chooses a product from a list, you could use that selection as the input to a query that predicts the best products to recommend.</span></span>  
  
 <span data-ttu-id="fa0da-153">Las consultas de predicción singleton no requieren ninguna tabla independiente que contenga la entrada.</span><span class="sxs-lookup"><span data-stu-id="fa0da-153">Singleton prediction queries do not require a separate table that contains input.</span></span> <span data-ttu-id="fa0da-154">En su lugar, se proporcionan una o varias filas de valores como entrada para el modelo, y las predicciones se devuelven en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="fa0da-154">Instead, you provide one or multiple rows of values as input to the model, and the prediction or predictions are returned in real time.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="fa0da-155">A pesar del nombre, las consultas de predicción singleton no solo realizan predicciones únicas: puede generar varias predicciones para cada conjunto de entradas.</span><span class="sxs-lookup"><span data-stu-id="fa0da-155">Despite the name, singleton prediction queries do not just make single predictions-you can generate multiple predictions for each set of inputs.</span></span> <span data-ttu-id="fa0da-156">Puede proporcionar varios casos de entrada creando una instrucción SELECT para cada caso de entrada y combinándolas con el operador UNION.</span><span class="sxs-lookup"><span data-stu-id="fa0da-156">You provide multiple input cases by creating a SELECT statement for each input case and combining them with the UNION operator.</span></span>  
  
 <span data-ttu-id="fa0da-157">Al crear una consulta de predicción singleton, debe proporcionar los nuevos datos al modelo con el formato PREDICTION JOIN.</span><span class="sxs-lookup"><span data-stu-id="fa0da-157">When you create a singleton prediction query, you must provide the new data to the model in the form of a PREDICTION JOIN.</span></span> <span data-ttu-id="fa0da-158">Esto significa que, aunque no se esté realizando una asignación a una tabla real, hay que asegurarse de que los nuevos datos coinciden con las columnas existentes en el modelo de minería de datos.</span><span class="sxs-lookup"><span data-stu-id="fa0da-158">This means that even though you are not mapping to an actual table, you must make sure that the new data matches the existing columns in the mining model.</span></span> <span data-ttu-id="fa0da-159">Si las nuevas columnas de datos y los nuevos datos coinciden exactamente, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] asignará las columnas.</span><span class="sxs-lookup"><span data-stu-id="fa0da-159">If the new data columns and the new data match exactly, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will map the columns for you.</span></span> <span data-ttu-id="fa0da-160">Esto se denomina *NATURAL PREDICTION JOIN*.</span><span class="sxs-lookup"><span data-stu-id="fa0da-160">This is called a *NATURAL PREDICTION JOIN*.</span></span> <span data-ttu-id="fa0da-161">Sin embargo, si las columnas no coinciden, o si los nuevos datos no contienen el mismo tipo y cantidad de datos que hay en el modelo, deberá especificar qué columnas del modelo se asignan a los nuevos datos, o especificar los valores que faltan.</span><span class="sxs-lookup"><span data-stu-id="fa0da-161">However, if the columns do not match, or if the new data does not contain the same kind and amount of data that is in the model, you must specify which columns in the model map to the new data, or specify the missing values.</span></span>  
  
###  <a name="batch-prediction-queries"></a><a name="bkmk_BatchQuery"></a> <span data-ttu-id="fa0da-162">Consultas de predicción por lotes</span><span class="sxs-lookup"><span data-stu-id="fa0da-162">Batch Prediction Queries</span></span>  
 <span data-ttu-id="fa0da-163">Una consulta de predicción por lotes resulta útil si tiene datos externos que desea utilizar para realizar predicciones.</span><span class="sxs-lookup"><span data-stu-id="fa0da-163">A batch prediction query is useful when you have external data that you want to use in making predictions.</span></span> <span data-ttu-id="fa0da-164">Por ejemplo, podría haber compilado un modelo que categorice los clientes por su actividad en línea y el historial de compras.</span><span class="sxs-lookup"><span data-stu-id="fa0da-164">For example, you might have built a model that categorizes customers by their online activity and purchasing history.</span></span> <span data-ttu-id="fa0da-165">Podría aplicar ese modelo a una lista de contactos de ventas obtenidos recientemente, para crear proyecciones de ventas o identificar objetivos de las campañas propuestas.</span><span class="sxs-lookup"><span data-stu-id="fa0da-165">You could apply that model to a list of newly acquired leads, to create projections for sales, or to identify targets for proposed campaigns.</span></span>  
  
 <span data-ttu-id="fa0da-166">Al realizar una unión de predicción, debe asignar las columnas del modelo a las columnas del nuevo origen de datos.</span><span class="sxs-lookup"><span data-stu-id="fa0da-166">When you perform a prediction join, you must map the columns the model to the columns in the new data source.</span></span> <span data-ttu-id="fa0da-167">Por consiguiente, el origen de datos que elija para una entrada deberá tener datos que sean en cierto modo similares a los datos del modelo.</span><span class="sxs-lookup"><span data-stu-id="fa0da-167">Therefore, the data source that you choose for an input must data that is somewhat similar to the data in the model.</span></span> <span data-ttu-id="fa0da-168">La nueva información no tiene porqué coincidir exactamente y puede estar incompleta.</span><span class="sxs-lookup"><span data-stu-id="fa0da-168">The new information does not have to match exactly, and can be incomplete.</span></span> <span data-ttu-id="fa0da-169">Por ejemplo, suponga que el modelo se entrenó con información sobre los ingresos y la edad, pero la lista de clientes que utiliza para las predicciones incluye la edad pero no los ingresos.</span><span class="sxs-lookup"><span data-stu-id="fa0da-169">For example, suppose the model was trained using information about income and age, but the customer list you are using for predictions has age but nothing about income.</span></span> <span data-ttu-id="fa0da-170">En este escenario, podría asignar los nuevos datos al modelo y crear una predicción para cada cliente.</span><span class="sxs-lookup"><span data-stu-id="fa0da-170">In this scenario, you could still map the new data to the model and create a prediction for each customer.</span></span> <span data-ttu-id="fa0da-171">Sin embargo, si los ingresos fueran un elemento de predicción importante para el modelo, la falta de información completa afectaría a la calidad de las predicciones.</span><span class="sxs-lookup"><span data-stu-id="fa0da-171">However, if income was an important predictor for the model, the lack of complete information would affect the quality of predictions.</span></span>  
  
 <span data-ttu-id="fa0da-172">Para obtener los mejores resultados, se deben combinar tantas columnas coincidentes como sea posible entre los nuevos datos y el modelo.</span><span class="sxs-lookup"><span data-stu-id="fa0da-172">To get the best results, you should join as many of the matching columns as possible between the new data and the model.</span></span> <span data-ttu-id="fa0da-173">Sin embargo, la consulta se realizará correctamente incluso ni no hay ninguna coincidencia.</span><span class="sxs-lookup"><span data-stu-id="fa0da-173">However, the query will succeed even if there are no matches.</span></span> <span data-ttu-id="fa0da-174">Si no se combina ninguna columna, la consulta devolverá la predicción marginal, que equivale a la instrucción `SELECT <predictable-column> FROM <model>` sin una cláusula PREDICTION JOIN.</span><span class="sxs-lookup"><span data-stu-id="fa0da-174">If no columns are joined, the query will return the marginal prediction, which is equivalent to the statement `SELECT <predictable-column> FROM <model>` without a PREDICTION JOIN clause.</span></span>  
  
 <span data-ttu-id="fa0da-175">Después de haber asignado todas las columnas pertinentes correctamente, ejecute la consulta y [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] realizará las predicciones para cada fila de los nuevos datos basándose en los patrones del modelo.</span><span class="sxs-lookup"><span data-stu-id="fa0da-175">After you have successfully mapped all relevant columns, you run the query, and [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] makes predictions for each row in the new data based on patterns in the model.</span></span> <span data-ttu-id="fa0da-176">Puede volver a guardar los resultados en una nueva tabla en la vista del origen de datos que contiene los datos externos, o puede copiar y pegar los datos que está utilizando en [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] o [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fa0da-176">You can save the results back to a new table in the data source view that contains the external data, or you can copy and paste the data is you are using [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] or [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="fa0da-177">Si usa el diseñador en [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], el origen de datos externo se debe definir primero como una vista del origen de datos.</span><span class="sxs-lookup"><span data-stu-id="fa0da-177">If you use the designer in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], the external data source must first be defined as a data source view.</span></span>  
  
 <span data-ttu-id="fa0da-178">Si utiliza DMX para crear una combinación de predicción, puede especificar el origen de datos externo utilizando los comandos OPENQUERY, OPENROWSET o SHAPE.</span><span class="sxs-lookup"><span data-stu-id="fa0da-178">If you use DMX to create a prediction join, you can specify the external data source by using the OPENQUERY, OPENROWSET, or SHAPE commands.</span></span> <span data-ttu-id="fa0da-179">El método de acceso a datos predeterminado en las plantillas DMX es OPENQUERY.</span><span class="sxs-lookup"><span data-stu-id="fa0da-179">The default data access method in the DMX templates is OPENQUERY.</span></span> <span data-ttu-id="fa0da-180">Para más información sobre estos métodos, vea [&#60;source data query&#62;](/sql/dmx/source-data-query).</span><span class="sxs-lookup"><span data-stu-id="fa0da-180">For information about these methods, see [&#60;source data query&#62;](/sql/dmx/source-data-query).</span></span>  
  
###  <a name="predictions-in-time-series-mining-models"></a><a name="bkmk_TSQuery"></a> <span data-ttu-id="fa0da-181">Predicciones en modelos de minería de datos de serie temporal</span><span class="sxs-lookup"><span data-stu-id="fa0da-181">Predictions in Time Series Mining Models</span></span>  
 <span data-ttu-id="fa0da-182">Los modelos de serie temporal son diferentes de otros tipos de modelos; puede utilizar el modelo tal como está para crear predicciones, o puede proporcionar nuevos datos al modelo para actualizarlo y crear predicciones basadas en tendencias recientes.</span><span class="sxs-lookup"><span data-stu-id="fa0da-182">Time series models are different from other models types; you can either use the model as it is to create predictions, or you can provide new data to the model to update the model and create predictions based on recent trends.</span></span> <span data-ttu-id="fa0da-183">Si agrega nuevos datos, puede especificar la manera en que se deberían utilizar los nuevos datos.</span><span class="sxs-lookup"><span data-stu-id="fa0da-183">If you add new data, you can specify the way the new data should be used.</span></span>  
  
-   <span data-ttu-id="fa0da-184">*Ampliar los casos del modelo* significa agregar los nuevos datos a la serie de datos existente en el modelo de serie temporal.</span><span class="sxs-lookup"><span data-stu-id="fa0da-184">*Extending the model cases* means that you add the new data onto the existing series of data in the time series model.</span></span> <span data-ttu-id="fa0da-185">De ahora en adelante, las predicciones se basarán en la nueva serie combinada.</span><span class="sxs-lookup"><span data-stu-id="fa0da-185">Henceforth, predictions are based on the new, combined series.</span></span> <span data-ttu-id="fa0da-186">Esta opción es adecuada si solamente desea agregar algunos puntos de datos a un modelo existente.</span><span class="sxs-lookup"><span data-stu-id="fa0da-186">This option is good when you want to simply add a few data points to an existing model.</span></span>  
  
     <span data-ttu-id="fa0da-187">Por ejemplo, suponga que tiene un modelo de serie temporal existente entrenado con los datos de ventas del año anterior.</span><span class="sxs-lookup"><span data-stu-id="fa0da-187">For example, suppose that you have an existing time series model that has been trained on the sales data from the previous year.</span></span> <span data-ttu-id="fa0da-188">Después de haber recopilado varios meses de nuevos datos de ventas, decide actualizar los pronósticos de ventas para el año actual.</span><span class="sxs-lookup"><span data-stu-id="fa0da-188">After you have collected several months of new sales data, you decide to update your sales forecasts for the current year.</span></span> <span data-ttu-id="fa0da-189">Puede crear una combinación de predicción que actualice el modelo agregando los nuevos datos y que amplíe el modelo para que realice nuevas predicciones.</span><span class="sxs-lookup"><span data-stu-id="fa0da-189">You can create a prediction join that updates the model by adding new data and extends the model to make new predictions.</span></span>  
  
-   <span data-ttu-id="fa0da-190">*Reemplazar los casos del modelo* significa mantener el modelo entrenado, pero reemplazar los casos subyacentes por un nuevo conjunto de datos de casos.</span><span class="sxs-lookup"><span data-stu-id="fa0da-190">*Replacing the model cases* means that you keep the trained model, but replace the underlying cases with a new set of case data.</span></span> <span data-ttu-id="fa0da-191">Esta opción resulta útil si desea mantener la tendencia del modelo, pero aplicarla a un conjunto de datos diferente.</span><span class="sxs-lookup"><span data-stu-id="fa0da-191">This option is useful when you want to keep the trend in the model, but apply it to a different set of data.</span></span>  
  
     <span data-ttu-id="fa0da-192">Por ejemplo, su modelo original se podría haber entrenado en un conjunto de datos con volúmenes de ventas muy altos; al reemplazar los datos subyacentes por una nueva serie (quizás de un almacén con un volumen de ventas más bajo), se conserva la tendencia, pero las predicciones comienzan a partir de los valores de la serie de sustitución.</span><span class="sxs-lookup"><span data-stu-id="fa0da-192">For example, your original model might have been trained on a set of data with very high sales volumes; when you replace the underlying data with a new series (perhaps from a store with lower sales volume), you preserve the trend, but the predictions begin from the values in the replacement series.</span></span>  
  
 <span data-ttu-id="fa0da-193">Independientemente del método utilizado, el punto inicial para las predicciones siempre es el final de la serie original.</span><span class="sxs-lookup"><span data-stu-id="fa0da-193">Regardless of which approach you use, the starting point for predictions is always the end of the original series.</span></span>  
  
 <span data-ttu-id="fa0da-194">Para más información sobre cómo crear combinaciones de predicción en modelos de serie temporal, vea [Ejemplos de consultas de modelos de serie temporal](time-series-model-query-examples.md) o [PredictTimeSeries &#40;DMX&#41;](/sql/dmx/predicttimeseries-dmx).</span><span class="sxs-lookup"><span data-stu-id="fa0da-194">For more information about how to create prediction joins on time series models, see [Time Series Model Query Examples](time-series-model-query-examples.md) or [PredictTimeSeries &#40;DMX&#41;](/sql/dmx/predicttimeseries-dmx).</span></span>  
  
##  <a name="working-with-the-results-of-a-prediction-query"></a><a name="bkmk_WorkResults"></a> <span data-ttu-id="fa0da-195">Trabajar con los resultados de una consulta de predicción</span><span class="sxs-lookup"><span data-stu-id="fa0da-195">Working with the Results of a Prediction Query</span></span>  
 <span data-ttu-id="fa0da-196">Las opciones para guardar los resultados de una consulta de predicción de minería de datos serán diferentes en función de cómo se cree la consulta.</span><span class="sxs-lookup"><span data-stu-id="fa0da-196">Your options for saving the results of a data mining prediction query are different depending on how you create the query.</span></span>  
  
-   <span data-ttu-id="fa0da-197">Al crear una consulta mediante el Generador de consultas de predicción en [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] o en [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], se pueden guardar los resultados de una consulta de predicción en un origen de datos de [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] existente.</span><span class="sxs-lookup"><span data-stu-id="fa0da-197">When you build a query using Prediction Query Builder in either [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], you can save the results of a prediction query to an existing [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] data source.</span></span> <span data-ttu-id="fa0da-198">Para más información, vea [Ver y guardar los resultados de una consulta de predicción](view-and-save-the-results-of-a-prediction-query.md).</span><span class="sxs-lookup"><span data-stu-id="fa0da-198">For more information, see [View and Save the Results of a Prediction Query](view-and-save-the-results-of-a-prediction-query.md).</span></span>  
  
-   <span data-ttu-id="fa0da-199">Al crear consultas de predicción utilizando DMX en el panel Consulta de [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], puede utilizar las opciones de salida de la consulta para guardar los resultados en un archivo, o en el panel Resultados de la consulta como texto o en una cuadrícula.</span><span class="sxs-lookup"><span data-stu-id="fa0da-199">When you create prediction queries using DMX in the Query pane of [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], you can use the query output options to save the results to a file, or to the Query Results pane as text or in a grid.</span></span> <span data-ttu-id="fa0da-200">Para obtener más información, vea [Editores de consultas y texto &#40;SQL Server Management Studio&#41;](../../relational-databases/scripting/query-and-text-editors-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="fa0da-200">For more information, see [Query and Text Editors &#40;SQL Server Management Studio&#41;](../../relational-databases/scripting/query-and-text-editors-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="fa0da-201">Cuando se ejecuta una consulta de predicción utilizando los componentes de Integration Services, las tareas ofrecen la posibilidad de escribir los resultados en una base de datos mediante un administrador de conexiones de ADO.NET o de OLE DB que esté disponible.</span><span class="sxs-lookup"><span data-stu-id="fa0da-201">When you run a prediction query using the Integration Services components, the tasks provides the ability to write the results to a database by using an available ADO.NET connection manager or OLEDB connection manager.</span></span> <span data-ttu-id="fa0da-202">Para obtener más información, consulte [Data Mining Query Task](../../integration-services/control-flow/data-mining-query-task.md).</span><span class="sxs-lookup"><span data-stu-id="fa0da-202">For more information, see [Data Mining Query Task](../../integration-services/control-flow/data-mining-query-task.md).</span></span>  
  
 <span data-ttu-id="fa0da-203">Es importante entender que los resultados de una consulta de predicción no son iguales que los resultados de una consulta realizada en una base de datos relacional, que siempre devuelve una sola fila de valores relacionados.</span><span class="sxs-lookup"><span data-stu-id="fa0da-203">It is important to understand that the results of a prediction query are not like the results of a query on a relational database, which always returns a single row of related values.</span></span> <span data-ttu-id="fa0da-204">Cada función de predicción DMX que se agrega a una consulta devuelve su propio conjunto de filas.</span><span class="sxs-lookup"><span data-stu-id="fa0da-204">Each DMX prediction function that you add to a query returns its own rowset.</span></span> <span data-ttu-id="fa0da-205">Por consiguiente, si se realiza una predicción sobre un único caso, el resultado puede ser un valor predicho junto con varias columnas de tablas anidadas que contienen detalles adicionales.</span><span class="sxs-lookup"><span data-stu-id="fa0da-205">Therefore, when you make a prediction on a single case, the result might be a predicted value together with several columns of nested tables containing additional detail.</span></span>  
  
 <span data-ttu-id="fa0da-206">Si se combinan varias funciones en una consulta, los resultados devueltos se combinarán como un conjunto de filas jerárquico.</span><span class="sxs-lookup"><span data-stu-id="fa0da-206">If you combine multiple functions in one query, the return results are combined as a hierarchical rowset.</span></span> <span data-ttu-id="fa0da-207">Por ejemplo, suponga que utiliza un modelo de serie temporal para predecir valores futuros para el importe de ventas y la cantidad de ventas mediante una consulta similar a esta instrucción DMX:</span><span class="sxs-lookup"><span data-stu-id="fa0da-207">For example, say you use a time series model to predict future values for sales amount and sales quantity, using a query such as this DMX statement:</span></span>  
  
```  
SELECT  
  PredictTimeSeries([Forecasting].[Amount]) as [PredictedAmount]  
, PredictTimeSeries([Forecasting].[Quantity]) as [PredictedQty]  
FROM  
  [Forecasting]  
  
```  
  
 <span data-ttu-id="fa0da-208">Los resultados de esta consulta son dos columnas, una para cada serie de predicción, donde cada fila contiene una tabla anidada con los valores de predicción:</span><span class="sxs-lookup"><span data-stu-id="fa0da-208">The results of this query are two columns, one for each predicted series, where each row contains a nested table with the predicted values:</span></span>  
  
 <span data-ttu-id="fa0da-209">**PredictedAmount**</span><span class="sxs-lookup"><span data-stu-id="fa0da-209">**PredictedAmount**</span></span>  
  
|<span data-ttu-id="fa0da-210">$TIME</span><span class="sxs-lookup"><span data-stu-id="fa0da-210">$TIME</span></span>|<span data-ttu-id="fa0da-211">Importe</span><span class="sxs-lookup"><span data-stu-id="fa0da-211">Amount</span></span>|  
|-----------|------------|  
|<span data-ttu-id="fa0da-212">201101</span><span class="sxs-lookup"><span data-stu-id="fa0da-212">201101</span></span>|<span data-ttu-id="fa0da-213">172067.11</span><span class="sxs-lookup"><span data-stu-id="fa0da-213">172067.11</span></span>|  
  
|<span data-ttu-id="fa0da-214">$TIME</span><span class="sxs-lookup"><span data-stu-id="fa0da-214">$TIME</span></span>|<span data-ttu-id="fa0da-215">Importe</span><span class="sxs-lookup"><span data-stu-id="fa0da-215">Amount</span></span>|  
|-----------|------------|  
|<span data-ttu-id="fa0da-216">201102</span><span class="sxs-lookup"><span data-stu-id="fa0da-216">201102</span></span>|<span data-ttu-id="fa0da-217">363390.68</span><span class="sxs-lookup"><span data-stu-id="fa0da-217">363390.68</span></span>|  
  
 <span data-ttu-id="fa0da-218">**PredictedQty**</span><span class="sxs-lookup"><span data-stu-id="fa0da-218">**PredictedQty**</span></span>  
  
|<span data-ttu-id="fa0da-219">$TIME</span><span class="sxs-lookup"><span data-stu-id="fa0da-219">$TIME</span></span>|<span data-ttu-id="fa0da-220">Cantidad</span><span class="sxs-lookup"><span data-stu-id="fa0da-220">Quantity</span></span>|  
|-----------|--------------|  
|<span data-ttu-id="fa0da-221">201101</span><span class="sxs-lookup"><span data-stu-id="fa0da-221">201101</span></span>|<span data-ttu-id="fa0da-222">77</span><span class="sxs-lookup"><span data-stu-id="fa0da-222">77</span></span>|  
  
|<span data-ttu-id="fa0da-223">$TIME</span><span class="sxs-lookup"><span data-stu-id="fa0da-223">$TIME</span></span>|<span data-ttu-id="fa0da-224">Cantidad</span><span class="sxs-lookup"><span data-stu-id="fa0da-224">Quantity</span></span>|  
|-----------|--------------|  
|<span data-ttu-id="fa0da-225">201102</span><span class="sxs-lookup"><span data-stu-id="fa0da-225">201102</span></span>|<span data-ttu-id="fa0da-226">260</span><span class="sxs-lookup"><span data-stu-id="fa0da-226">260</span></span>|  
  
 <span data-ttu-id="fa0da-227">Si el proveedor no puede procesar conjuntos de filas jerárquicos, se puede eliminar la estructura de los resultados utilizando la palabra clave FLATTEN en la consulta de predicción.</span><span class="sxs-lookup"><span data-stu-id="fa0da-227">If your provider cannot handle hierarchical rowsets, you can flatten the results by using the FLATTEN keyword in the prediction query.</span></span> <span data-ttu-id="fa0da-228">Para más información y ejemplos de conjuntos de filas planas, vea [SELECT &#40;DMX&#41;](/sql/dmx/select-dmx).</span><span class="sxs-lookup"><span data-stu-id="fa0da-228">For more information, including examples of flattened rowsets, see [SELECT &#40;DMX&#41;](/sql/dmx/select-dmx).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fa0da-229">Consulte también</span><span class="sxs-lookup"><span data-stu-id="fa0da-229">See Also</span></span>  
 <span data-ttu-id="fa0da-230">[Consultas de contenido &#40;minería de datos&#41;](content-queries-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="fa0da-230">[Content Queries &#40;Data Mining&#41;](content-queries-data-mining.md) </span></span>  
 [<span data-ttu-id="fa0da-231">Consultas de definición de datos &#40;minería de datos&#41;</span><span class="sxs-lookup"><span data-stu-id="fa0da-231">Data Definition Queries &#40;Data Mining&#41;</span></span>](data-definition-queries-data-mining.md)  
  
  
