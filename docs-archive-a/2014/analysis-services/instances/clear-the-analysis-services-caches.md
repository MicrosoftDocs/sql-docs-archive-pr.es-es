---
title: Borre el Analysis Services cachés | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 6bf66fdd-6a03-4cea-b7e2-eb676ff276ff
author: minewiskan
ms.author: owend
ms.openlocfilehash: e4890dd322406dcf48bc6b8eca89f292cfe132a3
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87744939"
---
# <a name="clear-the-analysis-services-caches"></a><span data-ttu-id="f13c1-102">Borrar las memorias caché de Analysis Services</span><span class="sxs-lookup"><span data-stu-id="f13c1-102">Clear the Analysis Services Caches</span></span>
  <span data-ttu-id="f13c1-103">Analysis Services almacena los datos en memoria caché para mejorar el rendimiento de las consultas.</span><span class="sxs-lookup"><span data-stu-id="f13c1-103">Analysis Services caches data to boost query performance.</span></span> <span data-ttu-id="f13c1-104">En este tema se proporcionan recomendaciones para usar el comando ClearCache de XMLA con el fin de borrar las memorias caché creadas en respuesta a una consulta MDX.</span><span class="sxs-lookup"><span data-stu-id="f13c1-104">This topic provides recommendations for using the XMLA ClearCache command to clear caches that were created in response to an MDX query.</span></span> <span data-ttu-id="f13c1-105">Los efectos de ejecutar ClearCache varían dependiendo de que se use un modelo tabular o multidimensional.</span><span class="sxs-lookup"><span data-stu-id="f13c1-105">The effects of running ClearCache vary depending on whether you are using a tabular or multidimensional model.</span></span>  
  
 <span data-ttu-id="f13c1-106">**Cuándo conviene borrar la memoria caché para los modelos multidimensionales**</span><span class="sxs-lookup"><span data-stu-id="f13c1-106">**When to clear the cache for multidimensional models**</span></span>  
  
 <span data-ttu-id="f13c1-107">Para las bases de datos multidimensionales, Analysis Services genera memorias caché en el motor de fórmulas durante la evaluación de un cálculo y en el motor de almacenamiento para los resultados de las consultas de dimensión y de grupo de medida.</span><span class="sxs-lookup"><span data-stu-id="f13c1-107">For multidimensional databases, Analysis Services builds caches in the formula engine when evaluating a calculation, and in the storage engine for the results of dimension queries and measure group queries.</span></span> <span data-ttu-id="f13c1-108">Las consultas de grupo de medida se producen cuando el motor de fórmulas necesita datos de medida para un subcubo o una coordenada de celda.</span><span class="sxs-lookup"><span data-stu-id="f13c1-108">Measure group queries occur when the formula engine needs measure data for a cell coordinate or subcube.</span></span> <span data-ttu-id="f13c1-109">Las consultas de dimensión se producen cuando se consultan jerarquías no naturales y cuando se aplica autoexist.</span><span class="sxs-lookup"><span data-stu-id="f13c1-109">Dimension queries occur when querying unnatural hierarchies and when applying autoexists.</span></span>  
  
 <span data-ttu-id="f13c1-110">Se recomienda borrar la memoria caché al realizar pruebas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="f13c1-110">Clearing the cache is recommended when conducting performance testing.</span></span> <span data-ttu-id="f13c1-111">La acción de borrar la memoria caché entre ejecuciones de pruebas garantiza que el almacenamiento en memoria caché no sesga los resultados de pruebas que miden el impacto de un cambio en el diseño de la consulta.</span><span class="sxs-lookup"><span data-stu-id="f13c1-111">By clearing the cache between test runs, you ensure that caching does not skew any test results that measure the impact of a query design change.</span></span>  
  
 <span data-ttu-id="f13c1-112">**Cuándo conviene borrar la memoria caché para los modelos tabulares**</span><span class="sxs-lookup"><span data-stu-id="f13c1-112">**When to clear the cache for tabular models**</span></span>  
  
 <span data-ttu-id="f13c1-113">Los modelos tabulares se almacenan normalmente en memoria, donde se realizan agregaciones y otros cálculos en el momento de ejecutar una consulta.</span><span class="sxs-lookup"><span data-stu-id="f13c1-113">Tabular models are generally stored in memory, where aggregations and other calculations are performed at the time a query is executed.</span></span> <span data-ttu-id="f13c1-114">En sí, el comando ClearCache tiene un efecto limitado en los modelos tabulares.</span><span class="sxs-lookup"><span data-stu-id="f13c1-114">As such, the ClearCache command has a limited effect on tabular models.</span></span> <span data-ttu-id="f13c1-115">En un modelo tabular, los datos se pueden agregar a las memorias caché de Analysis Services si se ejecutan consultas MDX en él.</span><span class="sxs-lookup"><span data-stu-id="f13c1-115">For a tabular model, data may be added to the Analysis Services caches if MDX queries are run against it.</span></span> <span data-ttu-id="f13c1-116">Concretamente, las medidas de DAX a que hacen referencia las operaciones de autoexist y MDX pueden almacenar los resultados en la memoria caché de fórmulas y en la memoria caché de dimensiones, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="f13c1-116">In particular, DAX measures referenced by MDX and autoexists operations can cache results in the formula cache and dimension cache respectively.</span></span> <span data-ttu-id="f13c1-117">Sin embargo, conviene tener en cuenta que las jerarquías no naturales y las consultas de grupo de medidas no almacenan en caché los resultados del motor de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="f13c1-117">Note however, that unnatural hierarchies and measure group queries do not cache results in the storage engine.</span></span> <span data-ttu-id="f13c1-118">Además, es importante reconocer que las consultas de DAX no almacenan en caché los resultados del motor de fórmulas y de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="f13c1-118">Additionally, it is important to recognize that DAX queries do not cache results in the formula and storage engine.</span></span> <span data-ttu-id="f13c1-119">En la medida en que las memorias caché existen como resultado de consultas MDX, la ejecución de ClearCache en un modelo tabular invalidará los datos almacenados en caché del sistema.</span><span class="sxs-lookup"><span data-stu-id="f13c1-119">To the extent that caches exist as a result of MDX queries, running ClearCache against a tabular model will invalidate any cached data from the system.</span></span>  
  
 <span data-ttu-id="f13c1-120">Al ejecutar ClearCache también se borrarán las memorias caché en memoria en el motor analítico en memoria xVelocity (VertiPaq).</span><span class="sxs-lookup"><span data-stu-id="f13c1-120">Running ClearCache will also clear in-memory caches in the xVelocity in-memory analytics engine (VertiPaq).</span></span> <span data-ttu-id="f13c1-121">El motor xVelocity mantiene un pequeño conjunto de resultados almacenados en caché.</span><span class="sxs-lookup"><span data-stu-id="f13c1-121">The xVelocity engine maintains a small set of cached results.</span></span> <span data-ttu-id="f13c1-122">La ejecución de ClearCache invalidará estas memorias caché en el motor xVelocity.</span><span class="sxs-lookup"><span data-stu-id="f13c1-122">Running ClearCache will invalidate these caches in the xVelocity engine.</span></span>  
  
 <span data-ttu-id="f13c1-123">Finalmente, la ejecución de ClearCache también quitará los datos residuales que queden en memoria cuando un modelo tabular se configure de nuevo para el modo `DirectQuery` .</span><span class="sxs-lookup"><span data-stu-id="f13c1-123">Finally, running ClearCache will also remove residual data that is left in memory when a tabular model is reconfigured for `DirectQuery` mode.</span></span> <span data-ttu-id="f13c1-124">Esto es especialmente importante si el modelo contiene información confidencial sujeta a controles estrictos.</span><span class="sxs-lookup"><span data-stu-id="f13c1-124">This is particularly important if the model contains sensitive data that is subject to tight controls.</span></span> <span data-ttu-id="f13c1-125">En este caso, la ejecución de ClearCache es una acción preventiva que se puede adoptar para asegurarse de que solo existe información confidencial donde se espera que esté.</span><span class="sxs-lookup"><span data-stu-id="f13c1-125">In this case, running ClearCache is a precautionary action that you can take to ensure that sensitive data exists only where you expect it to be.</span></span> <span data-ttu-id="f13c1-126">La acción de borrar la memoria caché manualmente es necesaria si se usa [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] para implementar el modelo y cambiar el modo de consulta.</span><span class="sxs-lookup"><span data-stu-id="f13c1-126">Clearing the cache manually is necessary if you are using [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] to deploy the model and change the query mode.</span></span> <span data-ttu-id="f13c1-127">En cambio, si se usa [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] para especificar `DirectQuery` en el modelo y las particiones, se borrará automáticamente la memoria caché cuando cambie el modelo para utilizar ese modo de consulta.</span><span class="sxs-lookup"><span data-stu-id="f13c1-127">In contrast, using [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] to specify `DirectQuery` on the model and partitions will automatically clear the cache when you switch the model to use that query mode.</span></span>  
  
 <span data-ttu-id="f13c1-128">En comparación con las recomendaciones para borrar las memorias caché de modelos multidimensionales durante las pruebas de rendimiento, no hay ninguna recomendación general para borrar las memorias caché de modelos tabulares.</span><span class="sxs-lookup"><span data-stu-id="f13c1-128">Compared with recommendations for clearing multidimensional model caches during performance testing, there is no broad recommendation for clearing tabular model caches.</span></span> <span data-ttu-id="f13c1-129">Si no está administrando la implementación de un modelo tabular que contiene información confidencial, no hay ninguna tarea administrativa específica que requiera borrar la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="f13c1-129">If you are not managing the deployment of a tabular model that contains sensitive data, there is no specific administrative task that calls for clearing the cache.</span></span>  
  
## <a name="clear-the-cache-for-analysis-services-models"></a><span data-ttu-id="f13c1-130">Borrar la memoria caché para los modelos de Analysis Services</span><span class="sxs-lookup"><span data-stu-id="f13c1-130">Clear the cache for Analysis Services models</span></span>  
 <span data-ttu-id="f13c1-131">Para borrar la memoria caché, use XMLA y [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f13c1-131">To clear the cache, use XMLA and [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="f13c1-132">Puede borrar la memoria caché en el nivel de base de datos, cubo, dimensión o tabla, o grupo de medida.</span><span class="sxs-lookup"><span data-stu-id="f13c1-132">You can clear the cache at the database, cube, dimension or table, or measure group level.</span></span> <span data-ttu-id="f13c1-133">Los pasos siguientes para borrar la memoria caché en el nivel de base de datos son aplicables a los modelos tanto multidimensionales como tabulares.</span><span class="sxs-lookup"><span data-stu-id="f13c1-133">The following steps for clearing the cache at the database level apply to both multidimensional models and tabular models.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f13c1-134">Las pruebas de rendimiento rigurosas pueden requerir un enfoque más completo para borrar la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="f13c1-134">Rigorous performance testing might require a more comprehensive approach to clearing the cache.</span></span> <span data-ttu-id="f13c1-135">Para obtener instrucciones sobre cómo vaciar las memorias caché de Analysis Services y del sistema, vea la sección sobre borrado de memorias caché en la [Guía de operaciones de SQL Server 2008 R2 Analysis Services](https://go.microsoft.com/fwlink/?linkID=https://go.microsoft.com/fwlink/?LinkID=225539).</span><span class="sxs-lookup"><span data-stu-id="f13c1-135">For instructions on how to flush Analysis Services and file system caches, see the section on clearing caches in the [SQL Server 2008 R2 Analysis Services Operations Guide](https://go.microsoft.com/fwlink/?linkID=https://go.microsoft.com/fwlink/?LinkID=225539).</span></span>  
  
 <span data-ttu-id="f13c1-136">En los modelos multidimensionales y tabulares, la acción de borrar algunas de estas memorias caché puede ser un proceso de dos pasos que consiste en invalidar la memoria caché cuando se ejecuta ClearCache, seguido de vaciarla cuando se recibe la consulta siguiente.</span><span class="sxs-lookup"><span data-stu-id="f13c1-136">For both multidimensional and tabular models, clearing some of these caches can be a two-step process that consists of invalidating the cache when ClearCache executes, followed by emptying the cache when the next query is received.</span></span> <span data-ttu-id="f13c1-137">Una reducción del consumo de memoria solo se manifestará después de que la memoria caché quede realmente vacía.</span><span class="sxs-lookup"><span data-stu-id="f13c1-137">A reduction in memory consumption will be evident only after the cache is actually emptied.</span></span>  
  
 <span data-ttu-id="f13c1-138">La acción de borrar la memoria caché requiere proporcionar un identificador de objeto a la instrucción `ClearCache` en una consulta XMLA.</span><span class="sxs-lookup"><span data-stu-id="f13c1-138">Clearing the cache requires that you provide an object identifier to the `ClearCache` statement in an XMLA query.</span></span> <span data-ttu-id="f13c1-139">En el primer paso de este tema se explica cómo obtener un identificador de objeto.</span><span class="sxs-lookup"><span data-stu-id="f13c1-139">The first step in this topic explains how to get an object identifier.</span></span>  
  
#### <a name="step-1-get-the-object-identifier"></a><span data-ttu-id="f13c1-140">Paso 1: obtener el identificador de objeto</span><span class="sxs-lookup"><span data-stu-id="f13c1-140">Step 1: Get the object identifier</span></span>  
  
1.  <span data-ttu-id="f13c1-141">En [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], haga clic con el botón derecho en un objeto, seleccione **Propiedades**y copie el valor de la propiedad ID en el panel **Propiedades** .</span><span class="sxs-lookup"><span data-stu-id="f13c1-141">In [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], right-click an object, select **Properties**, and copy the value from the ID property in the **Properties** pane.</span></span> <span data-ttu-id="f13c1-142">Este enfoque funciona para una base de datos, cubo, dimensión o tabla.</span><span class="sxs-lookup"><span data-stu-id="f13c1-142">This approach works for the database, cube, dimension, or table.</span></span>  
  
2.  <span data-ttu-id="f13c1-143">Para obtener el identificador de grupo de medida, haga clic con el botón derecho en el grupo de medida y seleccione **Incluir grupo de medidas como**.</span><span class="sxs-lookup"><span data-stu-id="f13c1-143">To get the measure group ID, right-click the measure group and select **Script Measure Group As**.</span></span> <span data-ttu-id="f13c1-144">Elija **Crear** o **Modificar**y envíe la consulta a una ventana.</span><span class="sxs-lookup"><span data-stu-id="f13c1-144">Choose either **Create** or **Alter**, and send the query to a window.</span></span> <span data-ttu-id="f13c1-145">El identificador del grupo de medida estará visible en la definición del objeto.</span><span class="sxs-lookup"><span data-stu-id="f13c1-145">The ID of the measure group will be visible in the object definition.</span></span> <span data-ttu-id="f13c1-146">Copie el identificador de la definición del objeto.</span><span class="sxs-lookup"><span data-stu-id="f13c1-146">Copy the ID of the object definition.</span></span>  
  
#### <a name="step-2-run-the-query"></a><span data-ttu-id="f13c1-147">Paso 2: ejecutar la consulta</span><span class="sxs-lookup"><span data-stu-id="f13c1-147">Step 2: Run the query</span></span>  
  
1.  <span data-ttu-id="f13c1-148">En [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], haga clic con el botón derecho en una base de datos, señale **Nueva consulta**y seleccione **XMLA**.</span><span class="sxs-lookup"><span data-stu-id="f13c1-148">In [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], right-click a database, point to **New Query**, and select **XMLA**.</span></span>  
  
2.  <span data-ttu-id="f13c1-149">Copie el ejemplo de código siguiente en la ventana de consulta XMLA.</span><span class="sxs-lookup"><span data-stu-id="f13c1-149">Copy the following code example into the XMLA query window.</span></span> <span data-ttu-id="f13c1-150">Cambie `DatabaseID` al identificador de la base de datos en la conexión actual.</span><span class="sxs-lookup"><span data-stu-id="f13c1-150">Change `DatabaseID` to the ID of the database on the current connection.</span></span>  
  
    ```  
    <ClearCache xmlns="https://schemas.microsoft.com/analysisservices/2003/engine">  
      <Object>  
        <DatabaseID> Adventure Works DW Multidimensional</DatabaseID>  
      </Object>  
    </ClearCache>  
  
    ```  
  
     <span data-ttu-id="f13c1-151">También puede especificar una ruta de acceso de un objeto secundario, como un grupo de medida, para borrar la memoria caché solo para ese objeto.</span><span class="sxs-lookup"><span data-stu-id="f13c1-151">Alternatively, you can specify a path of a child object, such as a measure group, to clear the cache for just that object.</span></span>  
  
    ```  
    <ClearCache xmlns="https://schemas.microsoft.com/analysisservices/2003/engine">  
      <Object>  
        <DatabaseID>Adventure Works DW Multidimensional</DatabaseID>  
            <CubeID>Adventure Works</CubeID>  
            <MeasureGroupID>Fact Currency Rate</MeasureGroupID>  
      </Object>  
    </ClearCache>  
    ```  
  
3.  <span data-ttu-id="f13c1-152">Presione F5 para ejecutar la consulta.</span><span class="sxs-lookup"><span data-stu-id="f13c1-152">Press F5 to execute the query.</span></span> <span data-ttu-id="f13c1-153">Debería ver el siguiente resultado:</span><span class="sxs-lookup"><span data-stu-id="f13c1-153">You should see the following result:</span></span>  
  
    ```  
    <return xmlns="urn:schemas-microsoft-com:xml-analysis">  
      <root xmlns="urn:schemas-microsoft-com:xml-analysis:empty" />  
    </return>  
    ```  
  
## <a name="see-also"></a><span data-ttu-id="f13c1-154">Consulte también</span><span class="sxs-lookup"><span data-stu-id="f13c1-154">See Also</span></span>  
 <span data-ttu-id="f13c1-155">[Crear scripts para tareas administrativas en Analysis Services](../script-administrative-tasks-in-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="f13c1-155">[Script Administrative Tasks in Analysis Services](../script-administrative-tasks-in-analysis-services.md) </span></span>  
 [<span data-ttu-id="f13c1-156">Monitor an Analysis Services Instance</span><span class="sxs-lookup"><span data-stu-id="f13c1-156">Monitor an Analysis Services Instance</span></span>](monitor-an-analysis-services-instance.md)  
  
  
