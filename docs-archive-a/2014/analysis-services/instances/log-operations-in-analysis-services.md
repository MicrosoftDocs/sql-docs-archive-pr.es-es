---
title: Operaciones de registro en Analysis Services | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: aa1db060-95dc-4198-8aeb-cffdda44b140
author: minewiskan
ms.author: owend
ms.openlocfilehash: 95d0e41576e449ab10b243ef49cbe283940afe0b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87675036"
---
# <a name="log-operations-in-analysis-services"></a><span data-ttu-id="2a2c9-102">Operaciones de registro en Analysis Services</span><span class="sxs-lookup"><span data-stu-id="2a2c9-102">Log operations in Analysis Services</span></span>
  <span data-ttu-id="2a2c9-103">Una instancia de Analysis Services registrará las notificaciones, los errores y las advertencias del servidor en el archivo msmdsrv. log, uno para cada instancia que instale.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-103">An Analysis Services instance will log server notifications, errors, and warnings to the msmdsrv.log file - one for each instance you install.</span></span> <span data-ttu-id="2a2c9-104">Los administradores consultan este registro para obtener información sobre eventos, tanto rutinarios como extraordinarios.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-104">Administrators refer to this log for insights into routine and extraordinary events alike.</span></span> <span data-ttu-id="2a2c9-105">En las versiones recientes, los registros se han mejorado para incluir más información.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-105">In recent releases, logging has been enhanced to include more information.</span></span> <span data-ttu-id="2a2c9-106">Las entradas de registro ahora incluyen información de la versión y la edición, así como del procesador, la memoria, la conectividad y los eventos de bloqueo.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-106">Log records now include product version and edition information, as well as processor, memory, connectivity, and blocking events.</span></span> <span data-ttu-id="2a2c9-107">Puede revisar la lista completa de cambios en [Mejoras de los registros](https://support.microsoft.com/kb/2965035).</span><span class="sxs-lookup"><span data-stu-id="2a2c9-107">You can review the entire change list at [Logging improvements](https://support.microsoft.com/kb/2965035).</span></span>  
  
 <span data-ttu-id="2a2c9-108">Además de la característica de registro integrada, muchos administradores y desarrolladores también usan herramientas proporcionadas por la comunidad de Analysis Services para recopilar datos sobre las operaciones de servidor, como **ASTrace**.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-108">Besides the built-in logging feature, many administrators and developers also use tools provided by the Analysis Services community to collect data about server operations, such as **ASTrace**.</span></span> <span data-ttu-id="2a2c9-109">Vea [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/) (Ejemplos de la comunidad de Microsoft SQL Server: Analysis Services) para acceder a los vínculos de descarga.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-109">See [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/) for the download links.</span></span>  
  
 <span data-ttu-id="2a2c9-110">Este tema contiene las siguientes secciones:</span><span class="sxs-lookup"><span data-stu-id="2a2c9-110">This topic contains the following sections:</span></span>  
  
-   [<span data-ttu-id="2a2c9-111">Ubicación y tipos de registros</span><span class="sxs-lookup"><span data-stu-id="2a2c9-111">Location and types of logs</span></span>](#bkmk_location)  
  
-   [<span data-ttu-id="2a2c9-112">Información general sobre la configuración del archivo de registro</span><span class="sxs-lookup"><span data-stu-id="2a2c9-112">General information on log file configuration settings</span></span>](#bkmk_general)  
  
-   [<span data-ttu-id="2a2c9-113">Archivo de registro del servicio MSMDSRV</span><span class="sxs-lookup"><span data-stu-id="2a2c9-113">MSMDSRV service log file</span></span>](#bkmk_msmdsrv)  
  
-   [<span data-ttu-id="2a2c9-114">Registros de consultas</span><span class="sxs-lookup"><span data-stu-id="2a2c9-114">Query logs</span></span>](#bkmk_querylog)  
  
-   [<span data-ttu-id="2a2c9-115">Archivos de minivolcado (.mdmp)</span><span class="sxs-lookup"><span data-stu-id="2a2c9-115">Mini dump (.mdmp) files</span></span>](#bkmk_mdmp)  
  
-   [<span data-ttu-id="2a2c9-116">Sugerencias y prácticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="2a2c9-116">Tips and best practices</span></span>](#bkmk_tips)  
  
> [!NOTE]  
>  <span data-ttu-id="2a2c9-117">Si busca información acerca de los registros, también podría interesarle el seguimiento de las operaciones, que muestra el procesamiento y las rutas de ejecución de consultas.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-117">If you're looking for information about logging, you might also be interested in tracing operations that show processing and query execution paths.</span></span> <span data-ttu-id="2a2c9-118">En los vínculos que figuran en esta página encontrará objetos de seguimiento ad hoc y continuado (como el acceso al cubo de auditoría), así como recomendaciones sobre el mejor modo de usar la caja negra, SQL Server Profiler y xEvents: [Supervisar una instancia de Analysis Services](monitor-an-analysis-services-instance.md).</span><span class="sxs-lookup"><span data-stu-id="2a2c9-118">Trace objects for ad hoc and sustained tracing (such as auditing cube access) ─ as well as recommendations on how to best use Flight Recorder, SQL Server Profiler, and xEvents ─ can be found through the links on this page: [Monitor an Analysis Services Instance](monitor-an-analysis-services-instance.md).</span></span>  
  
##  <a name="location-and-types-of-logs"></a><a name="bkmk_location"></a><span data-ttu-id="2a2c9-119">Ubicación y tipos de registros</span><span class="sxs-lookup"><span data-stu-id="2a2c9-119">Location and types of logs</span></span>  
 <span data-ttu-id="2a2c9-120">Analysis Services proporciona los registros que se describen a continuación.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-120">Analysis Services provides the logs described below.</span></span>  
  
|<span data-ttu-id="2a2c9-121">Nombre de archivo o ubicación</span><span class="sxs-lookup"><span data-stu-id="2a2c9-121">File name or Location</span></span>|<span data-ttu-id="2a2c9-122">Tipo</span><span class="sxs-lookup"><span data-stu-id="2a2c9-122">Type</span></span>|<span data-ttu-id="2a2c9-123">Se usa para</span><span class="sxs-lookup"><span data-stu-id="2a2c9-123">Used for</span></span>|<span data-ttu-id="2a2c9-124">Activado de forma predeterminada</span><span class="sxs-lookup"><span data-stu-id="2a2c9-124">On by default</span></span>|  
|---------------------------|----------|--------------|-------------------|  
|<span data-ttu-id="2a2c9-125">Msmdsrv.log</span><span class="sxs-lookup"><span data-stu-id="2a2c9-125">Msmdsrv.log</span></span>|<span data-ttu-id="2a2c9-126">Registro de errores</span><span class="sxs-lookup"><span data-stu-id="2a2c9-126">Error log</span></span>|<span data-ttu-id="2a2c9-127">Supervisión rutinaria y solución de problemas básicos</span><span class="sxs-lookup"><span data-stu-id="2a2c9-127">Routine monitoring and basic troubleshooting</span></span>|<span data-ttu-id="2a2c9-128">Sí</span><span class="sxs-lookup"><span data-stu-id="2a2c9-128">Yes</span></span>|  
|<span data-ttu-id="2a2c9-129">Tabla OlapQueryLog en una base de datos relacional</span><span class="sxs-lookup"><span data-stu-id="2a2c9-129">OlapQueryLog table in a relational database</span></span>|<span data-ttu-id="2a2c9-130">Registro de consultas</span><span class="sxs-lookup"><span data-stu-id="2a2c9-130">Query log</span></span>|<span data-ttu-id="2a2c9-131">Recopilación de entradas para el Asistente de optimización de uso</span><span class="sxs-lookup"><span data-stu-id="2a2c9-131">Collect inputs for the Usage Optimization Wizard</span></span>|<span data-ttu-id="2a2c9-132">No</span><span class="sxs-lookup"><span data-stu-id="2a2c9-132">No</span></span>|  
|<span data-ttu-id="2a2c9-133">\<guid>Archivos archivos sqldmp. MDMP</span><span class="sxs-lookup"><span data-stu-id="2a2c9-133">SQLDmp\<guid>.mdmp files</span></span>|<span data-ttu-id="2a2c9-134">Errores y excepciones</span><span class="sxs-lookup"><span data-stu-id="2a2c9-134">Crashes and exceptions</span></span>|<span data-ttu-id="2a2c9-135">Solución de problemas a fondo</span><span class="sxs-lookup"><span data-stu-id="2a2c9-135">Deep troubleshooting</span></span>|<span data-ttu-id="2a2c9-136">No</span><span class="sxs-lookup"><span data-stu-id="2a2c9-136">No</span></span>|  
  
 <span data-ttu-id="2a2c9-137">Se recomienda encarecidamente consultar el siguiente vínculo para obtener recursos de información adicionales que no se tratan en este tema: [Initial data collection tips from Microsoft Support](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx)(Consejos para la recolección de datos inicial de Soporte técnico de Microsoft).</span><span class="sxs-lookup"><span data-stu-id="2a2c9-137">We highly recommend the following link for additional information resources not covered in this topic: [Initial data collection tips from Microsoft Support](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx).</span></span>  
  
##  <a name="general-information-on-log-file-configuration-settings"></a><a name="bkmk_general"></a><span data-ttu-id="2a2c9-138">Información general sobre las opciones de configuración del archivo de registro</span><span class="sxs-lookup"><span data-stu-id="2a2c9-138">General information on log file configuration settings</span></span>  
 <span data-ttu-id="2a2c9-139">Puede encontrar secciones para cada registro en el archivo de configuración del servidor msmdsrv.ini, ubicado en la carpeta \Program Files\Microsoft SQL Server\MSAS12.MSSQLSERVER\OLAP\Config.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-139">You can find sections for each log in the msmdsrv.ini server configuration file, located in the \Program Files\Microsoft SQL Server\MSAS12.MSSQLSERVER\OLAP\Config folder.</span></span> <span data-ttu-id="2a2c9-140">Consulte en [Configure Server Properties in Analysis Services](../server-properties/server-properties-in-analysis-services.md) las instrucciones para editar el archivo.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-140">See [Configure Server Properties in Analysis Services](../server-properties/server-properties-in-analysis-services.md) for instructions on editing the file.</span></span>  
  
 <span data-ttu-id="2a2c9-141">Recomendados que, siempre que sea posible, establezca las propiedades de registros en la página de propiedades de servidor de Management Studio.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-141">Where possible, we suggest that you set logging properties in the server properties page of Management Studio.</span></span> <span data-ttu-id="2a2c9-142">No obstante, en algunos casos debe editar el archivo msmdsrv.ini directamente para configurar los valores que no están visibles en las herramientas administrativas.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-142">Although in some cases, you must edit the msmdsrv.ini file directly to configure settings that are not visible in the administrative tools.</span></span>  
  
 <span data-ttu-id="2a2c9-143">![Sección del archivo de configuración que muestra la configuración del registro](../media/ssas-logfilesettings.png "Sección del archivo de configuración que muestra la configuración del registro")</span><span class="sxs-lookup"><span data-stu-id="2a2c9-143">![Section of the config file showing log settings](../media/ssas-logfilesettings.png "Section of the config file showing log settings")</span></span>  
  
##  <a name="msmdsrv-service-log-file"></a><a name="bkmk_msmdsrv"></a><span data-ttu-id="2a2c9-144">Archivo de registro del servicio MSMDSRV</span><span class="sxs-lookup"><span data-stu-id="2a2c9-144">MSMDSRV service log file</span></span>  
 <span data-ttu-id="2a2c9-145">Analysis Services registra las operaciones del servidor en el archivo msmdsrv.log, uno por instancia, ubicado en \Archivos de programa\Microsoft SQL Server\\<instancia\>\Olap\Log.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-145">Analysis Services logs server operations to the msmdsrv.log file, one per instance, located at \program files\Microsoft SQL Server\\<instance\>\Olap\Log.</span></span>  
  
 <span data-ttu-id="2a2c9-146">Este archivo de registro se vacía en cada reinicio del servicio.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-146">This log file is emptied at each service restart.</span></span> <span data-ttu-id="2a2c9-147">En versiones anteriores, en ocasiones los administradores podían reiniciar el servicio con el único objetivo de vaciar el archivo de registro para evitar que creciera tanto que no pudiera usarse.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-147">In previous releases, administrators would sometimes restart the service for the sole purpose of flushing the log file before it could grow so large as to become unusable.</span></span> <span data-ttu-id="2a2c9-148">Ya no es necesario.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-148">This is no longer necessary.</span></span> <span data-ttu-id="2a2c9-149">Las opciones de configuración, introducidas en SQL Server 2012 SP2 y versiones posteriores, le permiten controlar el tamaño del archivo de registro y su historial:</span><span class="sxs-lookup"><span data-stu-id="2a2c9-149">Configuration settings, introduced in SQL Server 2012 SP2 and later, give you control over the size of the log file and its history:</span></span>  
  
-   <span data-ttu-id="2a2c9-150">`MaxFileSizeMB` especifica un tamaño de archivo de registro máximo en megabytes.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-150">`MaxFileSizeMB` specifies a maximum log file size in megabytes.</span></span> <span data-ttu-id="2a2c9-151">El valor predeterminado es 256.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-151">The default is 256.</span></span> <span data-ttu-id="2a2c9-152">Un valor de reemplazo válido debe ser un entero positivo.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-152">A valid replacement value must be a positive integer.</span></span> <span data-ttu-id="2a2c9-153">Cuando se alcanzan `MaxFileSizeMB`, Analysis Services cambia el nombre del archivo actual a msmdsrv{current timestamp}.log y empieza un nuevo archivo msmdsrv.log.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-153">When `MaxFileSizeMB` is reached, Analysis Services renames the current file as msmdsrv{current timestamp}.log file, and starts a new msmdsrv.log file.</span></span>  
  
-   <span data-ttu-id="2a2c9-154">`MaxNumberFiles`Especifica la retención de archivos de registro más antiguos.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-154">`MaxNumberFiles` specifies retention of older log files.</span></span> <span data-ttu-id="2a2c9-155">El valor predeterminado es 0 (deshabilitado).</span><span class="sxs-lookup"><span data-stu-id="2a2c9-155">The default is 0 (disabled).</span></span> <span data-ttu-id="2a2c9-156">Puede cambiarlo a un número entero positivo para mantener las versiones del archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-156">You can change it to a positive integer to keep versions of the log file.</span></span> <span data-ttu-id="2a2c9-157">Cuando se alcanzan `MaxNumberFiles`, Analysis Services elimina el archivo con la marca de tiempo más antigua.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-157">When `MaxNumberFiles` is reached, Analysis Services deletes the file with the oldest timestamp in its name.</span></span>  
  
 <span data-ttu-id="2a2c9-158">Para usar esta configuración, realice lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="2a2c9-158">To use these settings, do the following:</span></span>  
  
1.  <span data-ttu-id="2a2c9-159">En el Bloc de notas, abra msmdsrv.ini.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-159">Open msmdsrv.ini in NotePad.</span></span>  
  
2.  <span data-ttu-id="2a2c9-160">Copie las dos líneas siguientes:</span><span class="sxs-lookup"><span data-stu-id="2a2c9-160">Copy the following two lines:</span></span>  
  
    ```  
    <MaxFileSizeMB>256</MaxFileSizeMB>  
    <MaxNumberOfLogFiles>5</MaxNumberOfLogFiles>  
    ```  
  
3.  <span data-ttu-id="2a2c9-161">Pegue las dos líneas en la sección Log de msmdsrv.ini, a continuación del nombre de archivo msmdsrv.log.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-161">Paste the two lines into the Log section of msmdsrv.ini, below the filename for msmdsrv.log.</span></span> <span data-ttu-id="2a2c9-162">Ambos valores deben agregarse manualmente.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-162">Both settings must be added manually.</span></span> <span data-ttu-id="2a2c9-163">No hay ningún marcador de posición para ellos en el archivo msmdsrv.ini.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-163">There are no placeholders for them in the msmdsrv.ini file.</span></span>  
  
     <span data-ttu-id="2a2c9-164">El archivo con la configuración modificada debería ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="2a2c9-164">The changed configuration file should look like the following:</span></span>  
  
    ```  
    <Log>  
    <File>msmdsrv.log</File>  
    <MaxFileSizeMB>256</MaxFileSizeMB>  
    <MaxNumberOfLogFiles>5</MaxNumberOfLogFiles>  
    <FileBufferSize>0</FileBufferSize>  
  
    ```  
  
4.  <span data-ttu-id="2a2c9-165">Edite los valores si los proporcionados difieren de lo que desea.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-165">Edit the values if those provided differ from what you want.</span></span>  
  
5.  <span data-ttu-id="2a2c9-166">Guarde el archivo.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-166">Save the file.</span></span>  
  
6.  <span data-ttu-id="2a2c9-167">Reinicie el servicio.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-167">Restart the service.</span></span>  
  
##  <a name="query-logs"></a><a name="bkmk_querylog"></a><span data-ttu-id="2a2c9-168">Registros de consultas</span><span class="sxs-lookup"><span data-stu-id="2a2c9-168">Query logs</span></span>  
 <span data-ttu-id="2a2c9-169">Quizás "registro de consultas" sea un nombre poco apropiado, ya que no registra la actividad de consulta MDX o DAX de los usuarios.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-169">The query log is a bit of a misnomer in that it does not log the MDX or DAX query activity of your users.</span></span> <span data-ttu-id="2a2c9-170">En su lugar, recopila datos sobre las consultas generadas por Analysis Services, que posteriormente se usan como entrada de datos en el Asistente para optimización basada en el uso.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-170">Instead, it collects data about queries generated by Analysis Services, which is subsequently used as data input in the Usage Based Optimization Wizard.</span></span> <span data-ttu-id="2a2c9-171">Los datos recopilados en el registro de consultas no se usan para realizar análisis directos.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-171">The data collected in the query log is not intended for direct analysis.</span></span> <span data-ttu-id="2a2c9-172">En concreto, los conjuntos de datos se describen en las matrices de bits, con un cero o uno que indican las partes del conjunto de datos que se incluyen en la consulta.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-172">Specifically, the datasets are described in bit arrays, with a zero or a one indicating the parts of dataset is included in the query.</span></span> <span data-ttu-id="2a2c9-173">De nuevo, estos datos sirven para el asistente.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-173">Again, this data is meant for the wizard.</span></span>  
  
 <span data-ttu-id="2a2c9-174">Para realizar las tareas de supervisión y solución de problemas de consultas, muchos desarrolladores y administradores usan una herramienta de la comunidad, **ASTrace**.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-174">For query monitoring and troubleshooting, many developers and administrators use a community tool, **ASTrace**, to monitor queries.</span></span> <span data-ttu-id="2a2c9-175">También puede utilizar SQL Server Profiler, xEvents o un seguimiento de Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-175">You can also use SQL Server Profiler, xEvents, or an Analysis Services trace.</span></span> <span data-ttu-id="2a2c9-176">Consulte [Supervisar una instancia de Analysis Services](monitor-an-analysis-services-instance.md) para obtener vínculos relacionados con el seguimiento.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-176">See [Monitor an Analysis Services Instance](monitor-an-analysis-services-instance.md) for tracing-related links.</span></span>  
  
 <span data-ttu-id="2a2c9-177">¿Cuándo se debe utilizar el registro de consultas?</span><span class="sxs-lookup"><span data-stu-id="2a2c9-177">When should you use the query log?</span></span> <span data-ttu-id="2a2c9-178">Se recomienda habilitar el registro de consultas como parte de un ejercicio de ajuste de rendimiento de la consulta que incluye el Asistente para optimización basada en el uso.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-178">We recommend enabling the query log as part of a query performance tuning exercise that includes the Usage Based Optimization Wizard.</span></span> <span data-ttu-id="2a2c9-179">El registro de consultas no existe hasta que se habilite la característica, cree las estructuras de datos para admitirla y establece las propiedades que usa Analysis Services para localizar y rellenar el registro.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-179">The query log does not exist until you enable the feature, create the data structures to support it, and set properties used by Analysis Services to locate and populate the log.</span></span>  
  
 <span data-ttu-id="2a2c9-180">Para habilitar el registro de consultas, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="2a2c9-180">To enable the query log, follow these steps:</span></span>  
  
1.  <span data-ttu-id="2a2c9-181">Cree una base de datos relacional de SQL Server para almacenar el registro de consultas.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-181">Create a SQL Server relational database to store the query log.</span></span>  
  
2.  <span data-ttu-id="2a2c9-182">Conceda los permisos necesarios de la cuenta de servicio de Analysis Services en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-182">Grant the Analysis Services service account sufficient permissions on the database.</span></span> <span data-ttu-id="2a2c9-183">La cuenta necesita permisos para crear una tabla, escribir en ella y leer sus datos.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-183">The account needs permission to create a table, write to the table, and read from the table.</span></span>  
  
3.  <span data-ttu-id="2a2c9-184">En SQL Server Management Studio, haga clic con el botón secundario en **Analysis Services**  |  **propiedades**  |  **General**, establezca **CreateQueryLogTable** en true.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-184">In SQL Server Management Studio, right-click **Analysis Services** | **Properties** | **General**, set **CreateQueryLogTable** to true.</span></span>  
  
4.  <span data-ttu-id="2a2c9-185">De manera opcional, cambie **QueryLogSampling** o **QueryLogTableName** si quiere tomar muestras de consultas a una tasa diferente o usar un nombre diferente para la tabla.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-185">Optionally, change **QueryLogSampling** or **QueryLogTableName** if you want to sample queries at a different rate, or use a different name for the table.</span></span>  
  
 <span data-ttu-id="2a2c9-186">La tabla de registros de consultas no se creará hasta que haya ejecutado suficientes consultas MDX para cumplir los requisitos de muestreo.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-186">The query log table will not be created until you have run enough MDX queries to meet the sampling requirements.</span></span> <span data-ttu-id="2a2c9-187">Por ejemplo, si mantiene el valor predeterminado de 10, debe ejecutar al menos 10 consultas antes de que se cree la tabla.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-187">For example, if you keep the default value of 10, you must run at least 10 queries before the table will be created.</span></span>  
  
 <span data-ttu-id="2a2c9-188">La configuración del registro de consultas se aplica a todo el servidor.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-188">Query log settings are server wide.</span></span> <span data-ttu-id="2a2c9-189">La configuración que especifique se usará en todas las bases de datos que se ejecuten en este servidor.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-189">The settings you specify will be used by all databases running on this server.</span></span>  
  
 <span data-ttu-id="2a2c9-190">![Configuración del registro de consultas en Management Studio](../media/ssas-querylogsettings.png "Configuración del registro de consultas en Management Studio")</span><span class="sxs-lookup"><span data-stu-id="2a2c9-190">![Query log settings in Management Studio](../media/ssas-querylogsettings.png "Query log settings in Management Studio")</span></span>  
  
 <span data-ttu-id="2a2c9-191">Una vez especificados los ajustes de configuración, ejecute una consulta MDX varias veces.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-191">After the configuration settings are specified, run an MDX query multiple times.</span></span> <span data-ttu-id="2a2c9-192">Si el muestreo está establecido en 10, ejecute la consulta 11 veces. Compruebe que se crea la tabla.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-192">If sampling is set to 10, run the query 11 times.Verify the table is created.</span></span> <span data-ttu-id="2a2c9-193">En Management Studio, conecte el motor de base de datos relacional, abra la carpeta de la base de datos, abra la carpeta **Tablas** y compruebe que hay un archivo **OlapQueryLog** .</span><span class="sxs-lookup"><span data-stu-id="2a2c9-193">In Management Studio, connect to the relational database engine, open the database folder, open the **Tables** folder, and verify that **OlapQueryLog** exists.</span></span> <span data-ttu-id="2a2c9-194">Si no ve la tabla inmediatamente, actualice la carpeta para recoger cualquier cambio que haya en su contenido.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-194">If you do not immediately see the table, refresh the folder to pick up any changes to its contents.</span></span>  
  
 <span data-ttu-id="2a2c9-195">Permita que el registro de consultas acumule datos suficientes para el Asistente para optimización basada en el uso.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-195">Allow the query log to accumulate sufficient data for the Usage Based Optimization Wizard.</span></span> <span data-ttu-id="2a2c9-196">Si los volúmenes de consultas son cíclicos, capture suficiente tráfico para tener un conjunto de datos representativo.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-196">If query volumes are cyclical, capture enough traffic to have a representative set of data.</span></span> <span data-ttu-id="2a2c9-197">Consulte [Asistente para optimización basada en el uso](https://msdn.microsoft.com/library/ms189706.aspx) para obtener instrucciones sobre cómo ejecutar el asistente.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-197">See [Usage Based Optimization Wizard](https://msdn.microsoft.com/library/ms189706.aspx) for instructions on how to run the wizard.</span></span>  
  
 <span data-ttu-id="2a2c9-198">Consulte [Configurar el registro de consultas de Analysis Services](https://technet.microsoft.com/library/Cc917676) para obtener más información acerca de la configuración del registro de consultas.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-198">See [Configuring the Analysis Services Query Log](https://technet.microsoft.com/library/Cc917676) to learn more about query log configuration.</span></span> <span data-ttu-id="2a2c9-199">Aunque la referencia es antigua, la configuración del registro de consultas no ha cambiado en las versiones recientes y la información que contiene se sigue aplicando.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-199">Although the paper is quite old, query log configuration has not changed in recent releases and the information it contains still applies.</span></span>  
  
##  <a name="mini-dump-mdmp-files"></a><a name="bkmk_mdmp"></a><span data-ttu-id="2a2c9-200">Archivos de minivolcado (. MDMP)</span><span class="sxs-lookup"><span data-stu-id="2a2c9-200">Mini dump (.mdmp) files</span></span>  
 <span data-ttu-id="2a2c9-201">Los archivos de volcado capturan los datos usados para analizar eventos extraordinarios.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-201">Dump files capture data used for analyzing extraordinary events.</span></span> <span data-ttu-id="2a2c9-202">Analysis Services genera automáticamente archivos de minivolcado (.mdmp) en respuesta a un bloqueo del servidor, una excepción y determinados errores de configuración.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-202">Analysis Services automatically generates mini dumps (.mdmp) in response to a server crash, exception, and some configuration errors.</span></span> <span data-ttu-id="2a2c9-203">La característica está habilitada, pero no envía informes de bloqueo de manera automática.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-203">The feature is enabled, but does not send crash reports automatically.</span></span>  
  
 <span data-ttu-id="2a2c9-204">Los informes de bloqueo se configuran a través de la sección Exception en el archivo Msmdsrv.ini.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-204">Crash reports are configured through the Exception section in the Msmdsrv.ini file.</span></span> <span data-ttu-id="2a2c9-205">Estos valores controlan la generación de archivos de volcado de memoria.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-205">These settings control memory dump file generation.</span></span> <span data-ttu-id="2a2c9-206">El siguiente fragmento muestra los valores predeterminados:</span><span class="sxs-lookup"><span data-stu-id="2a2c9-206">The following snippet shows the default values:</span></span>  
  
```  
<Exception>  
<CreateAndSendCrashReports>1</CreateAndSendCrashReports>  
<CrashReportsFolder/>  
<SQLDumperFlagsOn>0x0</SQLDumperFlagsOn>  
<SQLDumperFlagsOff>0x0</SQLDumperFlagsOff>  
<MiniDumpFlagsOn>0x0</MiniDumpFlagsOn>  
<MiniDumpFlagsOff>0x0</MiniDumpFlagsOff>  
<MinidumpErrorList>0xC1000000, 0xC1000001, 0xC102003F, 0xC1360054, 0xC1360055</MinidumpErrorList>  
<ExceptionHandlingMode>0</ExceptionHandlingMode>  
<CriticalErrorHandling>1</CriticalErrorHandling>  
<MaxExceptions>500</MaxExceptions>  
<MaxDuplicateDumps>1</MaxDuplicateDumps>  
</Exception>  
```  
  
 <span data-ttu-id="2a2c9-207">**Configurar informes de bloqueo**</span><span class="sxs-lookup"><span data-stu-id="2a2c9-207">**Configure Crash Reports**</span></span>  
  
 <span data-ttu-id="2a2c9-208">A menos que el soporte técnico de Microsoft indique lo contrario, la mayoría de los administradores usan la configuración predeterminada.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-208">Unless otherwise directed by Microsoft Support, most administrators use the default settings.</span></span> <span data-ttu-id="2a2c9-209">Este artículo anterior de Knowledge Base aún se utiliza para proporcionar instrucciones sobre cómo configurar los archivos de volcado: [Cómo configurar Analysis Services para generar archivos de volcado de memoria](https://support.microsoft.com/kb/919711).</span><span class="sxs-lookup"><span data-stu-id="2a2c9-209">This older KB article is still used to provide instruction on how to configure dump files: [How to configure Analysis Services to generate memory dump files](https://support.microsoft.com/kb/919711).</span></span>  
  
 <span data-ttu-id="2a2c9-210">El ajuste de configuración que se modificará con más probabilidad es `CreateAndSendCrashReports`, que se usa para determinar si se generará un archivo de volcado de memoria.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-210">The configuration setting most likely to be modified is the `CreateAndSendCrashReports` setting used to determine whether a memory dump file will be generated.</span></span>  
  
|<span data-ttu-id="2a2c9-211">Value</span><span class="sxs-lookup"><span data-stu-id="2a2c9-211">Value</span></span>|<span data-ttu-id="2a2c9-212">Descripción</span><span class="sxs-lookup"><span data-stu-id="2a2c9-212">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="2a2c9-213">0</span><span class="sxs-lookup"><span data-stu-id="2a2c9-213">0</span></span>|<span data-ttu-id="2a2c9-214">Desactiva el archivo de volcado de memoria.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-214">Turns off the memory dump file.</span></span> <span data-ttu-id="2a2c9-215">Se omiten todas las demás opciones de la sección Exception.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-215">All other settings under the Exception section are ignored.</span></span>|  
|<span data-ttu-id="2a2c9-216">1</span><span class="sxs-lookup"><span data-stu-id="2a2c9-216">1</span></span>|<span data-ttu-id="2a2c9-217">Habilita, pero no envía, el archivo de volcado de memoria (valor predeterminado).</span><span class="sxs-lookup"><span data-stu-id="2a2c9-217">(Default) Enables, but does not send, the memory dump file.</span></span>|  
|<span data-ttu-id="2a2c9-218">2</span><span class="sxs-lookup"><span data-stu-id="2a2c9-218">2</span></span>|<span data-ttu-id="2a2c9-219">Habilita y envía automáticamente un informe de errores a Microsoft.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-219">Enables and automatically sends an error report to Microsoft.</span></span>|  
  
 <span data-ttu-id="2a2c9-220">`CrashReportsFolder` es la ubicación de los archivos de volcado.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-220">`CrashReportsFolder` is the location of the dump files.</span></span> <span data-ttu-id="2a2c9-221">De forma predeterminada, un archivo .mdmp y los registros asociados se pueden encontrar en la carpeta \Olap\Log.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-221">By default, an .mdmp file and associated log records can be found in the \Olap\Log folder.</span></span>  
  
 <span data-ttu-id="2a2c9-222">`SQLDumperFlagsOn` se usa para generar un volcado completo.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-222">`SQLDumperFlagsOn` is used to generate a full dump.</span></span> <span data-ttu-id="2a2c9-223">De forma predeterminada, los volcados completos no están habilitados.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-223">By default, full dumps are not enabled.</span></span> <span data-ttu-id="2a2c9-224">Puede establecer esta propiedad en `0x34`.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-224">You can set this property to `0x34`.</span></span>  
  
 <span data-ttu-id="2a2c9-225">En los vínculos siguientes encontrará más información:</span><span class="sxs-lookup"><span data-stu-id="2a2c9-225">The following links provide more background:</span></span>  
  
-   [<span data-ttu-id="2a2c9-226">Información más detallada sobre el uso de minivolcados en SQL Server</span><span class="sxs-lookup"><span data-stu-id="2a2c9-226">Looking Deeper into SQL Server using Minidumps</span></span>](https://blogs.msdn.com/b/sqlcat/archive/2009/09/11/looking-deeper-into-sql-server-using-minidumps.aspx)  
  
-   [<span data-ttu-id="2a2c9-227">Cómo crear un archivo de volcado de modo de usuario</span><span class="sxs-lookup"><span data-stu-id="2a2c9-227">How to create a user mode dump file</span></span>](https://support.microsoft.com/kb/931673)  
  
-   [<span data-ttu-id="2a2c9-228">Cómo usar la utilidad Sqldumper.exe para generar un archivo de volcado en SQL Server</span><span class="sxs-lookup"><span data-stu-id="2a2c9-228">How to use the Sqldumper.exe utility to generate a dump file in SQL Server</span></span>](https://support.microsoft.com/kb/917825)  
  
##  <a name="tips-and-best-practices"></a><a name="bkmk_tips"></a><span data-ttu-id="2a2c9-229">Sugerencias y procedimientos recomendados</span><span class="sxs-lookup"><span data-stu-id="2a2c9-229">Tips and best practices</span></span>  
 <span data-ttu-id="2a2c9-230">Esta sección es un resumen de las sugerencias mencionadas en este artículo.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-230">This section is a recap of the tips mentioned throughout this article.</span></span>  
  
-   <span data-ttu-id="2a2c9-231">Configure el archivo msmdsrv.log para controlar el tamaño y el número de archivos de registro msmdsrv.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-231">Configure the msmdsrv.log file to control the size and number of msmdsrv log file.</span></span> <span data-ttu-id="2a2c9-232">Estos ajustes no están habilitados de forma predeterminada, por lo que debe asegurarse de agregarlos después de la instalación.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-232">The settings are not enabled by default, so be sure to add them as post-installation step.</span></span> <span data-ttu-id="2a2c9-233">Consulte [Archivo de registro del servicio MSMDSRV](#bkmk_msmdsrv) en este tema.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-233">See [MSMDSRV service log file](#bkmk_msmdsrv) in this topic.</span></span>  
  
-   <span data-ttu-id="2a2c9-234">Revise esta entrada de blog del servicio de asistencia al cliente de Microsoft para obtener información sobre los recursos que usan para obtener datos sobre las operaciones del servidor: [Recopilación de datos iniciales](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx).</span><span class="sxs-lookup"><span data-stu-id="2a2c9-234">Review this blog post from Microsoft Customer Support to learn what resources they use to get information about server operations: [Initial Data Collection](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx)</span></span>  
  
-   <span data-ttu-id="2a2c9-235">Utilice ASTrace2012 en lugar de un registro de consultas para averiguar quién está consultando los cubos.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-235">Use ASTrace2012, rather than a query log, to find out who is querying cubes.</span></span> <span data-ttu-id="2a2c9-236">El registro de consultas se usa normalmente para proporcionar datos al Asistente para la optimización basada en el uso. Los datos que captura no se leen o interpretan fácilmente.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-236">The query log is typically used to provide input into the Usage Based Optimization Wizard, and the data it captures is not easy to read or interpret.</span></span> <span data-ttu-id="2a2c9-237">ASTrace2012 es una herramienta de la comunidad ampliamente utilizada que captura las operaciones de consulta.</span><span class="sxs-lookup"><span data-stu-id="2a2c9-237">ASTrace2012 is a community tool, widely used, that captures query operations.</span></span> <span data-ttu-id="2a2c9-238">Vea [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/)(Ejemplos de la comunidad de Microsoft SQL Server: Analysis Services).</span><span class="sxs-lookup"><span data-stu-id="2a2c9-238">See [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2a2c9-239">Consulte también</span><span class="sxs-lookup"><span data-stu-id="2a2c9-239">See Also</span></span>  
 <span data-ttu-id="2a2c9-240">[Administración de instancias de Analysis Services](analysis-services-instance-management.md) </span><span class="sxs-lookup"><span data-stu-id="2a2c9-240">[Analysis Services Instance Management](analysis-services-instance-management.md) </span></span>  
 <span data-ttu-id="2a2c9-241">[Introducción a la supervisión de Analysis Services con SQL Server Profiler](introduction-to-monitoring-analysis-services-with-sql-server-profiler.md) </span><span class="sxs-lookup"><span data-stu-id="2a2c9-241">[Introduction to Monitoring Analysis Services with SQL Server Profiler](introduction-to-monitoring-analysis-services-with-sql-server-profiler.md) </span></span>  
 [<span data-ttu-id="2a2c9-242">Configurar las propiedades de servidor en Analysis Services</span><span class="sxs-lookup"><span data-stu-id="2a2c9-242">Configure Server Properties in Analysis Services</span></span>](../server-properties/server-properties-in-analysis-services.md)  
  
  
