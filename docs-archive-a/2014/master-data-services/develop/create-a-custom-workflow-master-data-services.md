---
title: Crear un flujo de trabajo personalizado (Master Data Services) | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: reference
ms.assetid: 8e4403e9-595c-4b6b-9d0c-f6ae1b2bc99d
author: lrtoyou1223
ms.author: lle
ms.openlocfilehash: cac53946d83eda178328b153875a86440517a560
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87678222"
---
# <a name="create-a-custom-workflow-master-data-services"></a><span data-ttu-id="62784-102">Crear un flujo de trabajo personalizado (Master Data Services)</span><span class="sxs-lookup"><span data-stu-id="62784-102">Create a Custom Workflow (Master Data Services)</span></span>
  [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] <span data-ttu-id="62784-103">utiliza reglas de negocio para crear soluciones básicas de flujo de trabajo, como actualizar y validar datos automáticamente, y enviar notificaciones por correo electrónico en función de las condiciones que especifique.</span><span class="sxs-lookup"><span data-stu-id="62784-103">uses business rules to create basic workflow solutions, such as to automatically update and validate data and have e-mail notifications sent, based on conditions you specify.</span></span> <span data-ttu-id="62784-104">Cuando requiera un procesamiento más complejo que el que proporcionan las acciones de flujo de trabajo integradas, puede usar un flujo de trabajo personalizado.</span><span class="sxs-lookup"><span data-stu-id="62784-104">When you require processing that is more complex than what the built-in workflow actions provide, use a custom workflow.</span></span> <span data-ttu-id="62784-105">Un flujo de trabajo personalizado es un ensamblado de .NET creado por usted.</span><span class="sxs-lookup"><span data-stu-id="62784-105">A custom workflow is a .NET assembly that you create.</span></span> <span data-ttu-id="62784-106">Cuando se llama a su ensamblado de flujo de trabajo, el código puede realizar cualquier acción que requiera la situación.</span><span class="sxs-lookup"><span data-stu-id="62784-106">When your workflow assembly is called, your code can take whatever action your situation requires.</span></span> <span data-ttu-id="62784-107">Por ejemplo, si su flujo de trabajo requiere un procesamiento de eventos más complejos, como aprobaciones de varios niveles o árboles de decisiones complejos, puede configurar [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] para que inicie un flujo de trabajo personalizado que analice los datos y determine dónde enviarlos para su aprobación.</span><span class="sxs-lookup"><span data-stu-id="62784-107">For example, if your workflow requires complex event processing, such as multi-tiered approvals or complicated decision trees, you can configure [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] to start a custom workflow that analyzes the data and determines where to send it for approval.</span></span>  
  
## <a name="how-custom-workflows-are-processed"></a><span data-ttu-id="62784-108">Cómo se procesan los flujos de trabajo personalizados</span><span class="sxs-lookup"><span data-stu-id="62784-108">How Custom Workflows Are Processed</span></span>  
 <span data-ttu-id="62784-109">Hay tres componentes principales implicados en el procesamiento de flujos de trabajo personalizados: la aplicación web de [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], el servicio de integración de flujos de trabajo MDS de SQL Server y el ensamblado controlador del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-109">There are three main components involved to process custom workflows: the [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] web application, SQL Server MDS Workflow Integration Service, and the workflow handler assembly.</span></span> <span data-ttu-id="62784-110">Estos componentes procesan un flujo de trabajo personalizado de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="62784-110">These components process a custom workflow as follows:</span></span>  
  
1.  <span data-ttu-id="62784-111">Para validar una entidad que inicia un flujo de trabajo se usa [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)].</span><span class="sxs-lookup"><span data-stu-id="62784-111">You use [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] to validate an entity that starts a workflow.</span></span>  
  
2.  [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] <span data-ttu-id="62784-112">envía los miembros que satisfacen las condiciones de la regla de negocio a una cola de Service Broker en la base de datos de [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="62784-112">sends members that meet the business rule conditions to a Service Broker queue in the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database.</span></span>  
  
3.  <span data-ttu-id="62784-113">A intervalos regulares, el servicio de integración de flujos de trabajo MDS de SQL Server llama a un procedimiento almacenado en la base de datos de [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="62784-113">At regular intervals, SQL Server MDS Workflow Integration Service calls a stored procedure in the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database.</span></span>  
  
4.  <span data-ttu-id="62784-114">Cuando este procedimiento almacenado encuentra registros en la cola de Service Broker, los devuelve al servicio de integración de flujos de trabajo MDS de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="62784-114">When this stored procedure finds records in the Service Broker queue, it returns them to SQL Server MDS Workflow Integration Service.</span></span>  
  
5.  <span data-ttu-id="62784-115">El servicio de integración de flujos de trabajo MDS de SQL Server enruta los datos al ensamblado controlador del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-115">SQL Server MDS Workflow Integration Services routes the data to your workflow handler assembly.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="62784-116">Nota: el servicio de integración de flujos de trabajo MDS de SQL Server está diseñado para desencadenar procesos simples.</span><span class="sxs-lookup"><span data-stu-id="62784-116">Note: SQL Server MDS Workflow Integration Service is meant to trigger simple processes.</span></span> <span data-ttu-id="62784-117">Si su código personalizado requiere un procesamiento complejo, realice el procesamiento en un subproceso distinto o fuera del proceso de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-117">If your custom code requires complex processing, complete your processing either in a separate thread or outside of the workflow process.</span></span>  
  
## <a name="configure-master-data-services-for-custom-workflows"></a><span data-ttu-id="62784-118">Configurar Master Data Services para flujos de trabajo personalizados</span><span class="sxs-lookup"><span data-stu-id="62784-118">Configure Master Data Services for Custom Workflows</span></span>  
 <span data-ttu-id="62784-119">Crear un flujo de trabajo personalizado requiere escribir código personalizado y configurar [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] para que pase los datos del flujo de trabajo al controlador de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-119">Creating a custom workflow requires writing some custom code and configuring [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] to pass workflow data to your workflow handler.</span></span> <span data-ttu-id="62784-120">Para habilitar el procesamiento del flujo de trabajo personalizado, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="62784-120">Follow these steps to enable custom workflow processing:</span></span>  
  
1.  <span data-ttu-id="62784-121">Cree un ensamblado .NET que implemente [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)).</span><span class="sxs-lookup"><span data-stu-id="62784-121">Create a .NET assembly that implements [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)).</span></span>  
  
2.  <span data-ttu-id="62784-122">Configure el servicio de integración de flujos de trabajo MDS de SQL Server para que se conecte a la base de datos de [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] y para asociar una etiqueta a su controlador de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-122">Configure SQL Server MDS Workflow Integration Service to connect to your [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database and to associate a tag with your workflow handler.</span></span>  
  
3.  <span data-ttu-id="62784-123">Inicie el servicio de integración de flujos de trabajo MDS de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="62784-123">Start SQL Server MDS Workflow Integration Service.</span></span>  
  
4.  <span data-ttu-id="62784-124">Cree una regla de negocio en [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] que inicie un flujo de trabajo etiquetado con el nombre de su controlador de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-124">Create a business rule in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] that starts a workflow that is tagged with the name of your workflow handler.</span></span>  
  
5.  <span data-ttu-id="62784-125">Aplique la regla de negocio a un miembro que desencadene el flujo de trabajo personalizado.</span><span class="sxs-lookup"><span data-stu-id="62784-125">Apply the business rule to a member that triggers your custom workflow.</span></span>  
  
### <a name="create-the-workflow-handler-assembly"></a><span data-ttu-id="62784-126">Crear el ensamblado controlador del flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="62784-126">Create the Workflow Handler Assembly</span></span>  
 <span data-ttu-id="62784-127">Un flujo de trabajo personalizado es un ensamblado de biblioteca de clases .NET que implementa la interfaz [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) .</span><span class="sxs-lookup"><span data-stu-id="62784-127">A custom workflow is a .NET class library assembly that implements the [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) interface.</span></span> <span data-ttu-id="62784-128">SQL Server servicio de integración de flujos de trabajo de MDS llama al método [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender. StartWorkflow \*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)) para ejecutar el código.</span><span class="sxs-lookup"><span data-stu-id="62784-128">SQL Server MDS Workflow Integration Service calls the [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender.StartWorkflow\*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)) method to run your code.</span></span> <span data-ttu-id="62784-129">Para obtener un ejemplo de código que implementa [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender. StartWorkflow \*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)), vea [ejemplo de flujo de trabajo personalizado &#40;Master Data Services&#41;](create-a-custom-workflow-example.md).</span><span class="sxs-lookup"><span data-stu-id="62784-129">For example code that implements [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender.StartWorkflow\*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)), see [Custom Workflow Example &#40;Master Data Services&#41;](create-a-custom-workflow-example.md).</span></span>  
  
 <span data-ttu-id="62784-130">Siga estos pasos para utilizar Visual Studio 2010 para crear un ensamblado al que el servicio de integración de flujos de trabajo MDS de SQL Server pueda llamar para controlar un flujo de trabajo personalizado:</span><span class="sxs-lookup"><span data-stu-id="62784-130">Follow these steps to use Visual Studio 2010 to create an assembly that SQL Server MDS Workflow Integration Service can call to handle a custom workflow:</span></span>  
  
1.  <span data-ttu-id="62784-131">En Visual Studio 2010, cree un proyecto **Biblioteca de clases** que use el idioma que quiera.</span><span class="sxs-lookup"><span data-stu-id="62784-131">In Visual Studio 2010, create a new **Class Library** project that uses the language of your choice.</span></span> <span data-ttu-id="62784-132">Para crear una biblioteca de clases de C#, seleccione los tipos de proyecto **Visual C#\Windows** y la plantilla **Biblioteca de clases**.</span><span class="sxs-lookup"><span data-stu-id="62784-132">To create a C# Class Library, select the **Visual C#\Windows** project types and select the **Class Library** template.</span></span> <span data-ttu-id="62784-133">Escriba un nombre para el proyecto (por ejemplo, **MDSWorkflowTest**) y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="62784-133">Enter a name for your project, such as **MDSWorkflowTest**, and click **OK**.</span></span>  
  
2.  <span data-ttu-id="62784-134">Agregue una referencia a Microsoft.MasterDataServices.WorkflowTypeExtender.dll.</span><span class="sxs-lookup"><span data-stu-id="62784-134">Add a reference to Microsoft.MasterDataServices.WorkflowTypeExtender.dll.</span></span> <span data-ttu-id="62784-135">Este ensamblado se puede encontrar en \<Your installation folder> \Master Data Services\WebApplication\bin.</span><span class="sxs-lookup"><span data-stu-id="62784-135">This assembly can be found in \<Your installation folder>\Master Data Services\WebApplication\bin.</span></span>  
  
3.  <span data-ttu-id="62784-136">Agregue "using Microsoft.MasterDataServices.Core.Workflow;" al archivo de código de C#.</span><span class="sxs-lookup"><span data-stu-id="62784-136">Add 'using Microsoft.MasterDataServices.Core.Workflow;' to your C# code file.</span></span>  
  
4.  <span data-ttu-id="62784-137">Herede de [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) en la declaración de clase.</span><span class="sxs-lookup"><span data-stu-id="62784-137">Inherit from [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) in your class declaration.</span></span> <span data-ttu-id="62784-138">La declaración de clase debe ser similar a: "public class WorkflowTester : IWorkflowTypeExtender".</span><span class="sxs-lookup"><span data-stu-id="62784-138">The class declaration should be similar to: 'public class WorkflowTester : IWorkflowTypeExtender'.</span></span>  
  
5.  <span data-ttu-id="62784-139">Implemente la interfaz [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) .</span><span class="sxs-lookup"><span data-stu-id="62784-139">Implement the [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) interface.</span></span> <span data-ttu-id="62784-140">SQL Server servicio de integración de flujos de trabajo de MDS llama al método [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender. StartWorkflow \*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)) para iniciar el flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-140">The [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender.StartWorkflow\*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)) method is called by SQL Server MDS Workflow Integration Service to start your workflow.</span></span>  
  
6.  <span data-ttu-id="62784-141">Copie el ensamblado en la ubicación del SQL Server archivo ejecutable del servicio de integración de flujos de trabajo MDS, denominado Microsoft.MasterDataServices.Workflow.exe, en \<Your installation folder> \Master Data Services\WebApplication\bin.</span><span class="sxs-lookup"><span data-stu-id="62784-141">Copy your assembly to the location of the SQL Server MDS Workflow Integration Service executable, named Microsoft.MasterDataServices.Workflow.exe, in \<Your installation folder>\Master Data Services\WebApplication\bin.</span></span>  
  
### <a name="configure-sql-server-mds-workflow-integration-service"></a><span data-ttu-id="62784-142">Configurar el servicio de integración de flujos de trabajo MDS de SQL Server</span><span class="sxs-lookup"><span data-stu-id="62784-142">Configure SQL Server MDS Workflow Integration Service</span></span>  
 <span data-ttu-id="62784-143">Edite el archivo de configuración de [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] para incluir la información de conexión de su base de datos de [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] y asociar una etiqueta al ensamblado controlador del flujo de trabajo siguiendo estos pasos:</span><span class="sxs-lookup"><span data-stu-id="62784-143">Edit the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] configuration file to include connection information for your [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database and to associate a tag with your workflow handler assembly by following these steps:</span></span>  
  
1.  <span data-ttu-id="62784-144">Busque Microsoft.MasterDataServices.Workflow.exe.config en \<Your installation folder> \Master Data Services\WebApplication\bin.</span><span class="sxs-lookup"><span data-stu-id="62784-144">Find Microsoft.MasterDataServices.Workflow.exe.config in \<Your installation folder>\Master Data Services\WebApplication\bin.</span></span>  
  
2.  <span data-ttu-id="62784-145">Agregue la información de conexión de la base de datos de [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] al valor "ConnectionString".</span><span class="sxs-lookup"><span data-stu-id="62784-145">Add the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database connection information to the "ConnectionString" setting.</span></span> <span data-ttu-id="62784-146">Si su instalación de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] usa la intercalación con distinción de mayúsculas y minúsculas, el nombre de la base de datos debe especificarse con el mismo uso de mayúsculas y minúsculas que el de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="62784-146">If your [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation uses case-sensitive collation, the name of the database must be entered in the same case as in the database.</span></span> <span data-ttu-id="62784-147">Por ejemplo, la etiqueta de configuración completa debe ser similar a la siguiente:</span><span class="sxs-lookup"><span data-stu-id="62784-147">For example, the complete setting tag might look like this:</span></span>  
  
    ```xml  
    <setting name="ConnectionString" serializeAs="String">  
        <value>Server=myServer;Database=myDatabase;Integrated Security=True</value>  
    </setting>  
    ```  
  
3.  <span data-ttu-id="62784-148">Debajo del valor "ConnectionString" agregue un valor "WorkflowTypeExtenders" para asociar un nombre de etiqueta al ensamblado controlador del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-148">Below the "ConnectionString" setting add a "WorkflowTypeExtenders" setting to associate a tag name with your workflow handler assembly.</span></span> <span data-ttu-id="62784-149">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="62784-149">For example:</span></span>  
  
    ```xml  
    <setting name="WorkflowTypeExtenders" serializeAs="String">  
        <value>TEST=MDSWorkflowTestLib.WorkflowTester, MDSWorkflowTestLib</value>  
    </setting>  
    ```  
  
     <span data-ttu-id="62784-150">El texto interno de la \<value> etiqueta tiene el formato \<Workflow tag> = \<assembly-qualified workflow type name> .</span><span class="sxs-lookup"><span data-stu-id="62784-150">The inner text of the \<value> tag is in the form of \<Workflow tag>=\<assembly-qualified workflow type name>.</span></span> <span data-ttu-id="62784-151">\<Workflow tag>es un nombre que se usa para identificar el ensamblado del controlador de flujo de trabajo cuando se crea una regla de negocios en [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="62784-151">\<Workflow tag> is a name you use to identify the workflow handler assembly when you create a business rule in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)].</span></span> <span data-ttu-id="62784-152">\<assembly-qualified workflow type name>es el nombre completo del espacio de nombres de la clase de flujo de trabajo, seguido de una coma, seguido del nombre para mostrar del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="62784-152">\<assembly-qualified workflow type name> is the namespace-qualified name of your workflow class, followed by a comma, followed by the display name of the assembly.</span></span> <span data-ttu-id="62784-153">Si su ensamblado tiene un nombre seguro, tendrá que incluir también la información de versión y su PublicKeyToken.</span><span class="sxs-lookup"><span data-stu-id="62784-153">If your assembly is strongly named, you also have to include version information and its PublicKeyToken.</span></span> <span data-ttu-id="62784-154">Puede incluir varias \<setting> etiquetas si ha creado varios controladores de flujo de trabajo para distintos tipos de flujos de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-154">You can include multiple \<setting> tags if you have created multiple workflow handlers for different kinds of workflows.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="62784-155">En función de la configuración del servidor, puede que aparezca un error "Acceso denegado" al intentar guardar el archivo Microsoft.MasterDataServices.Workflow.exe.config.</span><span class="sxs-lookup"><span data-stu-id="62784-155">Depending on the configuration of your server, you may see an "Access is denied" error when you try to save the Microsoft.MasterDataServices.Workflow.exe.config file.</span></span> <span data-ttu-id="62784-156">En tal caso, deshabilite temporalmente Control de cuentas de usuario (UAC) en el servidor.</span><span class="sxs-lookup"><span data-stu-id="62784-156">If this occurs, temporarily disable User Account Control (UAC) on the server.</span></span> <span data-ttu-id="62784-157">Para ello, abra el Panel de control y haga clic en **Sistema y seguridad**.</span><span class="sxs-lookup"><span data-stu-id="62784-157">To do this, open Control Panel, click **System and Security**.</span></span> <span data-ttu-id="62784-158">En **Centro de actividades**, haga clic en **Cambiar configuración de Control de cuentas de usuario**.</span><span class="sxs-lookup"><span data-stu-id="62784-158">Under **Action Center**, click **Change User Account Control Settings**.</span></span> <span data-ttu-id="62784-159">En el cuadro de diálogo **Configuración del Control de cuentas de usuario**, desplace la barra hasta abajo para no recibir nunca ninguna notificación.</span><span class="sxs-lookup"><span data-stu-id="62784-159">In the **User Account Control Settings** dialog, slide the bar to the bottom so that you are never notified.</span></span> <span data-ttu-id="62784-160">Reinicie su equipo y repita el procedimiento anterior para editar el archivo de configuración.</span><span class="sxs-lookup"><span data-stu-id="62784-160">Restart your computer and repeat the preceding steps to edit your configuration file.</span></span> <span data-ttu-id="62784-161">Después de guardar el archivo, restaure la configuración de UAC al nivel predeterminado.</span><span class="sxs-lookup"><span data-stu-id="62784-161">After saving the file, reset your UAC settings to the default level.</span></span>  
  
### <a name="start-sql-server-mds-workflow-integration-service"></a><span data-ttu-id="62784-162">Iniciar el servicio de integración de flujos de trabajo MDS de SQL Server</span><span class="sxs-lookup"><span data-stu-id="62784-162">Start SQL Server MDS Workflow Integration Service</span></span>  
 <span data-ttu-id="62784-163">De manera predeterminada, el servicio de integración de flujos de trabajo MDS de SQL Server no se instala.</span><span class="sxs-lookup"><span data-stu-id="62784-163">By default, SQL Server MDS Workflow Integration Service is not installed.</span></span> <span data-ttu-id="62784-164">Debe instalar el servicio para poder usarlo.</span><span class="sxs-lookup"><span data-stu-id="62784-164">You must install the service before it can be used.</span></span> <span data-ttu-id="62784-165">Para mayor seguridad, cree un usuario local para el servicio y conceda a este usuario sólo los permisos necesarios para realizar operaciones de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-165">For the greatest security, create a local user for the service and grant this user only the permissions needed to perform workflow operations.</span></span> <span data-ttu-id="62784-166">Para crear un usuario, instalar el servicio e iniciarlo, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="62784-166">To create a user, install the service, and start the service, follow these steps:</span></span>  
  
1.  <span data-ttu-id="62784-167">Utilice el administrador Usuarios y grupos locales para crear un usuario local con nombre, por ejemplo, mds_workflow_service.</span><span class="sxs-lookup"><span data-stu-id="62784-167">Use the Local Users and Groups manager to create a local user named, for example, mds_workflow_service.</span></span>  
  
2.  <span data-ttu-id="62784-168">Utilice SQL Server Management Studio para conceder permiso al usuario mds_workflow_service para ejecutar el procedimiento almacenado [mdm].[udpExternalActionsGet].</span><span class="sxs-lookup"><span data-stu-id="62784-168">Use SQL Server Management Studio to grant the mds_workflow_service user permission to execute the [mdm].[udpExternalActionsGet] stored procedure.</span></span> <span data-ttu-id="62784-169">Para ello, cree un nuevo inicio de sesión para la cuenta de mds_workflow_service, cree un nuevo usuario en la base de datos de [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)], asigne el usuario al inicio de sesión de mds_workflow_service y conceda al usuario permiso EXECUTE al procedimiento almacenado [mdm].[udpExternalActionsGet].</span><span class="sxs-lookup"><span data-stu-id="62784-169">To do this, create a new login for the mds_workflow_service account, create a new user in the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database, map this user to the mds_workflow_service login, and grant the user EXECUTE permission to the [mdm].[udpExternalActionsGet] stored procedure.</span></span>  
  
3.  <span data-ttu-id="62784-170">Conceda al usuario mds_workflow_service permiso para ejecutar el ensamblado controlador del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-170">Grant the mds_workflow_service user permission to execute the workflow handler assembly.</span></span> <span data-ttu-id="62784-171">Para ello, agregue el usuario mds_workflow_service a la pestaña **Seguridad** de las **propiedades** del ensamblado controlador del flujo de trabajo y conceda al usuario mds_workflow_service los permisos READ y EXECUTE.</span><span class="sxs-lookup"><span data-stu-id="62784-171">To do this, add the mds_workflow_service user to the **Security** tab of the **Properties** of the workflow handler assembly and grant the mds_workflow_service user READ and EXECUTE permission.</span></span>  
  
4.  <span data-ttu-id="62784-172">Conceda al usuario mds_workflow_service permiso para ejecutar el archivo ejecutable del servicio de integración de flujos de trabajos MDS de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="62784-172">Grant the mds_workflow_service user permission to execute the SQL Server MDS Workflow Integration Service executable.</span></span> <span data-ttu-id="62784-173">Para ello, agregue el usuario mds_workflow_service a la pestaña **seguridad** de las **propiedades** de Microsoft.MasterDataServices.Workflow.exe, en \<Your installation folder> \Master Data Services\WebApplication\bin y conceda el permiso de lectura y ejecución del usuario mds_workflow_service.</span><span class="sxs-lookup"><span data-stu-id="62784-173">To do this, add the mds_workflow_service user to the **Security** tab of the **Properties** of Microsoft.MasterDataServices.Workflow.exe, in \<Your installation folder>\Master Data Services\WebApplication\bin and grant the mds_workflow_service user READ and EXECUTE permission.</span></span>  
  
5.  <span data-ttu-id="62784-174">Instale el servicio de integración de flujos de trabajo MDS de SQL Server mediante la utilidad de instalación de .NET, denominada InstallUtil.exe.</span><span class="sxs-lookup"><span data-stu-id="62784-174">Install SQL Server MDS Workflow Integration Service by using the .NET installation utility, named InstallUtil.exe.</span></span> <span data-ttu-id="62784-175">InstallUtil.exe se encuentra en la carpeta de instalación de .NET (por ejemplo, C:\Windows\Microsoft.NET\Framework\v4.0.30319\\).</span><span class="sxs-lookup"><span data-stu-id="62784-175">InstallUtil.exe can be found in the .NET installation folder, such as C:\Windows\Microsoft.NET\Framework\v4.0.30319\\.</span></span> <span data-ttu-id="62784-176">Instale el servicio de integración de flujos de trabajo MDS de SQL escribiendo lo siguiente en el símbolo del sistema con permisos elevados:</span><span class="sxs-lookup"><span data-stu-id="62784-176">Install SQL Server MDS Workflow Integration Service by entering the following in an elevated command prompt:</span></span>  
  
    ```  
    C:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil Microsoft.MasterDataServices.Workflow.exe  
    ```  
  
     <span data-ttu-id="62784-177">Especifique el usuario mds_workflow_service cuando se le solicite durante la instalación.</span><span class="sxs-lookup"><span data-stu-id="62784-177">Specify the mds_workflow_service user when prompted during installation.</span></span>  
  
6.  <span data-ttu-id="62784-178">Inicie el servicio de integración de flujos de trabajo MDS de SQL Server mediante el complemento Servicios.</span><span class="sxs-lookup"><span data-stu-id="62784-178">Start SQL Server MDS Workflow Integration Service by using the Services snap-in.</span></span> <span data-ttu-id="62784-179">Para ello, busque el servicio de integración de flujos de trabajo MDS de SQL Server en el complemento Servicios, selecciónelo y haga clic en el vínculo **Iniciar**.</span><span class="sxs-lookup"><span data-stu-id="62784-179">To do this, find SQL Server MDS Workflow Integration Service in the Services snap-in, select it, and click the  **Start** link.</span></span>  
  
### <a name="create-a-workflow-business-rule"></a><span data-ttu-id="62784-180">Crear una regla de negocio del flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="62784-180">Create a Workflow Business Rule</span></span>  
 <span data-ttu-id="62784-181">Utilice [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] para crear y publicar una regla de negocio que inicie el flujo de trabajo cuando corresponda.</span><span class="sxs-lookup"><span data-stu-id="62784-181">Use [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] to create and publish a business rule that will start the workflow when applied.</span></span> <span data-ttu-id="62784-182">Debe asegurarse de que la regla de negocio contiene las acciones que cambian los valores de atributo, de modo que la regla se evalúe como false una vez aplicada.</span><span class="sxs-lookup"><span data-stu-id="62784-182">You should ensure that your business rule contains actions that change attribute values, so that the rule evaluates to false after it has been applied once.</span></span> <span data-ttu-id="62784-183">Por ejemplo, la regla de negocio puede evaluarse como true cuando un valor del atributo Precio sea superior a 500 y el valor del atributo Aprobado esté en blanco.</span><span class="sxs-lookup"><span data-stu-id="62784-183">For example, your business rule might evaluate to true when a Price attribute value is greater than 500 and the Approved attribute value is blank.</span></span> <span data-ttu-id="62784-184">La regla puede incluir dos acciones: una para establecer el valor del atributo Aprobado en Pendiente y otra para iniciar el flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-184">The rule can then include two actions: one to set the Approved attribute value to Pending and one to start the workflow.</span></span> <span data-ttu-id="62784-185">También puede crear una regla que use la condición "ha cambiado" y agregar los atributos a los grupos de seguimiento de cambios.</span><span class="sxs-lookup"><span data-stu-id="62784-185">Alternatively, you may want to create a rule that uses the "has changed" condition and add your attributes to change tracking groups.</span></span> <span data-ttu-id="62784-186">Para más información sobre las reglas de negocios, vea [Reglas de negocios &#40;Master Data Services&#41;](../business-rules-master-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="62784-186">For more information about business rules, see [Business Rules &#40;Master Data Services&#41;](../business-rules-master-data-services.md).</span></span>  
  
 <span data-ttu-id="62784-187">Cree una regla de negocio que inicie un flujo de trabajo personalizado en [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] siguiendo estos pasos:</span><span class="sxs-lookup"><span data-stu-id="62784-187">Create a business rule that starts a custom workflow in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] by following these steps:</span></span>  
  
1.  <span data-ttu-id="62784-188">En el editor de reglas de negocio de [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], una vez especificadas las condiciones de la regla de negocio, arrastre la acción **Iniciar flujo de trabajo** de la lista **Acciones externas** a la etiqueta **Acción** del panel **THEN**.</span><span class="sxs-lookup"><span data-stu-id="62784-188">In the business rule editor of [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], after you have specified the conditions of your business rule, drag the **Start Workflow** action from the **External actions** list to the **THEN** pane's **Action** label.</span></span>  
  
2.  <span data-ttu-id="62784-189">En el panel **Editar acción**, en el cuadro **Tipo de flujo de trabajo**, escriba la etiqueta que identifica el ensamblado controlador del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-189">In the **Edit Action** pane, in the **Workflow type** box, type the tag that identifies your workflow handler assembly.</span></span> <span data-ttu-id="62784-190">Esta es la etiqueta que especificó en el archivo de configuración del ensamblado (por ejemplo, PRUEBA).</span><span class="sxs-lookup"><span data-stu-id="62784-190">This is the tag you specified in the configuration file for your assembly, for example, TEST.</span></span>  
  
3.  <span data-ttu-id="62784-191">Opcionalmente, active la casilla **Incluir datos de miembro**.</span><span class="sxs-lookup"><span data-stu-id="62784-191">Optionally, select the **Include member data** check box.</span></span> <span data-ttu-id="62784-192">Active esta casilla para incluir nombres y valores de atributo en el XML que se pasa al controlador del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-192">Choose this to include attribute names and values in the XML that is passed to the workflow handler.</span></span>  
  
4.  <span data-ttu-id="62784-193">En el cuadro **Sitio de flujo de trabajo**, escriba el nombre de un sitio web.</span><span class="sxs-lookup"><span data-stu-id="62784-193">In the **Workflow site** box, type the name of a website.</span></span> <span data-ttu-id="62784-194">Puede que esto no se aplique a su flujo de trabajo personalizado, pero se puede usar para agregar contexto.</span><span class="sxs-lookup"><span data-stu-id="62784-194">For your custom workflow this may not apply, but can be used for added context.</span></span>  
  
5.  <span data-ttu-id="62784-195">En el cuadro **Nombre de flujo de trabajo**, escriba el nombre del flujo de trabajo de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="62784-195">In the **Workflow name** box, type the name of your workflow from Visual Studio.</span></span> <span data-ttu-id="62784-196">Puede que esto no se aplique a su flujo de trabajo personalizado, pero se puede usar para agregar contexto.</span><span class="sxs-lookup"><span data-stu-id="62784-196">For your custom workflow this may not apply, but can be used for added context.</span></span>  
  
6.  <span data-ttu-id="62784-197">Guarde y publique la regla de negocio.</span><span class="sxs-lookup"><span data-stu-id="62784-197">Save and publish the business rule.</span></span>  
  
### <a name="apply-business-rules-to-start-a-workflow"></a><span data-ttu-id="62784-198">Aplicar las reglas de negocio para iniciar un flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="62784-198">Apply Business Rules to Start a Workflow</span></span>  
 <span data-ttu-id="62784-199">Aplique la regla de negocio a sus datos para iniciar el flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="62784-199">Apply the business rule to your data to start the workflow.</span></span> <span data-ttu-id="62784-200">Para ello, use [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] para editar la entidad que contiene los miembros que desea validar.</span><span class="sxs-lookup"><span data-stu-id="62784-200">To do this, use [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] to edit the entity that contains the members you want to validate.</span></span> <span data-ttu-id="62784-201">Haga clic en **Aplicar reglas de negocios**.</span><span class="sxs-lookup"><span data-stu-id="62784-201">Click **Apply business rules**.</span></span> <span data-ttu-id="62784-202">En respuesta a la regla de negocio, [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] rellena la cola de Service Broker de la base de datos de [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="62784-202">In response to the business rule, [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] populates the Service Broker queue of the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database.</span></span> <span data-ttu-id="62784-203">Cuando el servicio de integración de flujos de trabajo MDS de SQL Server compruebe la cola, enviará los datos al ensamblado controlador del flujo de trabajo especificado y borrará la cola.</span><span class="sxs-lookup"><span data-stu-id="62784-203">When SQL Server MDS Workflow Integration Service checks the queue, it sends the data to the specified workflow handler assembly and clears the queue.</span></span> <span data-ttu-id="62784-204">El ensamblado controlador del flujo de trabajo realiza todas las acciones que se hayan codificado en él.</span><span class="sxs-lookup"><span data-stu-id="62784-204">The workflow handler assembly performs whatever actions you have coded into it.</span></span>  
  
## <a name="troubleshoot-custom-workflows"></a><span data-ttu-id="62784-205">Solución de problemas de flujos de trabajo personalizados</span><span class="sxs-lookup"><span data-stu-id="62784-205">Troubleshoot Custom Workflows</span></span>  
 <span data-ttu-id="62784-206">Si el ensamblado controlador del flujo de trabajo no recibe datos, puede intentar depurar el servicio de integración de flujos de trabajo MDS de SQL Server o examinar la cola de Service Broker.</span><span class="sxs-lookup"><span data-stu-id="62784-206">If your workflow handler assembly doesn't receive data, you can try debugging SQL Server MDS Workflow Integration Service or viewing the Service Broker queue.</span></span>  
  
### <a name="debug-sql-server-mds-workflow-integration-service"></a><span data-ttu-id="62784-207">Depurar el servicio de integración de flujos de trabajo MDS de SQL Server</span><span class="sxs-lookup"><span data-stu-id="62784-207">Debug SQL Server MDS Workflow Integration Service</span></span>  
 <span data-ttu-id="62784-208">Para depurar el servicio de integración de flujos de trabajo de SQL Server, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="62784-208">To debug SQL Server Workflow Integration Service, take the following steps:</span></span>  
  
1.  <span data-ttu-id="62784-209">Utilice el complemento Servicios para detener el servicio.</span><span class="sxs-lookup"><span data-stu-id="62784-209">Use the Services snap-in to stop the service.</span></span>  
  
2.  <span data-ttu-id="62784-210">Abra un símbolo del sistema, vaya a la ubicación del servicio y ejecute el servicio en modo de consola especificando: Microsoft.MasterDataServices.Workflow.exe -console.</span><span class="sxs-lookup"><span data-stu-id="62784-210">Open a command prompt, navigate to the location of the service, and run the service in console mode by entering: Microsoft.MasterDataServices.Workflow.exe -console.</span></span>  
  
3.  <span data-ttu-id="62784-211">En [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], actualice el miembro y aplique de nuevo las reglas de negocio.</span><span class="sxs-lookup"><span data-stu-id="62784-211">In [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], update your member and apply business rules again.</span></span> <span data-ttu-id="62784-212">En la ventana de la consola se muestran registros detallados.</span><span class="sxs-lookup"><span data-stu-id="62784-212">Detailed logs are displayed in the console window.</span></span>  
  
### <a name="view-the-service-broker-queue"></a><span data-ttu-id="62784-213">Examinar la cola de Service Broker</span><span class="sxs-lookup"><span data-stu-id="62784-213">View the Service Broker Queue</span></span>  
 <span data-ttu-id="62784-214">La cola de Service Broker que contiene los datos maestros pasados como parte del flujo de trabajo es: mdm.microsoft/mdm/queue/externalaction.</span><span class="sxs-lookup"><span data-stu-id="62784-214">The Service Broker queue that contains the master data passed as part of the workflow is: mdm.microsoft/mdm/queue/externalaction.</span></span> <span data-ttu-id="62784-215">Las colas se encuentran en el **Explorador de objetos** de SQL Management Studio bajo el nodo Service Broker de la base de datos de [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="62784-215">Queues can be found in the **Object Explorer** of SQL Management Studio under the Service Broker node of the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database.</span></span> <span data-ttu-id="62784-216">Tenga en cuenta que si el servicio borró la cola correctamente, la cola estará vacía.</span><span class="sxs-lookup"><span data-stu-id="62784-216">Be aware that, if the service cleared the queue properly, this queue will be empty.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="62784-217">Consulte también</span><span class="sxs-lookup"><span data-stu-id="62784-217">See Also</span></span>  
 <span data-ttu-id="62784-218">[Ejemplo de flujo de trabajo personalizado &#40;Master Data Services&#41;](create-a-custom-workflow-example.md) </span><span class="sxs-lookup"><span data-stu-id="62784-218">[Custom Workflow Example &#40;Master Data Services&#41;](create-a-custom-workflow-example.md) </span></span>  
 [<span data-ttu-id="62784-219">Descripción del código XML de flujo de trabajo personalizado &#40;Master Data Services&#41;</span><span class="sxs-lookup"><span data-stu-id="62784-219">Custom Workflow XML Description &#40;Master Data Services&#41;</span></span>](create-a-custom-workflow-xml-description.md)  
  
  
