---
title: Predecir asociaciones (tutorial intermedio de minería de datos) | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 9140c5f2-b340-45a6-9c27-d870d15aafea
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: bee5ca4ded1b2fd5cbda0712cb766c825b9d0318
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87662422"
---
# <a name="predicting-associations-intermediate-data-mining-tutorial"></a><span data-ttu-id="8ad28-102">Predecir asociaciones (Tutorial intermedio de minería de datos)</span><span class="sxs-lookup"><span data-stu-id="8ad28-102">Predicting Associations (Intermediate Data Mining Tutorial)</span></span>
  <span data-ttu-id="8ad28-103">Una vez procesados los modelos, puede utilizar la información sobre las asociaciones almacenada en el modelo para crear predicciones.</span><span class="sxs-lookup"><span data-stu-id="8ad28-103">After the models have been processed, you can use the information about associations stored in the model to create predictions.</span></span> <span data-ttu-id="8ad28-104">En la tarea final de esta lección, aprenderá a generar consultas de predicción a partir de los modelos de asociación que creó.</span><span class="sxs-lookup"><span data-stu-id="8ad28-104">In the final task of this lesson, you learn how to build prediction queries against the association models that you created.</span></span> <span data-ttu-id="8ad28-105">En esta lección se presupone que sabe cómo se utiliza el Generador de consultas de predicción y desea obtener información acerca de cómo se generan consultas de predicción a partir de modelos de asociación.</span><span class="sxs-lookup"><span data-stu-id="8ad28-105">This lesson assumes that you are familiar with how to use the Prediction Query Builder and want to learn how to build prediction queries against association models.</span></span> <span data-ttu-id="8ad28-106">Para obtener más información sobre cómo usar la predicción Generador de consultas, vea [interfaces de consulta de minería de datos](../../2014/analysis-services/data-mining/data-mining-query-tools.md).</span><span class="sxs-lookup"><span data-stu-id="8ad28-106">For more information how to use Prediction Query Builder, see [Data Mining Query Interfaces](../../2014/analysis-services/data-mining/data-mining-query-tools.md).</span></span>  
  
## <a name="creating-a-singleton-prediction-query"></a><span data-ttu-id="8ad28-107">Crear una consulta de predicción singleton</span><span class="sxs-lookup"><span data-stu-id="8ad28-107">Creating a Singleton Prediction Query</span></span>  
 <span data-ttu-id="8ad28-108">Las consultas de predicción en un modelo de asociación pueden ser muy útiles para lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="8ad28-108">Prediction queries on an association model can be very useful:</span></span>  
  
-   <span data-ttu-id="8ad28-109">Recomendar artículos a un cliente, en función de compras anteriores o relacionadas.</span><span class="sxs-lookup"><span data-stu-id="8ad28-109">Recommend items to a customer, based on prior or related purchases</span></span>  
  
-   <span data-ttu-id="8ad28-110">Buscar eventos relacionados.</span><span class="sxs-lookup"><span data-stu-id="8ad28-110">Find related events.</span></span>  
  
-   <span data-ttu-id="8ad28-111">identificar relaciones en o entre conjuntos de transacciones.</span><span class="sxs-lookup"><span data-stu-id="8ad28-111">Identify relationships in or across sets of transactions.</span></span>  
  
 <span data-ttu-id="8ad28-112">Para generar una consulta de predicción, seleccione primero el modelo de asociación que desee utilizar, y, a continuación, especifique los datos de entrada.</span><span class="sxs-lookup"><span data-stu-id="8ad28-112">To build a prediction query, you first select the association model you want to use, and then you specify the input data.</span></span> <span data-ttu-id="8ad28-113">Las entradas pueden proceder de un origen de datos externo, como una lista de valores. También puede generar una consulta singleton y proporcionar los valores sobre la marcha.</span><span class="sxs-lookup"><span data-stu-id="8ad28-113">Inputs can come from an external data source, such as a list of values, or you can build a singleton query and provide values as you go.</span></span>  
  
 <span data-ttu-id="8ad28-114">En este escenario, creará primero algunas consultas de predicción singleton para hacerse una idea de cómo funcionan las predicciones.</span><span class="sxs-lookup"><span data-stu-id="8ad28-114">For this scenario, you will first create some singleton prediction queries, to get an idea of how prediction works.</span></span> <span data-ttu-id="8ad28-115">A continuación, creará una consulta de las predicciones masivas que podría utilizar para hacer recomendaciones en función de las compras realizadas actualmente por un cliente.</span><span class="sxs-lookup"><span data-stu-id="8ad28-115">Then you will create a query for batch predictions that you could use for making recommendations based on a customer's current purchases.</span></span>  
  
#### <a name="to-create-a-prediction-query-on-an-association-model"></a><span data-ttu-id="8ad28-116">Para crear una consulta de predicción en un modelo de asociación</span><span class="sxs-lookup"><span data-stu-id="8ad28-116">To create a prediction query on an association model</span></span>  
  
1.  <span data-ttu-id="8ad28-117">Haga clic en la pestaña **predicción de modelo de minería** de datos del diseñador de minería de datos.</span><span class="sxs-lookup"><span data-stu-id="8ad28-117">Click the **Mining Model Prediction** tab of Data Mining Designer.</span></span>  
  
2.  <span data-ttu-id="8ad28-118">En el panel **modelo de minería de datos** , haga clic en **Seleccionar modelo**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-118">In the **Mining Model** pane, click **Select Model**.</span></span> <span data-ttu-id="8ad28-119">(Puede omitir este paso y el siguiente si el modelo correcto ya está seleccionado).</span><span class="sxs-lookup"><span data-stu-id="8ad28-119">(You can skip this step and the next step if the correct model is already selected.)</span></span>  
  
3.  <span data-ttu-id="8ad28-120">En el cuadro de diálogo **Seleccionar modelo de minería de datos** , expanda el nodo que representa la **Asociación**de la estructura de minería de datos y seleccione la **Asociación**del modelo.</span><span class="sxs-lookup"><span data-stu-id="8ad28-120">In the **Select Mining Model** dialog box, expand the node that represents the mining structure **Association**, and select the model **Association**.</span></span> <span data-ttu-id="8ad28-121">Haga clic en **OK**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-121">Click **OK**.</span></span>  
  
     <span data-ttu-id="8ad28-122">De momento, puede hacer caso omiso al panel de entrada.</span><span class="sxs-lookup"><span data-stu-id="8ad28-122">For now, you can ignore the input pane.</span></span>  
  
4.  <span data-ttu-id="8ad28-123">En la cuadrícula, haga clic en la celda vacía situada debajo de **origen** y seleccione **función de predicción.**</span><span class="sxs-lookup"><span data-stu-id="8ad28-123">In the grid, click the empty cell under **Source** and select **Prediction Function.**</span></span> <span data-ttu-id="8ad28-124">En la celda situada debajo de **campo**, seleccione `PredictAssociation` .</span><span class="sxs-lookup"><span data-stu-id="8ad28-124">In the cell under **Field**, select `PredictAssociation`.</span></span>  
  
     <span data-ttu-id="8ad28-125">También puede utilizar la función **PREDICT** para predecir las asociaciones.</span><span class="sxs-lookup"><span data-stu-id="8ad28-125">You can also use the **Predict** function to predict associations.</span></span> <span data-ttu-id="8ad28-126">Si lo hace, asegúrese de elegir la versión de la función de **predicción** que toma una columna de tabla como argumento.</span><span class="sxs-lookup"><span data-stu-id="8ad28-126">If you do, be sure to choose the version of the **Predict** function that takes a table column as argument.</span></span>  
  
5.  <span data-ttu-id="8ad28-127">En el panel **modelo de minería de datos** , seleccione la tabla anidada y arrástrela hasta la `vAssocSeqLineItems` cuadrícula hasta el cuadro **criterios o argumento** de la `PredictAssociation` función.</span><span class="sxs-lookup"><span data-stu-id="8ad28-127">In the **Mining Model** pane, select the nested table `vAssocSeqLineItems`, and drag it into the grid, to the **Criteria/Argument** box for the `PredictAssociation` function.</span></span>  
  
     <span data-ttu-id="8ad28-128">Al arrastrar y colocar la tabla y los nombres de columna, podrá crear instrucciones complejas sin errores sintácticos.</span><span class="sxs-lookup"><span data-stu-id="8ad28-128">Dragging and dropping table and column names lets you build complex statements without syntax errors.</span></span> <span data-ttu-id="8ad28-129">Sin embargo, reemplaza el contenido actual de la celda, que incluye otros argumentos opcionales para la `PredictAssociation` función.</span><span class="sxs-lookup"><span data-stu-id="8ad28-129">However, it replaces the current contents of the cell, which include other optional arguments for the `PredictAssociation` function.</span></span> <span data-ttu-id="8ad28-130">Para consultar los demás argumentos, puede agregar provisionalmente una segunda instancia de la función a la cuadrícula como referencia.</span><span class="sxs-lookup"><span data-stu-id="8ad28-130">To view the other arguments, you can temporarily add a second instance of the function to the grid for reference.</span></span>  
  
6.  <span data-ttu-id="8ad28-131">Haga clic en el cuadro **criterios o argumento** y escriba el siguiente texto después del nombre de la tabla:`,3`</span><span class="sxs-lookup"><span data-stu-id="8ad28-131">Click the **Criteria/Argument** box and type the following text after the table name: `,3`</span></span>  
  
     <span data-ttu-id="8ad28-132">El texto completo del cuadro **criterios o argumento** debe ser el siguiente:</span><span class="sxs-lookup"><span data-stu-id="8ad28-132">The complete text in the **Criteria/Argument** box should be as follows:</span></span>  
  
     `[Association].[v Assoc Seq Line Items],3`  
  
7.  <span data-ttu-id="8ad28-133">Haga clic en el botón **resultados** en la esquina superior de la generador de consultas de predicción.</span><span class="sxs-lookup"><span data-stu-id="8ad28-133">Click the **Results** button in the upper corner of the Prediction Query Builder.</span></span>  
  
 <span data-ttu-id="8ad28-134">Los resultados esperados contienen una sola columna con la **expresión**de encabezado.</span><span class="sxs-lookup"><span data-stu-id="8ad28-134">The expected results contain a single column with the heading **Expression**.</span></span> <span data-ttu-id="8ad28-135">La columna **expresión** contiene una tabla anidada con una sola columna y las tres filas siguientes.</span><span class="sxs-lookup"><span data-stu-id="8ad28-135">The **Expression** column contains a nested table with a single column and the following three rows.</span></span> <span data-ttu-id="8ad28-136">Como no especificó un valor de entrada, estas predicciones representan las asociaciones de productos del modelo en su conjunto que tienen mayor probabilidad de producirse.</span><span class="sxs-lookup"><span data-stu-id="8ad28-136">Because you did not specify an input value, these predictions represent the most likely product associations for the model as a whole.</span></span>  
  
|<span data-ttu-id="8ad28-137">Modelo</span><span class="sxs-lookup"><span data-stu-id="8ad28-137">Model</span></span>|  
|-----------|  
|<span data-ttu-id="8ad28-138">Women's Mountain Shorts</span><span class="sxs-lookup"><span data-stu-id="8ad28-138">Women's Mountain Shorts</span></span>|  
|<span data-ttu-id="8ad28-139">Water Bottle</span><span class="sxs-lookup"><span data-stu-id="8ad28-139">Water Bottle</span></span>|  
|<span data-ttu-id="8ad28-140">Touring-3000</span><span class="sxs-lookup"><span data-stu-id="8ad28-140">Touring-3000</span></span>|  
  
 <span data-ttu-id="8ad28-141">A continuación, utilizará el panel **entrada de consulta singleton** para especificar un producto como entrada de la consulta y ver los productos que es más probable que estén asociados a ese elemento.</span><span class="sxs-lookup"><span data-stu-id="8ad28-141">Next, you will use the **Singleton Query Input** pane to specify a product as input to the query, and view the products that are most likely associated with that item.</span></span>  
  
#### <a name="to-create-a-singleton-prediction-query-with-nested-table-inputs"></a><span data-ttu-id="8ad28-142">Para crear una consulta de predicción singleton con entradas de tabla anidada</span><span class="sxs-lookup"><span data-stu-id="8ad28-142">To create a singleton prediction query with nested table inputs</span></span>  
  
1.  <span data-ttu-id="8ad28-143">Haga clic en el botón **diseño** en la esquina del generador de consultas de predicción para volver a la cuadrícula de creación de la consulta.</span><span class="sxs-lookup"><span data-stu-id="8ad28-143">Click the **Design** button in the corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="8ad28-144">En el menú **modelo de minería de datos** , seleccione **consulta singleton**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-144">On the **Mining Model** menu, select **Singleton Query**.</span></span>  
  
3.  <span data-ttu-id="8ad28-145">En el cuadro de diálogo **modelo de minería de datos** , seleccione el modelo de **Asociación** .</span><span class="sxs-lookup"><span data-stu-id="8ad28-145">In the **Mining Model** dialog box, select the **Association** model.</span></span>  
  
4.  <span data-ttu-id="8ad28-146">En la cuadrícula, haga clic en la celda vacía situada debajo de **origen** y seleccione **función de predicción.**</span><span class="sxs-lookup"><span data-stu-id="8ad28-146">In the grid, click the empty cell under **Source** and select **Prediction Function.**</span></span> <span data-ttu-id="8ad28-147">En la celda situada debajo de **campo**, seleccione `PredictAssociation` .</span><span class="sxs-lookup"><span data-stu-id="8ad28-147">In the cell under **Field**, select `PredictAssociation`.</span></span>  
  
5.  <span data-ttu-id="8ad28-148">En el panel **modelo de minería de datos** , seleccione la tabla anidada y arrástrela hasta la `vAssocSeqLineItems` cuadrícula hasta el cuadro **criterios o argumento** de la `PredictAssociation` función.</span><span class="sxs-lookup"><span data-stu-id="8ad28-148">In the **Mining Model** pane, select the nested table `vAssocSeqLineItems`, and drag it into the grid, to the **Criteria/Argument** box for the `PredictAssociation` function.</span></span> <span data-ttu-id="8ad28-149">Escriba `,3` después del nombre de la tabla anidada como en el procedimiento anterior.</span><span class="sxs-lookup"><span data-stu-id="8ad28-149">Type `,3` after the nested table name just as in the previous procedure.</span></span>  
  
6.  <span data-ttu-id="8ad28-150">En el cuadro de diálogo **entrada de consulta singleton** , haga clic en el cuadro **valor** situado junto a **vAssoc SEQ line items**y, a continuación, haga clic en el botón **(...)** .</span><span class="sxs-lookup"><span data-stu-id="8ad28-150">In the **Singleton Query Input** dialog box, click the **Value** box next to **vAssoc Seq Line Items**, and then click the **(...)** button.</span></span>  
  
7.  <span data-ttu-id="8ad28-151">En el cuadro de diálogo **entrada de tabla anidada** , seleccione `Touring Tire` en el panel **columna de clave** y, a continuación, haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-151">In the **Nested Table Input** dialog box, select `Touring Tire` in the **Key column** pane, and then click **Add**.</span></span>  
  
8.  <span data-ttu-id="8ad28-152">Haga clic en el botón **resultados** .</span><span class="sxs-lookup"><span data-stu-id="8ad28-152">Click the **Results** button.</span></span>  
  
 <span data-ttu-id="8ad28-153">Los resultados muestran ahora las predicciones de los productos que con mayor probabilidad estarán asociados a Touring Tire.</span><span class="sxs-lookup"><span data-stu-id="8ad28-153">The results now show the predictions for products that are most likely associated with the Touring Tire.</span></span>  
  
|<span data-ttu-id="8ad28-154">Modelo</span><span class="sxs-lookup"><span data-stu-id="8ad28-154">Model</span></span>|  
|-----------|  
|<span data-ttu-id="8ad28-155">Touring Tire Tube</span><span class="sxs-lookup"><span data-stu-id="8ad28-155">Touring Tire Tube</span></span>|  
|<span data-ttu-id="8ad28-156">Sport-100</span><span class="sxs-lookup"><span data-stu-id="8ad28-156">Sport-100</span></span>|  
|<span data-ttu-id="8ad28-157">Water Bottle</span><span class="sxs-lookup"><span data-stu-id="8ad28-157">Water Bottle</span></span>|  
  
 <span data-ttu-id="8ad28-158">Sin embargo, al explorar el modelo sabrá ya que Touring Tire Tube a menudo se compra junto con Touring Tire; lo que más le interesa saber es qué productos puede recomendar a los clientes que compran estos dos artículos juntos.</span><span class="sxs-lookup"><span data-stu-id="8ad28-158">However, you already know from exploring the model that the Touring Tire Tube is frequently purchased with the Touring Tire; you are more interested in knowing what products you can recommend to customers who purchase these items together.</span></span> <span data-ttu-id="8ad28-159">Cambiará la consulta para que prediga productos relacionados en función de dos elementos de la cesta.</span><span class="sxs-lookup"><span data-stu-id="8ad28-159">You will change the query so that it predicts related products based on two items in the basket.</span></span> <span data-ttu-id="8ad28-160">Modificará también la consulta para agregar la probabilidad de cada producto predicho.</span><span class="sxs-lookup"><span data-stu-id="8ad28-160">You will also modify the query to add the probability for each predicted product.</span></span>  
  
#### <a name="to-add-inputs-and-probabilities-to-the-singleton-prediction-query"></a><span data-ttu-id="8ad28-161">Para agregar entradas y probabilidades a la consulta de predicción singleton</span><span class="sxs-lookup"><span data-stu-id="8ad28-161">To add inputs and probabilities to the singleton prediction query</span></span>  
  
1.  <span data-ttu-id="8ad28-162">Haga clic en el botón **diseño** en la esquina del generador de consultas de predicción para volver a la cuadrícula de creación de la consulta.</span><span class="sxs-lookup"><span data-stu-id="8ad28-162">Click the **Design** button in the corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="8ad28-163">En el cuadro de diálogo **entrada de consulta singleton** , haga clic en el cuadro **valor** situado junto a **vAssoc SEQ line items**y, a continuación, haga clic en el botón **(...)** .</span><span class="sxs-lookup"><span data-stu-id="8ad28-163">In the **Singleton Query Input** dialog box, click the **Value** box next to **vAssoc Seq Line Items**, and then click the **(...)** button.</span></span>  
  
3.  <span data-ttu-id="8ad28-164">En el panel **columna de clave** , seleccione `Touring Tire` y, a continuación, haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-164">In the **Key column** pane, select `Touring Tire`, and then click **Add**.</span></span>  
  
4.  <span data-ttu-id="8ad28-165">En la cuadrícula, haga clic en la celda vacía situada debajo de **origen** y seleccione **función de predicción.**</span><span class="sxs-lookup"><span data-stu-id="8ad28-165">In the grid, click the empty cell under **Source** and select **Prediction Function.**</span></span> <span data-ttu-id="8ad28-166">En la celda situada debajo de **campo**, seleccione `PredictAssociation` .</span><span class="sxs-lookup"><span data-stu-id="8ad28-166">In the cell under **Field**, select `PredictAssociation`.</span></span>  
  
5.  <span data-ttu-id="8ad28-167">En el panel **modelo de minería de datos** , seleccione la tabla anidada y arrástrela hasta la `vAssocSeqLineItems` cuadrícula hasta el cuadro **criterios o argumento** de la `PredictAssociation` función.</span><span class="sxs-lookup"><span data-stu-id="8ad28-167">In the **Mining Model** pane, select the nested table `vAssocSeqLineItems`, and drag it into the grid, to the **Criteria/Argument** box for the `PredictAssociation` function.</span></span> <span data-ttu-id="8ad28-168">Escriba `,3` después del nombre de la tabla anidada como en el procedimiento anterior.</span><span class="sxs-lookup"><span data-stu-id="8ad28-168">Type `,3` after the nested table name just as in the previous procedure.</span></span>  
  
6.  <span data-ttu-id="8ad28-169">En el cuadro de diálogo **entrada de tabla anidada** , seleccione `Touring Tire Tube` en el panel **columna de clave** y, a continuación, haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-169">In the **Nested Table Input** dialog box, select `Touring Tire Tube` in the **Key column** pane, and then click **Add**.</span></span>  
  
7.  <span data-ttu-id="8ad28-170">En la cuadrícula, en la fila de la `PredictAssociation` función, haga clic en el cuadro **criterios o argumento** y cambie los argumentos para agregar el argumento INCLUDE_STATISTICS.</span><span class="sxs-lookup"><span data-stu-id="8ad28-170">In the grid, in the row for the `PredictAssociation` function, click the **Criteria/Argument** box, and change the arguments to add the argument, INCLUDE_STATISTICS.</span></span>  
  
     <span data-ttu-id="8ad28-171">El texto completo del cuadro **criterios o argumento** debe ser el siguiente:</span><span class="sxs-lookup"><span data-stu-id="8ad28-171">The complete text in the **Criteria/Argument** box should be as follows:</span></span>  
  
     `[Association].[v Assoc Seq Line Items], INCLUDE_STATISTICS, 3`  
  
8.  <span data-ttu-id="8ad28-172">Haga clic en el botón **resultados** .</span><span class="sxs-lookup"><span data-stu-id="8ad28-172">Click the **Results** button.</span></span>  
  
 <span data-ttu-id="8ad28-173">Los resultados de la tabla anidada se modifican ahora para mostrar las predicciones, junto con la compatibilidad y probabilidad.</span><span class="sxs-lookup"><span data-stu-id="8ad28-173">The results in the nested table now change to show the predictions, together with support and probability.</span></span> <span data-ttu-id="8ad28-174">Para obtener más información sobre cómo interpretar estos valores, vea [contenido del modelo de minería de datos para los modelos de asociación &#40;Analysis Services-&#41;de minería de datos ](../../2014/analysis-services/data-mining/mining-model-content-for-association-models-analysis-services-data-mining.md).</span><span class="sxs-lookup"><span data-stu-id="8ad28-174">For more information about how to interpret these values, see [Mining Model Content for Association Models &#40;Analysis Services - Data Mining&#41;](../../2014/analysis-services/data-mining/mining-model-content-for-association-models-analysis-services-data-mining.md).</span></span>  
  
|<span data-ttu-id="8ad28-175">Modelo</span><span class="sxs-lookup"><span data-stu-id="8ad28-175">Model</span></span>|<span data-ttu-id="8ad28-176">$SUPPORT</span><span class="sxs-lookup"><span data-stu-id="8ad28-176">$SUPPORT</span></span>|<span data-ttu-id="8ad28-177">$PROBABILITY</span><span class="sxs-lookup"><span data-stu-id="8ad28-177">$PROBABILITY</span></span>|<span data-ttu-id="8ad28-178">$ADJUSTEDPROBABILITY</span><span class="sxs-lookup"><span data-stu-id="8ad28-178">$ADJUSTEDPROBABILITY</span></span>|  
|-----------|--------------|------------------|--------------------------|  
|<span data-ttu-id="8ad28-179">Sport-100</span><span class="sxs-lookup"><span data-stu-id="8ad28-179">Sport-100</span></span>|<span data-ttu-id="8ad28-180">4334</span><span class="sxs-lookup"><span data-stu-id="8ad28-180">4334</span></span>|<span data-ttu-id="8ad28-181">0,291...</span><span class="sxs-lookup"><span data-stu-id="8ad28-181">0.291...</span></span>|<span data-ttu-id="8ad28-182">0,252...</span><span class="sxs-lookup"><span data-stu-id="8ad28-182">0.252...</span></span>|  
|<span data-ttu-id="8ad28-183">Water Bottle</span><span class="sxs-lookup"><span data-stu-id="8ad28-183">Water Bottle</span></span>|<span data-ttu-id="8ad28-184">2866</span><span class="sxs-lookup"><span data-stu-id="8ad28-184">2866</span></span>|<span data-ttu-id="8ad28-185">0,192...</span><span class="sxs-lookup"><span data-stu-id="8ad28-185">0.192...</span></span>|<span data-ttu-id="8ad28-186">0,175...</span><span class="sxs-lookup"><span data-stu-id="8ad28-186">0.175...</span></span>|  
|<span data-ttu-id="8ad28-187">Patch Kit</span><span class="sxs-lookup"><span data-stu-id="8ad28-187">Patch Kit</span></span>|<span data-ttu-id="8ad28-188">2113</span><span class="sxs-lookup"><span data-stu-id="8ad28-188">2113</span></span>|<span data-ttu-id="8ad28-189">0,142...</span><span class="sxs-lookup"><span data-stu-id="8ad28-189">0.142...</span></span>|<span data-ttu-id="8ad28-190">0,132</span><span class="sxs-lookup"><span data-stu-id="8ad28-190">0.132</span></span>|  
  
## <a name="working-with-results"></a><span data-ttu-id="8ad28-191">Trabajar con resultados</span><span class="sxs-lookup"><span data-stu-id="8ad28-191">Working with Results</span></span>  
 <span data-ttu-id="8ad28-192">Cuando hay muchas tablas anidadas en los resultados, es posible que desee simplificar los resultados para facilitar su consulta.</span><span class="sxs-lookup"><span data-stu-id="8ad28-192">When there are many nested tables in the results, you might want to flatten the results for easier viewing.</span></span> <span data-ttu-id="8ad28-193">Para ello, puede modificar la consulta manualmente y agregar la palabra clave `FLATTENED`.</span><span class="sxs-lookup"><span data-stu-id="8ad28-193">To do this, you can manually modify the query and add the `FLATTENED` keyword.</span></span>  
  
#### <a name="to-flatten-nested-rowsets-in-a-prediction-query"></a><span data-ttu-id="8ad28-194">Para simplificar los conjuntos de filas anidados de una consulta de predicción</span><span class="sxs-lookup"><span data-stu-id="8ad28-194">To flatten nested rowsets in a prediction query</span></span>  
  
1.  <span data-ttu-id="8ad28-195">Haga clic en el botón **SQL** en la esquina del generador de consultas de predicción.</span><span class="sxs-lookup"><span data-stu-id="8ad28-195">Click the **SQL** button in the corner of the Prediction Query Builder.</span></span>  
  
     <span data-ttu-id="8ad28-196">La cuadrícula cambia a un panel abierto donde puede ver y modificar la instrucción DMX que creó el Generador de consultas de predicción.</span><span class="sxs-lookup"><span data-stu-id="8ad28-196">The grid changes to an open pane where you can view and modify the DMX statement that was created by the Prediction Query Builder.</span></span>  
  
2.  <span data-ttu-id="8ad28-197">Después de la palabra clave `SELECT`, escriba `FLATTENED`.</span><span class="sxs-lookup"><span data-stu-id="8ad28-197">After the `SELECT` keyword, type `FLATTENED`.</span></span>  
  
     <span data-ttu-id="8ad28-198">El texto completo de la consulta debería ser el siguiente:</span><span class="sxs-lookup"><span data-stu-id="8ad28-198">The complete text of the query should be as follows:</span></span>  
  
    ```  
    SELECT FLATTENED  
      PredictAssociation([Association].[v Assoc Seq Line Items],INCLUDE_STATISTICS,3)  
    FROM  
      [Association]  
    NATURAL PREDICTION JOIN  
    (SELECT (SELECT 'Touring Tire' AS [Model]  
      UNION SELECT 'Touring Tire Tube' AS [Model]) AS [v Assoc Seq Line Items]) AS t  
    ```  
  
3.  <span data-ttu-id="8ad28-199">Haga clic en el botón **resultados** en la esquina superior de la generador de consultas de predicción.</span><span class="sxs-lookup"><span data-stu-id="8ad28-199">Click the **Results** button in the upper corner of the Prediction Query Builder.</span></span>  
  
 <span data-ttu-id="8ad28-200">Tenga en cuenta que después de editar una consulta manualmente, no podrá volver a cambiar a la vista Diseño sin perder los cambios.</span><span class="sxs-lookup"><span data-stu-id="8ad28-200">Note that after you have manually edited a query, you will not be able to switch back to Design view without losing the changes.</span></span> <span data-ttu-id="8ad28-201">Si desea guardar la consulta, puede copiar la instrucción DMX que creó manualmente en un archivo de texto.</span><span class="sxs-lookup"><span data-stu-id="8ad28-201">If you wish to save the query, you can copy the DMX statement that you created manually to a text file.</span></span> <span data-ttu-id="8ad28-202">Cuando cambie de nuevo a la vista Diseño, la consulta se revertirá a la última versión que fue válida en la vista Diseño.</span><span class="sxs-lookup"><span data-stu-id="8ad28-202">When you change back to Design view, the query is reverted to the last version that was valid in Design view.</span></span>  
  
## <a name="creating-multiple-predictions"></a><span data-ttu-id="8ad28-203">Crear varias predicciones</span><span class="sxs-lookup"><span data-stu-id="8ad28-203">Creating Multiple Predictions</span></span>  
 <span data-ttu-id="8ad28-204">Suponga que desea conocer las mejores predicciones de cada cliente en función de las compras realizadas en el pasado.</span><span class="sxs-lookup"><span data-stu-id="8ad28-204">Suppose you want to know the best predictions for individual customers, based on past purchases.</span></span> <span data-ttu-id="8ad28-205">Puede utilizar datos externos como entrada de la consulta de predicción, por ejemplo, tablas que contengan el identificador del cliente y las compras más recientes de productos.</span><span class="sxs-lookup"><span data-stu-id="8ad28-205">You can use external data as input to the prediction query, such as tables containing the customer ID and the most recent product purchases.</span></span> <span data-ttu-id="8ad28-206">Los requisitos son que las tablas de datos ya estén definidas como una vista del origen de datos de Analysis Services; por otro lado, los datos de entrada deben contener una tabla de casos y una tabla anidada como las utilizadas en el modelo.</span><span class="sxs-lookup"><span data-stu-id="8ad28-206">The requirements are that the data tables be already defined as an Analysis Services data source view; moreover, the input data must contain case and nested tables like those used in the model.</span></span> <span data-ttu-id="8ad28-207">No es necesario que tengan el mismo nombre, pero la estructura debe ser similar.</span><span class="sxs-lookup"><span data-stu-id="8ad28-207">They need not have the same names, but the structure must be similar.</span></span> <span data-ttu-id="8ad28-208">Para los objetivos de este tutorial, utilizará las tablas originales en las que se entrenó el modelo.</span><span class="sxs-lookup"><span data-stu-id="8ad28-208">For the purpose of this tutorial, you will use the original tables on which the model was trained.</span></span>  
  
#### <a name="to-change-the-input-method-for-the-prediction-query"></a><span data-ttu-id="8ad28-209">Para cambiar el método de entrada de la consulta de predicción</span><span class="sxs-lookup"><span data-stu-id="8ad28-209">To change the input method for the prediction query</span></span>  
  
1.  <span data-ttu-id="8ad28-210">En el menú **modelo de minería de datos** , seleccione **consulta singleton** de nuevo para borrar la marca de verificación.</span><span class="sxs-lookup"><span data-stu-id="8ad28-210">In the **Mining Model** menu, select **Singleton Query** again, to clear the check mark.</span></span>  
  
2.  <span data-ttu-id="8ad28-211">Aparecerá un mensaje de error en el que se advierte que se perderá la consulta singleton.</span><span class="sxs-lookup"><span data-stu-id="8ad28-211">An error message appears warning that your singleton query will be lost.</span></span> <span data-ttu-id="8ad28-212">Haga clic en **Sí**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-212">Click **Yes**.</span></span>  
  
     <span data-ttu-id="8ad28-213">El nombre del cuadro de diálogo de entrada cambia a **seleccionar tabla (s) de entrada**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-213">The name of the input dialog box changes to **Select Input Table(s)**.</span></span>  
  
 <span data-ttu-id="8ad28-214">Dado que lo que le interesa es crear una consulta de predicción que proporcione un identificador de cliente y una lista de productos como entrada, incorporará la tabla de clientes como la tabla de casos y la tabla de compras como la tabla anidada.</span><span class="sxs-lookup"><span data-stu-id="8ad28-214">Because you are interested in creating a prediction query that provides Customer ID and a list of products as input, you will add the customer table as the case table, and the purchases table as the nested table.</span></span> <span data-ttu-id="8ad28-215">A continuación, agregará las funciones de predicción para crear recomendaciones.</span><span class="sxs-lookup"><span data-stu-id="8ad28-215">Then you will add prediction functions to create recommendations.</span></span>  
  
#### <a name="to-create-a-prediction-query-using-nested-table-inputs"></a><span data-ttu-id="8ad28-216">Para crear una consulta de predicción utilizando las entradas de una tabla anidada</span><span class="sxs-lookup"><span data-stu-id="8ad28-216">To create a prediction query using nested table inputs</span></span>  
  
1.  <span data-ttu-id="8ad28-217">En el panel Modelo de minería de datos, seleccione el modelo Association Filtered.</span><span class="sxs-lookup"><span data-stu-id="8ad28-217">In the Mining Model pane, select the Association Filtered model.</span></span>  
  
2.  <span data-ttu-id="8ad28-218">En el cuadro de diálogo **seleccionar tabla (s) de entrada** , haga clic en **seleccionar tabla de casos**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-218">In the **Select Input Table(s)** dialog box, click **Select Case Table**.</span></span>  
  
3.  <span data-ttu-id="8ad28-219">En el cuadro de diálogo **seleccionar tabla** , en **origen de datos**, seleccione AdventureWorksDW2008.</span><span class="sxs-lookup"><span data-stu-id="8ad28-219">In the **Select Table** dialog box, for **Data Source**, select AdventureWorksDW2008.</span></span> <span data-ttu-id="8ad28-220">En la lista **nombre de tabla o vista** , seleccione vAssocSeqOrders y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-220">In the **Table/View Name** list, select vAssocSeqOrders, and then click **OK**.</span></span>  
  
     <span data-ttu-id="8ad28-221">La tabla vAssocSeqOrders se agrega al panel.</span><span class="sxs-lookup"><span data-stu-id="8ad28-221">The table vAssocSeqOrders is added to the pane.</span></span>  
  
4.  <span data-ttu-id="8ad28-222">En el cuadro de diálogo **seleccionar tabla (s) de entrada** , haga clic en **seleccionar tabla anidada**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-222">In the **Select Input Table(s)** dialog box, click **Select Nested Table**.</span></span>  
  
5.  <span data-ttu-id="8ad28-223">En el cuadro de diálogo **seleccionar tabla** , en **origen de datos**, seleccione AdventureWorksDW2008.</span><span class="sxs-lookup"><span data-stu-id="8ad28-223">In the **Select Table** dialog box, for **Data Source**, select AdventureWorksDW2008.</span></span> <span data-ttu-id="8ad28-224">En la lista **nombre de tabla o vista** , seleccione vAssocSeqLineItems y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-224">In the **Table/View name** list, select vAssocSeqLineItems, and then click **OK**.</span></span>  
  
     <span data-ttu-id="8ad28-225">La tabla vAssocSeqLineItems se agrega al panel.</span><span class="sxs-lookup"><span data-stu-id="8ad28-225">The table vAssocSeqLineItems is added to the pane.</span></span>  
  
6.  <span data-ttu-id="8ad28-226">En el cuadro de diálogo **especificar combinación anidada** , arrastre el campo ordernumber desde la tabla de casos y colóquelo en el campo ordernumber de la tabla anidada.</span><span class="sxs-lookup"><span data-stu-id="8ad28-226">In the **Specify Nested Join** dialog box, drag the OrderNumber field from the case table and drop it onto the OrderNumber field in the nested table.</span></span>  
  
     <span data-ttu-id="8ad28-227">También puede hacer clic en **Agregar relación** y crear la relación seleccionando columnas de una lista.</span><span class="sxs-lookup"><span data-stu-id="8ad28-227">You can also click **Add Relationship** and create the relationship by selecting columns from a list.</span></span>  
  
7.  <span data-ttu-id="8ad28-228">En el cuadro de diálogo **especificar relación** , compruebe que los campos OrderNumber están asignados correctamente y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-228">In the **Specify Relationship** dialog box, verify that the OrderNumber fields are mapped correctly, and then click **OK**.</span></span>  
  
8.  <span data-ttu-id="8ad28-229">Haga clic en **Aceptar** para cerrar el cuadro de diálogo **especificar combinación anidada** .</span><span class="sxs-lookup"><span data-stu-id="8ad28-229">Click **OK** to close the **Specify Nested Join** dialog box.</span></span>  
  
     <span data-ttu-id="8ad28-230">La tabla anidada y la tabla de casos se actualizan en el panel de diseño para mostrar las combinaciones que conectan las columnas de datos externos con las columnas del modelo.</span><span class="sxs-lookup"><span data-stu-id="8ad28-230">The case and nested tables are updated in the design pane to show the joins connecting the external data columns to the columns in the model.</span></span> <span data-ttu-id="8ad28-231">Si las relaciones son erróneas, puede hacer clic con el botón secundario en la línea de combinación y seleccionar **modificar conexiones** para editar la asignación de columnas, o puede hacer clic con el botón secundario en la línea de combinación y seleccionar **eliminar** para quitar la relación por completo.</span><span class="sxs-lookup"><span data-stu-id="8ad28-231">If the relationships are wrong, you can right-click the join line and select **Modify Connections** to edit the column mapping, or you can right-click the join line and select **Delete** to remove the relationship completely.</span></span>  
  
9. <span data-ttu-id="8ad28-232">Agregue una nueva fila a la cuadrícula.</span><span class="sxs-lookup"><span data-stu-id="8ad28-232">Add a new row to the grid.</span></span> <span data-ttu-id="8ad28-233">En **origen**, seleccione **tabla vAssocSeqOrders**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-233">For **Source**, select **vAssocSeqOrders table**.</span></span> <span data-ttu-id="8ad28-234">En **campo**, seleccione CustomerKey.</span><span class="sxs-lookup"><span data-stu-id="8ad28-234">For **Field**, select CustomerKey.</span></span>  
  
10. <span data-ttu-id="8ad28-235">Agregue una nueva fila a la cuadrícula.</span><span class="sxs-lookup"><span data-stu-id="8ad28-235">Add a new row to the grid.</span></span> <span data-ttu-id="8ad28-236">En **origen**, seleccione **tabla vAssocSeqOrders**.</span><span class="sxs-lookup"><span data-stu-id="8ad28-236">For **Source**, select **vAssocSeqOrders table**.</span></span> <span data-ttu-id="8ad28-237">En **campo**, seleccione región.</span><span class="sxs-lookup"><span data-stu-id="8ad28-237">For **Field**, select Region.</span></span>  
  
11. <span data-ttu-id="8ad28-238">Agregue una nueva fila a la cuadrícula.</span><span class="sxs-lookup"><span data-stu-id="8ad28-238">Add a new row to the grid.</span></span> <span data-ttu-id="8ad28-239">En **origen**, seleccione **función de predicción**y, en **campo**, seleccione `PredictAssociation` .</span><span class="sxs-lookup"><span data-stu-id="8ad28-239">For **Source**, select **Prediction Function**, and for **Field**, select `PredictAssociation`.</span></span>  
  
12. <span data-ttu-id="8ad28-240">Arrastre vAssocSeqLineItems, al cuadro **criterios o argumento** de la `PredictAssociation` fila.</span><span class="sxs-lookup"><span data-stu-id="8ad28-240">Drag vAssocSeqLineItems, into the **Criteria/Argument** box of the `PredictAssociation` row.</span></span> <span data-ttu-id="8ad28-241">Haga clic al final del cuadro **criterios o argumento** y escriba el siguiente texto:`INCLUDE_STATISTICS,3`</span><span class="sxs-lookup"><span data-stu-id="8ad28-241">Click at the end of the **Criteria/Argument** box and then type the following text: `INCLUDE_STATISTICS,3`</span></span>  
  
     <span data-ttu-id="8ad28-242">El texto completo del cuadro **criterios o argumento** debe ser:`[Association].[v Assoc Seq Line Items], INCLUDE_STATISTICS, 3`</span><span class="sxs-lookup"><span data-stu-id="8ad28-242">The complete text in the **Criteria/Argument** box should be: `[Association].[v Assoc Seq Line Items], INCLUDE_STATISTICS, 3`</span></span>  
  
13. <span data-ttu-id="8ad28-243">Haga clic en el botón **resultado** para ver las predicciones de cada cliente.</span><span class="sxs-lookup"><span data-stu-id="8ad28-243">Click the **Result** button to view the predictions for each customer.</span></span>  
  
 <span data-ttu-id="8ad28-244">Puede intentar crear una consulta de predicción similar en varios modelos para ver si al aplicar filtros, cambian los resultados de predicción.</span><span class="sxs-lookup"><span data-stu-id="8ad28-244">You might try creating a similar prediction query on the multiple models, to see whether filtering changes the prediction results.</span></span> <span data-ttu-id="8ad28-245">Para obtener más información sobre cómo crear predicciones y otros tipos de consultas, vea [ejemplos de consultas de modelos de asociación](../../2014/analysis-services/data-mining/association-model-query-examples.md).</span><span class="sxs-lookup"><span data-stu-id="8ad28-245">For more information about creating predictions and other types of queries, see [Association Model Query Examples](../../2014/analysis-services/data-mining/association-model-query-examples.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8ad28-246">Consulte también</span><span class="sxs-lookup"><span data-stu-id="8ad28-246">See Also</span></span>  
 <span data-ttu-id="8ad28-247">[Contenido del modelo de minería de datos para los modelos de asociación &#40;Analysis Services-minería de datos&#41;](../../2014/analysis-services/data-mining/mining-model-content-for-association-models-analysis-services-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="8ad28-247">[Mining Model Content for Association Models &#40;Analysis Services - Data Mining&#41;](../../2014/analysis-services/data-mining/mining-model-content-for-association-models-analysis-services-data-mining.md) </span></span>  
 <span data-ttu-id="8ad28-248">[&#41;PredictAssociation &#40;DMX](/sql/dmx/predictassociation-dmx) </span><span class="sxs-lookup"><span data-stu-id="8ad28-248">[PredictAssociation &#40;DMX&#41;](/sql/dmx/predictassociation-dmx) </span></span>  
 [<span data-ttu-id="8ad28-249">Crear una consulta de predicción con el Generador de consultas de predicción</span><span class="sxs-lookup"><span data-stu-id="8ad28-249">Create a Prediction Query Using the Prediction Query Builder</span></span>](../../2014/analysis-services/data-mining/create-a-prediction-query-using-the-prediction-query-builder.md)  
  
  
