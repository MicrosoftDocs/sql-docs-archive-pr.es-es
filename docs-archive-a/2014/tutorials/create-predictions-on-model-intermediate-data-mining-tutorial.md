---
title: Crear predicciones en un modelo de agrupación en clústeres de secuencia (tutorial intermedio de minería de datos) | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 94a8d4f9-a76a-49c5-9785-917010359511
author: minewiskan
ms.author: owend
manager: kfilee
ms.openlocfilehash: 2402c28a564502df9ce12c5e3f97b9d19590cfea
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87661733"
---
# <a name="creating-predictions-on-a-sequence-clustering-model-intermediate-data-mining-tutorial"></a><span data-ttu-id="01e2c-102">Crear predicciones en un modelo de agrupación en clústeres de secuencia (Tutorial intermedio de minería de datos)</span><span class="sxs-lookup"><span data-stu-id="01e2c-102">Creating Predictions on a Sequence Clustering Model (Intermediate Data Mining Tutorial)</span></span>
  <span data-ttu-id="01e2c-103">Una vez que comprenda mejor el modelo de agrupación en clústeres de secuencia desplazándolo en el visor, puede crear consultas de predicción mediante el Generador de consultas de predicción en la pestaña **predicción de modelo de minería** de datos del diseñador de minería de datos.</span><span class="sxs-lookup"><span data-stu-id="01e2c-103">After you understand the sequence clustering model better by browsing it in the viewer, you can create prediction queries by using Prediction Query Builder on the **Mining Model Prediction** tab in Data Mining Designer.</span></span> <span data-ttu-id="01e2c-104">Para crear una predicción, seleccione primero el modelo de agrupación en clústeres de secuencia y, a continuación, seleccione los datos de entrada.</span><span class="sxs-lookup"><span data-stu-id="01e2c-104">To create a prediction, you first select the sequence clustering model, and then select the input data.</span></span> <span data-ttu-id="01e2c-105">Para las entradas, puede utilizar un origen de datos externo o puede crear una consulta singleton y proporcionar los valores en un cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="01e2c-105">For inputs, you can use either an external data source, or you can build a singleton query and provide values in a dialog box.</span></span>  
  
 <span data-ttu-id="01e2c-106">En esta lección se presupone que sabe utilizar el Generador de consultas de predicción y desea obtener información acerca de cómo se crean consultas específicas para un modelo de agrupación en clústeres de secuencia.</span><span class="sxs-lookup"><span data-stu-id="01e2c-106">This lesson assumes that you are already familiar with how to use the prediction query builder and want to learn how to build queries that are specific to a sequence clustering model.</span></span> <span data-ttu-id="01e2c-107">Para obtener información general sobre cómo usar la predicción Generador de consultas, vea [interfaces de consulta de minería de datos](../../2014/analysis-services/data-mining/data-mining-query-tools.md) o la sección del tutorial básico de minería de datos, [crear predicciones &#40;tutorial básico de minería de datos&#41;](../../2014/tutorials/creating-predictions-basic-data-mining-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="01e2c-107">For general information about how to use Prediction Query Builder, see [Data Mining Query Interfaces](../../2014/analysis-services/data-mining/data-mining-query-tools.md) or the section of the Basic Data Mining tutorial, [Creating Predictions &#40;Basic Data Mining Tutorial&#41;](../../2014/tutorials/creating-predictions-basic-data-mining-tutorial.md).</span></span>  
  
## <a name="creating-predictions-on-the-regional-model"></a><span data-ttu-id="01e2c-108">Crear predicciones en el modelo regional</span><span class="sxs-lookup"><span data-stu-id="01e2c-108">Creating Predictions on the Regional Model</span></span>  
 <span data-ttu-id="01e2c-109">En este escenario, primero creará algunas consultas de predicción singleton para hacerse una idea del modo en que las predicciones pueden variar según la región.</span><span class="sxs-lookup"><span data-stu-id="01e2c-109">For this scenario, you will first create some singleton prediction queries, to get an idea of how predictions might be different by region.</span></span>  
  
#### <a name="to-create-a-singleton-query-on-a-sequence-clustering-model"></a><span data-ttu-id="01e2c-110">Para crear una consulta singleton en un modelo de agrupación en clústeres de secuencia</span><span class="sxs-lookup"><span data-stu-id="01e2c-110">To create a singleton query on a sequence clustering model</span></span>  
  
1.  <span data-ttu-id="01e2c-111">Haga clic en la pestaña **predicción de modelo de minería** de datos del diseñador de minería de datos.</span><span class="sxs-lookup"><span data-stu-id="01e2c-111">Click the **Mining Model Prediction** tab of Data Mining Designer.</span></span>  
  
2.  <span data-ttu-id="01e2c-112">En el menú columna del **modelo de minería de datos** , seleccione **consulta singleton**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-112">In the **Mining Model** column menu, select **Singleton Query**.</span></span>  
  
     <span data-ttu-id="01e2c-113">Aparecen el panel **modelo de minería de datos** y el panel entrada de **consulta singleton** .</span><span class="sxs-lookup"><span data-stu-id="01e2c-113">The **Mining Model** pane and **Singleton Query Input** pane appear.</span></span>  
  
3.  <span data-ttu-id="01e2c-114">En el panel **modelo de minería de datos** , haga clic en **Seleccionar modelo**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-114">In the **Mining Model** pane, click **Select Model**.</span></span> <span data-ttu-id="01e2c-115">(Puede omitir este paso si el agrupación en clústeres de secuencia ya está seleccionado).</span><span class="sxs-lookup"><span data-stu-id="01e2c-115">(You can skip this step if the sequence clustering mode is already selected.)</span></span>  
  
     <span data-ttu-id="01e2c-116">Se abre el cuadro de diálogo **Seleccionar modelo de minería de datos** .</span><span class="sxs-lookup"><span data-stu-id="01e2c-116">The **Select Mining Model** dialog box opens.</span></span>  
  
4.  <span data-ttu-id="01e2c-117">Expanda el nodo que representa la estructura de minería **de datos clustering Sequence with region**y seleccione el modelo **Sequence Clustering with region**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-117">Expand the node that represents the mining structure **Sequence Clustering with Region**, and select the model **Sequence Clustering with Region**.</span></span> <span data-ttu-id="01e2c-118">Haga clic en **OK**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-118">Click **OK**.</span></span> <span data-ttu-id="01e2c-119">De momento haga caso omiso al panel de entrada. Especificará los datos de entrada cuando haya configurado las funciones de predicción.</span><span class="sxs-lookup"><span data-stu-id="01e2c-119">For now, ignore the input pane; you will specify the inputs after you have set up the prediction functions.</span></span>  
  
5.  <span data-ttu-id="01e2c-120">En la cuadrícula, haga clic en la celda vacía situada debajo de **origen** y seleccione **función de predicción.**</span><span class="sxs-lookup"><span data-stu-id="01e2c-120">In the grid, click the empty cell under **Source** and select **Prediction Function.**</span></span> <span data-ttu-id="01e2c-121">En la celda situada debajo de **campo**, seleccione **PredictSequence**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-121">In the cell under **Field**, select **PredictSequence**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="01e2c-122">También puede utilizar la función **PREDICT** .</span><span class="sxs-lookup"><span data-stu-id="01e2c-122">You can also use the **Predict** function.</span></span> <span data-ttu-id="01e2c-123">Si lo hace, asegúrese de elegir la versión de la función de **predicción** que toma una columna de tabla como argumento.</span><span class="sxs-lookup"><span data-stu-id="01e2c-123">If you do, be sure to choose the version of the **Predict** function that takes a table column as argument..</span></span>  
  
6.  <span data-ttu-id="01e2c-124">En el panel **modelo de minería de datos** , seleccione la tabla anidada y arrástrela hasta la `v Assoc Seq Line Items` cuadrícula hasta el cuadro **criterios o argumento** de la función **PredictSequence** .</span><span class="sxs-lookup"><span data-stu-id="01e2c-124">In the **Mining Model** pane, select the nested table `v Assoc Seq Line Items`, and drag it into the grid, to the **Criteria/Argument** box for the **PredictSequence** function.</span></span>  
  
     <span data-ttu-id="01e2c-125">Arrastrar y colocar nombres de tablas y columnas le permite crear instrucciones complejas sin errores de sintaxis.</span><span class="sxs-lookup"><span data-stu-id="01e2c-125">Dragging and dropping table and column names enables you to build complex statements without syntax errors.</span></span> <span data-ttu-id="01e2c-126">Sin embargo, reemplaza el contenido actual de la celda, que incluye otros argumentos opcionales para la función **PredictSequence** .</span><span class="sxs-lookup"><span data-stu-id="01e2c-126">However, it replaces the current contents of the cell, which include other optional arguments for the **PredictSequence** function.</span></span> <span data-ttu-id="01e2c-127">Para consultar los demás argumentos, puede agregar provisionalmente una segunda instancia de la función a la cuadrícula como referencia.</span><span class="sxs-lookup"><span data-stu-id="01e2c-127">To view the other arguments, you can temporarily add a second instance of the function to the grid for reference.</span></span>  
  
7.  <span data-ttu-id="01e2c-128">Haga clic en el botón **resultado** situado en la esquina superior de la generador de consultas de predicción.</span><span class="sxs-lookup"><span data-stu-id="01e2c-128">Click the **Result** button in the upper corner of the Prediction Query Builder.</span></span>  
  
 <span data-ttu-id="01e2c-129">Los resultados esperados contienen una sola columna con la **expresión**de encabezado.</span><span class="sxs-lookup"><span data-stu-id="01e2c-129">The expected results contain a single column with the heading **Expression**.</span></span> <span data-ttu-id="01e2c-130">La columna **expresión** contiene una tabla anidada con tres columnas como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="01e2c-130">The **Expression** column contains a nested table with three columns as follows:</span></span>  
  
|<span data-ttu-id="01e2c-131">$SEQUENCE</span><span class="sxs-lookup"><span data-stu-id="01e2c-131">$SEQUENCE</span></span>|<span data-ttu-id="01e2c-132">Line Number</span><span class="sxs-lookup"><span data-stu-id="01e2c-132">Line Number</span></span>|<span data-ttu-id="01e2c-133">Modelo</span><span class="sxs-lookup"><span data-stu-id="01e2c-133">Model</span></span>|  
|---------------|-----------------|-----------|  
|<span data-ttu-id="01e2c-134">1</span><span class="sxs-lookup"><span data-stu-id="01e2c-134">1</span></span>||<span data-ttu-id="01e2c-135">Mountain-200</span><span class="sxs-lookup"><span data-stu-id="01e2c-135">Mountain-200</span></span>|  
  
 <span data-ttu-id="01e2c-136">¿Qué significan estos resultados?</span><span class="sxs-lookup"><span data-stu-id="01e2c-136">What do these results mean?</span></span> <span data-ttu-id="01e2c-137">Recuerde que no especificó ninguna entrada.</span><span class="sxs-lookup"><span data-stu-id="01e2c-137">Remember that you did not specify any inputs.</span></span> <span data-ttu-id="01e2c-138">Por tanto, la predicción se realiza con todos los datos de casos rellenados, y Analysis Services devuelve la predicción que, en términos generales, es más probable.</span><span class="sxs-lookup"><span data-stu-id="01e2c-138">Therefore, the prediction is made against the entire population of cases, and Analysis Services returns the most likely prediction overall.</span></span>  
  
### <a name="adding-inputs-to-a-singleton-prediction-query"></a><span data-ttu-id="01e2c-139">Agregar entradas a una consulta de predicción singleton</span><span class="sxs-lookup"><span data-stu-id="01e2c-139">Adding Inputs to a Singleton Prediction Query</span></span>  
 <span data-ttu-id="01e2c-140">Hasta ahora, no había especificado ninguna entrada.</span><span class="sxs-lookup"><span data-stu-id="01e2c-140">Until now, you have not specified any inputs.</span></span> <span data-ttu-id="01e2c-141">En la tarea siguiente, utilizará el panel **entrada de consulta singleton** para especificar algunas entradas en la consulta.</span><span class="sxs-lookup"><span data-stu-id="01e2c-141">In the next task, you will use the **Singleton Query Input** pane to specify some inputs to the query.</span></span> <span data-ttu-id="01e2c-142">En primer lugar, utilizará [Region] como entrada en el modelo de agrupación en clústeres de secuencia regional para determinar si las secuencias predichas son las mismas en todas las regiones.</span><span class="sxs-lookup"><span data-stu-id="01e2c-142">First, you will use [Region] as an input to the regional sequence clustering model, to determine whether the predicted sequences are the same for all regions.</span></span> <span data-ttu-id="01e2c-143">A continuación, aprenderá a modificar la consulta para agregar la probabilidad de cada predicción y simplificará los resultados para que resulte más sencillo consultarlos.</span><span class="sxs-lookup"><span data-stu-id="01e2c-143">You will then learn how to modify the query to add the probability for each prediction, and flatten the results to make them easier to view.</span></span>  
  
##### <a name="to-generate-predictions-for-a-specific-customer-group"></a><span data-ttu-id="01e2c-144">Para generar predicciones de un grupo de clientes concreto</span><span class="sxs-lookup"><span data-stu-id="01e2c-144">To generate predictions for a specific customer group</span></span>  
  
1.  <span data-ttu-id="01e2c-145">Haga clic en el botón **diseño** en la esquina superior izquierda del generador de consultas de predicción para volver a la cuadrícula de creación de la consulta.</span><span class="sxs-lookup"><span data-stu-id="01e2c-145">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="01e2c-146">En el cuadro de diálogo **entrada de consulta singleton** , haga clic en el cuadro **valor** de `Region` y seleccione **Europa**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-146">In the **Singleton Query Input** dialog box, click the **Value** box for `Region`, and select **Europe**.</span></span>  
  
3.  <span data-ttu-id="01e2c-147">Haga clic en el botón **resultado** para ver las predicciones de los clientes de Europa.</span><span class="sxs-lookup"><span data-stu-id="01e2c-147">Click the **Result** button to view predictions for customers in Europe.</span></span>  
  
4.  <span data-ttu-id="01e2c-148">Haga clic en el botón **diseño** en la esquina superior izquierda del generador de consultas de predicción para volver a la cuadrícula de creación de la consulta.</span><span class="sxs-lookup"><span data-stu-id="01e2c-148">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
5.  <span data-ttu-id="01e2c-149">En el cuadro de diálogo **entrada de consulta singleton** , haga clic en el cuadro **valor** de `Region` y seleccione **Norteamérica**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-149">In the **Singleton Query Input** dialog box, click the **Value** box for `Region`, and select **North America**.</span></span>  
  
6.  <span data-ttu-id="01e2c-150">Haga clic en el botón **resultado** para ver las predicciones de los clientes en Norteamérica.</span><span class="sxs-lookup"><span data-stu-id="01e2c-150">Click the **Result** button to view predictions for customers in North America.</span></span>  
  
### <a name="adding-probabilities-by-using-a-custom-expression"></a><span data-ttu-id="01e2c-151">Agregar probabilidades utilizando una expresión personalizada</span><span class="sxs-lookup"><span data-stu-id="01e2c-151">Adding Probabilities by Using a Custom Expression</span></span>  
 <span data-ttu-id="01e2c-152">Generar la probabilidad de cada predicción resulta algo más complicado, pues la probabilidad es un atributo de predicción y se genera como una tabla anidada.</span><span class="sxs-lookup"><span data-stu-id="01e2c-152">To output the probability for each prediction is slightly more complicated, because the probability is an attribute of the prediction and is output as a nested table.</span></span> <span data-ttu-id="01e2c-153">Si conoce las extensiones de minería de datos (DMX), puede modificar con facilidad la consulta y agregar una instrucción sub-SELECT a la tabla anidada.</span><span class="sxs-lookup"><span data-stu-id="01e2c-153">If you are familiar with Data Mining Extensions (DMX), you can easily alter the query to add a sub-select statement on the nested table.</span></span> <span data-ttu-id="01e2c-154">No obstante, también puede crear una instrucción sub-SELECT en el Generador de consultas de predicción mediante una expresión personalizada.</span><span class="sxs-lookup"><span data-stu-id="01e2c-154">However, you can also create a sub-select statement in the Prediction Query Builder by adding a custom expression.</span></span>  
  
##### <a name="to-output-probabilities-for-a-predicted-sequence-by-using-a-custom-expression"></a><span data-ttu-id="01e2c-155">Para generar probabilidades de una secuencia de predicción utilizando una expresión personalizada</span><span class="sxs-lookup"><span data-stu-id="01e2c-155">To output probabilities for a predicted sequence by using a custom expression</span></span>  
  
1.  <span data-ttu-id="01e2c-156">Haga clic en el botón **diseño** en la esquina superior izquierda del generador de consultas de predicción para volver a la cuadrícula de creación de la consulta.</span><span class="sxs-lookup"><span data-stu-id="01e2c-156">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="01e2c-157">En la cuadrícula, en **origen**, haga clic en una nueva fila y seleccione **expresión personalizada**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-157">In the grid, under **Source**, click a new row, and select **Custom Expression**.</span></span>  
  
3.  <span data-ttu-id="01e2c-158">Deje en blanco el cuadro en **campo** .</span><span class="sxs-lookup"><span data-stu-id="01e2c-158">Leave the box under **Field** blank.</span></span>  
  
4.  <span data-ttu-id="01e2c-159">En **alias**, escriba `t` .</span><span class="sxs-lookup"><span data-stu-id="01e2c-159">For **Alias**, type `t`.</span></span>  
  
5.  <span data-ttu-id="01e2c-160">En el cuadro **criterios o argumento** , escriba la instrucción de Subselección completa, tal como se muestra en el ejemplo de código siguiente.</span><span class="sxs-lookup"><span data-stu-id="01e2c-160">In the **Criteria/Argument** box, type the complete sub-select statement as shown in the following code sample.</span></span> <span data-ttu-id="01e2c-161">No olvide incluir los paréntesis de apertura y cierre.</span><span class="sxs-lookup"><span data-stu-id="01e2c-161">Be sure to include the starting and ending parentheses.</span></span>  
  
    ```  
    (SELECT PredictProbability([Model]) FROM PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]))  
    ```  
  
6.  <span data-ttu-id="01e2c-162">Haga clic en el botón **resultado** para ver las predicciones de los clientes de Europa.</span><span class="sxs-lookup"><span data-stu-id="01e2c-162">Click the **Result** button to view predictions for customers in Europe.</span></span>  
  
 <span data-ttu-id="01e2c-163">Los resultados contienen dos tablas anidadas: una con la predicción  y otra con la probabilidad de la predicción.</span><span class="sxs-lookup"><span data-stu-id="01e2c-163">The results now contain two nested tables, one with the prediction, and one with the probability for the prediction.</span></span> <span data-ttu-id="01e2c-164">Si la consulta no funciona, puede cambiar a la vista de diseño de consultas y revisar toda la instrucción de consulta, que debería ser como la siguiente:</span><span class="sxs-lookup"><span data-stu-id="01e2c-164">If the query does not work, you can switch to query design view and review the complete query statement, which should be as follows:</span></span>  
  
```  
SELECT  
  PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]),  
  ( (SELECT PredictProbability([Model]) FROM PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]))) as [t]  
FROM  
  [Sequence Clustering with Region]  
NATURAL PREDICTION JOIN  
(SELECT 'Europe' AS [Region]) AS t  
```  
  
### <a name="working-with-results"></a><span data-ttu-id="01e2c-165">Trabajar con resultados</span><span class="sxs-lookup"><span data-stu-id="01e2c-165">Working with Results</span></span>  
 <span data-ttu-id="01e2c-166">Cuando hay muchas tablas anidadas en los resultados, es posible que desee simplificar los resultados para facilitar su consulta.</span><span class="sxs-lookup"><span data-stu-id="01e2c-166">When there are many nested tables in the results, you might want to flatten the results for easier viewing.</span></span> <span data-ttu-id="01e2c-167">Para ello, puede modificar la consulta manualmente y agregar la palabra clave `FLATTENED`.</span><span class="sxs-lookup"><span data-stu-id="01e2c-167">To do this, you can manually modify the query and add the `FLATTENED` keyword.</span></span>  
  
##### <a name="to-flatten-nested-rowsets-in-a-prediction-query"></a><span data-ttu-id="01e2c-168">Para simplificar los conjuntos de filas anidados de una consulta de predicción</span><span class="sxs-lookup"><span data-stu-id="01e2c-168">To flatten nested rowsets in a prediction query</span></span>  
  
1.  <span data-ttu-id="01e2c-169">Haga clic en el botón **consulta** situado en la esquina de la generador de consultas de predicción.</span><span class="sxs-lookup"><span data-stu-id="01e2c-169">Click the **Query** button in the corner of the Prediction Query Builder.</span></span>  
  
     <span data-ttu-id="01e2c-170">La cuadrícula cambia a un panel abierto donde puede ver y modificar la instrucción DMX que creó el Generador de consultas de predicción.</span><span class="sxs-lookup"><span data-stu-id="01e2c-170">The grid changes to an open pane where you can view and modify the DMX statement that was created by the Prediction Query Builder.</span></span>  
  
2.  <span data-ttu-id="01e2c-171">Después de la palabra clave `SELECT`, escriba `FLATTENED`.</span><span class="sxs-lookup"><span data-stu-id="01e2c-171">After the `SELECT` keyword, type `FLATTENED`.</span></span>  
  
     <span data-ttu-id="01e2c-172">El texto completo de la consulta debería ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="01e2c-172">The complete text of the query should be similar to the following:</span></span>  
  
    ```  
    SELECT FLATTENED  
      PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]),  
      ( (SELECT PredictProbability([Model]) FROM PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]))) as [t]  
    FROM  
      [Sequence Clustering with Region]  
    NATURAL PREDICTION JOIN  
    (SELECT 'Europe' AS [Region]) AS t  
    ```  
  
3.  <span data-ttu-id="01e2c-173">Haga clic en el botón **resultados** en la esquina superior de la generador de consultas de predicción.</span><span class="sxs-lookup"><span data-stu-id="01e2c-173">Click the **Results** button in the upper corner of the Prediction Query Builder.</span></span>  
  
 <span data-ttu-id="01e2c-174">Después de editar la consulta manualmente, no podrá volver a la vista Diseño sin perder los cambios.</span><span class="sxs-lookup"><span data-stu-id="01e2c-174">After you have manually edited a query, you will not be able to switch back to Design view without losing the changes.</span></span> <span data-ttu-id="01e2c-175">Sin embargo, puede guardar la instrucción DMX que creó manualmente en un archivo de texto y, a continuación, cambiar de nuevo a la vista Diseño.</span><span class="sxs-lookup"><span data-stu-id="01e2c-175">You can, however, save the DMX statement that you created manually to a text file, and then change back to Design view.</span></span> <span data-ttu-id="01e2c-176">Al hacer esto, la consulta se revierte a la última versión que fue válida en la vista Diseño.</span><span class="sxs-lookup"><span data-stu-id="01e2c-176">When you do so, the query is reverted to the last version that was valid in Design view.</span></span>  
  
## <a name="creating-predictions-on-the-related-model"></a><span data-ttu-id="01e2c-177">Crear predicciones en el modelo relacionado</span><span class="sxs-lookup"><span data-stu-id="01e2c-177">Creating Predictions on the Related Model</span></span>  
 <span data-ttu-id="01e2c-178">En los ejemplos anteriores se utilizó una columna de una tabla de casos, Region, como entrada de la consulta de predicción singleton, porque lo que se pretendía era saber si el modelo encontraba diferencias entre las regiones.</span><span class="sxs-lookup"><span data-stu-id="01e2c-178">The previous examples used a case table column, Region, as the input to the singleton prediction query, because you were interested in knowing whether the model had found any differences between regions.</span></span> <span data-ttu-id="01e2c-179">Sin embargo, después de analizar el modelo, decidió que las diferencias no eran lo suficientemente sólidas como para justificar que las recomendaciones del producto se personalizaran según la región.</span><span class="sxs-lookup"><span data-stu-id="01e2c-179">However, after exploring the model, you decided that the differences are not strong enough to justify customizing product recommendations by region.</span></span> <span data-ttu-id="01e2c-180">Lo que realmente le interesa predecir son los artículos que seleccionan los clientes.</span><span class="sxs-lookup"><span data-stu-id="01e2c-180">What you are really interested in predicting is the items that customers select.</span></span> <span data-ttu-id="01e2c-181">Por tanto, en las consultas siguientes, utilizará el modelo de agrupación en clústeres de secuencia que no incluye Region para generar las recomendaciones de todos los clientes.</span><span class="sxs-lookup"><span data-stu-id="01e2c-181">Therefore, in the queries that follow, you will use the sequence clustering model that does not include Region, to generate recommendations for all customers.</span></span>  
  
### <a name="using-nested-table-columns-as-input"></a><span data-ttu-id="01e2c-182">Utilizar las columnas de una tabla anidada como entrada</span><span class="sxs-lookup"><span data-stu-id="01e2c-182">Using Nested Table Columns as Input</span></span>  
 <span data-ttu-id="01e2c-183">En primer lugar, creará una consulta de predicción singleton que tome un único elemento como entrada y devuelva el siguiente elemento más probable.</span><span class="sxs-lookup"><span data-stu-id="01e2c-183">First you will create a singleton prediction query that takes a single item as input and returns the next most likely item.</span></span> <span data-ttu-id="01e2c-184">Para obtener una predicción de este tipo, deberá utilizar una columna de tabla anidada como valor de entrada.</span><span class="sxs-lookup"><span data-stu-id="01e2c-184">To get a prediction of this kind, you have to use a nested table column as the input value.</span></span> <span data-ttu-id="01e2c-185">Esto se debe a que el atributo que está prediciendo, Modelo, forma parte de una tabla anidada.</span><span class="sxs-lookup"><span data-stu-id="01e2c-185">This is because the attribute that you are predicting, Model, is part of a nested table.</span></span> <span data-ttu-id="01e2c-186">Analysis Services proporciona el cuadro de diálogo **entrada de tabla anidada** para ayudarle a crear fácilmente consultas de predicción en atributos de tabla anidada, mediante el uso de la generador de consultas de predicción.</span><span class="sxs-lookup"><span data-stu-id="01e2c-186">Analysis Services provides the **Nested Table Input** dialog box to help you easily create prediction queries on nested table attributes, by using the Prediction Query Builder.</span></span>  
  
##### <a name="to-use-a-nested-table-as-input-to-a-prediction"></a><span data-ttu-id="01e2c-187">Para utilizar una tabla anidada como entrada de una predicción</span><span class="sxs-lookup"><span data-stu-id="01e2c-187">To use a nested table as input to a prediction</span></span>  
  
1.  <span data-ttu-id="01e2c-188">Haga clic en el botón **diseño** en la esquina superior izquierda del generador de consultas de predicción para volver a la cuadrícula de creación de la consulta.</span><span class="sxs-lookup"><span data-stu-id="01e2c-188">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="01e2c-189">En el cuadro de diálogo **entrada de consulta singleton** , haga clic en el cuadro **valor** de `Region` y seleccione la fila vacía para borrar la entrada de este campo.</span><span class="sxs-lookup"><span data-stu-id="01e2c-189">In the **Singleton Query Input** dialog box, click the **Value** box for `Region`, and select the empty row to clear the input for this field.</span></span>  
  
3.  <span data-ttu-id="01e2c-190">En el cuadro de diálogo **entrada de consulta singleton** , haga clic en el cuadro **valor** de `vAssocSeqLineItems` y, a continuación, haga clic en el botón (...).</span><span class="sxs-lookup"><span data-stu-id="01e2c-190">In the **Singleton Query Input** dialog box, click the **Value** box for `vAssocSeqLineItems`, and then click the (...) button.</span></span>  
  
4.  <span data-ttu-id="01e2c-191">En el cuadro de diálogo **entrada de tabla anidada** , haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-191">In the **Nested Table Input** dialog box, click **Add**.</span></span>  
  
5.  <span data-ttu-id="01e2c-192">En la nueva fila, haga clic en el cuadro situado debajo de `Model` y seleccione Touring neumático en la lista.</span><span class="sxs-lookup"><span data-stu-id="01e2c-192">In the new row, click the box under `Model`, and select Touring Tire from the list.</span></span> <span data-ttu-id="01e2c-193">Haga clic en **OK**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-193">Click **OK**.</span></span>  
  
6.  <span data-ttu-id="01e2c-194">Haga clic en el botón **resultado** para ver las predicciones.</span><span class="sxs-lookup"><span data-stu-id="01e2c-194">Click the **Result** button to view the predictions.</span></span>  
  
 <span data-ttu-id="01e2c-195">El modelo recomienda los elementos siguientes para todos los clientes que eligen Touring Tire como primer artículo.</span><span class="sxs-lookup"><span data-stu-id="01e2c-195">The model recommends the following next items for all customers who choose the Touring Tire as the first item.</span></span> <span data-ttu-id="01e2c-196">Al examinar el modelo, ya sabe que los clientes compran con frecuencia los productos Touring Tire de y Touring Tire Tube juntos, por lo que estas recomendaciones parecen buenas.</span><span class="sxs-lookup"><span data-stu-id="01e2c-196">You already know from exploring the model that customers frequently purchase the products Touring Tire and Touring Tire Tube together, so these recommendations look good.</span></span>  
  
|<span data-ttu-id="01e2c-197">$SEQUENCE</span><span class="sxs-lookup"><span data-stu-id="01e2c-197">$SEQUENCE</span></span>|<span data-ttu-id="01e2c-198">Line Number</span><span class="sxs-lookup"><span data-stu-id="01e2c-198">Line Number</span></span>|<span data-ttu-id="01e2c-199">Modelo</span><span class="sxs-lookup"><span data-stu-id="01e2c-199">Model</span></span>|  
|---------------|-----------------|-----------|  
|<span data-ttu-id="01e2c-200">1</span><span class="sxs-lookup"><span data-stu-id="01e2c-200">1</span></span>||<span data-ttu-id="01e2c-201">Touring Tire Tube</span><span class="sxs-lookup"><span data-stu-id="01e2c-201">Touring Tire Tube</span></span>|  
|<span data-ttu-id="01e2c-202">2</span><span class="sxs-lookup"><span data-stu-id="01e2c-202">2</span></span>||<span data-ttu-id="01e2c-203">Sport-100</span><span class="sxs-lookup"><span data-stu-id="01e2c-203">Sport-100</span></span>|  
|<span data-ttu-id="01e2c-204">3</span><span class="sxs-lookup"><span data-stu-id="01e2c-204">3</span></span>||<span data-ttu-id="01e2c-205">Long-Sleeve Logo Jersey</span><span class="sxs-lookup"><span data-stu-id="01e2c-205">Long-Sleeve Logo Jersey</span></span>|  
  
### <a name="creating-a-bulk-prediction-query-using-nested-table-inputs"></a><span data-ttu-id="01e2c-206">Crear una consulta de predicción masiva utilizando entradas de una tabla anidada</span><span class="sxs-lookup"><span data-stu-id="01e2c-206">Creating a Bulk Prediction Query using Nested Table Inputs</span></span>  
 <span data-ttu-id="01e2c-207">Ahora que el modelo crea el tipo de predicciones adecuado, por lo que se puede utilizar para realizar recomendaciones, creará una consulta de predicción que se asignará a un origen de datos externo.</span><span class="sxs-lookup"><span data-stu-id="01e2c-207">Now that you are satisfied that the model creates the kind of predictions that you can use in making recommendations, you will create a prediction query that is mapped to an external data source.</span></span> <span data-ttu-id="01e2c-208">Ese origen de datos proporcionará valores que representan los productos actuales.</span><span class="sxs-lookup"><span data-stu-id="01e2c-208">That data source will provide values representing current products.</span></span> <span data-ttu-id="01e2c-209">Dado que lo que le interesa es crear una consulta de predicción que proporcione un identificador de cliente y una lista de productos como entrada, incorporará la tabla de clientes como la tabla de casos y la tabla de compras como la tabla anidada.</span><span class="sxs-lookup"><span data-stu-id="01e2c-209">Because you are interested in creating a prediction query that provides Customer ID and a list of products as input, you will add the customer table as the case table, and the purchases table as the nested table.</span></span> <span data-ttu-id="01e2c-210">A continuación, agregará funciones de predicción, tal y como hizo anteriormente, para crear recomendaciones.</span><span class="sxs-lookup"><span data-stu-id="01e2c-210">Then you will add prediction functions as you did previously to create recommendations.</span></span>  
  
 <span data-ttu-id="01e2c-211">Este procedimiento es el mismo que el que utilizó para crear predicciones en el escenario de la cesta de compra de la lección 3; sin embargo, en un modelo de agrupación en clústeres de secuencia, las predicciones también necesitan el pedido como entrada.</span><span class="sxs-lookup"><span data-stu-id="01e2c-211">This is the same procedure that you use to create predictions for the market basket scenario in Lesson 3; however, in a sequence clustering model predictions also need the order as input.</span></span>  
  
##### <a name="to-create-a-prediction-query-using-nested-table-inputs"></a><span data-ttu-id="01e2c-212">Para crear una consulta de predicción utilizando las entradas de una tabla anidada</span><span class="sxs-lookup"><span data-stu-id="01e2c-212">To create a prediction query using nested table inputs</span></span>  
  
1.  <span data-ttu-id="01e2c-213">En el panel **modelo de minería de datos** , seleccione el modelo de agrupación en clústeres de secuencia, si aún no está seleccionado.</span><span class="sxs-lookup"><span data-stu-id="01e2c-213">In the **Mining Model** pane, select the Sequence Clustering model, if it is not already selected.</span></span>  
  
2.  <span data-ttu-id="01e2c-214">En el cuadro de diálogo **seleccionar tabla (s) de entrada** , haga clic en **seleccionar tabla de casos**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-214">In the **Select Input Table(s)** dialog box, click **Select Case Table**.</span></span>  
  
3.  <span data-ttu-id="01e2c-215">En el cuadro de diálogo **seleccionar tabla** , en origen de datos, seleccione pedidos.</span><span class="sxs-lookup"><span data-stu-id="01e2c-215">In the **Select Table** dialog box, for Data Source, select Orders.</span></span> <span data-ttu-id="01e2c-216">En la lista **nombre de tabla o vista** , seleccione vAssocSeqOrders y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-216">In the **Table/View Name** list, select vAssocSeqOrders, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="01e2c-217">En el cuadro de diálogo **seleccionar tabla (s) de entrada** , haga clic en **seleccionar tabla anidada**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-217">In the **Select Input Table(s)** dialog box, click **Select Nested Table**.</span></span>  
  
5.  <span data-ttu-id="01e2c-218">En el cuadro de diálogo **seleccionar tabla** , en **origen de datos**, seleccione pedidos.</span><span class="sxs-lookup"><span data-stu-id="01e2c-218">In the **Select Table** dialog box, for **Data Source**, select Orders.</span></span> <span data-ttu-id="01e2c-219">En la lista **nombre de tabla o vista** , seleccione vAssocSeqLineItems y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-219">In the **Table/View name** list, select vAssocSeqLineItems, and then click **OK**.</span></span>  
  
     <span data-ttu-id="01e2c-220">Analysis Services intentará detectar las relaciones y crearlas automáticamente si los tipos de datos coinciden y los nombres de columna son similares.</span><span class="sxs-lookup"><span data-stu-id="01e2c-220">Analysis Services will try to detect relationships and create them automatically if the data types match and the column names are similar.</span></span> <span data-ttu-id="01e2c-221">Si las relaciones que crea son erróneas, puede hacer clic con el botón secundario en la línea de combinación y seleccionar **modificar conexiones** para editar la asignación de columnas, o puede hacer clic con el botón secundario en la línea de combinación y seleccionar **eliminar** para quitar la relación por completo.</span><span class="sxs-lookup"><span data-stu-id="01e2c-221">If the relationships that it creates are wrong, you can right-click the join line and select **Modify Connections** to edit the column mapping, or you can right-click the join line and select **Delete** to remove the relationship completely.</span></span> <span data-ttu-id="01e2c-222">En este caso, dado que las tablas ya estuvieron unidas en la vista del origen de datos, esas relaciones se agregan automáticamente al panel de diseño.</span><span class="sxs-lookup"><span data-stu-id="01e2c-222">In this case, because the tables were already joined in the data source view, those relationships are automatically added to the design pane.</span></span>  
  
6.  <span data-ttu-id="01e2c-223">Agregue una nueva fila a la cuadrícula.</span><span class="sxs-lookup"><span data-stu-id="01e2c-223">Add a new row to the grid.</span></span> <span data-ttu-id="01e2c-224">En **origen**, seleccione vAssocSeqOrders y, en **campo**, seleccione CustomerKey.</span><span class="sxs-lookup"><span data-stu-id="01e2c-224">For **Source**, select vAssocSeqOrders, and for **Field**, select CustomerKey.</span></span>  
  
7.  <span data-ttu-id="01e2c-225">Agregue una nueva fila a la cuadrícula.</span><span class="sxs-lookup"><span data-stu-id="01e2c-225">Add a new row to the grid.</span></span> <span data-ttu-id="01e2c-226">En **origen**, seleccione **función de predicción**y, en **campo**, seleccione **PredictSequence**.</span><span class="sxs-lookup"><span data-stu-id="01e2c-226">For **Source**, select **Prediction Function**, and for **Field**, select **PredictSequence**.</span></span>  
  
8.  <span data-ttu-id="01e2c-227">Arrastre vAssocSeqLineItems, al cuadro **criterios o argumento** .</span><span class="sxs-lookup"><span data-stu-id="01e2c-227">Drag vAssocSeqLineItems, into the **Criteria/Argument** box.</span></span> <span data-ttu-id="01e2c-228">Haga clic al final del cuadro **criterios o argumento** y, a continuación, escriba los argumentos siguientes: `2` .</span><span class="sxs-lookup"><span data-stu-id="01e2c-228">Click at the end of the **Criteria/Argument** box and then type the following arguments: `2`.</span></span>  
  
     <span data-ttu-id="01e2c-229">El texto completo del cuadro **criterios o argumento** debe ser:`[Sequence Clustering].[v Assoc Seq Line Items],2`</span><span class="sxs-lookup"><span data-stu-id="01e2c-229">The complete text in the **Criteria/Argument** box should be: `[Sequence Clustering].[v Assoc Seq Line Items],2`</span></span>  
  
9. <span data-ttu-id="01e2c-230">Haga clic en el botón **resultado** para ver las predicciones de cada cliente.</span><span class="sxs-lookup"><span data-stu-id="01e2c-230">Click the **Result** button to view the predictions for each customer.</span></span>  
  
 <span data-ttu-id="01e2c-231">Ha completado el tutorial sobre modelos de agrupación en clústeres de secuencia.</span><span class="sxs-lookup"><span data-stu-id="01e2c-231">You have completed the tutorial on sequence clustering models.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="01e2c-232">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="01e2c-232">Next Steps</span></span>  
 <span data-ttu-id="01e2c-233">Si ha finalizado todas las secciones del [tutorial intermedio de minería de datos &#40;Analysis Services&#41;de minería de datos ](../../2014/tutorials/intermediate-data-mining-tutorial-analysis-services-data-mining.md), el paso siguiente podría ser aprender a utilizar instrucciones de extensiones de minería de datos (DMX) para crear modelos y generar predicciones.</span><span class="sxs-lookup"><span data-stu-id="01e2c-233">If you have finished all the sections in the [Intermediate Data Mining Tutorial &#40;Analysis Services - Data Mining&#41;](../../2014/tutorials/intermediate-data-mining-tutorial-analysis-services-data-mining.md), the next step might be to learn to use Data Mining Extensions (DMX) statements to build models and generate predictions.</span></span> <span data-ttu-id="01e2c-234">Para obtener más información, vea [crear y consultar modelos de minería de datos con DMX: tutoriales &#40;Analysis Services-&#41;de minería de ](../../2014/tutorials/create-query-data-mining-models-dmx-tutorials.md)datos.</span><span class="sxs-lookup"><span data-stu-id="01e2c-234">For more information, see [Creating and Querying Data Mining Models with DMX: Tutorials &#40;Analysis Services - Data Mining&#41;](../../2014/tutorials/create-query-data-mining-models-dmx-tutorials.md).</span></span>  
  
 <span data-ttu-id="01e2c-235">Si tiene algunos conceptos de programación, también puede utilizar Objetos de administración de análisis (AMO) para trabajar mediante programación con objetos de minería de datos.</span><span class="sxs-lookup"><span data-stu-id="01e2c-235">If you are familiar with programming concepts, you can also use Analysis Management Objects (AMO) to programmatically work with data mining objects.</span></span> <span data-ttu-id="01e2c-236">Para obtener más información, vea [Clases de minería de datos de AMO](https://docs.microsoft.com/bi-reference/amo/amo-data-mining-classes).</span><span class="sxs-lookup"><span data-stu-id="01e2c-236">For more information, see [AMO Data Mining Classes](https://docs.microsoft.com/bi-reference/amo/amo-data-mining-classes).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="01e2c-237">Consulte también</span><span class="sxs-lookup"><span data-stu-id="01e2c-237">See Also</span></span>  
 <span data-ttu-id="01e2c-238">[Ejemplos de consultas de modelos de agrupación en clústeres de secuencia](../../2014/analysis-services/data-mining/sequence-clustering-model-query-examples.md) </span><span class="sxs-lookup"><span data-stu-id="01e2c-238">[Sequence Clustering Model Query Examples](../../2014/analysis-services/data-mining/sequence-clustering-model-query-examples.md) </span></span>  
 [<span data-ttu-id="01e2c-239">Contenido del modelo de minería de datos para los modelos de agrupación en clústeres de secuencia &#40;Analysis Services - Minería de datos&#41;</span><span class="sxs-lookup"><span data-stu-id="01e2c-239">Mining Model Content for Sequence Clustering Models &#40;Analysis Services - Data Mining&#41;</span></span>](../../2014/analysis-services/data-mining/mining-model-content-for-sequence-clustering-models.md)  
  
  
