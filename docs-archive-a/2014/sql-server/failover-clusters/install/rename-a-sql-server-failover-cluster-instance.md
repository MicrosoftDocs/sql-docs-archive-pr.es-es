---
title: Cambiar el nombre de una instancia de clúster de conmutación por error de SQL Server | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- clusters [SQL Server], virtual servers
- renaming virtual servers
- virtual servers [SQL Server], failover clustering
- failover clustering [SQL Server], virtual servers
ms.assetid: 2a49d417-25fb-4760-8ae5-5871bfb1e6f3
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 397e36931e446861db0fcb899cad30e8c7b1ffc2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87672584"
---
# <a name="rename-a-sql-server-failover-cluster-instance"></a><span data-ttu-id="5451a-102">Cambiar el nombre de una instancia de clúster de conmutación por error de SQL Server</span><span class="sxs-lookup"><span data-stu-id="5451a-102">Rename a SQL Server Failover Cluster Instance</span></span>
  <span data-ttu-id="5451a-103">Cuando una instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] forma parte de un clúster de conmutación por error, el proceso para cambiar el nombre del servidor virtual no es el mismo que para cambiar el nombre de una instancia independiente.</span><span class="sxs-lookup"><span data-stu-id="5451a-103">When a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance is part of a failover cluster, the process of renaming the virtual server differs from that of renaming a stand-alone instance.</span></span> <span data-ttu-id="5451a-104">Para obtener más información, vea [Cambiar el nombre de un equipo que hospeda una instancia independiente de SQL Server](../../../database-engine/install-windows/rename-a-computer-that-hosts-a-stand-alone-instance-of-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="5451a-104">For more information, see [Rename a Computer that Hosts a Stand-Alone Instance of SQL Server](../../../database-engine/install-windows/rename-a-computer-that-hosts-a-stand-alone-instance-of-sql-server.md).</span></span>  
  
 <span data-ttu-id="5451a-105">El nombre del servidor virtual es siempre el nombre de red de SQL (el nombre de red del servidor virtual SQL Server).</span><span class="sxs-lookup"><span data-stu-id="5451a-105">The name of the virtual server is always the same as the name of the SQL Network Name (the SQL Virtual Server Network Name).</span></span> <span data-ttu-id="5451a-106">Aunque se puede cambiar el nombre del servidor virtual, no se puede cambiar el nombre de la instancia.</span><span class="sxs-lookup"><span data-stu-id="5451a-106">Although you can change the name of the virtual server, you cannot change the instance name.</span></span> <span data-ttu-id="5451a-107">Por ejemplo, es posible cambiar el nombre del servidor virtual VS1\instancia1 por cualquier otro nombre, como SQL35\instancia1, pero la parte del nombre que corresponde a la instancia (instancia1) no varía.</span><span class="sxs-lookup"><span data-stu-id="5451a-107">For example, you can change a virtual server named VS1\instance1 to some other name, such as SQL35\instance1, but the instance portion of the name, instance1, will remain unchanged.</span></span>  
  
 <span data-ttu-id="5451a-108">Antes de comenzar el proceso de cambio de nombre, revise los siguientes puntos.</span><span class="sxs-lookup"><span data-stu-id="5451a-108">Before you begin the renaming process, review the items below.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="5451a-109">no admite el cambio de nombre de los servidores que participan en la replicación, excepto si se utiliza el trasvase de registros con la replicación.</span><span class="sxs-lookup"><span data-stu-id="5451a-109">does not support renaming servers involved in replication, except in the case of using log shipping with replication.</span></span> <span data-ttu-id="5451a-110">Se puede cambiar el nombre del servidor secundario del trasvase de registros si se pierde el servidor principal de manera permanente.</span><span class="sxs-lookup"><span data-stu-id="5451a-110">The secondary server in log shipping can be renamed if the primary server is permanently lost.</span></span> <span data-ttu-id="5451a-111">Para obtener más información, vea [Trasvase de registros y replicación &#40;SQL Server&#41;](../../../database-engine/log-shipping/log-shipping-and-replication-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="5451a-111">For more information, see [Log Shipping and Replication &#40;SQL Server&#41;](../../../database-engine/log-shipping/log-shipping-and-replication-sql-server.md).</span></span>  
  
-   <span data-ttu-id="5451a-112">Cuando se cambia el nombre de un servidor virtual configurado para utilizar la creación de reflejo de la base de datos, debe desactivarse la creación de reflejo de la base de datos antes de realizar la operación de cambio de nombre y, después, volver a establecer la creación de reflejo de la base de datos con el nombre de servidor virtual nuevo.</span><span class="sxs-lookup"><span data-stu-id="5451a-112">When renaming a virtual server that is configured to use database mirroring, you must turn off database mirroring before the renaming operation, and then re-establish database mirroring with the new virtual server name.</span></span> <span data-ttu-id="5451a-113">Los metadatos para la creación de reflejo de la base de datos no se actualizan automáticamente con el nuevo nombre del servidor virtual.</span><span class="sxs-lookup"><span data-stu-id="5451a-113">Metadata for database mirroring will not be updated automatically to reflect the new virtual server name.</span></span>  
  
### <a name="to-rename-a-virtual-server"></a><span data-ttu-id="5451a-114">Para cambiar el nombre de un servidor virtual</span><span class="sxs-lookup"><span data-stu-id="5451a-114">To rename a virtual server</span></span>  
  
1.  <span data-ttu-id="5451a-115">En el Administrador de clústeres, cambie el nombre de red de SQL Server por el nombre nuevo.</span><span class="sxs-lookup"><span data-stu-id="5451a-115">Using Cluster Administrator, change the SQL Network Name to the new name.</span></span>  
  
2.  <span data-ttu-id="5451a-116">Ponga el recurso de nombre de red en modo sin conexión.</span><span class="sxs-lookup"><span data-stu-id="5451a-116">Take the network name resource offline.</span></span> <span data-ttu-id="5451a-117">Esta operación pone también el recurso de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] y otros recursos dependientes en modo sin conexión.</span><span class="sxs-lookup"><span data-stu-id="5451a-117">This takes the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource and other dependent resources offline as well.</span></span>  
  
3.  <span data-ttu-id="5451a-118">Vuelva a poner en línea el recurso de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5451a-118">Bring the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource back online.</span></span>  
  
## <a name="verify-the-renaming-operation"></a><span data-ttu-id="5451a-119">Comprobar la operación de cambio de nombre</span><span class="sxs-lookup"><span data-stu-id="5451a-119">Verify the Renaming Operation</span></span>  
 <span data-ttu-id="5451a-120">Después de cambiar el nombre de un servidor virtual, las conexiones que utilizaban el nombre anterior ahora deben realizarse con el nuevo nombre.</span><span class="sxs-lookup"><span data-stu-id="5451a-120">After a virtual server has been renamed, any connections that used the old name must now connect using the new name.</span></span>  
  
 <span data-ttu-id="5451a-121">Para comprobar que la operación de cambio de nombre ha finalizado, seleccione información de `@@servername` o `sys.servers`.</span><span class="sxs-lookup"><span data-stu-id="5451a-121">To verify that the renaming operation has completed, select information from either `@@servername` or `sys.servers`.</span></span> <span data-ttu-id="5451a-122">La función `@@servername` devolverá el nuevo nombre del servidor virtual y la tabla `sys.servers` mostrará también este nombre.</span><span class="sxs-lookup"><span data-stu-id="5451a-122">The `@@servername` function will return the new virtual server name, and the `sys.servers` table will show the new virtual server name.</span></span> <span data-ttu-id="5451a-123">Para comprobar que el proceso de conmutación por error funciona correctamente con el nuevo nombre, el usuario también debe intentar que el recurso de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] conmute por error a los otros nodos.</span><span class="sxs-lookup"><span data-stu-id="5451a-123">To verify that the failover process is working correctly with the new name, the user should also try to fail the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource over to the other nodes.</span></span>  
  
 <span data-ttu-id="5451a-124">Para las conexiones desde cualquier nodo del clúster se puede utilizar el nombre nuevo casi inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="5451a-124">For connections from any node in the cluster, the new name can be used almost immediately.</span></span> <span data-ttu-id="5451a-125">Sin embargo, no se puede utilizar para las conexiones con el servidor desde un equipo cliente hasta que no esté visible para este último.</span><span class="sxs-lookup"><span data-stu-id="5451a-125">However, for connections using the new name from a client computer, the new name cannot be used to connect to the server until the new name is visible to that client computer.</span></span> <span data-ttu-id="5451a-126">El tiempo necesario para que el nuevo nombre se propague a través de la red pueden ser segundos o de 3 a 5 minutos, dependiendo de la configuración de la red; puede que se necesite más tiempo para que el nombre de servidor virtual anterior deje de estar visible en la red.</span><span class="sxs-lookup"><span data-stu-id="5451a-126">The length of time required for the new name to be propagated across a network can be a few seconds, or as long as 3 to 5 minutes, depending on the network configuration; additional time may be required before the old virtual server name is no longer visible on the network.</span></span>  
  
 <span data-ttu-id="5451a-127">Para reducir al mínimo el tiempo necesario para propagar en la red el cambio de nombre de un servidor virtual, realice los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="5451a-127">To minimize network propagation delay of a virtual server renaming operation, use the following steps:</span></span>  
  
#### <a name="to-minimize-network-propagation-delay"></a><span data-ttu-id="5451a-128">Para reducir al mínimo el tiempo necesario de propagación por la red</span><span class="sxs-lookup"><span data-stu-id="5451a-128">To minimize network propagation delay</span></span>  
  
1.  <span data-ttu-id="5451a-129">Ejecute los comandos siguientes desde un símbolo del sistema del nodo del servidor:</span><span class="sxs-lookup"><span data-stu-id="5451a-129">Issue the following commands from a command prompt on the server node:</span></span>  
  
    ```  
    ipconfig /flushdns  
    ipconfig /registerdns  
    nbtstat -RR  
    ```  
  
## <a name="additional-considerations-after-the-renaming-operation"></a><span data-ttu-id="5451a-130">Consideraciones adicionales después de la operación de cambio de nombre</span><span class="sxs-lookup"><span data-stu-id="5451a-130">Additional considerations after the Renaming Operation</span></span>  
 <span data-ttu-id="5451a-131">Después de cambiar el nombre de red en clúster del clúster de conmutación por error, hay que comprobar y seguir las siguientes instrucciones para conseguir que todos los escenarios del Agente [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] y [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]funcionen.</span><span class="sxs-lookup"><span data-stu-id="5451a-131">After we rename the network name of failover cluster we need to verify and perform the following instructions to enable all scenarios in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent and [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="5451a-132">\*\* [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)] :\*\* Después de cambiar el nombre de red de una [!INCLUDE[ssASCurrent](../../../includes/ssascurrent-md.md)] instancia de clúster de conmutación por error mediante la herramienta Administrador de clústeres de Windows, es posible que se produzca un error en la operación de actualización o desinstalación.</span><span class="sxs-lookup"><span data-stu-id="5451a-132">**[!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]:** After you change the network name of a [!INCLUDE[ssASCurrent](../../../includes/ssascurrent-md.md)] failover cluster instance using Windows Cluster Administrator tool, the future upgrade or uninstall operation might fail.</span></span> <span data-ttu-id="5451a-133">Para resolver este problema, actualice la entrada del registro **ClusterName** siguiendo las instrucciones de la sección resolución de [este](https://go.microsoft.com/fwlink/?LinkId=244002) ( https://go.microsoft.com/fwlink/?LinkId=244002) .</span><span class="sxs-lookup"><span data-stu-id="5451a-133">To resolve this issue update the **ClusterName** registry entry following the instructions in the resolution section of [this](https://go.microsoft.com/fwlink/?LinkId=244002) (https://go.microsoft.com/fwlink/?LinkId=244002).</span></span>  
  
 <span data-ttu-id="5451a-134">\*\* [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Servicio del agente:\*\* Compruebe y realice las acciones adicionales siguientes para [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Servicio del agente:</span><span class="sxs-lookup"><span data-stu-id="5451a-134">**[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent Service:** Verify and perform the below additional actions for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent Service:</span></span>  
  
-   <span data-ttu-id="5451a-135">Corrija la configuración del Registro si el Agente SQL se configura para el reenvío de eventos.</span><span class="sxs-lookup"><span data-stu-id="5451a-135">Fix the registry settings if SQL Agent is configured for event forwarding.</span></span> <span data-ttu-id="5451a-136">Para obtener más información, vea [Designar un servidor de reenvío de eventos &#40;SQL Server Management Studio&#41;](../../../ssms/agent/designate-an-events-forwarding-server-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="5451a-136">For more information, see [Designate an Events Forwarding Server &#40;SQL Server Management Studio&#41;](../../../ssms/agent/designate-an-events-forwarding-server-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="5451a-137">Corregir los nombres de instancia de los servidores de destino (TSX) y el servidor maestro (MSX) cuando se cambie el nombre de red en clúster o equipos.</span><span class="sxs-lookup"><span data-stu-id="5451a-137">Fix the master server (MSX) and target servers (TSX) instance names when machines / cluster network name is renamed.</span></span> <span data-ttu-id="5451a-138">Para obtener más información, vea los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="5451a-138">For more information, see the following topics:</span></span>  
  
    -   [<span data-ttu-id="5451a-139">Dar de baja varios servidores de destino desde un servidor maestro</span><span class="sxs-lookup"><span data-stu-id="5451a-139">Defect Multiple Target Servers from a Master Server</span></span>](../../../ssms/agent/defect-multiple-target-servers-from-a-master-server.md)  
  
    -   [<span data-ttu-id="5451a-140">Crear un entorno multiservidor</span><span class="sxs-lookup"><span data-stu-id="5451a-140">Create a Multiserver Environment</span></span>](../../../ssms/agent/create-a-multiserver-environment.md)  
  
-   <span data-ttu-id="5451a-141">Volver a configurar el trasvase de registros de modo que se use el nombre de servidor actualizado para realizar la copia de seguridad de los registros y para restaurarlos.</span><span class="sxs-lookup"><span data-stu-id="5451a-141">Reconfigure the Log Shipping so that updated server name is used to backup and restore logs.</span></span> <span data-ttu-id="5451a-142">Para obtener más información, vea los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="5451a-142">For more information, see the following topics:</span></span>  
  
    -   [<span data-ttu-id="5451a-143">Configurar el trasvase de registros &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="5451a-143">Configure Log Shipping &#40;SQL Server&#41;</span></span>](../../../database-engine/log-shipping/configure-log-shipping-sql-server.md)  
  
    -   [<span data-ttu-id="5451a-144">Quitar el trasvase de registros &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="5451a-144">Remove Log Shipping &#40;SQL Server&#41;</span></span>](../../../database-engine/log-shipping/remove-log-shipping-sql-server.md)  
  
-   <span data-ttu-id="5451a-145">Actualizar los pasos de trabajo que dependen del nombre de servidor.</span><span class="sxs-lookup"><span data-stu-id="5451a-145">Update the Jobsteps that depend on server name.</span></span> <span data-ttu-id="5451a-146">Para más información, consulte [Manage Job Steps](../../../ssms/agent/manage-job-steps.md).</span><span class="sxs-lookup"><span data-stu-id="5451a-146">For more information, see [Manage Job Steps](../../../ssms/agent/manage-job-steps.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5451a-147">Consulte también</span><span class="sxs-lookup"><span data-stu-id="5451a-147">See Also</span></span>  
 [<span data-ttu-id="5451a-148">Cambiar el nombre de un equipo que hospeda una instancia independiente de SQL Server</span><span class="sxs-lookup"><span data-stu-id="5451a-148">Rename a Computer that Hosts a Stand-Alone Instance of SQL Server</span></span>](../../../database-engine/install-windows/rename-a-computer-that-hosts-a-stand-alone-instance-of-sql-server.md)  
  
  
