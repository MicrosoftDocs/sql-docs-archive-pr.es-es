---
title: Instancias de clúster de conmutación por error de AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- clustering [SQL Server]
- high availability [SQL Server], failover clustering
- virtual servers [SQL Server], about virtual servers
- clusters [SQL Server]
- servers [SQL Server], failover clustering
- resource groups [SQL Server]
- availability [SQL Server]
- failover clustering [SQL Server]
- AlwaysOn [SQL Server], see failover clustering [SQL Server]
ms.assetid: 86a15b33-4d03-4549-8ea2-b45e4f1baad7
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 6adc173560fd83d00616eb00c63651ef667c2a00
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87672570"
---
# <a name="always-on-failover-cluster-instances-sql-server"></a><span data-ttu-id="1c622-102">Instancias de clúster de conmutación por error de AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="1c622-102">Always On Failover Cluster Instances (SQL Server)</span></span>
  <span data-ttu-id="1c622-103">Como parte de la [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] oferta de Always On, Always on instancias de clúster de conmutación por error aprovecha la funcionalidad de clústeres de conmutación por error de Windows Server (WSFC) para proporcionar alta disponibilidad local mediante redundancia en el nivel de instancia de servidor: una *instancia de clúster de conmutación por error* (FCI).</span><span class="sxs-lookup"><span data-stu-id="1c622-103">As part of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Always On offering, Always On Failover Cluster Instances leverages Windows Server Failover Clustering (WSFC) functionality to provide local high availability through redundancy at the server-instance level-a *failover cluster instance* (FCI).</span></span> <span data-ttu-id="1c622-104">Una FCI es una instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que se instala a través de los nodos de Clústeres de conmutación por error de Windows Server (WSFC) y, posiblemente, a través de varias subredes.</span><span class="sxs-lookup"><span data-stu-id="1c622-104">An FCI is a single instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that is installed across Windows Server Failover Clustering (WSFC) nodes and, possibly, across multiple subnets.</span></span> <span data-ttu-id="1c622-105">En la red, una FCI aparece como una instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que se ejecuta en un equipo individual, pero proporciona la conmutación por error entre nodos de WSFC si el nodo actual deja de estar disponible.</span><span class="sxs-lookup"><span data-stu-id="1c622-105">On the network, an FCI appears to be an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] running on a single computer, but the FCI provides failover from one WSFC node to another if the current node becomes unavailable.</span></span>  
  
 <span data-ttu-id="1c622-106">Una FCI puede aprovechar las ventajas de los [Grupos de disponibilidad AlwaysOn](../../../database-engine/availability-groups/windows/always-on-availability-groups-sql-server.md) para proporcionar recuperación remota ante desastres en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="1c622-106">An FCI can leverage [Always On Availability Groups](../../../database-engine/availability-groups/windows/always-on-availability-groups-sql-server.md)to provide remote disaster recovery at the database level.</span></span> <span data-ttu-id="1c622-107">Para más información, vea [Clústeres de conmutación por error y grupos de disponibilidad AlwaysOn (SQL Server)](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="1c622-107">For more information, see [Failover Clustering and Always On Availability Groups (;SQL Server);](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="1c622-108">A partir de [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], las instancias del clúster de conmutación por error de AlwaysOn admiten los volúmenes compartidos en clúster (CSV) en [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] y [!INCLUDE[win8srv](../../../includes/win8srv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1c622-108">Beginning in [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], Always On Failover Cluster Instances supports Clustered Shared Volumes (CSV) in both [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] and [!INCLUDE[win8srv](../../../includes/win8srv-md.md)].</span></span> <span data-ttu-id="1c622-109">Para obtener más información sobre CSV, vea [Descripción de Volúmenes compartidos de clúster en un clúster de conmutación por error](https://technet.microsoft.com/library/dd759255.aspx).</span><span class="sxs-lookup"><span data-stu-id="1c622-109">For more information on CSV, see [Understanding Cluster Shared Volumes in a Failover Cluster](https://technet.microsoft.com/library/dd759255.aspx).</span></span>  
  
 <span data-ttu-id="1c622-110">**En este tema:**</span><span class="sxs-lookup"><span data-stu-id="1c622-110">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="1c622-111">Ventajas</span><span class="sxs-lookup"><span data-stu-id="1c622-111">Benefits</span></span>](#Benefits)  
  
-   [<span data-ttu-id="1c622-112">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="1c622-112">Recommendations</span></span>](#Recommendations)  
  
-   [<span data-ttu-id="1c622-113">Información general de las instancias de clúster de conmutación por error</span><span class="sxs-lookup"><span data-stu-id="1c622-113">Failover Cluster Instance Overview</span></span>](#Overview)  
  
-   [<span data-ttu-id="1c622-114">Elementos de una instancia de clúster de conmutación por error</span><span class="sxs-lookup"><span data-stu-id="1c622-114">Elements of a Failover Cluster Instance</span></span>](#FCIelements)  
  
-   [<span data-ttu-id="1c622-115">SQL Server de conceptos y tareas de conmutación por error</span><span class="sxs-lookup"><span data-stu-id="1c622-115">SQL Server Failover Concepts and Tasks</span></span>](#ConceptsAndTasks)  
  
-   [<span data-ttu-id="1c622-116">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="1c622-116">Related Topics</span></span>](#RelatedTopics)  
  
##  <a name="benefits-of-a-failover-cluster-instance"></a><a name="Benefits"></a> <span data-ttu-id="1c622-117">Ventajas de una instancia de clústeres de conmutación por error</span><span class="sxs-lookup"><span data-stu-id="1c622-117">Benefits of a Failover Cluster Instance</span></span>  
 <span data-ttu-id="1c622-118">Cuando hay un error de hardware o software de un servidor, las aplicaciones o los clientes que se conecten al servidor experimentarán tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="1c622-118">When there is hardware or software failure of a server, the applications or clients connecting to the server will experience downtime.</span></span> <span data-ttu-id="1c622-119">Cuando una instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] se configura para ser una FCI (en lugar de una instancia independiente), la alta disponibilidad de esa instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] está protegida por la presencia de nodos redundantes en la FCI.</span><span class="sxs-lookup"><span data-stu-id="1c622-119">When a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance is configured to be an FCI (instead of a standalone instance), the high availability of that [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance is protected by the presence of redundant nodes in the FCI.</span></span> <span data-ttu-id="1c622-120">Solo uno de los nodos de la FCI pertenece al grupo de recursos de WSFC cada vez.</span><span class="sxs-lookup"><span data-stu-id="1c622-120">Only one of the nodes in the FCI owns the WSFC resource group at a time.</span></span> <span data-ttu-id="1c622-121">En caso de se produzca un error (errores de hardware, errores del sistema operativo o errores de aplicación o servicio) o se realice una actualización planeada, la propiedad del grupo de recursos se mueve a otro nodo de WSFC.</span><span class="sxs-lookup"><span data-stu-id="1c622-121">In case of a failure (hardware failures, operating system failures, application or service failures), or a planned upgrade, the resource group ownership is moved to another WSFC node.</span></span> <span data-ttu-id="1c622-122">Este proceso es transparente para el cliente o aplicación que se conecta a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] y minimiza el tiempo de inactividad que la aplicación o los clientes experimentan durante un error.</span><span class="sxs-lookup"><span data-stu-id="1c622-122">This process is transparent to the client or application connecting to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and this minimize the downtime the application or clients experience during a failure.</span></span> <span data-ttu-id="1c622-123">A continuación se enumeran algunas ventajas clave que las instancias de clúster de conmutación por error de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] proporcionan:</span><span class="sxs-lookup"><span data-stu-id="1c622-123">The following lists some key benefits that [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instances provide:</span></span>  
  
-   <span data-ttu-id="1c622-124">Protección a través de la redundancia en el nivel de instancia.</span><span class="sxs-lookup"><span data-stu-id="1c622-124">Protection at the instance level through redundancy</span></span>  
  
-   <span data-ttu-id="1c622-125">Conmutación automática por error en caso de error (errores de hardware, errores del sistema operativo, errores de la aplicación o de servicio)</span><span class="sxs-lookup"><span data-stu-id="1c622-125">Automatic failover in the event of a failure (hardware failures, operating system failures, application or service failures)</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="1c622-126">En el grupo de disponibilidad de AlwaysOn, no se admite la conmutación automática por error de una FCI a otros nodos del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="1c622-126">In an Always On availability group, automatic failover from an FCI to other nodes within the availability group is not supported.</span></span> <span data-ttu-id="1c622-127">Esto significa que las FCI y los nodos independientes no deben acoplarse juntos en un grupo de disponibilidad si la conmutación automática por error es un componente importante de la solución de alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="1c622-127">This means that FCIs and standalone nodes should not be coupled together within an availability group if automatic failover is an important component your high availability solution.</span></span> <span data-ttu-id="1c622-128">Sin embargo, este acoplamiento se puede realizar para la solución de *recuperación ante desastres* .</span><span class="sxs-lookup"><span data-stu-id="1c622-128">However, this coupling can be made for your *disaster recovery* solution.</span></span>  
  
-   <span data-ttu-id="1c622-129">Compatibilidad con una amplia matriz de soluciones de almacenamiento, incluidos discos de clúster de WSFC (iSCSI, canal de fibra óptica, etc.) y recursos compartidos de archivos de Bloque de mensajes de servidor (SMB).</span><span class="sxs-lookup"><span data-stu-id="1c622-129">Support for a broad array of storage solutions, including WSFC cluster disks (iSCSI, Fiber Channel, and so on) and server message block (SMB) file shares.</span></span>  
  
-   <span data-ttu-id="1c622-130">Solución de recuperación ante desastres que usa una FCI de múltiples subredes o que ejecuta una base de datos hospedada por FCI en un grupo de disponibilidad AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="1c622-130">Disaster recovery solution using a multi-subnet FCI or running an FCI-hosted database inside an Always On availability group.</span></span> <span data-ttu-id="1c622-131">Con la nueva utilidad de múltiples subredes en [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], una FCI de múltiples subredes ya no necesita una LAN virtual, con lo que aumentan su capacidad de administración y su seguridad.</span><span class="sxs-lookup"><span data-stu-id="1c622-131">With the new multi-subnet support in [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], a multi-subnet FCI no longer requires a virtual LAN, increasing the manageability and security of a multi-subnet FCI.</span></span>  
  
-   <span data-ttu-id="1c622-132">Reconfiguración cero de aplicaciones y clientes durante las conmutaciones por error</span><span class="sxs-lookup"><span data-stu-id="1c622-132">Zero reconfiguration of applications and clients during failovers</span></span>  
  
-   <span data-ttu-id="1c622-133">Directiva de conmutación por error flexible para eventos de desencadenador específicos en conmutaciones automáticas por error</span><span class="sxs-lookup"><span data-stu-id="1c622-133">Flexible failover policy for granular trigger events for automatic failovers</span></span>  
  
-   <span data-ttu-id="1c622-134">Conmutaciones por error confiables a través de la detección periódica y detallada del estado mediante el uso de conexiones dedicadas y persistentes</span><span class="sxs-lookup"><span data-stu-id="1c622-134">Reliable failovers through periodic and detailed health detection using dedicated and persisted connections</span></span>  
  
-   <span data-ttu-id="1c622-135">Facilidad de configuración y predicción en el momento de la conmutación por error mediante puntos de comprobación indirectos de antecedentes</span><span class="sxs-lookup"><span data-stu-id="1c622-135">Configurability and predictability in failover time through indirect background checkpoints</span></span>  
  
-   <span data-ttu-id="1c622-136">Uso acelerado de recursos durante las conmutaciones por error</span><span class="sxs-lookup"><span data-stu-id="1c622-136">Throttled resource usage during failovers</span></span>  
  
##  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="1c622-137">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="1c622-137">Recommendations</span></span>  
 <span data-ttu-id="1c622-138">En un entorno de producción, recomendamos que use direcciones IP estáticas junto con la dirección IP virtual de una instancia de clúster de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="1c622-138">In a production environment, we recommend that you use static IP addresses in conjunction the virtual IP address of a Failover Cluster Instance.</span></span>  <span data-ttu-id="1c622-139">Recomendamos no usar DHCP en un entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="1c622-139">We recommend against using DHCP in a production environment.</span></span> <span data-ttu-id="1c622-140">En caso de tiempo de inactividad, si expira el tiempo de concesión de la dirección de IP de DHCP, se necesitará un tiempo adicional para volver a registrar la nueva dirección IP de DHCP asociada al nombre DNS.</span><span class="sxs-lookup"><span data-stu-id="1c622-140">In the event of down time, if the DHCP IP lease expires, extra time is required to re-register the new DHCP IP address associated with the DNS name.</span></span>  
  
##  <a name="failover-cluster-instance-overview"></a><a name="Overview"></a><span data-ttu-id="1c622-141">Introducción a la instancia de clúster de conmutación por error</span><span class="sxs-lookup"><span data-stu-id="1c622-141">Failover Cluster Instance Overview</span></span>  
 <span data-ttu-id="1c622-142">Una FCI se ejecuta en un grupo de recursos de WSFC con uno o más nodos de WSFC.</span><span class="sxs-lookup"><span data-stu-id="1c622-142">An FCI runs in a WSFC resource group with one or more WSFC nodes.</span></span> <span data-ttu-id="1c622-143">Cuando la FCI se inicia, uno de los nodos asume la propiedad del grupo de recursos y pone en línea la instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1c622-143">When the FCI starts up, one of the nodes assume ownership of the resource group and brings its [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance online.</span></span> <span data-ttu-id="1c622-144">Entre los recursos que pertenecen a este nodo se incluyen:</span><span class="sxs-lookup"><span data-stu-id="1c622-144">The resources owned by this node include:</span></span>  
  
-   <span data-ttu-id="1c622-145">Nombre de red</span><span class="sxs-lookup"><span data-stu-id="1c622-145">Network name</span></span>  
  
-   <span data-ttu-id="1c622-146">Dirección IP</span><span class="sxs-lookup"><span data-stu-id="1c622-146">IP address</span></span>  
  
-   <span data-ttu-id="1c622-147">Discos compartidos</span><span class="sxs-lookup"><span data-stu-id="1c622-147">Shared disks</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="1c622-148">Servicio Motor de base de datos</span><span class="sxs-lookup"><span data-stu-id="1c622-148">Database Engine service</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="1c622-149">Servicio del Agente</span><span class="sxs-lookup"><span data-stu-id="1c622-149">Agent service</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="1c622-150">Analysis Services, si está instalado</span><span class="sxs-lookup"><span data-stu-id="1c622-150">Analysis Services service, if installed</span></span>  
  
-   <span data-ttu-id="1c622-151">Un recurso compartido de archivos, si está instalada la característica FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="1c622-151">One file share resource, if the FILESTREAM feature is installed</span></span>  
  
 <span data-ttu-id="1c622-152">En cualquier momento, solo el propietario del grupo de recursos (y ningún otro nodo de la FCI) ejecuta sus servicios de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] respectivos en el grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="1c622-152">At any time, only the resource group owner (and no other node in the FCI) is running its respective [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services in the resource group.</span></span> <span data-ttu-id="1c622-153">Cuando se produce una conmutación por error, ya sea automática o planeada, tiene lugar la siguiente secuencia de eventos:</span><span class="sxs-lookup"><span data-stu-id="1c622-153">When a failover occurs, whether it be an automatic failover or a planned failover, the following sequence of events happen:</span></span>  
  
1.  <span data-ttu-id="1c622-154">A menos que se produzca un error hardware o del sistema, todas las páginas desfasadas de la memoria caché del búfer se escriben en el disco.</span><span class="sxs-lookup"><span data-stu-id="1c622-154">Unless a hardware or system failure occurs, all dirty pages in the buffer cache are written to disk.</span></span>  
  
2.  <span data-ttu-id="1c622-155">Todos los servicios de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] respectivos del grupo de recursos se detienen en el nodo activo.</span><span class="sxs-lookup"><span data-stu-id="1c622-155">All respective [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services in the resource group are stopped on the active node.</span></span>  
  
3.  <span data-ttu-id="1c622-156">La propiedad del grupo de recursos se transfiere a otro nodo de la FCI.</span><span class="sxs-lookup"><span data-stu-id="1c622-156">The resource group ownership is transferred to another node in the FCI.</span></span>  
  
4.  <span data-ttu-id="1c622-157">El nuevo propietario del grupo de recursos inicia los servicios de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1c622-157">The new resource group owner starts its [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services.</span></span>  
  
5.  <span data-ttu-id="1c622-158">Las solicitudes de conexión de la aplicación cliente se dirigen automáticamente al nuevo nodo activo utilizando el mismo nombre de red virtual (VNN).</span><span class="sxs-lookup"><span data-stu-id="1c622-158">Client application connection requests are automatically directed to the new active node using the same virtual network name (VNN).</span></span>  
  
 <span data-ttu-id="1c622-159">La FCI está en línea mientras el estado del quórum del clúster de WSFC subyacente sea bueno (la mayoría de los nodos de WSFC de quórum están disponibles como destinos de conmutación automática por error).</span><span class="sxs-lookup"><span data-stu-id="1c622-159">The FCI is online as long as its underlying WSFC cluster is in good quorum health (the majority of the quorum WSFC nodes are available as automatic failover targets).</span></span> <span data-ttu-id="1c622-160">Si el clúster de WSFC pierde su quórum, a causa de un error de hardware, de software o de red, o de una configuración de quórum incorrecta, todo el clúster de WSFC, junto con la FCI, se ponen en estado sin conexión.</span><span class="sxs-lookup"><span data-stu-id="1c622-160">When the WSFC cluster loses its quorum, whether due to hardware, software, network failure, or improper quorum configuration, the entire WSFC cluster, along with the FCI, is brought offline.</span></span> <span data-ttu-id="1c622-161">En este escenario de conmutación por error no planeada se requiere la intervención manual para restablecer el quórum en los nodos disponibles restantes con el fin de volver a poner en línea el clúster de WSFC y la FCI.</span><span class="sxs-lookup"><span data-stu-id="1c622-161">Manual intervention is then required in this unplanned failover scenario to reestablish quorum in the remaining available nodes in order to bring the WSFC cluster and FCI back online.</span></span> <span data-ttu-id="1c622-162">Para obtener más información, vea [modos de cuórum de WSFC y configuración de votación (; SQL Server);](wsfc-quorum-modes-and-voting-configuration-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="1c622-162">For more information, see [WSFC Quorum Modes and Voting Configuration (;SQL Server);](wsfc-quorum-modes-and-voting-configuration-sql-server.md).</span></span>  
  
### <a name="predictable-failover-time"></a><span data-ttu-id="1c622-163">Tiempo de conmutación por error previsible</span><span class="sxs-lookup"><span data-stu-id="1c622-163">Predictable Failover Time</span></span>  
 <span data-ttu-id="1c622-164">Dependiendo de cuándo la instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] haya realizado por última vez una operación de punto de comprobación, puede haber una cantidad considerable de páginas desfasadas en la memoria caché del búfer.</span><span class="sxs-lookup"><span data-stu-id="1c622-164">Depending on when your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance last performed a checkpoint operation, there can be a substantial amount of dirty pages in the buffer cache.</span></span> <span data-ttu-id="1c622-165">Por tanto, las conmutaciones por error duran el tiempo que lleve escribir las páginas desfasadas restantes en el disco, lo que puede dar lugar a un tiempo de conmutación por error prolongado e imprevisible.</span><span class="sxs-lookup"><span data-stu-id="1c622-165">Consequently, failovers last as long as it takes to write the remaining dirty pages to disk, which can lead to long and unpredictable failover time.</span></span> <span data-ttu-id="1c622-166">A partir de [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], la FCI puede usar puntos de comprobación indirectos para limitar la cantidad de páginas desfasadas que se mantienen en la memoria caché del búfer.</span><span class="sxs-lookup"><span data-stu-id="1c622-166">Beginning with [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], the FCI can use indirect checkpoints to throttle the amount of dirty pages kept in the buffer cache.</span></span> <span data-ttu-id="1c622-167">Cuando este proceso utiliza recursos adicionales en una carga de trabajo normal, el tiempo de conmutación por error se hace más fácil de predecir y de configurar.</span><span class="sxs-lookup"><span data-stu-id="1c622-167">While this does consume additional resources under regular workload, it makes the failover time more predictable as well as more configurable.</span></span> <span data-ttu-id="1c622-168">Esto es muy útil cuando el acuerdo de servicio en su organización especifica el objetivo de tiempo de recuperación (RTO) para su solución de alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="1c622-168">This is very useful when the service-level agreement in your organization specifies the recovery time objective (RTO) for your high availability solution.</span></span> <span data-ttu-id="1c622-169">Para obtener más información sobre puntos de comprobación indirectos, vea [Indirect Checkpoints](../../../relational-databases/logs/database-checkpoints-sql-server.md#IndirectChkpt).</span><span class="sxs-lookup"><span data-stu-id="1c622-169">For more information on indirect checkpoints, see [Indirect Checkpoints](../../../relational-databases/logs/database-checkpoints-sql-server.md#IndirectChkpt).</span></span>  
  
### <a name="reliable-health-monitoring-and-flexible-failover-policy"></a><span data-ttu-id="1c622-170">Supervisión de estado confiable y directiva de conmutación por error flexible</span><span class="sxs-lookup"><span data-stu-id="1c622-170">Reliable Health Monitoring and Flexible Failover Policy</span></span>  
 <span data-ttu-id="1c622-171">Después de que la FCI se inicie correctamente, el servicio de WSFC supervisa el estado del clúster de WSFC subyacente y el estado de la instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1c622-171">After the FCI starts successfully, the WSFC service monitors both the health of the underlying WSFC cluster, as well as the health of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="1c622-172">A partir de [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], el servicio de WSFC utiliza una conexión dedicada para sondear la instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] activa a efectos de diagnósticos de componentes detallados mediante un procedimiento almacenado del sistema.</span><span class="sxs-lookup"><span data-stu-id="1c622-172">Beginning with [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], the WSFC service uses a dedicated connection to poll the active [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance for detailed component diagnostics through a system stored procedure.</span></span> <span data-ttu-id="1c622-173">Esto tiene una triple implicación:</span><span class="sxs-lookup"><span data-stu-id="1c622-173">The implication of this is three-fold:</span></span>  
  
-   <span data-ttu-id="1c622-174">La conexión dedicada con la instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] permite un sondeo confiable a efectos de diagnósticos de componentes en todo momento, aunque la carga de la FCI sea elevada.</span><span class="sxs-lookup"><span data-stu-id="1c622-174">The dedicated connection to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance makes it possible to reliably poll for component diagnostics all the time, even when the FCI is under heavy load.</span></span> <span data-ttu-id="1c622-175">Esto permite distinguir entre un sistema sometido a una carga elevada y un sistema que tenga realmente condiciones de error, lo que evita problemas tales como conmutaciones por error falsas.</span><span class="sxs-lookup"><span data-stu-id="1c622-175">This makes it possible to distinguish between a system that is under heavy load and a system that actually has failure conditions, thus preventing issues such as false failovers.</span></span>  
  
-   <span data-ttu-id="1c622-176">Los diagnósticos de componentes detallados permiten configurar una directiva de conmutación por error más flexible, en la que se puede elegir qué condiciones de error activan las conmutaciones por error y cuáles no.</span><span class="sxs-lookup"><span data-stu-id="1c622-176">The detailed component diagnostics makes it possible to configure a more flexible failover policy, whereby you can choose what failure conditions trigger failovers and which failure conditions do not.</span></span>  
  
-   <span data-ttu-id="1c622-177">Los diagnósticos de componentes detallados también permiten una mejor solución de problemas de conmutaciones automáticas por error con carácter retroactivo.</span><span class="sxs-lookup"><span data-stu-id="1c622-177">The detailed component diagnostics also enables better troubleshooting of automatic failovers retroactively.</span></span> <span data-ttu-id="1c622-178">La información de diagnóstico se almacena los archivos de registro, que se colocan con los registros de errores de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1c622-178">The diagnostic information is stored to log files, which are collocated with the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] error logs.</span></span> <span data-ttu-id="1c622-179">Puede cargarlos en el Visor de archivos de registro para inspeccionar los estados de los componentes que dan lugar a la conmutación por error para determinar la causa de dicha conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="1c622-179">You can load them into the Log File Viewer to inspect the component states leading up to the failover occurrence in order to determine what cause that failover.</span></span>  
  
 <span data-ttu-id="1c622-180">Para obtener más información, vea [Directiva de conmutación por error para instancias de clúster de conmutación por error](failover-policy-for-failover-cluster-instances.md)</span><span class="sxs-lookup"><span data-stu-id="1c622-180">For more information, see [Failover Policy for Failover Cluster Instances](failover-policy-for-failover-cluster-instances.md)</span></span>  
  
##  <a name="elements-of-a-failover-cluster-instance"></a><a name="FCIelements"></a><span data-ttu-id="1c622-181">Elementos de una instancia de clúster de conmutación por error</span><span class="sxs-lookup"><span data-stu-id="1c622-181">Elements of a Failover Cluster Instance</span></span>  
 <span data-ttu-id="1c622-182">Una FCI consta de un conjunto de servidores físicos (nodos) que contienen una configuración de hardware similar y una configuración de software idéntica que incluye la versión y el nivel de revisión del sistema operativo, así como la versión, el nivel de revisión, los componentes y el nombre de instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1c622-182">An FCI consists of a set of physical servers (nodes) that contain similar hardware configuration as well as identical software configuration that includes operating system version and patch level, and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] version, patch level, components, and instance name.</span></span> <span data-ttu-id="1c622-183">Es necesaria una configuración de software idéntica para garantizar que la FCI pueda estar totalmente funcional cuando realice la conmutación por error entre los nodos.</span><span class="sxs-lookup"><span data-stu-id="1c622-183">Identical software configuration is necessary to ensure that the FCI can be fully functional as it fails over between the nodes.</span></span>  
  
 <span data-ttu-id="1c622-184">Grupo de recursos de WSFC</span><span class="sxs-lookup"><span data-stu-id="1c622-184">WSFC Resource Group</span></span>  
 <span data-ttu-id="1c622-185">Una FCI de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] se ejecuta en un grupo de recursos de WSFC.</span><span class="sxs-lookup"><span data-stu-id="1c622-185">A [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI runs in a WSFC resource group.</span></span> <span data-ttu-id="1c622-186">Cada nodo del grupo de recursos conserva una copia sincronizada de los valores de configuración y las claves del Registro con punto de comprobación para garantizar la funcionalidad total de la FCI después de una conmutación por error, y solo uno de los nodos del clúster pertenece al grupo de recursos cada vez (el nodo activo).</span><span class="sxs-lookup"><span data-stu-id="1c622-186">Each node in the resource group maintains a synchronized copy of the configuration settings and check-pointed registry keys to ensure full functionality of the FCI after a failover, and only one of the nodes in the cluster owns the resource group at a time (the active node).</span></span> <span data-ttu-id="1c622-187">El servicio de WSFC administra el clúster de servidores, la configuración de quórum, la directiva de conmutación por error y las operaciones de conmutación por error, así como el VNN y las direcciones IP virtuales para la FCI.</span><span class="sxs-lookup"><span data-stu-id="1c622-187">The WSFC service manages the server cluster, quorum configuration, failover policy, and failover operations, as well as the VNN and virtual IP addresses for the FCI.</span></span> <span data-ttu-id="1c622-188">En caso de que se produzca un error (errores de hardware, errores del sistema operativo o errores de aplicación o de servicio) o se realice una actualización planeada, la propiedad del grupo de recursos se mueve a otro nodo de la FCI. El número de nodos que se admiten en un grupo de recursos de WSFC depende de la edición de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1c622-188">In case of a failure (hardware failures, operating system failures, application or service failures) or a planned upgrade, the resource group ownership is moved to another node in the FCI.The number of nodes that are supported in a WSFC resource group depends on your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] edition.</span></span> <span data-ttu-id="1c622-189">Además, el mismo clúster de WSFC puede ejecutar varias FCI (varios grupos de recursos), dependiendo de la capacidad de hardware, como número de CPUs, memoria y número de discos.</span><span class="sxs-lookup"><span data-stu-id="1c622-189">Also, the same WSFC cluster can run multiple FCIs (multiple resource groups), depending on your hardware capacity, such as CPUs, memory, and number of disks.</span></span>  
  
 <span data-ttu-id="1c622-190">Binarios de SQL Server</span><span class="sxs-lookup"><span data-stu-id="1c622-190">SQL Server Binaries</span></span>  
 <span data-ttu-id="1c622-191">Los archivos binarios del producto se instalan localmente en cada nodo de la FCI; es un proceso similar a las instalaciones independientes de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1c622-191">The product binaries are installed locally on each node of the FCI, a process similar to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] stand-alone installations.</span></span> <span data-ttu-id="1c622-192">Sin embargo, durante el inicio, los servicios no se inician automáticamente sino que son administrados por WSFC.</span><span class="sxs-lookup"><span data-stu-id="1c622-192">However, during startup, the services are not started automatically, but managed by WSFC.</span></span>  
  
 <span data-ttu-id="1c622-193">Storage</span><span class="sxs-lookup"><span data-stu-id="1c622-193">Storage</span></span>  
 <span data-ttu-id="1c622-194">Al contrario que en el grupo de disponibilidad AlwaysOn, una FCI debe usar el almacenamiento compartido entre todos los nodos de la FCI para el almacenamiento de la base de datos y del registro.</span><span class="sxs-lookup"><span data-stu-id="1c622-194">Contrary to the Always On availability group, an FCI must use shared storage between all nodes of the FCI for database and log storage.</span></span> <span data-ttu-id="1c622-195">El almacenamiento compartido puede realizarse en forma de discos de clúster de WSFC, discos de una SAN o recursos compartidos de archivos en SMB.</span><span class="sxs-lookup"><span data-stu-id="1c622-195">The shared storage can be in the form of WSFC cluster disks, disks on a SAN, or file shares on an SMB.</span></span> <span data-ttu-id="1c622-196">De esta manera, todos los nodos de la FCI tienen la misma vista de datos de instancia cada vez que se produce una conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="1c622-196">This way, all nodes in the FCI have the same view of instance data whenever a failover occurs.</span></span> <span data-ttu-id="1c622-197">Sin embargo, esto significa que el almacenamiento compartido tiene la posibilidad de ser el punto de error único y la FCI depende de la solución de almacenamiento subyacente para garantizar la protección de datos.</span><span class="sxs-lookup"><span data-stu-id="1c622-197">This does mean, however, that the shared storage has the potential of being the single point of failure, and FCI depends on the underlying storage solution to ensure data protection.</span></span>  
  
 <span data-ttu-id="1c622-198">Nombre de red</span><span class="sxs-lookup"><span data-stu-id="1c622-198">Network Name</span></span>  
 <span data-ttu-id="1c622-199">La VNN para la FCI proporciona un punto de conexión unificado para la FCI.</span><span class="sxs-lookup"><span data-stu-id="1c622-199">The VNN for the FCI provides a unified connection point for the FCI.</span></span> <span data-ttu-id="1c622-200">Esto permite que las aplicaciones se conecten a la VNN sin necesidad de conocer el nodo actualmente activo.</span><span class="sxs-lookup"><span data-stu-id="1c622-200">This allows applications to connect to the VNN without the need to know the currently active node.</span></span> <span data-ttu-id="1c622-201">Cuando se produce una conmutación por error, la VNN se registra en el nuevo nodo activo después de iniciarse.</span><span class="sxs-lookup"><span data-stu-id="1c622-201">When a failover occurs, the VNN is registered to the new active node after it starts.</span></span> <span data-ttu-id="1c622-202">Este proceso es transparente para el cliente o aplicación que se conecta a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] y minimiza el tiempo de inactividad que la aplicación o los clientes experimentan durante un error.</span><span class="sxs-lookup"><span data-stu-id="1c622-202">This process is transparent to the client or application connecting to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and this minimize the downtime the application or clients experience during a failure.</span></span>  
  
 <span data-ttu-id="1c622-203">Direcciones IP virtuales</span><span class="sxs-lookup"><span data-stu-id="1c622-203">Virtual IPs</span></span>  
 <span data-ttu-id="1c622-204">En el caso de una FCI de múltiples subredes, se asigna una dirección IP virtual a cada subred de la FCI.</span><span class="sxs-lookup"><span data-stu-id="1c622-204">In the case of a multi-subnet FCI, a virtual IP address is assigned to each subnet in the FCI.</span></span> <span data-ttu-id="1c622-205">Durante una conmutación por error, la VNN en el servidor DNS se actualiza para señalar a la dirección IP virtual correspondiente a la subred respectiva.</span><span class="sxs-lookup"><span data-stu-id="1c622-205">During a failover, the VNN on the DNS server is updated to point to the virtual IP address for the respective subnet.</span></span> <span data-ttu-id="1c622-206">Las aplicaciones y los clientes pueden conectarse entonces a la FCI utilizando la misma VNN después de una conmutación por error de múltiples subredes.</span><span class="sxs-lookup"><span data-stu-id="1c622-206">Applications and clients can then connect to the FCI using the same VNN after a multi-subnet failover.</span></span>  
  
##  <a name="sql-server-failover-concepts-and-tasks"></a><a name="ConceptsAndTasks"></a> <span data-ttu-id="1c622-207">Conceptos y tareas de conmutación por error de SQL Server</span><span class="sxs-lookup"><span data-stu-id="1c622-207">SQL Server Failover Concepts and Tasks</span></span>  
  
|<span data-ttu-id="1c622-208">Conceptos y tareas</span><span class="sxs-lookup"><span data-stu-id="1c622-208">Concepts and Tasks</span></span>|<span data-ttu-id="1c622-209">Tema</span><span class="sxs-lookup"><span data-stu-id="1c622-209">Topic</span></span>|  
|------------------------|-----------|  
|<span data-ttu-id="1c622-210">Describe el mecanismo de detección de errores y la directiva de conmutación por error flexible.</span><span class="sxs-lookup"><span data-stu-id="1c622-210">Describes the failure detection mechanism and the flexible failover policy.</span></span>|[<span data-ttu-id="1c622-211">Failover Policy for Failover Cluster Instances</span><span class="sxs-lookup"><span data-stu-id="1c622-211">Failover Policy for Failover Cluster Instances</span></span>](failover-policy-for-failover-cluster-instances.md)|  
|<span data-ttu-id="1c622-212">Describe los conceptos de la administración y el mantenimiento de la FCI.</span><span class="sxs-lookup"><span data-stu-id="1c622-212">Describes concepts in FCI administration and maintenance.</span></span>|[<span data-ttu-id="1c622-213">Administración y mantenimiento de la instancia de clúster de conmutación por error</span><span class="sxs-lookup"><span data-stu-id="1c622-213">Failover Cluster Instance Administration and Maintenance</span></span>](failover-cluster-instance-administration-and-maintenance.md)|  
|<span data-ttu-id="1c622-214">Describe la configuración y conceptos de varias subredes</span><span class="sxs-lookup"><span data-stu-id="1c622-214">Describes multi-subnet configuration and concepts</span></span>|[<span data-ttu-id="1c622-215">SQL Server agrupación en clústeres de varias subredes (; SQL Server);</span><span class="sxs-lookup"><span data-stu-id="1c622-215">SQL Server Multi-Subnet Clustering (;SQL Server);</span></span>](sql-server-multi-subnet-clustering-sql-server.md)|  
  
##  <a name="related-topics"></a><a name="RelatedTopics"></a><span data-ttu-id="1c622-216">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="1c622-216">Related Topics</span></span>  
  
|<span data-ttu-id="1c622-217">**Descripciones del tema**</span><span class="sxs-lookup"><span data-stu-id="1c622-217">**Topic descriptions**</span></span>|<span data-ttu-id="1c622-218">**Tema.**</span><span class="sxs-lookup"><span data-stu-id="1c622-218">**Topic**</span></span>|  
|----------------------------|---------------|  
|<span data-ttu-id="1c622-219">Describe cómo instalar una nueva FCI de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1c622-219">Describes how to install a new [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI.</span></span>|[<span data-ttu-id="1c622-220">Cree un nuevo clúster de conmutación por error de SQL Server (; Instalación);</span><span class="sxs-lookup"><span data-stu-id="1c622-220">Create a New SQL Server Failover Cluster (;Setup);</span></span>](../install/create-a-new-sql-server-failover-cluster-setup.md)|  
|<span data-ttu-id="1c622-221">Describe cómo actualizarse a un clúster de conmutación por error de [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1c622-221">Describes how to upgrade to a [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] failover cluster.</span></span>|[<span data-ttu-id="1c622-222">Actualizar un clúster de conmutación por error de SQL Server</span><span class="sxs-lookup"><span data-stu-id="1c622-222">Upgrade a SQL Server Failover Cluster</span></span>](upgrade-a-sql-server-failover-cluster-instance.md)|  
|<span data-ttu-id="1c622-223">Describe los conceptos de clúster de conmutación por error de Windows y proporciona vínculos a las tareas relacionadas con el clúster de conmutación por error de Windows</span><span class="sxs-lookup"><span data-stu-id="1c622-223">Describes Windows Failover Clustering Concepts and provides links to tasks related to Windows Failover Clustering</span></span>|[!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)]<span data-ttu-id="1c622-224">: [Información general de los clústeres de conmutación por error](https://go.microsoft.com/fwlink/?LinkId=177878)</span><span class="sxs-lookup"><span data-stu-id="1c622-224">: [Overview of Failover Clusters](https://go.microsoft.com/fwlink/?LinkId=177878)</span></span><br /><br /> [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)] <span data-ttu-id="1c622-225">R2: [Información general de los clústeres de conmutación por error](https://go.microsoft.com/fwlink/?LinkId=177879)</span><span class="sxs-lookup"><span data-stu-id="1c622-225">R2: [Overview of Failover Clusters](https://go.microsoft.com/fwlink/?LinkId=177879)</span></span>|  
|<span data-ttu-id="1c622-226">Describe las distinciones de conceptos entre nodos de una FCI y réplicas de un grupo de disponibilidad y las consideraciones para utilizar una FCI de modo que hospede una réplica para un grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="1c622-226">Describes the distinctions in concepts between nodes in an FCI and replicas within an availability group and considerations for using an FCI to host a replica for an availability group.</span></span>|[<span data-ttu-id="1c622-227">Clústeres de conmutación por error y grupos de disponibilidad AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="1c622-227">Failover Clustering and Always On Availability Groups (SQL Server)</span></span>](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md)|  
  
  
