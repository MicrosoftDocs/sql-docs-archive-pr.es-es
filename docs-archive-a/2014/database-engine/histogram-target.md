---
title: Destino de histograma | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- bucketing target [SQL Server extended events]
- event bucketing target
- targets [SQL Server extended events], bucketing
ms.assetid: 2ea39141-7eb0-4c74-abf8-114c2c106a19
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: acb124ef949849561a6bca0ba4016b40c1343384
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87745963"
---
# <a name="histogram-target"></a><span data-ttu-id="75d64-102">Destino del histograma</span><span class="sxs-lookup"><span data-stu-id="75d64-102">Histogram Target</span></span>
  <span data-ttu-id="75d64-103">El destino del histograma agrupa las generaciones de un tipo de evento concreto en datos del evento.</span><span class="sxs-lookup"><span data-stu-id="75d64-103">The histogram target groups occurrences of a specific event type based on event data.</span></span> <span data-ttu-id="75d64-104">El recuento de las agrupaciones de eventos se realiza tomando como base una acción o columna de evento especificada.</span><span class="sxs-lookup"><span data-stu-id="75d64-104">The groupings of events are counted based on a specified event column or action.</span></span> <span data-ttu-id="75d64-105">Puede utilizar el destino del histograma para solucionar problemas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="75d64-105">You can use the histogram target to troubleshoot performance issues.</span></span> <span data-ttu-id="75d64-106">Mediante la identificación de los eventos que se producen con más frecuencia, puede buscar "zonas activas" que indiquen la causa posible de un problema de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="75d64-106">By identifying which events are occurring most frequently, you can find "hotspots" that indicate a potential cause of a performance problem.</span></span>  
  
 <span data-ttu-id="75d64-107">En la tabla siguiente se describen las opciones que se pueden utilizar para configurar el destino del histograma.</span><span class="sxs-lookup"><span data-stu-id="75d64-107">The following table describes the options that can be used to configure the histogram target.</span></span>  
  
|<span data-ttu-id="75d64-108">Opción</span><span class="sxs-lookup"><span data-stu-id="75d64-108">Option</span></span>|<span data-ttu-id="75d64-109">Valores permitidos</span><span class="sxs-lookup"><span data-stu-id="75d64-109">Allowed values</span></span>|<span data-ttu-id="75d64-110">Descripción</span><span class="sxs-lookup"><span data-stu-id="75d64-110">Description</span></span>|  
|------------|--------------------|-----------------|  
|<span data-ttu-id="75d64-111">slots</span><span class="sxs-lookup"><span data-stu-id="75d64-111">slots</span></span>|<span data-ttu-id="75d64-112">Un valor entero.</span><span class="sxs-lookup"><span data-stu-id="75d64-112">Any integer value.</span></span> <span data-ttu-id="75d64-113">Este valor es opcional.</span><span class="sxs-lookup"><span data-stu-id="75d64-113">This value is optional.</span></span>|<span data-ttu-id="75d64-114">Un valor especificado por el usuario que indica el número máximo de agrupaciones que se van a conservar.</span><span class="sxs-lookup"><span data-stu-id="75d64-114">A user-specified value indicating the maximum number of groupings to retain.</span></span> <span data-ttu-id="75d64-115">Cuando se alcanza este valor, se omiten los nuevos eventos que no pertenecen a los grupos existentes.</span><span class="sxs-lookup"><span data-stu-id="75d64-115">When this value is reached, new events that do not belong to the existing groups are ignored.</span></span><br /><br /> <span data-ttu-id="75d64-116">Tenga en cuenta que, para mejorar el rendimiento, el número de zona se redondea a la siguiente potencia de 2.</span><span class="sxs-lookup"><span data-stu-id="75d64-116">Note that to improve performance, the slot number is rounded up to the next power of 2.</span></span>|  
|<span data-ttu-id="75d64-117">filtering_event_name</span><span class="sxs-lookup"><span data-stu-id="75d64-117">filtering_event_name</span></span>|<span data-ttu-id="75d64-118">Cualquier evento presente en la sesión de eventos extendidos.</span><span class="sxs-lookup"><span data-stu-id="75d64-118">Any event present in the Extended Events session.</span></span> <span data-ttu-id="75d64-119">Este valor es opcional.</span><span class="sxs-lookup"><span data-stu-id="75d64-119">This value is optional.</span></span>|<span data-ttu-id="75d64-120">Un valor especificado por el usuario que se utiliza para identificar una clase de eventos.</span><span class="sxs-lookup"><span data-stu-id="75d64-120">A user-specified value that is used to identify a class of events.</span></span> <span data-ttu-id="75d64-121">Solamente se crean depósitos de las instancias del evento especificado.</span><span class="sxs-lookup"><span data-stu-id="75d64-121">Only instances of the specified event are bucketed.</span></span> <span data-ttu-id="75d64-122">Todos los demás eventos se omiten.</span><span class="sxs-lookup"><span data-stu-id="75d64-122">All other events are ignored.</span></span><br /><br /> <span data-ttu-id="75d64-123">Si especifica este valor, debe usar el formato: *package_name*.*event_name*, por ejemplo `'sqlserver.checkpoint_end'`.</span><span class="sxs-lookup"><span data-stu-id="75d64-123">If you specify this value, you must use the format: *package_name*.*event_name*, for example `'sqlserver.checkpoint_end'`.</span></span> <span data-ttu-id="75d64-124">Puede identificar el nombre del paquete utilizando la consulta siguiente:</span><span class="sxs-lookup"><span data-stu-id="75d64-124">You can identify the package name by using the following query:</span></span><br /><br /> <span data-ttu-id="75d64-125">Seleccione p.name, se event_name</span><span class="sxs-lookup"><span data-stu-id="75d64-125">SELECT p.name, se.event_name</span></span><br /><span data-ttu-id="75d64-126">DESDE sys. dm_xe_session_events se</span><span class="sxs-lookup"><span data-stu-id="75d64-126">FROM sys.dm_xe_session_events se</span></span><br /><span data-ttu-id="75d64-127">JOIN sys. dm_xe_packages p</span><span class="sxs-lookup"><span data-stu-id="75d64-127">JOIN sys.dm_xe_packages p</span></span><br /><span data-ttu-id="75d64-128">EN se_event_package_guid = p. GUID</span><span class="sxs-lookup"><span data-stu-id="75d64-128">ON se_event_package_guid = p.guid</span></span><br /><span data-ttu-id="75d64-129">ORDER BY p.name, se event_name</span><span class="sxs-lookup"><span data-stu-id="75d64-129">ORDER BY p.name, se.event_name</span></span><br /><br /> <br /><br /> <span data-ttu-id="75d64-130">Si no especifica el valor filtering_event_name, source_type se debe establecer en 1 (valor predeterminado).</span><span class="sxs-lookup"><span data-stu-id="75d64-130">If you do not specify the filtering_event_name value, source_type must be set to 1 (the default).</span></span>|  
|<span data-ttu-id="75d64-131">source_type</span><span class="sxs-lookup"><span data-stu-id="75d64-131">source_type</span></span>|<span data-ttu-id="75d64-132">El tipo de objeto en el que se basa el depósito.</span><span class="sxs-lookup"><span data-stu-id="75d64-132">The type of object that the bucket is based on.</span></span> <span data-ttu-id="75d64-133">Este valor es opcional y si no se especifica, tiene un valor predeterminado de 1.</span><span class="sxs-lookup"><span data-stu-id="75d64-133">This value is optional and if not specified has a default value of 1.</span></span>|<span data-ttu-id="75d64-134">Puede tener uno de los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="75d64-134">Can have one of the following values:</span></span><br /><br /> <span data-ttu-id="75d64-135">0 para un evento</span><span class="sxs-lookup"><span data-stu-id="75d64-135">0 for an event</span></span><br /><br /> <span data-ttu-id="75d64-136">1 para una acción</span><span class="sxs-lookup"><span data-stu-id="75d64-136">1 for an action</span></span>|  
|<span data-ttu-id="75d64-137">source</span><span class="sxs-lookup"><span data-stu-id="75d64-137">source</span></span>|<span data-ttu-id="75d64-138">Columna de evento o nombre de acción.</span><span class="sxs-lookup"><span data-stu-id="75d64-138">Event column or action name.</span></span>|<span data-ttu-id="75d64-139">Columna de evento o nombre de acción que se usan como origen de datos.</span><span class="sxs-lookup"><span data-stu-id="75d64-139">The event column or action name that is used as the data source.</span></span><br /><br /> <span data-ttu-id="75d64-140">Al especificar una columna de evento para el origen, debe especificar una columna del evento que se utiliza para el valor filtering_event_name.</span><span class="sxs-lookup"><span data-stu-id="75d64-140">When you specify an event column for source, you must specify a column from the event that is used for the filtering_event_name value.</span></span> <span data-ttu-id="75d64-141">Puede identificar las columnas posibles utilizando la siguiente consulta:</span><span class="sxs-lookup"><span data-stu-id="75d64-141">You can identify the potential columns by using the following query:</span></span><br /><br /> <span data-ttu-id="75d64-142">Seleccione nombre en sys. dm_xe_object_columns</span><span class="sxs-lookup"><span data-stu-id="75d64-142">SELECT name FROM sys.dm_xe_object_columns</span></span><br /><span data-ttu-id="75d64-143">WHERE object_name = ' \<eventname> '</span><span class="sxs-lookup"><span data-stu-id="75d64-143">WHERE object_name = '\<eventname>'</span></span><br /><span data-ttu-id="75d64-144">Y column_type! = ' readonly '</span><span class="sxs-lookup"><span data-stu-id="75d64-144">AND column_type != 'readonly'</span></span><br /><br /> <span data-ttu-id="75d64-145">Al especificar una columna de evento para el origen, no tiene que incluir el nombre del paquete en el valor de origen.</span><span class="sxs-lookup"><span data-stu-id="75d64-145">When you specify an event column for source, you do not have to include the package name in the source value.</span></span><br /><br /> <span data-ttu-id="75d64-146">Al especificar un nombre de acción para el origen, debe utilizar una de las acciones que se configuran para la recopilación en la sesión de eventos para la que se utiliza este destino.</span><span class="sxs-lookup"><span data-stu-id="75d64-146">When you specify an action name for source, you must use one of the actions that is configured for collection in the event session for which this target is being used.</span></span> <span data-ttu-id="75d64-147">Para buscar posibles valores para el nombre de acción, puede consultar la columna de action_name de la vista sys.dm_xe_sesssion_event_actions.</span><span class="sxs-lookup"><span data-stu-id="75d64-147">To find potential values for the action name, you can query the action_name column of the sys.dm_xe_sesssion_event_actions view.</span></span><br /><br /> <span data-ttu-id="75d64-148">Si usa un nombre de acción como origen de datos, debe especificar el valor de origen mediante el formato: *package_name*.*action_name*.</span><span class="sxs-lookup"><span data-stu-id="75d64-148">If you are using an action name as the data source, you must specify the source value by using the format: *package_name*.*action_name*.</span></span>|  
  
 <span data-ttu-id="75d64-149">En el ejemplo siguiente se muestra a un alto nivel cómo el destino del histograma recopila datos.</span><span class="sxs-lookup"><span data-stu-id="75d64-149">The following example illustrates at a high level how the histogram target collects data.</span></span> <span data-ttu-id="75d64-150">En este ejemplo, desea utilizar el destino del histograma para realizar un recuento del número de esperas de cada tipo de espera que se han producido.</span><span class="sxs-lookup"><span data-stu-id="75d64-150">In this example, you want to use the histogram target to count how many waits of each wait type occurred.</span></span> <span data-ttu-id="75d64-151">Para ello, debe especificar las opciones siguientes al definir el destino del histograma:</span><span class="sxs-lookup"><span data-stu-id="75d64-151">To do this, you would specify the following options when you define the histogram target:</span></span>  
  
-   <span data-ttu-id="75d64-152">filtering_event_name = 'wait_info'</span><span class="sxs-lookup"><span data-stu-id="75d64-152">filtering_event_name = 'wait_info'</span></span>  
  
-   <span data-ttu-id="75d64-153">source = 'wait_type'</span><span class="sxs-lookup"><span data-stu-id="75d64-153">source = 'wait_type'</span></span>  
  
-   <span data-ttu-id="75d64-154">source_type = 0 (dado que wait_type es una columna de evento)</span><span class="sxs-lookup"><span data-stu-id="75d64-154">source_type = 0 (because wait_type is an event column)</span></span>  
  
 <span data-ttu-id="75d64-155">En el escenario del ejemplo, se registran los datos siguientes para el origen wait_type.</span><span class="sxs-lookup"><span data-stu-id="75d64-155">In the example scenario, the following data is recorded for the wait_type source.</span></span>  
  
|<span data-ttu-id="75d64-156">Nombre de evento de filtrado</span><span class="sxs-lookup"><span data-stu-id="75d64-156">Filtering event name</span></span>|<span data-ttu-id="75d64-157">Valor de columna de origen</span><span class="sxs-lookup"><span data-stu-id="75d64-157">Source column value</span></span>|  
|--------------------------|-------------------------|  
|<span data-ttu-id="75d64-158">wait_info</span><span class="sxs-lookup"><span data-stu-id="75d64-158">wait_info</span></span>|<span data-ttu-id="75d64-159">file_io</span><span class="sxs-lookup"><span data-stu-id="75d64-159">file_io</span></span>|  
|<span data-ttu-id="75d64-160">wait_info</span><span class="sxs-lookup"><span data-stu-id="75d64-160">wait_info</span></span>|<span data-ttu-id="75d64-161">file_io</span><span class="sxs-lookup"><span data-stu-id="75d64-161">file_io</span></span>|  
|<span data-ttu-id="75d64-162">wait_info</span><span class="sxs-lookup"><span data-stu-id="75d64-162">wait_info</span></span>|<span data-ttu-id="75d64-163">red</span><span class="sxs-lookup"><span data-stu-id="75d64-163">network</span></span>|  
|<span data-ttu-id="75d64-164">wait_info</span><span class="sxs-lookup"><span data-stu-id="75d64-164">wait_info</span></span>|<span data-ttu-id="75d64-165">red</span><span class="sxs-lookup"><span data-stu-id="75d64-165">network</span></span>|  
|<span data-ttu-id="75d64-166">wait_info</span><span class="sxs-lookup"><span data-stu-id="75d64-166">wait_info</span></span>|<span data-ttu-id="75d64-167">en reposo</span><span class="sxs-lookup"><span data-stu-id="75d64-167">sleep</span></span>|  
  
 <span data-ttu-id="75d64-168">Los valores de tipo de espera se clasificarían en tres ranuras, con los valores y recuentos de ranura siguientes:</span><span class="sxs-lookup"><span data-stu-id="75d64-168">The wait type values would be categorized into three slots, with the following values and slot counts:</span></span>  
  
|<span data-ttu-id="75d64-169">Value</span><span class="sxs-lookup"><span data-stu-id="75d64-169">Value</span></span>|<span data-ttu-id="75d64-170">Recuento de ranura</span><span class="sxs-lookup"><span data-stu-id="75d64-170">Slot count</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="75d64-171">file_io</span><span class="sxs-lookup"><span data-stu-id="75d64-171">file_io</span></span>|<span data-ttu-id="75d64-172">2</span><span class="sxs-lookup"><span data-stu-id="75d64-172">2</span></span>|  
|<span data-ttu-id="75d64-173">red</span><span class="sxs-lookup"><span data-stu-id="75d64-173">network</span></span>|<span data-ttu-id="75d64-174">2</span><span class="sxs-lookup"><span data-stu-id="75d64-174">2</span></span>|  
|<span data-ttu-id="75d64-175">en reposo</span><span class="sxs-lookup"><span data-stu-id="75d64-175">sleep</span></span>|<span data-ttu-id="75d64-176">1</span><span class="sxs-lookup"><span data-stu-id="75d64-176">1</span></span>|  
  
 <span data-ttu-id="75d64-177">El destino del histograma solo conserva los datos del evento correspondientes al origen especificado.</span><span class="sxs-lookup"><span data-stu-id="75d64-177">The histogram target only retains event data for the specified source.</span></span> <span data-ttu-id="75d64-178">En algunos casos, es posible que los datos del evento sean demasiado grandes para conservarlos al completo, en cuyo caso se truncan los datos.</span><span class="sxs-lookup"><span data-stu-id="75d64-178">In some cases the event data may be too large to retain completely, in which case the data is truncated.</span></span> <span data-ttu-id="75d64-179">Cuando se truncan los datos de eventos, el número de bytes se graba y se muestra como una salida XML.</span><span class="sxs-lookup"><span data-stu-id="75d64-179">When event data is truncated, the number of bytes is recorded and displayed as XML output.</span></span>  
  
## <a name="adding-the-target-to-a-session"></a><span data-ttu-id="75d64-180">Agregar el destino a una sesión</span><span class="sxs-lookup"><span data-stu-id="75d64-180">Adding the Target to a Session</span></span>  
 <span data-ttu-id="75d64-181">Para agregar el destino del histograma a una sesión de Extended Events, se debe incluir cualquiera de las instrucciones siguientes al crear o modificar una sesión de eventos, dependiendo del tipo de destino deseado:</span><span class="sxs-lookup"><span data-stu-id="75d64-181">To add the histogram target to an Extended Events session, you must include either of the following statements when you create or alter an event session, depending on the desired target type:</span></span>  
  
```  
ADD TARGET package0.histogram  
```  
  
 <span data-ttu-id="75d64-182">Puede utilizar la instrucción SET para establecer las diversas opciones.</span><span class="sxs-lookup"><span data-stu-id="75d64-182">You can use the SET statement to set the various options.</span></span> <span data-ttu-id="75d64-183">En el ejemplo siguiente se muestra la adición del destino de histograma, donde se recopilan los datos del evento sqlserver.checkpoint_end.</span><span class="sxs-lookup"><span data-stu-id="75d64-183">The following example shows the addition of the histogram target, where data for the sqlserver.checkpoint_end event is collected.</span></span>  
  
```  
ADD TARGET package0.histogram  
(SET slots = 32, filtering_event_name = 'sqlserver.checkpoint_end', source_type = 0, source = 'database_id')  
```  
  
 <span data-ttu-id="75d64-184">Para obtener más información, vea [Buscar los objetos que han obtenido más bloqueos](../relational-databases/extended-events/find-the-objects-that-have-the-most-locks-taken-on-them.md)y [Supervisar la actividad del sistema mediante eventos extendidos](../relational-databases/extended-events/monitor-system-activity-using-extended-events.md).</span><span class="sxs-lookup"><span data-stu-id="75d64-184">For more information, see [Find the Objects That Have the Most Locks Taken on Them](../relational-databases/extended-events/find-the-objects-that-have-the-most-locks-taken-on-them.md), and [Monitor System Activity Using Extended Events](../relational-databases/extended-events/monitor-system-activity-using-extended-events.md).</span></span>  
  
## <a name="reviewing-the-target-output"></a><span data-ttu-id="75d64-185">Revisar la salida del destino</span><span class="sxs-lookup"><span data-stu-id="75d64-185">Reviewing the Target Output</span></span>  
 <span data-ttu-id="75d64-186">El destino del histograma serializa los datos a un procedimiento o programa que realiza la llamada en formato XML.</span><span class="sxs-lookup"><span data-stu-id="75d64-186">The histogram target serializes data to a calling program or procedure in XML format.</span></span> <span data-ttu-id="75d64-187">La salida de destino no sigue ningún esquema.</span><span class="sxs-lookup"><span data-stu-id="75d64-187">The target output does not conform to any schema.</span></span>  
  
 <span data-ttu-id="75d64-188">Para revisar la salida del destino de histograma, puede usar la siguiente consulta, reemplazando *session_name* por el nombre de la sesión de eventos.</span><span class="sxs-lookup"><span data-stu-id="75d64-188">To review the output from the histogram target, you can use the following query, replacing *session_name* with the name of the event session.</span></span>  
  
```  
SELECT name, target_name, CAST(xet.target_data AS xml)  
FROM sys.dm_xe_session_targets AS xet  
JOIN sys.dm_xe_sessions AS xe  
   ON (xe.address = xet.event_session_address)  
WHERE xe.name = 'session_name'  
```  
  
 <span data-ttu-id="75d64-189">En el ejemplo siguiente se muestra el formato de salida del destino del histograma.</span><span class="sxs-lookup"><span data-stu-id="75d64-189">The following example illustrates histogram target output format.</span></span>  
  
```  
<Slots truncated = "0" buckets=[count]>  
    <Slot count=[count] trunc=[truncated bytes]>  
        <value>  
        </value>  
    </Slot>  
</Slots>  
```  
  
## <a name="see-also"></a><span data-ttu-id="75d64-190">Consulte también</span><span class="sxs-lookup"><span data-stu-id="75d64-190">See Also</span></span>  
 <span data-ttu-id="75d64-191">[Destinos de SQL Server Extended Events](../../2014/database-engine/sql-server-extended-events-targets.md) </span><span class="sxs-lookup"><span data-stu-id="75d64-191">[SQL Server Extended Events Targets](../../2014/database-engine/sql-server-extended-events-targets.md) </span></span>  
 <span data-ttu-id="75d64-192">[sys.dm_xe_session_targets &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-xe-session-targets-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="75d64-192">[sys.dm_xe_session_targets &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-xe-session-targets-transact-sql) </span></span>  
 <span data-ttu-id="75d64-193">[CREATE EVENT SESSION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-event-session-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="75d64-193">[CREATE EVENT SESSION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-event-session-transact-sql) </span></span>  
 [<span data-ttu-id="75d64-194">ALTER EVENT SESSION &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="75d64-194">ALTER EVENT SESSION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-event-session-transact-sql)  
  
  
