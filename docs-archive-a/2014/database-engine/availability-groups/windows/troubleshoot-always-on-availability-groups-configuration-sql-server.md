---
title: Solucionar problemas de configuración de Grupos de disponibilidad AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 01/31/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- troubleshooting [SQL Server], deploying
- Availability Groups [SQL Server], troubleshooting
- Availability Groups [SQL Server], configuring
ms.assetid: 8c222f98-7392-4faf-b7ad-5fb60ffa237e
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 165036ba539c3392b1944282bd9d6126eb471a97
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87750178"
---
# <a name="troubleshoot-alwayson-availability-groups-configuration-sql-server"></a><span data-ttu-id="85184-102">Solucionar problemas de configuración de grupos de disponibilidad AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="85184-102">Troubleshoot AlwaysOn Availability Groups Configuration (SQL Server)</span></span>
  <span data-ttu-id="85184-103">En este tema se proporciona información para ayudarle a solucionar los problemas más habituales relacionados con la configuración de las instancias de servidor para [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="85184-103">This topic provides information to help you troubleshoot typical problems with configuring server instances for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="85184-104">Entre los problemas de configuración más habituales se incluyen los siguientes: [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] está deshabilitado, las cuentas no están configuradas correctamente, el extremo de creación de reflejo de la base de datos no existe, el extremo no es accesible (error 1418 de SQL Server), el acceso de red no existe y un comando de unión genera el error 35250 de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="85184-104">Typical configuration problems include [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is disabled, accounts are incorrectly configured, the database mirroring endpoint does not exist, the endpoint is inaccessible (SQL Server Error 1418), network access does not exist, and a join database command fails (SQL Server Error 35250).</span></span>

> [!NOTE]
>  <span data-ttu-id="85184-105">Asegúrese de que cumple los requisitos previos de [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="85184-105">Ensure that you are meeting the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] prerequisites.</span></span> <span data-ttu-id="85184-106">Para más información, vea [Requisitos previos, restricciones y recomendaciones para grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span><span class="sxs-lookup"><span data-stu-id="85184-106">For more information, see [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span></span>

 <span data-ttu-id="85184-107">**En este tema:**</span><span class="sxs-lookup"><span data-stu-id="85184-107">**In This Topic:**</span></span>

|<span data-ttu-id="85184-108">Sección</span><span class="sxs-lookup"><span data-stu-id="85184-108">Section</span></span>|<span data-ttu-id="85184-109">Descripción</span><span class="sxs-lookup"><span data-stu-id="85184-109">Description</span></span>|
|-------------|-----------------|
|[<span data-ttu-id="85184-110">Los grupos de disponibilidad AlwaysOn no están habilitados</span><span class="sxs-lookup"><span data-stu-id="85184-110">AlwaysOn Availability Groups Is Not Enabled</span></span>](#IsHadrEnabled)|<span data-ttu-id="85184-111">Si una instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] no está habilitada para [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], la instancia no admite la creación de grupos de disponibilidad y no puede hospedar réplicas de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="85184-111">If an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is not enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], the instance does not support availability group creation and cannot host any availability replicas.</span></span>|
|[<span data-ttu-id="85184-112">Cuentas</span><span class="sxs-lookup"><span data-stu-id="85184-112">Accounts</span></span>](#Accounts)|<span data-ttu-id="85184-113">Analiza los requisitos para configurar correctamente las cuentas en que se ejecuta [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="85184-113">Discusses requirements for correctly configuring the accounts under which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is running.</span></span>|
|[<span data-ttu-id="85184-114">Extremos</span><span class="sxs-lookup"><span data-stu-id="85184-114">Endpoints</span></span>](#Endpoints)|<span data-ttu-id="85184-115">Analiza cómo diagnosticar problemas relativos al extremo de creación de reflejo de la base de datos de una instancia de servidor.</span><span class="sxs-lookup"><span data-stu-id="85184-115">Discusses how to diagnose issues with the database mirroring endpoint of a server instance.</span></span>|
|[<span data-ttu-id="85184-116">Nombre del sistema</span><span class="sxs-lookup"><span data-stu-id="85184-116">System name</span></span>](#SystemName)|<span data-ttu-id="85184-117">Resume las alternativas para especificar el nombre del sistema de una instancia de servidor en una dirección URL del extremo.</span><span class="sxs-lookup"><span data-stu-id="85184-117">Summarizes the alternatives for specifying the system name of a server instance in an endpoint URL.</span></span>|
|[<span data-ttu-id="85184-118">Acceso de red</span><span class="sxs-lookup"><span data-stu-id="85184-118">Network access</span></span>](#NetworkAccess)|<span data-ttu-id="85184-119">Documenta el requisito de que cada instancia de servidor que hospeda una réplica de disponibilidad debe tener acceso al puerto de cada una de las demás instancias de servidor en TCP.</span><span class="sxs-lookup"><span data-stu-id="85184-119">Documents the requirement that each server instance that is hosting an availability replica must be able to access the port of each of the other server instances over TCP.</span></span>|
|[<span data-ttu-id="85184-120">Acceso al extremo (error 1418 de SQL Server)</span><span class="sxs-lookup"><span data-stu-id="85184-120">Endpoint Access (SQL Server Error 1418)</span></span>](#Msg1418)|<span data-ttu-id="85184-121">Contiene información sobre este mensaje de error de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="85184-121">Contains information about this [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] error message.</span></span>|
|[<span data-ttu-id="85184-122">Error de unión de la base de datos (error 35250 de SQL Server)</span><span class="sxs-lookup"><span data-stu-id="85184-122">Join Database Fails (SQL Server Error 35250)</span></span>](#JoinDbFails)|<span data-ttu-id="85184-123">Analiza las posibles causas y la resolución de un error al unir las bases de datos secundarias a un grupo de disponibilidad porque la conexión a la réplica principal no está activa.</span><span class="sxs-lookup"><span data-stu-id="85184-123">Discusses the possible causes and resolution of a failure to join secondary databases to an availability group because the connection to the primary replica is not active.</span></span>|
|[<span data-ttu-id="85184-124">El enrutamiento de solo lectura no funciona correctamente</span><span class="sxs-lookup"><span data-stu-id="85184-124">Read-Only Routing is Not Working Correctly</span></span>](#ROR)||
|[<span data-ttu-id="85184-125">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="85184-125">Related Tasks</span></span>](#RelatedTasks)|<span data-ttu-id="85184-126">Contiene una lista de temas orientados a tareas de los Libros en pantalla de [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] que son particularmente especialmente pertinentes para solucionar problemas de configuración de un grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="85184-126">Contains a list of task-oriented topics in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] Books Online that are particularly relevant to troubleshooting an availability group configuration.</span></span>|
|[<span data-ttu-id="85184-127">Contenido relacionado</span><span class="sxs-lookup"><span data-stu-id="85184-127">Related Content</span></span>](#RelatedContent)|<span data-ttu-id="85184-128">Contiene una lista de recursos importantes externos a los Libros en pantalla de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="85184-128">Contains a list of relevant resources that are external to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Books Online.</span></span>|

##  <a name="alwayson-availability-groups-is-not-enabled"></a><a name="IsHadrEnabled"></a><span data-ttu-id="85184-129">Grupos de disponibilidad AlwaysOn no está habilitado</span><span class="sxs-lookup"><span data-stu-id="85184-129">AlwaysOn Availability Groups Is Not Enabled</span></span>
 <span data-ttu-id="85184-130">La característica [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] debe estar habilitada en cada instancia de [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="85184-130">The [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature must be enabled on each of the instances of [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="85184-131">Para obtener más información, vea [Habilitar y deshabilitar grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="85184-131">For more information, see [Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md).</span></span>

##  <a name="accounts"></a><a name="Accounts"></a> <span data-ttu-id="85184-132">Cuentas</span><span class="sxs-lookup"><span data-stu-id="85184-132">Accounts</span></span>
 <span data-ttu-id="85184-133">Las cuentas en las que se ejecuta [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] deben estar configuradas correctamente.</span><span class="sxs-lookup"><span data-stu-id="85184-133">The accounts under which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is running must be correctly configured.</span></span>

1.  <span data-ttu-id="85184-134">¿Tienen las cuentas los permisos adecuados?</span><span class="sxs-lookup"><span data-stu-id="85184-134">Do the accounts have the correct permissions?</span></span>

    1.  <span data-ttu-id="85184-135">Si los asociados se ejecutan como la misma cuenta de usuario de dominio, automáticamente existen los inicios de sesión de usuario correctos en ambas bases de datos **maestra** .</span><span class="sxs-lookup"><span data-stu-id="85184-135">If the partners run as the same domain user account, the correct user logins exist automatically in both **master** databases.</span></span> <span data-ttu-id="85184-136">Esto simplifica la configuración de seguridad de la base de datos y es recomendable su aplicación.</span><span class="sxs-lookup"><span data-stu-id="85184-136">This simplifies the security configuration the database and is recommended.</span></span>

    2.  <span data-ttu-id="85184-137">Si dos instancias del servidor se ejecutan como cuentas diferentes, el inicio de sesión en cada cuenta debe crearse en la base de datos **maestra** en la instancia del servidor remoto, y se deben conceder a ese inicio de sesión permisos CONNECT para conectarse al extremo de creación de reflejo de la base de datos de esa instancia del servidor.</span><span class="sxs-lookup"><span data-stu-id="85184-137">If two server instances run as different accounts, the login each account must be created in **master** on the remote server instance, and that login must be granted CONNECT permissions to connect to the database mirroring endpoint of that server instance.</span></span> <span data-ttu-id="85184-138">Para obtener más información, vea[configurar cuentas de inicio de sesión para la creación de reflejo de la base de datos o Grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](../../database-mirroring/set-up-login-accounts-database-mirroring-always-on-availability.md).</span><span class="sxs-lookup"><span data-stu-id="85184-138">For more information, see[Set Up Login Accounts for Database Mirroring or AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-mirroring/set-up-login-accounts-database-mirroring-always-on-availability.md).</span></span>

2.  <span data-ttu-id="85184-139">Si [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] se ejecuta como una cuenta integrada, (como sistema local, servicio local o servicio de red), o una cuenta que no es de dominio, debe utilizar certificados para la autenticación de extremos.</span><span class="sxs-lookup"><span data-stu-id="85184-139">If [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is running as a built-in account, such as Local System, Local Service, or Network Service, or a nondomain account, you must use certificates for endpoint authentication.</span></span> <span data-ttu-id="85184-140">Si las cuentas de servicio utilizan cuentas de dominio en el mismo dominio, puede elegir conceder acceso CONNECT para cada cuenta de servicio en todas las ubicaciones de réplica o puede utilizar certificados.</span><span class="sxs-lookup"><span data-stu-id="85184-140">If your service accounts are using domain accounts in the same domain, you can choose to grant CONNECT access for each service account on all the replica locations or you can use certificates.</span></span> <span data-ttu-id="85184-141">Para obtener más información, vea [Usar certificados para un punto de conexión de creación de reflejo de la base de datos &#40;Transact-SQL&#41;](../../database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="85184-141">For more information, see[Use Certificates for a Database Mirroring Endpoint &#40;Transact-SQL&#41;](../../database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql.md).</span></span>

##  <a name="endpoints"></a><a name="Endpoints"></a> <span data-ttu-id="85184-142">Endpoints</span><span class="sxs-lookup"><span data-stu-id="85184-142">Endpoints</span></span>
 <span data-ttu-id="85184-143">Los extremos deben estar configurados correctamente.</span><span class="sxs-lookup"><span data-stu-id="85184-143">Endpoints must be correctly configured.</span></span>

1.  <span data-ttu-id="85184-144">Asegúrese de que cada instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que vaya a hospedar una réplica de disponibilidad (cada *ubicación de réplica*) tenga un punto de conexión de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="85184-144">Make sure that each instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that is going to host an availability replica (each *replica location*) has a database mirroring endpoint.</span></span> <span data-ttu-id="85184-145">Para determinar si existe un punto de conexión de creación de reflejo de la base de datos en una instancia de servidor determinada, use la vista de catálogo [sys.database_mirroring_endpoints](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="85184-145">To determine whether a database mirroring endpoint exists on a given server instance, use the [sys.database_mirroring_endpoints](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql) catalog view.</span></span> <span data-ttu-id="85184-146">Para obtener más información, vea [Crear un punto de conexión de creación de reflejo de la base de datos para la autenticación de Windows &#40;Transact-SQL&#41;](../../database-mirroring/create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md) o [Permitir que un punto de conexión de creación de reflejo de la base de datos utilice certificados para las conexiones entrantes &#40;Transact-SQL&#41;](../../database-mirroring/database-mirroring-use-certificates-for-outbound-connections.md).</span><span class="sxs-lookup"><span data-stu-id="85184-146">For more information, see either [Create a Database Mirroring Endpoint for Windows Authentication &#40;Transact-SQL&#41;](../../database-mirroring/create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md) or [Allow a Database Mirroring Endpoint to Use Certificates for Outbound Connections &#40;Transact-SQL&#41;](../../database-mirroring/database-mirroring-use-certificates-for-outbound-connections.md).</span></span>

2.  <span data-ttu-id="85184-147">Compruebe que los números de puerto son correctos.</span><span class="sxs-lookup"><span data-stu-id="85184-147">Check that the port numbers are correct.</span></span>

     <span data-ttu-id="85184-148">Para identificar el puerto asociado actualmente al extremo de creación de reflejo de la base de datos de una instancia de servidor, utilice la siguiente instrucción [!INCLUDE[tsql](../../../includes/tsql-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="85184-148">To identify the port currently associated with database mirroring endpoint of a server instance, use the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement:</span></span>

    ```
    SELECT type_desc, port FROM sys.tcp_endpoints;
    GO
    ```

3.  <span data-ttu-id="85184-149">En caso de problemas de configuración de [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] difíciles de explicar, se recomienda que compruebe cada una de las instancias de servidor para determinar si escuchan en los puertos correctos.</span><span class="sxs-lookup"><span data-stu-id="85184-149">For [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] setup issues that are difficult to explain, we recommend that you inspect each server instance to determine whether it is listening on the correct ports.</span></span> <span data-ttu-id="85184-150">Para obtener más información sobre la comprobación de disponibilidad de puertos, vea [MSSQLSERVER_1418](../../../relational-databases/errors-events/mssqlserver-1418-database-engine-error.md).</span><span class="sxs-lookup"><span data-stu-id="85184-150">For information about verifying port availability, see [MSSQLSERVER_1418](../../../relational-databases/errors-events/mssqlserver-1418-database-engine-error.md).</span></span>

4.  <span data-ttu-id="85184-151">Asegúrese de que se han iniciado los extremos (STATE=STARTED).</span><span class="sxs-lookup"><span data-stu-id="85184-151">Make sure that the endpoints are started (STATE=STARTED).</span></span> <span data-ttu-id="85184-152">En cada una de las instancias de servidor, utilice la siguiente instrucción [!INCLUDE[tsql](../../../includes/tsql-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="85184-152">On each server instance, use the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement:</span></span>

    ```
    SELECT state_desc FROM sys.database_mirroring_endpoints
    ```

     <span data-ttu-id="85184-153">Para obtener más información sobre la columna **state_desc**, vea [sys.database_mirroring_endpoints &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="85184-153">For more information about the **state_desc** column, see [sys.database_mirroring_endpoints &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql).</span></span>

     <span data-ttu-id="85184-154">Para iniciar un extremo, utilice la siguiente instrucción [!INCLUDE[tsql](../../../includes/tsql-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="85184-154">To start an endpoint, use the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement:</span></span>

    ```
    ALTER ENDPOINT Endpoint_Mirroring 
    STATE = STARTED 
    AS TCP (LISTENER_PORT = <port_number>)
    FOR database_mirroring (ROLE = ALL);
    GO
    ```

     <span data-ttu-id="85184-155">Para obtener más información, vea [ALTER ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-endpoint-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="85184-155">For more information, see [ALTER ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-endpoint-transact-sql).</span></span>

5.  <span data-ttu-id="85184-156">Asegúrese de que el inicio de sesión del otro servidor dispone de permiso CONNECT.</span><span class="sxs-lookup"><span data-stu-id="85184-156">Make sure that the login from the other server has CONNECT permission.</span></span> <span data-ttu-id="85184-157">Para determinar quién tiene permiso CONNECT para un extremo, utilice la siguiente instrucción [!INCLUDE[tsql](../../../includes/tsql-md.md)] en cada instancia de servidor:</span><span class="sxs-lookup"><span data-stu-id="85184-157">To determine who has CONNECT permission for an endpoint, on each server instance use the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement:</span></span>

    ```
    SELECT 'Metadata Check';
    SELECT EP.name, SP.STATE, 
       CONVERT(nvarchar(38), suser_name(SP.grantor_principal_id)) 
          AS GRANTOR, 
       SP.TYPE AS PERMISSION,
       CONVERT(nvarchar(46),suser_name(SP.grantee_principal_id)) 
          AS GRANTEE 
       FROM sys.server_permissions SP , sys.endpoints EP
       WHERE SP.major_id = EP.endpoint_id
       ORDER BY Permission,grantor, grantee; 
    GO

    ```

##  <a name="system-name"></a><a name="SystemName"></a> <span data-ttu-id="85184-158">System Name</span><span class="sxs-lookup"><span data-stu-id="85184-158">System Name</span></span>
 <span data-ttu-id="85184-159">Como nombre del sistema de una instancia de servidor en una dirección URL del extremo, se puede utilizar cualquier nombre que identifique el sistema de forma inequívoca.</span><span class="sxs-lookup"><span data-stu-id="85184-159">For the system name of a server instance in an endpoint URL, you can use any name that unambiguously identifies the system.</span></span> <span data-ttu-id="85184-160">La dirección del sistema puede ser un nombre del sistema (si los sistemas se encuentran en el mismo dominio), un nombre de dominio completo o una dirección IP (de preferencia, una dirección IP estática).</span><span class="sxs-lookup"><span data-stu-id="85184-160">The server address can be a system name (if the systems are in the same domain), a fully qualified domain name, or an IP address (preferably, a static IP address).</span></span> <span data-ttu-id="85184-161">Se garantiza que el uso de un nombre de dominio completo funciona correctamente.</span><span class="sxs-lookup"><span data-stu-id="85184-161">Using the fully qualified domain name is guaranteed to work.</span></span> <span data-ttu-id="85184-162">Para obtener más información, vea [Especificar la dirección URL del punto de conexión al agregar o modificar una réplica de disponibilidad &#40;SQL Server&#41;](specify-endpoint-url-adding-or-modifying-availability-replica.md).</span><span class="sxs-lookup"><span data-stu-id="85184-162">For more information, see [Specify the Endpoint URL When Adding or Modifying an Availability Replica &#40;SQL Server&#41;](specify-endpoint-url-adding-or-modifying-availability-replica.md).</span></span>

##  <a name="network-access"></a><a name="NetworkAccess"></a> <span data-ttu-id="85184-163">Network Access</span><span class="sxs-lookup"><span data-stu-id="85184-163">Network Access</span></span>
 <span data-ttu-id="85184-164">Cada instancia de servidor que hospeda una réplica de disponibilidad debe tener acceso al puerto de cada una de las demás instancias de servidor en TCP.</span><span class="sxs-lookup"><span data-stu-id="85184-164">Each server instance that is hosting an availability replica must be able to access the port of each of the other server instance over TCP.</span></span> <span data-ttu-id="85184-165">Esto es especialmente importante si las instancias de servidor están en distintos dominios que no confían unos en otros (dominios que no son de confianza).</span><span class="sxs-lookup"><span data-stu-id="85184-165">This is especially important if the server instances are in different domains that do not trust each other (untrusted domains).</span></span>

##  <a name="endpoint-access-sql-server-error-1418"></a><a name="Msg1418"></a> <span data-ttu-id="85184-166">Acceso al extremo (error 1418 de SQL Server)</span><span class="sxs-lookup"><span data-stu-id="85184-166">Endpoint Access (SQL Server Error 1418)</span></span>
 <span data-ttu-id="85184-167">Este mensaje de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] indica que la dirección de red del servidor especificada en la dirección URL del extremo no se encuentra o no existe, y recomienda que se compruebe el nombre de dirección de red y se vuelva a emitir el comando.</span><span class="sxs-lookup"><span data-stu-id="85184-167">This [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] message indicates that the server network address specified in the endpoint URL cannot be reached or does not exist, and it suggests that you verify the network address name and reissue the command.</span></span> <span data-ttu-id="85184-168">Para obtener más información, vea [MSSQLSERVER_1418](../../../relational-databases/errors-events/mssqlserver-1418-database-engine-error.md).</span><span class="sxs-lookup"><span data-stu-id="85184-168">For more information, see [MSSQLSERVER_1418](../../../relational-databases/errors-events/mssqlserver-1418-database-engine-error.md).</span></span>

##  <a name="join-database-fails-sql-server-error-35250"></a><a name="JoinDbFails"></a> <span data-ttu-id="85184-169">Error de unión de la base de datos (error 35250 de SQL Server)</span><span class="sxs-lookup"><span data-stu-id="85184-169">Join Database Fails (SQL Server Error 35250)</span></span>
 <span data-ttu-id="85184-170">En esta sección se analiza las posibles causas y la resolución de un error al unir las bases de datos secundarias al grupo de disponibilidad porque la conexión a la réplica principal no está activa.</span><span class="sxs-lookup"><span data-stu-id="85184-170">This section discusses the possible causes and resolution of a failure to join secondary databases to the availability group because the connection to the primary replica is not active.</span></span>

 <span data-ttu-id="85184-171">**Resolución:**</span><span class="sxs-lookup"><span data-stu-id="85184-171">**Resolution:**</span></span>

1.  <span data-ttu-id="85184-172">Compruebe la configuración de firewall para ver si permite la comunicación de puerto del extremo entre las instancias de servidor que hospedan la réplica principal y la réplica secundaria (puerto 5022 de forma predeterminada).</span><span class="sxs-lookup"><span data-stu-id="85184-172">Check the firewall setting to see if whether allows the endpoint port communication between the server instances that host primary replica and the secondary replica (port 5022 by default).</span></span>

2.  <span data-ttu-id="85184-173">Compruebe si la cuenta de servicio de red tiene permiso de conexión para el extremo.</span><span class="sxs-lookup"><span data-stu-id="85184-173">Check whether the network service account has connect permission to the endpoint.</span></span>

##  <a name="read-only-routing-is-not-working-correctly"></a><a name="ROR"></a> <span data-ttu-id="85184-174">El enrutamiento de solo lectura no funciona correctamente</span><span class="sxs-lookup"><span data-stu-id="85184-174">Read-Only Routing is Not Working Correctly</span></span>
 <span data-ttu-id="85184-175">Compruebe los siguientes valores de configuración y corríjalos si es necesario.</span><span class="sxs-lookup"><span data-stu-id="85184-175">Verify the following configuration values settings and correct them if necessary.</span></span>

||<span data-ttu-id="85184-176">En...</span><span class="sxs-lookup"><span data-stu-id="85184-176">On...</span></span>|<span data-ttu-id="85184-177">Acción</span><span class="sxs-lookup"><span data-stu-id="85184-177">Action</span></span>|<span data-ttu-id="85184-178">Comentarios</span><span class="sxs-lookup"><span data-stu-id="85184-178">Comments</span></span>|<span data-ttu-id="85184-179">Vínculo</span><span class="sxs-lookup"><span data-stu-id="85184-179">Link</span></span>|
|------|---------|------------|--------------|----------|
|<span data-ttu-id="85184-180">![Casilla de verificación](../../media/checkboxemptycenterxtraspacetopandright.gif "Casilla de verificación")</span><span class="sxs-lookup"><span data-stu-id="85184-180">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="85184-181">Réplica principal actual</span><span class="sxs-lookup"><span data-stu-id="85184-181">Current primary replica</span></span>|<span data-ttu-id="85184-182">Asegúrese de que el agente de escucha del grupo de disponibilidad está en línea.</span><span class="sxs-lookup"><span data-stu-id="85184-182">Ensure that the availability group listener is online.</span></span>|<span data-ttu-id="85184-183">**Para comprobar si el agente de escucha está en línea:**</span><span class="sxs-lookup"><span data-stu-id="85184-183">**To verify whether the listener is online:**</span></span><br /><br /> `SELECT * FROM sys.dm_tcp_listener_states;`<br /><br /> <span data-ttu-id="85184-184">**Para reiniciar un agente de escucha sin conexión:**</span><span class="sxs-lookup"><span data-stu-id="85184-184">**To restart an offline listener:**</span></span><br /><br /> `ALTER AVAILABILITY GROUP myAG RESTART LISTENER 'myAG_Listener';`|[<span data-ttu-id="85184-185">sys.dm_tcp_listener_states &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-185">sys.dm_tcp_listener_states &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-tcp-listener-states-transact-sql)<br /><br /> [<span data-ttu-id="85184-186">ALTER AVAILABILITY GROUP &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-186">ALTER AVAILABILITY GROUP &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-availability-group-transact-sql)|
|<span data-ttu-id="85184-187">![Casilla de verificación](../../media/checkboxemptycenterxtraspacetopandright.gif "Casilla de verificación")</span><span class="sxs-lookup"><span data-stu-id="85184-187">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="85184-188">Réplica principal actual</span><span class="sxs-lookup"><span data-stu-id="85184-188">Current primary replica</span></span>|<span data-ttu-id="85184-189">Asegúrese de que READ_ONLY_ROUTING_LIST contiene solo instancias de servidor que hospedan una réplica secundaria legible.</span><span class="sxs-lookup"><span data-stu-id="85184-189">Ensure that the READ_ONLY_ROUTING_LIST contains only server instances that are hosting a readable secondary replica.</span></span>|<span data-ttu-id="85184-190">**Para identificar réplicas secundarias legibles:** sys.availability_replicas (columna**secondary_role_allow_connections_desc** )</span><span class="sxs-lookup"><span data-stu-id="85184-190">**To identify readable secondary replicas:** sys.availability_replicas  (**secondary_role_allow_connections_desc** column)</span></span><br /><br /> <span data-ttu-id="85184-191">**Para ver una lista de enrutamiento de solo lectura:** sys.availability_read_only_routing_lists</span><span class="sxs-lookup"><span data-stu-id="85184-191">**To view a read-only routing list:** sys.availability_read_only_routing_lists</span></span><br /><br /> <span data-ttu-id="85184-192">**Para cambiar una lista de enrutamiento de solo lectura:** ALTER AVAILABILITY GROUP</span><span class="sxs-lookup"><span data-stu-id="85184-192">**To change a read-only routing list:** ALTER AVAILABILITY GROUP</span></span>|[<span data-ttu-id="85184-193">sys.availability_replicas &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-193">sys.availability_replicas &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-availability-replicas-transact-sql)<br /><br /> [<span data-ttu-id="85184-194">sys.availability_read_only_routing_lists &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-194">sys.availability_read_only_routing_lists &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-availability-read-only-routing-lists-transact-sql)<br /><br /> [<span data-ttu-id="85184-195">ALTER AVAILABILITY GROUP &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-195">ALTER AVAILABILITY GROUP &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-availability-group-transact-sql)|
|<span data-ttu-id="85184-196">![Casilla de verificación](../../media/checkboxemptycenterxtraspacetopandright.gif "Casilla de verificación")</span><span class="sxs-lookup"><span data-stu-id="85184-196">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="85184-197">Todas las réplicas de read_only_routing_list</span><span class="sxs-lookup"><span data-stu-id="85184-197">Every replica in the read_only_routing_list</span></span>|<span data-ttu-id="85184-198">Asegúrese de que el firewall de Windows no está bloqueando el puerto de READ_ONLY_ROUTING_URL.</span><span class="sxs-lookup"><span data-stu-id="85184-198">Ensure that the Windows firewall is not blocking the READ_ONLY_ROUTING_URL port.</span></span>|-|[<span data-ttu-id="85184-199">Configuración de Firewall de Windows para el acceso al motor de base de datos</span><span class="sxs-lookup"><span data-stu-id="85184-199">Configure a Windows Firewall for Database Engine Access</span></span>](../../configure-windows/configure-a-windows-firewall-for-database-engine-access.md)|
|<span data-ttu-id="85184-200">![Casilla de verificación](../../media/checkboxemptycenterxtraspacetopandright.gif "Casilla de verificación")</span><span class="sxs-lookup"><span data-stu-id="85184-200">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="85184-201">Todas las réplicas de read_only_routing_list</span><span class="sxs-lookup"><span data-stu-id="85184-201">Every replica in the read_only_routing_list</span></span>|<span data-ttu-id="85184-202">En el Administrador de configuración [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , compruebe lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="85184-202">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager, verify that:</span></span><br /><br /> <span data-ttu-id="85184-203">La conectividad remota de SQL Server está habilitada.</span><span class="sxs-lookup"><span data-stu-id="85184-203">SQL Server remote connectivity is enabled.</span></span><br /><br /> <span data-ttu-id="85184-204">TCP/IP está habilitado.</span><span class="sxs-lookup"><span data-stu-id="85184-204">TCP/IP is enabled.</span></span><br /><br /> <span data-ttu-id="85184-205">Las direcciones IP están configuradas correctamente.</span><span class="sxs-lookup"><span data-stu-id="85184-205">The IP addresses are configured correctly.</span></span>|-|[<span data-ttu-id="85184-206">Ver o cambiar las propiedades del servidor &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-206">View or Change Server Properties &#40;SQL Server&#41;</span></span>](../../configure-windows/view-or-change-server-properties-sql-server.md)<br /><br /> [<span data-ttu-id="85184-207">Configurar un servidor para que escuche en un puerto TCP específico &#40;Administrador de configuración de SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-207">Configure a Server to Listen on a Specific TCP Port &#40;SQL Server Configuration Manager&#41;</span></span>](../../configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port.md)|
|<span data-ttu-id="85184-208">![Casilla de verificación](../../media/checkboxemptycenterxtraspacetopandright.gif "Casilla de verificación")</span><span class="sxs-lookup"><span data-stu-id="85184-208">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="85184-209">Todas las réplicas de read_only_routing_list</span><span class="sxs-lookup"><span data-stu-id="85184-209">Every replica in the read_only_routing_list</span></span>|<span data-ttu-id="85184-210">Asegúrese de que el READ_ONLY_ROUTING_URL (TCP<strong>:// *`system-address`* :</strong>*Puerto*) contiene el nombre de dominio completo (FQDN) y el número de puerto correctos.</span><span class="sxs-lookup"><span data-stu-id="85184-210">Ensure that the READ_ONLY_ROUTING_URL (TCP<strong>://*`system-address`*:</strong>*port*) contains the correct fully-qualified domain name (FQDN) and port number.</span></span>|-|[<span data-ttu-id="85184-211">Calcular Read_only_routing_url para AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="85184-211">Calculating read_only_routing_url for AlwaysOn</span></span>](https://docs.microsoft.com/archive/blogs/mattn/calculating-read_only_routing_url-for-alwayson)<br /><br /> [<span data-ttu-id="85184-212">sys.availability_replicas &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-212">sys.availability_replicas &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-availability-replicas-transact-sql)<br /><br /> [<span data-ttu-id="85184-213">ALTER AVAILABILITY GROUP &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-213">ALTER AVAILABILITY GROUP &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-availability-group-transact-sql)|
|<span data-ttu-id="85184-214">![Casilla de verificación](../../media/checkboxemptycenterxtraspacetopandright.gif "Casilla de verificación")</span><span class="sxs-lookup"><span data-stu-id="85184-214">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="85184-215">Sistema cliente</span><span class="sxs-lookup"><span data-stu-id="85184-215">Client system</span></span>|<span data-ttu-id="85184-216">Compruebe que el controlador cliente admite el enrutamiento de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="85184-216">Verify that the client driver supports read-only routing.</span></span>|-|[<span data-ttu-id="85184-217">Conectividad de cliente de AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="85184-217">AlwaysOn Client Connectivity (SQL Server)</span></span>](always-on-client-connectivity-sql-server.md)|

##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="85184-218">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="85184-218">Related Tasks</span></span>

-   [<span data-ttu-id="85184-219">Creación y configuración de grupos de disponibilidad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-219">Creation and Configuration of Availability Groups &#40;SQL Server&#41;</span></span>](creation-and-configuration-of-availability-groups-sql-server.md)

-   [<span data-ttu-id="85184-220">Crear un punto de conexión de creación de reflejo de la base de datos para la autenticación de Windows &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-220">Create a Database Mirroring Endpoint for Windows Authentication &#40;Transact-SQL&#41;</span></span>](../../database-mirroring/create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md)

-   [<span data-ttu-id="85184-221">Especificar la dirección URL del punto de conexión al agregar o modificar una réplica de disponibilidad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-221">Specify the Endpoint URL When Adding or Modifying an Availability Replica &#40;SQL Server&#41;</span></span>](specify-endpoint-url-adding-or-modifying-availability-replica.md)

-   [<span data-ttu-id="85184-222">Preparar manualmente una base de datos secundaria para un grupo de disponibilidad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-222">Manually Prepare a Secondary Database for an Availability Group &#40;SQL Server&#41;</span></span>](manually-prepare-a-secondary-database-for-an-availability-group-sql-server.md)

-   [<span data-ttu-id="85184-223">Solucionar problemas de una operación Add-File &#40;Grupos de disponibilidad AlwaysOn&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-223">Troubleshoot a Failed Add-File Operation &#40;AlwaysOn Availability Groups&#41;</span></span>](troubleshoot-a-failed-add-file-operation-always-on-availability-groups.md)

-   [<span data-ttu-id="85184-224">Administración de inicios de sesión y de trabajos para las bases de datos de un grupo de disponibilidad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-224">Management of Logins and Jobs for the Databases of an Availability Group &#40;SQL Server&#41;</span></span>](../../logins-and-jobs-for-availability-group-databases.md)

-   [<span data-ttu-id="85184-225">Administrar los metadatos cuando una base de datos pasa a estar disponible en otra instancia del servidor &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-225">Manage Metadata When Making a Database Available on Another Server Instance &#40;SQL Server&#41;</span></span>](../../../relational-databases/databases/manage-metadata-when-making-a-database-available-on-another-server.md)

##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="85184-226">Contenido relacionado</span><span class="sxs-lookup"><span data-stu-id="85184-226">Related Content</span></span>

-   <span data-ttu-id="85184-227">[View Events and Logs for a Failover Cluster](https://technet.microsoft.com/library/cc772342\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="85184-227">[View Events and Logs for a Failover Cluster](https://technet.microsoft.com/library/cc772342\(WS.10\).aspx)</span></span>

-   [<span data-ttu-id="85184-228">Cmdlet de clúster de conmutación por error Get-ClusterLog</span><span class="sxs-lookup"><span data-stu-id="85184-228">Get-ClusterLog Failover Cluster Cmdlet</span></span>](https://technet.microsoft.com/library/ee461045.aspx)

-   [<span data-ttu-id="85184-229">Blog del equipo de AlwaysOn de SQL Server: el blog del equipo de AlwaysOn oficial de SQL Server</span><span class="sxs-lookup"><span data-stu-id="85184-229">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)

## <a name="see-also"></a><span data-ttu-id="85184-230">Consulte también</span><span class="sxs-lookup"><span data-stu-id="85184-230">See Also</span></span>
 <span data-ttu-id="85184-231">[Seguridad de transporte para la creación de reflejo de la base de datos y Grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](../../database-mirroring/transport-security-database-mirroring-always-on-availability.md) [Client Network Configuration](../../configure-windows/client-network-configuration.md) [requisitos previos, restricciones y recomendaciones de configuración de red de cliente para grupos de disponibilidad AlwaysOn](prereqs-restrictions-recommendations-always-on-availability.md) &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="85184-231">[Transport Security for Database Mirroring and AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-mirroring/transport-security-database-mirroring-always-on-availability.md) [Client Network Configuration](../../configure-windows/client-network-configuration.md) [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md)</span></span>


