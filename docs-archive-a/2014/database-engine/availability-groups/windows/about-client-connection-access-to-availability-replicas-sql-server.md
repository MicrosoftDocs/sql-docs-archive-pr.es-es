---
title: Acerca del acceso de conexión de cliente a réplicas de disponibilidad (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], availability replicas
- Availability Groups [SQL Server], readable secondary replicas
- active secondary replicas [SQL Server], read-only access to
- Availability Groups [SQL Server], configuring
- Availability Groups [SQL Server], client connectivity
- Availability Groups [SQL Server], active secondary replicas
ms.assetid: 29027e46-43e4-4b45-b650-c4cdeacdf552
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 79e61f29957d90a429d8a0c66782ca7cf2e7bd4c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87746544"
---
# <a name="about-client-connection-access-to-availability-replicas-sql-server"></a><span data-ttu-id="4116d-102">Acerca del acceso de conexión de cliente a réplicas de disponibilidad (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4116d-102">About Client Connection Access to Availability Replicas (SQL Server)</span></span>
  <span data-ttu-id="4116d-103">En un grupo de disponibilidad AlwaysOn, puede configurar una o varias réplicas de disponibilidad para permitir conexiones de solo lectura cuando se ejecutan en el rol secundario (es decir, cuando se ejecutan como réplica secundaria).</span><span class="sxs-lookup"><span data-stu-id="4116d-103">In an AlwaysOn availability group, you can configure one or more availability replicas to allow read-only connections when running under the secondary role (that is, when running as a secondary replica).</span></span> <span data-ttu-id="4116d-104">También puede configurar cada réplica de disponibilidad para permitir o excluir conexiones de solo lectura cuando se ejecutan bajo el rol principal (es decir, cuando se ejecutan como réplica principal).</span><span class="sxs-lookup"><span data-stu-id="4116d-104">You can also configure each availability replica to allow or exclude read-only connections when running under the primary role (that is, when running as the primary replica).</span></span>  
  
 <span data-ttu-id="4116d-105">Para facilitar el acceso de cliente a las bases de datos principal o secundaria de un grupo de disponibilidad determinado, puede definir un agente de escucha del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="4116d-105">To facilitate client access to primary or secondary databases of a given availability group, you should define an availability group listener.</span></span> <span data-ttu-id="4116d-106">De forma predeterminada, el agente de escucha del grupo de disponibilidad dirige las conexiones entrantes a la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="4116d-106">By default, the availability group listener directs incoming connections to the primary replica.</span></span> <span data-ttu-id="4116d-107">Sin embargo, puede configurar un grupo de disponibilidad de modo que se admita el enrutamiento de solo lectura, lo que permite a su agente de escucha del grupo de disponibilidad redirigir las solicitudes de conexión de las aplicaciones de intención de lectura a una réplica secundaria legible.</span><span class="sxs-lookup"><span data-stu-id="4116d-107">However, you can configure an availability group to support read-only routing, which enables its availability group listener to redirect the connection requests of read-intent applications to a readable secondary replica.</span></span> <span data-ttu-id="4116d-108">Para obtener más información, vea [Configurar el enrutamiento de solo lectura para un grupo de disponibilidad &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4116d-108">For more information, see [Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md).</span></span>  
  
 <span data-ttu-id="4116d-109">Durante una conmutación por error, una réplica secundaria realiza la transición al rol principal y la réplica principal anterior realiza la transición al rol secundario.</span><span class="sxs-lookup"><span data-stu-id="4116d-109">During a failover, a secondary replica transitions to the primary role and the former primary replica transitions to the secondary role.</span></span> <span data-ttu-id="4116d-110">Durante el proceso de conmutación por error, se terminan todas las conexiones de cliente a la réplica principal y a las réplicas secundarias.</span><span class="sxs-lookup"><span data-stu-id="4116d-110">During the failover process, all client connections to both the primary replica and secondary replicas are terminated.</span></span> <span data-ttu-id="4116d-111">Después de la conmutación por error, cuando un cliente se vuelve a conectar al agente de escucha del grupo de disponibilidad, el agente de escucha vuelve a conectar el cliente a la nueva réplica principal, excepto en el caso de una solicitud de conexión de intención de lectura.</span><span class="sxs-lookup"><span data-stu-id="4116d-111">After the failover, when a client reconnects to the availability group listener, the listener reconnects the client to the new primary replica, except for a read-intent connect request.</span></span> <span data-ttu-id="4116d-112">Si se configura el enrutamiento de solo lectura en el cliente, en las instancias de servidor que hospedan la nueva réplica principal y en al menos una réplica secundaria legible, las solicitudes de conexión de intención de lectura se vuelven a enrutar a una réplica secundaria que admita el tipo de acceso de conexión que el cliente necesita.</span><span class="sxs-lookup"><span data-stu-id="4116d-112">If read-only routing is configured on the client and on the server instances that hosts the new primary replica and on at least one readable secondary replica, read-intent connection requests are re-routed to a secondary replica that supports the type of connection access that the client requires.</span></span> <span data-ttu-id="4116d-113">Para asegurar una experiencia de cliente correcta después de una conmutación por error, es importante configurar el acceso de conexión de los roles principal y secundario de cada réplica de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="4116d-113">To ensure a graceful client experience after a failover, it is important to configure connection access for both the secondary and primary roles of every availability replica.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4116d-114">Para obtener información sobre el agente de escucha de grupo de disponibilidad, que administra las solicitudes de conexión de cliente, vea [Agentes de escucha de grupo de disponibilidad, conectividad de cliente y conmutación por error de una aplicación &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="4116d-114">For information about the availability group listener, which handles client connection requests, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>  
  
 <span data-ttu-id="4116d-115">**En este tema:**</span><span class="sxs-lookup"><span data-stu-id="4116d-115">**In This Topic:**</span></span>  
  
-   [<span data-ttu-id="4116d-116">Tipos de acceso de conexión admitidos por el rol secundario</span><span class="sxs-lookup"><span data-stu-id="4116d-116">Types of Connection Access Supported by the Secondary Role</span></span>](#ConnectAccessForSecondary)  
  
-   [<span data-ttu-id="4116d-117">Tipos de acceso de conexión admitidos por el rol principal</span><span class="sxs-lookup"><span data-stu-id="4116d-117">Types of Connection Access Supported by the Primary Role</span></span>](#ConnectAccessForPrimary)  
  
-   [<span data-ttu-id="4116d-118">Cómo la configuración de acceso de conexión afecta a la conectividad de cliente</span><span class="sxs-lookup"><span data-stu-id="4116d-118">How the Connection Access Configuration Affects Client Connectivity</span></span>](#HowConnectionAccessAffectsConnectivity)  
  
-   [<span data-ttu-id="4116d-119">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="4116d-119">Related Tasks</span></span>](#RelatedTasks)  
  
-   [<span data-ttu-id="4116d-120">Contenido relacionado</span><span class="sxs-lookup"><span data-stu-id="4116d-120">Related Content</span></span>](#RelatedContent)  
  
##  <a name="types-of-connection-access-supported-by-the-secondary-role"></a><a name="ConnectAccessForSecondary"></a><span data-ttu-id="4116d-121">Tipos de acceso de conexión admitidos por el rol secundario</span><span class="sxs-lookup"><span data-stu-id="4116d-121">Types of Connection Access Supported by the Secondary Role</span></span>  
 <span data-ttu-id="4116d-122">El rol secundario admite tres alternativas para las conexiones de cliente, del siguiente modo:</span><span class="sxs-lookup"><span data-stu-id="4116d-122">The secondary role supports three alternatives for client connections, as follows:</span></span>  
  
 <span data-ttu-id="4116d-123">Sin conexiones</span><span class="sxs-lookup"><span data-stu-id="4116d-123">No connections</span></span>  
 <span data-ttu-id="4116d-124">No se permiten conexiones de usuario.</span><span class="sxs-lookup"><span data-stu-id="4116d-124">No user connections are allowed.</span></span> <span data-ttu-id="4116d-125">Las bases de datos secundarias no están disponibles para acceso de lectura.</span><span class="sxs-lookup"><span data-stu-id="4116d-125">Secondary databases are not available for read access.</span></span> <span data-ttu-id="4116d-126">este es el comportamiento predeterminado del rol secundario.</span><span class="sxs-lookup"><span data-stu-id="4116d-126">This is the default behavior in the secondary role.</span></span>  
  
 <span data-ttu-id="4116d-127">Solo conexiones de intención de lectura</span><span class="sxs-lookup"><span data-stu-id="4116d-127">Only read-intent connections</span></span>  
 <span data-ttu-id="4116d-128">Las bases de datos secundarias solo están disponibles para la conexión en la que la `Application Intent` propiedad de conexión está establecida en `ReadOnly` (*conexiones de intención de lectura*).</span><span class="sxs-lookup"><span data-stu-id="4116d-128">The secondary database(s) are available only for connection for which the `Application Intent` connection property is set to `ReadOnly` (*read-intent connections*).</span></span>  
  
 <span data-ttu-id="4116d-129">Para obtener información acerca de esta conexión, vea [Compatibilidad de SQL Server Native Client para la alta disponibilidad con recuperación de desastres](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="4116d-129">For information about this connection property, see [SQL Server Native Client Support for High Availability, Disaster Recovery](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span></span>  
  
 <span data-ttu-id="4116d-130">Permitir cualquier conexión de solo lectura</span><span class="sxs-lookup"><span data-stu-id="4116d-130">Allow any read-only connection</span></span>  
 <span data-ttu-id="4116d-131">Todas las bases de datos secundarias están disponibles para conexiones de acceso de lectura.</span><span class="sxs-lookup"><span data-stu-id="4116d-131">The secondary database(s) are all available for read access connections.</span></span> <span data-ttu-id="4116d-132">Esta opción permite la conexión a los clientes de una versión anterior.</span><span class="sxs-lookup"><span data-stu-id="4116d-132">This option allows lower versioned clients to connect.</span></span>  
  
 <span data-ttu-id="4116d-133">Para obtener más información, vea [Configurar el acceso de solo lectura en una réplica de disponibilidad &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4116d-133">For more information, see [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span></span>  
  
##  <a name="types-of-connection-access-supported-by-the-primary-role"></a><a name="ConnectAccessForPrimary"></a><span data-ttu-id="4116d-134">Tipos de acceso de conexión admitidos por el rol principal</span><span class="sxs-lookup"><span data-stu-id="4116d-134">Types of Connection Access Supported by the Primary Role</span></span>  
 <span data-ttu-id="4116d-135">El rol principal admite dos alternativas para las conexiones de cliente, del siguiente modo:</span><span class="sxs-lookup"><span data-stu-id="4116d-135">The primary role supports two alternatives for client connections, as follows:</span></span>  
  
 <span data-ttu-id="4116d-136">Todas las conexiones están permitidas</span><span class="sxs-lookup"><span data-stu-id="4116d-136">All connections are allowed</span></span>  
 <span data-ttu-id="4116d-137">Se permiten conexiones de lectura/escritura y de solo lectura a las bases de datos principales.</span><span class="sxs-lookup"><span data-stu-id="4116d-137">Both read-write and read-only connections are allowed to primary databases.</span></span> <span data-ttu-id="4116d-138">Este es el comportamiento predeterminado para el rol principal.</span><span class="sxs-lookup"><span data-stu-id="4116d-138">This is the default behavior for the primary role.</span></span>  
  
 <span data-ttu-id="4116d-139">Permitir solo conexiones de lectura/escritura</span><span class="sxs-lookup"><span data-stu-id="4116d-139">Allow only read-write connections</span></span>  
 <span data-ttu-id="4116d-140">Cuando la `Application Intent` propiedad de conexión se establece en **ReadWrite** o no se establece, se permite la conexión.</span><span class="sxs-lookup"><span data-stu-id="4116d-140">When the `Application Intent` connection property is set to **ReadWrite** or is not set, the connection is allowed.</span></span> <span data-ttu-id="4116d-141">No se permiten las conexiones para las que la `Application Intent` palabra clave de cadena de conexión está establecida en `ReadOnly` .</span><span class="sxs-lookup"><span data-stu-id="4116d-141">Connections for which the `Application Intent` connection string keyword is set to `ReadOnly` are not allowed.</span></span> <span data-ttu-id="4116d-142">La acción de permitir conexiones de lectura/escritura puede impedir que los clientes conecten una carga de trabajo de intención de lectura a la réplica principal por error.</span><span class="sxs-lookup"><span data-stu-id="4116d-142">Allowing only read-write connections can help prevent your customers from connecting a read-intent work load to the primary replica by mistake.</span></span>  
  
 <span data-ttu-id="4116d-143">Para obtener información acerca de esta conexión, vea [Using Connection String Keywords with SQL Server Native Client](../../../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md).</span><span class="sxs-lookup"><span data-stu-id="4116d-143">For information about this connection property, see [Using Connection String Keywords with SQL Server Native Client](../../../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="4116d-144">Para obtener más información, vea [Configurar el acceso de solo lectura en una réplica de disponibilidad &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4116d-144">For more information, see [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span></span>  
  
##  <a name="how-the-connection-access-configuration-affects-client-connectivity"></a><a name="HowConnectionAccessAffectsConnectivity"></a><span data-ttu-id="4116d-145">Cómo la configuración de acceso de conexión afecta a la conectividad de cliente</span><span class="sxs-lookup"><span data-stu-id="4116d-145">How the Connection Access Configuration Affects Client Connectivity</span></span>  
 <span data-ttu-id="4116d-146">La configuración de acceso de conexión de una réplica determina si un intento de conexión se produce o no correctamente.</span><span class="sxs-lookup"><span data-stu-id="4116d-146">The connection access settings of a replica determine whether a connection attempt fails or succeeds.</span></span> <span data-ttu-id="4116d-147">La tabla siguiente resume si un intento de conexión determinado se produce o no correctamente para cada configuración de acceso de conexión.</span><span class="sxs-lookup"><span data-stu-id="4116d-147">The following table summarizes whether a given connection attempt succeeds or fails for each the connection-access setting.</span></span>  
  
|<span data-ttu-id="4116d-148">Rol de réplica</span><span class="sxs-lookup"><span data-stu-id="4116d-148">Replica Role</span></span>|<span data-ttu-id="4116d-149">Acceso de conexión admitido en la réplica</span><span class="sxs-lookup"><span data-stu-id="4116d-149">Connection Access Supported on Replica</span></span>|<span data-ttu-id="4116d-150">Intento de conexión</span><span class="sxs-lookup"><span data-stu-id="4116d-150">Connection Intent</span></span>|<span data-ttu-id="4116d-151">Resultado del intento de conexión</span><span class="sxs-lookup"><span data-stu-id="4116d-151">Connection-Attempt Result</span></span>|  
|------------------|--------------------------------------------|-----------------------|--------------------------------|  
|<span data-ttu-id="4116d-152">Secundario</span><span class="sxs-lookup"><span data-stu-id="4116d-152">Secondary</span></span>|<span data-ttu-id="4116d-153">All</span><span class="sxs-lookup"><span data-stu-id="4116d-153">All</span></span>|<span data-ttu-id="4116d-154">Se ha especificado una intención de lectura, una intención de lectura/escritura o ninguna intención de conexión</span><span class="sxs-lookup"><span data-stu-id="4116d-154">Read-intent, read-write, or no connection intent specified</span></span>|<span data-ttu-id="4116d-155">Correcto</span><span class="sxs-lookup"><span data-stu-id="4116d-155">Success</span></span>|  
|<span data-ttu-id="4116d-156">Secundario</span><span class="sxs-lookup"><span data-stu-id="4116d-156">Secondary</span></span>|<span data-ttu-id="4116d-157">Ninguno (este es el comportamiento secundario predeterminado).</span><span class="sxs-lookup"><span data-stu-id="4116d-157">None (This is the default secondary behavior.)</span></span>|<span data-ttu-id="4116d-158">Se ha especificado una intención de lectura, una intención de lectura/escritura o ninguna intención de conexión</span><span class="sxs-lookup"><span data-stu-id="4116d-158">Read-intent, read-write, or no connection intent specified</span></span>|<span data-ttu-id="4116d-159">Error</span><span class="sxs-lookup"><span data-stu-id="4116d-159">Failure</span></span>|  
|<span data-ttu-id="4116d-160">Secundario</span><span class="sxs-lookup"><span data-stu-id="4116d-160">Secondary</span></span>|<span data-ttu-id="4116d-161">Solo intento de lectura</span><span class="sxs-lookup"><span data-stu-id="4116d-161">Read-intent only</span></span>|<span data-ttu-id="4116d-162">Intención de lectura</span><span class="sxs-lookup"><span data-stu-id="4116d-162">Read-intent</span></span>|<span data-ttu-id="4116d-163">Correcto</span><span class="sxs-lookup"><span data-stu-id="4116d-163">Success</span></span>|  
|<span data-ttu-id="4116d-164">Secundario</span><span class="sxs-lookup"><span data-stu-id="4116d-164">Secondary</span></span>|<span data-ttu-id="4116d-165">Solo intento de lectura</span><span class="sxs-lookup"><span data-stu-id="4116d-165">Read-intent only</span></span>|<span data-ttu-id="4116d-166">Se ha especificado una intención de lectura/escritura o ninguna intención de conexión</span><span class="sxs-lookup"><span data-stu-id="4116d-166">Read-write or no connection intent specified</span></span>|<span data-ttu-id="4116d-167">Error</span><span class="sxs-lookup"><span data-stu-id="4116d-167">Failure</span></span>|  
|<span data-ttu-id="4116d-168">Principal</span><span class="sxs-lookup"><span data-stu-id="4116d-168">Primary</span></span>|<span data-ttu-id="4116d-169">Todos (este es el comportamiento principal predeterminado).</span><span class="sxs-lookup"><span data-stu-id="4116d-169">All (This is the default primary behavior.)</span></span>|<span data-ttu-id="4116d-170">Se ha especificado una intención de solo lectura, una intención de lectura/escritura o ninguna intención de conexión</span><span class="sxs-lookup"><span data-stu-id="4116d-170">Read-only, read-write, or no connection intent specified</span></span>|<span data-ttu-id="4116d-171">Correcto</span><span class="sxs-lookup"><span data-stu-id="4116d-171">Success</span></span>|  
|<span data-ttu-id="4116d-172">Principal</span><span class="sxs-lookup"><span data-stu-id="4116d-172">Primary</span></span>|<span data-ttu-id="4116d-173">Lectura-escritura</span><span class="sxs-lookup"><span data-stu-id="4116d-173">Read-write</span></span>|<span data-ttu-id="4116d-174">Solo intento de lectura</span><span class="sxs-lookup"><span data-stu-id="4116d-174">Read-intent only</span></span>|<span data-ttu-id="4116d-175">Error</span><span class="sxs-lookup"><span data-stu-id="4116d-175">Failure</span></span>|  
|<span data-ttu-id="4116d-176">Principal</span><span class="sxs-lookup"><span data-stu-id="4116d-176">Primary</span></span>|<span data-ttu-id="4116d-177">Lectura-escritura</span><span class="sxs-lookup"><span data-stu-id="4116d-177">Read-write</span></span>|<span data-ttu-id="4116d-178">Se ha especificado una intención de lectura/escritura o ninguna intención de conexión</span><span class="sxs-lookup"><span data-stu-id="4116d-178">Read-write or no connection intent specified</span></span>|<span data-ttu-id="4116d-179">Correcto</span><span class="sxs-lookup"><span data-stu-id="4116d-179">Success</span></span>|  
  
 <span data-ttu-id="4116d-180">Para obtener información sobre cómo configurar un grupo de disponibilidad para aceptar conexiones de cliente a sus réplicas, vea [Agentes de escucha de grupo de disponibilidad, conectividad de cliente y conmutación por error de una aplicación &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="4116d-180">For information about configuring an availability group to accept client connections to its replicas, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>  
  
### <a name="example-connection-access-configuration"></a><span data-ttu-id="4116d-181">Ejemplo de configuración de acceso de conexión</span><span class="sxs-lookup"><span data-stu-id="4116d-181">Example Connection-Access Configuration</span></span>  
 <span data-ttu-id="4116d-182">Dependiendo de cómo estén configuradas diferentes réplicas de disponibilidad para acceso de conexión, la compatibilidad para las conexiones de cliente puede cambiar después de la conmutación por error de un grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="4116d-182">Depending on how different availability replicas are configured for connection access, support for client connections might change after an availability group fails over.</span></span> <span data-ttu-id="4116d-183">Por ejemplo, considere un grupo de disponibilidad para el que se realiza funcionalidad de informes en las réplicas secundarias de confirmación asincrónica remota.</span><span class="sxs-lookup"><span data-stu-id="4116d-183">For example, consider an availability group for which reporting is performed on remote asynchronous-commit secondary replicas.</span></span> <span data-ttu-id="4116d-184">En todas las aplicaciones de solo lectura para las bases de datos de este grupo de disponibilidad se establece la propiedad de conexión `Application Intent` en `ReadOnly`, de modo que todas las conexiones de solo lectura son conexiones de lectura.</span><span class="sxs-lookup"><span data-stu-id="4116d-184">All of the read-only applications for the databases in this availability group set their `Application Intent` connection property to `ReadOnly`, so that all read-only connections are read-intent connections.</span></span>  
  
 <span data-ttu-id="4116d-185">Este grupo de disponibilidad de ejemplo posee dos réplicas de confirmación sincrónica en el centro de cálculo principal y dos réplicas de confirmación asincrónica en un sitio satélite.</span><span class="sxs-lookup"><span data-stu-id="4116d-185">This example availability group possesses two synchronous-commit replicas at the main computing center and two asynchronous-commit replicas at a satellite site.</span></span> <span data-ttu-id="4116d-186">Para el rol principal, todas las réplicas se configuran para acceso de lectura/escritura, lo que evita las conexiones de intención de lectura a la réplica principal en todas las situaciones.</span><span class="sxs-lookup"><span data-stu-id="4116d-186">For the primary role, all the replicas are configured for read-write access, which prevents read-intent connections to the primary replica in all situations.</span></span> <span data-ttu-id="4116d-187">El rol secundario de confirmación sincrónica utiliza la configuración de acceso de conexión predeterminada (“ninguna”), evitando las conexiones de cliente bajo el rol secundario.</span><span class="sxs-lookup"><span data-stu-id="4116d-187">The synchronous commit secondary role uses the default connection-access configuration ("none"), which prevents all client connections under the secondary role.</span></span>  <span data-ttu-id="4116d-188">En cambio, las réplicas de confirmación asincrónica se configuran para permitir conexiones de intención de lectura bajo el rol secundario.</span><span class="sxs-lookup"><span data-stu-id="4116d-188">In contrast, the asynchronous commit replicas are configured to permit read-intent connections under the secondary role.</span></span> <span data-ttu-id="4116d-189">En la tabla siguiente se resume esta configuración de ejemplo:</span><span class="sxs-lookup"><span data-stu-id="4116d-189">The following table summarize this example configuration:</span></span>  
  
|<span data-ttu-id="4116d-190">Réplica</span><span class="sxs-lookup"><span data-stu-id="4116d-190">Replica</span></span>|<span data-ttu-id="4116d-191">Modo de confirmación</span><span class="sxs-lookup"><span data-stu-id="4116d-191">Commit Mode</span></span>|<span data-ttu-id="4116d-192">Rol inicial</span><span class="sxs-lookup"><span data-stu-id="4116d-192">Initial Role</span></span>|<span data-ttu-id="4116d-193">Acceso de conexión para el rol secundario</span><span class="sxs-lookup"><span data-stu-id="4116d-193">Connection Access for Secondary Role</span></span>|<span data-ttu-id="4116d-194">Acceso de conexión para el rol principal</span><span class="sxs-lookup"><span data-stu-id="4116d-194">Connection Access for Primary Role</span></span>|  
|-------------|-----------------|------------------|------------------------------------------|----------------------------------------|  
|<span data-ttu-id="4116d-195">Réplica1</span><span class="sxs-lookup"><span data-stu-id="4116d-195">Replica1</span></span>|<span data-ttu-id="4116d-196">Sincrónica</span><span class="sxs-lookup"><span data-stu-id="4116d-196">Synchronous</span></span>|<span data-ttu-id="4116d-197">Principal</span><span class="sxs-lookup"><span data-stu-id="4116d-197">Primary</span></span>|<span data-ttu-id="4116d-198">None</span><span class="sxs-lookup"><span data-stu-id="4116d-198">None</span></span>|<span data-ttu-id="4116d-199">Lectura-escritura</span><span class="sxs-lookup"><span data-stu-id="4116d-199">Read-write</span></span>|  
|<span data-ttu-id="4116d-200">Réplica2</span><span class="sxs-lookup"><span data-stu-id="4116d-200">Replica2</span></span>|<span data-ttu-id="4116d-201">Sincrónico</span><span class="sxs-lookup"><span data-stu-id="4116d-201">Synchronous</span></span>|<span data-ttu-id="4116d-202">Secundario</span><span class="sxs-lookup"><span data-stu-id="4116d-202">Secondary</span></span>|<span data-ttu-id="4116d-203">None</span><span class="sxs-lookup"><span data-stu-id="4116d-203">None</span></span>|<span data-ttu-id="4116d-204">Lectura-escritura</span><span class="sxs-lookup"><span data-stu-id="4116d-204">Read-write</span></span>|  
|<span data-ttu-id="4116d-205">Réplica3</span><span class="sxs-lookup"><span data-stu-id="4116d-205">Replica3</span></span>|<span data-ttu-id="4116d-206">Asincrónica</span><span class="sxs-lookup"><span data-stu-id="4116d-206">Asynchronous</span></span>|<span data-ttu-id="4116d-207">Secundario</span><span class="sxs-lookup"><span data-stu-id="4116d-207">Secondary</span></span>|<span data-ttu-id="4116d-208">Solo intención de lectura</span><span class="sxs-lookup"><span data-stu-id="4116d-208">Read-intentonly</span></span>|<span data-ttu-id="4116d-209">Lectura-escritura</span><span class="sxs-lookup"><span data-stu-id="4116d-209">Read-write</span></span>|  
|<span data-ttu-id="4116d-210">Réplica4</span><span class="sxs-lookup"><span data-stu-id="4116d-210">Replica4</span></span>|<span data-ttu-id="4116d-211">Asincrónica</span><span class="sxs-lookup"><span data-stu-id="4116d-211">Asynchronous</span></span>|<span data-ttu-id="4116d-212">Secundario</span><span class="sxs-lookup"><span data-stu-id="4116d-212">Secondary</span></span>|<span data-ttu-id="4116d-213">Solo intento de lectura</span><span class="sxs-lookup"><span data-stu-id="4116d-213">Read-intent only</span></span>|<span data-ttu-id="4116d-214">Lectura-escritura</span><span class="sxs-lookup"><span data-stu-id="4116d-214">Read-write</span></span>|  
  
 <span data-ttu-id="4116d-215">Normalmente, en este escenario de ejemplo, las conmutaciones por error solo se producen entre las réplicas de confirmación sincrónica, e inmediatamente después de la conmutación por error, las aplicaciones de intención de lectura pueden volver a conectarse a una de las réplicas secundarias de confirmación asincrónica.</span><span class="sxs-lookup"><span data-stu-id="4116d-215">Typically, in this example scenario, failovers occur only between the synchronous-commit replicas, and  immediately after the failover, read-intent applications are able to reconnect to one of the asynchronous-commit secondary replicas.</span></span> <span data-ttu-id="4116d-216">Sin embargo, cuando se produce un desastre en el centro de cálculo principal se pierden las réplicas de confirmación sincrónica.</span><span class="sxs-lookup"><span data-stu-id="4116d-216">However, when a disaster occurs at the main computing center both synchronous-commit replicas are lost.</span></span> <span data-ttu-id="4116d-217">El administrador de base de datos en el sitio satélite responde realizando una conmutación por error manual forzada a una réplica secundaria de confirmación asincrónica.</span><span class="sxs-lookup"><span data-stu-id="4116d-217">The database administrator at the satellite site responds by performing a forced manual failover to an asynchronous-commit secondary replica.</span></span> <span data-ttu-id="4116d-218">Las bases de datos secundarias de la réplica secundaria restante son suspendidas por la conmutación por error forzada, haciendo que no estén disponibles para las cargas de trabajo de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="4116d-218">The secondary databases on the remaining secondary replica are suspended by the forced failover, making them unavailable for read-only workloads.</span></span> <span data-ttu-id="4116d-219">La nueva réplica principal, configurada para las conexiones de lectura/escritura, impide que la carga de trabajo de intención de lectura compita con la carga de trabajo de lectura/escritura.</span><span class="sxs-lookup"><span data-stu-id="4116d-219">The new primary replica, which is configured for read-write connections, prevents the read-intent workload from competing with the read-write workload.</span></span> <span data-ttu-id="4116d-220">Esto significa que hasta que el administrador de base de datos reanude las bases de datos secundarias de la réplica secundaria de confirmación asincrónica restante, los clientes de intención de lectura no pueden conectarse a ninguna réplica de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="4116d-220">This means that until the database administrator resumes the secondary databases on the remaining asynchronous-commit secondary replica, read-intent clients cannot connect to any availability replica.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="4116d-221">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="4116d-221">Related Tasks</span></span>  
  
-   [<span data-ttu-id="4116d-222">Configurar el acceso de solo lectura en una réplica de disponibilidad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4116d-222">Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;</span></span>](configure-read-only-access-on-an-availability-replica-sql-server.md)  
  
-   [<span data-ttu-id="4116d-223">Configurar el enrutamiento de solo lectura para un grupo de disponibilidad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4116d-223">Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;</span></span>](configure-read-only-routing-for-an-availability-group-sql-server.md)  
  
-   [<span data-ttu-id="4116d-224">Supervisar grupos de disponibilidad &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4116d-224">Monitor Availability Groups &#40;Transact-SQL&#41;</span></span>](monitor-availability-groups-transact-sql.md)  
  
-   [<span data-ttu-id="4116d-225">Ver las propiedades de una réplica de disponibilidad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4116d-225">View Availability Replica Properties &#40;SQL Server&#41;</span></span>](view-availability-replica-properties-sql-server.md)  
  
-   [<span data-ttu-id="4116d-226">Usar el cuadro de diálogo Nuevo grupo de disponibilidad &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="4116d-226">Use the New Availability Group Dialog Box &#40;SQL Server Management Studio&#41;</span></span>](use-the-new-availability-group-dialog-box-sql-server-management-studio.md)  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="4116d-227">Contenido relacionado</span><span class="sxs-lookup"><span data-stu-id="4116d-227">Related Content</span></span>  
  
-   [<span data-ttu-id="4116d-228">Guía de soluciones AlwaysOn de Microsoft SQL Server para lograr alta disponibilidad y recuperación ante desastres</span><span class="sxs-lookup"><span data-stu-id="4116d-228">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)  
  
-   [<span data-ttu-id="4116d-229">Blog del equipo de AlwaysOn de SQL Server: el blog del equipo de AlwaysOn oficial de SQL Server</span><span class="sxs-lookup"><span data-stu-id="4116d-229">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
## <a name="see-also"></a><span data-ttu-id="4116d-230">Consulte también</span><span class="sxs-lookup"><span data-stu-id="4116d-230">See Also</span></span>  
 <span data-ttu-id="4116d-231">[Información general de Grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="4116d-231">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="4116d-232">[Agentes de escucha de grupo de disponibilidad, conectividad de cliente y conmutación por error de una aplicación &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="4116d-232">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 [<span data-ttu-id="4116d-233">estadísticas</span><span class="sxs-lookup"><span data-stu-id="4116d-233">Statistics</span></span>](../../../relational-databases/statistics/statistics.md)  
  
  
