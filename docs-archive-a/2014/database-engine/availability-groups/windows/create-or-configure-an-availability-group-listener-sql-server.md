---
title: Crear o configurar un agente de escucha del grupo de disponibilidad (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
f1_keywords:
- sql12.swb.availabilitygroup.newaglistener.general.f1
helpviewer_keywords:
- Availability Groups [SQL Server], listeners
- Availability Groups [SQL Server], client connectivity
ms.assetid: 2bc294f6-2312-4b6b-9478-2fb8a656e645
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 2c74e92286eab4bc1be8f3f538d83d86f056cf01
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87752349"
---
# <a name="create-or-configure-an-availability-group-listener-sql-server"></a><span data-ttu-id="0348f-102">Crear o configurar un agente de escucha del grupo de disponibilidad (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="0348f-102">Create or Configure an Availability Group Listener (SQL Server)</span></span>
  <span data-ttu-id="0348f-103">En este tema se describe cómo crear o configurar un único *agente de escucha de grupo de disponibilidad* para un grupo de disponibilidad AlwaysOn mediante [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] , [!INCLUDE[tsql](../../../includes/tsql-md.md)] o PowerShell en [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="0348f-103">This topic describes how to create or configure a single *availability group listener* for an AlwaysOn availability group by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)], or PowerShell in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="0348f-104">Para crear el primer agente de escucha del grupo de disponibilidad de un grupo de disponibilidad, se recomienda encarecidamente usar [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)]o [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0348f-104">To create the first availability group listener of an availability group, we strongly recommend that you [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)], or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell.</span></span> <span data-ttu-id="0348f-105">Evite crear un agente de escucha directamente en el clúster de WSFC salvo cuando sea necesario, por ejemplo para crear un agente de escucha adicional.</span><span class="sxs-lookup"><span data-stu-id="0348f-105">Avoid creating a listener directly in the WSFC cluster except when necessary, for example, to create an additional listener.</span></span>  
  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="0348f-106">Antes de comenzar</span><span class="sxs-lookup"><span data-stu-id="0348f-106">Before You Begin</span></span>  
  
###  <a name="does-a-listener-exist-for-this-availability-group-already"></a><a name="DoesListenerExist"></a> <span data-ttu-id="0348f-107">¿Existe ya un agente de escucha para este grupo de disponibilidad?</span><span class="sxs-lookup"><span data-stu-id="0348f-107">Does a Listener Exist for this Availability Group Already?</span></span>  
 <span data-ttu-id="0348f-108">**Para determinar si ya existe un agente de escucha para el grupo de disponibilidad**</span><span class="sxs-lookup"><span data-stu-id="0348f-108">**To determine whether a listener already exists for the availability group**</span></span>  
  
-   [<span data-ttu-id="0348f-109">Ver las propiedades del agente de escucha de grupo de disponibilidad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="0348f-109">View Availability Group Listener Properties &#40;SQL Server&#41;</span></span>](view-availability-group-listener-properties-sql-server.md)  
  
> [!NOTE]  
>  <span data-ttu-id="0348f-110">Si ya existe un agente de escucha y quiere crear otro, vea [Crear un agente de escucha adicional para un grupo de disponibilidad (opcional)](#CreateAdditionalListener)más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="0348f-110">If a listener already exists and you want to create an additional listener, see [To Create An Additional Listener for an Availability Group (Optional)](#CreateAdditionalListener), later in this topic.</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="0348f-111">Limitaciones y restricciones</span><span class="sxs-lookup"><span data-stu-id="0348f-111">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="0348f-112">Solo puede crear un agente de escucha por cada grupo de disponibilidad mediante [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0348f-112">You can create only one listener per availability group through [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="0348f-113">Normalmente, cada grupo de disponibilidad necesita un único agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-113">Typically, each availability group requires only one listener.</span></span> <span data-ttu-id="0348f-114">Sin embargo, algunos escenarios de clientes necesitan varios agentes de escucha para un grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0348f-114">However, some customer scenarios require multiple listeners for one availability group.</span></span>   <span data-ttu-id="0348f-115">Después de crear un agente de escucha mediante SQL Server, puede usar Windows PowerShell para los clústeres de conmutación por error o el Administrador de clústeres de conmutación por error de WSFC para crear agentes de escucha adicionales.</span><span class="sxs-lookup"><span data-stu-id="0348f-115">After creating a listener through SQL Server, you can use Windows PowerShell for failover clusters or the WSFC Failover Cluster Manager to create additional listeners.</span></span> <span data-ttu-id="0348f-116">Para obtener más información, vea [Crear un agente de escucha adicional para un grupo de disponibilidad (opcional)](#CreateAdditionalListener)más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="0348f-116">For more information, see [To Create An Additional Listener for an Availability Group (Optional)](#CreateAdditionalListener), later in this topic.</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="0348f-117">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="0348f-117">Recommendations</span></span>  
 <span data-ttu-id="0348f-118">Aunque no es obligatorio, se recomienda usar una dirección IP estática si hay varias configuraciones de subred.</span><span class="sxs-lookup"><span data-stu-id="0348f-118">Using a static IP address is recommended, although not required, for multiple subnet configurations.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="0348f-119">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="0348f-119">Prerequisites</span></span>  
  
-   <span data-ttu-id="0348f-120">Debe estar conectado a la instancia del servidor que hospeda la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="0348f-120">You must be connected to the server instance that hosts the primary replica.</span></span>  
  
-   <span data-ttu-id="0348f-121">Si está configurando un agente de escucha del grupo de disponibilidad a través de varias subredes y planea usar direcciones IP estáticas, debe obtener la dirección IP estática de cada subred que hospede una réplica de disponibilidad del grupo de disponibilidad para el que está creando el agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-121">If you are setting up an availability group listener across multiple subnets and plan to use static IP addresses, you need to get the static IP address of every subnet that hosts an availability replica for the availability group for which you are creating the listener.</span></span> <span data-ttu-id="0348f-122">Normalmente, necesitará solicitar a sus administradores de red las direcciones IP estáticas.</span><span class="sxs-lookup"><span data-stu-id="0348f-122">Usually, you will need to ask your network administrators for the static IP addresses.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="0348f-123">Antes de crear el primer agente de escucha, se recomienda encarecidamente leer [Conectividad de cliente de AlwaysOn &#40;SQL Server&#41;](always-on-client-connectivity-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="0348f-123">Before you create your first listener, we strongly recommend that you read [AlwaysOn Client Connectivity &#40;SQL Server&#41;](always-on-client-connectivity-sql-server.md).</span></span>  
  
###  <a name="requirements-for-the-dns-name-of-an-availability-group-listener"></a><a name="DNSnameReqs"></a> <span data-ttu-id="0348f-124">Requisitos del nombre DNS de un agente de escucha de grupo de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="0348f-124">Requirements for the DNS Name of an Availability Group Listener</span></span>  
 <span data-ttu-id="0348f-125">Cada agente de escucha de grupo de disponibilidad necesita un nombre de host DNS que sea único en el dominio y en NetBIOS.</span><span class="sxs-lookup"><span data-stu-id="0348f-125">Each availability group listener requires a DNS host name that is unique in the domain and in NetBIOS.</span></span> <span data-ttu-id="0348f-126">El nombre DNS es un valor de cadena.</span><span class="sxs-lookup"><span data-stu-id="0348f-126">The DNS name is a string value.</span></span> <span data-ttu-id="0348f-127">Este nombre solo puede contener caracteres alfanuméricos, guiones (-) y caracteres de subrayado (_), en cualquier orden.</span><span class="sxs-lookup"><span data-stu-id="0348f-127">This name can contain only alphanumeric characters, dashes (-), and hyphens (_), in any order.</span></span> <span data-ttu-id="0348f-128">Los nombres de host DNS no distinguen entre mayúsculas y minúsculas.</span><span class="sxs-lookup"><span data-stu-id="0348f-128">DNS host names are case insensitive.</span></span> <span data-ttu-id="0348f-129">La longitud máxima es de 63 caracteres; sin embargo, en [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], la longitud máxima que puede especificar es de 15 caracteres.</span><span class="sxs-lookup"><span data-stu-id="0348f-129">The maximum length is 63 characters, however, in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], the maximum length you can specify is 15 characters.</span></span>  
  
 <span data-ttu-id="0348f-130">Es recomendable que especifique una cadena que tenga sentido.</span><span class="sxs-lookup"><span data-stu-id="0348f-130">We recommend that you specify a meaningful string.</span></span> <span data-ttu-id="0348f-131">Por ejemplo, para un grupo de disponibilidad denominado `AG1`, un nombre de host DNS significativo sería `ag1-listener`.</span><span class="sxs-lookup"><span data-stu-id="0348f-131">For example, for an availability group named `AG1`, a meaningful DNS host name would be `ag1-listener`.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="0348f-132">NetBIOS reconoce solo los 15 primeros caracteres en dns_name.</span><span class="sxs-lookup"><span data-stu-id="0348f-132">NetBIOS recognizes only the first 15 chars in the dns_name.</span></span> <span data-ttu-id="0348f-133">Si tiene dos clústeres de WSFC controlados por la misma instancia de Active Directory e intenta crear agentes de escucha del grupo de disponibilidad en los dos clústeres utilizando nombres con más de 15 caracteres y un prefijo idéntico de 15 caracteres, obtendrá un error notificando que el recurso de nombre de red virtual no se pudo poner en línea.</span><span class="sxs-lookup"><span data-stu-id="0348f-133">If you have two WSFC clusters that are controlled by the same Active Directory and you try to create availability group listeners in both of clusters using names with more than 15 characters and an identical 15 character prefix, you will get an error reporting that the Virtual Network Name resource could not be brought online.</span></span> <span data-ttu-id="0348f-134">Para obtener información acerca de las reglas de nomenclatura de prefijos para los nombres DNS, vea [Asignación de nombres de dominio](https://technet.microsoft.com/library/cc731265\(WS.10\).aspx).</span><span class="sxs-lookup"><span data-stu-id="0348f-134">For information about prefix naming rules for DNS names, see [Assigning Domain Names](https://technet.microsoft.com/library/cc731265\(WS.10\).aspx).</span></span>  
  
###  <a name="windows-permissions"></a><a name="WinPermissions"></a> <span data-ttu-id="0348f-135">Permisos de Windows</span><span class="sxs-lookup"><span data-stu-id="0348f-135">Windows Permissions</span></span>  
  
|<span data-ttu-id="0348f-136">Permisos</span><span class="sxs-lookup"><span data-stu-id="0348f-136">Permissions</span></span>|<span data-ttu-id="0348f-137">Vínculo</span><span class="sxs-lookup"><span data-stu-id="0348f-137">Link</span></span>|  
|-----------------|----------|  
|<span data-ttu-id="0348f-138">El nombre de objeto de clúster (CNO) del clúster de WSFC que hospeda el grupo de disponibilidad debe tener permiso para **crear objetos de equipo** .</span><span class="sxs-lookup"><span data-stu-id="0348f-138">The cluster object name (CNO) of WSFC cluster that is hosting the availability group must have **Create Computer objects** permission.</span></span><br /><br /> <span data-ttu-id="0348f-139">En Active Directory, un CNO de forma predeterminada no tiene permiso para **crear objetos de equipo** explícitamente y puede crear diez objetos de equipo virtual (VCO).</span><span class="sxs-lookup"><span data-stu-id="0348f-139">In Active Directory, a CNO by default does not have **Create Computer objects** permission explicitly and can create 10 virtual computer objects (VCOs).</span></span> <span data-ttu-id="0348f-140">Una vez creados los 10 VCO, no podrán crearse otros adicionales.</span><span class="sxs-lookup"><span data-stu-id="0348f-140">After 10 VCOs are created, the creation of additional VCOs will fail.</span></span> <span data-ttu-id="0348f-141">Puede evitar esto si concede el permiso de forma explícita al CNO del clúster de WSFC.</span><span class="sxs-lookup"><span data-stu-id="0348f-141">You can avoid this by granting the permission explicitly to the WSFC cluster's CNO.</span></span> <span data-ttu-id="0348f-142">Observe que los VCO para los grupos de disponibilidad que ha eliminado no son eliminados de forma automática en Active Directory y se contabilizan para el límite predeterminado de 10 VCO a menos que sean eliminados de forma manual.</span><span class="sxs-lookup"><span data-stu-id="0348f-142">Note that VCOs for availability groups that you have deleted are not automatically deleted in Active Directory and count against your 10 VCO default limit unless they are manually deleted.</span></span><br /><br /> <span data-ttu-id="0348f-143">Nota: En algunas organizaciones, la directiva de seguridad prohíbe conceder permiso para **crear objetos de equipo** a cuentas de usuario individuales.</span><span class="sxs-lookup"><span data-stu-id="0348f-143">Note: In some organizations, the security policy prohibits granting **Create Computer objects** permission to individual user accounts.</span></span>|<span data-ttu-id="0348f-144">*Pasos para configurar la cuenta para el usuario que instala el clúster* en la [Guía paso a paso de clústeres de conmutación por error: configurar cuentas en Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx#BKMK_steps_installer)</span><span class="sxs-lookup"><span data-stu-id="0348f-144">*Steps for configuring the account for the person who installs the cluster* in [Failover Cluster Step-by-Step Guide: Configuring Accounts in Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx#BKMK_steps_installer)</span></span><br /><br /> <span data-ttu-id="0348f-145">*Pasos para preconfigurar la cuenta de nombre de clúster* en la [Guía paso a paso de clústeres de conmutación por error: configurar cuentas en Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx#BKMK_steps_precreating)</span><span class="sxs-lookup"><span data-stu-id="0348f-145">*Steps for prestaging the cluster name account* in [Failover Cluster Step-by-Step Guide: Configuring Accounts in Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx#BKMK_steps_precreating)</span></span>|  
|<span data-ttu-id="0348f-146">Si su organización necesita que preconfigure la cuenta de equipo para un nombre de red virtual de agente de escucha, deberá pertenecer al grupo **Operador de cuentas** o pedir ayuda a su administrador de dominio.</span><span class="sxs-lookup"><span data-stu-id="0348f-146">If your organization requires that you prestage the computer account for a listener virtual network name, you will need membership in the **Account Operator** group or your domain administrator's assistance.</span></span><br /><br /> <span data-ttu-id="0348f-147">Sugerencia: generalmente, es más sencillo no preconfigurar la cuenta del equipo para un nombre de red virtual de agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-147">Tip: Generally, it is simplest not to prestage the computer account for a listener virtual network name.</span></span> <span data-ttu-id="0348f-148">Si puede, deje que la cuenta se cree y configure automáticamente al ejecutar el asistente para alta disponibilidad de WSFC.</span><span class="sxs-lookup"><span data-stu-id="0348f-148">If you can, let the account to be created and configured automatically when you run the WSFC High Availability wizard.</span></span>|<span data-ttu-id="0348f-149">*Steps for prestaging an account for a clustered service or application (Pasos para el ensayo previo de una cuenta para un servicio o una aplicación en clúster)* en la [Failover Cluster Step-by-Step Guide: Configuring Accounts in Active Directory (Guía paso a paso de clúster de conmutación por error: configurar cuentas en Active Directory)](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx#BKMK_steps_precreating2).</span><span class="sxs-lookup"><span data-stu-id="0348f-149">*Steps for prestaging an account for a clustered service or application* in [Failover Cluster Step-by-Step Guide: Configuring Accounts in Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx#BKMK_steps_precreating2).</span></span>|  
  
###  <a name="sql-server-permissions"></a><a name="SqlPermissions"></a> <span data-ttu-id="0348f-150">Permisos de SQL Server</span><span class="sxs-lookup"><span data-stu-id="0348f-150">SQL Server Permissions</span></span>  
  
|<span data-ttu-id="0348f-151">Tarea</span><span class="sxs-lookup"><span data-stu-id="0348f-151">Task</span></span>|<span data-ttu-id="0348f-152">Permisos</span><span class="sxs-lookup"><span data-stu-id="0348f-152">Permissions</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="0348f-153">Para crear un agente de escucha del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0348f-153">To create an availability group listener</span></span>|<span data-ttu-id="0348f-154">Se requiere la pertenencia al rol fijo de servidor **sysadmin** y el permiso de servidor CREATE AVAILABILITY GROUP, el permiso ALTER ANY AVAILABILITY GROUP o el permiso CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="0348f-154">Requires membership in the **sysadmin** fixed server role and either CREATE AVAILABILITY GROUP server permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
|<span data-ttu-id="0348f-155">Para modificar un agente de escucha del grupo de disponibilidad existente</span><span class="sxs-lookup"><span data-stu-id="0348f-155">To modify an existing availability group listener</span></span>|<span data-ttu-id="0348f-156">Se requiere el permiso ALTER AVAILABILITY GROUP en el grupo de disponibilidad, el permiso CONTROL AVAILABILITY GROUP, el permiso ALTER ANY AVAILABILITY GROUP o el permiso CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="0348f-156">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="0348f-157">Uso de SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="0348f-157">Using SQL Server Management Studio</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="0348f-158">El [Asistente para nuevo grupo de disponibilidad](use-the-new-availability-group-dialog-box-sql-server-management-studio.md) admite la creación del agente de escucha de un nuevo grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0348f-158">The [New Availability Group wizard](use-the-new-availability-group-dialog-box-sql-server-management-studio.md) supports creation of the listener for a new availability group.</span></span>  
  
 <span data-ttu-id="0348f-159">**Para crear o configurar un agente de escucha del grupo de disponibilidad**</span><span class="sxs-lookup"><span data-stu-id="0348f-159">**To create or configure an availability group listener**</span></span>  
  
1.  <span data-ttu-id="0348f-160">En el Explorador de objetos, conéctese a la instancia del servidor que hospeda la réplica principal del grupo de disponibilidad y haga clic en el nombre del servidor para expandir el árbol.</span><span class="sxs-lookup"><span data-stu-id="0348f-160">In Object Explorer, connect to the server instance that hosts the primary replica of the availability group, and click the server name to expand the server tree.</span></span>  
  
2.  <span data-ttu-id="0348f-161">Expanda los nodos **Alta disponibilidad de AlwaysOn** y **Grupos de disponibilidad** .</span><span class="sxs-lookup"><span data-stu-id="0348f-161">Expand the **AlwaysOn High Availability** node and the **Availability Groups** node.</span></span>  
  
3.  <span data-ttu-id="0348f-162">Haga clic en el grupo de disponibilidad cuyo agente de escucha desea configurar y elija una de las alternativas siguientes:</span><span class="sxs-lookup"><span data-stu-id="0348f-162">Click the availability group whose listener you want to configure, and choose one of the following alternatives:</span></span>  
  
    -   <span data-ttu-id="0348f-163">Para crear un agente de escucha, haga clic con el botón derecho en el nodo **Agentes de escucha de grupo de disponibilidad** y seleccione el comando **Nuevo agente de escucha** .</span><span class="sxs-lookup"><span data-stu-id="0348f-163">To create a listener, right-click the **Availability group Listeners** node, and select the **New Listener** command.</span></span> <span data-ttu-id="0348f-164">Se abrirá el cuadro de diálogo de **Nuevo agente de escucha del grupo de disponibilidad** .</span><span class="sxs-lookup"><span data-stu-id="0348f-164">This opens the **New Availability Group Listener** dialog box.</span></span> <span data-ttu-id="0348f-165">Para obtener más información, vea [Agregar agente de escucha de grupo de disponibilidad (cuadro de diálogo)](#AddAgListenerDialog)más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="0348f-165">For more information, see [Add Availability Group Listener (Dialog Box)](#AddAgListenerDialog), later in this topic.</span></span>  
  
    -   <span data-ttu-id="0348f-166">Para cambiar el número de puerto de un agente de escucha existente, expanda el nodo **Agentes de escucha de grupo de disponibilidad** , haga clic con el botón derecho en el agente de escucha y seleccione el comando **Propiedades** .</span><span class="sxs-lookup"><span data-stu-id="0348f-166">To change the port number of an existing listener, expand the **Availability group Listeners** node, right-click the listener, and select the **Properties** command.</span></span> <span data-ttu-id="0348f-167">Escriba el nuevo número de puerto en el campo **Puerto** y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="0348f-167">Enter the new port number into the **Port** field, and click **OK**.</span></span>  
  
###  <a name="new-availability-group-listener-dialog-box"></a><a name="AddAgListenerDialog"></a> <span data-ttu-id="0348f-168">Nuevo agente de escucha del grupo de disponibilidad (cuadro de diálogo)</span><span class="sxs-lookup"><span data-stu-id="0348f-168">New Availability Group Listener (Dialog Box)</span></span>  
 <span data-ttu-id="0348f-169">**Nombre DNS del agente de escucha**</span><span class="sxs-lookup"><span data-stu-id="0348f-169">**Listener DNS Name**</span></span>  
 <span data-ttu-id="0348f-170">Especifica el nombre de host DNS del agente de escucha del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0348f-170">Specifies the DNS host name of the availability group listener.</span></span> <span data-ttu-id="0348f-171">El nombre DNS es una cadena que debe ser única en el dominio y en NetBIOS.</span><span class="sxs-lookup"><span data-stu-id="0348f-171">The DNS name is a string  must be unique in the domain and in NetBIOS.</span></span> <span data-ttu-id="0348f-172">Este nombre solo puede contener caracteres alfanuméricos, guiones (-) y caracteres de subrayado (_), en cualquier orden.</span><span class="sxs-lookup"><span data-stu-id="0348f-172">This name can contain only alphanumeric characters, dashes (-), and hyphens (_), in any order.</span></span> <span data-ttu-id="0348f-173">Los nombres de host DNS no distinguen entre mayúsculas y minúsculas.</span><span class="sxs-lookup"><span data-stu-id="0348f-173">DNS host names are case insensitive.</span></span> <span data-ttu-id="0348f-174">La longitud máxima es de 15 caracteres.</span><span class="sxs-lookup"><span data-stu-id="0348f-174">The maximum length is 15 characters.</span></span>  
  
 <span data-ttu-id="0348f-175">Para obtener más información, vea [Requisitos del nombre DNS de un agente de escucha de grupo de disponibilidad](#DNSnameReqs), anteriormente en este tema.</span><span class="sxs-lookup"><span data-stu-id="0348f-175">For more information, see [Requirements for the DNS Name of an Availability Group Listener](#DNSnameReqs), earlier in this topic.</span></span>  
  
 <span data-ttu-id="0348f-176">**Puerto**</span><span class="sxs-lookup"><span data-stu-id="0348f-176">**Port**</span></span>  
 <span data-ttu-id="0348f-177">El puerto TCP usado por este agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-177">The TPC port used by this listener.</span></span>  
  
 <span data-ttu-id="0348f-178">**Modo de red**</span><span class="sxs-lookup"><span data-stu-id="0348f-178">**Network Mode**</span></span>  
 <span data-ttu-id="0348f-179">Indica el protocolo TCP utilizado por el agente de escucha; puede ser:</span><span class="sxs-lookup"><span data-stu-id="0348f-179">Indicates the TCP protocol used by the listener, one of:</span></span>  
  
 <span data-ttu-id="0348f-180">**DHCP**</span><span class="sxs-lookup"><span data-stu-id="0348f-180">**DHCP**</span></span>  
 <span data-ttu-id="0348f-181">El agente de escucha nos pedirá una dirección IP dinámica asignada por un servidor que ejecute el protocolo DHCP (Protocolo de configuración dinámica de host).</span><span class="sxs-lookup"><span data-stu-id="0348f-181">The listener will us a dynamic IP address that is assigned by a server running the Dynamic Host Configuration Protocol (DHCP).</span></span> <span data-ttu-id="0348f-182">DHCP está limitado a una sola subred.</span><span class="sxs-lookup"><span data-stu-id="0348f-182">DHCP is limited to a single subnet.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="0348f-183">No se recomienda DHCP en el entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="0348f-183">We do not recommend DHCP in production environment.</span></span> <span data-ttu-id="0348f-184">Si hay un tiempo de inactividad y expira la concesión de IP para DHCP, se necesitará más tiempo para registrar la nueva dirección IP de red DHCP que está asociada con el nombre DNS de escucha, lo que puede afectar a la conectividad de cliente.</span><span class="sxs-lookup"><span data-stu-id="0348f-184">If there is a down time and the DHCP IP lease expires, extra time is required to register the new DHCP network IP address that is associated with the listener DNS name and impact the client connectivity.</span></span> <span data-ttu-id="0348f-185">Sin embargo, DHCP es adecuado para configurar el entorno de desarrollo y pruebas para comprobar características básicas de los grupos de disponibilidad y para la integración con las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0348f-185">However, DHCP is good for setting up your development and testing environment to verify basic functions of availability groups and for integration with your applications.</span></span>  
  
 <span data-ttu-id="0348f-186">**Dirección IP estática**</span><span class="sxs-lookup"><span data-stu-id="0348f-186">**Static IP**</span></span>  
 <span data-ttu-id="0348f-187">El agente de escucha utilizará una o más direcciones IP estáticas.</span><span class="sxs-lookup"><span data-stu-id="0348f-187">The listener will use one or more static IP addresses.</span></span> <span data-ttu-id="0348f-188">Las direcciones IP adicionales son opcionales.</span><span class="sxs-lookup"><span data-stu-id="0348f-188">Additional IP addresses are optional.</span></span> <span data-ttu-id="0348f-189">Para crear un agente de escucha del grupo de disponibilidad a través de varias subredes, para cada subred se debe especificar una dirección IP estática en la configuración del agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-189">To create an availability group listener across multiple subnets, for each subnet you must specify a static IP address in the listener configuration.</span></span> <span data-ttu-id="0348f-190">Póngase en contacto con su administrador de red para obtener estas direcciones IP estáticas.</span><span class="sxs-lookup"><span data-stu-id="0348f-190">Contact your network administrator to get these static IP addresses.</span></span>  
  
 <span data-ttu-id="0348f-191">Si selecciona **Dirección IP estática** , aparecerá una cuadrícula de subred debajo del campo **Modo de red** .</span><span class="sxs-lookup"><span data-stu-id="0348f-191">If you select **Static IP** a subnet grid appears below the **Network Mode** field.</span></span> <span data-ttu-id="0348f-192">Esta cuadrícula muestra información sobre cada subred a la que puede tener acceso este agente de escucha del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0348f-192">This grid displays information about each subnet that can be accessed by this availability group listener.</span></span> <span data-ttu-id="0348f-193">Esta cuadrícula estará vacía hasta que agregue una dirección IP estática haciendo clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="0348f-193">This grid is empty until you add a static IP address by clicking **Add**.</span></span>  
  
 <span data-ttu-id="0348f-194">Estas son sus columnas:</span><span class="sxs-lookup"><span data-stu-id="0348f-194">The columns are as follows:</span></span>  
  
 <span data-ttu-id="0348f-195">**Subred**</span><span class="sxs-lookup"><span data-stu-id="0348f-195">**Subnet**</span></span>  
 <span data-ttu-id="0348f-196">Muestra el identificador de cada subred que se agrega al agente de escucha del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0348f-196">Displays the identifier of each subnet that you add to the availability group listener.</span></span>  
  
 <span data-ttu-id="0348f-197">**Dirección IP**</span><span class="sxs-lookup"><span data-stu-id="0348f-197">**IP Address**</span></span>  
 <span data-ttu-id="0348f-198">Muestra la dirección IP de una subred determinada.</span><span class="sxs-lookup"><span data-stu-id="0348f-198">Displays the IP address of a given subnet.</span></span>  <span data-ttu-id="0348f-199">Para una subred determinada, la dirección IP es una dirección IPv4 o una dirección IPv6.</span><span class="sxs-lookup"><span data-stu-id="0348f-199">For a given subnet, the IP address is either an IPv4 address or an IPv6 address.</span></span>  
  
 <span data-ttu-id="0348f-200">**Add (Agregar)**</span><span class="sxs-lookup"><span data-stu-id="0348f-200">**Add**</span></span>  
 <span data-ttu-id="0348f-201">Haga clic en Agregar para agregar una dirección IP estática a una subred seleccionada o a otra subred para este agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-201">Click to add to add a static IP address to a selected subnet or to another subnet for this listener.</span></span> <span data-ttu-id="0348f-202">Se abrirá el cuadro de diálogo de **Agregar dirección IP** .</span><span class="sxs-lookup"><span data-stu-id="0348f-202">This opens the **Add IP Address** dialog box.</span></span> <span data-ttu-id="0348f-203">Para obtener más información, vea el tema de ayuda [Agregar dirección IP &#40;cuadro de diálogo - SQL Server Management Studio&#41;](add-ip-address-dialog-box-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="0348f-203">For more information, see the [Add IP Address Dialog Box &#40;SQL Server Management Studio&#41;](add-ip-address-dialog-box-sql-server-management-studio.md) help topic.</span></span>  
  
 <span data-ttu-id="0348f-204">**Remove**</span><span class="sxs-lookup"><span data-stu-id="0348f-204">**Remove**</span></span>  
 <span data-ttu-id="0348f-205">Haga clic para quitar la subred seleccionada de este agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-205">Click to remove the selected subnet from this listener.</span></span>  
  
 <span data-ttu-id="0348f-206">**OK (CORRECTO)**</span><span class="sxs-lookup"><span data-stu-id="0348f-206">**OK**</span></span>  
 <span data-ttu-id="0348f-207">Haga clic para crear el agente de escucha del grupo de disponibilidad especificado.</span><span class="sxs-lookup"><span data-stu-id="0348f-207">Click to create the specified availability group listener.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="0348f-208">Usar Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="0348f-208">Using Transact-SQL</span></span>  

### <a name="to-create-or-configure-an-availability-group-listener"></a><span data-ttu-id="0348f-209">Para crear o configurar un agente de escucha del grupo de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="0348f-209">To create or configure an availability group listener</span></span>
  
1.  <span data-ttu-id="0348f-210">Conéctese a la instancia del servidor que hospeda la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="0348f-210">Connect to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="0348f-211">Use la opción LISTENER de la instrucción [CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql) o la opción ADD LISTENER de la instrucción [ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="0348f-211">Use the LISTENER option of the [CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql) statement or the ADD LISTENER option of the [ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) statement.</span></span>  
  
     <span data-ttu-id="0348f-212">En el siguiente ejemplo se agrega un agente de escucha de grupo de disponibilidad a un grupo de disponibilidad existente denominado `MyAg2`.</span><span class="sxs-lookup"><span data-stu-id="0348f-212">The following example adds an availability group listener to an existing availability group named `MyAg2`.</span></span> <span data-ttu-id="0348f-213">Un nombre DNS único, `MyAg2ListenerIvP6`, se especifica para este agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-213">A unique DNS name, `MyAg2ListenerIvP6`, is specified for this listener.</span></span> <span data-ttu-id="0348f-214">Las dos réplicas se encuentran en distintas subredes, por lo que, según lo recomendado, el agente de escucha usa direcciones IP estáticas.</span><span class="sxs-lookup"><span data-stu-id="0348f-214">The two replicas are on different subnets, so , as recommended, the listener uses static IP addresses.</span></span> <span data-ttu-id="0348f-215">En cada una de las dos réplicas de disponibilidad, la cláusula WITH IP especifica una dirección IP estática, `2001:4898:f0:f00f::cf3c and 2001:4898:e0:f213::4ce2`, que usa el formato IPv6.</span><span class="sxs-lookup"><span data-stu-id="0348f-215">For each of the two availability replicas, the WITH IP clause specifies a static IP address, `2001:4898:f0:f00f::cf3c and 2001:4898:e0:f213::4ce2`, which use the IPv6 format.</span></span> <span data-ttu-id="0348f-216">Este ejemplo especifica también que se use el argumento opcional PORT para definir el puerto `60173` como puerto de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-216">This example also specifies uses the optional PORT argument to specify port `60173` as the listener port.</span></span>  
  
    ```sql
    ALTER AVAILABILITY GROUP MyAg2   
          ADD LISTENER 'MyAg2ListenerIvP6' ( WITH IP ( ('2001:db88:f0:f00f::cf3c'),('2001:4898:e0:f213::4ce2') ) , PORT = 60173 );   
    GO  
    ```  
  
##  <a name="using-powershell"></a><a name="PowerShellProcedure"></a> <span data-ttu-id="0348f-217">Usar PowerShell</span><span class="sxs-lookup"><span data-stu-id="0348f-217">Using PowerShell</span></span>  

### <a name="to-create-or-configure-an-availability-group-listener"></a><span data-ttu-id="0348f-218">Para crear o configurar un agente de escucha del grupo de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="0348f-218">To create or configure an availability group listener</span></span> 
  
1.  <span data-ttu-id="0348f-219">Cambie el directorio (`cd`) a la instancia de servidor que hospeda la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="0348f-219">Change directory (`cd`) to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="0348f-220">Para crear o modificar un agente de escucha del grupo de disponibilidad utilice uno de los cmdlets siguientes:</span><span class="sxs-lookup"><span data-stu-id="0348f-220">To create or modify an availability group listener use one of the following cmdlets:</span></span>  
  
     `New-SqlAvailabilityGroupListener`  
     <span data-ttu-id="0348f-221">Crea un nuevo agente de escucha del grupo de disponibilidad y lo adjunta a un grupo de disponibilidad existente.</span><span class="sxs-lookup"><span data-stu-id="0348f-221">Creates a new availability group listener and attaches it to an existing availability group.</span></span>  
  
     <span data-ttu-id="0348f-222">Por ejemplo, el comando `New-SqlAvailabilityGroupListener` siguiente crea un agente de escucha de grupo de disponibilidad denominado `MyListener` para el grupo de disponibilidad `MyAg`.</span><span class="sxs-lookup"><span data-stu-id="0348f-222">For example, the following `New-SqlAvailabilityGroupListener` command creates an availability group listener named `MyListener` for the availability group `MyAg`.</span></span> <span data-ttu-id="0348f-223">Este agente de escucha usará la dirección IPv4 pasada al parámetro `-StaticIp` como su dirección IP virtual.</span><span class="sxs-lookup"><span data-stu-id="0348f-223">This listener will use the IPv4 address passed to the `-StaticIp` parameter as its virtual IP address.</span></span>  
  
    ```powershell
    New-SqlAvailabilityGroupListener -Name MyListener `
    -StaticIp '192.168.3.1/255.255.252.0' `
    -Path SQLSERVER:\Sql\Computer\Instance\AvailabilityGroups\MyAg
    ```  
  
     `Set-SqlAvailabilityGroupListener`  
     <span data-ttu-id="0348f-224">Modifica la configuración del puerto en un agente de escucha del grupo de disponibilidad existente.</span><span class="sxs-lookup"><span data-stu-id="0348f-224">Modifies the port setting on an existing availability group listener.</span></span>  
  
     <span data-ttu-id="0348f-225">Por ejemplo, el comando `Set-SqlAvailabilityGroupListener` siguiente establece el número de puerto del agente de escucha de grupo de disponibilidad denominado `MyListener` en `1535`.</span><span class="sxs-lookup"><span data-stu-id="0348f-225">For example, the following `Set-SqlAvailabilityGroupListener` command sets the port number for the availability group listener named `MyListener` to `1535`.</span></span> <span data-ttu-id="0348f-226">Este puerto se usa para escuchar las conexiones del agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-226">This port is used to listen for connections to the listener.</span></span>  
  
    ```powershell
    Set-SqlAvailabilityGroupListener -Port 1535 `
    -Path SQLSERVER:\Sql\PrimaryServer\InstanceName\AvailabilityGroups\MyAg\AGListeners\MyListener  
    ```  
  
     `Add-SqlAGListenerstaticIp`  
     <span data-ttu-id="0348f-227">Agrega una dirección IP estática a una configuración de agente de escucha del grupo de disponibilidad existente.</span><span class="sxs-lookup"><span data-stu-id="0348f-227">Adds a static IP address to an existing availability group listener configuration.</span></span> <span data-ttu-id="0348f-228">La dirección IP estática puede ser una dirección IPv4 con subred o una dirección IPv6.</span><span class="sxs-lookup"><span data-stu-id="0348f-228">The IP address can be an IPv4 address with subnet, or an IPv6 address.</span></span>  
  
     <span data-ttu-id="0348f-229">Por ejemplo, el comando `Add-SqlAGListenerstaticIp` siguiente agrega una dirección IPv4 estática al agente de escucha `MyListener` del grupo de disponibilidad `MyAg`.</span><span class="sxs-lookup"><span data-stu-id="0348f-229">For example, the following `Add-SqlAGListenerstaticIp` command adds a static IPv4 address to the availability group listener `MyListener` on the availability group `MyAg`.</span></span> <span data-ttu-id="0348f-230">Esta dirección IPv6 actúa como dirección IP virtual del agente de escucha de la subred `255.255.252.0`.</span><span class="sxs-lookup"><span data-stu-id="0348f-230">This IPv6 address serves as the virtual IP address of the listener on the subnet `255.255.252.0`.</span></span> <span data-ttu-id="0348f-231">Si el grupo de disponibilidad abarca varias subredes, debe agregar una dirección IP estática para cada subred al agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-231">If the availability group spans multiple subnets, you should add a static IP address for each subnet to the listener.</span></span>  
  
    ```powershell
    $path = "SQLSERVER:\SQL\PrimaryServer\InstanceName\AvailabilityGroups\MyAg\AGListeners\ MyListener" `
    Add-SqlAGListenerstaticIp -Path $path `
    -StaticIp "2001:0db8:85a3:0000:0000:8a2e:0370:7334"  
    ```  
  
    > [!NOTE]  
    >  <span data-ttu-id="0348f-232">Para ver la sintaxis de un cmdlet, use el cmdlet **Get-Help** en el [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] entorno de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0348f-232">To view the syntax of a cmdlet, use the **Get-Help**  cmdlet in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell environment.</span></span> <span data-ttu-id="0348f-233">Para más información, consulte [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="0348f-233">For more information, see [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span></span>  
  
<span data-ttu-id="0348f-234">Para configurar y usar el proveedor de SQL Server PowerShell, vea [proveedor de SQL Server PowerShell](../../../powershell/sql-server-powershell-provider.md).</span><span class="sxs-lookup"><span data-stu-id="0348f-234">To set up and use the SQL Server PowerShell provider, see [SQL Server PowerShell Provider](../../../powershell/sql-server-powershell-provider.md).</span></span>
  
## <a name="troubleshooting"></a><span data-ttu-id="0348f-235">Solución de problemas</span><span class="sxs-lookup"><span data-stu-id="0348f-235">Troubleshooting</span></span>  
  
###  <a name="failure-to-create-an-availability-group-listener-because-of-active-directory-quotas"></a><a name="ADQuotas"></a><span data-ttu-id="0348f-236">No se pudo crear un agente de escucha del grupo de disponibilidad debido a Active Directory cuotas</span><span class="sxs-lookup"><span data-stu-id="0348f-236">Failure to Create An Availability Group Listener Because of Active Directory Quotas</span></span>  
 <span data-ttu-id="0348f-237">La creación de un nuevo agente de escucha del grupo de disponibilidad puede producir un error en la creación porque se ha alcanzado una cuota de Active Directory para la cuenta de equipo del nodo de clúster que participa.</span><span class="sxs-lookup"><span data-stu-id="0348f-237">The creation of a new availability group listener may fail upon creation because you have reached an Active Directory quota for the participating cluster node machine account.</span></span>  <span data-ttu-id="0348f-238">Para más información, consulte los siguientes artículos.</span><span class="sxs-lookup"><span data-stu-id="0348f-238">For more information, see the following articles:</span></span>  
  
-   [<span data-ttu-id="0348f-239">HYPERLINK " https://support.microsoft.com/kb/307532 " cómo solucionar problemas de la cuenta de servicio de Cluster Server cuando modifica objetos de equipo</span><span class="sxs-lookup"><span data-stu-id="0348f-239">HYPERLINK "https://support.microsoft.com/kb/307532" How to Troubleshoot the Cluster Service Account When It Modifies Computer Objects</span></span>](https://support.microsoft.com/kb/307532)  
  
-   <span data-ttu-id="0348f-240">[Hipervínculo " https://technet.microsoft.com/library/cc904295(WS.10).aspx " Active Directory cuotas](https://technet.microsoft.com/library/cc904295\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="0348f-240">[HYPERLINK "https://technet.microsoft.com/library/cc904295(WS.10).aspx" Active Directory Quotas](https://technet.microsoft.com/library/cc904295\(WS.10\).aspx)</span></span>  
  
##  <a name="follow-up-after-creating-an-availability-group-listener"></a><a name="FollowUp"></a><span data-ttu-id="0348f-241">Seguimiento: después de crear un agente de escucha del grupo de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="0348f-241">Follow-up: After Creating an Availability Group Listener</span></span>  
  
###  <a name="multisubnetfailover-keyword-and-associated-features"></a><a name="MultiSubnetFailover"></a><span data-ttu-id="0348f-242">Palabra clave MultiSubnetFailover y características asociadas</span><span class="sxs-lookup"><span data-stu-id="0348f-242">MultiSubnetFailover Keyword and Associated Features</span></span>  
 <span data-ttu-id="0348f-243">`MultiSubnetFailover` es una nueva palabra clave de la cadena de conexión que se usa para habilitar la conmutación por error más rápida con los grupos de disponibilidad AlwaysOn y las instancias de clúster de conmutación por error AlwaysOn en SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="0348f-243">`MultiSubnetFailover` is a new connection string keyword used to enable faster failover with AlwaysOn Availability Groups and AlwaysOn Failover Cluster Instances in SQL Server 2012.</span></span> <span data-ttu-id="0348f-244">Las tres subcaracterísticas siguientes se habilitan cuando se establece `MultiSubnetFailover=True` en la cadena de conexión:</span><span class="sxs-lookup"><span data-stu-id="0348f-244">The following three sub-features are enabled when `MultiSubnetFailover=True` is set in connection string:</span></span>  
  
-   <span data-ttu-id="0348f-245">Conmutación por error de varias subredes más rápida a un agente de escucha de varias subredes para instancias del clúster de conmutación por error o un grupo de disponibilidad AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="0348f-245">Faster multi-subnet failover to a multi-subnet listener for an AlwaysOn Availability Group or Failover Cluster Instances.</span></span>  
  
-   <span data-ttu-id="0348f-246">Conmutación por error de una sola subred más rápida a un agente de escucha de una sola subred para instancias del clúster de conmutación por error o un grupo de disponibilidad AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="0348f-246">Faster single subnet failover to a single subnet listener for an AlwaysOn Availability Group or Failover Cluster Instances.</span></span>  
  
    -   <span data-ttu-id="0348f-247">Esta característica se usa al conectarse a un agente de escucha que solo tiene una dirección IP en una sola subred.</span><span class="sxs-lookup"><span data-stu-id="0348f-247">This feature is used when connecting to a listener that has a single IP in a single subnet.</span></span> <span data-ttu-id="0348f-248">Así, se realizan más reintentos de conexión TCP para acelerar las conmutaciones por error en una sola subred.</span><span class="sxs-lookup"><span data-stu-id="0348f-248">This performs more aggressive TCP connection retries to speed up single subnet failovers.</span></span>  
  
-   <span data-ttu-id="0348f-249">Resolución de una instancia con nombre en una instancia de clúster por conmutación por error AlwaysOn de varias subredes.</span><span class="sxs-lookup"><span data-stu-id="0348f-249">Named instance resolution to a multi-subnet AlwaysOn Failover Cluster Instance.</span></span>  
  
    -   <span data-ttu-id="0348f-250">Esto sirve para agregar compatibilidad con la resolución de una instancia con nombre para instancias del clúster de conmutación por error AlwaysOn con varios extremos de subred.</span><span class="sxs-lookup"><span data-stu-id="0348f-250">This is to add named instance resolution support for an AlwaysOn Failover Cluster Instances with multiple subnet endpoints.</span></span>  
  
 <span data-ttu-id="0348f-251">**MultiSubnetFailover=True no se admite en .NET Framework 3.5 u OLEDB**</span><span class="sxs-lookup"><span data-stu-id="0348f-251">**MultiSubnetFailover=True Not Supported by NET Framework 3.5 or OLEDB**</span></span>  
  
 <span data-ttu-id="0348f-252">**Problema:** Si el grupo de disponibilidad o la instancia de clúster de conmutación por error tiene un nombre de agente de escucha (conocido como el nombre de red o el punto de acceso de cliente en el administrador de clústeres de WSFC) en función de varias direcciones IP de distintas subredes, y usa .NET Framework ADO.NET 3.5 SP1 o SQL Native Client 11,0 OLEDB, es posible que el 50% de las solicitudes de conexión de cliente al agente</span><span class="sxs-lookup"><span data-stu-id="0348f-252">**Issue:** If your Availability Group or Failover Cluster Instance has a listener name (known as the network name or Client Access Point in the WSFC Cluster Manager) depending on multiple IP addresses from different subnets, and you are using either ADO.NET with .NET Framework 3.5SP1 or SQL Native Client 11.0 OLEDB, potentially 50% of your client-connection requests to the availability group listener will hit a connection timeout.</span></span>  
  
 <span data-ttu-id="0348f-253">**Soluciones alternativas:** le recomendamos que realice una de las tareas siguientes.</span><span class="sxs-lookup"><span data-stu-id="0348f-253">**Workarounds:** We recommend that you do one of the following tasks.</span></span>  
  
-   <span data-ttu-id="0348f-254">Si no tiene permiso para manipular recursos de clúster, cambie el tiempo de espera de la conexión a 30 segundos (este valor produce un tiempo de espera de TCP de 20 segundos además de un búfer de 10 segundos).</span><span class="sxs-lookup"><span data-stu-id="0348f-254">If do not have the permission to manipulate cluster resources, change your connection timeout to 30 seconds (this value results in a 20-second TCP timeout period plus a 10-second buffer).</span></span>  
  
     <span data-ttu-id="0348f-255">**Ventajas**: Si se produce una conmutación por error entre subredes, el tiempo de recuperación del cliente es breve.</span><span class="sxs-lookup"><span data-stu-id="0348f-255">**Pros**: If a cross-subnet failover occurs, client recovery time is short.</span></span>  
  
     <span data-ttu-id="0348f-256">**Inconvenientes**: La mitad de las conexiones cliente tardarán más de 20 segundos</span><span class="sxs-lookup"><span data-stu-id="0348f-256">**Cons**: Half of the client connections will take more than 20 seconds</span></span>  
  
-   <span data-ttu-id="0348f-257">Si tiene permiso para manipular recursos de clúster, el enfoque más recomendado consiste en establecer el nombre de red del agente de escucha del grupo de disponibilidad en `RegisterAllProvidersIP=0`.</span><span class="sxs-lookup"><span data-stu-id="0348f-257">If you have the permission to manipulate cluster resources, the more recommended approach is to set the network name of your availability group listener to `RegisterAllProvidersIP=0`.</span></span> <span data-ttu-id="0348f-258">Para obtener más información, vea "Configuración de RegisterAllProvidersIP" más adelante en esta sección.</span><span class="sxs-lookup"><span data-stu-id="0348f-258">For more information, see "RegisterAllProvidersIP Setting" later in this section.</span></span>  
  
     <span data-ttu-id="0348f-259">**Ventajas:** No es necesario aumentar el valor del tiempo de espera de la conexión de cliente.</span><span class="sxs-lookup"><span data-stu-id="0348f-259">**Pros:** You do not need to increase your client-connection timeout value.</span></span>  
  
     <span data-ttu-id="0348f-260">**Inconvenientes:** Si se produce una conmutación por error entre subredes, el tiempo de recuperación del cliente podría ser de 15 minutos o más, según la `HostRecordTTL` configuración y la configuración de la programación de replicación DNS/ad entre sitios.</span><span class="sxs-lookup"><span data-stu-id="0348f-260">**Cons:** If a cross-subnet failover occurs, the client recovery time could be 15 minutes or longer, depending on your `HostRecordTTL` setting and the setting of your cross-site DNS/AD replication schedule.</span></span>  
  
###  <a name="registerallprovidersip-setting"></a><a name="RegisterAllProvidersIP"></a><span data-ttu-id="0348f-261">Configuración de RegisterAllProvidersIP</span><span class="sxs-lookup"><span data-stu-id="0348f-261">RegisterAllProvidersIP Setting</span></span>  
 <span data-ttu-id="0348f-262">Cuando se usa [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)] o PowerShell para crear un agente de escucha del grupo de disponibilidad, el punto de acceso cliente se crea en WSFC con la propiedad `RegisterAllProvidersIP` establecida en 1 (true).</span><span class="sxs-lookup"><span data-stu-id="0348f-262">When you use [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)], or PowerShell to create an availability group listener, the Client Access Point is created in WSFC with the `RegisterAllProvidersIP` property set to 1 (true).</span></span> <span data-ttu-id="0348f-263">El efecto de este valor de propiedad depende de la cadena de conexión de cliente, de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="0348f-263">The effect of this property value depends on the client connection string, as follows:</span></span>  
  
-   <span data-ttu-id="0348f-264">Cadenas de conexión que establecen `MultiSubnetFailover` en true</span><span class="sxs-lookup"><span data-stu-id="0348f-264">Connection strings that set `MultiSubnetFailover` to true</span></span>  
  
     [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="0348f-265">establece la propiedad `RegisterAllProvidersIP` en 1 para reducir el tiempo de reconexión después de una conmutación por error para los clientes cuyas cadenas de conexión de cliente especifican `MultiSubnetFailover = True`, tal como se recomienda.</span><span class="sxs-lookup"><span data-stu-id="0348f-265">sets the  `RegisterAllProvidersIP` property to 1 in order to reduce re-connection time after a failover for clients whose client connection strings specify `MultiSubnetFailover = True`, as recommended.</span></span> <span data-ttu-id="0348f-266">Tenga en cuenta que para aprovechar la característica de múltiples subredes del agente de escucha, puede que los clientes necesiten un proveedor de datos que admita la palabra clave `MultiSubnetFailover`.</span><span class="sxs-lookup"><span data-stu-id="0348f-266">Note that to take advantage of the listener multi-subnet feature, your clients might require a data provider that supports the `MultiSubnetFailover` keyword.</span></span> <span data-ttu-id="0348f-267">Para más información sobre la compatibilidad del controlador con la conmutación por error de varias subredes, vea [Conectividad de cliente de AlwaysOn &#40;SQL Server&#41;](always-on-client-connectivity-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="0348f-267">For information about driver support for multi-subnet failover, see [AlwaysOn Client Connectivity &#40;SQL Server&#41;](always-on-client-connectivity-sql-server.md).</span></span>  
  
     <span data-ttu-id="0348f-268">Para obtener información sobre la agrupación en clústeres de varias subredes, vea [Agrupación en clústeres de varias subredes de SQL Server&#40;SQL Server&#41;](../../../sql-server/failover-clusters/windows/sql-server-multi-subnet-clustering-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="0348f-268">For information about multi-subnet clustering, see [SQL Server Multi-Subnet Clustering &#40;SQL Server&#41;](../../../sql-server/failover-clusters/windows/sql-server-multi-subnet-clustering-sql-server.md).</span></span>  
  
    > [!TIP]  
    >  <span data-ttu-id="0348f-269">Cuando `RegisterAllProvidersIP = 1`, si ejecuta el Asistente para validar una configuración de WSFC en el clúster de WSFC, el asistente genera el mensaje de advertencia siguiente:</span><span class="sxs-lookup"><span data-stu-id="0348f-269">When `RegisterAllProvidersIP = 1`, if you run the WSFC Validate a Configuration Wizard on the WSFC cluster, the wizard generates the following warning message:</span></span>  
    >   
    >  <span data-ttu-id="0348f-270">"La propiedad RegisterAllProviderIP para el nombre de red 'Name:<nombre_red>' está establecida en 1. Para la configuración de clúster actual, este valor debería estar establecido en 0".</span><span class="sxs-lookup"><span data-stu-id="0348f-270">"The RegisterAllProviderIP property for network name 'Name:<network_name>' is set to 1 For the current cluster configuration this value should be set to 0."</span></span>  
    >   
    >  <span data-ttu-id="0348f-271">Omita este mensaje.</span><span class="sxs-lookup"><span data-stu-id="0348f-271">Please ignore this message.</span></span>  
  
-   <span data-ttu-id="0348f-272">Cadenas de conexión que no establecen `MultiSubnetFailover` en true</span><span class="sxs-lookup"><span data-stu-id="0348f-272">Connection strings that do not set `MultiSubnetFailover` to true</span></span>  
  
     <span data-ttu-id="0348f-273">Cuando `RegisterAllProvidersIP = 1`, los clientes cuyas cadenas de conexión no usan =MultiSubnetFailover = True `MultiSubnetFailover = True`, experimentarán conexiones con latencia elevada.</span><span class="sxs-lookup"><span data-stu-id="0348f-273">When `RegisterAllProvidersIP = 1`, any clients whose connection strings do not use `MultiSubnetFailover = True`, will experience high latency connections.</span></span> <span data-ttu-id="0348f-274">Esto se debe a que estos clientes intentan conexiones a todas las direcciones IP de forma secuencial.</span><span class="sxs-lookup"><span data-stu-id="0348f-274">This occurs because these clients attempt connections to all IPs sequentially.</span></span> <span data-ttu-id="0348f-275">En cambio, si `RegisterAllProvidersIP` se cambia a 0, la dirección IP activa se registra en el punto de acceso cliente del clúster de WSFC, lo que reduce la latencia de los clientes heredados.</span><span class="sxs-lookup"><span data-stu-id="0348f-275">In contrast, if `RegisterAllProvidersIP` is changed to 0, the active IP address is registered in the Client Access Point in the WSFC cluster, reducing latency for legacy clients.</span></span> <span data-ttu-id="0348f-276">Por lo tanto, si tiene clientes heredados que necesitan conectarse a un agente de escucha del grupo de disponibilidad y no puede usar la `MultiSubnetFailover` propiedad, se recomienda cambiar `RegisterAllProvidersIP` a 0.</span><span class="sxs-lookup"><span data-stu-id="0348f-276">Therefore, if you have legacy clients that need to connect to an availability group listener and cannot use the `MultiSubnetFailover` property, we recommend that you change `RegisterAllProvidersIP` to 0.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="0348f-277">Cuando se crea un agente de escucha del grupo de disponibilidad en el clúster de WSFC (GUI del Administrador de clústeres de conmutación por error), `RegisterAllProvidersIP` será 0 (false) de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="0348f-277">When you create an availability group listener through the WSFC cluster (Failover Cluster Manager GUI), `RegisterAllProvidersIP` will be 0 (false) by default.</span></span>  
  
###  <a name="hostrecordttl-setting"></a><a name="HostRecordTTL"></a><span data-ttu-id="0348f-278">Configuración de HostRecordTTL</span><span class="sxs-lookup"><span data-stu-id="0348f-278">HostRecordTTL Setting</span></span>  
 <span data-ttu-id="0348f-279">De forma predeterminada, los clientes almacenan en memoria caché los registros DNS de clúster durante 20 minutos.</span><span class="sxs-lookup"><span data-stu-id="0348f-279">By default, clients cache cluster DNS records for 20 minutes.</span></span>  <span data-ttu-id="0348f-280">Al reducir el valor de `HostRecordTTL`, el Período de vida (TTL), para el registro almacenado en memoria caché, los clientes heredados pueden reconectarse más rápidamente.</span><span class="sxs-lookup"><span data-stu-id="0348f-280">By reducing `HostRecordTTL`, the Time to Live (TTL), for the cached record, legacy clients may reconnect more quickly.</span></span>  <span data-ttu-id="0348f-281">Sin embargo, la reducción del valor `HostRecordTTL` puede producir también mayor tráfico hacia los servidores DNS.</span><span class="sxs-lookup"><span data-stu-id="0348f-281">However, reducing the `HostRecordTTL` setting may also result in increased traffic to the DN servers.</span></span>  
  
###  <a name="sample-powershell-script-to-disable-registerallprovidersip-and-reduce-ttl"></a><a name="SampleScript"></a><span data-ttu-id="0348f-282">Script de PowerShell de ejemplo para deshabilitar RegisterAllProvidersIP y reducir TTL</span><span class="sxs-lookup"><span data-stu-id="0348f-282">Sample PowerShell Script to Disable RegisterAllProvidersIP and Reduce TTL</span></span>  
 <span data-ttu-id="0348f-283">En el ejemplo siguiente de PowerShell se muestra cómo configurar los parámetros de clúster `RegisterAllProvidersIP` y `HostRecordTTL` para el recurso de agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-283">The following PowerShell example demonstrates how to configure both the `RegisterAllProvidersIP` and `HostRecordTTL` cluster parameters for the listener resource.</span></span>  <span data-ttu-id="0348f-284">El registro DNS se almacenará en memoria caché durante 5 minutos en lugar del valor predeterminado de 20 minutos.</span><span class="sxs-lookup"><span data-stu-id="0348f-284">The DNS record will be cached for 5 minutes rather than the default 20 minutes.</span></span>  <span data-ttu-id="0348f-285">La modificación de los dos parámetros de clúster puede reducir el tiempo necesario para conectarse a la dirección IP correcta después de una conmutación por error para los clientes heredados que no pueden utilizar el parámetro `MultiSubnetFailover`.</span><span class="sxs-lookup"><span data-stu-id="0348f-285">Modifying both cluster parameters may reduce the time to connect to the correct IP address after a failover for legacy clients that cannot use the `MultiSubnetFailover` parameter.</span></span>  <span data-ttu-id="0348f-286">Reemplace `yourListenerName` por el nombre del agente de escucha que va a cambiar.</span><span class="sxs-lookup"><span data-stu-id="0348f-286">Replace `yourListenerName` with the name of the listener that you are changing.</span></span>  
  
```powershell
Import-Module FailoverClusters  
Get-ClusterResource yourListenerName | Set-ClusterParameter RegisterAllProvidersIP 0
Get-ClusterResource yourListenerName|Set-ClusterParameter HostRecordTTL 300  
Stop-ClusterResource yourListenerName  
Start-ClusterResource yourAGResource  
```  
  
 <span data-ttu-id="0348f-287">Para obtener más información sobre los tiempos de recuperación durante la conmutación por error, consulte [Client Recovery Latency During Failover](../../../sql-server/failover-clusters/windows/sql-server-multi-subnet-clustering-sql-server.md#DNS).</span><span class="sxs-lookup"><span data-stu-id="0348f-287">For more information about recovery times during failover, see [Client Recovery Latency During Failover](../../../sql-server/failover-clusters/windows/sql-server-multi-subnet-clustering-sql-server.md#DNS).</span></span>  
  
###  <a name="follow-up-recommendations"></a><a name="FollowUpRecommendations"></a><span data-ttu-id="0348f-288">Recomendaciones de seguimiento</span><span class="sxs-lookup"><span data-stu-id="0348f-288">Follow-up Recommendations</span></span>  
 <span data-ttu-id="0348f-289">Después de crear un agente de escucha del grupo de disponibilidad:</span><span class="sxs-lookup"><span data-stu-id="0348f-289">After you create an availability group listener:</span></span>  
  
-   <span data-ttu-id="0348f-290">Pida al administrador de red que reserve la dirección IP del agente de escucha para su uso exclusivo.</span><span class="sxs-lookup"><span data-stu-id="0348f-290">Ask your network administrator to reserve the listener's IP address for its exclusive use.</span></span>  
  
-   <span data-ttu-id="0348f-291">Proporcione el nombre del host DNS del agente de escucha a los desarrolladores de aplicaciones para que lo usen en las cadenas de conexión cuando soliciten conexiones cliente a este grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0348f-291">Give the listener's DNS host name to application developers to use in connection strings when requesting client connections to this availability group.</span></span>  
  
-   <span data-ttu-id="0348f-292">Anime a los desarrolladores a actualizar las cadenas de conexión de cliente para especificar `MultiSubnetFailover = True`, si es posible.</span><span class="sxs-lookup"><span data-stu-id="0348f-292">Encourage developers to update client connection strings to specify `MultiSubnetFailover = True`, if possible.</span></span> <span data-ttu-id="0348f-293">Para más información sobre la compatibilidad del controlador con la conmutación por error de varias subredes, vea [Conectividad de cliente de AlwaysOn &#40;SQL Server&#41;](always-on-client-connectivity-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="0348f-293">For information about driver support for multi-subnet failover, see [AlwaysOn Client Connectivity &#40;SQL Server&#41;](always-on-client-connectivity-sql-server.md).</span></span>  
  
###  <a name="create-an-additional-listener-for-an-availability-group-optional"></a><a name="CreateAdditionalListener"></a><span data-ttu-id="0348f-294">Crear un agente de escucha adicional para un grupo de disponibilidad (opcional)</span><span class="sxs-lookup"><span data-stu-id="0348f-294">Create an Additional Listener for an Availability Group (Optional)</span></span>  
 <span data-ttu-id="0348f-295">Después de crear un agente de escucha con SQL Server, puede agregar un agente de escucha adicional de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="0348f-295">After you create one listener through SQL Server, you can add an additional listener, as follows:</span></span>  
  
1.  <span data-ttu-id="0348f-296">Cree el agente de escucha mediante una de las herramientas siguientes:</span><span class="sxs-lookup"><span data-stu-id="0348f-296">Create the listener using either of the following tools:</span></span>  
  
    -   <span data-ttu-id="0348f-297">**Con el Administrador de clústeres de conmutación por error de WSFC:**</span><span class="sxs-lookup"><span data-stu-id="0348f-297">**Using WSFC Failover Cluster Manager:**</span></span>  
  
        1.  <span data-ttu-id="0348f-298">Agregue un punto de acceso de cliente y configure la dirección IP.</span><span class="sxs-lookup"><span data-stu-id="0348f-298">Add a client access point and configure the IP address.</span></span>  
  
        2.  <span data-ttu-id="0348f-299">Ponga el agente de escucha en línea.</span><span class="sxs-lookup"><span data-stu-id="0348f-299">Bring the listener online.</span></span>  
  
        3.  <span data-ttu-id="0348f-300">Agregue una dependencia al recurso de grupo de disponibilidad de WSFC.</span><span class="sxs-lookup"><span data-stu-id="0348f-300">Add a dependency to the WSFC availability group resource.</span></span>  
  
         <span data-ttu-id="0348f-301">Para obtener información sobre los cuadros de diálogo y las pestañas del Administrador de clústeres de conmutación por error, vea [Interfaz de usuario: complemento Administrador de clúster de conmutación por error](https://technet.microsoft.com/library/cc772502.aspx).</span><span class="sxs-lookup"><span data-stu-id="0348f-301">For information about the dialog boxes and tabs of the Failover Cluster Manager, see [User Interface: The Failover Cluster Manager Snap-In](https://technet.microsoft.com/library/cc772502.aspx).</span></span>  
  
    -   <span data-ttu-id="0348f-302">**Con Windows PowerShell para los clústeres de conmutación por error:**</span><span class="sxs-lookup"><span data-stu-id="0348f-302">**Using Windows PowerShell for failover clusters:**</span></span>  
  
        1.  <span data-ttu-id="0348f-303">Use [Add-ClusterResource](https://technet.microsoft.com/library/ee460983.aspx) para crear un nombre de red y los recursos de dirección IP.</span><span class="sxs-lookup"><span data-stu-id="0348f-303">Use [Add-ClusterResource](https://technet.microsoft.com/library/ee460983.aspx) to create a network name and the IP address resources.</span></span>  
  
        2.  <span data-ttu-id="0348f-304">Use [Start-ClusterResource](https://technet.microsoft.com/library/ee461056.aspx) para iniciar el recurso de nombre de red.</span><span class="sxs-lookup"><span data-stu-id="0348f-304">Use [Start-ClusterResource](https://technet.microsoft.com/library/ee461056.aspx) to start the network name resource.</span></span>  
  
        3.  <span data-ttu-id="0348f-305">Use [Add-ClusterResourceDependency](https://technet.microsoft.com/library/ee461014.aspx) para establecer la dependencia entre el nombre de red y el recurso de grupo de disponibilidad de SQL Server existente.</span><span class="sxs-lookup"><span data-stu-id="0348f-305">Use [Add-ClusterResourceDependency](https://technet.microsoft.com/library/ee461014.aspx) to set the dependency between the network name and the existing SQL Server Availability Group resource.</span></span>  
  
         <span data-ttu-id="0348f-306">Para obtener información sobre cómo usar Windows PowerShell en los clústeres de conmutación por error, vea [Introducción a los comandos del Administrador del servidor](https://technet.microsoft.com/library/cc732757.aspx#BKMK_wps).</span><span class="sxs-lookup"><span data-stu-id="0348f-306">For information about using Windows PowerShell for failover clusters, see [Overview of Server Manager Commands](https://technet.microsoft.com/library/cc732757.aspx#BKMK_wps).</span></span>  
  
2.  <span data-ttu-id="0348f-307">Inicie la escucha de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] en el nuevo agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-307">Start [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] listening on the new listener.</span></span> <span data-ttu-id="0348f-308">Después de crear el agente de escucha adicional, conéctese a la instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que hospeda la réplica principal del grupo de disponibilidad y use [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)]o PowerShell para modificar el puerto de escucha.</span><span class="sxs-lookup"><span data-stu-id="0348f-308">After creating the additional listener, connect to the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that hosts the primary replica of the availability group and use [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)], or PowerShell to modify the listener port.</span></span>  
  
 <span data-ttu-id="0348f-309">Para obtener más información, vea [Cómo crear varios agentes de escucha para el mismo grupo de disponibilidad](https://blogs.msdn.com/b/sqlalwayson/archive/2012/02/03/how-to-create-multiple-listeners-for-same-availability-group-goden-yao.aspx) (un blog del equipo de AlwaysOn de SQL Server).</span><span class="sxs-lookup"><span data-stu-id="0348f-309">For more information, see [How to create multiple listeners for same availability group](https://blogs.msdn.com/b/sqlalwayson/archive/2012/02/03/how-to-create-multiple-listeners-for-same-availability-group-goden-yao.aspx) (a SQL Server AlwaysOn team blog).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="0348f-310">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="0348f-310">Related Tasks</span></span>  
  
-   [<span data-ttu-id="0348f-311">Ver las propiedades del agente de escucha de grupo de disponibilidad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="0348f-311">View Availability Group Listener Properties &#40;SQL Server&#41;</span></span>](view-availability-group-listener-properties-sql-server.md)  
  
-   [<span data-ttu-id="0348f-312">Quitar un agente de escucha de grupo de disponibilidad &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="0348f-312">Remove an Availability Group Listener &#40;SQL Server&#41;</span></span>](remove-an-availability-group-listener-sql-server.md)  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="0348f-313">Contenido relacionado</span><span class="sxs-lookup"><span data-stu-id="0348f-313">Related Content</span></span>  
  
-   [<span data-ttu-id="0348f-314">How to create multiple listeners for same availability group (Cómo crear varios agentes de escucha para el mismo grupo de disponibilidad)</span><span class="sxs-lookup"><span data-stu-id="0348f-314">How to create multiple listeners for same availability group</span></span>](https://blogs.msdn.com/b/sqlalwayson/archive/2012/02/03/how-to-create-multiple-listeners-for-same-availability-group-goden-yao.aspx)  
  
-   [<span data-ttu-id="0348f-315">Blog del equipo de AlwaysOn SQL Server: el blog oficial del equipo de AlwaysOn de SQL Server</span><span class="sxs-lookup"><span data-stu-id="0348f-315">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn team blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
## <a name="see-also"></a><span data-ttu-id="0348f-316">Consulte también</span><span class="sxs-lookup"><span data-stu-id="0348f-316">See Also</span></span>  
 <span data-ttu-id="0348f-317">[Información general de Grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="0348f-317">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="0348f-318">[Agentes de escucha de grupo de disponibilidad, conectividad de cliente y conmutación por error de una aplicación &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="0348f-318">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 [<span data-ttu-id="0348f-319">Agrupación en clústeres de varias subredes de SQL Server &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="0348f-319">SQL Server Multi-Subnet Clustering &#40;SQL Server&#41;</span></span>](../../../sql-server/failover-clusters/windows/sql-server-multi-subnet-clustering-sql-server.md)  
