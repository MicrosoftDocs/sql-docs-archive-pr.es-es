---
title: Información general sobre las instrucciones Transact-SQL para Grupos de disponibilidad AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 04/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], about
- Availability Groups [SQL Server], Transact-SQL statements
ms.assetid: 184d0a81-2259-4db9-9d0d-01aac0b502c8
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: ff25fecf54cfdd1d9c03d1586f0272896542bfa7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87750185"
---
# <a name="overview-of-transact-sql-statements-for-alwayson-availability-groups-sql-server"></a><span data-ttu-id="d06ff-102">Información general sobre instrucciones Transact-SQL para grupos de disponibilidad de AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="d06ff-102">Overview of Transact-SQL Statements for AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="d06ff-103">En este tema se presentan las instrucciones [!INCLUDE[tsql](../../../includes/tsql-md.md)] que admiten la implementación de [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] y la creación y administración de un grupo de disponibilidad, réplica de disponibilidad y base de datos de disponibilidad dados.</span><span class="sxs-lookup"><span data-stu-id="d06ff-103">This topic introduces the [!INCLUDE[tsql](../../../includes/tsql-md.md)] statements that support deploying [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and creating and managing an given availability group, availability replica and availability database.</span></span>  
  
  
##  <a name="create-endpoint"></a><a name="CreateEndpoint"></a><span data-ttu-id="d06ff-104">CREAR PUNTO DE CONEXIÓN</span><span class="sxs-lookup"><span data-stu-id="d06ff-104">CREATE ENDPOINT</span></span>  
 <span data-ttu-id="d06ff-105">[crear punto de conexión... POR DATABASE_MIRRORING](/sql/t-sql/statements/create-endpoint-transact-sql) crea un extremo de creación de reflejo de la base de datos, si no existe ninguno en la instancia del servidor.</span><span class="sxs-lookup"><span data-stu-id="d06ff-105">[CREATE ENDPOINT ... FOR DATABASE_MIRRORING](/sql/t-sql/statements/create-endpoint-transact-sql) creates a database mirroring endpoint, if none exists on the server instance.</span></span> <span data-ttu-id="d06ff-106">Cada instancia de servidor en el que vaya a implementar [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] o la creación de reflejo de la base de datos requiere un extremo de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d06ff-106">Every server instance on which you intend to deploy [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] or database mirroring requires a database mirroring endpoint.</span></span>  
  
 <span data-ttu-id="d06ff-107">Ejecute esta instrucción en la instancia de servidor en la que se va a crear el extremo.</span><span class="sxs-lookup"><span data-stu-id="d06ff-107">Execute this statement on the server instance on which you are creating the endpoint.</span></span> <span data-ttu-id="d06ff-108">Puede crear solo un extremo de creación de reflejo de la base de datos en una instancia de servidor determinada.</span><span class="sxs-lookup"><span data-stu-id="d06ff-108">You can create only one database mirroring endpoint on a given server instance.</span></span> <span data-ttu-id="d06ff-109">Para obtener más información, vea [El punto de conexión de creación de reflejo de la base de datos &#40;SQL Server&#41;](../../database-mirroring/the-database-mirroring-endpoint-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d06ff-109">For more information, see [The Database Mirroring Endpoint &#40;SQL Server&#41;](../../database-mirroring/the-database-mirroring-endpoint-sql-server.md).</span></span>  
  
##  <a name="create-availability-group"></a><a name="CreateAG"></a><span data-ttu-id="d06ff-110">CREAR GRUPO DE DISPONIBILIDAD</span><span class="sxs-lookup"><span data-stu-id="d06ff-110">CREATE AVAILABILITY GROUP</span></span>  
 <span data-ttu-id="d06ff-111">[CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql) crea un nuevo grupo de disponibilidad y, opcionalmente, una escucha del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="d06ff-111">[CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql) creates a new availability group and optionally an availability group listener.</span></span> <span data-ttu-id="d06ff-112">Como mínimo, debe especificar la instancia del servidor local, que se convertirá en la réplica principal inicial.</span><span class="sxs-lookup"><span data-stu-id="d06ff-112">Minimally, you must specify your local server instance, which will become the initial primary replica.</span></span> <span data-ttu-id="d06ff-113">Opcionalmente, puede especificar también hasta cuatro réplicas secundarias.</span><span class="sxs-lookup"><span data-stu-id="d06ff-113">Optionally, you can also specify up to four secondary replicas.</span></span>  
  
 <span data-ttu-id="d06ff-114">Ejecute CREATE AVAILABILITY GROUP en la instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] en la que desea hospedar la réplica principal inicial del nuevo grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="d06ff-114">Execute CREATE AVAILABILITY GROUP on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that you want to host the initial primary replica of your new availability group.</span></span> <span data-ttu-id="d06ff-115">Esta instancia de servidor debe residir en un nodo de un clúster de conmutación por error de Windows Server (WSFC) (para obtener más información, vea [requisitos previos, restricciones y recomendaciones para Grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span><span class="sxs-lookup"><span data-stu-id="d06ff-115">This server instance must reside on a node of a Windows Server Failover Cluster (WSFC) (for more information, see [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span></span>  
  
##  <a name="alter-availability-group"></a><a name="AlterAG"></a><span data-ttu-id="d06ff-116">ALTER AVAILABILITY GROUP</span><span class="sxs-lookup"><span data-stu-id="d06ff-116">ALTER AVAILABILITY GROUP</span></span>  
 <span data-ttu-id="d06ff-117">[ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) admite el cambio de un grupo de disponibilidad existente o una escucha de grupo de disponibilidad y la conmutación por error en un grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="d06ff-117">[ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) supports changing an existing availability group or availability group listener and for failing over an availability group.</span></span>  
  
 <span data-ttu-id="d06ff-118">Ejecute ALTER AVAILABILITY GROUP en la instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que hospeda la réplica principal actual.</span><span class="sxs-lookup"><span data-stu-id="d06ff-118">Execute ALTER AVAILABILITY GROUP on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that hosts the current primary replica.</span></span>  
  
##  <a name="alter-database--set-hadr-"></a><a name="AlterDb"></a><span data-ttu-id="d06ff-119">ALTER DATABASE... ESTABLECER HADR...</span><span class="sxs-lookup"><span data-stu-id="d06ff-119">ALTER DATABASE ... SET HADR ...</span></span>  
 <span data-ttu-id="d06ff-120">Las opciones de la cláusula [SET HADR](/sql/t-sql/statements/alter-database-transact-sql-set-hadr) de la instrucción ALTER DATABASE permiten combinar una base de datos secundaria con el grupo de disponibilidad de la base de datos principal correspondiente, quitar una base de datos combinada y suspender la sincronización de datos en una base de datos combinada, y reanudar la sincronización de datos.</span><span class="sxs-lookup"><span data-stu-id="d06ff-120">The options of the [SET HADR](/sql/t-sql/statements/alter-database-transact-sql-set-hadr) clause of the ALTER DATABASE statement enables you to join a secondary database to the availability group of the corresponding primary database, remove a joined database, and suspend data synchronization on a joined database, and resume data synchronization.</span></span>  
  
##  <a name="drop-availability-group"></a><a name="DropAG"></a><span data-ttu-id="d06ff-121">QUITAR GRUPO DE DISPONIBILIDAD</span><span class="sxs-lookup"><span data-stu-id="d06ff-121">DROP AVAILABILITY GROUP</span></span>  
 <span data-ttu-id="d06ff-122">[DROP AVAILABILITY GROUP](/sql/t-sql/statements/drop-availability-group-transact-sql) quita un grupo de disponibilidad especificado y todas sus réplicas.</span><span class="sxs-lookup"><span data-stu-id="d06ff-122">[DROP AVAILABILITY GROUP](/sql/t-sql/statements/drop-availability-group-transact-sql) removes a specified availability group and all of its replicas.</span></span> <span data-ttu-id="d06ff-123">DROP AVAILABILITY GROUP se puede ejecutar desde cualquier nodo de [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] del clúster de conmutación por error de WSFC.</span><span class="sxs-lookup"><span data-stu-id="d06ff-123">DROP AVAILABILITY GROUP can be run from any [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] node in the WSFC failover cluster.</span></span>  
  
##  <a name="restrictions-on-the-availability-group-transact-sql-statements"></a><a name="Restrictions"></a><span data-ttu-id="d06ff-124">Restricciones en las instrucciones de Transact-SQL de grupo de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="d06ff-124">Restrictions on the AVAILABILITY GROUP Transact-SQL Statements</span></span>  
 <span data-ttu-id="d06ff-125">Las instrucciones CREATE AVAILABILITY GROUP, ALTER AVAILABILITY GROUP y DROP AVAILABILITY GROUP de [!INCLUDE[tsql](../../../includes/tsql-md.md)] tienen las siguientes restricciones:</span><span class="sxs-lookup"><span data-stu-id="d06ff-125">The CREATE AVAILABILITY GROUP, ALTER AVAILABILITY GROUP, and DROP AVAILABILITY GROUP [!INCLUDE[tsql](../../../includes/tsql-md.md)] statements have the following limitations:</span></span>  
  
-   <span data-ttu-id="d06ff-126">Excepto en DROP AVAILABILITY GROUP, la ejecución de estas instrucciones requiere que el servicio HADR esté habilitado en la instancia de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d06ff-126">With the exception of DROP AVAILABILITY GROUP, executing these statements requires that the HADR service is enabled on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="d06ff-127">Para obtener más información, vea [Habilitar y deshabilitar grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d06ff-127">For more information, see [Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md).</span></span>  
  
-   <span data-ttu-id="d06ff-128">Estas instrucciones no se pueden ejecutar en transacciones o por lotes.</span><span class="sxs-lookup"><span data-stu-id="d06ff-128">These statements cannot be executed within transactions or batches.</span></span>  
  
-   <span data-ttu-id="d06ff-129">Aunque llevan a cabo el máximo de acciones para efectuar la limpieza después de un error, estas instrucciones no garantizan que revertirán todos los cambios al producirse un error.</span><span class="sxs-lookup"><span data-stu-id="d06ff-129">Though they make a best effort to clean up after a failure, these statements do not guarantee that they will roll back all changes on failure.</span></span> <span data-ttu-id="d06ff-130">No obstante, los sistemas se deben controlar correctamente y, a continuación, ignorar los errores parciales.</span><span class="sxs-lookup"><span data-stu-id="d06ff-130">However, systems should be able cleanly handle and then ignore partial failures.</span></span>  
  
-   <span data-ttu-id="d06ff-131">Estas instrucciones no admiten expresiones o variables.</span><span class="sxs-lookup"><span data-stu-id="d06ff-131">These statements do not support expressions or variables.</span></span>  
  
-   <span data-ttu-id="d06ff-132">Si se ejecuta una instrucción de [!INCLUDE[tsql](../../../includes/tsql-md.md)] mientras está en curso otra acción o recuperación de grupo de disponibilidad, la instrucción devuelve un error.</span><span class="sxs-lookup"><span data-stu-id="d06ff-132">If a [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement is executed while another availability group action or recovery is in process, the statement returns an error.</span></span> <span data-ttu-id="d06ff-133">Espere a que se complete la acción o la recuperación, e intente de nuevo la instrucción, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="d06ff-133">Wait for the action or recovery to complete, and retry the statement, if necessary.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d06ff-134">Consulte también</span><span class="sxs-lookup"><span data-stu-id="d06ff-134">See Also</span></span>  
 [<span data-ttu-id="d06ff-135">Información general de Grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="d06ff-135">Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](overview-of-always-on-availability-groups-sql-server.md)  
  
  
