---
title: Configuración de la Directiva de conmutación por error flexible para controlar las condiciones de la conmutación automática por error (Always On grupos de disponibilidad) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], flexible failover policy
- Availability Groups [SQL Server], failover
- failover [SQL Server], AlwaysOn Availability Groups
ms.assetid: 1ed564b4-9835-4245-ae35-9ba67419a4ce
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: c938624a3ed39fe2d41f21a21af5231aa76a8c17
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87749498"
---
# <a name="configure-the-flexible-failover-policy-to-control-conditions-for-automatic-failover-always-on-availability-groups"></a><span data-ttu-id="0003d-102">Configurar la directiva de conmutación por error flexible para controlar las condiciones de la conmutación automática por error (grupos de disponibilidad AlwaysOn)</span><span class="sxs-lookup"><span data-stu-id="0003d-102">Configure the Flexible Failover Policy to Control Conditions for Automatic Failover (Always On Availability Groups)</span></span>
  <span data-ttu-id="0003d-103">En este tema se describe cómo configurar la directiva de conmutación por error flexible para un grupo de disponibilidad AlwaysOn mediante [!INCLUDE[tsql](../../../includes/tsql-md.md)] o PowerShell en [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0003d-103">This topic describes how to configure the flexible failover policy for an AlwaysOn availability group by using [!INCLUDE[tsql](../../../includes/tsql-md.md)] or PowerShell in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="0003d-104">Una directiva de conmutación por error flexible proporciona mayor control sobre las condiciones que produce una conmutación automática por error para un grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0003d-104">A flexible failover policy provides granular control over the conditions that cause automatic failover for an availability group.</span></span> <span data-ttu-id="0003d-105">Al cambiar las condiciones de error que activan una conmutación automática por error y la frecuencia de comprobaciones de estado, se puede aumentar o reducir la probabilidad de una conmutación automática por error que sea compatible con su SLA por tener alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0003d-105">By changing the failure conditions that trigger an automatic failover and the frequency of health checks, you can increase or decrease the likelihood of an automatic failover to support your SLA for high availability.</span></span>  
  
  
  
    > [!NOTE]  
    >  The flexible failover policy of an availability group cannot be configured by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="0003d-106">Antes de comenzar</span><span class="sxs-lookup"><span data-stu-id="0003d-106">Before You Begin</span></span>  
  
###  <a name="limitations-on-automatic-failovers"></a><a name="Limitations"></a><span data-ttu-id="0003d-107">Limitaciones de las conmutaciones por error automáticas</span><span class="sxs-lookup"><span data-stu-id="0003d-107">Limitations on Automatic Failovers</span></span>  
  
-   <span data-ttu-id="0003d-108">Para que se produzca la conmutación automática por error, la réplica principal actual y una réplica secundaria deben estar configuradas para el modo de confirmación sincrónica con conmutación automática por error, y la réplica secundaria debe estar sincronizada con la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="0003d-108">For an automatic failover to occur, the current primary replica and one secondary replica must be configured for synchronous-commit availability mode with automatic failover and the secondary replica must be synchronized with the primary replica.</span></span>  
  
-   <span data-ttu-id="0003d-109">Si un grupo de disponibilidad supera su umbral de error de WSFC, el clúster de WSFC no intentará una conmutación automática por error para dicho grupo.</span><span class="sxs-lookup"><span data-stu-id="0003d-109">If an availability group exceeds its WSFC failure threshold, the WSFC cluster will not attempt an automatic failover for the availability group.</span></span> <span data-ttu-id="0003d-110">Además, el grupo de recursos de WSFC del grupo de disponibilidad permanece en un estado de error hasta que el administrador del clúster conecta manualmente el grupo de recursos con error o el administrador de la base de datos realiza una conmutación por error manual del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0003d-110">Furthermore, the WSFC resource group of the availability group remains in a failed state until either the cluster administrator manually brings the failed resource group online or the database administrator performs a manual failover of the availability group.</span></span> <span data-ttu-id="0003d-111">El *umbral de error de WSFC* se define como el número máximo de errores admitidos para el grupo de disponibilidad en un período de tiempo determinado.</span><span class="sxs-lookup"><span data-stu-id="0003d-111">The *WSFC failure threshold* is defined as the maximum number of failures supported for the availability group during a given time period.</span></span> <span data-ttu-id="0003d-112">El período predeterminado es de seis horas, y el valor predeterminado del número máximo de errores durante este período es *n*-1, donde *n* es el número de nodos de WSFC.</span><span class="sxs-lookup"><span data-stu-id="0003d-112">The default time period is six hours, and the default value for the maximum number of failures during this period is *n*-1, where *n* is the number of WSFC nodes.</span></span> <span data-ttu-id="0003d-113">Para cambiar los valores del umbral de error de un grupo de disponibilidad determinado, use la consola del administrador de conmutación por error de WSFC.</span><span class="sxs-lookup"><span data-stu-id="0003d-113">To change the failure-threshold values for a given availability group, use the WSFC Failover Manager Console.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="0003d-114">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="0003d-114">Prerequisites</span></span>  
  
-   <span data-ttu-id="0003d-115">Debe estar conectado a la instancia del servidor que hospeda la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="0003d-115">You must be connected to the server instance that hosts the primary replica.</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="0003d-116">Seguridad</span><span class="sxs-lookup"><span data-stu-id="0003d-116">Security</span></span>  
  
####  <a name="permissions"></a><a name="Permissions"></a> <span data-ttu-id="0003d-117">Permisos</span><span class="sxs-lookup"><span data-stu-id="0003d-117">Permissions</span></span>  
  
|<span data-ttu-id="0003d-118">Tarea</span><span class="sxs-lookup"><span data-stu-id="0003d-118">Task</span></span>|<span data-ttu-id="0003d-119">Permisos</span><span class="sxs-lookup"><span data-stu-id="0003d-119">Permissions</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="0003d-120">Para configurar la directiva flexible de conmutación por error para un nuevo grupo de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="0003d-120">To configure the flexible failover policy for a new availability group</span></span>|<span data-ttu-id="0003d-121">Se requiere la pertenencia al rol fijo de servidor **sysadmin** y el permiso de servidor CREATE AVAILABILITY GROUP, el permiso ALTER ANY AVAILABILITY GROUP o el permiso CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="0003d-121">Requires membership in the **sysadmin** fixed server role and either CREATE AVAILABILITY GROUP server permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
|<span data-ttu-id="0003d-122">Para modificar la directiva de un grupo de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="0003d-122">To modify the policy of an existing availability group</span></span>|<span data-ttu-id="0003d-123">Se requiere el permiso ALTER AVAILABILITY GROUP en el grupo de disponibilidad, el permiso CONTROL AVAILABILITY GROUP, el permiso ALTER ANY AVAILABILITY GROUP o el permiso CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="0003d-123">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="0003d-124">Usar Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="0003d-124">Using Transact-SQL</span></span>  
 <span data-ttu-id="0003d-125">**Para configurar la directiva flexible de conmutación por error**</span><span class="sxs-lookup"><span data-stu-id="0003d-125">**To configure the flexible failover policy**</span></span>  
  
1.  <span data-ttu-id="0003d-126">Conéctese a la instancia del servidor que hospeda la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="0003d-126">Connect to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="0003d-127">Para un nuevo grupo de disponibilidad, use la instrucción [Create Availability Group](/sql/t-sql/statements/create-availability-group-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="0003d-127">For a new availability group, use the [CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span> <span data-ttu-id="0003d-128">Si va a modificar un grupo de disponibilidad existente, use la instrucción [ALTER Availability Group](/sql/t-sql/statements/alter-availability-group-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="0003d-128">If you are modifying an existing availability group, use the [ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span>  
  
    -   <span data-ttu-id="0003d-129">Para establecer el nivel de la condición de conmutación por error, use la opción FAILURE_CONDITION_LEVEL = *n* , donde *n* es un entero entre 1 y 5.</span><span class="sxs-lookup"><span data-stu-id="0003d-129">To set the failover condition level, use the FAILURE_CONDITION_LEVEL = *n* option, where, *n* is an integer from 1 to 5.</span></span>  
  
         <span data-ttu-id="0003d-130">Por ejemplo, la siguiente instrucción de [!INCLUDE[tsql](../../../includes/tsql-md.md)] cambia el nivel de condición de error de un grupo de disponibilidad existente, `AG1`, al nivel uno:</span><span class="sxs-lookup"><span data-stu-id="0003d-130">For example, the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement changes the failure-condition level of an existing availability group, `AG1`, to level one:</span></span>  
  
        ```sql
        ALTER AVAILABILITY GROUP AG1 SET (FAILURE_CONDITION_LEVEL = 1);  
        ```  
  
         <span data-ttu-id="0003d-131">La relación de estos valores enteros con los niveles de condición de error es la siguiente:</span><span class="sxs-lookup"><span data-stu-id="0003d-131">The relationship of these integer values to the failure condition levels is as follows:</span></span>  
  
        |<span data-ttu-id="0003d-132">Valor de [!INCLUDE[tsql](../../../includes/tsql-md.md)]</span><span class="sxs-lookup"><span data-stu-id="0003d-132">[!INCLUDE[tsql](../../../includes/tsql-md.md)] Value</span></span>|<span data-ttu-id="0003d-133">Nivel</span><span class="sxs-lookup"><span data-stu-id="0003d-133">Level</span></span>|<span data-ttu-id="0003d-134">La conmutación por error iniciada es automática cuando se produce...</span><span class="sxs-lookup"><span data-stu-id="0003d-134">Automatic Is Failover Initiated When...</span></span>|  
        |------------------------------|-----------|-------------------------------------------|  
        |<span data-ttu-id="0003d-135">1</span><span class="sxs-lookup"><span data-stu-id="0003d-135">1</span></span>|<span data-ttu-id="0003d-136">Uno</span><span class="sxs-lookup"><span data-stu-id="0003d-136">One</span></span>|<span data-ttu-id="0003d-137">Por inactividad de servidor.</span><span class="sxs-lookup"><span data-stu-id="0003d-137">On server down.</span></span> <span data-ttu-id="0003d-138">El servicio SQL Server se detiene debido a una conmutación por error o reinicio.</span><span class="sxs-lookup"><span data-stu-id="0003d-138">The SQL Server service stops because of a failover or restart.</span></span>|  
        |<span data-ttu-id="0003d-139">2</span><span class="sxs-lookup"><span data-stu-id="0003d-139">2</span></span>|<span data-ttu-id="0003d-140">Dos</span><span class="sxs-lookup"><span data-stu-id="0003d-140">Two</span></span>|<span data-ttu-id="0003d-141">Al dejar de responder el servidor.</span><span class="sxs-lookup"><span data-stu-id="0003d-141">On server unresponsive.</span></span> <span data-ttu-id="0003d-142">Se cumple cualquier condición de un valor inferior, el servicio SQL Server se conecta al clúster y se supera el umbral del tiempo de espera de comprobación de estado, o la réplica principal actual está en un estado de error.</span><span class="sxs-lookup"><span data-stu-id="0003d-142">Any condition of lower value is satisfied, the SQL Server service is connected to the cluster and the health check timeout threshold is exceeded, or the current primary replica is in a failed state.</span></span>|  
        |<span data-ttu-id="0003d-143">3</span><span class="sxs-lookup"><span data-stu-id="0003d-143">3</span></span>|<span data-ttu-id="0003d-144">tres</span><span class="sxs-lookup"><span data-stu-id="0003d-144">Three</span></span>|<span data-ttu-id="0003d-145">En errores de servidor críticos.</span><span class="sxs-lookup"><span data-stu-id="0003d-145">On critical server error.</span></span> <span data-ttu-id="0003d-146">Se cumple cualquier condición de un valor inferior o se produce un error de servidor crítico interno.</span><span class="sxs-lookup"><span data-stu-id="0003d-146">Any condition of lower value is satisfied or an internal critical server error occurs.</span></span><br /><br /> <span data-ttu-id="0003d-147">Es el nivel predeterminado.</span><span class="sxs-lookup"><span data-stu-id="0003d-147">This is the default level.</span></span>|  
        |<span data-ttu-id="0003d-148">4</span><span class="sxs-lookup"><span data-stu-id="0003d-148">4</span></span>|<span data-ttu-id="0003d-149">Cuatro</span><span class="sxs-lookup"><span data-stu-id="0003d-149">Four</span></span>|<span data-ttu-id="0003d-150">En errores de servidor moderados.</span><span class="sxs-lookup"><span data-stu-id="0003d-150">On moderate server error.</span></span> <span data-ttu-id="0003d-151">Se cumple cualquier condición de un valor inferior o se produce un error de servidor moderado.</span><span class="sxs-lookup"><span data-stu-id="0003d-151">Any condition of lower value is satisfied or a moderate Server error occurs.</span></span>|  
        |<span data-ttu-id="0003d-152">5</span><span class="sxs-lookup"><span data-stu-id="0003d-152">5</span></span>|<span data-ttu-id="0003d-153">Cinco</span><span class="sxs-lookup"><span data-stu-id="0003d-153">Five</span></span>|<span data-ttu-id="0003d-154">En cualquier condición de error apta.</span><span class="sxs-lookup"><span data-stu-id="0003d-154">On any qualified failure conditions.</span></span> <span data-ttu-id="0003d-155">Se cumple cualquier condición de un valor inferior o se produce una condición de error adecuada.</span><span class="sxs-lookup"><span data-stu-id="0003d-155">Any condition of lower value is satisfied or a qualifying failure condition occurs.</span></span>|  
  
         <span data-ttu-id="0003d-156">Para obtener más información sobre los niveles de condición de conmutación por error, vea [Directiva de conmutación por error flexible para conmutación automática por error de un grupo de disponibilidad &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span><span class="sxs-lookup"><span data-stu-id="0003d-156">For more information about the failover condition levels, see [Flexible Failover Policy for Automatic Failover of an Availability Group &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span></span>  
  
    -   <span data-ttu-id="0003d-157">Para configurar el umbral del tiempo de espera de comprobación de estado, use la opción HEALTH_CHECK_TIMEOUT = *n* , donde *n* es un entero de 15 000 milisegundos (15 segundos) a 4 294 967 295 milisegundos.</span><span class="sxs-lookup"><span data-stu-id="0003d-157">To configure the health check timeout threshold, use the HEALTH_CHECK_TIMEOUT = *n* option, where, *n* is an integer from 15000 milliseconds (15 seconds) to 4294967295 milliseconds.</span></span> <span data-ttu-id="0003d-158">El valor predeterminado es 30000 milisegundos (30 segundos).</span><span class="sxs-lookup"><span data-stu-id="0003d-158">The default value is 30000 milliseconds (30 seconds)</span></span>  
  
         <span data-ttu-id="0003d-159">Por ejemplo, la siguiente instrucción [!INCLUDE[tsql](../../../includes/tsql-md.md)] cambia el umbral de tiempo de espera de comprobación de estado de un grupo de disponibilidad disponible, `AG1`, 60.000 milisegundos (un minuto).</span><span class="sxs-lookup"><span data-stu-id="0003d-159">For example, the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement changes the health-check timeout threshold of an existing availability group, `AG1`, to 60,000 milliseconds (one minute).</span></span>  
  
        ```sql
        ALTER AVAILABILITY GROUP AG1 SET (HEALTH_CHECK_TIMEOUT = 60000);  
        ```  
  
##  <a name="using-powershell"></a><a name="PowerShellProcedure"></a> <span data-ttu-id="0003d-160">Con PowerShell</span><span class="sxs-lookup"><span data-stu-id="0003d-160">Using PowerShell</span></span>  

### <a name="to-configure-the-flexible-failover-policy"></a><span data-ttu-id="0003d-161">Para configurar la Directiva de conmutación por error flexible \* \*</span><span class="sxs-lookup"><span data-stu-id="0003d-161">To configure the flexible failover policy\*\*</span></span>  
  
1.  <span data-ttu-id="0003d-162">Establezca el valor predeterminado (`cd`) en la instancia del servidor que hospeda la réplica de disponibilidad principal.</span><span class="sxs-lookup"><span data-stu-id="0003d-162">Set default (`cd`) to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="0003d-163">Para agregar una réplica de disponibilidad a un grupo de disponibilidad, use el cmdlet `New-SqlAvailabilityGroup`.</span><span class="sxs-lookup"><span data-stu-id="0003d-163">When adding an availability replica to an availability group, use the `New-SqlAvailabilityGroup` cmdlet.</span></span> <span data-ttu-id="0003d-164">Para modificar una réplica de disponibilidad existente, use el cmdlet `Set-SqlAvailabilityGroup`.</span><span class="sxs-lookup"><span data-stu-id="0003d-164">When modifying an existing availability replica, use the `Set-SqlAvailabilityGroup` cmdlet.</span></span>  
  
    -   <span data-ttu-id="0003d-165">Para establecer el nivel de la condición de conmutación por error, use el `FailureConditionLevel` parámetro *LEVEL* , donde *LEVEL* es uno de los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="0003d-165">To set the failover condition level, use the `FailureConditionLevel`*level* parameter, where, *level* is one of the following values:</span></span>  
  
        |<span data-ttu-id="0003d-166">Value</span><span class="sxs-lookup"><span data-stu-id="0003d-166">Value</span></span>|<span data-ttu-id="0003d-167">Nivel</span><span class="sxs-lookup"><span data-stu-id="0003d-167">Level</span></span>|<span data-ttu-id="0003d-168">La conmutación por error iniciada es automática cuando se produce...</span><span class="sxs-lookup"><span data-stu-id="0003d-168">Automatic Is Failover Initiated When...</span></span>|  
        |-----------|-----------|-------------------------------------------|  
        |`OnServerDown`|<span data-ttu-id="0003d-169">Uno</span><span class="sxs-lookup"><span data-stu-id="0003d-169">One</span></span>|<span data-ttu-id="0003d-170">Por inactividad de servidor.</span><span class="sxs-lookup"><span data-stu-id="0003d-170">On server down.</span></span> <span data-ttu-id="0003d-171">El servicio SQL Server se detiene debido a una conmutación por error o reinicio.</span><span class="sxs-lookup"><span data-stu-id="0003d-171">The SQL Server service stops because of a failover or restart.</span></span>|  
        |`OnServerUnresponsive`|<span data-ttu-id="0003d-172">Dos</span><span class="sxs-lookup"><span data-stu-id="0003d-172">Two</span></span>|<span data-ttu-id="0003d-173">Al dejar de responder el servidor.</span><span class="sxs-lookup"><span data-stu-id="0003d-173">On server unresponsive.</span></span> <span data-ttu-id="0003d-174">Se cumple cualquier condición de un valor inferior, el servicio SQL Server se conecta al clúster y se supera el umbral del tiempo de espera de comprobación de estado, o la réplica principal actual está en un estado de error.</span><span class="sxs-lookup"><span data-stu-id="0003d-174">Any condition of lower value is satisfied, the SQL Server service is connected to the cluster and the health check timeout threshold is exceeded, or the current primary replica is in a failed state.</span></span>|  
        |`OnCriticalServerError`|<span data-ttu-id="0003d-175">tres</span><span class="sxs-lookup"><span data-stu-id="0003d-175">Three</span></span>|<span data-ttu-id="0003d-176">En errores de servidor críticos.</span><span class="sxs-lookup"><span data-stu-id="0003d-176">On critical server error.</span></span> <span data-ttu-id="0003d-177">Se cumple cualquier condición de un valor inferior o se produce un error de servidor crítico interno.</span><span class="sxs-lookup"><span data-stu-id="0003d-177">Any condition of lower value is satisfied or an internal critical server error occurs.</span></span><br /><br /> <span data-ttu-id="0003d-178">Es el nivel predeterminado.</span><span class="sxs-lookup"><span data-stu-id="0003d-178">This is the default level.</span></span>|  
        |`OnModerateServerError`|<span data-ttu-id="0003d-179">Cuatro</span><span class="sxs-lookup"><span data-stu-id="0003d-179">Four</span></span>|<span data-ttu-id="0003d-180">En errores de servidor moderados.</span><span class="sxs-lookup"><span data-stu-id="0003d-180">On moderate server error.</span></span> <span data-ttu-id="0003d-181">Se cumple cualquier condición de un valor inferior o se produce un error de servidor moderado.</span><span class="sxs-lookup"><span data-stu-id="0003d-181">Any condition of lower value is satisfied or a moderate Server error occurs.</span></span>|  
        |`OnAnyQualifiedFailureConditions`|<span data-ttu-id="0003d-182">Cinco</span><span class="sxs-lookup"><span data-stu-id="0003d-182">Five</span></span>|<span data-ttu-id="0003d-183">En cualquier condición de error apta.</span><span class="sxs-lookup"><span data-stu-id="0003d-183">On any qualified failure conditions.</span></span> <span data-ttu-id="0003d-184">Se cumple cualquier condición de un valor inferior o se produce una condición de error adecuada.</span><span class="sxs-lookup"><span data-stu-id="0003d-184">Any condition of lower value is satisfied or a qualifying failure condition occurs.</span></span>|  
  
         <span data-ttu-id="0003d-185">Para obtener más información sobre los niveles de condición de conmutación por error, vea [Directiva de conmutación por error flexible para conmutación automática por error de un grupo de disponibilidad &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span><span class="sxs-lookup"><span data-stu-id="0003d-185">For more information about the failover condition levels, see [Flexible Failover Policy for Automatic Failover of an Availability Group &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span></span>  
  
         <span data-ttu-id="0003d-186">Por ejemplo, el siguiente comando cambia el nivel de condición de error de un grupo de disponibilidad existente, `AG1`al nivel uno.</span><span class="sxs-lookup"><span data-stu-id="0003d-186">For example, the following command changes the failure-condition level of an existing availability group, `AG1`, to level one.</span></span>  
  
        ```powershell
        Set-SqlAvailabilityGroup `
         -Path SQLSERVER:\Sql\PrimaryServer\InstanceName\AvailabilityGroups\MyAg `
         -FailureConditionLevel OnServerDown  
        ```  
  
    -   <span data-ttu-id="0003d-187">Para establecer el umbral de tiempo de espera de comprobación de estado, use el `HealthCheckTimeout` parámetro *n* , donde *n* es un entero de 15000 milisegundos (15 segundos) a 4294967295 milisegundos.</span><span class="sxs-lookup"><span data-stu-id="0003d-187">To set the health check timeout threshold, use the `HealthCheckTimeout`*n* parameter, where, *n* is an integer from 15000 milliseconds (15 seconds) to 4294967295 milliseconds.</span></span> <span data-ttu-id="0003d-188">El valor predeterminado es 30000 milisegundos (30 segundos).</span><span class="sxs-lookup"><span data-stu-id="0003d-188">The default value is 30000 milliseconds (30 seconds).</span></span>  
  
         <span data-ttu-id="0003d-189">Por ejemplo, el siguiente comando cambia el umbral de tiempo de espera de comprobación de estado de un grupo de disponibilidad disponible, `AG1`, a 120.000 milisegundos (dos minutos).</span><span class="sxs-lookup"><span data-stu-id="0003d-189">For example, the following command changes the health-check timeout threshold of an existing availability group, `AG1`, to 120,000 milliseconds (two minutes).</span></span>  
  
        ```powershell
        Set-SqlAvailabilityGroup `
         -Path SQLSERVER:\Sql\PrimaryServer\InstanceName\AvailabilityGroups\MyAG `
         -HealthCheckTimeout 120000  
        ```  
  
> [!NOTE]  
>  <span data-ttu-id="0003d-190">Para ver la sintaxis de un cmdlet, use el cmdlet `Get-Help` en el entorno de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0003d-190">To view the syntax of a cmdlet, use the `Get-Help` cmdlet in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell environment.</span></span> <span data-ttu-id="0003d-191">Para más información, consulte [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="0003d-191">For more information, see [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span></span>  
  
 <span data-ttu-id="0003d-192">**Para configurar y usar el proveedor de SQL Server PowerShell**</span><span class="sxs-lookup"><span data-stu-id="0003d-192">**To set up and use the SQL Server PowerShell provider**</span></span>  
  
-   [<span data-ttu-id="0003d-193">Proveedor de SQL Server PowerShell Provider</span><span class="sxs-lookup"><span data-stu-id="0003d-193">SQL Server PowerShell Provider</span></span>](../../../powershell/sql-server-powershell-provider.md)  
  
-   [<span data-ttu-id="0003d-194">Obtener ayuda SQL Server PowerShell</span><span class="sxs-lookup"><span data-stu-id="0003d-194">Get Help SQL Server PowerShell</span></span>](../../../powershell/sql-server-powershell.md)  
  
## <a name="see-also"></a><span data-ttu-id="0003d-195">Consulte también</span><span class="sxs-lookup"><span data-stu-id="0003d-195">See Also</span></span>  
 <span data-ttu-id="0003d-196">[Información general de Grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="0003d-196">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="0003d-197">[Modos de disponibilidad (Grupos de disponibilidad AlwaysOn)](availability-modes-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="0003d-197">[Availability Modes (AlwaysOn Availability Groups)](availability-modes-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="0003d-198">[Conmutación por error y modos de conmutación por error &#40;Grupos de disponibilidad AlwaysOn&#41;](failover-and-failover-modes-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="0003d-198">[Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="0003d-199">[Clústeres de conmutación por error de Windows Server &#40;WSFC&#41; con SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="0003d-199">[Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md) </span></span>  
 <span data-ttu-id="0003d-200">[Directiva de conmutación por error para instancias de clústeres de conmutación por error](../../../sql-server/failover-clusters/windows/failover-policy-for-failover-cluster-instances.md) </span><span class="sxs-lookup"><span data-stu-id="0003d-200">[Failover Policy for Failover Cluster Instances](../../../sql-server/failover-clusters/windows/failover-policy-for-failover-cluster-instances.md) </span></span>  
 [<span data-ttu-id="0003d-201">sp_server_diagnostics &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="0003d-201">sp_server_diagnostics &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql)  
