---
title: Información general de Grupos de disponibilidad AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 10/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- secondary databases [SQL Server], in availability group
- primary databases [SQL Server], in availability group
- Availability Groups [SQL Server], about
- Availability Groups [SQL Server], data movement
- Availability Groups [SQL Server]
ms.assetid: 04fd9d95-4624-420f-a3be-1794309b3a47
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: bc49a841daaeb0f7bda6f793890433f26c6b5c1f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87669841"
---
# <a name="overview-of-alwayson-availability-groups-sql-server"></a><span data-ttu-id="3e511-102">Información general de los grupos de disponibilidad AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="3e511-102">Overview of AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="3e511-103">En este tema se presentan los conceptos centrales de [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] para configurar y administrar uno o varios grupos de disponibilidad en [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3e511-103">This topic introduces the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] concepts that are central for configuring and managing one or more availability groups in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="3e511-104">Para obtener un resumen de las ventajas proporcionadas por los grupos de disponibilidad e información general de la terminología de [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], vea [Grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3e511-104">For a summary of the benefits offered by availability groups and an overview of [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] terminology, see [AlwaysOn Availability Groups &#40;SQL Server&#41;](always-on-availability-groups-sql-server.md).</span></span>

 <span data-ttu-id="3e511-105">Un *grupo de disponibilidad* admite un entorno de conmutación por error para un conjunto discreto de bases de datos de usuario, conocido como *bases de datos de disponibilidad*, que conmutan por error conjuntamente.</span><span class="sxs-lookup"><span data-stu-id="3e511-105">An *availability group* supports a failover environment for a discrete set of user databases, known as *availability databases*, that fail over together.</span></span> <span data-ttu-id="3e511-106">Un grupo de disponibilidad admite un conjunto de bases de datos principales y de uno a ocho conjuntos de bases de datos secundarias correspondientes.</span><span class="sxs-lookup"><span data-stu-id="3e511-106">An availability group supports a set of primary databases and one to eight sets of corresponding secondary databases.</span></span> <span data-ttu-id="3e511-107">Las bases de datos secundarias *no* son copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="3e511-107">Secondary databases are *not* backups.</span></span> <span data-ttu-id="3e511-108">Continúe haciendo copias de seguridad de las bases de datos y de sus registros de transacciones periódicamente.</span><span class="sxs-lookup"><span data-stu-id="3e511-108">Continue to back up your databases and their transaction logs on a regular basis.</span></span>

> [!TIP]
>  <span data-ttu-id="3e511-109">Puede crear cualquier tipo de copia de seguridad de una base de datos principal.</span><span class="sxs-lookup"><span data-stu-id="3e511-109">You can create any type of backup of a primary database.</span></span> <span data-ttu-id="3e511-110">También puede crear copias de seguridad de registros y copias de seguridad completas de solo copia de las bases de datos secundarias.</span><span class="sxs-lookup"><span data-stu-id="3e511-110">Alternatively, you can create log backups and copy-only full backups of secondary databases.</span></span> <span data-ttu-id="3e511-111">Para más información, vea [Secundarias activas: copia de seguridad en las réplicas secundarias &#40;grupos de disponibilidad AlwaysOn&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="3e511-111">For more information, see [Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span></span>

 <span data-ttu-id="3e511-112">Cada conjunto de base de datos de disponibilidad es hospedado por una *réplica de disponibilidad*.</span><span class="sxs-lookup"><span data-stu-id="3e511-112">Each set of availability database is hosted by an *availability replica*.</span></span> <span data-ttu-id="3e511-113">Existen dos tipos de réplicas de disponibilidad: una única *réplica principal*,</span><span class="sxs-lookup"><span data-stu-id="3e511-113">Two types of availability replicas exist: a single *primary replica*.</span></span> <span data-ttu-id="3e511-114">que hospeda las bases de datos principales, y entre una y ocho *réplicas secundarias*, cada una de las cuales hospeda un conjunto de bases de datos secundarias y podría ser el destino de una posible conmutación por error del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-114">which hosts the primary databases, and one to eight *secondary replicas*, each of which hosts a set of secondary databases and serves as a potential failover targets for the availability group.</span></span> <span data-ttu-id="3e511-115">Un grupo de disponibilidad realiza la conmutación por error en el nivel de réplica de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-115">An availability group fails over at the level of an availability replica.</span></span> <span data-ttu-id="3e511-116">En el conjunto de bases de datos de un grupo de disponibilidad, una réplica de disponibilidad proporciona redundancia únicamente en el nivel de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="3e511-116">An availability replica provides redundancy only at the database level-for the set of databases in one availability group.</span></span> <span data-ttu-id="3e511-117">Las conmutaciones por error no se deben a problemas de bases de datos, como, por ejemplo, a que una base de datos pase a ser sospechosa debido a la pérdida de un archivo de datos o a los daños de un registro de transacciones.</span><span class="sxs-lookup"><span data-stu-id="3e511-117">Failovers are not caused by database issues such as a database becoming suspect due to a loss of a data file or corruption of a transaction log.</span></span>

 <span data-ttu-id="3e511-118">La réplica principal hace que las bases de datos principales estén disponibles para las conexiones de lectura/escritura que tienen como origen los clientes.</span><span class="sxs-lookup"><span data-stu-id="3e511-118">The primary replica makes the primary databases available for read-write connections from clients.</span></span> <span data-ttu-id="3e511-119">También en un proceso denominado *sincronización de datos*, que tiene lugar en el nivel de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="3e511-119">Also, in a process known as *data synchronization*, which occurs at the database level.</span></span> <span data-ttu-id="3e511-120">La réplica principal envía las entradas del registro de transacciones de cada base de datos principal a todas las bases de datos secundarias.</span><span class="sxs-lookup"><span data-stu-id="3e511-120">The primary replica sends transaction log records of each primary database to every secondary database.</span></span> <span data-ttu-id="3e511-121">Cada una de las réplicas secundarias almacena en memoria caché las entradas del registro de transacciones (*refuerza* el registro) y las aplica a la base de datos secundaria correspondiente.</span><span class="sxs-lookup"><span data-stu-id="3e511-121">Every secondary replica caches the transaction log records (*hardens* the log) and then applies them to its corresponding secondary database.</span></span> <span data-ttu-id="3e511-122">La sincronización de datos se produce entre la base de datos principal y cada una de las bases de datos secundarias conectadas, independientemente de las demás bases de datos.</span><span class="sxs-lookup"><span data-stu-id="3e511-122">Data synchronization occurs between the primary database and each connected secondary database, independently of the other databases.</span></span> <span data-ttu-id="3e511-123">Por tanto, una base de datos secundaria puede suspenderse o sufrir un error sin afectar a otras bases de datos secundarias, y una base de datos principal puede suspenderse o sufrir un error sin afectar a otras bases de datos principales.</span><span class="sxs-lookup"><span data-stu-id="3e511-123">Therefore, a secondary database can be suspended or fail without affecting other secondary databases, and a primary database can be suspended or fail without affecting other primary databases.</span></span>

 <span data-ttu-id="3e511-124">Opcionalmente, puede configurar una o varias réplicas secundarias para que admitan acceso de solo lectura a las bases de datos secundarias y puede configurar las réplicas secundarias para que permitan copias de seguridad de las bases de datos secundarias.</span><span class="sxs-lookup"><span data-stu-id="3e511-124">Optionally, you can configure one or more secondary replicas to support read-only access to secondary databases, and you can configure any secondary replica to permit backups on secondary databases.</span></span>

 <span data-ttu-id="3e511-125">La implementación de [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] requiere un clúster de WSFC (clústeres de conmutación por error de Windows Server).</span><span class="sxs-lookup"><span data-stu-id="3e511-125">Deploying [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] requires a Windows Server Failover Clustering (WSFC) cluster.</span></span> <span data-ttu-id="3e511-126">Cada réplica de disponibilidad de un determinado grupo de disponibilidad debe residir en otro nodo del mismo clúster de WSFC.</span><span class="sxs-lookup"><span data-stu-id="3e511-126">Each availability replica of a given availability group must reside on a different node of the same WSFC cluster.</span></span> <span data-ttu-id="3e511-127">La única excepción es que mientras se migra a otro clúster de WSFC, un grupo de disponibilidad puede ocupar temporalmente dos clústeres.</span><span class="sxs-lookup"><span data-stu-id="3e511-127">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>

 <span data-ttu-id="3e511-128">Por cada grupo de disponibilidad que cree, se creará un grupo de recursos de WSFC.</span><span class="sxs-lookup"><span data-stu-id="3e511-128">A WSFC resource group is created for every availability group that you create.</span></span> <span data-ttu-id="3e511-129">El clúster de WSFC supervisa este grupo de recursos para evaluar el estado de la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="3e511-129">The WSFC cluster monitors this resource group to evaluate the health of the primary replica.</span></span> <span data-ttu-id="3e511-130">El quorum para [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] se basa en todos los nodos del clúster de WSFC independientemente de si un nodo de clúster determinado hospeda alguna réplica de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-130">The quorum for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is based on all nodes in the WSFC cluster regardless of whether a given cluster node hosts any availability replicas.</span></span> <span data-ttu-id="3e511-131">A diferencia de la creación de reflejo de la base de datos, no hay ningún rol testigo en [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3e511-131">In contrast to database mirroring, there is no witness role in [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>

> [!NOTE]
>  <span data-ttu-id="3e511-132">Para saber más sobre la relación de componentes AlwaysOn de SQL Server con el clúster de WSFC, vea [Clústeres de conmutación por error de Windows Server &#40;WSFC&#41; con SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3e511-132">For information about the relationship of SQL Server AlwaysOn components to the WSFC cluster, see [Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md).</span></span>

 <span data-ttu-id="3e511-133">En la ilustración siguiente se muestra un grupo de disponibilidad que contiene solo una réplica principal y cuatro réplicas secundarias.</span><span class="sxs-lookup"><span data-stu-id="3e511-133">The following illustration shows an availability group that contains one primary replica and four secondary replicas.</span></span> <span data-ttu-id="3e511-134">Se admiten hasta ocho réplicas secundarias, incluidas una réplica principal y dos réplicas secundarias de confirmación sincrónica.</span><span class="sxs-lookup"><span data-stu-id="3e511-134">Up to eight secondary replicas are supported, including one primary replica and two synchronous-commit secondary replicas.</span></span>

 <span data-ttu-id="3e511-135">![Grupo de disponibilidad con cinco réplicas](../../media/aoag-agintrofigure.gif "Grupo de disponibilidad con cinco réplicas")</span><span class="sxs-lookup"><span data-stu-id="3e511-135">![Availability group with five replicas](../../media/aoag-agintrofigure.gif "Availability group with five replicas")</span></span>


##  <a name="availability-databases"></a><a name="AvDbs"></a><span data-ttu-id="3e511-136">Bases de datos de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="3e511-136">Availability Databases</span></span>
 <span data-ttu-id="3e511-137">Para agregar una base de datos a un grupo de disponibilidad, la base de datos debe ser una base de datos de lectura/escritura en línea que exista en la instancia del servidor que hospeda la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="3e511-137">To add a database to an availability group, the database must be an online, read-write database that exists on the server instance that hosts the primary replica.</span></span> <span data-ttu-id="3e511-138">Al agregar una base de datos, se une al grupo de disponibilidad como base de datos principal, mientras permanece disponible para los clientes.</span><span class="sxs-lookup"><span data-stu-id="3e511-138">When you add a database, it joins the availability group as a primary database, while remaining available to clients.</span></span> <span data-ttu-id="3e511-139">No existe una base de datos secundaria correspondiente hasta que las copias de seguridad de la nueva base de datos principal se restauran a la instancia del servidor que hospeda la réplica secundaria (utilizando RESTORE WITH NORECOVERY).</span><span class="sxs-lookup"><span data-stu-id="3e511-139">No corresponding secondary database exists until backups of the new primary database are restored to the server instance that hosts the secondary replica (using RESTORE WITH NORECOVERY).</span></span> <span data-ttu-id="3e511-140">La nueva base de datos secundaria está en estado RESTORING hasta que se une al grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-140">The new secondary database is in the RESTORING state until it is joined to the availability group.</span></span> <span data-ttu-id="3e511-141">Para más información, vea [Iniciar el movimiento de datos en una base de datos secundaria AlwaysOn &#40;SQL Server&#41;](start-data-movement-on-an-always-on-secondary-database-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3e511-141">For more information, see [Start Data Movement on an AlwaysOn Secondary Database &#40;SQL Server&#41;](start-data-movement-on-an-always-on-secondary-database-sql-server.md).</span></span>

 <span data-ttu-id="3e511-142">La unión coloca la base de datos secundaria en estado ONLINE e inicia la sincronización de datos con la base de datos principal correspondiente.</span><span class="sxs-lookup"><span data-stu-id="3e511-142">Joining places the secondary database into the ONLINE state and initiates data synchronization with the corresponding primary database.</span></span> <span data-ttu-id="3e511-143">La*sincronización de datos* es el proceso mediante el cual los cambios en una base de datos principal se reproducidos en una base de datos secundaria.</span><span class="sxs-lookup"><span data-stu-id="3e511-143">*Data synchronization* is the process by which changes to a primary database are reproduced on a secondary database.</span></span> <span data-ttu-id="3e511-144">La sincronización de datos implica que la base de datos principal envía entradas del registro de transacciones a la base de datos secundaria.</span><span class="sxs-lookup"><span data-stu-id="3e511-144">Data synchronization involves the primary database sending transaction log records to the secondary database.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="3e511-145">Una base de datos de disponibilidad a veces se denomina *réplica de base de datos* en los nombres de Objetos de administración de SQL Server (SMO), [!INCLUDE[tsql](../../../includes/tsql-md.md)]y PowerShell.</span><span class="sxs-lookup"><span data-stu-id="3e511-145">An availability database is sometimes called a *database replica* in [!INCLUDE[tsql](../../../includes/tsql-md.md)], PowerShell, and SQL Server Management Objects (SMO) names.</span></span> <span data-ttu-id="3e511-146">Por ejemplo, el término, "réplica de base de datos" se usa en los nombres de las vistas de administración dinámica AlwaysOn que devuelven información acerca de las bases de datos de disponibilidad:  **sys.dm_hadr_database_replica_states** y **sys.dm_hadr_database_replica_cluster_states**.</span><span class="sxs-lookup"><span data-stu-id="3e511-146">For example, the term "database replica" is used in the names of the AlwaysOn dynamic management views that return information about availability databases:  **sys.dm_hadr_database_replica_states** and **sys.dm_hadr_database_replica_cluster_states**.</span></span> <span data-ttu-id="3e511-147">Sin embargo, en Libros en pantalla de SQL Server, el término "réplica" suele hacer referencia a las réplicas de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-147">However, in SQL Server Books Online, the term "replica" typically refers to availability replicas.</span></span> <span data-ttu-id="3e511-148">Por ejemplo, “replicación primaria” y “replicación secundaria” siempre hacen referencia a la disponibilidad de las réplicas.</span><span class="sxs-lookup"><span data-stu-id="3e511-148">For example, "primary replica" and "secondary replica" always refer to availability replicas.</span></span>

##  <a name="availability-replicas"></a><a name="AGsARsADBs"></a><span data-ttu-id="3e511-149">Réplicas de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="3e511-149">Availability Replicas</span></span>
 <span data-ttu-id="3e511-150">Cada grupo de disponibilidad define un conjunto de dos o más asociados de conmutación por error conocidos como réplicas de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-150">Each availability group defines a set of two or more failover partners known as availability replicas.</span></span> <span data-ttu-id="3e511-151">Las*réplicas de disponibilidad* son componentes del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-151">*Availability replicas* are components of the availability group.</span></span> <span data-ttu-id="3e511-152">Cada réplica de disponibilidad hospeda una copia de las bases de datos de disponibilidad en el grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-152">Each availability replica hosts a copy of the availability databases in the availability group.</span></span> <span data-ttu-id="3e511-153">Para un grupo de disponibilidad determinado, las réplicas de disponibilidad deben hospedarse en instancias independientes de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que residan en nodos diferentes de un clúster de WSFC.</span><span class="sxs-lookup"><span data-stu-id="3e511-153">For a given availability group, the availability replicas must be hosted by separate instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] residing on different nodes of a WSFC cluster.</span></span> <span data-ttu-id="3e511-154">Cada una de estas instancias de servidor debe estar habilitada para AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="3e511-154">Each of these server instances must be enabled for AlwaysOn.</span></span>

 <span data-ttu-id="3e511-155">Una instancia determinada solo puede hospedar una única réplica de disponibilidad por grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-155">A given instance can host only one availability replica per availability group.</span></span> <span data-ttu-id="3e511-156">Sin embargo, cada instancia puede utilizarse para varios grupos de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-156">However, each instance can be used for many availability groups.</span></span> <span data-ttu-id="3e511-157">Una instancia determinada puede ser una instancia independiente o una instancia de clúster de conmutación por error (FCI) de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3e511-157">A given instance can be either a stand-alone instance or a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI).</span></span> <span data-ttu-id="3e511-158">Si necesita redundancia de nivel de servidor, utilice instancias de clúster de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="3e511-158">If you require server-level redundancy, use Failover Cluster Instances.</span></span>

 <span data-ttu-id="3e511-159">A cada réplica de disponibilidad se le asigna un rol, ya sea el *rol principal* o el *rol secundario*, que es heredado por las bases de datos de disponibilidad de esa réplica.</span><span class="sxs-lookup"><span data-stu-id="3e511-159">Every availability replica is assigned an initial role-either the *primary role* or the *secondary role*, which is inherited by the availability databases of that replica.</span></span> <span data-ttu-id="3e511-160">El rol de una réplica dada determina si hospeda bases de datos de lectura/escritura o bases de datos de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="3e511-160">The role of a given replica determines whether it hosts read-write databases or read-only databases.</span></span> <span data-ttu-id="3e511-161">A una réplica, conocida como *réplica principal*, se le asigna el rol principal y hospeda bases de datos de lectura/escritura, que se denominan *bases de datos principales*.</span><span class="sxs-lookup"><span data-stu-id="3e511-161">One replica, known as the *primary replica*, is assigned the primary role and hosts read-write databases, which are known as *primary databases*.</span></span> <span data-ttu-id="3e511-162">Como mínimo, a otra réplica denominada *réplica secundaria*se le asigna el rol secundario.</span><span class="sxs-lookup"><span data-stu-id="3e511-162">At least one other replica, known as a *secondary replica*, is assigned the secondary role.</span></span> <span data-ttu-id="3e511-163">Una réplica secundaria hospeda bases de datos de solo lectura, conocidas como bases de datos secundarias.</span><span class="sxs-lookup"><span data-stu-id="3e511-163">A secondary replica hosts read-only databases, known as secondary databases.</span></span>

> [!NOTE]
>  <span data-ttu-id="3e511-164">Cuando el rol de una réplica de disponibilidad es indeterminado, como durante una conmutación por error, sus bases de datos están temporalmente en estado NOT SYNCHRONIZING.</span><span class="sxs-lookup"><span data-stu-id="3e511-164">When the role of an availability replica is indeterminate, such as during a failover, its databases are temporarily in a NOT SYNCHRONIZING state.</span></span> <span data-ttu-id="3e511-165">Su rol se establece en RESOLVING hasta que el rol de la réplica de disponibilidad se resuelve.</span><span class="sxs-lookup"><span data-stu-id="3e511-165">Their role is set to RESOLVING until the role of the availability replica has resolved.</span></span> <span data-ttu-id="3e511-166">Si una réplica de disponibilidad se resuelve en el rol principal, sus bases de datos se convierten en las bases de datos principales.</span><span class="sxs-lookup"><span data-stu-id="3e511-166">If an availability replica resolves to the primary role, its databases become the primary databases.</span></span> <span data-ttu-id="3e511-167">Si una réplica de disponibilidad se resuelve en el rol secundario, sus bases de datos se convierten en bases de datos secundarias.</span><span class="sxs-lookup"><span data-stu-id="3e511-167">If an availability replica resolves to the secondary role, its databases become secondary databases.</span></span>

##  <a name="availability-modes"></a><a name="AvailabilityModes"></a><span data-ttu-id="3e511-168">Modos de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="3e511-168">Availability Modes</span></span>
 <span data-ttu-id="3e511-169">El modo de disponibilidad es una propiedad de cada réplica de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-169">The availability mode is a property of each availability replica.</span></span> <span data-ttu-id="3e511-170">El modo de disponibilidad determina si la réplica principal espera la confirmación de transacciones en una base de datos hasta que una réplica secundaria haya escrito las entradas del registro de transacciones en el disco (protegido el registro).</span><span class="sxs-lookup"><span data-stu-id="3e511-170">The availability mode determines whether the primary replica waits to commit transactions on a database until a given secondary replica has written the transaction log records to disk (hardened the log).</span></span> [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="3e511-171">admite dos modos de disponibilidad: *modo de confirmación asincrónica* y *modo de confirmación sincrónica*.</span><span class="sxs-lookup"><span data-stu-id="3e511-171">supports two availability modes-*asynchronous-commit mode* and *synchronous-commit mode*.</span></span>

-   <span data-ttu-id="3e511-172">**Asynchronous-commit mode**</span><span class="sxs-lookup"><span data-stu-id="3e511-172">**Asynchronous-commit mode**</span></span>

     <span data-ttu-id="3e511-173">Una réplica de disponibilidad que usa este modo de disponibilidad se denomina*réplica de confirmación asincrónica*.</span><span class="sxs-lookup"><span data-stu-id="3e511-173">An availability replica that uses this availability mode is known as an*asynchronous-commit replica*.</span></span> <span data-ttu-id="3e511-174">En modo de confirmación asincrónica, la réplica principal confirma las transacciones sin esperar la notificación de que una réplica secundaria de confirmación asincrónica ha protegido el registro.</span><span class="sxs-lookup"><span data-stu-id="3e511-174">Under asynchronous-commit mode, the primary replica commits transactions without waiting for acknowledgement that an asynchronous-commit secondary replica has hardened the log.</span></span> <span data-ttu-id="3e511-175">El modo de confirmación asincrónica minimiza la latencia de las transacciones en las bases de datos secundarias pero permite que se retrasen detrás de las bases de datos principales, haciendo posible alguna pérdida de datos.</span><span class="sxs-lookup"><span data-stu-id="3e511-175">Asynchronous-commit mode minimizes transaction latency on the secondary databases but allows them to lag behind the primary databases, making some data loss possible.</span></span>

-   <span data-ttu-id="3e511-176">**Synchronous-commit mode**</span><span class="sxs-lookup"><span data-stu-id="3e511-176">**Synchronous-commit mode**</span></span>

     <span data-ttu-id="3e511-177">Una réplica de disponibilidad que usa este modo de disponibilidad se denomina *réplica de confirmación sincrónica*.</span><span class="sxs-lookup"><span data-stu-id="3e511-177">An availability replica that uses this availability mode is known as a *synchronous-commit replica*.</span></span> <span data-ttu-id="3e511-178">En modo de confirmación sincrónica, antes de la confirmación de transacciones, una réplica principal de confirmación sincrónica espera a que una réplica secundaria de confirmación sincrónica notifique que ha terminado de proteger el registro.</span><span class="sxs-lookup"><span data-stu-id="3e511-178">Under synchronous-commit mode, before committing transactions, a synchronous-commit primary replica waits for a synchronous-commit secondary replica to acknowledge that it has finished hardening the log.</span></span> <span data-ttu-id="3e511-179">El modo de confirmación sincrónica asegura que, una vez que una base de datos secundaria se sincroniza con la base de datos principal, las transacciones confirmadas queden totalmente protegidas.</span><span class="sxs-lookup"><span data-stu-id="3e511-179">Synchronous-commit mode ensures that once a given secondary database is synchronized with the primary database, committed transactions are fully protected.</span></span> <span data-ttu-id="3e511-180">Esta protección se produce a costa de que aumente la latencia de las transacciones.</span><span class="sxs-lookup"><span data-stu-id="3e511-180">This protection comes at the cost of increased transaction latency.</span></span>

 <span data-ttu-id="3e511-181">Para más información, vea [Modos de disponibilidad &#40;Grupos de disponibilidad AlwaysOn&#41;](availability-modes-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="3e511-181">For more information, see [Availability Modes &#40;AlwaysOn Availability Groups&#41;](availability-modes-always-on-availability-groups.md).</span></span>

##  <a name="types-of-failover"></a><a name="FormsOfFailover"></a><span data-ttu-id="3e511-182">Tipos de conmutación por error</span><span class="sxs-lookup"><span data-stu-id="3e511-182">Types of Failover</span></span>
 <span data-ttu-id="3e511-183">En el contexto de una sesión entre la réplica principal y una réplica secundaria, los roles principal y secundario son potencialmente intercambiables en un proceso denominado *conmutación por error*.</span><span class="sxs-lookup"><span data-stu-id="3e511-183">Within the context of a session between the primary replica and a secondary replica, the primary and secondary roles are potentially interchangeable in a process known as *failover*.</span></span> <span data-ttu-id="3e511-184">Durante una conmutación por error, la réplica secundaria de destino realiza la transición al rol principal, pasando a ser la nueva réplica principal.</span><span class="sxs-lookup"><span data-stu-id="3e511-184">During a failover the target secondary replica transitions to the primary role, becoming the new primary replica.</span></span> <span data-ttu-id="3e511-185">La nueva réplica principal pone sus bases de datos en línea como bases de datos principales y las aplicaciones cliente pueden conectarse a ellas.</span><span class="sxs-lookup"><span data-stu-id="3e511-185">The new primary replica brings its databases online as the primary databases, and client applications can connect to them.</span></span> <span data-ttu-id="3e511-186">Cuando la réplica principal anterior está disponible, realiza la transición al rol secundario, pasando a ser una réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="3e511-186">When the former primary replica is available, it transitions to the secondary role, becoming a secondary replica.</span></span> <span data-ttu-id="3e511-187">Las bases de datos principales anteriores se convierten en bases de datos secundaria y se reanuda la sincronización de datos.</span><span class="sxs-lookup"><span data-stu-id="3e511-187">The former primary databases become secondary databases and data synchronization resumes.</span></span>

 <span data-ttu-id="3e511-188">Existen tres formas de conmutación por error: automática, manual y forzada (con posible pérdida de datos).</span><span class="sxs-lookup"><span data-stu-id="3e511-188">Three forms of failover exist-automatic, manual, and forced (with possible data loss).</span></span> <span data-ttu-id="3e511-189">La forma o formas de conmutación por error admitidas por una réplica secundaria dependen de su modo de disponibilidad y, para el modo de confirmación sincrónica, del modo de conmutación por error de la réplica principal y la réplica secundaria de destino, del siguiente modo.</span><span class="sxs-lookup"><span data-stu-id="3e511-189">The form or forms of failover supported by a given secondary replica depends on its availability mode, and, for synchronous-commit mode, on the failover mode on the primary replica and target secondary replica, as follows.</span></span>

-   <span data-ttu-id="3e511-190">El modo de confirmación sincrónica admite dos formas de conmutación por error*manual planeada* por conmutación por error y *conmutación automática por*error, si la réplica secundaria de destino está sincronizada actualmente con el avt1.</span><span class="sxs-lookup"><span data-stu-id="3e511-190">Synchronous-commit mode supports two forms of failover-*planned manual failover* and *automatic failover*, if the target secondary replica is currently synchronized with the avt1.</span></span> <span data-ttu-id="3e511-191">La compatibilidad con estas formas de conmutación por error depende de la *propiedad del modo de conmutación por error* en los asociados de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="3e511-191">The support for these forms of failover depends on the setting of the *failover mode property* on the failover partners.</span></span> <span data-ttu-id="3e511-192">Si el modo de conmutación por error se establece en "manual” en la réplica principal o la réplica secundaria, solo se admite la conmutación por error manual para esa réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="3e511-192">If failover mode is set to "manual" on either the primary or secondary replica, only manual failover is supported for that secondary replica.</span></span> <span data-ttu-id="3e511-193">Si el modo de conmutación por error se establece en “automático” en las réplicas principal y secundaria, se admiten la conmutación por error manual y automática en esa réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="3e511-193">If failover mode is set to "automatic" on both the primary and secondary replicas, both automatic and manual failover are supported on that secondary replica.</span></span>

    -   <span data-ttu-id="3e511-194">**Conmutación por error manual planeada** (sin pérdida de datos)</span><span class="sxs-lookup"><span data-stu-id="3e511-194">**Planned manual failover** (without data loss)</span></span>

         <span data-ttu-id="3e511-195">Una conmutación por error manual se produce después de que un administrador de base de datos emite un comando de conmutación por error y produce la transición de una réplica secundaria sincronizada al rol principal (con protección de datos garantizada) y la transición de la réplica principal al rol secundario.</span><span class="sxs-lookup"><span data-stu-id="3e511-195">A manual failover occurs after a database administrator issues a failover command and causes a synchronized secondary replica to transition to the primary role (with guaranteed data protection) and the primary replica to transition to the secondary role.</span></span> <span data-ttu-id="3e511-196">Una conmutación por error manual requiere que la réplica principal y la réplica secundaria de destino se ejecuten en modo de confirmación sincrónica, y la réplica secundaria ya debe estar sincronizada.</span><span class="sxs-lookup"><span data-stu-id="3e511-196">A manual failover requires that both the primary replica and the target secondary replica are running under synchronous-commit mode, and the secondary replica must already be synchronized.</span></span>

    -   <span data-ttu-id="3e511-197">**Conmutación automática por error** (sin pérdida de datos)</span><span class="sxs-lookup"><span data-stu-id="3e511-197">**Automatic failover** (without data loss)</span></span>

         <span data-ttu-id="3e511-198">Una conmutación por error automática se produce en respuesta a un error que produce la transición de una réplica secundaria al rol principal (con protección de datos garantizada).</span><span class="sxs-lookup"><span data-stu-id="3e511-198">An automatic failover occurs in response to a failure that causes a synchronized secondary replica to transition to the primary role (with guaranteed data protection).</span></span> <span data-ttu-id="3e511-199">Cuando la réplica principal anterior está disponible, efectúa la transición al rol secundario.</span><span class="sxs-lookup"><span data-stu-id="3e511-199">When the former primary replica becomes available, it transitions to the secondary role.</span></span> <span data-ttu-id="3e511-200">La conmutación por error automática requiere que la réplica principal y la réplica secundaria de destino se ejecuten en modo de confirmación sincrónica con el modo de conmutación por error establecido en "Automático".</span><span class="sxs-lookup"><span data-stu-id="3e511-200">Automatic failover requires that both the primary replica and the target secondary replica are running under synchronous-commit mode with the failover mode set to "Automatic".</span></span> <span data-ttu-id="3e511-201">Además, la réplica secundaria ya debe estar sincronizada, tener quórum de WSFC y cumplir las condiciones especificadas por la [directiva de conmutación por error flexible](flexible-automatic-failover-policy-availability-group.md)del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-201">In addition, the secondary replica must already be synchronized, have WSFC quorum, and meet the conditions specified by the [flexible failover policy](flexible-automatic-failover-policy-availability-group.md)of the availability group.</span></span>

        > [!IMPORTANT]
        >  <span data-ttu-id="3e511-202">Las instancias de clúster de conmutación por error (FCI) de SQL Server no admiten la conmutación automática por error de grupos de disponibilidad, por lo tanto, todas las réplicas de disponibilidad hospedadas por un FCI solo se pueden configurar para la conmutación por error manual.</span><span class="sxs-lookup"><span data-stu-id="3e511-202">SQL Server Failover Cluster Instances (FCIs) do not support automatic failover by availability groups, so any availability replica that is hosted by an FCI can only be configured for manual failover.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="3e511-203">Tenga en cuenta que si emite un comando de conmutación por error forzada en una réplica secundaria sincronizada, la réplica secundaria se comportará igual que en el caso de una conmutación por error manual planeada.</span><span class="sxs-lookup"><span data-stu-id="3e511-203">Note that if you issue a forced failover command on a synchronized secondary replica, the secondary replica behaves the same as for a planned manual failover.</span></span>

-   <span data-ttu-id="3e511-204">En el modo de confirmación asincrónica, la única forma de conmutación por error es la conmutación por error manual forzada (con posible pérdida de datos), denominada normalmente *conmutación por error forzada*.</span><span class="sxs-lookup"><span data-stu-id="3e511-204">Under asynchronous-commit mode, the only form of failover is forced manual failover (with possible data loss), typically called *forced failover*.</span></span> <span data-ttu-id="3e511-205">La conmutación por error forzada se considera una forma de conmutación por error manual porque solo se puede iniciar manualmente.</span><span class="sxs-lookup"><span data-stu-id="3e511-205">Forced failover is considered a form of manual failover because it can only be initiated manually.</span></span> <span data-ttu-id="3e511-206">La conmutación por error forzada es una opción de recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="3e511-206">Forced failover is a disaster recovery option.</span></span> <span data-ttu-id="3e511-207">Es la única forma de conmutación por error posible cuando la réplica secundaria de destino no está sincronizada con la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="3e511-207">It is the only form of failover that is possible when the target secondary replica is not synchronized with the primary replica.</span></span>

 <span data-ttu-id="3e511-208">Para más información, vea [Conmutación por error y modos de conmutación por error &#40;Grupos de disponibilidad AlwaysOn&#41;](failover-and-failover-modes-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="3e511-208">For more information, see [Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md).</span></span>

##  <a name="client-connections"></a><a name="ClientConnections"></a> <span data-ttu-id="3e511-209">Conexiones de cliente</span><span class="sxs-lookup"><span data-stu-id="3e511-209">Client Connections</span></span>
 <span data-ttu-id="3e511-210">Puede proporcionar conectividad de cliente a la réplica principal de un grupo de disponibilidad determinado mediante la creación de un agente de escucha del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-210">You can provide client connectivity to the primary replica of a given availability group by creating an availability group listener.</span></span> <span data-ttu-id="3e511-211">Un *agente de escucha del grupo de disponibilidad* proporciona un conjunto de recursos que se adjunta a un grupo de disponibilidad determinado para dirigir las conexiones de cliente a la réplica de disponibilidad adecuada.</span><span class="sxs-lookup"><span data-stu-id="3e511-211">An *availability group listener* provides a set of resources that is attached to a given availability group to direct client connections to the appropriate availability replica.</span></span>

 <span data-ttu-id="3e511-212">Un agente de escucha del grupo de disponibilidad está asociada a un nombre DNS único que actúa como un nombre de red virtual (VNN), una o más direcciones IP virtuales (VIP) y un número de puerto TCP.</span><span class="sxs-lookup"><span data-stu-id="3e511-212">An availability group listener is associated with a unique DNS name that serves as a virtual network name (VNN), one or more virtual IP addresses (VIPs), and a TCP port number.</span></span> <span data-ttu-id="3e511-213">Para obtener más información, vea [Agentes de escucha de grupo de disponibilidad, conectividad de cliente y conmutación por error de una aplicación &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="3e511-213">For more information, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>

> [!TIP]
>  <span data-ttu-id="3e511-214">Si un grupo de disponibilidad posee solo dos réplicas de disponibilidad y no está configurado para permitir el acceso de lectura a la réplica secundaria, los clientes pueden conectarse a la réplica principal usando una [cadena de conexión de creación de reflejo de la base de datos](../../database-mirroring/connect-clients-to-a-database-mirroring-session-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3e511-214">If an availability group possesses only two availability replicas and is not configured to allow read-access to the secondary replica, clients can connect to the primary replica by using a [database mirroring connection string](../../database-mirroring/connect-clients-to-a-database-mirroring-session-sql-server.md).</span></span> <span data-ttu-id="3e511-215">Este enfoque puede ser útil temporalmente después de migrar una base de datos de creación de reflejo de la base de datos a [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3e511-215">This approach can be useful temporarily after you migrate a database from database mirroring to [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="3e511-216">Antes de agregar réplicas secundarias adicionales, deberá crear un agente de escucha del grupo de disponibilidad y actualizar sus aplicaciones para que se utilice el nombre de red del agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="3e511-216">Before you add additional secondary replicas, you will need to create an availability group listener the availability group and update your applications to use the network name of the listener.</span></span>

##  <a name="active-secondary-replicas"></a><a name="ActiveSecondaries"></a><span data-ttu-id="3e511-217">Réplicas secundarias activas</span><span class="sxs-lookup"><span data-stu-id="3e511-217">Active Secondary Replicas</span></span>
 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="3e511-218">admite réplicas secundarias activas.</span><span class="sxs-lookup"><span data-stu-id="3e511-218">supports active secondary replicas.</span></span> <span data-ttu-id="3e511-219">Entre las funciones secundarias activas se incluye la compatibilidad con:</span><span class="sxs-lookup"><span data-stu-id="3e511-219">Active secondary capabilities include support for:</span></span>

-   <span data-ttu-id="3e511-220">**Realizar operaciones de copia de seguridad en las réplicas secundarias**</span><span class="sxs-lookup"><span data-stu-id="3e511-220">**Performing backup operations on secondary replicas**</span></span>

     <span data-ttu-id="3e511-221">Las réplicas secundarias admiten la realización de copias de seguridad de registros y de [solo copia](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) de toda una base de datos, un archivo o un grupo de archivos.</span><span class="sxs-lookup"><span data-stu-id="3e511-221">The secondary replicas support performing log backups and [copy-only](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) backups of a full database, file, or filegroup.</span></span> <span data-ttu-id="3e511-222">Puede configurar el grupo de disponibilidad para que se especifique la preferencia por la que las copias de seguridad deben realizarse.</span><span class="sxs-lookup"><span data-stu-id="3e511-222">You can configure the availability group to specify a preference for where backups should be performed.</span></span> <span data-ttu-id="3e511-223">Es importante entender que SQL Server no aplica la preferencia, por lo que las copias de seguridad ad hoc no resultan afectadas.</span><span class="sxs-lookup"><span data-stu-id="3e511-223">It is important to understand that the preference is not enforced by SQL Server, so it has no impact on ad-hoc backups.</span></span> <span data-ttu-id="3e511-224">La interpretación de esta preferencia depende de la lógica, si existe, del script con los trabajos de copia de seguridad ejecutado para cada una de las bases de datos de un grupo de disponibilidad dado.</span><span class="sxs-lookup"><span data-stu-id="3e511-224">The interpretation of this preference depends on the logic, if any, that you script into your back jobs for each of the databases in a given availability group.</span></span> <span data-ttu-id="3e511-225">En el caso de una réplica de disponibilidad individual, puede especificar la prioridad para realizar copias de seguridad en esta réplica en relación con las otras réplicas del mismo grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="3e511-225">For an individual availability replica, you can specify your priority for performing backups on this replica relative to the other replicas in the same availability group.</span></span> <span data-ttu-id="3e511-226">Para más información, vea [Secundarias activas: copia de seguridad en las réplicas secundarias &#40;grupos de disponibilidad AlwaysOn&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="3e511-226">For more information, see [Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span></span>

-   <span data-ttu-id="3e511-227">**Acceso de solo lectura a una o varias réplicas secundarias (réplicas secundarias legibles)**</span><span class="sxs-lookup"><span data-stu-id="3e511-227">**Read-only access to one or more secondary replicas (readable secondary replicas)**</span></span>

     <span data-ttu-id="3e511-228">La réplica de disponibilidad se puede configurar para permitir el acceso de solo lectura a las bases de datos locales si desempeñan el rol secundario, aunque algunas operaciones no son totalmente compatibles.</span><span class="sxs-lookup"><span data-stu-id="3e511-228">Any availability replica can be configured to allow read-only access to its local databases when performing the secondary role, though some operations are not fully supported.</span></span> <span data-ttu-id="3e511-229">Además, si desea evitar que cargas de trabajo de solo lectura se ejecuten en la réplica principal, puede configurar las réplicas para permitir el acceso de lectura y escritura cuando se ejecuten con el rol principal.</span><span class="sxs-lookup"><span data-stu-id="3e511-229">Also, if you would like to prevent read-only workloads from running on the primary replica, you can configure the replicas to allow only read-write access when running under the primary role.</span></span> <span data-ttu-id="3e511-230">Para más información, vea [Secundarias activas: réplicas secundarias legibles &#40;grupos de disponibilidad AlwaysOn&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="3e511-230">For more information, see [Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md).</span></span>

     <span data-ttu-id="3e511-231">Si un grupo de disponibilidad posee actualmente un agente de escucha de grupo de disponibilidad y una o varias réplicas secundarias legibles, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] puede enrutar las solicitudes de conexión de intento de lectura a una de ellas (*enrutamiento de solo lectura*).</span><span class="sxs-lookup"><span data-stu-id="3e511-231">If an availability group currently possesses an availability group listener and one or more readable secondary replicas, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can route read-intent connection requests to one of them (*read-only routing*).</span></span> <span data-ttu-id="3e511-232">Para obtener más información, vea [Agentes de escucha de grupo de disponibilidad, conectividad de cliente y conmutación por error de una aplicación &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="3e511-232">For more information, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>

##  <a name="session-timeout-period"></a><a name="SessionTimeoutPerios"></a><span data-ttu-id="3e511-233">Tiempo de espera de la sesión</span><span class="sxs-lookup"><span data-stu-id="3e511-233">Session-Timeout Period</span></span>
 <span data-ttu-id="3e511-234">El tiempo de espera de la sesión es una propiedad de la réplica de disponibilidad que determina cuánto tiempo puede permanecer inactiva la conexión con otra réplica de disponibilidad antes de que se cierre la conexión.</span><span class="sxs-lookup"><span data-stu-id="3e511-234">The session-timeout period is an availability-replica property that determines how long connection with another availability replica can remain inactive before the connection is closed.</span></span> <span data-ttu-id="3e511-235">Las réplicas principales y secundarias hacen ping entre sí para indicar que siguen estando activas.</span><span class="sxs-lookup"><span data-stu-id="3e511-235">The primary and secondary replicas ping each other to signal that they are still active.</span></span> <span data-ttu-id="3e511-236">Si se recibe un ping de otra réplica durante el tiempo de espera, significa que la conexión todavía está abierta y que las instancias del servidor se están comunicando.</span><span class="sxs-lookup"><span data-stu-id="3e511-236">Receiving a ping from the other replica during the timeout period indicates that the connection is still open and that the server instances are communicating.</span></span> <span data-ttu-id="3e511-237">Al recibir un ping, una réplica de disponibilidad restablece el contador de tiempo de espera de la sesión de esa conexión.</span><span class="sxs-lookup"><span data-stu-id="3e511-237">On receiving a ping, an availability replica resets its session-timeout counter on that connection.</span></span>

 <span data-ttu-id="3e511-238">El tiempo de espera de la sesión impide que una réplica espere indefinidamente a recibir un ping de la otra réplica.</span><span class="sxs-lookup"><span data-stu-id="3e511-238">The session-timeout period prevents either replica from waiting indefinitely to receive a ping from the other replica.</span></span> <span data-ttu-id="3e511-239">Si no se recibe ningún ping de otra réplica durante el tiempo de espera de la sesión, el tiempo de espera de la réplica se agota. La conexión se cierra y la réplica con el tiempo de espera agotado entra en el estado DISCONNECTED.</span><span class="sxs-lookup"><span data-stu-id="3e511-239">If no ping is received from the other replica within the session-timeout period, the replica times out. Its connection is closed, and the timed-out replica enters the DISCONNECTED state.</span></span> <span data-ttu-id="3e511-240">Aunque una replicación desconectada esté configurada en modo de confirmación sincrónica, las transacciones no esperarán a que la réplica vuelva a conectarse y sincronizarse.</span><span class="sxs-lookup"><span data-stu-id="3e511-240">Even if a disconnected replica is configured for synchronous-commit mode, transactions will not wait for that replica to reconnect and resynchronize.</span></span>

 <span data-ttu-id="3e511-241">El tiempo de espera predeterminado de la sesión de cada réplica de disponibilidad es de 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="3e511-241">The default session-timeout period for each availability replica is 10 seconds.</span></span> <span data-ttu-id="3e511-242">Este valor puede configurarlo el usuario, con un mínimo de 5 segundos.</span><span class="sxs-lookup"><span data-stu-id="3e511-242">This value is user-configurable, with a minimum of 5 seconds.</span></span> <span data-ttu-id="3e511-243">Normalmente, es recomendable mantener el período de espera en 10 segundos o más.</span><span class="sxs-lookup"><span data-stu-id="3e511-243">Generally, we recommend that you keep the time-out period at 10 seconds or greater.</span></span> <span data-ttu-id="3e511-244">Si establece el valor en menos de 10 segundos, existe la posibilidad de que un sistema sobrecargado declare un error falso.</span><span class="sxs-lookup"><span data-stu-id="3e511-244">Setting the value to less than 10 seconds creates the possibility of a heavily loaded system declaring a false failure.</span></span>

> [!NOTE]
>  <span data-ttu-id="3e511-245">En el rol de resolución, el tiempo de espera de la sesión no se aplica, porque no se hace ping.</span><span class="sxs-lookup"><span data-stu-id="3e511-245">In the resolving role, the session-timeout period does not apply because pinging does not occur.</span></span>

##  <a name="automatic-page-repair"></a><a name="APR"></a><span data-ttu-id="3e511-246">Reparación de página automática</span><span class="sxs-lookup"><span data-stu-id="3e511-246">Automatic Page Repair</span></span>
 <span data-ttu-id="3e511-247">Cada réplica de disponibilidad intenta la recuperación automática de las páginas dañadas en una base de datos local resolviendo ciertos tipos de errores que impiden la lectura de una página de datos.</span><span class="sxs-lookup"><span data-stu-id="3e511-247">Each availability replica tries to automatically recover from corrupted pages on a local database by resolving certain types of errors that prevent reading a data page.</span></span> <span data-ttu-id="3e511-248">Si una réplica secundaria no puede leer una página, la réplica solicita una nueva copia de la página de la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="3e511-248">If a secondary replica cannot read a page, the replica requests a fresh copy of the page from the primary replica.</span></span> <span data-ttu-id="3e511-249">Si la réplica principal no puede leer una página, la réplica propaga una solicitud de una nueva copia a todas las réplicas secundarias y obtiene la página de la primera que responda.</span><span class="sxs-lookup"><span data-stu-id="3e511-249">If the primary replica cannot read a page, the replica broadcasts a request for a fresh copy to all the secondary replicas and gets the page from the first to respond.</span></span> <span data-ttu-id="3e511-250">Si la solicitud se realiza correctamente, la copia sustituirá a la página que no se puede leer, de forma que se resuelve el error en la mayoría de los casos.</span><span class="sxs-lookup"><span data-stu-id="3e511-250">If this request succeeds, the unreadable page is replaced by the copy, which usually resolves the error.</span></span>

 <span data-ttu-id="3e511-251">Para más información, vea [Reparación de página automática &#40;grupos de disponibilidad: creación de reflejo de base de datos&#41;](../../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="3e511-251">For more information, see [Automatic Page Repair &#40;For Availability Groups and Database Mirroring&#41;](../../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md).</span></span>

##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="3e511-252">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="3e511-252">Related Tasks</span></span>

-   [<span data-ttu-id="3e511-253">Introducción con Grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="3e511-253">Getting Started with AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](getting-started-with-always-on-availability-groups-sql-server.md)

##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="3e511-254">Contenido relacionado</span><span class="sxs-lookup"><span data-stu-id="3e511-254">Related Content</span></span>

-   <span data-ttu-id="3e511-255">**Blogs:**</span><span class="sxs-lookup"><span data-stu-id="3e511-255">**Blogs:**</span></span>

     [<span data-ttu-id="3e511-256">Series de aprendizaje de AlwaysON - HADRON: uso del grupo de trabajo para las bases de datos compatibles con HADRON</span><span class="sxs-lookup"><span data-stu-id="3e511-256">AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases</span></span>](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx)

     [<span data-ttu-id="3e511-257">Blogs del equipo de AlwaysOn de SQL Server: el blog oficial del equipo de AlwaysOn de SQL Server</span><span class="sxs-lookup"><span data-stu-id="3e511-257">SQL Server AlwaysOn Team Blogs: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)

     [<span data-ttu-id="3e511-258">Blogs de los ingenieros de SQL Server de CSS</span><span class="sxs-lookup"><span data-stu-id="3e511-258">CSS SQL Server Engineers Blogs</span></span>](https://blogs.msdn.com/b/psssql/)

-   <span data-ttu-id="3e511-259">**Vídeos:**</span><span class="sxs-lookup"><span data-stu-id="3e511-259">**Videos:**</span></span>

     [<span data-ttu-id="3e511-260">Microsoft SQL Server Code-Named "Denali", Serie AlwaysOn, parte 1: Introducción a la solución de alta disponibilidad de siguiente generación</span><span class="sxs-lookup"><span data-stu-id="3e511-260">Microsoft SQL Server Code-Named "Denali" AlwaysOn Series,Part 1: Introducing the Next Generation High Availability Solution</span></span>](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/DBI302)

     [<span data-ttu-id="3e511-261">Microsoft SQL Server “Denali”, Serie AlwaysOn, parte 2: Crear una solución esencial de alta disponibilidad utilizando AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="3e511-261">Microsoft SQL Server Code-Named "Denali" AlwaysOn Series,Part 2: Building a Mission-Critical High Availability Solution Using AlwaysOn</span></span>](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/DBI404)

-   <span data-ttu-id="3e511-262">**Notas del producto:**</span><span class="sxs-lookup"><span data-stu-id="3e511-262">**Whitepapers:**</span></span>

     [<span data-ttu-id="3e511-263">Guía de soluciones AlwaysOn de Microsoft SQL Server para lograr alta disponibilidad y recuperación ante desastres</span><span class="sxs-lookup"><span data-stu-id="3e511-263">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)

     [<span data-ttu-id="3e511-264">Notas del producto de Microsoft para SQL Server 2012</span><span class="sxs-lookup"><span data-stu-id="3e511-264">Microsoft White Papers for SQL Server 2012</span></span>](https://msdn.microsoft.com/library/hh403491.aspx)

     [<span data-ttu-id="3e511-265">Notas del producto del equipo de asesoramiento al cliente de SQL Server</span><span class="sxs-lookup"><span data-stu-id="3e511-265">SQL Server Customer Advisory Team Whitepapers</span></span>](http://sqlcat.com/)

## <a name="see-also"></a><span data-ttu-id="3e511-266">Consulte también</span><span class="sxs-lookup"><span data-stu-id="3e511-266">See Also</span></span>
 <span data-ttu-id="3e511-267">[Modos de disponibilidad &#40;Grupos de disponibilidad AlwaysOn&#41;](availability-modes-always-on-availability-groups.md) los modos de conmutación por error y conmutación por [error &#40;grupos de disponibilidad AlwaysOn](failover-and-failover-modes-always-on-availability-groups.md) [información general&#41;de las instrucciones Transact-SQL para grupos de disponibilidad AlwaysOn](transact-sql-statements-for-always-on-availability-groups.md) &#40;SQL Server&#41;[información general de los cmdlets de PowerShell para](overview-of-powershell-cmdlets-for-always-on-availability-groups-sql-server.md) grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;compatibilidad de alta disponibilidad con los requisitos previos de [las bases de datos OLTP en memoria](../../../relational-databases/in-memory-oltp/high-availability-support-for-in-memory-oltp-databases.md) [, restricciones y recomendaciones para grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md) [la creación y configuración de grupos de disponibilidad &#40;](creation-and-configuration-of-availability-groups-sql-server.md) SQL Server&#41;[secundarias activas: réplicas secundarias legibles &#40;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) grupos de disponibilidad AlwaysOn&#41;[secundarias activas: copia de seguridad en las réplicas secundarias &#40;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) grupos de disponibilidad AlwaysOn&#41;[agentes de escucha del grupo de disponibilidad, conectividad de cliente y conmutación por error de aplicación](../../listeners-client-connectivity-application-failover.md) &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="3e511-267">[Availability Modes &#40;AlwaysOn Availability Groups&#41;](availability-modes-always-on-availability-groups.md) [Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md) [Overview of Transact-SQL Statements for AlwaysOn Availability Groups &#40;SQL Server&#41;](transact-sql-statements-for-always-on-availability-groups.md) [Overview of PowerShell Cmdlets for AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-powershell-cmdlets-for-always-on-availability-groups-sql-server.md) [High Availability Support for In-Memory OLTP databases](../../../relational-databases/in-memory-oltp/high-availability-support-for-in-memory-oltp-databases.md) [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md) [Creation and Configuration of Availability Groups &#40;SQL Server&#41;](creation-and-configuration-of-availability-groups-sql-server.md) [Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) [Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md)</span></span>

