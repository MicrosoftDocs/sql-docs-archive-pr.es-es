---
title: Analysis Services con Grupos de disponibilidad AlwaysOn | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
ms.assetid: 14d16bfd-228c-4870-b463-a283facda965
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 9ea0c7f30fd8f431f70284122df7e2a036658f4e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87663142"
---
# <a name="analysis-services-with-always-on-availability-groups"></a><span data-ttu-id="5092b-102">Analysis Services con grupos de disponibilidad AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="5092b-102">Analysis Services with Always On Availability Groups</span></span>
  <span data-ttu-id="5092b-103">El grupo de disponibilidad AlwaysOn es una colección predefinida de bases de datos relacionales de SQL Server que conmuta por error conjuntamente cuando las condiciones desencadenan una conmutación por error en una base de datos, redirigiendo las solicitudes a una base de datos reflejada en otra instancia del mismo grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="5092b-103">An AlwaysOn availability group is a predefined collection of SQL Server relational databases that failover together when conditions trigger a failover in any one database, redirecting requests to a mirrored database on another instance in the same availability group.</span></span> <span data-ttu-id="5092b-104">Si utiliza grupos de disponibilidad como solución de alta disponibilidad, puede usar una base de datos de ese grupo como origen de datos en una solución tabular o multidimensional de Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="5092b-104">If you are using availability groups as your high availability solution, you can use a database in that group as a data source in an Analysis Services tabular or multidimensional solution.</span></span> <span data-ttu-id="5092b-105">Todas las operaciones de Analysis Services siguientes funcionan de la manera esperada cuando se utiliza una base de datos de disponibilidad: procesando o importando datos, consultando datos relacionales directamente (utilizando el modo DirectQuery o almacenamiento ROLAP) y con reescritura.</span><span class="sxs-lookup"><span data-stu-id="5092b-105">All of the following Analysis Services operations work as expected when using an availability database: processing or importing data, querying relational data directly (using ROLAP storage or DirectQuery mode), and writeback.</span></span>  
  
 <span data-ttu-id="5092b-106">El procesamiento y la consulta son cargas de trabajo de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="5092b-106">Processing and querying are read-only workloads.</span></span> <span data-ttu-id="5092b-107">Puede mejorar el rendimiento descargando estas cargas de trabajo en una réplica secundaria legible.</span><span class="sxs-lookup"><span data-stu-id="5092b-107">You can improve performance by offloading these workloads to a readable secondary replica.</span></span> <span data-ttu-id="5092b-108">Se requiere una configuración adicional para este escenario.</span><span class="sxs-lookup"><span data-stu-id="5092b-108">Additional configuration is required for this scenario.</span></span> <span data-ttu-id="5092b-109">Utilice la lista de comprobación de este tema para asegurarse de que sigue todos los pasos.</span><span class="sxs-lookup"><span data-stu-id="5092b-109">Use the checklist in this topic to ensure you follow all the steps.</span></span>  
  
  
##  <a name="prerequisites"></a><a name="bkmk_prereq"></a> <span data-ttu-id="5092b-110">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="5092b-110">Prerequisites</span></span>  
 <span data-ttu-id="5092b-111">Debe tener un inicio de sesión de SQL Server en todas las réplicas.</span><span class="sxs-lookup"><span data-stu-id="5092b-111">You must have a SQL Server login on all replicas.</span></span> <span data-ttu-id="5092b-112">Debe ser **sysadmin** para configurar los grupos de disponibilidad, los agentes de escucha y las bases de datos, pero los usuarios solo necesitan permisos **db_datareader** para tener acceso a la base de datos de un cliente de Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="5092b-112">You must be a **sysadmin** to configure availability groups, listeners, and databases, but users only need **db_datareader** permissions to access the database from an Analysis Services client.</span></span>  
  
 <span data-ttu-id="5092b-113">Use un proveedor de datos que admita la versión (TDS) 7.4 del protocolo de flujo de datos tabular u otra más reciente, como SQL Server Native Client 11.0 o el Proveedor de datos de SQL Server de .NET Framework 4.02.</span><span class="sxs-lookup"><span data-stu-id="5092b-113">Use a data provider that supports the tabular data stream (TDS) protocol version 7.4 or newer, such as the SQL Server Native Client 11.0 or the Data Provider for SQL Server in .NET Framework 4.02.</span></span>  
  
 <span data-ttu-id="5092b-114">**(Para cargas de trabajo de solo lectura)**.</span><span class="sxs-lookup"><span data-stu-id="5092b-114">**(For read-only workloads)**.</span></span> <span data-ttu-id="5092b-115">El rol de réplica secundaria se debe configurar para las conexiones de solo lectura, el grupo de disponibilidad debe tener una lista de distribución y la conexión del origen de datos de Analysis Services debe especificar el agente de escucha del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="5092b-115">The secondary replica role must be configured for read-only connections, the availability group must have a routing list, and the connection in the Analysis Services data source must specify the availability group listener.</span></span> <span data-ttu-id="5092b-116">En este tema se proporcionan instrucciones al respecto.</span><span class="sxs-lookup"><span data-stu-id="5092b-116">Instructions are provided in this topic.</span></span>  
  
##  <a name="checklist-use-a-secondary-replica-for-read-only-operations"></a><a name="bkmk_UseSecondary"></a><span data-ttu-id="5092b-117">Lista de comprobación: usar una réplica secundaria para las operaciones de solo lectura</span><span class="sxs-lookup"><span data-stu-id="5092b-117">Checklist: Use a secondary replica for read-only operations</span></span>  
 <span data-ttu-id="5092b-118">A menos que la solución de Analysis Services incluya reescritura, puede configurar una conexión a un origen de datos para utilizar una réplica secundaria legible.</span><span class="sxs-lookup"><span data-stu-id="5092b-118">Unless your Analysis Services solution includes writeback, you can configure a data source connection to use a readable secondary replica.</span></span> <span data-ttu-id="5092b-119">Si tiene una conexión de red rápida, la replicación secundaria tiene una latencia de datos muy baja, proporcionando datos casi idénticos a los de la réplica primaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-119">If you have a fast network connection, the secondary replica has very low data latency, providing nearly identical data as the primary replica.</span></span> <span data-ttu-id="5092b-120">Con la réplica secundaria para las operaciones de Analysis Services, puede reducir la contención de lectura/escritura de la replicación primaria y conseguir una mejor utilización de las réplicas secundarias en el grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="5092b-120">By using the secondary replica for Analysis Services operations, you can reduce read-write contention on the primary replica and get better utilization of secondary replicas in your availability group.</span></span>  
  
 <span data-ttu-id="5092b-121">De forma predeterminada, tanto el acceso de lectura-escritura como de intención de lectura se permiten en la réplica principal y no se permiten conexiones en las réplicas secundarias.</span><span class="sxs-lookup"><span data-stu-id="5092b-121">By default, both read-write and read-intent access are allowed to the primary replica and no connections are allowed to secondary replicas.</span></span> <span data-ttu-id="5092b-122">Se requiere una configuración adicional para configurar una conexión de cliente de solo lectura en una réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-122">Additional configuration is required to set up a read-only client connection to a secondary replica.</span></span> <span data-ttu-id="5092b-123">La configuración requiere establecer las propiedades en la réplica secundaria y ejecutar un script T-SQL que defina una lista de enrutamiento de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="5092b-123">Configuration requires setting properties on the secondary replica and running a T-SQL script that defines a read-only routing list.</span></span> <span data-ttu-id="5092b-124">Utilice los procedimientos siguientes para asegurarse de que ha realizado los dos pasos.</span><span class="sxs-lookup"><span data-stu-id="5092b-124">Use the following procedures to ensure you have performed both steps.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="5092b-125">En los pasos siguientes se supone que existen las bases de datos y el grupo de disponibilidad AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="5092b-125">The following steps assume an existing AlwaysOn availability group and databases.</span></span> <span data-ttu-id="5092b-126">Si va a configurar un grupo, utilice el Asistente para nuevo grupo de disponibilidad a fin de crear el grupo y para combinar las bases de datos.</span><span class="sxs-lookup"><span data-stu-id="5092b-126">If you are configuring a new group, use the New Availability Group Wizard to create the group and join the databases.</span></span> <span data-ttu-id="5092b-127">El asistente comprueba los requisitos previos, proporciona orientación en cada paso y realiza la sincronización inicial.</span><span class="sxs-lookup"><span data-stu-id="5092b-127">The wizard checks for prerequisites, provides guidance for each step, and performs the initial synchronization.</span></span> <span data-ttu-id="5092b-128">Para obtener más información, vea [Usar el Asistente para grupo de disponibilidad &#40;SQL Server Management Studio&#41;](use-the-availability-group-wizard-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="5092b-128">For more information, see [Use the Availability Group Wizard &#40;SQL Server Management Studio&#41;](use-the-availability-group-wizard-sql-server-management-studio.md).</span></span>  
  
#### <a name="step-1-configure-access-on-an-availability-replica"></a><span data-ttu-id="5092b-129">Paso 1: configurar el acceso en una réplica de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="5092b-129">Step 1: Configure access on an availability replica</span></span>  
  
1.  <span data-ttu-id="5092b-130">En el Explorador de objetos, conéctese a la instancia del servidor que hospeda la réplica principal y expanda el árbol.</span><span class="sxs-lookup"><span data-stu-id="5092b-130">In Object Explorer, connect to the server instance that hosts the primary replica, and expand the server tree.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="5092b-131">Estos pasos se siguen en [Configurar el acceso de solo lectura en una réplica de disponibilidad &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md), que proporciona instrucciones alternativas e información adicional para realizar esta tarea.</span><span class="sxs-lookup"><span data-stu-id="5092b-131">These steps are taken from [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md), which provides additional information and alternative instructions for performing this task.</span></span>  
  
2.  <span data-ttu-id="5092b-132">Expanda los nodos **Alta disponibilidad de AlwaysOn** y **Grupos de disponibilidad** .</span><span class="sxs-lookup"><span data-stu-id="5092b-132">Expand the **AlwaysOn High Availability** node and the **Availability Groups** node.</span></span>  
  
3.  <span data-ttu-id="5092b-133">Haga clic en el grupo de disponibilidad cuya réplica desea cambiar.</span><span class="sxs-lookup"><span data-stu-id="5092b-133">Click the availability group whose replica you want to change.</span></span> <span data-ttu-id="5092b-134">Expanda **Réplicas de disponibilidad**.</span><span class="sxs-lookup"><span data-stu-id="5092b-134">Expand **Availability Replicas**.</span></span>  
  
4.  <span data-ttu-id="5092b-135">Haga clic con el botón derecho en la réplica secundaria y haga clic en **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="5092b-135">Right-click the secondary replica, and click **Properties**.</span></span>  
  
5.  <span data-ttu-id="5092b-136">En el cuadro de diálogo **Propiedades de réplica de disponibilidad** , cambie el acceso de conexión para el rol secundario, del siguiente modo:</span><span class="sxs-lookup"><span data-stu-id="5092b-136">In the **Availability Replica Properties** dialog box, change the connection access for the secondary role, as follows:</span></span>  
  
    -   <span data-ttu-id="5092b-137">En la lista desplegable **Legible secundaria** , seleccione **Solo lectura**.</span><span class="sxs-lookup"><span data-stu-id="5092b-137">In the **Readable secondary** drop list, select **Read-intent only**.</span></span>  
  
    -   <span data-ttu-id="5092b-138">En la lista desplegable **Conexiones en el rol principal** , seleccione **Permitir todas las conexiones**.</span><span class="sxs-lookup"><span data-stu-id="5092b-138">In the **Connections in primary role** drop list, select **Allow all connections**.</span></span> <span data-ttu-id="5092b-139">Este es el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="5092b-139">This is the default.</span></span>  
  
    -   <span data-ttu-id="5092b-140">Opcionalmente, en la lista desplegable **Modo de disponibilidad** , seleccione **Confirmación sincrónica**.</span><span class="sxs-lookup"><span data-stu-id="5092b-140">Optionally, in **Availability mode** drop list, select **Synchronous commit**.</span></span> <span data-ttu-id="5092b-141">Este paso no es necesario pero al configurarlo garantiza que haya paridad de datos entre la replicación primaria y la secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-141">This step is not required, but setting it ensures that there is data parity between the primary and secondary replica.</span></span>  
  
         <span data-ttu-id="5092b-142">Esta propiedad también es un requisito para la conmutación por error planeada.</span><span class="sxs-lookup"><span data-stu-id="5092b-142">This property is also a requirement for planned failover.</span></span> <span data-ttu-id="5092b-143">Si desea realizar una conmutación por error manual planeada para pruebas, establezca **Modo de disponibilidad** en **Confirmación sincrónica** tanto para la replicación primaria como para la secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-143">If you want to perform a planned manual failover for testing purposes, set **Availability mode** to **Synchronous commit** for both the primary and secondary replica.</span></span>  
  
#### <a name="step-2-configure-read-only-routing"></a><span data-ttu-id="5092b-144">Paso 2: configurar el enrutamiento de solo lectura</span><span class="sxs-lookup"><span data-stu-id="5092b-144">Step 2: Configure read-only routing</span></span>  
  
1.  <span data-ttu-id="5092b-145">Conéctese a la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="5092b-145">Connect to the primary replica.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="5092b-146">Estos pasos se siguen en [Configurar el enrutamiento de solo lectura para un grupo de disponibilidad &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md), que proporciona instrucciones alternativas e información adicional para realizar esta tarea.</span><span class="sxs-lookup"><span data-stu-id="5092b-146">These steps are taken from [Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md), which provides additional information and alternative instructions for performing this task.</span></span>  
  
2.  <span data-ttu-id="5092b-147">Abra una ventana de consulta y pegue en ella el siguiente script.</span><span class="sxs-lookup"><span data-stu-id="5092b-147">Open a query window and paste in the following script.</span></span> <span data-ttu-id="5092b-148">Este script hace tres cosas: habilita las conexiones legibles en una réplica secundaria (que está desactivada de forma predeterminada), establece la dirección URL de enrutamiento de solo lectura y crea la lista de enrutamiento que dé prioridad a cómo se dirigen solicitudes de conexión.</span><span class="sxs-lookup"><span data-stu-id="5092b-148">This script does three things: enables readable connections to a secondary replica (which is off by default), sets the read-only routing URL, and creates the routing list that prioritizes how connection requests are directed.</span></span>  <span data-ttu-id="5092b-149">La primera instrucción,que permite las conexiones legibles, es redundante si establece ya las propiedades en [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], pero se incluye para que sea completa.</span><span class="sxs-lookup"><span data-stu-id="5092b-149">The first statement, allowing readable connections, is redundant if you already set the properties in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], but are included for completeness.</span></span>  
  
    ```  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER01' WITH   
    (SECONDARY_ROLE (ALLOW_CONNECTIONS = READ_ONLY));  
  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER01' WITH   
    (SECONDARY_ROLE (READ_ONLY_ROUTING_URL = N'TCP://COMPUTER01.contoso.com:1433'));  
  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER02' WITH   
    (SECONDARY_ROLE (ALLOW_CONNECTIONS = READ_ONLY));  
  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER02' WITH   
    (SECONDARY_ROLE (READ_ONLY_ROUTING_URL = N'TCP://COMPUTER02.contoso.com:1433'));  
  
    ALTER AVAILABILITY GROUP [AG1]   
    MODIFY REPLICA ON  
    N'COMPUTER01' WITH   
    (PRIMARY_ROLE (READ_ONLY_ROUTING_LIST=('COMPUTER02','COMPUTER01')));  
  
    ALTER AVAILABILITY GROUP [AG1]   
    MODIFY REPLICA ON  
    N'COMPUTER02' WITH   
    (PRIMARY_ROLE (READ_ONLY_ROUTING_LIST=('COMPUTER01','COMPUTER02')));  
    GO  
    ```  
  
3.  <span data-ttu-id="5092b-150">Modifique el script, reemplazando los marcadores de posición con valores válidos para su implementación:</span><span class="sxs-lookup"><span data-stu-id="5092b-150">Modify the script, replacing placeholders with values that are valid for your deployment:</span></span>  
  
    -   <span data-ttu-id="5092b-151">Reemplace "Computer01" con el nombre de la instancia de servidor que hospeda la replicación primaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-151">Replace 'Computer01' with the name of the server instance that hosts the primary replica.</span></span>  
  
    -   <span data-ttu-id="5092b-152">Reemplace "Computer02" con el nombre de la instancia de servidor que hospeda la replicación secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-152">Replace 'Computer02' with the name of the server instance that hosts the secondary replica.</span></span>  
  
    -   <span data-ttu-id="5092b-153">Reemplace "contoso.com" con el nombre del dominio u omítalo del script si todos los equipos están en el mismo dominio.</span><span class="sxs-lookup"><span data-stu-id="5092b-153">Replace 'contoso.com' with the name of your domain, or omit it from the script if all computers are in the same domain.</span></span> <span data-ttu-id="5092b-154">Mantenga el número de puerto si el agente de escucha utiliza el puerto predeterminado.</span><span class="sxs-lookup"><span data-stu-id="5092b-154">Keep the port number if the listener is using the default port.</span></span> <span data-ttu-id="5092b-155">El puerto que utiliza realmente el agente de escucha en la página de propiedades de [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5092b-155">The port that is actually used by the listener is listed in the properties page in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)].</span></span>  
  
4.  <span data-ttu-id="5092b-156">Ejecute el script.</span><span class="sxs-lookup"><span data-stu-id="5092b-156">Execute the script.</span></span>  
  
     <span data-ttu-id="5092b-157">Luego, cree un origen de datos en un modelo de Analysis Services que utilice una base de datos del grupo recién configurado.</span><span class="sxs-lookup"><span data-stu-id="5092b-157">Next, create a data source in an Analysis Services model that uses a database from the group you just configured.</span></span>  
  
##  <a name="create-an-analysis-services-data-source-using-an-alwayson-availability-database"></a><a name="bkmk_ssasAODB"></a><span data-ttu-id="5092b-158">Creación de un origen de datos de Analysis Services mediante una base de datos de disponibilidad AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="5092b-158">Create an Analysis Services data source using an AlwaysOn availability database</span></span>  
 <span data-ttu-id="5092b-159">En esta sección se explica cómo crear un origen de datos de Analysis Services que se conecta a una base de datos en un grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="5092b-159">This section explains how to create an Analysis Services data source that connects to a database in an availability group.</span></span> <span data-ttu-id="5092b-160">Puede utilizar estas instrucciones para configurar una conexión a una replicación primaria (valor predeterminado) o a una replicación secundaria legible que se configure en función de los pasos de la sección anterior.</span><span class="sxs-lookup"><span data-stu-id="5092b-160">You can use these instructions to configure a connection to either a primary replica (default) or a readable secondary replica that you configured based on steps in a previous section.</span></span> <span data-ttu-id="5092b-161">La configuración de AlwaysOn, más las propiedades de conexión establecidas en el cliente, determinarán si se usa una replicación primaria o secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-161">AlwaysOn configuration settings, plus the connection properties set in the client, will determine whether a primary or secondary replica is used.</span></span>  
  
1.  <span data-ttu-id="5092b-162">En [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], en el proyecto Modelo de minería de datos y multidimensional de Analysis Services, haga clic con el botón derecho en **Orígenes de datos** y seleccione **Nuevo origen de datos**.</span><span class="sxs-lookup"><span data-stu-id="5092b-162">In [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], in an Analysis Services Multidimensional and Data Mining Model project, right-click **Data Sources** and select **New Data Source**.</span></span> <span data-ttu-id="5092b-163">haga clic en **Nuevo** para crear un origen de datos nuevo.</span><span class="sxs-lookup"><span data-stu-id="5092b-163">Click **New** to create a new data source.</span></span>  
  
     <span data-ttu-id="5092b-164">O bien, en un proyecto de modelo tabular, haga clic en el menú Modelo y haga clic **Importar del origen de datos**.</span><span class="sxs-lookup"><span data-stu-id="5092b-164">Alternatively, for a tabular model project, click the Model menu, and then click **Import from Data Source**.</span></span>  
  
2.  <span data-ttu-id="5092b-165">En el Administrador de conexiones, en Proveedor, elija un proveedor que admita el protocolo Flujo TDS.</span><span class="sxs-lookup"><span data-stu-id="5092b-165">In Connection Manager, in Provider, choose a provider that supports the Tabular Data Stream (TDS) protocol.</span></span> <span data-ttu-id="5092b-166">SQL Server 11.0 Native Client admite este protocolo.</span><span class="sxs-lookup"><span data-stu-id="5092b-166">The SQL Server Native Client 11.0 supports this protocol.</span></span>  
  
3.  <span data-ttu-id="5092b-167">En el Administrador de conexiones, en Nombre de Servidor, escriba el nombre del *agente de escucha de grupo de disponibilidad*y elija una base de datos que esté disponible en el grupo.</span><span class="sxs-lookup"><span data-stu-id="5092b-167">In Connection Manager, in Server Name, enter the name of the *availability group listener*, and then choose a database that is available in the group.</span></span>  
  
     <span data-ttu-id="5092b-168">El agente de escucha de grupo de disponibilidad redirige una conexión de cliente a una replicación principal para las solicitudes de lectura/escritura o a una replicación secundaria si especifica intento de lectura en la cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="5092b-168">The availability group listener redirects a client connection to a primary replica for read-write requests or to a secondary replica if you specify read-intent in the connection string.</span></span> <span data-ttu-id="5092b-169">Dado que los roles de réplica cambiarán durante una conmutación por error (donde el servidor principal se convierte en el servidor secundario y un elemento secundario se convierte en uno principal), siempre debe especificarse la escucha para redirigir la conexión de cliente en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="5092b-169">Because replica roles will change during a failover (where the primary becomes the secondary and a secondary becomes a primary), you should always specify the listener so that the client connection is redirected accordingly.</span></span>  
  
     <span data-ttu-id="5092b-170">Para determinar el nombre del agente del grupo de disponibilidad, puede solicitarlo a un administrador de bases de datos o conectarse a una instancia del grupo de disponibilidad y ver su configuración de disponibilidad AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="5092b-170">To determine the name of the availability group listener, you can either ask a database administrator or connect to an instance in the availability group and view its AlwaysOn availability configuration.</span></span> <span data-ttu-id="5092b-171">En la captura de pantalla siguiente, la escucha de grupo de disponibilidad es **AdventureWorks2**.</span><span class="sxs-lookup"><span data-stu-id="5092b-171">In the screenshot below, the availability group listener is **AdventureWorks2**.</span></span>  
  
     <span data-ttu-id="5092b-172">![Carpeta de disponibilidad AlwaysOn en Management Studio](../../media/ssas-alwaysoninfoinssms.png "Carpeta de disponibilidad AlwaysOn en Management Studio")</span><span class="sxs-lookup"><span data-stu-id="5092b-172">![AlwaysOn Availability folder in Management Studio](../../media/ssas-alwaysoninfoinssms.png "AlwaysOn Availability folder in Management Studio")</span></span>  
  
4.  <span data-ttu-id="5092b-173">Aún en el Administrador de conexiones, haga clic en **todos** en el panel de navegación de la izquierda para ver la cuadrícula de propiedades del proveedor de datos.</span><span class="sxs-lookup"><span data-stu-id="5092b-173">Still in Connection Manager, click **All** in the left navigation pane to view the property grid of data provider.</span></span>  
  
     <span data-ttu-id="5092b-174">Establezca **Intención de aplicaciones** en **READONLY** si va a configurar una conexión de cliente de solo lectura en una réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-174">Set **Application Intent** to **READONLY** if you are configuring a read-only client connection to a secondary replica.</span></span> <span data-ttu-id="5092b-175">En otro caso mantenga el valor predeterminado **READWRITE** para redirigir la conexión a la réplica primaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-175">Otherwise, keep the **READWRITE** default to redirect the connection to the primary replica.</span></span>  
  
5.  <span data-ttu-id="5092b-176">En Información de suplantación, seleccione **Utilizar un nombre de usuario y una contraseña de Windows específicos**y escriba una cuenta de usuario de dominio de Windows que tenga un mínimo de permisos de **db_datareader** en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="5092b-176">In Impersonation Information, select **Use a specific Windows user name and password**, and then enter a Windows domain user account that has a minimum of **db_datareader** permissions on the database.</span></span>  
  
     <span data-ttu-id="5092b-177">No elija **Usar las credenciales del usuario actual** o **Heredar**.</span><span class="sxs-lookup"><span data-stu-id="5092b-177">Do not choose **Use the credentials of the current user** or **Inherit**.</span></span> <span data-ttu-id="5092b-178">Puede elegir **Use la cuenta de servicio**, pero solo si esa cuenta tiene permisos de lectura en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="5092b-178">You can choose **Use the service account**, but only if that account has read permissions on the database.</span></span>  
  
     <span data-ttu-id="5092b-179">Finalice el origen de datos y cierre el Asistente para orígenes de datos.</span><span class="sxs-lookup"><span data-stu-id="5092b-179">Finish the data source and close the Data Source Wizard.</span></span>  
  
6.  <span data-ttu-id="5092b-180">Agregue **MultiSubnetFailover=Yes** a la cadena de conexión para especificar una detección y una conexión más rápidas al servidor activo.</span><span class="sxs-lookup"><span data-stu-id="5092b-180">Add **MultiSubnetFailover=Yes** to the connection string to provide faster detection and connection to the active server.</span></span> <span data-ttu-id="5092b-181">Para obtener más información acerca de esta propiedad, vea [Compatibilidad de SQL Server Native Client para la alta disponibilidad con recuperación de desastres](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="5092b-181">For more information about this property, see [SQL Server Native Client Support for High Availability, Disaster Recovery](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span></span>  
  
     <span data-ttu-id="5092b-182">Esta propiedad no está visible en la cuadrícula de propiedades.</span><span class="sxs-lookup"><span data-stu-id="5092b-182">This property is not visible in the property grid.</span></span> <span data-ttu-id="5092b-183">Para agregar la propiedad, haga clic con el botón derecho en el origen de datos y elija **Ver código**.</span><span class="sxs-lookup"><span data-stu-id="5092b-183">To add the property, right-click the data source and choose **View Code**.</span></span> <span data-ttu-id="5092b-184">Agregue `MultiSubnetFailover=Yes` a la cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="5092b-184">Add `MultiSubnetFailover=Yes` to the connection string.</span></span>  
  
 <span data-ttu-id="5092b-185">El origen de datos está definida ahora.</span><span class="sxs-lookup"><span data-stu-id="5092b-185">The data source is now defined.</span></span> <span data-ttu-id="5092b-186">Ahora puede continuar para generar un modelo, a partir de la la vista del origen de datos o, en el caso de los modelos tabulares, creando relaciones.</span><span class="sxs-lookup"><span data-stu-id="5092b-186">You can now proceed to build a model, starting with the data source view, or in the case of tabular models, creating relationships.</span></span> <span data-ttu-id="5092b-187">Cuando está en un punto en el que los datos se deban recuperar de la base de datos de la disponibilidad (por ejemplo, cuando esté preparado para procesar o para implementar la solución), puede probar la configuración para comprobar que se accede a los datos a través de la replicación secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-187">When you are at a point where data must be retrieved from the availability database (for example when you are ready to process or deploy the solution), you can test the configuration to verify data is accessed from the secondary replica.</span></span>  
  
##  <a name="test-the-configuration"></a><a name="bkmk_test"></a><span data-ttu-id="5092b-188">Prueba de la configuración</span><span class="sxs-lookup"><span data-stu-id="5092b-188">Test the configuration</span></span>  
 <span data-ttu-id="5092b-189">Después de configurar la replicación secundaria y crear una conexión a un origen de datos en Analysis Services, puede confirmar que los comandos de consulta y procesamiento se redirigen a la réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-189">After you configure the secondary replica and create a data source connection in Analysis Services, you can confirm that processing and query commands are redirected to the secondary replica.</span></span> <span data-ttu-id="5092b-190">También puede realizar una conmutación por error manual planeada para comprobar el plan de recuperación para este escenario.</span><span class="sxs-lookup"><span data-stu-id="5092b-190">You can also perform a planned manual failover to verify your recovery plan for this scenario.</span></span>  
  
#### <a name="step-1-confirm-the-data-source-connection-is-redirected-to-the-secondary-replica"></a><span data-ttu-id="5092b-191">Paso 1: confirmar que la conexión a un origen de datos se redirige a la réplica secundaria</span><span class="sxs-lookup"><span data-stu-id="5092b-191">Step 1: Confirm the data source connection is redirected to the secondary replica</span></span>  
  
1.  <span data-ttu-id="5092b-192">Inicie SQL Server Profiler y conéctese a la instancia de SQL Server que hospeda la réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-192">Start SQL Server Profiler and connect to the SQL Server instance hosting the secondary replica.</span></span>  
  
     <span data-ttu-id="5092b-193">Cuando se ejecute el seguimiento la traza, los eventos `SQL:BatchStarting` y de `SQL:BatchCompleting` mostrarán las consultas emitidas desde Analysis Services que se ejecuta en la instancia del motor de base de datos.</span><span class="sxs-lookup"><span data-stu-id="5092b-193">As the trace runs, the `SQL:BatchStarting` and `SQL:BatchCompleting` events will show the queries issued from Analysis Services that are executing on the database engine instance.</span></span> <span data-ttu-id="5092b-194">Estos eventos están seleccionados de forma predeterminada de modo que todo lo que debe hacer es iniciar el seguimiento.</span><span class="sxs-lookup"><span data-stu-id="5092b-194">These events are selected by default so all you need to do is start the trace.</span></span>  
  
2.  <span data-ttu-id="5092b-195">En [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], abra el proyecto de Analysis Services o la solución que contenga una conexión a un origen de datos que desee probar.</span><span class="sxs-lookup"><span data-stu-id="5092b-195">In [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], open the Analysis Services project or solution containing a data source connection you want to test.</span></span> <span data-ttu-id="5092b-196">Asegúrese de que el origen de datos especifica el agente de escucha de grupo de disponibilidad y no una instancia del grupo.</span><span class="sxs-lookup"><span data-stu-id="5092b-196">Be sure that the data source specifies the availability group listener and not an instance in the group.</span></span>  
  
     <span data-ttu-id="5092b-197">Este paso es importante.</span><span class="sxs-lookup"><span data-stu-id="5092b-197">This step is important.</span></span> <span data-ttu-id="5092b-198">El enrutamiento a la réplica secundaria no aparecerá si especifica un nombre de instancia de servidor.</span><span class="sxs-lookup"><span data-stu-id="5092b-198">Routing to the secondary replica will not occur if you specify a server instance name.</span></span>  
  
3.  <span data-ttu-id="5092b-199">Organice las ventanas de aplicación para poder ver SQL Server Profiler y [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] uno al lado del otro.</span><span class="sxs-lookup"><span data-stu-id="5092b-199">Arrange the application windows so that you can view SQL Server Profiler and [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] side by side.</span></span>  
  
4.  <span data-ttu-id="5092b-200">Implemente la solución y, cuando se complete, detenga el seguimiento.</span><span class="sxs-lookup"><span data-stu-id="5092b-200">Deploy the solution, and when it completes, stop the trace.</span></span>  
  
     <span data-ttu-id="5092b-201">En la ventana de seguimiento debería ver los eventos de la aplicación **Microsoft SQL Server Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="5092b-201">In the trace window, you should see events from the application **Microsoft SQL Server Analysis Services**.</span></span> <span data-ttu-id="5092b-202">Debe ver las instrucciones de `SELECT` que recuperan los datos de una base de datos en la instancia del servidor que hospeda la replicación secundaria, lo que prueba que la conexión se realiza a través del agente escucha a la réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-202">You should see `SELECT` statements that retrieve data from a database on the server instance that hosts the secondary replica, proving that the connection was made via the listener to the secondary replica.</span></span>  
  
#### <a name="step-2-perform-a-planned-failover-to-test-the-configuration"></a><span data-ttu-id="5092b-203">Paso 2: realizar una conmutación por error planeada para probar la configuración</span><span class="sxs-lookup"><span data-stu-id="5092b-203">Step 2: Perform a planned failover to test the configuration</span></span>  
  
1.  <span data-ttu-id="5092b-204">En [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] compruebe las réplicas primaria y secundaria para asegurarse de que ambas están configuradas para el modo de confirmación sincrónico y que están sincronizadas.</span><span class="sxs-lookup"><span data-stu-id="5092b-204">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] check the primary and secondary replicas to ensure that both are configured for synchronous-commit mode and are currently synchronized.</span></span>  
  
     <span data-ttu-id="5092b-205">En los pasos siguientes se supone que una réplica secundaria está configurada para la confirmación sincrónica.</span><span class="sxs-lookup"><span data-stu-id="5092b-205">The following steps assume a secondary replica is configured for synchronous commit.</span></span>  
  
     <span data-ttu-id="5092b-206">Para comprobar la sincronización, abra una conexión a cada instancia que hospeda las réplicas primarias y secundaria, expanda la carpeta de bases de datos y asegúrese de que la base de datos tenga anexado **(Sincronizado)** y **(Sincronizando)** al nombre de cada réplica.</span><span class="sxs-lookup"><span data-stu-id="5092b-206">To verify synchronization, open a connection to each instance that hosts the primary and secondary replicas, expand the Databases folder, and ensure that the database has **(Synchronized)** and **(Synchronizing)** appended to its name in each replica.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="5092b-207">Estos pasos se siguen en [Realizar una conmutación por error manual planeada de un grupo de disponibilidad &#40;SQL Server&#41;](perform-a-planned-manual-failover-of-an-availability-group-sql-server.md), que proporciona instrucciones alternativas e información adicional para realizar esta tarea.</span><span class="sxs-lookup"><span data-stu-id="5092b-207">These steps are taken from [Perform a Planned Manual Failover of an Availability Group &#40;SQL Server&#41;](perform-a-planned-manual-failover-of-an-availability-group-sql-server.md), which provides additional information and alternative instructions for performing this task.</span></span>  
  
2.  <span data-ttu-id="5092b-208">En SQL Server Profiler, inicie los seguimientos para cada réplica y vea los seguimientos en paralelo.</span><span class="sxs-lookup"><span data-stu-id="5092b-208">In SQL Server Profiler, start traces for each replica and view the traces side-by-side.</span></span> <span data-ttu-id="5092b-209">En los pasos siguientes, comparará los seguimientos, confirmando que las consultas SQL usadas para el procesamiento o la consulta desde Analysis Services pasan de una réplica a la otra.</span><span class="sxs-lookup"><span data-stu-id="5092b-209">In the following steps, you will compare traces, confirming that the SQL queries used for processing or querying from Analysis Services switch from one replica to the other.</span></span>  
  
3.  <span data-ttu-id="5092b-210">Ejecuta un comando de procesamiento o consulta desde Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="5092b-210">Execute a processing or query command from within Analysis Services.</span></span> <span data-ttu-id="5092b-211">Dado que configuró el origen de datos para una conexión de solo lectura, debería ver el comando ejecutarse en la réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-211">Because you configured the data source for a read-only connection, you should see the command execute on the secondary replica.</span></span>  
  
4.  <span data-ttu-id="5092b-212">En [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], conéctese a la réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-212">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], connect to the secondary replica.</span></span>  
  
5.  <span data-ttu-id="5092b-213">Expanda los nodos **Alta disponibilidad de AlwaysOn** y **Grupos de disponibilidad** .</span><span class="sxs-lookup"><span data-stu-id="5092b-213">Expand the **AlwaysOn High Availability** node and the **Availability Groups** node.</span></span>  
  
6.  <span data-ttu-id="5092b-214">Haga clic con el botón derecho en el grupo de disponibilidad que va a ser objeto de conmutación por error y seleccione el comando **Conmutación por error** .</span><span class="sxs-lookup"><span data-stu-id="5092b-214">Right-click the availability group to be failed over, and select the **Failover** command.</span></span> <span data-ttu-id="5092b-215">Esto inicia el Asistente para conmutación por error del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="5092b-215">This starts the Fail Over Availability Group Wizard.</span></span> <span data-ttu-id="5092b-216">Use el asistente para elegir qué réplica convertir en la la nueva réplica primaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-216">Use the wizard to choose which replica to make the new primary replica.</span></span>  
  
7.  <span data-ttu-id="5092b-217">Confirme que la conmutación por error se realizó correctamente:</span><span class="sxs-lookup"><span data-stu-id="5092b-217">Confirm that failover succeeded:</span></span>  
  
    -   <span data-ttu-id="5092b-218">En [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], expanda los grupos disponibilidad para ver las designaciones (primaria) y (secundaria).</span><span class="sxs-lookup"><span data-stu-id="5092b-218">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], expand the availability groups to view the (primary) and (secondary) designations.</span></span> <span data-ttu-id="5092b-219">La instancia que era anteriormente primaria ahora debe ser ahora secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-219">The instance that was previously a primary replica should now be a secondary replica.</span></span>  
  
    -   <span data-ttu-id="5092b-220">Vea el panel para determinar si se ha detectado algún problema de mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="5092b-220">View the dashboard to determine if any health issues were detected.</span></span> <span data-ttu-id="5092b-221">Haga clic con el botón derecho en el grupo de disponibilidad y seleccione **Mostrar panel**.</span><span class="sxs-lookup"><span data-stu-id="5092b-221">Right-click the availability group and select **Show Dashboard**.</span></span>  
  
8.  <span data-ttu-id="5092b-222">Espere uno o dos minutos a que se complete la conmutación por error en el servidor.</span><span class="sxs-lookup"><span data-stu-id="5092b-222">Wait one or two minutes for the failover to complete on the backend.</span></span>  
  
9. <span data-ttu-id="5092b-223">Repita el comando de procesamiento o de consulta en la solución Analysis Services y después observe los seguimientos en SQL Server Profiler.</span><span class="sxs-lookup"><span data-stu-id="5092b-223">Repeat the processing or query command in the Analysis Services solution, and then watch the traces side by side in SQL Server Profiler.</span></span> <span data-ttu-id="5092b-224">Debe ver la prueba del procesamiento en la otra instancia, que ahora es la nueva réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-224">You should see evidence of processing on the other instance, which is now the new secondary replica.</span></span>  
  
##  <a name="what-happens-after-a-failover-occurs"></a><a name="bkmk_whathappens"></a><span data-ttu-id="5092b-225">¿Qué ocurre después de producirse una conmutación por error?</span><span class="sxs-lookup"><span data-stu-id="5092b-225">What happens after a failover occurs</span></span>  
 <span data-ttu-id="5092b-226">Durante una conmutación por error, una réplica secundaria realiza la transición al rol principal y la réplica principal anterior realiza la transición al rol secundario.</span><span class="sxs-lookup"><span data-stu-id="5092b-226">During a failover, a secondary replica transitions to the primary role and the former primary replica transitions to the secondary role.</span></span> <span data-ttu-id="5092b-227">Todas las conexiones de cliente se terminan, la propiedad del agente de grupo de disponibilidad pasa con el rol de réplica principal a una nueva instancia de SQL Server y el punto de conexión del agente de escucha se enlaza a los puertos TCP y las direcciones IP virtuales de la nueva instancia.</span><span class="sxs-lookup"><span data-stu-id="5092b-227">All client connections are terminated, ownership of the availability group listener moves with the primary replica role to a new SQL Server instance, and the listener endpoint is bound to the new instance's virtual IP addresses and TCP ports.</span></span> <span data-ttu-id="5092b-228">Para obtener más información, vea [Acerca del acceso de conexión de cliente a réplicas de disponibilidad &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="5092b-228">For more information, see [About Client Connection Access to Availability Replicas &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md).</span></span>  
  
 <span data-ttu-id="5092b-229">Si la conmutación por error se produce durante el procesamiento, aparece el siguiente error en Analysis Services en el archivo de registro o la ventana de resultados: "Error de OLE DB: OLE DB o error de ODBC: Error de vínculo de comunicación; 08S01; proveedor de TPC: el host remoto cerró a la fuerza una conexión existente.</span><span class="sxs-lookup"><span data-stu-id="5092b-229">If failover occurs during processing, the following error occurs in Analysis Services in the log file or output window: "OLE DB error: OLE DB or ODBC error: Communication link failure; 08S01; TPC Provider: An existing connection was forcibly closed by the remote host.</span></span> <span data-ttu-id="5092b-230">; 08S01".</span><span class="sxs-lookup"><span data-stu-id="5092b-230">; 08S01."</span></span>  
  
 <span data-ttu-id="5092b-231">Este error se debe resolver si espera un minuto y vuelve a intentarlo.</span><span class="sxs-lookup"><span data-stu-id="5092b-231">This error should resolve if you wait a minute and try again.</span></span> <span data-ttu-id="5092b-232">Si el grupo de disponibilidad se configura correctamente para la réplica secundaria legible, el procesamiento se reanudará en la nueva réplica secundaria cuando se reintente el procesamiento.</span><span class="sxs-lookup"><span data-stu-id="5092b-232">If the availability group is configured correctly for readable secondary replica, processing will resume on the new secondary replica when you retry processing.</span></span>  
  
 <span data-ttu-id="5092b-233">Los errores persistentes es más probable uqe se deban a un problema de configuración.</span><span class="sxs-lookup"><span data-stu-id="5092b-233">Persistent errors are most likely due to a configuration problem.</span></span> <span data-ttu-id="5092b-234">Puede intentar volver a ejecutar el script T-SQL para solucionar los problemas de la lista de enrutamiento, las direcciones URL de enrutamiento de solo lectura y el intento de lectura en la réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-234">You can try re-running the T-SQL script to resolve problems with the routing list, read-only routing URLs, and read-intent on the secondary replica.</span></span> <span data-ttu-id="5092b-235">También debe comprobar que la replicación primaria permite todas las conexiones.</span><span class="sxs-lookup"><span data-stu-id="5092b-235">You should also verify that the primary replica allows all connections.</span></span>  
  
##  <a name="writeback-when-using-an-alwayson-availability-database"></a><a name="bkmk_writeback"></a><span data-ttu-id="5092b-236">Reescritura al usar una base de datos de disponibilidad AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="5092b-236">Writeback when using an AlwaysOn availability database</span></span>  
 <span data-ttu-id="5092b-237">La reescritura es una característica de Analysis Services que admite realizar análisis Y si en Excel.</span><span class="sxs-lookup"><span data-stu-id="5092b-237">Writeback is an Analysis Services feature that supports What If analysis in Excel.</span></span> <span data-ttu-id="5092b-238">También es de utilidad para tareas de presupuesto y previsión en aplicaciones personalizadas.</span><span class="sxs-lookup"><span data-stu-id="5092b-238">It is also commonly used for budgeting and forecasting tasks in custom applications.</span></span>  
  
 <span data-ttu-id="5092b-239">La compatibilidad con la reescritura requiere una conexión de cliente READWRITE.</span><span class="sxs-lookup"><span data-stu-id="5092b-239">Support for writeback requires a READWRITE client connection.</span></span> <span data-ttu-id="5092b-240">En Excel, si intenta reescribir en una conexión de solo lectura, aparecerá un error similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="5092b-240">In Excel, if you attempt to write back on a read-only connection, the following error will occur: "Data could not be retrieved from the external data source."</span></span> <span data-ttu-id="5092b-241">"No se pudieron recuperar datos del origen de datos externo".</span><span class="sxs-lookup"><span data-stu-id="5092b-241">"Data could not be retrieved from the external data source."</span></span>  
  
 <span data-ttu-id="5092b-242">Si configuró una conexión para acceder siempre en una replica secundaria legible, ahora debe configurar una nueva conexión que use una conexión READWRITE a la replicación primaria.</span><span class="sxs-lookup"><span data-stu-id="5092b-242">If you configured a connection to always access a readable secondary replica, you must now configure a new connection that uses a READWRITE connection to the primary replica.</span></span>  
  
 <span data-ttu-id="5092b-243">Para ello, cree un origen de datos adicional en un modelo de Analysis Services para admitir la conexión de lectura/escritura.</span><span class="sxs-lookup"><span data-stu-id="5092b-243">To do this, create an additional data source in an Analysis Services model to support the read-write connection.</span></span> <span data-ttu-id="5092b-244">Al crear el origen de datos adicional, use la misma base de datos y nombre de agente de escucha especificados en la conexión de solo lectura pero, en lugar de modificar **Intención de aplicaciones**, mantenga el valor predeterminado que admite las conexiones READWRITE.</span><span class="sxs-lookup"><span data-stu-id="5092b-244">When creating the additional data source, use the same listener name and database that you specified in the read-only connection, but instead of modifying **Application Intent**, keep the default that supports READWRITE connections.</span></span> <span data-ttu-id="5092b-245">Ahora puede agregar nuevas tablas de dimensiones o hechos a la vista del origen de datos que se basen en el origen de datos de lectura/escritura y luego habilitar la reescritura en las nuevas tablas.</span><span class="sxs-lookup"><span data-stu-id="5092b-245">You can now add new fact or dimension tables to your data source view that are based on the read-write data source, and then enable writeback on the new tables.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5092b-246">Consulte también</span><span class="sxs-lookup"><span data-stu-id="5092b-246">See Also</span></span>  
 <span data-ttu-id="5092b-247">[Agentes de escucha de grupo de disponibilidad, conectividad de cliente y conmutación por error de una aplicación &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="5092b-247">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 <span data-ttu-id="5092b-248">[Secundarias activas: réplicas secundarias legibles &#40;Grupos de disponibilidad AlwaysOn&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="5092b-248">[Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="5092b-249">[Directivas de AlwaysOn para problemas operativos con Grupos de disponibilidad AlwaysOn &#40;SQL Server&#41;](always-on-policies-for-operational-issues-always-on-availability.md) </span><span class="sxs-lookup"><span data-stu-id="5092b-249">[AlwaysOn Policies for Operational Issues with AlwaysOn Availability Groups &#40;SQL Server&#41;](always-on-policies-for-operational-issues-always-on-availability.md) </span></span>  
 <span data-ttu-id="5092b-250">[Crear un origen de datos &#40;&#41;de SSAS multidimensional](https://docs.microsoft.com/analysis-services/multidimensional-models/create-a-data-source-ssas-multidimensional) </span><span class="sxs-lookup"><span data-stu-id="5092b-250">[Create a Data Source &#40;SSAS Multidimensional&#41;](https://docs.microsoft.com/analysis-services/multidimensional-models/create-a-data-source-ssas-multidimensional) </span></span>  
 [<span data-ttu-id="5092b-251">Habilitar reescritura en la dimensión</span><span class="sxs-lookup"><span data-stu-id="5092b-251">Enable Dimension Writeback</span></span>](https://docs.microsoft.com/analysis-services/multidimensional-models/bi-wizard-enable-dimension-writeback)  
  
  
