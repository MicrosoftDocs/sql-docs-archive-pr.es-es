---
title: Principales cambios en las características de Motor de base de datos en SQL Server 2014 | Microsoft Docs
ms.custom: ''
ms.date: 01/19/2019
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: release-landing
ms.topic: conceptual
helpviewer_keywords:
- Database Engine [SQL Server], what's new
- breaking changes [SQL Server]
ms.assetid: 47edefbd-a09b-4087-937a-453cd5c6e061
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: bf1a25aabde1e684407218da7365ae7a2b4265a7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751482"
---
# <a name="breaking-changes-to-database-engine-features-in-sql-server-2014"></a><span data-ttu-id="99aa2-102">Cambios recientes en las características del Motor de base de datos de SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="99aa2-102">Breaking Changes to Database Engine Features in SQL Server 2014</span></span>
  <span data-ttu-id="99aa2-103">En este tema se describen los cambios importantes en [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] [!INCLUDE[ssDE](../includes/ssde-md.md)] y versiones anteriores de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="99aa2-103">This topic describes breaking changes in the [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] [!INCLUDE[ssDE](../includes/ssde-md.md)] and earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="99aa2-104">Estos cambios pueden provocar errores en las aplicaciones, en los scripts o en las funcionalidades basados en versiones anteriores de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="99aa2-104">These changes might break applications, scripts, or functionalities that are based on earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="99aa2-105">Podría encontrar estos problemas al actualizar.</span><span class="sxs-lookup"><span data-stu-id="99aa2-105">You might encounter these issues when you upgrade.</span></span> <span data-ttu-id="99aa2-106">Para obtener más información, vea [Use Upgrade Advisor to Prepare for Upgrades](../sql-server/install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="99aa2-106">For more information, see [Use Upgrade Advisor to Prepare for Upgrades](../sql-server/install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span></span>  
  
##  <a name="breaking-changes-in-sssql14"></a><a name="SQL14"></a> <span data-ttu-id="99aa2-107">Cambios recientes en [!INCLUDE[ssSQL14](../includes/sssql14-md.md)]</span><span class="sxs-lookup"><span data-stu-id="99aa2-107">Breaking Changes in [!INCLUDE[ssSQL14](../includes/sssql14-md.md)]</span></span>  
 <span data-ttu-id="99aa2-108">No hay ningún problema nuevo.</span><span class="sxs-lookup"><span data-stu-id="99aa2-108">No new issues.</span></span>  
  
##  <a name="breaking-changes-in-sssql11"></a><a name="Denali"></a><span data-ttu-id="99aa2-109">Principales cambios en[!INCLUDE[ssSQL11](../includes/sssql11-md.md)]</span><span class="sxs-lookup"><span data-stu-id="99aa2-109">Breaking Changes in [!INCLUDE[ssSQL11](../includes/sssql11-md.md)]</span></span>  
  
### <a name="transact-sql"></a><span data-ttu-id="99aa2-110">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="99aa2-110">Transact-SQL</span></span>  
  
|<span data-ttu-id="99aa2-111">Característica</span><span class="sxs-lookup"><span data-stu-id="99aa2-111">Feature</span></span>|<span data-ttu-id="99aa2-112">Descripción</span><span class="sxs-lookup"><span data-stu-id="99aa2-112">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="99aa2-113">Seleccionar en columnas o tablas denominadas NEXT</span><span class="sxs-lookup"><span data-stu-id="99aa2-113">Selecting from columns or tables named NEXT</span></span>|<span data-ttu-id="99aa2-114">Las secuencias utilizan la función NEXT VALUE FOR del estándar ANSI.</span><span class="sxs-lookup"><span data-stu-id="99aa2-114">Sequences use the ANSI standard NEXT VALUE FOR function.</span></span> <span data-ttu-id="99aa2-115">Si una tabla o una columna se denomina siguiente y la tabla o columna tiene un alias de valor, y si se omite el estándar ANSI, la instrucción resultante puede producir un error.</span><span class="sxs-lookup"><span data-stu-id="99aa2-115">If a table or a column is named NEXT and the table or column is aliased as VALUE, and if the ANSI standard AS is omitted, the resultant statement can cause an error.</span></span> <span data-ttu-id="99aa2-116">Para evitar el problema, incluya la palabra clave AS del estándar ANSI.</span><span class="sxs-lookup"><span data-stu-id="99aa2-116">To work around, include the ANSI standard AS keyword.</span></span> <span data-ttu-id="99aa2-117">Por ejemplo, `SELECT NEXT VALUE FROM Table` se debería reescribir como `SELECT NEXT AS VALUE FROM Table` y `SELECT Col1 FROM NEXT VALUE` se debería reescribir como `SELECT Col1 FROM NEXT AS VALUE`.</span><span class="sxs-lookup"><span data-stu-id="99aa2-117">For example, `SELECT NEXT VALUE FROM Table` should be rewritten as `SELECT NEXT AS VALUE FROM Table` and `SELECT Col1 FROM NEXT VALUE` should be rewritten as `SELECT Col1 FROM NEXT AS VALUE`.</span></span>|  
|<span data-ttu-id="99aa2-118">Operador PIVOT</span><span class="sxs-lookup"><span data-stu-id="99aa2-118">PIVOT operator</span></span>|<span data-ttu-id="99aa2-119">El operador PIVOT no está permitido en una consulta de expresión de tabla común recursiva (CTE) cuando el nivel de compatibilidad está establecido en 110.</span><span class="sxs-lookup"><span data-stu-id="99aa2-119">The PIVOT operator is not allowed in a recursive common table expression (CTE) query when the database compatibility level is set to 110.</span></span> <span data-ttu-id="99aa2-120">Vuelva a escribir la consulta o cambie el nivel de compatibilidad a 100 o un valor inferior.</span><span class="sxs-lookup"><span data-stu-id="99aa2-120">Rewrite the query, or change the compatibility level to 100 or lower.</span></span> <span data-ttu-id="99aa2-121">Con PIVOT en una consulta CTE se producen resultados incorrectos cuando hay varias filas individuales por agrupación.</span><span class="sxs-lookup"><span data-stu-id="99aa2-121">Using PIVOT in a recursive CTE query produces incorrect results when there is more than a single row per grouping.</span></span>|  
|<span data-ttu-id="99aa2-122">sp_setapprole y sp_unsetapprole</span><span class="sxs-lookup"><span data-stu-id="99aa2-122">sp_setapprole and sp_unsetapprole</span></span>|<span data-ttu-id="99aa2-123">El parámetro `OUTPUT` de la cookie para `sp_setapprole` está documentado actualmente como `varbinary(8000)`, que es la longitud máxima correcta.</span><span class="sxs-lookup"><span data-stu-id="99aa2-123">The cookie `OUTPUT` parameter for `sp_setapprole` is currently documented as `varbinary(8000)` which is the correct maximum length.</span></span> <span data-ttu-id="99aa2-124">Sin embargo, la implementación actual devuelve `varbinary(50)`.</span><span class="sxs-lookup"><span data-stu-id="99aa2-124">However the current implementation returns `varbinary(50)`.</span></span> <span data-ttu-id="99aa2-125">Las aplicaciones deben seguir reservando `varbinary(8000)` para que la aplicación siga funcionando correctamente si el tamaño de retorno de la cookie aumenta en una versión futura.</span><span class="sxs-lookup"><span data-stu-id="99aa2-125">Applications should continue to reserve `varbinary(8000)` so that the application continues to operate correctly if the cookie return size increases in a future release.</span></span> <span data-ttu-id="99aa2-126">Para obtener más información, vea [sp_setapprole &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setapprole-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="99aa2-126">For more information, see [sp_setapprole &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setapprole-transact-sql).</span></span>|  
|<span data-ttu-id="99aa2-127">EXECUTE AS</span><span class="sxs-lookup"><span data-stu-id="99aa2-127">EXECUTE AS</span></span>|<span data-ttu-id="99aa2-128">El parámetro OUTPUT de la cookie para EXECUTE AS está documentado actualmente como `varbinary(8000)`, que es la longitud máxima correcta.</span><span class="sxs-lookup"><span data-stu-id="99aa2-128">The cookie OUTPUT parameter for EXECUTE AS is currently documented as `varbinary(8000)` which is the correct maximum length.</span></span> <span data-ttu-id="99aa2-129">Sin embargo, la implementación actual devuelve `varbinary(100)`.</span><span class="sxs-lookup"><span data-stu-id="99aa2-129">However the current implementation returns `varbinary(100)`.</span></span> <span data-ttu-id="99aa2-130">Las aplicaciones deben seguir reservando `varbinary(8000)` para que la aplicación siga funcionando correctamente si el tamaño de retorno de la cookie aumenta en una versión futura.</span><span class="sxs-lookup"><span data-stu-id="99aa2-130">Applications should continue to reserve `varbinary(8000)` so that the application continues to operate correctly if the cookie return size increases in a future release.</span></span> <span data-ttu-id="99aa2-131">Para obtener más información, vea [EXECUTE AS &#40;Transact-SQL&#41;](/sql/t-sql/statements/execute-as-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="99aa2-131">For more information, see [EXECUTE AS &#40;Transact-SQL&#41;](/sql/t-sql/statements/execute-as-transact-sql).</span></span>|  
|<span data-ttu-id="99aa2-132">sys.fn_get_audit_file función</span><span class="sxs-lookup"><span data-stu-id="99aa2-132">sys.fn_get_audit_file function</span></span>|<span data-ttu-id="99aa2-133">Se han agregado dos columnas adicionales (**user_defined_event_id** y **user_defined_information**) para admitir los eventos de auditoría definidos por el usuario.</span><span class="sxs-lookup"><span data-stu-id="99aa2-133">Two additional columns (**user_defined_event_id** and **user_defined_information**) have been added to support user-defined audit events.</span></span> <span data-ttu-id="99aa2-134">Las aplicaciones que no seleccionan columnas por nombre pueden devolver más columnas de las previstas.</span><span class="sxs-lookup"><span data-stu-id="99aa2-134">Applications that do not select columns by name might return more columns than expected.</span></span> <span data-ttu-id="99aa2-135">Seleccione las columnas por nombre o ajuste la aplicación para aceptar estas columnas adicionales.</span><span class="sxs-lookup"><span data-stu-id="99aa2-135">Either select columns by name, or adjust the application to accept these additional columns.</span></span>|  
|<span data-ttu-id="99aa2-136">Palabra clave reservada WITHIN</span><span class="sxs-lookup"><span data-stu-id="99aa2-136">WITHIN reserved keyword</span></span>|<span data-ttu-id="99aa2-137">WITHIN ahora es una palabra clave reservada.</span><span class="sxs-lookup"><span data-stu-id="99aa2-137">WITHIN is now a reserved keyword.</span></span> <span data-ttu-id="99aa2-138">Se producirán errores en las referencias a objetos o columnas que se denominen "within".</span><span class="sxs-lookup"><span data-stu-id="99aa2-138">References to objects or columns named 'within' will fail.</span></span> <span data-ttu-id="99aa2-139">Cambie el nombre del objeto o de la columna, o bien delimite el nombre con corchetes o comillas.</span><span class="sxs-lookup"><span data-stu-id="99aa2-139">Rename the object or column name or delimit the name by using brackets or quotes.</span></span>  <span data-ttu-id="99aa2-140">Por ejemplo, `SELECT * FROM [within]`.</span><span class="sxs-lookup"><span data-stu-id="99aa2-140">For example, `SELECT * FROM [within]`.</span></span>|  
|<span data-ttu-id="99aa2-141">Operaciones CAST y CONVERT en columnas calculadas de tipo `time` o `datetime2`</span><span class="sxs-lookup"><span data-stu-id="99aa2-141">CAST and CONVERT operations on computed columns of type `time` or `datetime2`</span></span>|<span data-ttu-id="99aa2-142">En versiones anteriores a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], el estilo predeterminado de las operaciones CAST y CONVERT en tipos de datos `time` y `datetime2` es 121, a menos que se utilice otro tipo en una expresión de columna calculada.</span><span class="sxs-lookup"><span data-stu-id="99aa2-142">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], the default style for CAST and CONVERT operations on `time` and `datetime2` data types is 121 except when either type is used in a computed column expression.</span></span> <span data-ttu-id="99aa2-143">Para las columnas calculadas, el estilo predeterminado es 0.</span><span class="sxs-lookup"><span data-stu-id="99aa2-143">For computed columns, the default style is 0.</span></span> <span data-ttu-id="99aa2-144">Este comportamiento afecta a las columnas calculadas cuando se crean, cuando se utilizan en las consultas que implican parametrización automática o cuando se usan en definiciones de restricciones.</span><span class="sxs-lookup"><span data-stu-id="99aa2-144">This behavior impacts computed columns when they are created, used in queries involving auto-parameterization, or used in constraint definitions.</span></span><br /><br /> <span data-ttu-id="99aa2-145">Bajo el nivel de compatibilidad 110, el estilo predeterminado de las operaciones CAST y CONVERT en los tipos de datos `time` y `datetime2` es siempre 121.</span><span class="sxs-lookup"><span data-stu-id="99aa2-145">Under compatibility level 110, the default style for CAST and CONVERT operations on `time` and `datetime2` data types is always 121.</span></span> <span data-ttu-id="99aa2-146">Si su consulta se basa en el comportamiento anterior, use un nivel de compatibilidad menor de 110, o especifique explícitamente el estilo 0 en la consulta correspondiente.</span><span class="sxs-lookup"><span data-stu-id="99aa2-146">If your query relies on the old behavior, use a compatibility level less than 110, or explicitly specify the 0 style in the affected query.</span></span><br /><br /> <span data-ttu-id="99aa2-147">Actualizar la base de datos al nivel de compatibilidad 110 no cambiará los datos de usuario que se hayan almacenado en disco.</span><span class="sxs-lookup"><span data-stu-id="99aa2-147">Upgrading the database to compatibility level 110 will not change user data that has been stored to disk.</span></span> <span data-ttu-id="99aa2-148">Debe corregir manualmente estos datos según convenga.</span><span class="sxs-lookup"><span data-stu-id="99aa2-148">You must manually correct this data as appropriate.</span></span> <span data-ttu-id="99aa2-149">Por ejemplo, si utilizara SELECT INTO para crear una tabla de un origen que contuviera una expresión de columna calculada como la descrita anteriormente, se almacenarían los datos (si se usa el estilo 0) en lugar de la propia definición de columna calculada.</span><span class="sxs-lookup"><span data-stu-id="99aa2-149">For example, if you used SELECT INTO to create a table from a source that contained a computed column expression described above, the data (using style 0) would be stored rather than the computed column definition itself.</span></span> <span data-ttu-id="99aa2-150">Debería actualizar manualmente estos datos para que coincidieran con el estilo 121.</span><span class="sxs-lookup"><span data-stu-id="99aa2-150">You would need to manually update this data to match style 121.</span></span>|  
|<span data-ttu-id="99aa2-151">ALTER TABLE</span><span class="sxs-lookup"><span data-stu-id="99aa2-151">ALTER TABLE</span></span>|<span data-ttu-id="99aa2-152">La instrucción ALTER TABLE solo permite nombres de tabla de dos partes (esquema.objeto).</span><span class="sxs-lookup"><span data-stu-id="99aa2-152">The ALTER TABLE statement allows only two-part (schema.object) table names.</span></span> <span data-ttu-id="99aa2-153">Ahora se produce un error al especificar un nombre de tabla con los formatos siguientes en tiempo de compilación con el error 117:</span><span class="sxs-lookup"><span data-stu-id="99aa2-153">Specifying a table name using the following formats now fails at compile time with error 117:</span></span><br /><br /> <span data-ttu-id="99aa2-154">servidor.baseDeDatos.esquema.tabla</span><span class="sxs-lookup"><span data-stu-id="99aa2-154">server.database.schema.table</span></span><br /><br /> <span data-ttu-id="99aa2-155">.baseDeDatos.esquema.tabla</span><span class="sxs-lookup"><span data-stu-id="99aa2-155">.database.schema.table</span></span><br /><br /> <span data-ttu-id="99aa2-156">..esquema.tabla</span><span class="sxs-lookup"><span data-stu-id="99aa2-156">..schema.table</span></span><br /><br /> <span data-ttu-id="99aa2-157">En versiones anteriores, al especificar el formato servidor.baseDeDatos.esquema.tabla se devolvía el error 4902.</span><span class="sxs-lookup"><span data-stu-id="99aa2-157">In earlier versions specifying the format server.database.schema.table returned error 4902.</span></span> <span data-ttu-id="99aa2-158">La especificación del formato .baseDeDatos.esquema.tabla o ..esquema.tabla se realizaba correctamente.</span><span class="sxs-lookup"><span data-stu-id="99aa2-158">Specifying the format .database.schema.table or the format ..schema.table succeeded.</span></span> <span data-ttu-id="99aa2-159">Para resolver el problema, quite el uso de un prefijo de 4 partes.</span><span class="sxs-lookup"><span data-stu-id="99aa2-159">To resolve the problem, remove the use of a 4-part prefix.</span></span>|  
|<span data-ttu-id="99aa2-160">Examinar los metadatos</span><span class="sxs-lookup"><span data-stu-id="99aa2-160">Browsing metadata</span></span>|<span data-ttu-id="99aa2-161">Al consultar una vista con FOR BROWSE o SET NO_BROWSETABLE ON, ahora se devuelven los metadatos de la vista, no los metadatos del objeto subyacente.</span><span class="sxs-lookup"><span data-stu-id="99aa2-161">Querying a view using FOR BROWSE or SET NO_BROWSETABLE ON now returns the metadata of the view, not the metadata of the underlying object.</span></span> <span data-ttu-id="99aa2-162">Este comportamiento ahora se corresponde al de otros métodos de examinar los metadatos.</span><span class="sxs-lookup"><span data-stu-id="99aa2-162">This behavior now matches other methods of browsing metadata.</span></span>|  
|<span data-ttu-id="99aa2-163">SOUNDEX</span><span class="sxs-lookup"><span data-stu-id="99aa2-163">SOUNDEX</span></span>|<span data-ttu-id="99aa2-164">Bajo el nivel 110 de la compatibilidad de la base de datos, la función SOUNDEX implementa las nuevas reglas que pueden causar que los valores computados por la función sean diferentes que los valores computados bajo niveles anteriores de compatibilidad.</span><span class="sxs-lookup"><span data-stu-id="99aa2-164">Under database compatibility level 110, the SOUNDEX function implements new rules that may cause the values computed by the function to be different than the values computed under earlier compatibility levels.</span></span> <span data-ttu-id="99aa2-165">Después de actualizar al nivel de compatibilidad 110, es posible que tenga que regenerar los índices, los montones o las restricciones CHECK que usan la función SOUNDEX.</span><span class="sxs-lookup"><span data-stu-id="99aa2-165">After upgrading to compatibility level 110, you may need to rebuild the indexes, heaps, or CHECK constraints that use the SOUNDEX function.</span></span> <span data-ttu-id="99aa2-166">Para más información, vea [SOUNDEX &#40;Transact-SQL&#41;](/sql/t-sql/functions/soundex-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="99aa2-166">For more information, see [SOUNDEX &#40;Transact-SQL&#41;](/sql/t-sql/functions/soundex-transact-sql)</span></span>
|<span data-ttu-id="99aa2-167">Mensaje de recuento de filas para las instrucciones DML con error</span><span class="sxs-lookup"><span data-stu-id="99aa2-167">Row count message for failed DML statements</span></span>|<span data-ttu-id="99aa2-168">En [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], [!INCLUDE[ssDE](../includes/ssde-md.md)] devolverá continuamente el token TDS DONE con RowCount: 0 a los clientes cuando se produzca un error en la instrucción DML.</span><span class="sxs-lookup"><span data-stu-id="99aa2-168">In [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], the [!INCLUDE[ssDE](../includes/ssde-md.md)] will consistently send the TDS DONE token with RowCount: 0 to clients when a DML statement fails.</span></span> <span data-ttu-id="99aa2-169">En versiones anteriores de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], se enviaba un valor incorrecto de -1 al cliente cuando la instrucción DML con error se encontraba en un bloque TRY-CATCH y tenía parámetros automáticos con [!INCLUDE[ssDE](../includes/ssde-md.md)] o el bloque TRY-CATCH no estaba en el mismo nivel que la instrucción con el error.</span><span class="sxs-lookup"><span data-stu-id="99aa2-169">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], an incorrect value of -1 is sent to the client when the DML statement that fails is contained in a TRY-CATCH block and is either autoparameterized by the [!INCLUDE[ssDE](../includes/ssde-md.md)] or the TRY-CATCH block is not on the same level as the failed statement.</span></span> <span data-ttu-id="99aa2-170">Por ejemplo, si un bloque de TRY-CATCH llama a un procedimiento almacenado y se produce un error en una instrucción DML del procedimiento, el cliente recibirá incorrectamente un valor de -1.</span><span class="sxs-lookup"><span data-stu-id="99aa2-170">For example, if a TRY-CATCH block calls a stored procedure and a DML statement in the procedure fails, the client will incorrectly receive a -1 value.</span></span><br /><br /> <span data-ttu-id="99aa2-171">Se producirán errores en las aplicaciones que se basen en este comportamiento incorrecto.</span><span class="sxs-lookup"><span data-stu-id="99aa2-171">Applications that rely on this incorrect behavior will fail.</span></span>|  
|<span data-ttu-id="99aa2-172">SERVERPROPERTY (' edición ')</span><span class="sxs-lookup"><span data-stu-id="99aa2-172">SERVERPROPERTY ('Edition')</span></span>|<span data-ttu-id="99aa2-173">Edición de producto instalada de la instancia de [!INCLUDE[ssSQL11](../includes/sssql11-md.md)].</span><span class="sxs-lookup"><span data-stu-id="99aa2-173">Installed product edition of the instance of [!INCLUDE[ssSQL11](../includes/sssql11-md.md)].</span></span> <span data-ttu-id="99aa2-174">Utilice el valor de esta propiedad para determinar las características y los límites, como por ejemplo el número máximo de CPU admitidas por el producto instalado.</span><span class="sxs-lookup"><span data-stu-id="99aa2-174">Use the value of this property to determine the features and the limits, such as maximum number of CPUs that are supported by the installed product.</span></span><br /><br /> <span data-ttu-id="99aa2-175">En función de la edición Enterprise instalada, puede devolver ' Enterprise Edition ' o ' Enterprise Edition: licencia basada en núcleo '.</span><span class="sxs-lookup"><span data-stu-id="99aa2-175">Based on the installed Enterprise edition, this can return 'Enterprise Edition' or 'Enterprise Edition: Core-based Licensing'.</span></span> <span data-ttu-id="99aa2-176">Las ediciones Enterprise se diferencian en la capacidad de proceso máxima de una sola instancia de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="99aa2-176">The Enterprise editions are differentiated based on the maximum compute capacity by a single instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="99aa2-177">Para obtener más información sobre los límites de la capacidad de cálculo en [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] , vea [límites de la capacidad de cálculo por edición de SQL Server](../sql-server/compute-capacity-limits-by-edition-of-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="99aa2-177">For more information on Compute capacity limits in [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], see [Compute Capacity Limits by Edition of SQL Server](../sql-server/compute-capacity-limits-by-edition-of-sql-server.md).</span></span>|  
|<span data-ttu-id="99aa2-178">CREATE LOGIN</span><span class="sxs-lookup"><span data-stu-id="99aa2-178">CREATE LOGIN</span></span>|<span data-ttu-id="99aa2-179">La `CREATE LOGIN WITH PASSWORD = '` opción de *contraseña* `' HASHED` no se puede utilizar con los valores hash creados con [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 7 o anterior.</span><span class="sxs-lookup"><span data-stu-id="99aa2-179">The `CREATE LOGIN WITH PASSWORD = '`*password*`' HASHED` option cannot be used with hashes created by [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 7 or earlier.</span></span>|  
|<span data-ttu-id="99aa2-180">Operaciones CAST y CONVERT para `datetimeoffset`</span><span class="sxs-lookup"><span data-stu-id="99aa2-180">CAST and CONVERT operations for `datetimeoffset`</span></span>|<span data-ttu-id="99aa2-181">Los únicos estilos que se admiten al convertir de tipos de fecha y hora a `datetimeoffset` son 0 o 1.</span><span class="sxs-lookup"><span data-stu-id="99aa2-181">The only styles that are supported when converting from date and time types to `datetimeoffset` are 0 or 1.</span></span> <span data-ttu-id="99aa2-182">Todos los demás estilos de conversión devuelven el error 9809.</span><span class="sxs-lookup"><span data-stu-id="99aa2-182">All other conversion styles return error 9809.</span></span> <span data-ttu-id="99aa2-183">Por ejemplo, el código siguiente genera un error 9809.</span><span class="sxs-lookup"><span data-stu-id="99aa2-183">For example, the following code returns error 9809.</span></span><br /><br /> `SELECT CONVERT(date, CAST('7070-11-25 16:25:01.00986 -02:07' as datetimeoffset(5)), 107);`|  
  
### <a name="dynamic-management-views"></a><span data-ttu-id="99aa2-184">Vistas de administración dinámica</span><span class="sxs-lookup"><span data-stu-id="99aa2-184">Dynamic Management Views</span></span>  
  
|<span data-ttu-id="99aa2-185">Ver</span><span class="sxs-lookup"><span data-stu-id="99aa2-185">View</span></span>|<span data-ttu-id="99aa2-186">Descripción</span><span class="sxs-lookup"><span data-stu-id="99aa2-186">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="99aa2-187">sys.dm_exec_requests</span><span class="sxs-lookup"><span data-stu-id="99aa2-187">sys.dm_exec_requests</span></span>|<span data-ttu-id="99aa2-188">La columna de comandos cambia de `nvarchar(16)` a `nvarchar(32)`.</span><span class="sxs-lookup"><span data-stu-id="99aa2-188">The command column changes from `nvarchar(16)` to `nvarchar(32)`.</span></span>|  
|<span data-ttu-id="99aa2-189">sys.dm_os_memory_cache_counters</span><span class="sxs-lookup"><span data-stu-id="99aa2-189">sys.dm_os_memory_cache_counters</span></span>|<span data-ttu-id="99aa2-190">Se ha cambiado el nombre de las siguientes columnas:</span><span class="sxs-lookup"><span data-stu-id="99aa2-190">The following columns have been renamed:</span></span><br /><br /> <span data-ttu-id="99aa2-191">single_pages_kb es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-191">single_pages_kb is now:</span></span> <br />                          <span data-ttu-id="99aa2-192">pages_kb</span><span class="sxs-lookup"><span data-stu-id="99aa2-192">pages_kb</span></span><br /><br /> <span data-ttu-id="99aa2-193">multi_pages_kb</span><span class="sxs-lookup"><span data-stu-id="99aa2-193">multi_pages_kb</span></span><br />                           <span data-ttu-id="99aa2-194">es ahora: pages_in_use_kb</span><span class="sxs-lookup"><span data-stu-id="99aa2-194">is now: pages_in_use_kb</span></span>|  
|<span data-ttu-id="99aa2-195">sys.dm_os_memory_cache_entries</span><span class="sxs-lookup"><span data-stu-id="99aa2-195">sys.dm_os_memory_cache_entries</span></span>|<span data-ttu-id="99aa2-196">Pages_kb ha cambiado el nombre de la columna pages_allocated_count columna.</span><span class="sxs-lookup"><span data-stu-id="99aa2-196">The column pages_allocated_count column has been renamed pages_kb.</span></span>|  
|<span data-ttu-id="99aa2-197">sys.dm_os_memory_clerks</span><span class="sxs-lookup"><span data-stu-id="99aa2-197">sys.dm_os_memory_clerks</span></span>|<span data-ttu-id="99aa2-198">Se ha quitado la columna multi_pages_kb.</span><span class="sxs-lookup"><span data-stu-id="99aa2-198">The column multi_pages_kb has been removed.</span></span><br /><br /> <span data-ttu-id="99aa2-199">Pages_kb ha cambiado el nombre de la columna single_pages_kb columna.</span><span class="sxs-lookup"><span data-stu-id="99aa2-199">The column single_pages_kb column has been renamed pages_kb.</span></span>|  
|<span data-ttu-id="99aa2-200">sys.dm_os_memory_nodes</span><span class="sxs-lookup"><span data-stu-id="99aa2-200">sys.dm_os_memory_nodes</span></span>|<span data-ttu-id="99aa2-201">Se ha cambiado el nombre de las siguientes columnas:</span><span class="sxs-lookup"><span data-stu-id="99aa2-201">The following columns have been renamed:</span></span><br /><br /> <span data-ttu-id="99aa2-202">single_pages_kb es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-202">single_pages_kb is now:</span></span> <br />                            <span data-ttu-id="99aa2-203">pages_kb</span><span class="sxs-lookup"><span data-stu-id="99aa2-203">pages_kb</span></span><br /><br /> <span data-ttu-id="99aa2-204">multi_pages_kb es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-204">multi_pages_kb is now:</span></span> <br />                            <span data-ttu-id="99aa2-205">foreign_committed_kb</span><span class="sxs-lookup"><span data-stu-id="99aa2-205">foreign_committed_kb</span></span>|  
|<span data-ttu-id="99aa2-206">sys.dm_os_memory_objects</span><span class="sxs-lookup"><span data-stu-id="99aa2-206">sys.dm_os_memory_objects</span></span>|<span data-ttu-id="99aa2-207">Se ha cambiado el nombre de las siguientes columnas.</span><span class="sxs-lookup"><span data-stu-id="99aa2-207">The following columns have been renamed.</span></span><br /><br /> <span data-ttu-id="99aa2-208">pages_allocated_count es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-208">pages_allocated_count is now:</span></span><br />                            <span data-ttu-id="99aa2-209">pages_in_bytes</span><span class="sxs-lookup"><span data-stu-id="99aa2-209">pages_in_bytes</span></span><br /><br /> <span data-ttu-id="99aa2-210">max_pages_allocated_count es ahora: max_pages_in_bytes</span><span class="sxs-lookup"><span data-stu-id="99aa2-210">max_pages_allocated_count is now: max_pages_in_bytes</span></span>|  
|<span data-ttu-id="99aa2-211">sys.dm_os_sys_info</span><span class="sxs-lookup"><span data-stu-id="99aa2-211">sys.dm_os_sys_info</span></span>|<span data-ttu-id="99aa2-212">Se ha cambiado el nombre de las siguientes columnas:</span><span class="sxs-lookup"><span data-stu-id="99aa2-212">The following columns have been renamed:</span></span><br /><br /> <span data-ttu-id="99aa2-213">physical_memory_in_bytes es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-213">physical_memory_in_bytes is now:</span></span> <br />                            <span data-ttu-id="99aa2-214">physical_memory_kb</span><span class="sxs-lookup"><span data-stu-id="99aa2-214">physical_memory_kb</span></span><br /><br /> <span data-ttu-id="99aa2-215">bpool_commit_target es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-215">bpool_commit_target is now:</span></span> <br />                            <span data-ttu-id="99aa2-216">committed_target_kb</span><span class="sxs-lookup"><span data-stu-id="99aa2-216">committed_target_kb</span></span><br /><br /> <span data-ttu-id="99aa2-217">bpool_visible es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-217">bpool_visible is now:</span></span> <br />                            <span data-ttu-id="99aa2-218">visible_target_kb</span><span class="sxs-lookup"><span data-stu-id="99aa2-218">visible_target_kb</span></span><br /><br /> <span data-ttu-id="99aa2-219">virtual_memory_in_bytes es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-219">virtual_memory_in_bytes is now:</span></span> <br />                            <span data-ttu-id="99aa2-220">virtual_memory_kb</span><span class="sxs-lookup"><span data-stu-id="99aa2-220">virtual_memory_kb</span></span><br /><br /> <span data-ttu-id="99aa2-221">bpool_commited es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-221">bpool_commited is now:</span></span><br />                            <span data-ttu-id="99aa2-222">committed_kb</span><span class="sxs-lookup"><span data-stu-id="99aa2-222">committed_kb</span></span>|  
|<span data-ttu-id="99aa2-223">sys.dm_os_workers</span><span class="sxs-lookup"><span data-stu-id="99aa2-223">sys.dm_os_workers</span></span>|<span data-ttu-id="99aa2-224">La columna regional se ha quitado.</span><span class="sxs-lookup"><span data-stu-id="99aa2-224">The locale column has been removed.</span></span>|  
  
### <a name="catalog-views"></a><span data-ttu-id="99aa2-225">Vistas de catálogo</span><span class="sxs-lookup"><span data-stu-id="99aa2-225">Catalog Views</span></span>  
  
|<span data-ttu-id="99aa2-226">Ver</span><span class="sxs-lookup"><span data-stu-id="99aa2-226">View</span></span>|<span data-ttu-id="99aa2-227">Descripción</span><span class="sxs-lookup"><span data-stu-id="99aa2-227">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="99aa2-228">sys.data_spaces</span><span class="sxs-lookup"><span data-stu-id="99aa2-228">sys.data_spaces</span></span><br /><br /> <span data-ttu-id="99aa2-229">sys.partition_schemes</span><span class="sxs-lookup"><span data-stu-id="99aa2-229">sys.partition_schemes</span></span><br /><br /> <span data-ttu-id="99aa2-230">sys.filegroups</span><span class="sxs-lookup"><span data-stu-id="99aa2-230">sys.filegroups</span></span><br /><br /> <span data-ttu-id="99aa2-231">sys.partition_functions</span><span class="sxs-lookup"><span data-stu-id="99aa2-231">sys.partition_functions</span></span>|<span data-ttu-id="99aa2-232">Se ha agregado la nueva columna is_system a sys.data_spaces y sys.partition_functions.</span><span class="sxs-lookup"><span data-stu-id="99aa2-232">A new column, is_system, has been added to sys.data_spaces and sys.partition_functions.</span></span> <span data-ttu-id="99aa2-233">(sys.partition_schemes y sys.filegroups heredan las columnas de sys.data_spaces.)</span><span class="sxs-lookup"><span data-stu-id="99aa2-233">(sys.partition_schemes and sys.filegroups inherit the columns of sys.data_spaces.)</span></span><br /><br /> <span data-ttu-id="99aa2-234">Un valor de 1 en esta columna indica que el objeto se usa para fragmentos de índice de texto completo.</span><span class="sxs-lookup"><span data-stu-id="99aa2-234">A value of 1 in this column indicates that the object is used for full-text index fragments.</span></span><br /><br /> <span data-ttu-id="99aa2-235">En sys.partition_functions, sys.partition_schemes y sys.filegroups, la nueva columna no es la última.</span><span class="sxs-lookup"><span data-stu-id="99aa2-235">In sys.partition_functions, sys.partition_schemes, and sys.filegroups, the new column is not the last column.</span></span> <span data-ttu-id="99aa2-236">Revise las consultas existentes que se basan en el orden de las columnas devueltas desde estas vistas de catálogo.</span><span class="sxs-lookup"><span data-stu-id="99aa2-236">Revise existing queries that rely on the order of columns returned from these catalog views.</span></span>|  
  
### <a name="sql-clr-data-types-geometry-geography-and-hierarchyid"></a><span data-ttu-id="99aa2-237">Tipos de datos CLR de SQL (geometry, geography y hierarchyid)</span><span class="sxs-lookup"><span data-stu-id="99aa2-237">SQL CLR Data Types (geometry, geography, and hierarchyid)</span></span>  
 <span data-ttu-id="99aa2-238">El **Microsoft.SqlServer.Types.dll**de ensamblado, que contiene los tipos de datos espaciales y el tipo hierarchyid, se ha actualizado de la versión 10,0 a la versión 11,0.</span><span class="sxs-lookup"><span data-stu-id="99aa2-238">The assembly **Microsoft.SqlServer.Types.dll**, which contains the spatial data types and the hierarchyid type, has been upgraded from version 10.0 to version 11.0.</span></span> <span data-ttu-id="99aa2-239">Cuando se cumplan las siguientes condiciones, se puede producir un error en las aplicaciones personalizadas que hacen referencia a este ensamblado.</span><span class="sxs-lookup"><span data-stu-id="99aa2-239">Custom applications that reference this assembly may fail when the following conditions are true.</span></span>  
  
-   <span data-ttu-id="99aa2-240">Cuando se mueve una aplicación personalizada desde un equipo en el que [!INCLUDE[ssKilimanjaro](../includes/sskilimanjaro-md.md)] se instaló en un equipo en el que solo [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] está instalado, se producirá un error en la aplicación porque la versión 10,0 a la que se hace referencia del ensamblado **SqlTypes** no está presente.</span><span class="sxs-lookup"><span data-stu-id="99aa2-240">When you move a custom application from a computer on which [!INCLUDE[ssKilimanjaro](../includes/sskilimanjaro-md.md)] was installed to a computer on which only [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] is installed, the application will fail because the referenced version 10.0 of the **SqlTypes** assembly is not present.</span></span> <span data-ttu-id="99aa2-241">Puede aparecer este mensaje de error: `"Could not load file or assembly 'Microsoft.SqlServer.Types, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot find the file specified."`</span><span class="sxs-lookup"><span data-stu-id="99aa2-241">You may see this error message: `"Could not load file or assembly 'Microsoft.SqlServer.Types, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot find the file specified."`</span></span>  
  
-   <span data-ttu-id="99aa2-242">Cuando se hace referencia a la versión 11,0 del ensamblado **SqlTypes** y también se instala la versión 10,0, puede aparecer este mensaje de error:`"System.InvalidCastException: Unable to cast object of type 'Microsoft.SqlServer.Types.SqlGeometry' to type 'Microsoft.SqlServer.Types.SqlGeometry'."`</span><span class="sxs-lookup"><span data-stu-id="99aa2-242">When you reference the **SqlTypes** assembly version 11.0, and version 10.0 is also installed, you may see this error message: `"System.InvalidCastException: Unable to cast object of type 'Microsoft.SqlServer.Types.SqlGeometry' to type 'Microsoft.SqlServer.Types.SqlGeometry'."`</span></span>  
  
-   <span data-ttu-id="99aa2-243">Cuando se hace referencia a la versión 11,0 del ensamblado **SqlTypes** desde una aplicación personalizada que tiene como destino .net 3,5, 4 o 4,5, se producirá un error en la aplicación porque SqlClient by Design carga la versión 10,0 del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="99aa2-243">When you reference the **SqlTypes** assembly version 11.0 from a custom application that targets .NET 3.5, 4, or 4.5, the application will fail because SqlClient by design loads version 10.0 of the assembly.</span></span> <span data-ttu-id="99aa2-244">Este error se produce cuando la aplicación llama a uno de los siguientes métodos:</span><span class="sxs-lookup"><span data-stu-id="99aa2-244">This failure occurs when the application calls one of the following methods:</span></span>  
  
    -   <span data-ttu-id="99aa2-245">método `GetValue` de la clase `SqlDataReader`</span><span class="sxs-lookup"><span data-stu-id="99aa2-245">`GetValue` method of the `SqlDataReader` class</span></span>  
  
    -   <span data-ttu-id="99aa2-246">método `GetValues` de la clase `SqlDataReader`</span><span class="sxs-lookup"><span data-stu-id="99aa2-246">`GetValues` method of the `SqlDataReader` class</span></span>  
  
    -   <span data-ttu-id="99aa2-247">operador de índice de corchete [] de la clase `SqlDataReader`</span><span class="sxs-lookup"><span data-stu-id="99aa2-247">bracket index operator [] of the `SqlDataReader` class</span></span>  
  
    -   <span data-ttu-id="99aa2-248">método `ExecuteScalar` de la clase `SqlCommand`</span><span class="sxs-lookup"><span data-stu-id="99aa2-248">`ExecuteScalar` method of the `SqlCommand` class</span></span>  
  
 <span data-ttu-id="99aa2-249">Puede solucionar este problema si usa uno de los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="99aa2-249">You can work around this issue by using one of the following methods:</span></span>  
  
-   <span data-ttu-id="99aa2-250">Puede solucionar este problema en el código si llama al método `GetSqlBytes`, en lugar de los métodos Get enumerados anteriormente, para recuperar los tipos de sistema [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] de CLR, tal como se muestra en el siguiente ejemplo:</span><span class="sxs-lookup"><span data-stu-id="99aa2-250">You can work around this issue in your code by calling the `GetSqlBytes` method, instead of the Get methods listed above, to retrieve CLR [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] system types, as shown in the following example:</span></span>  
  
    ```csharp  
    string query = "SELECT [SpatialColumn] FROM [SpatialTable]";  
          using (SqlConnection conn = new SqlConnection("..."))  
          {  
                SqlCommand cmd = new SqlCommand(query, conn);  
  
                conn.Open();  
                SqlDataReader reader = cmd.ExecuteReader();  
  
                while (reader.Read())  
                {  
                      // In version 11.0 only  
                      SqlGeometry g =   
    SqlGeometry.Deserialize(reader.GetSqlBytes(0));  
  
                      // In version 10.0 or 11.0  
                      SqlGeometry g2 = new SqlGeometry();  
                      g.Read(new BinaryReader(reader.GetSqlBytes(0).Stream));  
                }  
          }  
    ```  
  
-   <span data-ttu-id="99aa2-251">Puede solucionar este problema mediante el redireccionamiento de ensamblado en el archivo de configuración de la aplicación, tal como se muestra en el siguiente ejemplo:</span><span class="sxs-lookup"><span data-stu-id="99aa2-251">You can work around this issue by using assembly redirection in the application configuration file, as shown in the following example:</span></span>  
  
    ```xml  
    <runtime>  
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">  
        ...  
        <dependentAssembly>  
            <assemblyIdentity name="Microsoft.SqlServer.Types" publicKeyToken="89845dcd8080cc91" culture="neutral" />  
            <bindingRedirect oldVersion="10.0.0.0" newVersion="11.0.0.0" />  
        </dependentAssembly>  
        ...  
    </assemblyBinding>  
    <runtime>  
    ```  
  
-   <span data-ttu-id="99aa2-252">Puede solucionar esta problema en la cadena de conexión si especifica el valor "SQL Server 2012" para el atributo "Type System Version" para forzar que SqlClient cargue la versión 11.0 del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="99aa2-252">You can work around this issue in your connection string by specifying a value of "SQL Server 2012" for the "Type System Version" attribute to force SqlClient to load version 11.0 of the assembly.</span></span> <span data-ttu-id="99aa2-253">Este atributo de cadena de conexión solo está disponible en .NET 4.5 y posterior.</span><span class="sxs-lookup"><span data-stu-id="99aa2-253">This connection string attribute is available only in .NET 4.5 and above.</span></span>  
  
-   <span data-ttu-id="99aa2-254">La etiqueta `assemblyBinding` debe ajustarse debajo de la etiqueta `runtime`.</span><span class="sxs-lookup"><span data-stu-id="99aa2-254">The `assemblyBinding` tag should be wrapped under the `runtime` tag.</span></span>  
  
### <a name="support-for-awe"></a><span data-ttu-id="99aa2-255">Compatibilidad con AWE</span><span class="sxs-lookup"><span data-stu-id="99aa2-255">Support for AWE</span></span>  
 <span data-ttu-id="99aa2-256">Ya no se incluye la compatibilidad con las extensiones de ventana de dirección (AWE) de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="99aa2-256">32-bit Address Windowing Extensions (AWE) support is discontinued.</span></span> <span data-ttu-id="99aa2-257">Esto puede dar lugar a un rendimiento más lento en sistemas operativos de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="99aa2-257">This might result in slower performance on 32-bit operating systems.</span></span> <span data-ttu-id="99aa2-258">En el caso de instalaciones que usen grandes cantidades de memoria, migre a un sistema operativo de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="99aa2-258">For installations using large amounts of memory, migrate to a 64-bit operating system.</span></span>  
  
### <a name="xquery-functions-are-surrogate-aware"></a><span data-ttu-id="99aa2-259">Las funciones XQuery detectan los caracteres suplentes</span><span class="sxs-lookup"><span data-stu-id="99aa2-259">XQuery Functions Are Surrogate-Aware</span></span>  
 <span data-ttu-id="99aa2-260">La recomendación de W3C para las funciones y los operadores de XQuery requiere contar un par suplente que represente un carácter Unicode de nivel alto como un solo glifo en codificación UTF-16.</span><span class="sxs-lookup"><span data-stu-id="99aa2-260">The W3C recommendation for XQuery functions and operators requires them to count a surrogate pair that represents a high-range Unicode character as a single glyph in UTF-16 encoding.</span></span> <span data-ttu-id="99aa2-261">No obstante, en versiones de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] anteriores a [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], las funciones de cadena no reconocían los pares suplentes como un solo carácter.</span><span class="sxs-lookup"><span data-stu-id="99aa2-261">However, in versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], string functions did not recognize surrogate pairs as a single character.</span></span> <span data-ttu-id="99aa2-262">Algunas operaciones de cadena, como los cálculos de longitud de cadena y las extracciones de subcadenas, han devuelto resultados incorrectos.</span><span class="sxs-lookup"><span data-stu-id="99aa2-262">Some string operations - such as string length calculations and substring extractions - returned incorrect results.</span></span> [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] <span data-ttu-id="99aa2-263">ahora admite UTF-16 por completo y la administración correcta de los pares suplentes.</span><span class="sxs-lookup"><span data-stu-id="99aa2-263">now fully supports UTF-16 and the correct handling of surrogate pairs.</span></span>  
  
 <span data-ttu-id="99aa2-264">El tipo de datos XML de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] solo permite los pares suplentes con formato correcto.</span><span class="sxs-lookup"><span data-stu-id="99aa2-264">The XML data type in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] only allows well-formed surrogate pairs.</span></span> <span data-ttu-id="99aa2-265">No obstante, es posible que algunas funciones sigan devolviendo resultados indefinidos o inesperados en determinadas circunstancias, ya que es posible pasar pares suplentes no válidos o parciales a las funciones XQuery como valores de cadena.</span><span class="sxs-lookup"><span data-stu-id="99aa2-265">However, some functions can still return undefined or unexpected results in certain circumstances, since it is possible to pass invalid or partial surrogate pairs to XQuery functions as string values.</span></span> <span data-ttu-id="99aa2-266">Tenga en cuenta los siguientes métodos para generar valores de cadena al usar XQuery en [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="99aa2-266">Consider the following methods for generating string values when using XQuery in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="99aa2-267">Proporcionar un valor de cadena constante como valor binario.</span><span class="sxs-lookup"><span data-stu-id="99aa2-267">Provide a constant string value as a binary value.</span></span> <span data-ttu-id="99aa2-268">Al usar este método, sigue siendo posible pasar pares suplentes no válidos o parciales.</span><span class="sxs-lookup"><span data-stu-id="99aa2-268">When using this method, it remains possible to pass invalid or partial surrogate pairs.</span></span>  
  
-   <span data-ttu-id="99aa2-269">Proporcionar un valor de cadena constante al proporcionar entidades de caracteres.</span><span class="sxs-lookup"><span data-stu-id="99aa2-269">Provide a constant string value by providing character entities.</span></span> <span data-ttu-id="99aa2-270">Al usar este método, no es posible pasar pares suplentes no válidos.</span><span class="sxs-lookup"><span data-stu-id="99aa2-270">When using this method, it is not possible to pass invalid surrogate pairs.</span></span> <span data-ttu-id="99aa2-271">Las funciones XQuery requieren una sola entidad de caracteres para el carácter de alto nivel.</span><span class="sxs-lookup"><span data-stu-id="99aa2-271">The XQuery functions require a single character entity for the high-level character.</span></span> <span data-ttu-id="99aa2-272">Estas funciones producen un error si se proporcionan las entidades de caracteres para los caracteres de pares suplentes.</span><span class="sxs-lookup"><span data-stu-id="99aa2-272">These functions raise an error if the character entities for the surrogate pair characters are provided.</span></span>  
  
-   <span data-ttu-id="99aa2-273">Importe los valores externos mediante **SQL: Column** o **SQL: variable**.</span><span class="sxs-lookup"><span data-stu-id="99aa2-273">Import external values by using **sql:column** or **sql:variable**.</span></span> <span data-ttu-id="99aa2-274">Al usar estos métodos, sigue siendo posible incorporar pares suplentes no válidos o parciales.</span><span class="sxs-lookup"><span data-stu-id="99aa2-274">When using these methods, it remains possible to introduce invalid or partial surrogate pairs.</span></span>  
  
#### <a name="affected-xquery-functions-and-operators"></a><span data-ttu-id="99aa2-275">Funciones y operadores de XQuery afectados</span><span class="sxs-lookup"><span data-stu-id="99aa2-275">Affected XQuery Functions and Operators</span></span>  
 <span data-ttu-id="99aa2-276">Las funciones y los operadores de XQuery siguientes ahora administran los pares suplentes UTF-16 correctamente en [!INCLUDE[ssSQL11](../includes/sssql11-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="99aa2-276">The following XQuery functions and operators now handle UTF-16 surrogate pairs correctly in [!INCLUDE[ssSQL11](../includes/sssql11-md.md)]:</span></span>  
  
-   <span data-ttu-id="99aa2-277">**FN: longitud de cadena**.</span><span class="sxs-lookup"><span data-stu-id="99aa2-277">**fn:string-length**.</span></span> <span data-ttu-id="99aa2-278">Sin embargo, si se pasa un par suplente no válido o parcial como argumento, el comportamiento de **longitud de cadena** es indefinido.</span><span class="sxs-lookup"><span data-stu-id="99aa2-278">However, if an invalid or partial surrogate pair is passed as an argument, the behavior of **string-length** is undefined.</span></span>  
  
-   <span data-ttu-id="99aa2-279">**FN: subcadena**.</span><span class="sxs-lookup"><span data-stu-id="99aa2-279">**fn:substring**.</span></span>  
  
-   <span data-ttu-id="99aa2-280">**FN: contiene**.</span><span class="sxs-lookup"><span data-stu-id="99aa2-280">**fn:contains**.</span></span> <span data-ttu-id="99aa2-281">Sin embargo, si se pasa un par suplente parcial como un valor, **Contains** puede devolver resultados inesperados, ya que puede encontrar el par suplente parcial contenido en el par suplente con formato correcto.</span><span class="sxs-lookup"><span data-stu-id="99aa2-281">However, if a partial surrogate pair is passed as a value, **contains** may return unexpected results, since it may find the partial surrogate pair contained in well-formed surrogate pair.</span></span>  
  
-   <span data-ttu-id="99aa2-282">**FN: concat**.</span><span class="sxs-lookup"><span data-stu-id="99aa2-282">**fn:concat**.</span></span> <span data-ttu-id="99aa2-283">Sin embargo, si se pasa un par suplente parcial como un valor, **concat** puede generar pares suplentes incorrectos o pares suplentes parciales.</span><span class="sxs-lookup"><span data-stu-id="99aa2-283">However, if a partial surrogate pair is passed as a value, **concat** can produce incorrect surrogate pairs or partial surrogate pairs.</span></span>  
  
-   <span data-ttu-id="99aa2-284">Operadores de comparación y la cláusula **order by** .</span><span class="sxs-lookup"><span data-stu-id="99aa2-284">Comparison operators and the **order by** clause.</span></span> <span data-ttu-id="99aa2-285">Los operadores de comparación incluyen +, \<, > , \<=, > =, `eq` , `lt` , `gt` , `le` y `ge` .</span><span class="sxs-lookup"><span data-stu-id="99aa2-285">Comparison operators include +, \<, >, \<=, >=, `eq`, `lt`, `gt`, `le`, and `ge`.</span></span>  
  
#### <a name="distributed-query-calls-to-a-system-procedure"></a><span data-ttu-id="99aa2-286">Llamadas de consulta distribuida a un procedimiento de sistema</span><span class="sxs-lookup"><span data-stu-id="99aa2-286">Distributed Query Calls to a System Procedure</span></span>  
 <span data-ttu-id="99aa2-287">Las llamadas de consulta distribuida a través de `OPENQUERY` a algunos procedimientos del sistema generarán un error cuando se llama desde un servidor de [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] a otro.</span><span class="sxs-lookup"><span data-stu-id="99aa2-287">Distributed query calls through `OPENQUERY` to some system procedures will fail when called from one [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] server to another.</span></span> <span data-ttu-id="99aa2-288">Esto sucede cuando [!INCLUDE[ssDE](../includes/ssde-md.md)] no puede detectar metadatos para un procedimiento.</span><span class="sxs-lookup"><span data-stu-id="99aa2-288">This occurs when the [!INCLUDE[ssDE](../includes/ssde-md.md)] cannot discovery metadata for a procedure.</span></span> <span data-ttu-id="99aa2-289">Por ejemplo, `SELECT * FROM OPENQUERY(..., 'EXEC xp_loginfo')`.</span><span class="sxs-lookup"><span data-stu-id="99aa2-289">For example, `SELECT * FROM OPENQUERY(..., 'EXEC xp_loginfo')`.</span></span>  
  
#### <a name="isolation-level-and-sp_reset_connection"></a><span data-ttu-id="99aa2-290">Nivel de aislamiento y sp_reset_connection</span><span class="sxs-lookup"><span data-stu-id="99aa2-290">Isolation Level and sp_reset_connection</span></span>  
 <span data-ttu-id="99aa2-291">El nivel de aislamiento para las conexiones se gestiona por controladores de clientes de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="99aa2-291">The isolation level for connections is handled in the following way by client drivers:</span></span>  
  
-   <span data-ttu-id="99aa2-292">Todos los controladores nativos (SNAC, MDAC y ODBC) establecen el nivel de aislamiento (según la configuración de la aplicación) basándose en sp_reset_connection.</span><span class="sxs-lookup"><span data-stu-id="99aa2-292">All of the native drivers (SNAC, MDAC, ODBC) set the isolation level (based on app setting) upon sp_reset_connection.</span></span>  
  
-   <span data-ttu-id="99aa2-293">Para ADO.NET, básicamente obtendrá un nivel de aislamiento aleatorio que dependerá de la conexión que se obtiene del grupo (y si la aplicación usa un nivel de aislamiento diferente).</span><span class="sxs-lookup"><span data-stu-id="99aa2-293">For ADO.NET you will essentially get a random isolation level depending on which connection you get from the pool (and if the application uses different isolation level).</span></span> <span data-ttu-id="99aa2-294">Puesto que el grupo ADO.NET puede reciclar conexiones de manera interna y transparente, usted no puede predecir qué lanzará el grupo.</span><span class="sxs-lookup"><span data-stu-id="99aa2-294">Since ADO.NET pool can recycle connections internally and transparently, you cannot predict what will come out of the pool.</span></span>  
  
-   <span data-ttu-id="99aa2-295">Para el controlador JDBC, obtiene el mismo comportamiento que ADO.NET</span><span class="sxs-lookup"><span data-stu-id="99aa2-295">For the JDBC driver you get same behavior as ADO.NET</span></span>  
  
     <span data-ttu-id="99aa2-296">La aplicación siempre debe establecer de forma explícita el nivel de aislamiento después de abrir la conexión para obtener lo que quiere.</span><span class="sxs-lookup"><span data-stu-id="99aa2-296">The application must always explicitly set isolation level after opening the connection to get what it wants.</span></span>  
  
     <span data-ttu-id="99aa2-297">Se puede agrupar la conexión JDBC, por lo que la aplicación puede obtener un nivel de aislamiento aleatorio y no saberlo.</span><span class="sxs-lookup"><span data-stu-id="99aa2-297">The JDBC connection can be pooled, so the application may get a random isolation level and not know about it.</span></span>  
  
 <span data-ttu-id="99aa2-298">Para conservar la compatibilidad con versiones anteriores, este nuevo comportamiento solo se aplica a clientes recientes a partir de TDS 7.4.</span><span class="sxs-lookup"><span data-stu-id="99aa2-298">To preserve backward compatibility this new behavior only applies for recent clients beginning with TDS 7.4.</span></span>  
  
#### <a name="backward-compatibility"></a><span data-ttu-id="99aa2-299">Backward Compatibility</span><span class="sxs-lookup"><span data-stu-id="99aa2-299">Backward Compatibility</span></span>  
 <span data-ttu-id="99aa2-300">**El nuevo comportamiento depende del nivel de compatibilidad**</span><span class="sxs-lookup"><span data-stu-id="99aa2-300">**New behavior depends on compatibility level**</span></span>  
  
 <span data-ttu-id="99aa2-301">Las funciones y los operadores siguientes demuestran el nuevo comportamiento descrito anteriormente solo cuando el nivel de compatibilidad es 110 o superior:</span><span class="sxs-lookup"><span data-stu-id="99aa2-301">The following functions and operators demonstrate the new behavior described above only when the compatibility level is 110 or higher:</span></span>  
  
-   <span data-ttu-id="99aa2-302">**FN: contiene**.</span><span class="sxs-lookup"><span data-stu-id="99aa2-302">**fn:contains**.</span></span>  
  
-   <span data-ttu-id="99aa2-303">**FN: concat**.</span><span class="sxs-lookup"><span data-stu-id="99aa2-303">**fn:concat**.</span></span>  
  
-   <span data-ttu-id="99aa2-304">operadores de comparación y cláusula **order by**</span><span class="sxs-lookup"><span data-stu-id="99aa2-304">comparison operators and **order by** clause</span></span>  
  
 <span data-ttu-id="99aa2-305">**El nuevo comportamiento depende del URI de espacio de nombres predeterminado para las funciones**</span><span class="sxs-lookup"><span data-stu-id="99aa2-305">**New behavior depends on default namespace URI for functions**</span></span>  
  
 <span data-ttu-id="99aa2-306">Las siguientes funciones muestran el nuevo comportamiento descrito anteriormente solo cuando el URI de espacio de nombres predeterminado corresponde al espacio de nombres de la recomendación final, es decir, [http://www.w3.org/2005/xpath-functions](http://www.w3.org/2005/xpath-functions) .</span><span class="sxs-lookup"><span data-stu-id="99aa2-306">The following functions demonstrate the new behavior described above only when the default namespace URI corresponds to the namespace in the final recommendation, that is, [http://www.w3.org/2005/xpath-functions](http://www.w3.org/2005/xpath-functions).</span></span> <span data-ttu-id="99aa2-307">Cuando el nivel de compatibilidad es 110 o superior, de forma predeterminada, [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] enlaza el espacio de nombres de función predeterminado a este espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="99aa2-307">When the compatibility level is 110 or higher, then by default [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] binds the default function namespace to this namespace.</span></span> <span data-ttu-id="99aa2-308">No obstante, estas funciones demuestran el nuevo comportamiento cuando se usa este espacio de nombres independientemente del nivel de compatibilidad.</span><span class="sxs-lookup"><span data-stu-id="99aa2-308">However these functions demonstrate the new behavior when this namespace is used regardless of the compatibility level.</span></span>  
  
-   <span data-ttu-id="99aa2-309">**FN: longitud de cadena**</span><span class="sxs-lookup"><span data-stu-id="99aa2-309">**fn:string-length**</span></span>  
  
-   <span data-ttu-id="99aa2-310">**fn:substring**</span><span class="sxs-lookup"><span data-stu-id="99aa2-310">**fn:substring**</span></span>  
  
##  <a name="breaking-changes-in-sql-server-2008sql-server-2008r2"></a><a name="KJKatmai"></a><span data-ttu-id="99aa2-311">Cambios importantes en SQL Server 2008/SQL Server 2008R2</span><span class="sxs-lookup"><span data-stu-id="99aa2-311">Breaking Changes in SQL Server 2008/SQL Server 2008R2</span></span>  
 <span data-ttu-id="99aa2-312">Esta sección contiene los principales cambios presentados en [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="99aa2-312">This section contains the breaking changes introduced in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="99aa2-313">En [!INCLUDE[ssKilimanjaro](../includes/sskilimanjaro-md.md)] no se presentó ningún cambio.</span><span class="sxs-lookup"><span data-stu-id="99aa2-313">No changes were introduced in [!INCLUDE[ssKilimanjaro](../includes/sskilimanjaro-md.md)].</span></span>  
  
### <a name="collations"></a><span data-ttu-id="99aa2-314">Intercalaciones</span><span class="sxs-lookup"><span data-stu-id="99aa2-314">Collations</span></span>  
  
|<span data-ttu-id="99aa2-315">Característica</span><span class="sxs-lookup"><span data-stu-id="99aa2-315">Feature</span></span>|<span data-ttu-id="99aa2-316">Descripción</span><span class="sxs-lookup"><span data-stu-id="99aa2-316">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="99aa2-317">Nuevas intercalaciones</span><span class="sxs-lookup"><span data-stu-id="99aa2-317">New collations</span></span>|[!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] <span data-ttu-id="99aa2-318">presenta nuevas intercalaciones que se ajustan totalmente con las que proporciona Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="99aa2-318">introduces new collations that are in full alignment with the collations provided by Windows Server 2008.</span></span> <span data-ttu-id="99aa2-319">Estas 80 nuevas intercalaciones han mejorado la precisión lingüística, y para distinguirlas se ha usado \*_100 en el nombre de la versión.</span><span class="sxs-lookup"><span data-stu-id="99aa2-319">These 80 new collations have improved linguistic accuracy and are denoted by \*_100 version references.</span></span> <span data-ttu-id="99aa2-320">Si elige una nueva intercalación para el servidor o la base de datos, tenga presente que es posible que los clientes que dispongan de controladores de clientes antiguos no la reconozcan.</span><span class="sxs-lookup"><span data-stu-id="99aa2-320">If you choose a new collation for your server or database, be aware that the collation may not be recognized by clients with older client drivers.</span></span> <span data-ttu-id="99aa2-321">Las intercalaciones no reconocidas pueden provocar errores en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="99aa2-321">Unrecognized collations can cause the application to return errors and fail.</span></span> <span data-ttu-id="99aa2-322">Considere las soluciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="99aa2-322">Consider the following solutions:</span></span><br /><br /> <span data-ttu-id="99aa2-323">Actualice el sistema operativo del cliente para que se actualicen las intercalaciones del sistema subyacentes.</span><span class="sxs-lookup"><span data-stu-id="99aa2-323">Upgrade the client operating system so that the underlying system collations are updated.</span></span><br /><br /> <span data-ttu-id="99aa2-324">Si el cliente tiene instalado software de cliente de base de datos, plantéese la posibilidad de aplicar una actualización de servicio a dicho software.</span><span class="sxs-lookup"><span data-stu-id="99aa2-324">If your client has database client software installed, consider applying a service update to the database client software.</span></span><br /><br /> <span data-ttu-id="99aa2-325">Elija una intercalación existente que se corresponda con una página de códigos del cliente.</span><span class="sxs-lookup"><span data-stu-id="99aa2-325">Choose an existing collation that maps to a code page on the client.</span></span>|  
  
### <a name="common-language-runtime-clr"></a><span data-ttu-id="99aa2-326">Common Language Runtime (CLR)</span><span class="sxs-lookup"><span data-stu-id="99aa2-326">Common Language Runtime (CLR)</span></span>  
  
|<span data-ttu-id="99aa2-327">Característica</span><span class="sxs-lookup"><span data-stu-id="99aa2-327">Feature</span></span>|<span data-ttu-id="99aa2-328">Descripción</span><span class="sxs-lookup"><span data-stu-id="99aa2-328">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="99aa2-329">Ensamblados CLR</span><span class="sxs-lookup"><span data-stu-id="99aa2-329">CLR Assemblies</span></span>|<span data-ttu-id="99aa2-330">Cuando se actualiza una base de datos a [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], automáticamente se instala el ensamblado `Microsoft.SqlServer.Types` para admitir los nuevos tipos de datos.</span><span class="sxs-lookup"><span data-stu-id="99aa2-330">When a database is upgraded to [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], the `Microsoft.SqlServer.Types` assembly to support new data types is automatically installed.</span></span> <span data-ttu-id="99aa2-331">Las reglas del Asesor de actualizaciones detectan los tipos de usuarios o los ensamblados con nombres problemáticos.</span><span class="sxs-lookup"><span data-stu-id="99aa2-331">Upgrade Advisor rules detect any user type or assemblies with conflicting names.</span></span> <span data-ttu-id="99aa2-332">El Asesor de actualizaciones aconsejará el cambio de nombre de los ensamblados problemáticos, y en cuanto a los tipos problemáticos, aconsejará el cambio de nombre o el uso de nombres que consten de dos partes en el código para hacer referencia al tipo de usuario existente.</span><span class="sxs-lookup"><span data-stu-id="99aa2-332">The Upgrade Advisor will advise renaming of any conflicting assembly, and either renaming any conflicting type, or using two-part names in the code to refer to that preexisting user type.</span></span><br /><br /> <span data-ttu-id="99aa2-333">Si una actualización de la base de datos detecta un ensamblado del usuario con un nombre problemático, automáticamente cambiará el nombre de dicho ensamblado y colocará la base de datos en modo de sospecha.</span><span class="sxs-lookup"><span data-stu-id="99aa2-333">If a database upgrade detects a user assembly with a conflicting name, it will automatically rename that assembly and put the database into suspect mode.</span></span><br /><br /> <span data-ttu-id="99aa2-334">Si durante la actualización se encuentra un tipo de usuario con un nombre problemático, no se llevará a cabo ningún procedimiento especial.</span><span class="sxs-lookup"><span data-stu-id="99aa2-334">If a user type with conflicting name exists during the upgrade, no special steps are taken.</span></span> <span data-ttu-id="99aa2-335">Después de la actualización, existirán tanto el tipo de usuario anterior como el nuevo tipo de sistema.</span><span class="sxs-lookup"><span data-stu-id="99aa2-335">After the upgrade, both the old user type, and the new system type, will exist.</span></span> <span data-ttu-id="99aa2-336">El tipo de usuario solo estará disponible a través de nombres de dos partes.</span><span class="sxs-lookup"><span data-stu-id="99aa2-336">The user type will be available only through two-part names.</span></span>|  
|<span data-ttu-id="99aa2-337">Ensamblados CLR</span><span class="sxs-lookup"><span data-stu-id="99aa2-337">CLR Assemblies</span></span>|[!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] <span data-ttu-id="99aa2-338">instala .NET Framework 3.5 SP1, que se encarga de actualizar las bibliotecas de la memoria caché de ensamblados global (GAC).</span><span class="sxs-lookup"><span data-stu-id="99aa2-338">installs .NET Framework 3.5 SP1, which updates libraries in the Global Assembly Cache (GAC).</span></span> <span data-ttu-id="99aa2-339">Si tiene bibliotecas no admitidas registradas en una base de datos de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], es posible que la aplicación de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] deje de funcionar después de realizar la actualización a [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="99aa2-339">If you have unsupported libraries registered in a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database, your [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] application may stop working after upgrading to [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="99aa2-340">El motivo es que cuando se da servicio o se actualizan bibliotecas de la GAC, no se actualizan los ensamblados de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="99aa2-340">This is because servicing or upgrading libraries in the GAC does not update assemblies inside [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="99aa2-341">Si un ensamblado existe en una base de datos de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] y en la GAC, las dos copias del ensamblado deben coincidir exactamente.</span><span class="sxs-lookup"><span data-stu-id="99aa2-341">If an assembly exists both in a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database and in the GAC, the two copies of the assembly must exactly match.</span></span> <span data-ttu-id="99aa2-342">Si no coinciden, se producirá un error cuando la integración CLR de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] use el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="99aa2-342">If they do not match, an error will occur when the assembly is used by [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] CLR integration.</span></span> <span data-ttu-id="99aa2-343">Para obtener más información, consulte [supported .NET Framework Libraries](../relational-databases/clr-integration/database-objects/supported-net-framework-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="99aa2-343">For more information, see [Supported .NET Framework Libraries](../relational-databases/clr-integration/database-objects/supported-net-framework-libraries.md).</span></span><br /><br /> <span data-ttu-id="99aa2-344">Después de actualizar la base de datos, dé servicio o actualice la copia del ensamblado situada en las bases de datos de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] con la instrucción ALTER ASSEMBLY.</span><span class="sxs-lookup"><span data-stu-id="99aa2-344">After upgrading your database, service or upgrade the copy of the assembly inside your [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] databases with the ALTER ASSEMBLY statement.</span></span> <span data-ttu-id="99aa2-345">Para obtener más información, vea el [artículo 949080 de Knowledge Base](https://go.microsoft.com/fwlink/?LinkId=154563).</span><span class="sxs-lookup"><span data-stu-id="99aa2-345">For more information, see [Knowledge Base article 949080](https://go.microsoft.com/fwlink/?LinkId=154563).</span></span><br /><br /> <span data-ttu-id="99aa2-346">Para saber si está usando una biblioteca de .NET Framework no admitida en la aplicación, ejecute la consulta siguiente en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="99aa2-346">To detect whether you are using any unsupported .NET framework library in your application, run the following query in your database.</span></span><br /><br /> `SELECT name FROM sys.assemblies WHERE clr_name LIKE '%publickeytoken=b03f5f7f11d50a3a,%';`|  
|<span data-ttu-id="99aa2-347">Rutinas de CLR</span><span class="sxs-lookup"><span data-stu-id="99aa2-347">CLR Routines</span></span>|<span data-ttu-id="99aa2-348">El uso de la suplantación en las funciones CLR definidas por el usuario, los agregados definidos por el usuario o los tipos definidos por el usuario (UDT) puede provocar el error 6522 en la aplicación después de la actualización a [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="99aa2-348">Using impersonation inside CLR user-defined functions, user-defined aggregates, or user-defined types (UDTs) may cause your application to fail with error 6522 after upgrading to [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="99aa2-349">La actualización se realiza correctamente en los escenarios de [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] siguientes, pero no así en [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="99aa2-349">The following scenarios succeed in [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] but fail in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="99aa2-350">Se proporcionan soluciones para cada escenario.</span><span class="sxs-lookup"><span data-stu-id="99aa2-350">Resolutions are provided for each scenario.</span></span><br /><br /> <span data-ttu-id="99aa2-351">Una función definida por el usuario CLR, un agregado definido por el usuario o un método UDT que utiliza la suplantación tiene un parámetro de tipo `nvarchar(max)` , `varchar(max)` , `varbinary(max)` ,, `ntext` `text` , `image` o un UDT grande, y no tiene el atributo **DataAccessKind. Read** en el método.</span><span class="sxs-lookup"><span data-stu-id="99aa2-351">A CLR user-defined function, user-defined aggregate, or UDT method that uses impersonation has a parameter of type `nvarchar(max)`, `varchar(max)`, `varbinary(max)`, `ntext`, `text`, `image`, or a large UDT, and does not have the **DataAccessKind.Read** attribute on the method.</span></span> <span data-ttu-id="99aa2-352">Para resolver este problema, agregue el atributo **DataAccessKind. Read** en el método, vuelva a compilar el ensamblado e implemente de nuevo la rutina y el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="99aa2-352">To resolve this issue, add the **DataAccessKind.Read** attribute on the method, recompile the assembly, and re-deploy the routine and the assembly.</span></span><br /><br /> <span data-ttu-id="99aa2-353">Función con valores de tabla de CLR que tiene un método **init** que realiza la suplantación.</span><span class="sxs-lookup"><span data-stu-id="99aa2-353">A CLR table-valued function that has an **Init** method that performs impersonation.</span></span> <span data-ttu-id="99aa2-354">Para resolver este problema, agregue el atributo **DataAccessKind. Read** en el método, vuelva a compilar el ensamblado e implemente de nuevo la rutina y el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="99aa2-354">To resolve this issue add the **DataAccessKind.Read** attribute on the method, recompile the assembly, and re-deploy the routine and the assembly.</span></span><br /><br /> <span data-ttu-id="99aa2-355">Función con valores de tabla de CLR que tiene un método **FillRow** que realiza la suplantación.</span><span class="sxs-lookup"><span data-stu-id="99aa2-355">A CLR table-valued function that has a **FillRow** method that performs impersonation.</span></span> <span data-ttu-id="99aa2-356">Para resolver este problema, quite la suplantación del método **FillRow** .</span><span class="sxs-lookup"><span data-stu-id="99aa2-356">To resolve this issue, remove impersonation from the **FillRow** method.</span></span> <span data-ttu-id="99aa2-357">No tener acceso a recursos externos mediante el método **FillRow** .</span><span class="sxs-lookup"><span data-stu-id="99aa2-357">Do not access external resources by using the **FillRow** method.</span></span> <span data-ttu-id="99aa2-358">En su lugar, obtenga acceso a los recursos externos desde el método **init** .</span><span class="sxs-lookup"><span data-stu-id="99aa2-358">Instead, access external resources from the **Init** method.</span></span>|  
  
### <a name="dynamic-management-views"></a><span data-ttu-id="99aa2-359">Vistas de administración dinámica</span><span class="sxs-lookup"><span data-stu-id="99aa2-359">Dynamic Management Views</span></span>  
  
|<span data-ttu-id="99aa2-360">Ver</span><span class="sxs-lookup"><span data-stu-id="99aa2-360">View</span></span>|<span data-ttu-id="99aa2-361">Descripción</span><span class="sxs-lookup"><span data-stu-id="99aa2-361">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="99aa2-362">sys.dm_os_sys_info</span><span class="sxs-lookup"><span data-stu-id="99aa2-362">sys.dm_os_sys_info</span></span>|<span data-ttu-id="99aa2-363">Se quitan las columnas sqlserver_start_time_cpu_ticks y cpu_ticks_in_ms.</span><span class="sxs-lookup"><span data-stu-id="99aa2-363">Removed the cpu_ticks_in_ms and sqlserver_start_time_cpu_ticks columns.</span></span>|  
|<span data-ttu-id="99aa2-364">Sys. dm_exec_query_resource_semaphoressys. dm_exec_query_memory_grants</span><span class="sxs-lookup"><span data-stu-id="99aa2-364">sys.dm_exec_query_resource_semaphoressys.dm_exec_query_memory_grants</span></span>|<span data-ttu-id="99aa2-365">La columna resource_semaphore_id no es un identificador único en [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="99aa2-365">The resource_semaphore_id column is not a unique ID in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="99aa2-366">Este cambio puede afectar a la solución de problemas de ejecución de consultas.</span><span class="sxs-lookup"><span data-stu-id="99aa2-366">This change can affect troubleshooting query execution.</span></span> <span data-ttu-id="99aa2-367">Para obtener más información, vea [Sys. dm_exec_query_resource_semaphores &#40;&#41;de Transact-SQL ](/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-query-resource-semaphores-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="99aa2-367">For more information, see [sys.dm_exec_query_resource_semaphores &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-query-resource-semaphores-transact-sql).</span></span>|  
  
### <a name="errors-and-events"></a><span data-ttu-id="99aa2-368">Errores y eventos</span><span class="sxs-lookup"><span data-stu-id="99aa2-368">Errors and Events</span></span>  
  
|<span data-ttu-id="99aa2-369">Característica</span><span class="sxs-lookup"><span data-stu-id="99aa2-369">Feature</span></span>|<span data-ttu-id="99aa2-370">Descripción</span><span class="sxs-lookup"><span data-stu-id="99aa2-370">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="99aa2-371">Errores de inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="99aa2-371">Login errors</span></span>|<span data-ttu-id="99aa2-372">En [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], se devuelve el error 18452 cuando se usa un inicio de sesión de SQL para conectar con un servidor que está configurado para usar únicamente la autenticación de Windows.</span><span class="sxs-lookup"><span data-stu-id="99aa2-372">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], error 18452 is returned when a SQL login is used to connect to a server configured to use only Windows Authentication.</span></span> <span data-ttu-id="99aa2-373">En [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], se devuelve el error 18456 en su lugar.</span><span class="sxs-lookup"><span data-stu-id="99aa2-373">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], error 18456 is returned instead.</span></span>|  
  
### <a name="showplan"></a><span data-ttu-id="99aa2-374">Showplan</span><span class="sxs-lookup"><span data-stu-id="99aa2-374">Showplan</span></span>  
  
|<span data-ttu-id="99aa2-375">Característica</span><span class="sxs-lookup"><span data-stu-id="99aa2-375">Feature</span></span>|<span data-ttu-id="99aa2-376">Descripción</span><span class="sxs-lookup"><span data-stu-id="99aa2-376">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="99aa2-377">Esquema XML del plan de presentación</span><span class="sxs-lookup"><span data-stu-id="99aa2-377">Showplan XML schema</span></span>|<span data-ttu-id="99aa2-378">Se agrega un nuevo elemento **SeekPredicateNew** al esquema XML SHOWPLAN y la secuencia XSD envolvente (**SqlPredicatesType**) se convierte en un **\<xsd:choice>** elemento.</span><span class="sxs-lookup"><span data-stu-id="99aa2-378">A new **SeekPredicateNew** element is added to the Showplan XML schema, and the enclosing xsd sequence (**SqlPredicatesType**) is converted into an **\<xsd:choice>** item.</span></span> <span data-ttu-id="99aa2-379">En lugar de uno o más elementos **SeekPredicate** , ahora pueden aparecer uno o varios elementos **SEEKPREDICATENEW** en SHOWPLAN XML.</span><span class="sxs-lookup"><span data-stu-id="99aa2-379">Instead of one or more **SeekPredicate** elements, one or more **SeekPredicateNew** elements may now appear in the Showplan XML.</span></span> <span data-ttu-id="99aa2-380">Estos dos elementos se excluyen mutuamente.</span><span class="sxs-lookup"><span data-stu-id="99aa2-380">The two elements are mutually exclusive.</span></span> <span data-ttu-id="99aa2-381">**SeekPredicate** se mantiene en el esquema XML del plan de presentación para mantener la compatibilidad con versiones anteriores; sin embargo, los planes de consulta creados en [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] pueden contener el elemento **SeekPredicateNew** .</span><span class="sxs-lookup"><span data-stu-id="99aa2-381">**SeekPredicate** is maintained in the Showplan XML schema for backwards compatibility; however, query plans created in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] may contain the **SeekPredicateNew** element.</span></span> <span data-ttu-id="99aa2-382">Las aplicaciones que esperan recuperar solo el elemento secundario **SeekPredicate** del nodo ShowPlanXML/BatchSequence/batch/statements/StmtSimple/QueryPlan/RelOp/IndexScan/SeekPredicates pueden producir un error si el elemento **SeekPredicate** no existe.</span><span class="sxs-lookup"><span data-stu-id="99aa2-382">Applications that expect to retrieve only the **SeekPredicate** child from the node ShowPlanXML/BatchSequence/Batch/Statements/StmtSimple/QueryPlan/RelOp/IndexScan/SeekPredicates may fail if the **SeekPredicate** element does not exist.</span></span> <span data-ttu-id="99aa2-383">Vuelva a escribir la aplicación para esperar el elemento **SeekPredicate** o **SeekPredicateNew** de este nodo.</span><span class="sxs-lookup"><span data-stu-id="99aa2-383">Rewrite the application to expect either the **SeekPredicate** or **SeekPredicateNew** element in this node.</span></span> <span data-ttu-id="99aa2-384">Para obtener más información, consulte el elemento .</span><span class="sxs-lookup"><span data-stu-id="99aa2-384">For more information, see .</span></span>|  
|<span data-ttu-id="99aa2-385">Esquema XML del plan de presentación</span><span class="sxs-lookup"><span data-stu-id="99aa2-385">Showplan XML schema</span></span>|<span data-ttu-id="99aa2-386">Se agrega un nuevo atributo **IndexKind** al tipo complejo **objecttype** en el esquema XML del plan de presentación.</span><span class="sxs-lookup"><span data-stu-id="99aa2-386">A new **IndexKind** attribute is added to the **ObjectType** complex type in the Showplan XML schema.</span></span> <span data-ttu-id="99aa2-387">En las aplicaciones que validen de forma estricta los planes de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] con el esquema de [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] se producirá un error.</span><span class="sxs-lookup"><span data-stu-id="99aa2-387">Applications that strictly validate [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] plans against the [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] schema will fail.</span></span>|  
  
### <a name="transact-sql"></a><span data-ttu-id="99aa2-388">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="99aa2-388">Transact-SQL</span></span>  
  
|<span data-ttu-id="99aa2-389">Característica</span><span class="sxs-lookup"><span data-stu-id="99aa2-389">Feature</span></span>|<span data-ttu-id="99aa2-390">Descripción</span><span class="sxs-lookup"><span data-stu-id="99aa2-390">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="99aa2-391">Evento ALTER_AUTHORIZATION_DATABASE DDL</span><span class="sxs-lookup"><span data-stu-id="99aa2-391">ALTER_AUTHORIZATION_DATABASE DDL event</span></span>|<span data-ttu-id="99aa2-392">En [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] , cuando se activa el ALTER_AUTHORIZATION_DATABASE de eventos DDL, se devuelve el valor ' Object ' en el elemento **objecttype** del XML EVENTDATA para este evento cuando el tipo de entidad del elemento protegible en la operación del lenguaje de definición de datos (DDL) es un objeto.</span><span class="sxs-lookup"><span data-stu-id="99aa2-392">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], when the DDL event ALTER_AUTHORIZATION_DATABASE fires, the value 'object' is returned in the **ObjectType** element of the EVENTDATA xml for this event when the entity type of the securable in the data definition language (DDL) operation is an object.</span></span> <span data-ttu-id="99aa2-393">En [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], se devuelve el tipo real (por ejemplo, 'table' o 'function').</span><span class="sxs-lookup"><span data-stu-id="99aa2-393">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], the actual type (for example, 'table', or 'function') is returned.</span></span>|  
|<span data-ttu-id="99aa2-394">CONVERT</span><span class="sxs-lookup"><span data-stu-id="99aa2-394">CONVERT</span></span>|<span data-ttu-id="99aa2-395">Si se pasa un estilo no válido a la función CONVERT, se devuelve un error cuando el tipo de conversión es de binario a carácter o de carácter a binario.</span><span class="sxs-lookup"><span data-stu-id="99aa2-395">If an invalid style is passed to the CONVERT function, an error is returned when the type of conversion is binary to character or character to binary.</span></span> <span data-ttu-id="99aa2-396">En las versiones anteriores de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], se establece un estilo no válido como estilo predeterminado para las conversiones de binario a carácter y de carácter a binario.</span><span class="sxs-lookup"><span data-stu-id="99aa2-396">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], the invalid style is set to the default style for binary-to-character and character-to-binary conversions.</span></span>|  
|<span data-ttu-id="99aa2-397">GRANT/DENY/REVOKE EXECUTE en ensamblados</span><span class="sxs-lookup"><span data-stu-id="99aa2-397">GRANT/DENY/REVOKE EXECUTE on assemblies</span></span>|<span data-ttu-id="99aa2-398">No se puede conceder, denegar ni revocar el permiso EXECUTE a los ensamblados.</span><span class="sxs-lookup"><span data-stu-id="99aa2-398">EXECUTE permission cannot be granted, denied, or revoked to assemblies.</span></span> <span data-ttu-id="99aa2-399">Este permiso no tiene ningún efecto y ahora produce un error.</span><span class="sxs-lookup"><span data-stu-id="99aa2-399">This permission has no affect and now causes an error.</span></span> <span data-ttu-id="99aa2-400">En su lugar, conceda, deniegue o revoque el permiso EXECUTE para los procedimientos almacenados o para las funciones que hacen referencia al método de ensamblado.</span><span class="sxs-lookup"><span data-stu-id="99aa2-400">Grant, deny, or revoke EXECUTE permission on the stored procedures or functions that reference the assembly method instead.</span></span>|  
|<span data-ttu-id="99aa2-401">Permisos GRANT/DENY/REVOKE para los tipos del sistema</span><span class="sxs-lookup"><span data-stu-id="99aa2-401">GRANT/DENY/REVOKE permissions on system types</span></span>|<span data-ttu-id="99aa2-402">No se pueden conceder, denegar ni revocar permisos a los tipos del sistema.</span><span class="sxs-lookup"><span data-stu-id="99aa2-402">Permissions cannot be granted, denied, or revoked to system types.</span></span> <span data-ttu-id="99aa2-403">En versiones anteriores de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], estas instrucciones se ejecutaban correctamente, pero no tenían ningún efecto.</span><span class="sxs-lookup"><span data-stu-id="99aa2-403">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], these statements succeed but have no effect.</span></span> <span data-ttu-id="99aa2-404">En [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], se devuelve un error.</span><span class="sxs-lookup"><span data-stu-id="99aa2-404">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], an error is returned.</span></span>|  
|<span data-ttu-id="99aa2-405">GROUP BY</span><span class="sxs-lookup"><span data-stu-id="99aa2-405">GROUP BY</span></span>|<span data-ttu-id="99aa2-406">La cláusula GROUP BY no puede contener ninguna subconsulta en una expresión usada para la lista de agrupación.</span><span class="sxs-lookup"><span data-stu-id="99aa2-406">The GROUP BY clause cannot contain a subquery in an expression that is used for the group by list.</span></span> <span data-ttu-id="99aa2-407">En las versiones anteriores de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], se permitía.</span><span class="sxs-lookup"><span data-stu-id="99aa2-407">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], this was allowed.</span></span> <span data-ttu-id="99aa2-408">En [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], se devuelve el error 144.</span><span class="sxs-lookup"><span data-stu-id="99aa2-408">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], error 144 is returned.</span></span><br /><br /> <span data-ttu-id="99aa2-409">Por ejemplo, el código siguiente se ejecutará correctamente en SQL Server 2005 y producirá un error en SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="99aa2-409">For example, the following code will succeed in SQL Server 2005 and fail in SQL Server 2008.</span></span><br /><br /> `DECLARE @Test TABLE(a int NOT NULL);` <br /> `INSERT INTO @Test SELECT 1 union ALL SELECT 2;` <br /> `SELECT COUNT(*)` <br /> `FROM @Test` <br /> `GROUP BY CASE WHEN a IN (SELECT t.a FROM @Test AS t)` <br /> `THEN 1 ELSE 0` <br /> `END;`|  
|<span data-ttu-id="99aa2-410">Cláusula OUTPUT</span><span class="sxs-lookup"><span data-stu-id="99aa2-410">OUTPUT clause</span></span>|<span data-ttu-id="99aa2-411">Para evitar un comportamiento no determinista, la cláusula OUTPUT no puede hacer referencia a una columna desde una vista o una función insertada con valores de tabla si dicha tabla se ha definido mediante uno de los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="99aa2-411">To prevent nondeterministic behavior, the OUTPUT clause cannot reference a column from a view or inline table-valued function when that column is defined by one of the following methods:</span></span><br /><br /> <span data-ttu-id="99aa2-412">Una subconsulta.</span><span class="sxs-lookup"><span data-stu-id="99aa2-412">A subquery.</span></span><br /><br /> <span data-ttu-id="99aa2-413">Una función definida por el usuario que obtiene acceso a datos de usuario o del sistema, o que se asume que obtiene dicho acceso.</span><span class="sxs-lookup"><span data-stu-id="99aa2-413">A user-defined function that performs user- or system-data access, or is assumed to perform such access.</span></span><br /><br /> <span data-ttu-id="99aa2-414">Una columna calculada que contiene en su definición una función definida por el usuario que obtiene acceso a datos de usuario o del sistema.</span><span class="sxs-lookup"><span data-stu-id="99aa2-414">A computed column that contains in its definition a user-defined function that performs user- or system-data access.</span></span><br /><br /> <br /><br /> <span data-ttu-id="99aa2-415">Cuando [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] detecta este tipo de columna en la cláusula OUTPUT, se produce el error 4186.</span><span class="sxs-lookup"><span data-stu-id="99aa2-415">When [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] detects such a column in the OUTPUT clause, error 4186 is raised.</span></span> <span data-ttu-id="99aa2-416">Para obtener más información, vea [MSSQLSERVER_4186](../relational-databases/errors-events/mssqlserver-4186-database-engine-error.md).</span><span class="sxs-lookup"><span data-stu-id="99aa2-416">For more information, see [MSSQLSERVER_4186](../relational-databases/errors-events/mssqlserver-4186-database-engine-error.md).</span></span>|  
|<span data-ttu-id="99aa2-417">Cláusula OUTPUT INTO</span><span class="sxs-lookup"><span data-stu-id="99aa2-417">OUTPUT INTO clause</span></span>|<span data-ttu-id="99aa2-418">La tabla de destino de la cláusula OUTPUT INTO no puede tener desencadenadores habilitados.</span><span class="sxs-lookup"><span data-stu-id="99aa2-418">The target table of the OUTPUT INTO clause cannot have any enabled triggers.</span></span>|  
|<span data-ttu-id="99aa2-419">Opción precompute rank de nivel de servidor</span><span class="sxs-lookup"><span data-stu-id="99aa2-419">precompute rank server-level option</span></span>|<span data-ttu-id="99aa2-420">Esta opción no se admite en [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="99aa2-420">This option is not supported in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="99aa2-421">Modifique las aplicaciones que actualmente utilizan esta característica lo antes posible.</span><span class="sxs-lookup"><span data-stu-id="99aa2-421">Modify applications that currently use this feature as soon as possible.</span></span>|  
|<span data-ttu-id="99aa2-422">READPAST, sugerencia de tabla</span><span class="sxs-lookup"><span data-stu-id="99aa2-422">READPAST table hint</span></span>|<span data-ttu-id="99aa2-423">No puede especificar la sugerencia de READPAST con aislamiento de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="99aa2-423">You cannot specify the READPAST hint under Snapshot Isolation.</span></span><br /><br /> <span data-ttu-id="99aa2-424">La sugerencia de READPAST se omite cuando se activa la opción de base de datos READ_COMMITED_SNAPSHOT o ALLOW_SNAPSHOT_ISOLATION.</span><span class="sxs-lookup"><span data-stu-id="99aa2-424">The READPAST hint is ignored when either the READ_COMMITED_SNAPSHOT or ALLOW_SNAPSHOT_ISOLATION database option is set to ON.</span></span> <span data-ttu-id="99aa2-425">Sin embargo, si combina la sugerencia de READPAST con READCOMMITTEDLOCK, el comportamiento de READPAST será igual que con la sugerencia de READCOMMITTED de bloqueo.</span><span class="sxs-lookup"><span data-stu-id="99aa2-425">However, if you combine the READPAST hint with READCOMMITTEDLOCK, the READPAST behavior is same as with the blocking READCOMMITTED hint.</span></span>|  
|<span data-ttu-id="99aa2-426">sp_helpuser</span><span class="sxs-lookup"><span data-stu-id="99aa2-426">sp_helpuser</span></span>|<span data-ttu-id="99aa2-427">Los nombres de columna siguientes que se devuelven en el conjunto de resultados del procedimiento almacenado sp_helpuser han cambiado:</span><span class="sxs-lookup"><span data-stu-id="99aa2-427">The following column names that are returned in the result set of the sp_helpuser stored procedure have changed:</span></span><br /><br /> <span data-ttu-id="99aa2-428">Nombre_grupo es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-428">GroupName is now:</span></span><br />                            <span data-ttu-id="99aa2-429">RoleName</span><span class="sxs-lookup"><span data-stu-id="99aa2-429">RoleName</span></span><br /><br /> <span data-ttu-id="99aa2-430">Group_name es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-430">Group_name is now:</span></span><br />                            <span data-ttu-id="99aa2-431">Role_name</span><span class="sxs-lookup"><span data-stu-id="99aa2-431">Role_name</span></span><br /><br /> <span data-ttu-id="99aa2-432">Group_id es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-432">Group_id is now:</span></span><br />                            <span data-ttu-id="99aa2-433">Role_id</span><span class="sxs-lookup"><span data-stu-id="99aa2-433">Role_id</span></span><br /><br /> <span data-ttu-id="99aa2-434">Users_in_group es ahora:</span><span class="sxs-lookup"><span data-stu-id="99aa2-434">Users_in_group is now:</span></span><br />                            <span data-ttu-id="99aa2-435">Users_in_role</span><span class="sxs-lookup"><span data-stu-id="99aa2-435">Users_in_role</span></span>|  
|<span data-ttu-id="99aa2-436">Cifrado de datos transparente</span><span class="sxs-lookup"><span data-stu-id="99aa2-436">Transparent Data Encryption</span></span>|<span data-ttu-id="99aa2-437">El cifrado de datos transparente (TDE) se realiza en el nivel de E/S: la estructura de la página no está cifrada en la memoria y se cifra solo cuando la página se escribe en el disco.</span><span class="sxs-lookup"><span data-stu-id="99aa2-437">Transparent data encryption (TDE) is performed at the I/O level: the page structure is unencrypted in memory and is encrypted only when the page is written to disk.</span></span> <span data-ttu-id="99aa2-438">Se cifran tanto los archivos de base de datos como los archivos de registro.</span><span class="sxs-lookup"><span data-stu-id="99aa2-438">Both the database files and log files are encrypted.</span></span> <span data-ttu-id="99aa2-439">En las aplicaciones de terceros que omitan el mecanismo habitual de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] para tener acceso a las páginas (por ejemplo, examinando los datos o los archivos de registro directamente), se producirá un error si una base de datos emplea TDE debido a que los datos están cifrados en los archivos.</span><span class="sxs-lookup"><span data-stu-id="99aa2-439">Third-party applications that bypass the regular [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] mechanism for accessing pages (for example, by scanning the data or log files directly), will fail when a database uses TDE because the data is encrypted in the files.</span></span> <span data-ttu-id="99aa2-440">Estas aplicaciones pueden aprovechar la API criptográfica de Windows para desarrollar una solución que permita descifrar los datos desde fuera de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="99aa2-440">Such applications can leverage the Window Cryptographic API to develop a solution for decrypting the data outside of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>|  
  
### <a name="xquery"></a><span data-ttu-id="99aa2-441">XQuery</span><span class="sxs-lookup"><span data-stu-id="99aa2-441">XQuery</span></span>  
  
|<span data-ttu-id="99aa2-442">Característica</span><span class="sxs-lookup"><span data-stu-id="99aa2-442">Feature</span></span>|<span data-ttu-id="99aa2-443">Descripción</span><span class="sxs-lookup"><span data-stu-id="99aa2-443">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="99aa2-444">Compatibilidad con la fecha y la hora</span><span class="sxs-lookup"><span data-stu-id="99aa2-444">Datetime support</span></span>|<span data-ttu-id="99aa2-445">En [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] , los tipos de datos `xs:time` , `xs:date` y `xs:dateTime` no tienen compatibilidad con zona horaria.</span><span class="sxs-lookup"><span data-stu-id="99aa2-445">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], the data types `xs:time`, `xs:date`, and `xs:dateTime` do not have timezone support.</span></span> <span data-ttu-id="99aa2-446">Los datos de la zona horaria se asignan a la zona horaria UTC.</span><span class="sxs-lookup"><span data-stu-id="99aa2-446">Timezone data is mapped to the UTC timezone.</span></span> [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] <span data-ttu-id="99aa2-447">tiene el comportamiento de compatibilidad estándar, lo que se traduce en los cambios siguientes:</span><span class="sxs-lookup"><span data-stu-id="99aa2-447">, provides standard conformant behavior, resulting in the following changes:</span></span><br /><br /> <span data-ttu-id="99aa2-448">Se validan los valores sin zona horaria.</span><span class="sxs-lookup"><span data-stu-id="99aa2-448">Values without timezone are validated.</span></span><br /><br /> <span data-ttu-id="99aa2-449">Se conserva la zona horaria proporcionada o la ausencia de zona horaria.</span><span class="sxs-lookup"><span data-stu-id="99aa2-449">The provided timezone or the absence of a timezone is preserved.</span></span><br /><br /> <span data-ttu-id="99aa2-450">Se modifica la representación del almacenamiento interno.</span><span class="sxs-lookup"><span data-stu-id="99aa2-450">The internal storage representation is modified.</span></span><br /><br /> <span data-ttu-id="99aa2-451">Se aumenta la resolución de los valores almacenados.</span><span class="sxs-lookup"><span data-stu-id="99aa2-451">Resolution of stored values is increased.</span></span><br /><br /> <span data-ttu-id="99aa2-452">No se permiten los años negativos.</span><span class="sxs-lookup"><span data-stu-id="99aa2-452">Negative years are disallowed.</span></span><br /><br /> <br /><br /> <span data-ttu-id="99aa2-453">Nota: modifique las aplicaciones y las expresiones XQuery para tener en cuenta los nuevos valores de tipo.</span><span class="sxs-lookup"><span data-stu-id="99aa2-453">Note: Modify applications and XQuery expressions to account for the new type values.</span></span>|  
|<span data-ttu-id="99aa2-454">Expresiones de XQuery y XPath</span><span class="sxs-lookup"><span data-stu-id="99aa2-454">XQuery and Xpath expressions</span></span>|<span data-ttu-id="99aa2-455">En [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] , se permiten los pasos de una expresión XQuery o XPath que comienzan con un signo de dos puntos (': ').</span><span class="sxs-lookup"><span data-stu-id="99aa2-455">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], steps in an XQuery or XPath expression that begin with a colon (':') are allowed.</span></span> <span data-ttu-id="99aa2-456">Por ejemplo, la instrucción siguiente contiene una prueba del nombre (`CTR02)` dentro de la expresión de ruta de acceso que comienza con dos puntos.</span><span class="sxs-lookup"><span data-stu-id="99aa2-456">For example, the following statement contains a name test (`CTR02)` within the path expression that begins with a colon.</span></span><br /><br /> `SELECT FileContext.query('for n$ in //CTR return <C>{data )(n$/:CTR02)} </C>) AS Files FROM dbo.MyTable;`<br /><br /> <span data-ttu-id="99aa2-457">En [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], este uso se rechaza porque no cumple los estándares de XML.</span><span class="sxs-lookup"><span data-stu-id="99aa2-457">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], this usage is disallowed because it does not conform to XML standards.</span></span> <span data-ttu-id="99aa2-458">Se devuelve el error 9341.</span><span class="sxs-lookup"><span data-stu-id="99aa2-458">Error 9341 is returned.</span></span> <span data-ttu-id="99aa2-459">Quite el signo de dos puntos inicial o especifique un prefijo para la prueba del nombre, por ejemplo (n$/p1:CTR02) o (n$/CTR02).</span><span class="sxs-lookup"><span data-stu-id="99aa2-459">Remove the leading colon or specify a prefix for the name test--for example, (n$/CTR02) or (n$/p1:CTR02).</span></span>|  
  
### <a name="connecting"></a><span data-ttu-id="99aa2-460">Connecting</span><span class="sxs-lookup"><span data-stu-id="99aa2-460">Connecting</span></span>  
  
|<span data-ttu-id="99aa2-461">Característica</span><span class="sxs-lookup"><span data-stu-id="99aa2-461">Feature</span></span>|<span data-ttu-id="99aa2-462">Descripción</span><span class="sxs-lookup"><span data-stu-id="99aa2-462">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="99aa2-463">Conectarse desde [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client mediante SSL</span><span class="sxs-lookup"><span data-stu-id="99aa2-463">Connecting from [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client using SSL</span></span>|<span data-ttu-id="99aa2-464">Al conectarse con [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client, las aplicaciones que usan "SERVER=shortname; FORCE ENCRYPTION=true" con un certificado cuyos asuntos especifiquen nombres de dominio completos (FQDN) se han conectado antes debido a una validación poco minuciosa.</span><span class="sxs-lookup"><span data-stu-id="99aa2-464">When connecting with [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client, applications that use "SERVER=shortname; FORCE ENCRYPTION=true" with certificate whose Subjects specify Fully Qualified Domain Names (FQDN's) have connected in the past due to relaxed validation.</span></span> <span data-ttu-id="99aa2-465">SQL Server 2008 R2 mejora la seguridad aplicando asuntos de FQDN a los certificados.</span><span class="sxs-lookup"><span data-stu-id="99aa2-465">SQL Server 2008 R2 enhances security by enforcing FQDN subjects for certificates.</span></span> <span data-ttu-id="99aa2-466">Las aplicaciones que se basan en una validación poco minuciosa deben tomar una de las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="99aa2-466">Applications that rely upon relaxed validation must take one of the following actions:</span></span><br /><br /> <span data-ttu-id="99aa2-467">Usar el FQDN en la cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="99aa2-467">Use the FQDN in the connection string.</span></span><br /><br /> <span data-ttu-id="99aa2-468">: Esta opción no requiere volver a compilar la aplicación si la palabra clave SERVER de la cadena de conexión está configurada fuera de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="99aa2-468">-This option does not require recompiling the application if the SERVER keyword of the connection string is configured outside the application.</span></span><br /><br /> <span data-ttu-id="99aa2-469">: Esta opción no funciona para las aplicaciones que tienen codificadas sus cadenas de conexión.</span><span class="sxs-lookup"><span data-stu-id="99aa2-469">-This option does not work for applications that have their connection strings hardcoded.</span></span><br /><br /> <span data-ttu-id="99aa2-470">: Esta opción no funciona para las aplicaciones que utilizan la creación de reflejo de la base de datos, ya que el servidor reflejado responde con un nombre simple.</span><span class="sxs-lookup"><span data-stu-id="99aa2-470">-This option does not work for applications that use Database Mirroring since the mirrored server replies with a simple name.</span></span>|  
||<span data-ttu-id="99aa2-471">Agregue un alias para asignar shortname al FQDN.</span><span class="sxs-lookup"><span data-stu-id="99aa2-471">Add an alias for the shortname to map to the FQDN.</span></span><br /><br /> <span data-ttu-id="99aa2-472">: Esta opción funciona incluso en el caso de las aplicaciones que tienen codificadas sus cadenas de conexión.</span><span class="sxs-lookup"><span data-stu-id="99aa2-472">-This option works even for applications that have their connection strings hardcoded.</span></span><br /><br /> <span data-ttu-id="99aa2-473">: Esta opción no funciona para las aplicaciones que usan la creación de reflejo de la base de datos, ya que los proveedores no buscan alias para los nombres de asociados de conmutación por error recibidos.</span><span class="sxs-lookup"><span data-stu-id="99aa2-473">-This option does not work for applications that use Database Mirroring since the providers don't look up aliases for received failover partner names.</span></span>|  
||<span data-ttu-id="99aa2-474">Haga que se emita un certificado para shortname.</span><span class="sxs-lookup"><span data-stu-id="99aa2-474">Have a certificate issued for shortname.</span></span><br /><br /> <span data-ttu-id="99aa2-475">: Esta opción funciona para todas las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="99aa2-475">-This option works for all applications.</span></span>|  

## <a name="breaking-changes-in-sql-server-2005"></a><a name="Yukon"></a><span data-ttu-id="99aa2-476">Cambios importantes en SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="99aa2-476">Breaking Changes in SQL Server 2005</span></span>  

[!INCLUDE[Archived documentation for very old versions of SQL Server](../includes/paragraph-content/previous-versions-archive-documentation-sql-server.md)]

## <a name="see-also"></a><span data-ttu-id="99aa2-477">Consulte también</span><span class="sxs-lookup"><span data-stu-id="99aa2-477">See Also</span></span>  
 <span data-ttu-id="99aa2-478">[Características desusadas Motor de base de datos en SQL Server 2014](deprecated-database-engine-features-in-sql-server-2016.md?view=sql-server-2014) </span><span class="sxs-lookup"><span data-stu-id="99aa2-478">[Deprecated Database Engine Features in SQL Server 2014](deprecated-database-engine-features-in-sql-server-2016.md?view=sql-server-2014) </span></span>  
 <span data-ttu-id="99aa2-479">[Cambios de comportamiento en Motor de base de datos características en SQL Server 2014](../../2014/database-engine/behavior-changes-to-database-engine-features-in-sql-server-2014.md?view=sql-server-2014) </span><span class="sxs-lookup"><span data-stu-id="99aa2-479">[Behavior Changes to Database Engine Features in SQL Server 2014](../../2014/database-engine/behavior-changes-to-database-engine-features-in-sql-server-2014.md?view=sql-server-2014) </span></span>  
 <span data-ttu-id="99aa2-480">[Funcionalidad de Motor de base de datos no incluida en SQL Server 2014](discontinued-database-engine-functionality-in-sql-server-2016.md?view=sql-server-2014) </span><span class="sxs-lookup"><span data-stu-id="99aa2-480">[Discontinued Database Engine Functionality in SQL Server 2014](discontinued-database-engine-functionality-in-sql-server-2016.md?view=sql-server-2014) </span></span>  
 <span data-ttu-id="99aa2-481">[Compatibilidad con versiones anteriores del Motor de base de datos de SQL Server](sql-server-database-engine-backward-compatibility.md) </span><span class="sxs-lookup"><span data-stu-id="99aa2-481">[SQL Server Database Engine Backward Compatibility](sql-server-database-engine-backward-compatibility.md) </span></span>  
 [<span data-ttu-id="99aa2-482">Nivel de compatibilidad de ALTER DATABASE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="99aa2-482">ALTER DATABASE Compatibility Level &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-database-transact-sql-compatibility-level)  
 [<span data-ttu-id="99aa2-483">Últimos cambios en las características de las herramientas de administración de SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="99aa2-483">Breaking Changes to Management Tools Features in SQL Server 2014</span></span>](breaking-changes-to-management-tools-features-in-sql-server-2014.md?view=sql-server-2014)  
  
