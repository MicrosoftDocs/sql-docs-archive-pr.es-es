---
title: Actualizar bases de datos replicadas | Microsoft Docs
ms.custom: ''
ms.date: 05/24/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- merge replication database upgrades [SQL Server replication]
- replication [SQL Server], upgrading
- transactional replication, upgrading databases
- snapshot replication [SQL Server], upgrading databases
- upgrading replicated databases
ms.assetid: 9926a4f7-bcd8-4b9b-9dcf-5426a5857116
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 326a94820876b40128428aac58e47c650ce122b8
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87671140"
---
# <a name="upgrade-replicated-databases"></a><span data-ttu-id="54d4a-102">Actualizar bases de datos replicadas</span><span class="sxs-lookup"><span data-stu-id="54d4a-102">Upgrade Replicated Databases</span></span>
  [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="54d4a-103">admite la actualización de bases de datos replicadas desde versiones anteriores de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]; no es necesario detener la actividad en otros nodos mientras se actualiza un nodo.</span><span class="sxs-lookup"><span data-stu-id="54d4a-103">supports upgrading replicated databases from previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]; it is not required to stop activity at other nodes while a node is being upgraded.</span></span> <span data-ttu-id="54d4a-104">Asegúrese de cumplir las reglas relativas a la versión admitida en una topología:</span><span class="sxs-lookup"><span data-stu-id="54d4a-104">Ensure that you adhere to the rules regarding which versions are supported in a topology:</span></span>  
  
-   <span data-ttu-id="54d4a-105">Un distribuidor puede ser de cualquier versión siempre que ésta sea mayor o igual que la versión del publicador (en muchos casos el distribuidor es la misma instancia que el publicador).</span><span class="sxs-lookup"><span data-stu-id="54d4a-105">A Distributor can be any version as long as it is greater than or equal to the Publisher version (in many cases the Distributor is the same instance as the Publisher).</span></span>  
  
-   <span data-ttu-id="54d4a-106">Un publicador puede ser de cualquier versión siempre que ésta sea menor o igual que la versión del distribuidor.</span><span class="sxs-lookup"><span data-stu-id="54d4a-106">A Publisher can be any version as long as it less than or equal to the Distributor version.</span></span>  
  
-   <span data-ttu-id="54d4a-107">La versión del suscriptor depende del tipo de publicación:</span><span class="sxs-lookup"><span data-stu-id="54d4a-107">Subscriber version depends on the type of publication:</span></span>  
  
    -   <span data-ttu-id="54d4a-108">Un suscriptor de una publicación transaccional puede ser de cualquiera de las dos versiones del publicador.</span><span class="sxs-lookup"><span data-stu-id="54d4a-108">A Subscriber to a transactional publication can be any version within two versions of the Publisher version.</span></span> <span data-ttu-id="54d4a-109">Por ejemplo, un publicador de [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] en ejecución puede tener suscriptores de [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], y un publicador de [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] puede tener suscriptores de [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="54d4a-109">For example: a [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] Publisher running can have [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Subscribers; and a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Publisher can have [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] Subscribers.</span></span>  
  
    -   <span data-ttu-id="54d4a-110">Un suscriptor de una publicación de combinación puede ser de cualquier versión menor o igual que la versión del publicador.</span><span class="sxs-lookup"><span data-stu-id="54d4a-110">A Subscriber to a merge publication can be any version less than or equal to the Publisher version.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="54d4a-111">Este tema se encuentra disponible en la documentación de la Ayuda del programa de instalación y en los Libros en pantalla de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="54d4a-111">This topic is available in the Setup Help documentation and in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span> <span data-ttu-id="54d4a-112">Los vínculos con temas que aparecen en negrita en la documentación de la Ayuda del programa de instalación hacen referencia a temas que solo se encuentran disponibles en los Libros en pantalla.</span><span class="sxs-lookup"><span data-stu-id="54d4a-112">Topic links that appear as bold text in the Setup Help documentation refer to topics that are only available in Books Online.</span></span>  
  
## <a name="run-the-log-reader-agent-for-transactional-replication-before-upgrade"></a><span data-ttu-id="54d4a-113">Ejecutar el Agente de registro del LOG para la replicación transaccional antes de la actualización</span><span class="sxs-lookup"><span data-stu-id="54d4a-113">Run the Log Reader Agent for Transactional Replication Before Upgrade</span></span>  
 <span data-ttu-id="54d4a-114">Antes de actualizar a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], debe asegurarse de que el Agente de registro del LOG ha procesado todas las transacciones confirmadas en las tablas publicadas.</span><span class="sxs-lookup"><span data-stu-id="54d4a-114">Before you upgrade to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you must make sure that all committed transactions from published tables have been processed by the Log Reader Agent.</span></span> <span data-ttu-id="54d4a-115">Para asegurarse de que se han procesado todas las transacciones, siga estos pasos para cada base de datos que contenga publicaciones transaccionales:</span><span class="sxs-lookup"><span data-stu-id="54d4a-115">To make sure that all transactions have been processed, perform the following steps for each database that contains transactional publications:</span></span>  
  
1.  <span data-ttu-id="54d4a-116">Asegurarse de que el Agente de registro del LOG se está ejecutando para la base de datos.</span><span class="sxs-lookup"><span data-stu-id="54d4a-116">Make sure that the Log Reader Agent is running for the database.</span></span> <span data-ttu-id="54d4a-117">De forma predeterminada, el agente se ejecuta sin interrupción.</span><span class="sxs-lookup"><span data-stu-id="54d4a-117">By default, the agent runs continuously.</span></span>  
  
2.  <span data-ttu-id="54d4a-118">Detenga la actividad de usuario en las tablas publicadas.</span><span class="sxs-lookup"><span data-stu-id="54d4a-118">Stop user activity on published tables.</span></span>  
  
3.  <span data-ttu-id="54d4a-119">Deje tiempo para que el Agente de registro del LOG copie las transacciones en la base de datos de distribución y, a continuación, detenga el agente.</span><span class="sxs-lookup"><span data-stu-id="54d4a-119">Allow time for the Log Reader Agent to copy transactions to the distribution database, and then stop the agent.</span></span>  
  
4.  <span data-ttu-id="54d4a-120">Ejecute [sp_replcmds](/sql/relational-databases/system-stored-procedures/sp-replcmds-transact-sql) para comprobar que se han procesado todas las transacciones.</span><span class="sxs-lookup"><span data-stu-id="54d4a-120">Execute [sp_replcmds](/sql/relational-databases/system-stored-procedures/sp-replcmds-transact-sql) to verify that all transactions have been processed.</span></span> <span data-ttu-id="54d4a-121">El conjunto de resultados de este procedimiento debe estar vacío.</span><span class="sxs-lookup"><span data-stu-id="54d4a-121">The result set from this procedure should be empty.</span></span>  
  
5.  <span data-ttu-id="54d4a-122">Ejecute [sp_replflush](/sql/relational-databases/system-stored-procedures/sp-replflush-transact-sql) para cerrar la conexión de sp_replcmds.</span><span class="sxs-lookup"><span data-stu-id="54d4a-122">Execute [sp_replflush](/sql/relational-databases/system-stored-procedures/sp-replflush-transact-sql) to close the connection from sp_replcmds.</span></span>  
  
6.  <span data-ttu-id="54d4a-123">Realice la actualización del servidor a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="54d4a-123">Perform the server upgrade to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
7.  <span data-ttu-id="54d4a-124">Reinicie el Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] y el Agente de registro del LOG si no se inician automáticamente después de la actualización.</span><span class="sxs-lookup"><span data-stu-id="54d4a-124">Restart [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent and the Log Reader Agent if they do not start automatically after the upgrade.</span></span>  
  
## <a name="run-agents-for-merge-replication-after-upgrade"></a><span data-ttu-id="54d4a-125">Ejecutar agentes para la replicación de mezcla después de la actualización</span><span class="sxs-lookup"><span data-stu-id="54d4a-125">Run Agents for Merge Replication After Upgrade</span></span>  
 <span data-ttu-id="54d4a-126">Después de la actualización, ejecute el Agente de instantáneas de cada publicación de combinación y el Agente de mezcla de cada suscripción para actualizar los metadatos de la replicación.</span><span class="sxs-lookup"><span data-stu-id="54d4a-126">After upgrade, run the Snapshot Agent for each merge publication and the Merge Agent for each subscription to update replication metadata.</span></span> <span data-ttu-id="54d4a-127">No tiene que aplicar la nueva instantánea porque no es necesaria para reinicializar las suscripciones.</span><span class="sxs-lookup"><span data-stu-id="54d4a-127">You do not have to apply the new snapshot, because it is not necessary to reinitialize subscriptions.</span></span> <span data-ttu-id="54d4a-128">Los metadatos de suscripción se actualizan la primera vez que el Agente de mezcla se ejecuta tras la actualización.</span><span class="sxs-lookup"><span data-stu-id="54d4a-128">Subscription metadata is updated the first time the Merge Agent is run after upgrade.</span></span> <span data-ttu-id="54d4a-129">Esto significa que la base de datos de suscripciones puede permanecer en línea y activa durante la actualización del publicador.</span><span class="sxs-lookup"><span data-stu-id="54d4a-129">This means that the subscription database can remain online and active during the Publisher upgrade.</span></span>  
  
 <span data-ttu-id="54d4a-130">La replicación de mezcla almacena metadatos de publicación y suscripción en un determinado número de tablas del sistema en las bases de datos de publicaciones y suscripciones.</span><span class="sxs-lookup"><span data-stu-id="54d4a-130">Merge replication stores publication and subscription metadata in a number of system tables in the publication and subscription databases.</span></span> <span data-ttu-id="54d4a-131">La ejecución del Agente de instantáneas actualiza los metadatos de publicación y la ejecución del Agente de mezcla actualiza los metadatos de suscripción.</span><span class="sxs-lookup"><span data-stu-id="54d4a-131">Running the Snapshot Agent updates publication metadata and running the Merge Agent updates subscription metadata.</span></span> <span data-ttu-id="54d4a-132">Solo es necesaria para generar una instantánea de publicación.</span><span class="sxs-lookup"><span data-stu-id="54d4a-132">It is only required to generate a publication snapshot.</span></span> <span data-ttu-id="54d4a-133">Si una publicación de combinación utiliza filtros con parámetros, cada partición también tendrá una instantánea.</span><span class="sxs-lookup"><span data-stu-id="54d4a-133">If a merge publication uses parameterized filters, each partition also has a snapshot.</span></span> <span data-ttu-id="54d4a-134">No es necesario actualizar estas instantáneas con particiones.</span><span class="sxs-lookup"><span data-stu-id="54d4a-134">It is not necessary to update these partitioned snapshots.</span></span>  
  
 <span data-ttu-id="54d4a-135">Ejecute los agentes desde [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], el Monitor de replicación o la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="54d4a-135">Run the agents from [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], Replication Monitor, or from the command line.</span></span> <span data-ttu-id="54d4a-136">Para obtener más información sobre la ejecución del Agente de instantáneas, vea los siguientes temas:</span><span class="sxs-lookup"><span data-stu-id="54d4a-136">For more information about running the Snapshot Agent, see the following topics:</span></span>  
  
-   [<span data-ttu-id="54d4a-137">Crear y aplicar la instantánea inicial</span><span class="sxs-lookup"><span data-stu-id="54d4a-137">Create and Apply the Initial Snapshot</span></span>](../../../2014/relational-databases/replication/create-and-apply-the-initial-snapshot.md)  
  
-   [<span data-ttu-id="54d4a-138">Iniciar y detener un agente de replicación &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="54d4a-138">Start and Stop a Replication Agent &#40;SQL Server Management Studio&#41;</span></span>](../../relational-databases/replication/agents/start-and-stop-a-replication-agent-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="54d4a-139">Crear y aplicar la instantánea inicial</span><span class="sxs-lookup"><span data-stu-id="54d4a-139">Create and Apply the Initial Snapshot</span></span>](../../../2014/relational-databases/replication/create-and-apply-the-initial-snapshot.md)  
  
-   [<span data-ttu-id="54d4a-140">Conceptos de los ejecutables del Agente de replicación</span><span class="sxs-lookup"><span data-stu-id="54d4a-140">Replication Agent Executables Concepts</span></span>](../../../2014/relational-databases/replication/concepts/replication-agent-executables-concepts.md)  
  
 <span data-ttu-id="54d4a-141">Para obtener más información sobre la ejecución del Agente de mezcla, vea los siguientes temas:</span><span class="sxs-lookup"><span data-stu-id="54d4a-141">For more information about running the Merge Agent, see the following topics:</span></span>  
  
-   [<span data-ttu-id="54d4a-142">Sincronizar una suscripción de extracción</span><span class="sxs-lookup"><span data-stu-id="54d4a-142">Synchronize a Pull Subscription</span></span>](../../../2014/relational-databases/replication/synchronize-a-pull-subscription.md)  
  
-   [<span data-ttu-id="54d4a-143">Sincronizar una suscripción de inserción</span><span class="sxs-lookup"><span data-stu-id="54d4a-143">Synchronize a Push Subscription</span></span>](../../../2014/relational-databases/replication/synchronize-a-push-subscription.md)  
  
 <span data-ttu-id="54d4a-144">Después de actualizar [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en una topología que utiliza la replicación de mezcla, cambie el nivel de compatibilidad de publicación de todas las publicaciones si desea utilizar nuevas características.</span><span class="sxs-lookup"><span data-stu-id="54d4a-144">After upgrading [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in a topology that uses merge replication, change the publication compatibility level of any publications if you want to use new features.</span></span>  
  
## <a name="upgrading-to-standard-workgroup-or-express-editions"></a><span data-ttu-id="54d4a-145">Actualizar a Standard Edition, Workgroup Edition o Express Edition</span><span class="sxs-lookup"><span data-stu-id="54d4a-145">Upgrading to Standard, Workgroup, or Express Editions</span></span>  
 <span data-ttu-id="54d4a-146">Antes de actualizar desde una edición de [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] a otra, compruebe que las funciones que actualmente usa son compatibles con la edición a la que quiere actualizar.</span><span class="sxs-lookup"><span data-stu-id="54d4a-146">Before upgrading from one edition of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] to another, verify that the functionality you are currently using is supported in the edition to which you are upgrading.</span></span> <span data-ttu-id="54d4a-147">Para obtener más información, consulte la sección acerca de la replicación en [características compatibles con las ediciones de SQL Server 2014](../../../2014/getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="54d4a-147">For more information, see the section on Replication in [Features Supported by the Editions of SQL Server 2014](../../../2014/getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
## <a name="web-synchronization-for-merge-replication"></a><span data-ttu-id="54d4a-148">Sincronización web para la replicación de mezcla</span><span class="sxs-lookup"><span data-stu-id="54d4a-148">Web Synchronization for Merge Replication</span></span>  
 <span data-ttu-id="54d4a-149">La opción de sincronización web para replicación de mezcla requiere que se copie el archivo Escucha de replicación de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (replisapi.dll) en el directorio virtual del servidor de Internet Information Services (IIS) que se usa para la sincronización.</span><span class="sxs-lookup"><span data-stu-id="54d4a-149">The Web synchronization option for merge replication requires that the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener (replisapi.dll) be copied to the virtual directory on the Internet Information Services (IIS) server used for synchronization.</span></span> <span data-ttu-id="54d4a-150">Cuando se configura la sincronización web, se copia el archivo en el directorio virtual mediante el Asistente para configurar la sincronización web.</span><span class="sxs-lookup"><span data-stu-id="54d4a-150">When you configure Web synchronization, the file is copied to the virtual directory by the Configure Web Synchronization Wizard.</span></span> <span data-ttu-id="54d4a-151">Si se actualizan los componentes de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instalados en el servidor IIS, debe copiarse manualmente el archivo replisapi.dll del directorio COM en el directorio virtual del servidor IIS.</span><span class="sxs-lookup"><span data-stu-id="54d4a-151">If you upgrade the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components installed on the IIS server, you must manually copy replisapi.dll from the COM directory to the virtual directory on the IIS server.</span></span> <span data-ttu-id="54d4a-152">Para obtener más información sobre cómo configurar la sincronización web, vea [Configurar la sincronización web](../../../2014/relational-databases/replication/configure-web-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="54d4a-152">For more information about configuring Web synchronization, see [Configure Web Synchronization](../../../2014/relational-databases/replication/configure-web-synchronization.md).</span></span>  
  
## <a name="restoring-a-replicated-database-from-an-earlier-version"></a><span data-ttu-id="54d4a-153">Restaurar una base de datos replicada a partir de una versión anterior</span><span class="sxs-lookup"><span data-stu-id="54d4a-153">Restoring a Replicated Database from an Earlier Version</span></span>  
 <span data-ttu-id="54d4a-154">Para asegurarse de que la configuración de replicación se conserva al restaurar una copia de seguridad de una base de datos replicada a partir de una versión anterior, restaure en un servidor y una base de datos con los mismos nombres que el servidor y la base de datos donde se realizó la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="54d4a-154">To ensure replication settings are retained when restoring a backup of a replicated database from a previous version: restore to a server and database with the same names as the server and database at which the backup was taken.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="54d4a-155">Consulte también</span><span class="sxs-lookup"><span data-stu-id="54d4a-155">See Also</span></span>  
 <span data-ttu-id="54d4a-156">[Preguntas más frecuentes para administradores de replicación](../../relational-databases/replication/administration/frequently-asked-questions-for-replication-administrators.md) </span><span class="sxs-lookup"><span data-stu-id="54d4a-156">[Replication Administration FAQ](../../relational-databases/replication/administration/frequently-asked-questions-for-replication-administrators.md) </span></span>  
 <span data-ttu-id="54d4a-157">[Compatibilidad con versiones anteriores de replicación](../../../2014/relational-databases/replication/replication-backward-compatibility.md) </span><span class="sxs-lookup"><span data-stu-id="54d4a-157">[Replication Backward Compatibility](../../../2014/relational-databases/replication/replication-backward-compatibility.md) </span></span>  
 <span data-ttu-id="54d4a-158">[Actualizaciones de ediciones y versiones admitidas](../../database-engine/install-windows/supported-version-and-edition-upgrades.md) </span><span class="sxs-lookup"><span data-stu-id="54d4a-158">[Supported Version and Edition Upgrades](../../database-engine/install-windows/supported-version-and-edition-upgrades.md) </span></span>  
 [<span data-ttu-id="54d4a-159">Actualizar a SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="54d4a-159">Upgrade to SQL Server 2014</span></span>](upgrade-sql-server.md)  
  
  
