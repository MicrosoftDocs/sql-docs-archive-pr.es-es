---
title: Solucione los problemas del Utilidad de SQL Server | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
ms.assetid: f5f47c2a-38ea-40f8-9767-9bc138d14453
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: 3c139f9f084374aeb711e905ac0c315acc25c6ac
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87747725"
---
# <a name="troubleshoot-the-sql-server-utility"></a><span data-ttu-id="05482-102">Solucionar problemas de la Utilidad de SQL Server</span><span class="sxs-lookup"><span data-stu-id="05482-102">Troubleshoot the SQL Server Utility</span></span>
  <span data-ttu-id="05482-103">Se pueden citar como ejemplos de solución de problemas de la utilidad de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] la resolución de una operación que no ha podido inscribir una instancia de SQL Server con un UCP, la resolución de un error de recopilación de datos que crea iconos deshabilitados en la vista de lista de instancias administradas de un UCP, la mitigación de cuellos de botella de rendimiento o la resolución de problemas de mantenimiento de recursos.</span><span class="sxs-lookup"><span data-stu-id="05482-103">Troubleshooting [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility issues might include resolving a failed operation to enroll an instance of SQL Server with a UCP, troubleshooting failed data collection resulting in gray icons in the managed instance list view on a UCP, mitigating performance bottlenecks, or resolving resource health issues.</span></span> <span data-ttu-id="05482-104">Para obtener más información sobre cómo mitigar los problemas de estado de los recursos identificados por un [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] UCP, consulte [solución de problemas de SQL Server Resource Health &#40;utilidad de SQL Server&#41;](../relational-databases/manage/troubleshoot-sql-server-resource-health-sql-server-utility.md).</span><span class="sxs-lookup"><span data-stu-id="05482-104">For more information about mitigating resource health issues identified by a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] UCP, see [Troubleshoot SQL Server Resource Health &#40;SQL Server Utility&#41;](../relational-databases/manage/troubleshoot-sql-server-resource-health-sql-server-utility.md).</span></span>  
  
## <a name="failed-operation-to-enroll-an-instance-of-sql-server-into-a-sql-server-utility"></a><span data-ttu-id="05482-105">Error de una operación de inscripción de una instancia de SQL Server en una Utilidad de SQL Server</span><span class="sxs-lookup"><span data-stu-id="05482-105">Failed Operation to Enroll an Instance of SQL Server into a SQL Server Utility</span></span>  
 <span data-ttu-id="05482-106">Si se conecta con la instancia de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] para inscribirse mediante la Autenticación de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , y especifica una cuenta de proxy que pertenece a un dominio de Active Directory que no es el dominio en el que está el UCP, la validación de la instancia será correcta, pero se produce un error en la operación de inscripción con un mensaje de error parecido a este:</span><span class="sxs-lookup"><span data-stu-id="05482-106">If you connect to the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to enroll using [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Authentication, and you specify a proxy account that belongs to a different Active Directory domain than the domain where the UCP is located, instance validation succeeds, but the enrollment operation fails with the following error message:</span></span>  
  
 <span data-ttu-id="05482-107">Se ha producido una excepción al ejecutar una instrucción o lote Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="05482-107">An exception occurred while executing a Transact-SQL statement or batch.</span></span> <span data-ttu-id="05482-108">(Microsoft.SqlServer.ConnectionInfo)</span><span class="sxs-lookup"><span data-stu-id="05482-108">(Microsoft.SqlServer.ConnectionInfo)</span></span>  
  
 <span data-ttu-id="05482-109">Información adicional:  No se ha podido obtener información acerca del grupo o usuario de Windows NT "\<DomainName\AccountName>", código de error 0x5.</span><span class="sxs-lookup"><span data-stu-id="05482-109">Additional information:  Could not obtain information about Windows NT group/user '\<DomainName\AccountName>', error code 0x5.</span></span> <span data-ttu-id="05482-110">(Microsoft SQL Server, Error: 15404)</span><span class="sxs-lookup"><span data-stu-id="05482-110">(Microsoft SQL Server, Error: 15404)</span></span>  
  
 <span data-ttu-id="05482-111">Este problema sucede en el siguiente escenario de ejemplo:</span><span class="sxs-lookup"><span data-stu-id="05482-111">This issue occurs in the following example scenario:</span></span>  
  
1.  <span data-ttu-id="05482-112">El UCP es miembro de "Domain_1."</span><span class="sxs-lookup"><span data-stu-id="05482-112">The UCP is a member of "Domain_1."</span></span>  
  
2.  <span data-ttu-id="05482-113">Existe una relación de confianza de dominio unidireccional: es decir, "Domain_2" no confía en "Domain_1", pero "Domain_1" confía en "Domain_2."</span><span class="sxs-lookup"><span data-stu-id="05482-113">A one-way domain trust relationship is in place: that is, "Domain_1" is not trusted by "Domain_2" but "Domain_2" is trusted by "Domain_1."</span></span>  
  
3.  <span data-ttu-id="05482-114">La instancia de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] para inscribirse en la utilidad de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] también es miembro de "Domain_1."</span><span class="sxs-lookup"><span data-stu-id="05482-114">The instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to enroll into the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility is also a member of "Domain_1."</span></span>  
  
4.  <span data-ttu-id="05482-115">Durante la operación de inscripción, conéctese a la instancia de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] para inscribirse mediante "SA".</span><span class="sxs-lookup"><span data-stu-id="05482-115">During the enroll operation, connect to the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to enroll using "sa".</span></span> <span data-ttu-id="05482-116">Especifique una cuenta de proxy de "Domain_2."</span><span class="sxs-lookup"><span data-stu-id="05482-116">Specify a proxy account from "Domain_2."</span></span>  
  
5.  <span data-ttu-id="05482-117">La validación se realiza correctamente, pero se produce un error de inscripción.</span><span class="sxs-lookup"><span data-stu-id="05482-117">Validation succeeds but enrollment fails.</span></span>  
  
 <span data-ttu-id="05482-118">La solución para este problema, usando el ejemplo anterior, es conectarse a la instancia de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] para inscribirse en la [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] utilidad mediante "SA" y proporcionar una cuenta de proxy de "Domain_1".</span><span class="sxs-lookup"><span data-stu-id="05482-118">The workaround for this issue, using the example above, is to connect to the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to enroll into the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility using "sa" and provide a proxy account from "Domain_1."</span></span>  
  
## <a name="failed-wmi-validation"></a><span data-ttu-id="05482-119">Error de validación de WMI</span><span class="sxs-lookup"><span data-stu-id="05482-119">Failed WMI Validation</span></span>  
 <span data-ttu-id="05482-120">Si WMI no se configura correctamente en una instancia de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], las operaciones de creación de UCP y de inscripción de instancia administrada muestran una advertencia, pero no se bloquea la operación.</span><span class="sxs-lookup"><span data-stu-id="05482-120">If WMI is not properly configured on an instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], the Create UCP and Enroll Managed Instance operations display a warning, but the operation is not blocked.</span></span> <span data-ttu-id="05482-121">Además, si cambia la configuración de la cuenta del Agente [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] de forma que que Agente [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] no tenga permiso en las clases WMI necesarias, la recopilación de datos en la instancia administrada afectada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] no se carga en el UCP.</span><span class="sxs-lookup"><span data-stu-id="05482-121">Additionally, if you change the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent account configuration so that [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent does not have permission to required WMI classes, data collection on the affected managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] fails to upload to the UCP.</span></span> <span data-ttu-id="05482-122">Esto genera iconos deshabilitados en el UCP.</span><span class="sxs-lookup"><span data-stu-id="05482-122">This results in gray icons in the UCP.</span></span>  
  
 <span data-ttu-id="05482-123">Un error de recopilación de datos genera iconos de estado deshabilitados en la vista de lista del UCP para las instancias administradas de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]afectadas.</span><span class="sxs-lookup"><span data-stu-id="05482-123">Failed data collection results in gray status icons in the UCP list view for affected managed instances of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="05482-124">El historial de trabajos en la instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] muestra que sysutility_mi_collect_and_upload produce un error en el paso 2 (almacenaje temporal de los datos recopilados del script de PowerShell).</span><span class="sxs-lookup"><span data-stu-id="05482-124">The job history on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] shows that sysutility_mi_collect_and_upload fails on step 2 (Stage Data Collected from PowerShell Script).</span></span>  
  
 <span data-ttu-id="05482-125">Los mensajes de error simplificados son:</span><span class="sxs-lookup"><span data-stu-id="05482-125">The simplified error messages are:</span></span>  
  
 <span data-ttu-id="05482-126">La ejecución del comando se detuvo porque la variable del shell "ErrorActionPreference" esa establecida en Stop: Access denied.</span><span class="sxs-lookup"><span data-stu-id="05482-126">Command execution stopped because the shell variable "ErrorActionPreference" is set to Stop: Access denied.</span></span>  
  
 <span data-ttu-id="05482-127">ERROR: \<Date-time (MM/DD/YYYY HH:MM:SS)> excepción detectada al recopilar propiedades de CPU.</span><span class="sxs-lookup"><span data-stu-id="05482-127">ERROR: \<Date-time (MM/DD/YYYY HH:MM:SS)>: Caught exception while collecting cpu properties.</span></span>  <span data-ttu-id="05482-128">Se podría haber producido un error en una consulta WMI.</span><span class="sxs-lookup"><span data-stu-id="05482-128">A WMI query might have failed.</span></span>  <span data-ttu-id="05482-129">ADVERTENCIA.</span><span class="sxs-lookup"><span data-stu-id="05482-129">WARNING.</span></span>  
  
 <span data-ttu-id="05482-130">Para resolver este problema, compruebe la configuración siguiente:</span><span class="sxs-lookup"><span data-stu-id="05482-130">To resolve this issue, verify the following configuration settings:</span></span>  
  
-   <span data-ttu-id="05482-131">En Windows Server 2003, el servicio Agente SQL Server debe formar parte del grupo WMI en la instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="05482-131">On Windows Server 2003, the SQL Server Agent service must be part of the Windows Performance Monitoring group on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="05482-132">El servicio WMI/IP debe estar habilitado y configurado en la instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="05482-132">The WMI service must be enabled and configured on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="05482-133">El repositorio WMI podría estar dañado en la instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="05482-133">The WMI repository might be corrupt on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="05482-134">La biblioteca de rendimiento podría faltar o estar dañada en la instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="05482-134">The performance library might be missing or corrupt on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="05482-135">Para comprobar que la instancia especificada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] está configurada correctamente para notificar datos al UCP, compruebe que las siguientes clases están disponibles en la instancia especificada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]y que son accesibles para la cuenta del servicio Agente SQL Server:</span><span class="sxs-lookup"><span data-stu-id="05482-135">To verify that the specified instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is configured properly to report data to the UCP, verify that the following classes are available on the specified instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], and that they are accessible to SQL Server Agent service account:</span></span>  
  
-   <span data-ttu-id="05482-136">Win32_MountPoint</span><span class="sxs-lookup"><span data-stu-id="05482-136">Win32_MountPoint</span></span>  
  
-   <span data-ttu-id="05482-137">Win32_PerfRawData_PerfProc_Process</span><span class="sxs-lookup"><span data-stu-id="05482-137">Win32_PerfRawData_PerfProc_Process</span></span>  
  
-   <span data-ttu-id="05482-138">Win32_PerfRawData_PerfOS_Processor</span><span class="sxs-lookup"><span data-stu-id="05482-138">Win32_PerfRawData_PerfOS_Processor</span></span>  
  
-   <span data-ttu-id="05482-139">Win32_Processor</span><span class="sxs-lookup"><span data-stu-id="05482-139">Win32_Processor</span></span>  
  
-   <span data-ttu-id="05482-140">Win32_Volume</span><span class="sxs-lookup"><span data-stu-id="05482-140">Win32_Volume</span></span>  
  
-   <span data-ttu-id="05482-141">Win32_LogicalDisk</span><span class="sxs-lookup"><span data-stu-id="05482-141">Win32_LogicalDisk</span></span>  
  
 <span data-ttu-id="05482-142">Puede usar el cmdlet Get-WmiObject de PowerShell en cada una de las clases para comprobar que todas son accesibles.</span><span class="sxs-lookup"><span data-stu-id="05482-142">You can use the Get-WmiObject PowerShell cmdlet on each of the classes to verify that each class is accessible.</span></span> <span data-ttu-id="05482-143">Ejecute los siguientes cmdlets en la instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="05482-143">Run the following cmdlets on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span></span>  
  
```  
Get-WmiObject Win32_MountPoint -ErrorAction Stop | Out-Null  
Get-WmiObject Win32_PerfRawData_PerfProc_Process -ErrorAction Stop| Out-Null  
Get-WmiObject Win32_PerfRawData_PerfOS_Processor -ErrorAction Stop | Out-Null  
Get-WmiObject Win32_Processor -ErrorAction Stop | Out-Null  
Get-WmiObject Win32_Volume -ErrorAction Stop | Out-Null  
Get-WmiObject Win32_LogicalDisk -ErrorAction Stop | Out-Null  
```  
  
 <span data-ttu-id="05482-144">Para obtener más información sobre la solución de problemas de WMI, vea [Solucionar problemas de WMI](https://go.microsoft.com/fwlink/?LinkId=178250).</span><span class="sxs-lookup"><span data-stu-id="05482-144">For more information about troubleshooting WMI, see [Troubleshooting WMI](https://go.microsoft.com/fwlink/?LinkId=178250).</span></span> <span data-ttu-id="05482-145">Observe que las consultas de estas operaciones de la Utilidad de SQL Server se ejecutan localmente, de modo que el DCOM y el contenido de la solución de problemas remota no se deben tener en cuenta.</span><span class="sxs-lookup"><span data-stu-id="05482-145">Note that queries in these SQL Server Utility operations are running locally, so the DCOM and remote troubleshooting content does not apply.</span></span>  
  
## <a name="failed-data-collection"></a><span data-ttu-id="05482-146">Error en la recopilación de datos</span><span class="sxs-lookup"><span data-stu-id="05482-146">Failed Data Collection</span></span>  
 <span data-ttu-id="05482-147">Si los eventos de recopilación de datos de la Utilidad de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] producen un error, tenga en cuenta las posibilidades siguientes:</span><span class="sxs-lookup"><span data-stu-id="05482-147">If [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility data collection events fail, consider the following possibilities:</span></span>  
  
-   <span data-ttu-id="05482-148">No cambie las propiedades del conjunto de recopilación "Información de la utilidad" en una instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] y no active ni desactive manualmente la recopilación de datos, ya que la recopilación de datos la controla un trabajo del agente de la Utilidad.</span><span class="sxs-lookup"><span data-stu-id="05482-148">Do not change any properties of the "Utility Information" collection set on a managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], and do not turn data collection on/off manually, as data collection is controlled by a Utility agent job.</span></span>  
  
-   <span data-ttu-id="05482-149">Error de validación de WMI o validación de WMI no compatible.</span><span class="sxs-lookup"><span data-stu-id="05482-149">Failed or unsupported WMI validation.</span></span> <span data-ttu-id="05482-150">Para obtener más información, vea la sección sobre error de validación de WMI de este tema.</span><span class="sxs-lookup"><span data-stu-id="05482-150">For more information, see the Failed WMI Validation section earlier in this topic.</span></span>  
  
-   <span data-ttu-id="05482-151">Actualice los datos en la vista de lista de la instancia administrada, ya que los datos en los puntos de vista de la utilidad de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] no se actualizan automáticamente.</span><span class="sxs-lookup"><span data-stu-id="05482-151">Refresh data in the managed instance list view, as data in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility viewpoints does not refresh automatically.</span></span> <span data-ttu-id="05482-152">Para actualizar los datos, haga clic con el botón secundario en el nodo **Instancias administradas** del panel **Navegación del Explorador de la utilidad** , a continuación, seleccione **Actualizar**o haga clic con el botón secundario del mouse en el nombre de instancia [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] en la vista de lista y seleccione **Actualizar**.</span><span class="sxs-lookup"><span data-stu-id="05482-152">To refresh data, right-click the **Managed Instances** node in the **Utility Explorer Navigation** pane, then select **Refresh**, or right-click on the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] instance name in the list view, then select **Refresh**.</span></span> <span data-ttu-id="05482-153">Tenga en cuenta que una vez se haya inscrito una instancia de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] con un UCP, pueden transcurrir hasta 30 minutos hasta que los datos aparezcan por vez primera en el panel y puntos de vista en el panel de contenido del explorador de la utilidad.</span><span class="sxs-lookup"><span data-stu-id="05482-153">Note that after an instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] has been enrolled with a UCP, it can take up to 30 minutes for data to first appear in the dashboard and viewpoints in the Utility Explorer content pane.</span></span>  
  
-   <span data-ttu-id="05482-154">Use el Administrador de configuración de SQL Server para comprobar que la instancia de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="05482-154">Use SQL Server Configuration Manager to verify that the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is running.</span></span>  
  
-   <span data-ttu-id="05482-155">Si se produjo un error de recopilación de datos o de carga de datos debido a problemas de tiempo de espera, actualice la función dbo.fn_sysutility_mi_get_collect_script() de la base de datos MSDB.</span><span class="sxs-lookup"><span data-stu-id="05482-155">If data collection or data upload fail due to timeout issues, update the function dbo.fn_sysutility_mi_get_collect_script() in the MSDB database.</span></span> <span data-ttu-id="05482-156">Especialmente, en la función "Invoke-BulkCopyCommand()" agregue una línea:</span><span class="sxs-lookup"><span data-stu-id="05482-156">Specifically, in the function "Invoke-BulkCopyCommand()" add line:</span></span>  
  
    ```
    $bulkCopy.BulkCopyTimeout=180  
    ```  
  
     <span data-ttu-id="05482-157">El valor predeterminado del tiempo de espera es de 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="05482-157">The default timeout value is 30 seconds.</span></span>  
  
-   <span data-ttu-id="05482-158">Si la instancia de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] no se agrupa, compruebe que el servicio del Agente [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] se está ejecutando y que el servicio se establece para que se inicie de forma automática en el UCP y en la instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="05482-158">If the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is not clustered, verify that the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent service is running and that the service is set to start automatically on the UCP and on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="05482-159">Compruebe que se usa una cuenta válida para ejecutar la recopilación de datos en la instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="05482-159">Verify that a valid account is being used to run data collection on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="05482-160">Por ejemplo, la contraseña puede haber expirado.</span><span class="sxs-lookup"><span data-stu-id="05482-160">For example, the password may have expired.</span></span> <span data-ttu-id="05482-161">Si la contraseña del proxy ha expirado, actualice las credenciales de la contraseña en SSMS, tal como sigue:</span><span class="sxs-lookup"><span data-stu-id="05482-161">If the proxy password has expired, update password credentials in SSMS, as follows:</span></span>  
  
    1.  <span data-ttu-id="05482-162">En el **Explorador de objetos**de SSMS, expanda el nodo **Seguridad** y el nodo **Credenciales** .</span><span class="sxs-lookup"><span data-stu-id="05482-162">In SSMS **Object Explorer**, expand the **Security** node, then expand the **Credentials** node.</span></span>  
  
    2.  <span data-ttu-id="05482-163">Haga clic con el botón derecho en \*\*UtilityAgentProxyCredential_ \<GUID> \*\* y seleccione **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="05482-163">Right-click on **UtilityAgentProxyCredential_\<GUID>** and select **Properties**.</span></span>  
  
    3.  <span data-ttu-id="05482-164">En el cuadro de diálogo Propiedades de credenciales, actualice las credenciales según sea necesario para la credencial \*\*UtilityAgentProxyCredential_ \<GUID> \*\* .</span><span class="sxs-lookup"><span data-stu-id="05482-164">On the Credential Properties dialog, update credentials as necessary for the **UtilityAgentProxyCredential_\<GUID>** credential.</span></span>  
  
    4.  <span data-ttu-id="05482-165">Haga clic en **Aceptar** para confirmar el cambio.</span><span class="sxs-lookup"><span data-stu-id="05482-165">Click **OK** to confirm the change.</span></span>  
  
-   <span data-ttu-id="05482-166">Se debe habilitar TCP/IP en el UCP y en la instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="05482-166">TCP/IP should be enabled on the UCP and on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="05482-167">Habilite TCP/IP a través del Administrador de configuración de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="05482-167">Enable TCP/IP through [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Configuration Manager.</span></span>  
  
-   <span data-ttu-id="05482-168">Se debería iniciar el servicio SQL Server Browser en el UCP y se debería configurar para que se iniciara automáticamente.</span><span class="sxs-lookup"><span data-stu-id="05482-168">The SQL Server Browser service on the UCP should be started and configured to start automatically.</span></span> <span data-ttu-id="05482-169">Si su organización impide el uso del servicio SQL Server Browser, siga los siguientes pasos para permitir que a una instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] se conecte al UCP:</span><span class="sxs-lookup"><span data-stu-id="05482-169">If your organization prevents use of the SQL Server Browser service, use the following steps to allow a managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to connect to the UCP:</span></span>  
  
    1.  <span data-ttu-id="05482-170">En la barra de tareas de Windows de la instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , haga clic en **Inicio**y, a continuación, en **Ejecutar..**..</span><span class="sxs-lookup"><span data-stu-id="05482-170">On the Windows taskbar on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], click **Start**, then click **Run...**.</span></span>  
  
    2.  <span data-ttu-id="05482-171">Escriba "cliconfg.exe" en el espacio proporcionado y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="05482-171">Type "cliconfg.exe" in the space provided, then click **OK**.</span></span>  
  
    3.  <span data-ttu-id="05482-172">Si se le solicita que permita el inicio del ejecutable de la utilidad de configuración del cliente SQL ("SQL Client Configuration Utility EXE"), haga clic en "**Continuar**".</span><span class="sxs-lookup"><span data-stu-id="05482-172">If prompted to allow "SQL Client Configuration Utility EXE" to start, click "**Continue**."</span></span>  
  
    4.  <span data-ttu-id="05482-173">En el cuadro de diálogo **herramienta de red de cliente de SQL Server** , seleccione la pestaña **alias** y, a continuación, haga clic en **Agregar..**..</span><span class="sxs-lookup"><span data-stu-id="05482-173">On the **SQL Server Client Network Utility** dialog box, select the **Alias** tab, then click **Add...**.</span></span>  
  
    5.  <span data-ttu-id="05482-174">En el cuadro de diálogo **Agregar configuración de biblioteca de red** :</span><span class="sxs-lookup"><span data-stu-id="05482-174">On the **Add Network Library Configuration** dialog box:</span></span>  
  
    6.  <span data-ttu-id="05482-175">Especifique TCP/IP de la lista de bibliotecas de red.</span><span class="sxs-lookup"><span data-stu-id="05482-175">Specify TCP/IP from the list of network libraries.</span></span>  
  
    7.  <span data-ttu-id="05482-176">Especifique el nombreDeEquipo\nombreDeInstancia del UCP en el cuadro de texto **Alias del servidor**.</span><span class="sxs-lookup"><span data-stu-id="05482-176">Specify the ComputerName\InstanceName of the UCP in the **Server Alias** text box.</span></span>  
  
    8.  <span data-ttu-id="05482-177">Especifique el nombreDeEquipo del UCP en el cuadro de texto **Alias del servidor**.</span><span class="sxs-lookup"><span data-stu-id="05482-177">Specify the ComputerName of the UCP in the **Server Name** text box.</span></span>  
  
    9. <span data-ttu-id="05482-178">Desactive la casilla **Determinar el puerto dinámicamente** .</span><span class="sxs-lookup"><span data-stu-id="05482-178">Uncheck the **Dynamically determine port** checkbox.</span></span>  
  
    10. <span data-ttu-id="05482-179">Especifique el número de puerto que el UCP enumera en el cuadro de texto **Número de puerto** .</span><span class="sxs-lookup"><span data-stu-id="05482-179">Specify the port number that the UCP is listening on in the **Port number** text box.</span></span>  
  
    11. <span data-ttu-id="05482-180">Haga clic en **Aceptar** para guardar los cambios.</span><span class="sxs-lookup"><span data-stu-id="05482-180">Click **OK** to save your changes.</span></span>  
  
    12. <span data-ttu-id="05482-181">Repita estos pasos para cada instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] que se conecte a un UCP donde no se habilite el servicio SQL Server Browser.</span><span class="sxs-lookup"><span data-stu-id="05482-181">Repeat these steps for each managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] that connects to a UCP where the SQL Server Browser service is not enabled.</span></span>  
  
-   <span data-ttu-id="05482-182">Asegúrese de que las instancias administradas de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] están conectadas a la red.</span><span class="sxs-lookup"><span data-stu-id="05482-182">Ensure that managed instances of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] are connected to the network.</span></span>  
  
-   <span data-ttu-id="05482-183">Si hay bases de datos con el mismo nombre pero con una configuración de distinción entre mayúsculas y minúsculas diferente en una instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], puede que la identificación entre la base de datos y sus puntos de vista sea incorrecta, y se produzca un error de recopilación de datos.</span><span class="sxs-lookup"><span data-stu-id="05482-183">If there are databases with the same name but different case-sensitivity settings on a managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], the identification between the database and its viewpoints can be incorrect, resulting in failed data collection.</span></span> <span data-ttu-id="05482-184">Por ejemplo, es posible que una base de datos denominada "MYDATABASE" muestre estados de mantenimiento para una base de datos con el nombre "MyDatabase".</span><span class="sxs-lookup"><span data-stu-id="05482-184">For example, a database named "MYDATABASE" might show health states for a database named "MyDatabase".</span></span> <span data-ttu-id="05482-185">En esta situación no se producirán errores.</span><span class="sxs-lookup"><span data-stu-id="05482-185">No error is generated in this scenario.</span></span> <span data-ttu-id="05482-186">Un error de recopilación de datos también puede ser consecuencia de la disparidad entre mayúsculas y minúsculas en otros objetos mostrados en el UCP, como el archivo de base de datos y los nombres de grupos de archivos.</span><span class="sxs-lookup"><span data-stu-id="05482-186">Failed data collection can also result from case-sensitivity mismatches in other objects displayed in the UCP, like database file and file group names.</span></span>  
  
-   <span data-ttu-id="05482-187">Si una instancia administrada de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] se hospeda en un equipo con Windows Server 2003, es preciso que la cuenta del servicio del Agente [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] pertenezca al grupo Usuarios del monitor del sistema o al grupo local Administradores.</span><span class="sxs-lookup"><span data-stu-id="05482-187">If a managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is hosted on a Windows Server 2003 computer, then the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent service account must belong to the Performance Monitor Users security group or the local Administrators group.</span></span> <span data-ttu-id="05482-188">De lo contrario, se producirá un error en la recopilación de datos con un error de denegación del acceso.</span><span class="sxs-lookup"><span data-stu-id="05482-188">Otherwise, data collection will fail with an access denied error.</span></span> <span data-ttu-id="05482-189">Para agregar un servicio del Agente [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] al grupo de seguridad Usuarios del monitor del sistema, siga los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="05482-189">To add a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent service account to the Performance Monitor Users security group, use the following steps:</span></span>  
  
    1.  <span data-ttu-id="05482-190">Abra **Administración de equipos**, expanda **Usuarios y grupos locales** y haga clic en **Grupos**.</span><span class="sxs-lookup"><span data-stu-id="05482-190">Open **Computer Management**, then **Local Users and Groups**, then **Groups**.</span></span>  
  
    2.  <span data-ttu-id="05482-191">Haga clic con el botón secundario en **Usuarios del monitor del sistema** y seleccione **Agregar a grupo**.</span><span class="sxs-lookup"><span data-stu-id="05482-191">Right-click **Performance Monitor Users** and select **Add to Group**.</span></span>  
  
    3.  <span data-ttu-id="05482-192">Haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="05482-192">Click **Add**.</span></span>  
  
    4.  <span data-ttu-id="05482-193">Escriba la cuenta que está ejecutando el servicio del Agente SQL Server y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="05482-193">Enter the account that the SQL Server Agent service is running under, then click **OK**.</span></span>  
  
    5.  <span data-ttu-id="05482-194">Si la instancia de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] ya se ha inscrito con el UCP antes de agregar al usuario a este grupo, reinicie el servicio del Agente [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="05482-194">If the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] was already enrolled with the UCP before adding the user to this group, restart the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent service.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="05482-195">Consulte también</span><span class="sxs-lookup"><span data-stu-id="05482-195">See Also</span></span>  
 <span data-ttu-id="05482-196">[Características y tareas de la utilidad de SQL Server](../relational-databases/manage/sql-server-utility-features-and-tasks.md) </span><span class="sxs-lookup"><span data-stu-id="05482-196">[SQL Server Utility Features and Tasks](../relational-databases/manage/sql-server-utility-features-and-tasks.md) </span></span>  
 [<span data-ttu-id="05482-197">Solucionar problemas de estado de recursos de SQL Server &#40;Utilidad de SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="05482-197">Troubleshoot SQL Server Resource Health &#40;SQL Server Utility&#41;</span></span>](../relational-databases/manage/troubleshoot-sql-server-resource-health-sql-server-utility.md)
