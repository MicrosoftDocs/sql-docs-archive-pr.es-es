---
title: affinity Input-Output mask (opción de configuración del servidor) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- affinity I/O mask option
- processor affinity [SQL Server]
- binding processors [SQL Server]
- CPU affinity mask option
ms.assetid: 9950a8c9-9fe0-4003-95df-6f0d1becb0e7
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 3d0606e2a3f5480b27e27a4a585562f4b289b640
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87662248"
---
# <a name="affinity-input-output-mask-server-configuration-option"></a><span data-ttu-id="da2d1-102">affinity Input-Output mask (opción de configuración del servidor)</span><span class="sxs-lookup"><span data-stu-id="da2d1-102">affinity Input-Output mask Server Configuration Option</span></span>
  <span data-ttu-id="da2d1-103">Para llevar a cabo una multitarea, [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows 2000 y Windows Server 2003 a veces mueven subprocesos entre distintos procesadores.</span><span class="sxs-lookup"><span data-stu-id="da2d1-103">To carry out multitasking, [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows 2000 and Windows Server 2003 sometimes move process threads among different processors.</span></span> <span data-ttu-id="da2d1-104">Aunque es eficaz desde el punto de vista del sistema operativo, esta actividad puede reducir el rendimiento de [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en casos de elevadas cargas, ya que cada caché de procesador se recarga repetidamente con los datos.</span><span class="sxs-lookup"><span data-stu-id="da2d1-104">Although efficient from an operating system point of view, this activity can reduce [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] performance under heavy system loads, as each processor cache is repeatedly reloaded with data.</span></span> <span data-ttu-id="da2d1-105">La asignación de procesadores a subprocesos específicos puede mejorar el rendimiento en estas condiciones, ya que se eliminan las recargas de procesador; esta asociación entre un subproceso y un procesador se denomina afinidad del procesador.</span><span class="sxs-lookup"><span data-stu-id="da2d1-105">Assigning processors to specific threads can improve performance under these conditions by eliminating processor reloads; such an association between a thread and a processor is called processor affinity.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="da2d1-106">admite la afinidad del procesador por medio de dos opciones de máscara de afinidad: **affinity mask** (también conocida como **CPU affinity mask**) y **affinity I/O mask**.</span><span class="sxs-lookup"><span data-stu-id="da2d1-106">supports processor affinity by means of two affinity mask options: **affinity mask** (also known as **CPU affinity mask**) and **affinity I/O mask**.</span></span> <span data-ttu-id="da2d1-107">Para obtener más información sobre la opción **affinity mask** , vea [affinity mask (opción de configuración del servidor)](affinity-mask-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="da2d1-107">For more information on the **affinity mask** option, see [affinity mask Server Configuration Option](affinity-mask-server-configuration-option.md).</span></span> <span data-ttu-id="da2d1-108">La compatibilidad de afinidad de CPU y E/S con servidores con entre 33 y 64 procesadores exige el uso adicional de las opciones de configuración del servidor [affinity64 mask](affinity64-mask-server-configuration-option.md) y [affinity64 I/O mask](affinity64-input-output-mask-server-configuration-option.md) , respectivamente.</span><span class="sxs-lookup"><span data-stu-id="da2d1-108">CPU and I/O affinity support for servers with 33 to 64 processors requires the additional use of the [affinity64 mask Server Configuration Option](affinity64-mask-server-configuration-option.md) and [affinity64 Input-Output mask Server Configuration Option](affinity64-input-output-mask-server-configuration-option.md) respectively.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="da2d1-109">La compatibilidad de la afinidad con servidores que tienen entre 33 y 64 procesadores solo está disponible en sistemas operativos de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="da2d1-109">Affinity support for servers with 33 to 64 processors is only available on 64-bit operating systems.</span></span>  
  
 <span data-ttu-id="da2d1-110">La opción **affinity I/O mask** enlaza la E/S del disco de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] a un subconjunto específico de CPU.</span><span class="sxs-lookup"><span data-stu-id="da2d1-110">The **affinity I/O mask** option binds [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O to a specified subset of CPUs.</span></span> <span data-ttu-id="da2d1-111">En entornos de procesamiento de transacciones en línea (OLTP) de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] de grandes prestaciones, esta extensión puede mejorar el rendimiento de los subprocesos de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] que emiten E/S.</span><span class="sxs-lookup"><span data-stu-id="da2d1-111">In high-end [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] online transactional processing (OLTP) environments, this extension can enhance the performance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] threads issuing I/Os.</span></span> <span data-ttu-id="da2d1-112">Esta mejora no admite la afinidad de hardware para controladores de discos o discos individuales.</span><span class="sxs-lookup"><span data-stu-id="da2d1-112">This enhancement does not support hardware affinity for individual disks or disk controllers.</span></span>  
  
 <span data-ttu-id="da2d1-113">El valor de **affinity I/O mask** especifica las CPU de un equipo con varios procesadores que se pueden seleccionar para procesar operaciones de E/S del disco de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="da2d1-113">The value for **affinity I/O mask** specifies which CPUs in a multiprocessor computer are eligible to process [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O operations.</span></span> <span data-ttu-id="da2d1-114">La máscara es un mapa de bits en el que el primer bit de la derecha especifica la CPU(0) de menor orden, el bit inmediatamente a su izquierda especifica la CPU(1) siguiente a la de menor orden, y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="da2d1-114">The mask is a bitmap in which the rightmost bit specifies the lowest-order CPU(0), the bit to its immediate left specifies the next-lowest-order CPU(1), and so on.</span></span> <span data-ttu-id="da2d1-115">Para configurar más de 32 procesadores, establezca tanto **affinity I/O mask** como **affinity64 I/O mask**.</span><span class="sxs-lookup"><span data-stu-id="da2d1-115">To configure more than 32 processors, set both the **affinity I/O mask** and the **affinity64 I/O mask**.</span></span>  
  
 <span data-ttu-id="da2d1-116">Los valores de **affinity I/O mask** son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="da2d1-116">The values for **affinity I/O mask** are as follows:</span></span>  
  
-   <span data-ttu-id="da2d1-117">Una máscara **affinity I/O mask** de 1 byte cubre hasta 8 CPU en un equipo con varios procesadores.</span><span class="sxs-lookup"><span data-stu-id="da2d1-117">A 1-byte **affinity I/O mask** covers up to 8 CPUs in a multiprocessor computer.</span></span>  
  
-   <span data-ttu-id="da2d1-118">Una máscara **affinity I/O mask** de 2 bytes cubre hasta 16 CPU en un equipo con varios procesadores.</span><span class="sxs-lookup"><span data-stu-id="da2d1-118">A 2-byte **affinity I/O mask** covers up to 16 CPUs in a multiprocessor computer.</span></span>  
  
-   <span data-ttu-id="da2d1-119">Una máscara **affinity I/O mask** de 3 bytes cubre hasta 24 CPU en un equipo con varios procesadores.</span><span class="sxs-lookup"><span data-stu-id="da2d1-119">A 3-byte **affinity I/O mask** covers up to 24 CPUs in a multiprocessor computer.</span></span>  
  
-   <span data-ttu-id="da2d1-120">Una máscara **affinity I/O mask** de 4 bytes cubre hasta 32 CPU en un equipo con varios procesadores.</span><span class="sxs-lookup"><span data-stu-id="da2d1-120">A 4-byte **affinity I/O mask** covers up to 32 CPUs in a multiprocessor computer.</span></span>  
  
-   <span data-ttu-id="da2d1-121">Para cubrir más de 32 CPU, configure una opción **affinity I/O mask** de cuatro bytes para las 32 primeras CPU y una opción **affinity64 I/O mask** de hasta 4 bytes para las CPU restantes.</span><span class="sxs-lookup"><span data-stu-id="da2d1-121">To cover more than 32 CPUs, configure a four-byte **affinity I/O mask** for the first 32 CPUs and up to a four-byte **affinity64 I/O mask** for the remaining CPUs.</span></span>  
  
 <span data-ttu-id="da2d1-122">El valor 1 bit en el patrón de afinidad de E/S especifica que la CPU correspondiente se puede seleccionar para realizar operaciones de E/S del disco de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ; El valor 0 bit especifica que no se debería programar ninguna operación de E/S del disco de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] para la CPU correspondiente.</span><span class="sxs-lookup"><span data-stu-id="da2d1-122">A 1 bit in the affinity I/O pattern specifies that the corresponding CPU is eligible to perform [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O operations; a 0 bit specifies that no [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O operations should be scheduled for the corresponding CPU.</span></span> <span data-ttu-id="da2d1-123">Cuando todos los bits se establecen como cero, o bien no se especifica **affinity I/O mask** , la E/S del disco de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] se programa en cualquiera de las CPU que se pueden seleccionar para procesar subprocesos de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="da2d1-123">When all bits are set to zero, or **affinity I/O mask** is not specified, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O is scheduled to any of the CPUs eligible to process [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] threads.</span></span>  
  
 <span data-ttu-id="da2d1-124">Dado que establecer la opción de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **Máscara de afinidad de E/S** es una operación especializada, solo debería usarse en caso necesario.</span><span class="sxs-lookup"><span data-stu-id="da2d1-124">Because setting the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **affinity I/O mask** option is a specialized operation, it should be used only when necessary.</span></span> <span data-ttu-id="da2d1-125">En la mayoría de los casos, la afinidad predeterminada de Windows 2000 o Windows Server 2003 proporciona el mejor rendimiento.</span><span class="sxs-lookup"><span data-stu-id="da2d1-125">In most cases, the Windows 2000 or Windows Server 2003 default affinity provides the best performance.</span></span>  
  
 <span data-ttu-id="da2d1-126">Al especificar la opción **affinity I/O mask** , hay que usarla junto con la opción de configuración **affinity mask** .</span><span class="sxs-lookup"><span data-stu-id="da2d1-126">When specifying the **affinity I/O mask** option, you must use it with the **affinity mask** configuration option.</span></span> <span data-ttu-id="da2d1-127">No habilite la misma CPU en el modificador **affinity I/O mask** y la opción **affinity mask** .</span><span class="sxs-lookup"><span data-stu-id="da2d1-127">Do not enable the same CPU in both the **affinity I/O mask** switch and the **affinity mask** option.</span></span> <span data-ttu-id="da2d1-128">Los bits correspondientes a cada CPU deberían estar en uno de los tres estados siguientes:</span><span class="sxs-lookup"><span data-stu-id="da2d1-128">The bits corresponding to each CPU should be in one of the following three states:</span></span>  
  
-   <span data-ttu-id="da2d1-129">0 tanto en la opción **affinity I/O mask** como en la opción **affinity mask** .</span><span class="sxs-lookup"><span data-stu-id="da2d1-129">0 in both the **affinity I/O mask** option and the **affinity mask** option.</span></span>  
  
-   <span data-ttu-id="da2d1-130">1 en la opción **affinity I/O mask** y 0 en la opción **affinity mask** .</span><span class="sxs-lookup"><span data-stu-id="da2d1-130">1 in the **affinity I/O mask** option and 0 in the **affinity mask** option.</span></span>  
  
-   <span data-ttu-id="da2d1-131">0 en la opción **affinity I/O mask** y 1 en la opción **affinity mask** .</span><span class="sxs-lookup"><span data-stu-id="da2d1-131">0 in the **affinity I/O mask** option and 1 in the **affinity mask** option.</span></span>  
  
 <span data-ttu-id="da2d1-132">La opción **affinity I/O mask** es una opción avanzada.</span><span class="sxs-lookup"><span data-stu-id="da2d1-132">The **affinity I/O mask** option is an advanced option.</span></span> <span data-ttu-id="da2d1-133">Si está utilizando el `sp_configure` procedimiento almacenado del sistema para cambiar la configuración, solo podrá cambiar la opción **máscara de afinidad de e/s** si **Mostrar opciones avanzadas** está establecido en 1.</span><span class="sxs-lookup"><span data-stu-id="da2d1-133">If you are using the `sp_configure` system stored procedure to change the setting, you can change **affinity I/O mask** only when **show advanced options** is set to 1.</span></span> <span data-ttu-id="da2d1-134">En [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], para reconfigurar la opción **affinity I/O mask** hay que reiniciar la instancia [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="da2d1-134">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], reconfiguring the **affinity I/O mask** option requires a restart of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="da2d1-135">No configure la afinidad de CPU en el sistema operativo Windows y la máscara de afinidad en [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="da2d1-135">Do not configure CPU affinity in the Windows operating system and also configure the affinity mask in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="da2d1-136">Esta configuración intenta lograr el mismo resultado y, si las configuraciones no son coherentes, puede obtener resultados impredecibles.</span><span class="sxs-lookup"><span data-stu-id="da2d1-136">These settings are attempting to achieve the same result, and if the configurations are inconsistent, you may have unpredictable results.</span></span> <span data-ttu-id="da2d1-137">La afinidad de CPU de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] se configura mejor mediante la opción `sp_configure` de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="da2d1-137">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] CPU affinity is best configured using the `sp_configure` option in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="da2d1-138">Consulte también</span><span class="sxs-lookup"><span data-stu-id="da2d1-138">See Also</span></span>  
 <span data-ttu-id="da2d1-139">[Supervisar el uso de recursos &#40;Monitor de sistema&#41;](../../relational-databases/performance-monitor/monitor-resource-usage-system-monitor.md) </span><span class="sxs-lookup"><span data-stu-id="da2d1-139">[Monitor Resource Usage &#40;System Monitor&#41;](../../relational-databases/performance-monitor/monitor-resource-usage-system-monitor.md) </span></span>  
 <span data-ttu-id="da2d1-140">[RECONFIGURE &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/reconfigure-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="da2d1-140">[RECONFIGURE &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/reconfigure-transact-sql) </span></span>  
 <span data-ttu-id="da2d1-141">[Opciones de configuración de servidor &#40;SQL Server&#41;](server-configuration-options-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="da2d1-141">[Server Configuration Options &#40;SQL Server&#41;](server-configuration-options-sql-server.md) </span></span>  
 [<span data-ttu-id="da2d1-142">sp_configure &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="da2d1-142">sp_configure &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)  
  
  
