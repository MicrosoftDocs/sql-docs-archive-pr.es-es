---
title: Configurar copia de seguridad administrada (SQL Server Management Studio) | Microsoft Docs
description: Utilice el cuadro de diálogo copia de seguridad administrada para configurar SQL Server configuración predeterminada de copia de seguridad administrada en Azure. Obtenga información sobre las opciones que debe tener en cuenta.
ms.custom: ''
ms.date: 08/23/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
f1_keywords:
- sql12.swb.managedbackup.configure.f1
ms.assetid: 79397cf6-0611-450a-b0d8-e784a76e3091
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: e952ef1102ac67bd0ed9f72d0c201d54b320b5ca
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87662256"
---
# <a name="configure-managed-backup-sql-server-management-studio"></a><span data-ttu-id="6110d-104">Configurar la copia de seguridad administrada (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="6110d-104">Configure Managed Backup (SQL Server Management Studio)</span></span>
  <span data-ttu-id="6110d-105">El cuadro de diálogo **Copia de seguridad administrada** permite configurar los valores predeterminados de [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] para la instancia.</span><span class="sxs-lookup"><span data-stu-id="6110d-105">The **Managed Backup** dialog allows you to configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] defaults for the instance.</span></span> <span data-ttu-id="6110d-106">En este tema se describe cómo usar este cuadro de diálogo para configurar los valores predeterminados de [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] de la instancia y las opciones que debe tener en cuenta al hacerlo.</span><span class="sxs-lookup"><span data-stu-id="6110d-106">This topic describes how to use this dialog to configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] default settings for the instance and options you must consider when doing so.</span></span> <span data-ttu-id="6110d-107">Cuando [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] está configurado para la instancia, la configuración se aplica a cualquier base de datos nueva creada posteriormente.</span><span class="sxs-lookup"><span data-stu-id="6110d-107">When [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] is configured for the instance, the settings are applied to any new database created thereafter.</span></span>  
  
 <span data-ttu-id="6110d-108">Si desea configurar [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] para una base de datos específica, consulte [habilitación y configuración de SQL Server copia de seguridad administrada en Azure para una base de datos](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md#DatabaseConfigure).</span><span class="sxs-lookup"><span data-stu-id="6110d-108">If you want to configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] for a specific database, see [Enable and Configure SQL Server Managed Backup to Azure for a Database](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md#DatabaseConfigure).</span></span>  
 
> [!NOTE] 
> <span data-ttu-id="6110d-109">Los servidores proxy no admiten copias de seguridad administradas en SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6110d-109">SQL Server Managed Backup is not supported with proxy servers.</span></span> 
  
## <a name="task-list"></a><span data-ttu-id="6110d-110">Lista de tareas</span><span class="sxs-lookup"><span data-stu-id="6110d-110">Task List</span></span>  
  
## <a name="ss_smartbackup-functions-using-managed-backup-interface-in-sql-server-management-studio"></a><span data-ttu-id="6110d-111">Funciones de [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] con la interfaz de copias de seguridad administradas en SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="6110d-111">[!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] Functions Using Managed Backup Interface in SQL Server Management Studio</span></span>  
 <span data-ttu-id="6110d-112">En esta versión, solo puede configurar las opciones predeterminadas de nivel de instancia con la interfaz **Copia de seguridad de administración**.</span><span class="sxs-lookup"><span data-stu-id="6110d-112">In this release, you can only configure instance level default settings using the **Management Backup** interface.</span></span> <span data-ttu-id="6110d-113">No se puede configurar [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] para una base de datos, pausar o reanudar las operaciones de [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] ni configurar notificaciones de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="6110d-113">You cannot configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] for a database, pause or resume [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] operations, or setup email notifications.</span></span> <span data-ttu-id="6110d-114">Para obtener información sobre cómo realizar operaciones que no se admiten actualmente a través de la interfaz de **copia de seguridad administrada** , vea [SQL Server la configuración de la retención y almacenamiento de Azure](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md).</span><span class="sxs-lookup"><span data-stu-id="6110d-114">For information on how to perform operations not currently supported through the **Managed Backup** interface, see [SQL Server Managed Backup to Azure - Retention and Storage Settings](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md).</span></span>  
  
## <a name="permissions"></a><span data-ttu-id="6110d-115">Permisos</span><span class="sxs-lookup"><span data-stu-id="6110d-115">Permissions</span></span>  
 <span data-ttu-id="6110d-116">**Ver el nodo de copia de seguridad administrada es SQL Server Management Studio:** Para ver el nodo de **copia de seguridad administrada** en **Explorador de objetos**, debe ser administrador del sistema o tener los siguientes permisos concedidos específicamente a su cuenta de usuario:</span><span class="sxs-lookup"><span data-stu-id="6110d-116">**View Managed Backup Node is SQL Server Management Studio:** To view  **Managed Backup** node in **Object Explorer**, you must either be a System Admin or have the following permissions specifically granted to your user account:</span></span>  
  
-   `db_backupoperator`  
  
-   `VIEW SERVER STATE`  
  
-   `ALTER ANY CREDENTIAL`  
  
-   `VIEW ANY DEFINITION`  
  
-   <span data-ttu-id="6110d-117">`EXECUTE` en `smart_admin.fn_is_master_switch_on`.</span><span class="sxs-lookup"><span data-stu-id="6110d-117">`EXECUTE` on `smart_admin.fn_is_master_switch_on`.</span></span>  
  
-   <span data-ttu-id="6110d-118">`SELECT` en `smart_admin.fn_backup_instance_config`.</span><span class="sxs-lookup"><span data-stu-id="6110d-118">`SELECT` on `smart_admin.fn_backup_instance_config`.</span></span>  
  
 <span data-ttu-id="6110d-119">**Configurar Copia de seguridad administrada:** para configurar [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] en SQL Server Management Studio, debe ser un administrador del sistema o tener los permisos siguientes:</span><span class="sxs-lookup"><span data-stu-id="6110d-119">**To Configure Managed Backup:** to configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] in SQL Server Management Studio, you must be a System Administrator or have the following permissions:</span></span>  
  
 <span data-ttu-id="6110d-120">Pertenencia en el rol de base de datos `db_backupoperator`, con permisos `ALTER ANY CREDENTIAL` y permisos `EXECUTE` en el procedimiento almacenado de `sp_delete_backuphistory`.</span><span class="sxs-lookup"><span data-stu-id="6110d-120">Membership in `db_backupoperator` database role, with `ALTER ANY CREDENTIAL` permissions, and `EXECUTE` permissions on `sp_delete_backuphistory` stored procedure.</span></span>  
  
 <span data-ttu-id="6110d-121">`SELECT`permisos en la `smart_admin.fn_get_current_xevent_settings` función.</span><span class="sxs-lookup"><span data-stu-id="6110d-121">`SELECT` permissions on the `smart_admin.fn_get_current_xevent_settings` function.</span></span>  
  
 <span data-ttu-id="6110d-122">`EXECUTE`permisos en el `smart_admin.sp_get_backup_diagnostics` procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="6110d-122">`EXECUTE` permissions on the `smart_admin.sp_get_backup_diagnostics` stored procedure.</span></span> <span data-ttu-id="6110d-123">Además, requiere permisos `VIEW SERVER STATE` ya que internamente llama a otros objetos del sistema que requieren este permiso.</span><span class="sxs-lookup"><span data-stu-id="6110d-123">In addition, it requires `VIEW SERVER STATE` permissions as it internally calls other system objects that require this permission.</span></span>  
  
 <span data-ttu-id="6110d-124">Permisos `EXECUTE` en `smart_admin.sp_set_instance_backup` y `smart_admin.sp_backup_master_switch`.</span><span class="sxs-lookup"><span data-stu-id="6110d-124">`EXECUTE` permissions on `smart_admin.sp_set_instance_backup`, and `smart_admin.sp_backup_master_switch`.</span></span>  
  
## <a name="configure-ss_smartbackup-using-sql-server-management-studio"></a><span data-ttu-id="6110d-125">Configurar [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] con SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="6110d-125">Configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] using SQL Server Management Studio</span></span>  
 <span data-ttu-id="6110d-126">Desde el **Explorador de objetos**, expanda el nodo **Administración** y haga clic en **Copia de seguridad administrada**.</span><span class="sxs-lookup"><span data-stu-id="6110d-126">From the **object explorer**, expand the **Management** node, and right click on **Managed Backup**.</span></span> <span data-ttu-id="6110d-127">Seleccione **Configurar**.</span><span class="sxs-lookup"><span data-stu-id="6110d-127">Select **Configure**.</span></span> <span data-ttu-id="6110d-128">Esto abre el cuadro de diálogo **Copia de seguridad administrada**.</span><span class="sxs-lookup"><span data-stu-id="6110d-128">This opens the **Managed Backup** dialog.</span></span>  
  
 <span data-ttu-id="6110d-129">Active la opción **Habilitar Copia de seguridad administrada** y especifique los valores de configuración:</span><span class="sxs-lookup"><span data-stu-id="6110d-129">Check **Enable Managed Backup** option and specify the configuration values:</span></span>  
  
 <span data-ttu-id="6110d-130">El período de **retención de archivos** se especifica en días y debe estar entre 1 y 30.</span><span class="sxs-lookup"><span data-stu-id="6110d-130">The **File retention** period is specified in days and should be between 1 and 30.</span></span>  
  
 <span data-ttu-id="6110d-131">La **credencial SQL** que seleccione debe coincidir con la cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="6110d-131">The **SQL Credential** you select should match the storage account.</span></span> <span data-ttu-id="6110d-132">Si actualmente no tiene una credencial SQL que almacene la información de autenticación, puede crear una haciendo clic en **crear**.</span><span class="sxs-lookup"><span data-stu-id="6110d-132">If you currently do not have a SQL Credential that stores the authentication information, you can create one by clicking **Create**.</span></span> <span data-ttu-id="6110d-133">También puede crear la credencial con la instrucción CREATE CREDENTIAL de Transact-SQL y proporcionar el nombre de la cuenta de almacenamiento de Identidad y la clave de acceso de los parámetros SECRET.</span><span class="sxs-lookup"><span data-stu-id="6110d-133">You can also create credential by using the CREATE CREDENTIAL Transact-SQL statement, and provide the storage account name for Identity and the access key for the SECRET parameters.</span></span> <span data-ttu-id="6110d-134">Para obtener más información, vea [crear una credencial](../relational-databases/backup-restore/sql-server-backup-to-url.md#credential).</span><span class="sxs-lookup"><span data-stu-id="6110d-134">For more information, see [Create a Credential](../relational-databases/backup-restore/sql-server-backup-to-url.md#credential).</span></span>  
  
 <span data-ttu-id="6110d-135">Especifique la **dirección URL de almacenamiento** de la cuenta de almacenamiento de Azure, la credencial de SQL que almacena la información de autenticación para la cuenta de almacenamiento y el período de retención de los archivos de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6110d-135">Specify the **Storage URL** for the Azure storage account, the SQL Credential that stores the authentication information for the storage account, and the retention period for the backup files.</span></span>  
  
 <span data-ttu-id="6110d-136">El formato de la dirección URL de almacenamiento es: https:// \<StorageAccount> . BLOB.Core.Windows.net/</span><span class="sxs-lookup"><span data-stu-id="6110d-136">The storage URL format is: https://\<StorageAccount>.blob.core.windows.net/</span></span>  
  
 <span data-ttu-id="6110d-137">Para establecer la configuración de cifrado en el nivel de instancia, active la opción **Cifrar copia de seguridad** y especifique el algoritmo y un certificado o clave asimétrica que se usará para el cifrado.</span><span class="sxs-lookup"><span data-stu-id="6110d-137">To set the encryption settings at the instance level, check **Encrypt Backup** option, and specify the algorithm and a Certificate or Asymmetric Key to use for the encryption.</span></span>  <span data-ttu-id="6110d-138">Esto se establece en el nivel de instancia y se usa para todas las bases de datos creadas después de la aplicación de esta configuración.</span><span class="sxs-lookup"><span data-stu-id="6110d-138">This is set at the instance level is used for all the new databases created once this configuration has been applied.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="6110d-139">Este cuadro de diálogo no se puede usar para especificar las opciones de cifrado sin configurar [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6110d-139">This dialog cannot be used to specify the encryption options without configuring [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="6110d-140">Estas opciones de cifrado solo se aplican a las operaciones de [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6110d-140">These encryption options only apply to [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] operations.</span></span> <span data-ttu-id="6110d-141">Para usar el cifrado para otros procedimientos de copia de seguridad, vea [cifrado de copia de seguridad](../relational-databases/backup-restore/backup-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="6110d-141">To use encryption for other backup procedures, see [Backup Encryption](../relational-databases/backup-restore/backup-encryption.md).</span></span>  
  
### <a name="considerations"></a><span data-ttu-id="6110d-142">Consideraciones</span><span class="sxs-lookup"><span data-stu-id="6110d-142">Considerations</span></span>  
 <span data-ttu-id="6110d-143">Si configura [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] en el nivel de instancia, la configuración se aplica a cualquier base de datos creada posteriormente.</span><span class="sxs-lookup"><span data-stu-id="6110d-143">If you configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] at the instance level, the settings are applied to any new database created thereafter.</span></span>  <span data-ttu-id="6110d-144">Sin embargo, la base de datos existente no heredará automáticamente esta configuración.</span><span class="sxs-lookup"><span data-stu-id="6110d-144">However, existing database will not automatically inherit these settings.</span></span> <span data-ttu-id="6110d-145">Para configurar [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] en bases de datos existentes, debe configurar cada base de datos específicamente.</span><span class="sxs-lookup"><span data-stu-id="6110d-145">To configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] on previously existing databases, you must configure each database specifically.</span></span> <span data-ttu-id="6110d-146">Para obtener más información, vea [habilitar y configurar SQL Server copia de seguridad administrada en Azure para una base de datos](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md#DatabaseConfigure).</span><span class="sxs-lookup"><span data-stu-id="6110d-146">For more information, see [Enable and Configure SQL Server Managed Backup to Azure for a Database](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md#DatabaseConfigure).</span></span>  
  
 <span data-ttu-id="6110d-147">Si se ha [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] pausado mediante el `smart_admin.sp_backup_master_switch` , verá un mensaje de advertencia que indica que la copia de seguridad administrada está deshabilitada y que las configuraciones actuales no surtirán efecto... al intentar completar la configuración.</span><span class="sxs-lookup"><span data-stu-id="6110d-147">If [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] has been paused using the `smart_admin.sp_backup_master_switch`, you will see a warning message " Managed Backup is disabled and the current configurations will not take effect..." when you try to complete the configuration.</span></span> <span data-ttu-id="6110d-148">Use el `smart_admin.sp_backup_master_switch` almacenado y establezca el valor @new_state = 1.</span><span class="sxs-lookup"><span data-stu-id="6110d-148">Use the `smart_admin.sp_backup_master_switch` stored and set the @new_state=1.</span></span> <span data-ttu-id="6110d-149">Esto reanudará los servicios de [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] y aplicará las opciones de configuración.</span><span class="sxs-lookup"><span data-stu-id="6110d-149">This will resume [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] services and the configuration settings will take into effect.</span></span> <span data-ttu-id="6110d-150">Para obtener más información sobre el procedimiento almacenado, vea [smart_admin. sp_ backup_master_switch &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/managed-backup-sp-backup-master-switch-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="6110d-150">For more information on the stored procedure, see [smart_admin.sp_ backup_master_switch &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/managed-backup-sp-backup-master-switch-transact-sql).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6110d-151">Consulte también</span><span class="sxs-lookup"><span data-stu-id="6110d-151">See Also</span></span>  
 [<span data-ttu-id="6110d-152">Copia de seguridad administrada de SQL Server en Azure: interoperabilidad y coexistencia</span><span class="sxs-lookup"><span data-stu-id="6110d-152">SQL Server Managed Backup to Azure: Interoperability and Coexistence</span></span>](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md)  
  
  
