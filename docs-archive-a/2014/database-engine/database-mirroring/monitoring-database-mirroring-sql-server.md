---
title: Supervisar la creación de reflejo de la base de datos (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- monitoring [SQL Server], database mirroring
- database mirroring [SQL Server], monitoring
ms.assetid: a7b1b9b0-7c19-4acc-9de3-3a7c5e70694d
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 92179abd47df2ee40b48be8eade7ea3e7b9267af
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87746516"
---
# <a name="monitoring-database-mirroring-sql-server"></a><span data-ttu-id="d432d-102">Supervisar la creación de reflejo de la base de datos (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="d432d-102">Monitoring Database Mirroring (SQL Server)</span></span>
  <span data-ttu-id="d432d-103">En esta sección se presentan el Monitor de creación de reflejo de la base de datos y los procedimientos almacenados del sistema **sp_dbmmonitor** , se explica el funcionamiento de la supervisión de la creación de reflejo de la base de datos (incluido el **Trabajo del Monitor de creación de reflejo de la base de datos**) y se resume la información que se puede supervisar sobre las sesiones de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d432d-103">This section introduces Database Mirroring Monitor and the **sp_dbmmonitor** system stored procedures, explains how database mirroring monitoring works (including the **Database Mirroring Monitor Job)**, and summarizes the information that you can monitor about database mirroring sessions.</span></span> <span data-ttu-id="d432d-104">Además, en esta sección se describe cómo definir umbrales de advertencia para un conjunto de eventos de creación de reflejo de la base de datos predefinidos y cómo configurar alertas sobre cualquier evento de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d432d-104">Additionally, this section introduces how to define warning thresholds for a set of predefined database mirroring events and how to set up alerts on any database mirroring event.</span></span>  
  
 <span data-ttu-id="d432d-105">Se puede supervisar una base de datos reflejada durante una sesión de creación de reflejo para comprobar si hay flujo de datos y si éste es correcto.</span><span class="sxs-lookup"><span data-stu-id="d432d-105">You can monitor a mirrored database during a mirroring session to verify whether and how well data is flowing.</span></span> <span data-ttu-id="d432d-106">Para configurar y administrar la supervisión de una o varias bases de datos reflejadas en una instancia de servidor, se puede usar el Monitor de creación de reflejo de la base de datos o los procedimientos almacenados del sistema **sp_dbmmonitor** .</span><span class="sxs-lookup"><span data-stu-id="d432d-106">To set up and manage monitoring for one or more of the mirrored databases on a server instance, you can use either Database Mirroring Monitor or the **sp_dbmmonitor** system stored procedures.</span></span>  
  
 <span data-ttu-id="d432d-107">El trabajo de supervisión, **Trabajo del Monitor de creación de reflejo de la base de datos**, funciona en segundo plano, de forma independiente del Monitor de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d432d-107">A database mirroring monitoring job, **Database Mirroring Monitor Job**, operates in the background, independently of Database Mirroring Monitor.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="d432d-108">llama al **Trabajo del Monitor de creación de reflejo de la base de datos** a intervalos regulares (el valor predeterminado es una vez por minuto) y el trabajo llama a un procedimiento almacenado que actualiza el estado de la creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d432d-108">Agent calls **Database Mirroring Monitor Job** at regular intervals, the default is once a minute, and the job calls a stored procedure that updates mirroring status.</span></span> <span data-ttu-id="d432d-109">Si usa [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] para iniciar una sesión de creación de reflejo, el **Trabajo del Monitor de creación de reflejo de la base de datos** se crea automáticamente.</span><span class="sxs-lookup"><span data-stu-id="d432d-109">If you use [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] to start a mirroring session, **Database Mirroring Monitor Job** is created automatically.</span></span> <span data-ttu-id="d432d-110">Pero si solo usa ALTER DATABASE *<database_name>* SET PARTNER para iniciar la creación de reflejo, debe crear el trabajo ejecutando un procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="d432d-110">However, if you only use ALTER DATABASE *<database_name>* SET PARTNER to start mirroring, you must create the job by running a stored procedure.</span></span>  
  
 <span data-ttu-id="d432d-111">**En este tema:**</span><span class="sxs-lookup"><span data-stu-id="d432d-111">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="d432d-112">Supervisar el estado de la creación de reflejo</span><span class="sxs-lookup"><span data-stu-id="d432d-112">Monitoring Mirroring Status</span></span>](#MonitoringStatus)  
  
-   [<span data-ttu-id="d432d-113">Fuentes adicionales de información acerca de una base de datos reflejada</span><span class="sxs-lookup"><span data-stu-id="d432d-113">Additional Sources of Information About a Mirrored Database</span></span>](#AdditionalSources)  
  
-   [<span data-ttu-id="d432d-114">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="d432d-114">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="monitoring-mirroring-status"></a><a name="MonitoringStatus"></a> <span data-ttu-id="d432d-115">Supervisar el estado de la creación de reflejo</span><span class="sxs-lookup"><span data-stu-id="d432d-115">Monitoring Mirroring Status</span></span>  
 <span data-ttu-id="d432d-116">Para configurar y administrar la supervisión de una o varias bases de datos reflejadas en una instancia de servidor, se puede usar el Monitor de creación de reflejo de la base de datos o los procedimientos almacenados del sistema **dbmmonitor** .</span><span class="sxs-lookup"><span data-stu-id="d432d-116">To set up and manage monitoring for one or more of the mirrored databases on a server instance, you can use either Database Mirroring Monitor or the **dbmmonitor** system stored procedures.</span></span> <span data-ttu-id="d432d-117">Se puede supervisar una base de datos reflejada durante una sesión de creación de reflejo para comprobar si hay flujo de datos y si éste es correcto.</span><span class="sxs-lookup"><span data-stu-id="d432d-117">You can monitor a mirrored database during a mirroring session to verify whether and how well data is flowing.</span></span>  
  
 <span data-ttu-id="d432d-118">En concreto, la supervisión de una base de datos reflejada permite:</span><span class="sxs-lookup"><span data-stu-id="d432d-118">Specifically, monitoring a mirrored database enables you to:</span></span>  
  
-   <span data-ttu-id="d432d-119">Comprobar si la creación de reflejo funciona.</span><span class="sxs-lookup"><span data-stu-id="d432d-119">Verify that mirroring is functioning.</span></span>  
  
     <span data-ttu-id="d432d-120">El estado básico incluye saber si las dos instancias de servidor están activas, los servidores conectados y el registro se ha movido desde el servidor principal al reflejado.</span><span class="sxs-lookup"><span data-stu-id="d432d-120">Basic status includes knowing if the two server instances are up, that the servers are connected, and that the log is being moved from the principal to the mirror.</span></span>  
  
-   <span data-ttu-id="d432d-121">Determinar si la base de datos reflejada se mantiene al nivel de la base de datos principal.</span><span class="sxs-lookup"><span data-stu-id="d432d-121">Determine whether the mirror database is keeping up with the principal database.</span></span>  
  
     <span data-ttu-id="d432d-122">En el modo de alto rendimiento, un servidor principal puede desarrollar un registro de entradas pendientes del registro no enviadas que se van a enviar desde el servidor principal al reflejado.</span><span class="sxs-lookup"><span data-stu-id="d432d-122">During high-performance mode, a principal server can develop a backlog of unsent log records that still need to be sent from the principal server to the mirror server.</span></span> <span data-ttu-id="d432d-123">Además, en cualquier modo de operación, el servidor reflejado puede desarrollar un registro de entradas pendientes del registro que se han escrito en el archivo de registro, pero se deben restaurar en la base de datos reflejada.</span><span class="sxs-lookup"><span data-stu-id="d432d-123">Furthermore, in any operating mode, the mirror server can develop a backlog of unrestored log records that have been written to the log file but still need to be restored on the mirror database.</span></span>  
  
-   <span data-ttu-id="d432d-124">Determinar la pérdida de datos cuando la instancia de servidor principal deja de estar disponible en el modo de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="d432d-124">Determine how much data was lost when the principal server instance becomes unavailable during high-performance mode.</span></span>  
  
     <span data-ttu-id="d432d-125">Se puede determinar la pérdida de datos examinando la cantidad del registro de transacciones no enviadas (si existe) y el intervalo de tiempo en el que el servidor principal confirmó las transacciones perdidas.</span><span class="sxs-lookup"><span data-stu-id="d432d-125">You can determine data loss by looking at the amount of unsent transaction log (if any) and the time interval in which the lost transactions were committed at the principal.</span></span>  
  
-   <span data-ttu-id="d432d-126">Comparar el rendimiento actual con el anterior.</span><span class="sxs-lookup"><span data-stu-id="d432d-126">Compare current performance with past performance.</span></span>  
  
     <span data-ttu-id="d432d-127">Cuando se producen problemas, el administrador de la base de datos puede ver un historial del rendimiento de la creación de reflejo para obtener un mayor conocimiento del estado actual.</span><span class="sxs-lookup"><span data-stu-id="d432d-127">When problems are occurring, a database administrator can view a history of the mirroring performance to help in understanding the current state.</span></span> <span data-ttu-id="d432d-128">El examen del historial permite al usuario detectar tendencias en el rendimiento e identificar patrones de problemas de rendimiento (como, por ejemplo, las horas del día en que la red se ralentiza o si el número de comandos que se escriben en el registro es demasiado grande).</span><span class="sxs-lookup"><span data-stu-id="d432d-128">Looking at the history can allow the user to detect trends in performance, identify patterns of performance problems (such as times of day when the network is slow or the number of commands entering the log is very large).</span></span>  
  
-   <span data-ttu-id="d432d-129">Solucionar el flujo de datos reducido entre los asociados de la creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d432d-129">Troubleshoot the cause of reduced data flow between mirroring partners.</span></span>  
  
-   <span data-ttu-id="d432d-130">Establecer umbrales de advertencia en las estadísticas de rendimiento clave.</span><span class="sxs-lookup"><span data-stu-id="d432d-130">Set warning thresholds on key performance metrics.</span></span>  
  
     <span data-ttu-id="d432d-131">Si una nueva fila de estado contiene un valor que excede un umbral, se envía un evento informativo al registro de eventos de Windows.</span><span class="sxs-lookup"><span data-stu-id="d432d-131">If a new status row contains a value that exceeds a threshold, an informational event is sent to the Windows event log.</span></span> <span data-ttu-id="d432d-132">A continuación, un administrador del sistema puede configurar manualmente las alertas basadas en estos eventos.</span><span class="sxs-lookup"><span data-stu-id="d432d-132">A system administrator can then manually configure alerts based on these events.</span></span> <span data-ttu-id="d432d-133">Para obtener más información, vea [Usar alertas y umbrales de advertencia de las métricas de rendimiento de la creación de reflejo &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d432d-133">For more information, see [Use Warning Thresholds and Alerts on Mirroring Performance Metrics &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span></span>  
  
###  <a name="tools-for-monitoring-database-mirroring-status"></a><a name="tools_for_monitoring_dbm_status"></a> <span data-ttu-id="d432d-134">Herramientas para la supervisión del estado de la creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-134">Tools for Monitoring Database Mirroring Status</span></span>  
 <span data-ttu-id="d432d-135">Se puede supervisar el estado de la creación de reflejo mediante el Monitor de creación de reflejo de la base de datos o el procedimiento almacenado del sistema **sp_dbmmonitorresults** .</span><span class="sxs-lookup"><span data-stu-id="d432d-135">Mirroring status can be monitored using either Database Mirroring Monitor or the **sp_dbmmonitorresults** system stored procedure.</span></span> <span data-ttu-id="d432d-136">Los administradores del sistema, es decir, los miembros del rol fijo de servidor **sysadmin** , y los usuarios que un administrador del sistema ha agregado al rol fijo de base de datos **dbm_monitor** de la base de datos **msdb** , pueden usar estas herramientas para supervisar la creación de reflejo de la base de datos en cualquier base de datos reflejada de la instancia de servidor local.</span><span class="sxs-lookup"><span data-stu-id="d432d-136">These tools can be used to monitor database mirroring on any mirrored database on the local server instance by both System administrators, that is, members of the **sysadmin** fixed server role, and user who have been added to the **dbm_monitor** fixed database role in the **msdb** database by a system administrator.</span></span> <span data-ttu-id="d432d-137">Cuando se utilizan, un administrador del sistema puede actualizar manualmente el estado de la creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d432d-137">When using either tool, a system administrator can also manually refresh mirroring status.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d432d-138">Los administradores del sistema también pueden configurar y ver los umbrales de advertencia para examinar las estadísticas de rendimiento clave.</span><span class="sxs-lookup"><span data-stu-id="d432d-138">System administrators can also configure and view warning thresholds for key performance metrics.</span></span> <span data-ttu-id="d432d-139">Para obtener más información, vea [Usar alertas y umbrales de advertencia de las métricas de rendimiento de la creación de reflejo &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d432d-139">For more information, see [Use Warning Thresholds and Alerts on Mirroring Performance Metrics &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span></span>  
  
-   <span data-ttu-id="d432d-140">Monitor de creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-140">Database Mirroring Monitor</span></span>  
  
     <span data-ttu-id="d432d-141">El Monitor de creación de reflejo de la base de datos es una herramienta de la interfaz gráfica de usuario que permite a los administradores del sistema ver y actualizar el estado, y configurar los umbrales de advertencia en varias estadísticas de rendimiento clave.</span><span class="sxs-lookup"><span data-stu-id="d432d-141">Database Mirroring Monitor is a graphical user interface tool that enables system administrators to view and update status and to configure warning thresholds on several key performance metrics.</span></span> <span data-ttu-id="d432d-142">Los miembros del rol fijo de base de datos **dbm_monitor** también pueden usar el Monitor de creación de reflejo de la base de datos para ver la fila más reciente de la tabla de estado de la creación de reflejo, aunque no puedan actualizarla.</span><span class="sxs-lookup"><span data-stu-id="d432d-142">Database Mirroring Monitor can also be used by members of the **dbm_monitor** fixed database role to view the most recent row of the mirroring status table, though they cannot update the status table.</span></span>  
  
     <span data-ttu-id="d432d-143">En la página con pestañas **Estado** , el monitor muestra el estado de una base de datos seleccionada, incluidas las estadísticas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="d432d-143">The monitor displays the status, including performance metrics, for a selected database on the **Status** tabbed page.</span></span> <span data-ttu-id="d432d-144">El contenido de esta página procede de las instancias de servidor principal y reflejado.</span><span class="sxs-lookup"><span data-stu-id="d432d-144">The content of this page comes from both the principal and mirror server instances.</span></span> <span data-ttu-id="d432d-145">La página se actualiza de forma asincrónica, a medida que se recopila la información del estado a través de conexiones independientes en las instancias de servidor principal y reflejado.</span><span class="sxs-lookup"><span data-stu-id="d432d-145">The page is filled asynchronously as status is gathered through separate connections to the principal and mirror server instances.</span></span> <span data-ttu-id="d432d-146">El Monitor intenta actualizar la tabla de estado a intervalos de 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="d432d-146">The monitor tries to update the status table at 30-second intervals.</span></span> <span data-ttu-id="d432d-147">La actualización solo se realiza correctamente si la tabla no se ha actualizado en un intervalo de 15 segundos y el usuario es miembro del rol fijo de servidor **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="d432d-147">The update succeeds only if the table has not been updated within 15 seconds and the user is a member of the **sysadmin** fixed server role.</span></span> <span data-ttu-id="d432d-148">Para obtener un resumen de la información de la página **Estado** , vea [Estado que muestra el Monitor de creación de reflejo de la base de datos](#perf_metrics_of_dbm_monitor), más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="d432d-148">For a summary of the information reported on the **Status** page, see [Status Displayed by the Database Mirroring Monitor](#perf_metrics_of_dbm_monitor), later in this topic.</span></span>  
  
     <span data-ttu-id="d432d-149">Para obtener una introducción a la interfaz del Monitor de creación de reflejo de la base de datos, vea [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d432d-149">For an introduction to the Database Mirroring Monitor interface, see [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span></span> <span data-ttu-id="d432d-150">Para obtener más información sobre cómo iniciar el Monitor de creación de reflejo de base de datos, vea [Iniciar el Monitor de creación de reflejo de la base de datos &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="d432d-150">For information on launching Database Mirroring Monitor, see [Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="d432d-151">Procedimientos almacenados del sistema</span><span class="sxs-lookup"><span data-stu-id="d432d-151">System stored procedures</span></span>  
  
     <span data-ttu-id="d432d-152">También puede recuperar o actualizar el estado actual si ejecuta el procedimiento almacenado del sistema **sp_dbmmonitorresults** .</span><span class="sxs-lookup"><span data-stu-id="d432d-152">You can also retrieve or update the current status by running the **sp_dbmmonitorresults** system stored procedure.</span></span> <span data-ttu-id="d432d-153">Otros procedimientos almacenados dbmmonitor permiten configurar la supervisión, cambiar los parámetros de supervisión, ver el período de actualización actual o eliminar la supervisión en la instancia de servidor.</span><span class="sxs-lookup"><span data-stu-id="d432d-153">Other dbmmonitor stored procedures enable you to set up monitoring, change monitoring parameters, view the current update period, and drop monitoring on the server instance.</span></span>  
  
     <span data-ttu-id="d432d-154">En la siguiente tabla se presentan los procedimientos almacenados que se utilizan para administrar y usar la supervisión de la creación de reflejo de la base de datos de manera independiente del Monitor.</span><span class="sxs-lookup"><span data-stu-id="d432d-154">The following table introduces the stored procedures for managing and using database mirroring monitoring independently of the Database Mirroring Monitor.</span></span>  
  
    |<span data-ttu-id="d432d-155">Procedimiento</span><span class="sxs-lookup"><span data-stu-id="d432d-155">Procedure</span></span>|<span data-ttu-id="d432d-156">Descripción</span><span class="sxs-lookup"><span data-stu-id="d432d-156">Description</span></span>|  
    |---------------|-----------------|  
    |[<span data-ttu-id="d432d-157">sp_dbmmonitoraddmonitoring</span><span class="sxs-lookup"><span data-stu-id="d432d-157">sp_dbmmonitoraddmonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql)|<span data-ttu-id="d432d-158">Crea un trabajo que actualiza periódicamente la información de estado para todas las bases de datos reflejadas en la instancia de servidor.</span><span class="sxs-lookup"><span data-stu-id="d432d-158">Creates a job that periodically updates the status information for every mirrored database on the server instance.</span></span>|  
    |[<span data-ttu-id="d432d-159">sp_dbmmonitorchangemonitoring</span><span class="sxs-lookup"><span data-stu-id="d432d-159">sp_dbmmonitorchangemonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql)|<span data-ttu-id="d432d-160">Cambia el valor de un parámetro de supervisión de la creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d432d-160">Changes the value of a database mirroring monitoring parameter.</span></span>|  
    |[<span data-ttu-id="d432d-161">sp_dbmmonitorhelpmonitoring</span><span class="sxs-lookup"><span data-stu-id="d432d-161">sp_dbmmonitorhelpmonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpmonitoring-transact-sql)|<span data-ttu-id="d432d-162">Devuelve el período de actualización actual.</span><span class="sxs-lookup"><span data-stu-id="d432d-162">Returns the current update period.</span></span>|  
    |[<span data-ttu-id="d432d-163">sp_dbmmonitorresults</span><span class="sxs-lookup"><span data-stu-id="d432d-163">sp_dbmmonitorresults</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql)|<span data-ttu-id="d432d-164">Devuelve las filas de estado de una base de datos supervisada y permite elegir si el procedimiento obtiene de antemano el último estado.</span><span class="sxs-lookup"><span data-stu-id="d432d-164">Returns status rows for a monitored database and allows you to choose whether the procedure obtains the latest status beforehand.</span></span>|  
    |[<span data-ttu-id="d432d-165">sp_dbmmonitordropmonitoring</span><span class="sxs-lookup"><span data-stu-id="d432d-165">sp_dbmmonitordropmonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql)|<span data-ttu-id="d432d-166">Detiene y elimina el trabajo de supervisión de la creación de reflejo para todas las bases de datos de la instancia de servidor.</span><span class="sxs-lookup"><span data-stu-id="d432d-166">Stops and deletes the mirroring monitor job for all the databases on the server instance.</span></span>|  
  
     <span data-ttu-id="d432d-167">Se pueden utilizar los procedimientos almacenados del sistema **dbmmonitor** como un complemento del Monitor de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d432d-167">The **dbmmonitor** system stored procedures can be used as an adjunct to the Database Mirroring Monitor.</span></span> <span data-ttu-id="d432d-168">Por ejemplo, incluso si la supervisión se ha configurado mediante **sp_dbmmonitoraddmonitoring**, se puede usar el Monitor de creación de reflejo de la base de datos para ver el estado.</span><span class="sxs-lookup"><span data-stu-id="d432d-168">For example, even if monitoring was configured using **sp_dbmmonitoraddmonitoring**, Database Mirroring Monitor can be used to view the status.</span></span>  
  
### <a name="how-monitoring-works"></a><span data-ttu-id="d432d-169">Cómo funciona la supervisión</span><span class="sxs-lookup"><span data-stu-id="d432d-169">How Monitoring Works</span></span>  
 <span data-ttu-id="d432d-170">En esta sección se presenta la tabla de estado de la creación de reflejo de la base de datos, el monitor y el trabajo del Monitor de creación de reflejo de la base de datos, cómo los usuarios pueden supervisar el estado de la creación de reflejo y cómo se puede quitar el trabajo de supervisión.</span><span class="sxs-lookup"><span data-stu-id="d432d-170">This section introduces the database mirroring status table, database mirroring monitor job and the monitor, how users can monitor database mirroring status, and how the monitoring job can be dropped.</span></span>  
  
#### <a name="database-mirroring-status-table"></a><span data-ttu-id="d432d-171">Tabla de estado de la creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-171">Database Mirroring Status Table</span></span>  
 <span data-ttu-id="d432d-172">El estado de la creación de reflejo de la base de datos se almacena en una tabla de estado interna y no documentada de la base de datos **msdb** .</span><span class="sxs-lookup"><span data-stu-id="d432d-172">Database mirroring status is stored in an internal, undocumented database mirroring status table in the **msdb** database.</span></span> <span data-ttu-id="d432d-173">La tabla de estado se crea de forma automática la primera vez que se actualiza el estado de la creación de reflejo en la instancia de servidor.</span><span class="sxs-lookup"><span data-stu-id="d432d-173">This status table is automatically created the first time the mirroring status is updated on the server instance.</span></span>  
  
 <span data-ttu-id="d432d-174">La tabla de estado puede actualizarse de forma automática o manual por un administrador del sistema, con un intervalo de actualización mínimo de 15 segundos.</span><span class="sxs-lookup"><span data-stu-id="d432d-174">The status table may be updated either automatically or manually by a system administrator, with a minimum update interval of 15 seconds.</span></span> <span data-ttu-id="d432d-175">Este mínimo evita que las instancias de servidor se sobrecarguen con solicitudes de estado.</span><span class="sxs-lookup"><span data-stu-id="d432d-175">The 15 second minimum prevents server instances from being overloaded with status requests.</span></span>  
  
 <span data-ttu-id="d432d-176">El Monitor de creación de reflejo de la base de datos o el trabajo del Monitor, si se está ejecutando, actualizan de forma automática la tabla de estado.</span><span class="sxs-lookup"><span data-stu-id="d432d-176">The status table is updated automatically by both Database Mirroring Monitor and the database mirroring monitor job, if running.</span></span> <span data-ttu-id="d432d-177">El**Trabajo del Monitor de creación de reflejo de la base de datos** actualiza la tabla de forma predeterminada una vez por minuto (un administrador del sistema puede especificar un período de actualización de 1 a 120 minutos).</span><span class="sxs-lookup"><span data-stu-id="d432d-177">**Database Mirroring Monitor Job** updates the table once a minute by default (a system administrator can specify an update period of 1 to 120 minutes).</span></span> <span data-ttu-id="d432d-178">Por su parte, el Monitor de creación de reflejo de la base de datos actualiza la tabla de forma automática cada 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="d432d-178">Database Mirroring Monitor, in contrast, updates the table automatically every 30 seconds.</span></span> <span data-ttu-id="d432d-179">Para llevar a cabo estas actualizaciones, el **Trabajo del Monitor de creación de reflejo de la base de datos** y el Monitor de creación de reflejo de la base de datos llaman al procedimiento **sp_dbmmonitorupdate**.</span><span class="sxs-lookup"><span data-stu-id="d432d-179">For these updates, **Database Mirroring Monitor Job** and Database Mirroring Monitor call **sp_dbmmonitorupdate**.</span></span>  
  
 <span data-ttu-id="d432d-180">La primera vez que se ejecuta **sp_dbmmonitorupdate** , crea la tabla de **estado de la creación de reflejo de la base de datos** y el rol fijo de base de datos **dbm_monitor** en la base de datos **msdb** .</span><span class="sxs-lookup"><span data-stu-id="d432d-180">The first time **sp_dbmmonitorupdate** runs, it creates the **database mirroring status** table and the **dbm_monitor** fixed database role in the **msdb** database.</span></span> <span data-ttu-id="d432d-181">**sp_dbmmonitorupdate** actualiza el estado de la creación de reflejo de la base de datos mediante la inserción de una nueva fila en cada una de las bases de datos reflejadas de la instancia de servidor; para obtener más información, vea "Tabla de estado de la creación de reflejo de la base de datos", más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="d432d-181">**sp_dbmmonitorupdate** usually updates the mirroring status by inserting a new row into the status table for every mirrored database on the server instance; for more information, see "Database Mirroring Status Table," later in this topic.</span></span> <span data-ttu-id="d432d-182">Este procedimiento también evalúa las estadísticas de rendimiento de las nuevas filas y trunca las filas anteriores al período de retención actual (el valor predeterminado es 7 días).</span><span class="sxs-lookup"><span data-stu-id="d432d-182">This procedure also evaluates the performance metrics in the new rows and truncates rows older than the current retention period (the default is 7 days).</span></span> <span data-ttu-id="d432d-183">Para obtener más información, vea [sp_dbmmonitorupdate &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d432d-183">For more information, see [sp_dbmmonitorupdate &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d432d-184">A menos que un miembro del rol fijo de servidor **sysadmin** use el Monitor de creación de reflejo de la base de datos, la tabla de estado solo se actualiza automáticamente si el **Trabajo del Monitor de creación de reflejo de la base de datos** existe y un Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] está en ejecución.</span><span class="sxs-lookup"><span data-stu-id="d432d-184">Unless Database Mirroring Monitor is currently being used by a member of the **sysadmin** fixed server role, the status table is automatically updated only if the **Database Mirroring Monitor Job** exists and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is running.</span></span>  
  
#### <a name="database-mirroring-monitor-job"></a><span data-ttu-id="d432d-185">Trabajo del Monitor de creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-185">Database Mirroring Monitor Job</span></span>  
 <span data-ttu-id="d432d-186">El trabajo de supervisión, **Trabajo del Monitor de creación de reflejo de la base de datos**, funciona de forma independiente dl Monitor de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d432d-186">The database mirroring monitoring job, **Database Mirroring Monitor Job**, operates independently of Database Mirroring Monitor.</span></span> <span data-ttu-id="d432d-187">El**Trabajo del Monitor de creación de reflejo de la base de datos** solo se crea automáticamente si se usa [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] para iniciar una sesión de creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d432d-187">**Database Mirroring Monitor Job** is created automatically only if [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] is used to start a mirroring session.</span></span> <span data-ttu-id="d432d-188">Si los comandos ALTER DATABASE *database_name* SET PARTNER se usan siempre para iniciar la sesión de creación de reflejo de la base de datos, el trabajo solo existirá si el administrador del sistema ejecuta el procedimiento almacenado **sp_dbmmonitoraddmonitoring** .</span><span class="sxs-lookup"><span data-stu-id="d432d-188">If ALTER DATABASE *database_name* SET PARTNER commands are always used to start mirroring, the job exists only if the system administrator runs the **sp_dbmmonitoraddmonitoring** stored procedure.</span></span>  
  
 <span data-ttu-id="d432d-189">Suponiendo que el Agente **esté en ejecución, después de crear el** Trabajo del Monitor de creación de reflejo de la base de datos [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , se llama al trabajo una vez por minuto de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="d432d-189">After **Database Mirroring Monitor Job** is created, assuming that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is running, the job is called once a minute, by default.</span></span> <span data-ttu-id="d432d-190">Después, el trabajo llama al procedimiento almacenado del sistema **sp_dbmmonitorupdate** .</span><span class="sxs-lookup"><span data-stu-id="d432d-190">The job then calls the **sp_dbmmonitorupdate** system stored procedure.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="d432d-191">El Agente llama al **Trabajo del Monitor de creación de reflejo de la base de datos** una vez por minuto de forma predeterminada, y el trabajo llama a **sp_dbmmonitorupdate** para actualizar la tabla de estado.</span><span class="sxs-lookup"><span data-stu-id="d432d-191">Agent calls **Database Mirroring Monitor Job** once a minute, by default, and the job calls **sp_dbmmonitorupdate** to update the status table.</span></span> <span data-ttu-id="d432d-192">Los administradores del sistema pueden cambiar el período de actualización con el procedimiento almacenado del sistema **sp_dbmmonitorchangemonitoring** y ver el período de actualización actual con el procedimiento almacenado del sistema **sp_dbmmonitorchangemonitoring** .</span><span class="sxs-lookup"><span data-stu-id="d432d-192">System administrators can change the update period by using the **sp_dbmmonitorchangemonitoring** system stored procedure, and they can view the current update period by using the **sp_dbmmonitorchangemonitoring** system stored procedure.</span></span> <span data-ttu-id="d432d-193">Para obtener más información, vea [sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql) y [sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d432d-193">For more information, see [sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql) and [sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql).</span></span>  
  
#### <a name="monitoring-database-mirroring-status-by-system-administrators"></a><span data-ttu-id="d432d-194">Supervisar el estado de la creación de reflejo de la base de datos (por los administradores del sistema)</span><span class="sxs-lookup"><span data-stu-id="d432d-194">Monitoring Database Mirroring Status (by System Administrators)</span></span>  
 <span data-ttu-id="d432d-195">Los miembros del rol fijo de servidor **sysadmin** pueden ver y actualizar la tabla de estado.</span><span class="sxs-lookup"><span data-stu-id="d432d-195">Members of the **sysadmin** fixed server role can view and update the status table</span></span>  
  
-   <span data-ttu-id="d432d-196">Usar el Monitor de creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-196">Using Database Mirroring Monitor</span></span>  
  
     <span data-ttu-id="d432d-197">Cuando se utiliza el Monitor de creación de reflejo de la base de datos, un administrador del sistema puede actualizar manualmente la página **Estado** , el árbol de navegación o la página **Historial** .</span><span class="sxs-lookup"><span data-stu-id="d432d-197">When using Database Mirroring Monitor, a system administrator can manually refresh the **Status** page, navigation tree, or **History** page.</span></span> <span data-ttu-id="d432d-198">De este modo, se actualiza también la tabla de estado, a menos que se haya actualizado en los 15 segundos anteriores.</span><span class="sxs-lookup"><span data-stu-id="d432d-198">This also updates the status table, unless it has already been updated within the previous 15 seconds.</span></span>  
  
     <span data-ttu-id="d432d-199">Para ver el historial del estado de la creación de reflejo de una determinada instancia de servidor, el administrador del sistema también puede hacer clic sobre el botón **Historial** de una instancia de servidor (en la página **Estado** ).</span><span class="sxs-lookup"><span data-stu-id="d432d-199">To view the history of mirroring status on a given server instance, the system administrator can also click the **History** button for a server instance (on the **Status** page).</span></span> <span data-ttu-id="d432d-200">El historial se muestra en el cuadro de diálogo **Historial de creación de reflejo de la base de datos** .</span><span class="sxs-lookup"><span data-stu-id="d432d-200">The history is displayed in the **Database Mirroring History** dialog box.</span></span> <span data-ttu-id="d432d-201">Después, el administrador del sistema puede ver algunas o todas las filas de la tabla de estado de la instancia de servidor.</span><span class="sxs-lookup"><span data-stu-id="d432d-201">There, the system administrator can view some or all of the rows in the status table of the server instance.</span></span>  
  
     <span data-ttu-id="d432d-202">Para obtener información acerca de las estadísticas de la página **Estado** , vea Estadísticas de rendimiento que muestra el "Monitor de creación de reflejo de la base de datos", más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="d432d-202">For information about the **Status** page metrics, see Performance Metrics Displayed by the "Database Mirroring Monitor," later in this topic.</span></span>  
  
-   <span data-ttu-id="d432d-203">Usar **sp_dbmmonitorresults**</span><span class="sxs-lookup"><span data-stu-id="d432d-203">Using **sp_dbmmonitorresults**</span></span>  
  
     <span data-ttu-id="d432d-204">Los administradores del sistema pueden usar el procedimiento almacenado del sistema **sp_dbmmonitorresults** para ver y, opcionalmente, actualizar la tabla de estado, si esta no se ha actualizado en los 15 segundos anteriores.</span><span class="sxs-lookup"><span data-stu-id="d432d-204">System administrators can use the **sp_dbmmonitorresults** system stored procedure to view and, optionally, to update the status table, if it has not been updated within the previous 15 seconds.</span></span> <span data-ttu-id="d432d-205">Este procedimiento llama al procedimiento **sp_dbmmonitorupdate** y devuelve una o más filas del historial, en función de la cantidad solicitada en la llamada del procedimiento.</span><span class="sxs-lookup"><span data-stu-id="d432d-205">This procedure calls the **sp_dbmmonitorupdate** procedure and returns one or more history rows, depending on the amount requested in the procedure call.</span></span> <span data-ttu-id="d432d-206">Para obtener más información sobre el estado en su conjunto de resultados, vea [sp_dbmmonitorresults &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d432d-206">For information about the status in its results set, see [sp_dbmmonitorresults &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql).</span></span>  
  
#### <a name="monitoring-database-mirroring-status-by-dbm_monitor-members"></a><span data-ttu-id="d432d-207">Supervisar el estado de la creación de reflejo de la base de datos (por los miembros dbm_monitor)</span><span class="sxs-lookup"><span data-stu-id="d432d-207">Monitoring Database Mirroring Status (by dbm_monitor Members)</span></span>  
 <span data-ttu-id="d432d-208">Como se ha mencionado, la primera vez que se ejecuta **sp_dbmmonitorupdate** , se crea el rol fijo de base de datos **dbm_monitor** en la base de datos **msdb** .</span><span class="sxs-lookup"><span data-stu-id="d432d-208">As mentioned, the first time **sp_dbmmonitorupdate** runs, it creates the **dbm_monitor** fixed database role in the **msdb** database.</span></span> <span data-ttu-id="d432d-209">Los miembros del rol fijo de base de datos **dbm_monitor** pueden ver el estado actual de la creación de reflejo mediante el Monitor de creación de reflejo de la base de datos o el procedimiento almacenado **sp_dbmmonitorresults** .</span><span class="sxs-lookup"><span data-stu-id="d432d-209">Members of the **dbm_monitor** fixed database role can view the existing mirroring status by using either Database Mirroring Monitor or the **sp_dbmmonitorresults** stored procedure.</span></span> <span data-ttu-id="d432d-210">No obstante, estos usuarios no pueden actualizar la tabla de estado.</span><span class="sxs-lookup"><span data-stu-id="d432d-210">But these users cannot update the status table.</span></span> <span data-ttu-id="d432d-211">Para conocer la antigüedad del estado mostrado, un usuario puede examinar las horas en las etiquetas **registro del servidor principal ( ***\<time>*** )** y registro del servidor **reflejado ( ***\<time>*** )** de la página **Estado** .</span><span class="sxs-lookup"><span data-stu-id="d432d-211">To learn the age of the displayed status a user can look at the times in the **Principal log (***\<time>***)** and **Mirror log (***\<time>***)** labels on the **Status** page.</span></span>  
  
 <span data-ttu-id="d432d-212">Los miembros del rol fijo de base de datos **dbm_monitor** dependen del **Trabajo del Monitor de creación de reflejo de la base de datos** para actualizar la tabla de estado a intervalos periódicos.</span><span class="sxs-lookup"><span data-stu-id="d432d-212">Members of the **dbm_monitor** fixed database role depend on the **Database Mirroring Monitor Job** to update the status table at regular intervals.</span></span> <span data-ttu-id="d432d-213">Si el trabajo no existe o el Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] está inactivo, el estado pasa a estar cada vez más desusado y es posible que no refleje la configuración de la sesión de creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d432d-213">If the job does not exist or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is stopped, the status becomes increasingly stale and may no longer reflect the configuration of the mirroring session.</span></span> <span data-ttu-id="d432d-214">Por ejemplo, después de una conmutación por error, es posible que parezca que los asociados comparten el mismo rol (de servidor principal o reflejado) o que el servidor principal actual se muestre como reflejado, a la vez que el servidor reflejado actual se muestra como principal.</span><span class="sxs-lookup"><span data-stu-id="d432d-214">For example, after a failover, the partners might appear to share the same role-principal or mirror, or the current principal server might be shown as the mirror, while the current mirror server is shown as the principal.</span></span>  
  
#### <a name="dropping-the-database-mirroring-monitor-job"></a><span data-ttu-id="d432d-215">Quitar el Trabajo del Monitor de creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-215">Dropping the Database Mirroring Monitor Job</span></span>  
 <span data-ttu-id="d432d-216">El **Trabajo del Monitor de creación de reflejo de la base de datos**se mantendrá hasta su eliminación.</span><span class="sxs-lookup"><span data-stu-id="d432d-216">The database mirroring monitor job, **Database Mirroring Monitor Job**, remains until it is dropped.</span></span> <span data-ttu-id="d432d-217">El administrador del sistema debe administrar el trabajo de supervisión.</span><span class="sxs-lookup"><span data-stu-id="d432d-217">The monitoring job must be managed by the system administrator.</span></span> <span data-ttu-id="d432d-218">Para quitar el **Trabajo del Monitor de creación de reflejo de la base de datos**, use **sp_dbmmonitordropmonitoring**.</span><span class="sxs-lookup"><span data-stu-id="d432d-218">To drop **Database Mirroring Monitor Job**, use **sp_dbmmonitordropmonitoring**.</span></span> <span data-ttu-id="d432d-219">Para obtener más información, vea [sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d432d-219">For more information, see [sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql).</span></span>  
  
###  <a name="status-displayed-by-the-database-mirroring-monitor"></a><a name="perf_metrics_of_dbm_monitor"></a> <span data-ttu-id="d432d-220">Estado que muestra el Monitor de creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-220">Status Displayed by the Database Mirroring Monitor</span></span>  
 <span data-ttu-id="d432d-221">En la página **Estado** del Monitor de creación de reflejo de la base de datos se describen los asociados y el estado de la sesión de creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d432d-221">The **Status** page of the Database Mirroring Monitor describes the partners, and also the state of the mirroring session.</span></span> <span data-ttu-id="d432d-222">El estado incluye las estadísticas de rendimiento como, por ejemplo, el estado del registro de transacciones y otra información que se utiliza para realizar una estimación del tiempo necesario para completar una conmutación por error y la potencial pérdida de datos, si no se sincroniza la sesión.</span><span class="sxs-lookup"><span data-stu-id="d432d-222">The status includes performance metrics such as the state of the transaction log and other information that is intended to help currently estimate the time required to complete a failover and the potential of data loss, if the session is not synchronized.</span></span> <span data-ttu-id="d432d-223">Además, en la página **Estado** se muestra el estado y la información sobre la sesión de creación de reflejo en general.</span><span class="sxs-lookup"><span data-stu-id="d432d-223">In addition, the **Status** page displays status and information about the mirroring session in general.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d432d-224">Para obtener una introducción sobre el Monitor de creación de reflejo de la base de datos y de la página **Estado** , vea [Herramientas para la supervisión del estado de la creación de reflejo de la base de datos](#tools_for_monitoring_dbm_status), anteriormente en este tema.</span><span class="sxs-lookup"><span data-stu-id="d432d-224">For an introduction to the Database Mirroring Monitor and **Status** page, see [Tools for Monitoring Database Mirroring Status](#tools_for_monitoring_dbm_status), earlier in this topic.</span></span>  
  
 <span data-ttu-id="d432d-225">La información que se proporciona de cada una de ellas se resume en las secciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="d432d-225">The information provided for each of these is summarized in the following sections.</span></span>  
  
#### <a name="partners"></a><span data-ttu-id="d432d-226">Asociados</span><span class="sxs-lookup"><span data-stu-id="d432d-226">Partners</span></span>  
 <span data-ttu-id="d432d-227">En la página **Estado** se muestra la siguiente información para cada uno de los asociados:</span><span class="sxs-lookup"><span data-stu-id="d432d-227">The **Status** page displays the following information for each of the partners:</span></span>  
  
-   <span data-ttu-id="d432d-228">Instancia del servidor</span><span class="sxs-lookup"><span data-stu-id="d432d-228">Server instance</span></span>  
  
     <span data-ttu-id="d432d-229">Nombre de la instancia de servidor cuyo estado se muestra en la fila **Estado** .</span><span class="sxs-lookup"><span data-stu-id="d432d-229">Name of the server instance whose status is displayed in the **Status** row.</span></span>  
  
-   <span data-ttu-id="d432d-230">Rol actual</span><span class="sxs-lookup"><span data-stu-id="d432d-230">Current role</span></span>  
  
     <span data-ttu-id="d432d-231">Rol actual de la instancia de servidor.</span><span class="sxs-lookup"><span data-stu-id="d432d-231">Current role of the server instance.</span></span> <span data-ttu-id="d432d-232">Los estados posibles son:</span><span class="sxs-lookup"><span data-stu-id="d432d-232">The possible states are:</span></span>  
  
    -   <span data-ttu-id="d432d-233">Principal</span><span class="sxs-lookup"><span data-stu-id="d432d-233">Principal</span></span>  
  
    -   <span data-ttu-id="d432d-234">Reflejo</span><span class="sxs-lookup"><span data-stu-id="d432d-234">Mirror</span></span>  
  
-   <span data-ttu-id="d432d-235">Estado de creación de reflejo</span><span class="sxs-lookup"><span data-stu-id="d432d-235">Mirroring state</span></span>  
  
     <span data-ttu-id="d432d-236">Los estados posibles son:</span><span class="sxs-lookup"><span data-stu-id="d432d-236">The possible states are:</span></span>  
  
    -   <span data-ttu-id="d432d-237">Desconocido</span><span class="sxs-lookup"><span data-stu-id="d432d-237">Unknown</span></span>  
  
    -   <span data-ttu-id="d432d-238">Sincronizando</span><span class="sxs-lookup"><span data-stu-id="d432d-238">Synchronizing</span></span>  
  
    -   <span data-ttu-id="d432d-239">Sincronizado</span><span class="sxs-lookup"><span data-stu-id="d432d-239">Synchronized</span></span>  
  
    -   <span data-ttu-id="d432d-240">Suspended</span><span class="sxs-lookup"><span data-stu-id="d432d-240">Suspended</span></span>  
  
    -   <span data-ttu-id="d432d-241">Escenario desconectado</span><span class="sxs-lookup"><span data-stu-id="d432d-241">Disconnected</span></span>  
  
-   <span data-ttu-id="d432d-242">Conexión del testigo</span><span class="sxs-lookup"><span data-stu-id="d432d-242">Witness connection</span></span>  
  
     <span data-ttu-id="d432d-243">Estado de conexión del testigo.</span><span class="sxs-lookup"><span data-stu-id="d432d-243">Connection status of the witness.</span></span> <span data-ttu-id="d432d-244">Los estados posibles son:</span><span class="sxs-lookup"><span data-stu-id="d432d-244">The possible states are:</span></span>  
  
    -   <span data-ttu-id="d432d-245">Desconocido</span><span class="sxs-lookup"><span data-stu-id="d432d-245">Unknown</span></span>  
  
    -   <span data-ttu-id="d432d-246">Conectado</span><span class="sxs-lookup"><span data-stu-id="d432d-246">Connected</span></span>  
  
    -   <span data-ttu-id="d432d-247">Desconectado</span><span class="sxs-lookup"><span data-stu-id="d432d-247">Disconnected.</span></span>  
  
#### <a name="log-on-the-principal-server"></a><span data-ttu-id="d432d-248">Registro en el servidor principal</span><span class="sxs-lookup"><span data-stu-id="d432d-248">Log on the Principal Server</span></span>  
 <span data-ttu-id="d432d-249">En la página **Estado** se muestra la siguiente información acerca del estado del registro en el servidor principal, desde la hora indicada:</span><span class="sxs-lookup"><span data-stu-id="d432d-249">The **Status** page displays the following information about the status of the log on the principal server as of the indicated time:</span></span>  
  
-   <span data-ttu-id="d432d-250">Registro sin enviar</span><span class="sxs-lookup"><span data-stu-id="d432d-250">Unsent log</span></span>  
  
     <span data-ttu-id="d432d-251">La cantidad de registro que espera en la cola de envío en kilobytes (KB).</span><span class="sxs-lookup"><span data-stu-id="d432d-251">The amount of log waiting in the send queue in kilobytes (KB).</span></span>  
  
-   <span data-ttu-id="d432d-252">Transacción no enviada más antigua</span><span class="sxs-lookup"><span data-stu-id="d432d-252">Oldest unsent transaction</span></span>  
  
     <span data-ttu-id="d432d-253">Antigüedad de la transacción sin enviar más antigua de la cola de envío.</span><span class="sxs-lookup"><span data-stu-id="d432d-253">Age of the oldest unsent transaction in the send queue.</span></span> <span data-ttu-id="d432d-254">La antigüedad de esta transacción indica la cantidad de minutos de transacciones que no se han enviado aún a la instancia del servidor reflejado.</span><span class="sxs-lookup"><span data-stu-id="d432d-254">The age of this transaction indicates how many minutes of transactions have not yet been sent to the mirror server instance.</span></span> <span data-ttu-id="d432d-255">Este valor ayuda a medir la posibilidad de pérdida de datos con respecto a la hora.</span><span class="sxs-lookup"><span data-stu-id="d432d-255">This value helps measure the potential for data loss in terms of time.</span></span>  
  
-   <span data-ttu-id="d432d-256">Hora de envío de registro (estimada)</span><span class="sxs-lookup"><span data-stu-id="d432d-256">Time to send log (estimated)</span></span>  
  
     <span data-ttu-id="d432d-257">Número estimado de minutos que requiere la instancia del servidor principal para enviar el registro que se encuentra actualmente en la cola de envío a la instancia del servidor reflejado basándose en la tasa de envío actual.</span><span class="sxs-lookup"><span data-stu-id="d432d-257">Estimated number of minutes the principal server instance requires to send the log that is currently in the send queue to the mirror server instance based on the current send rate.</span></span> <span data-ttu-id="d432d-258">La hora real de envío del registro se verá afectada por la tasa de transacciones entrantes, la cual puede variar de forma notable.</span><span class="sxs-lookup"><span data-stu-id="d432d-258">The actual time to send the log will be affected by the rate of incoming transactions, which can vary significantly.</span></span> <span data-ttu-id="d432d-259">Pero el valor **Hora de envío de registro (estimada)** puede ser útil para una estimación aproximada del tiempo necesario para una conmutación por error manual.</span><span class="sxs-lookup"><span data-stu-id="d432d-259">However, the **Time to send log (estimated)** value can be useful for roughly estimating the time required for a manual failover.</span></span>  
  
-   <span data-ttu-id="d432d-260">Tasa actual de envío</span><span class="sxs-lookup"><span data-stu-id="d432d-260">Current send rate</span></span>  
  
     <span data-ttu-id="d432d-261">Tasa a la que se envían las transacciones a la instancia del servidor reflejado en KB por segundo.</span><span class="sxs-lookup"><span data-stu-id="d432d-261">Rate at which transactions are being sent to the mirror server instance in KB per second.</span></span>  
  
-   <span data-ttu-id="d432d-262">Tasa actual de nuevas transacciones</span><span class="sxs-lookup"><span data-stu-id="d432d-262">Current rate of new transactions</span></span>  
  
     <span data-ttu-id="d432d-263">Tasa a la que se escriben las transacciones entrantes en el registro del servidor principal en KB por segundo.</span><span class="sxs-lookup"><span data-stu-id="d432d-263">Rate at which incoming transactions are being entered into the principal's log in KB per second.</span></span> <span data-ttu-id="d432d-264">Para determinar si la creación de reflejo se retrasa, se mantiene o mejora, compare este valor con **Hora de envío de registro (estimada)** .</span><span class="sxs-lookup"><span data-stu-id="d432d-264">To determine whether mirroring is falling behind, staying up, or catching up, compare this value to the **Estimated time to send log** value.</span></span>  
  
#### <a name="log-on-the-mirror-server"></a><span data-ttu-id="d432d-265">Registro en el servidor reflejado</span><span class="sxs-lookup"><span data-stu-id="d432d-265">Log on the Mirror Server</span></span>  
 <span data-ttu-id="d432d-266">En la página **Estado** se muestra la siguiente información acerca del estado del registro en el servidor reflejado, desde la hora indicada:</span><span class="sxs-lookup"><span data-stu-id="d432d-266">The **Status** page displays the following information about the status of the log on the mirror server as of the indicated time:</span></span>  
  
-   <span data-ttu-id="d432d-267">Registro sin restaurar</span><span class="sxs-lookup"><span data-stu-id="d432d-267">Unrestored log</span></span>  
  
     <span data-ttu-id="d432d-268">La cantidad de registro que espera en la cola de puesta al día en KB.</span><span class="sxs-lookup"><span data-stu-id="d432d-268">The amount of log waiting in the redo queue in KB.</span></span>  
  
-   <span data-ttu-id="d432d-269">Tiempo para restaurar registro (estimado)</span><span class="sxs-lookup"><span data-stu-id="d432d-269">Time to restore log (estimated)</span></span>  
  
     <span data-ttu-id="d432d-270">Número aproximado de minutos necesarios para que el registro que se encuentra actualmente en la cola de puesta al día se aplique a la base de datos reflejada.</span><span class="sxs-lookup"><span data-stu-id="d432d-270">Approximate number of minutes required for the log currently in the redo queue to be applied to the mirror database.</span></span>  
  
-   <span data-ttu-id="d432d-271">Tasa actual de restauración</span><span class="sxs-lookup"><span data-stu-id="d432d-271">Current restore rate</span></span>  
  
     <span data-ttu-id="d432d-272">Tasa a la que se restauran las transacciones en la base de datos reflejada (en KB por segundo).</span><span class="sxs-lookup"><span data-stu-id="d432d-272">Rate at which transactions are being restored into the mirror database (in KB per second).</span></span>  
  
#### <a name="mirroring-session"></a><span data-ttu-id="d432d-273">Sesión de creación de reflejo</span><span class="sxs-lookup"><span data-stu-id="d432d-273">Mirroring Session</span></span>  
 <span data-ttu-id="d432d-274">Además, en la página **Estado** se muestra la siguiente información sobre la sesión de creación de reflejo:</span><span class="sxs-lookup"><span data-stu-id="d432d-274">In addition, the **Status** page displays the following information about the mirroring session:</span></span>  
  
-   <span data-ttu-id="d432d-275">Sobrecarga de confirmación del servidor reflejado</span><span class="sxs-lookup"><span data-stu-id="d432d-275">Mirroring commit overhead</span></span>  
  
     <span data-ttu-id="d432d-276">Retardo medio por transacción en milisegundos (solo relevante en el modo de alta seguridad).</span><span class="sxs-lookup"><span data-stu-id="d432d-276">Average delay per transaction in milliseconds (relevant only in high-safety mode).</span></span> <span data-ttu-id="d432d-277">Este retardo es la cantidad de sobrecarga en la que se incurre mientras la instancia del servidor principal espera a la instancia del servidor reflejado para escribir la entrada de registro de la transacción en la cola de puesta al día.</span><span class="sxs-lookup"><span data-stu-id="d432d-277">This delay is the amount of overhead incurred while the principal server instance waits for the mirror server instance to write the transaction's log record into the redo queue.</span></span>  
  
-   <span data-ttu-id="d432d-278">Hora de envío y restauración de todos los registros actuales (estimada)</span><span class="sxs-lookup"><span data-stu-id="d432d-278">Time to send and restore all current log (estimated)</span></span>  
  
     <span data-ttu-id="d432d-279">Tiempo estimado necesario para enviar todo el registro sin enviar que se ha confirmado en el servidor principal y para restaurar todo el registro que se encuentra en la cola de puesta al día.</span><span class="sxs-lookup"><span data-stu-id="d432d-279">Estimated time needed to send all of the unsent log that has been committed at the principal and to restore all of the log currently in the redo queue.</span></span> <span data-ttu-id="d432d-280">Esta estimación puede ser menor que la suma de los valores de los campos **Hora de envío de registro (estimada)** y **Tiempo para restaurar registro (estimado)** , ya que el envío y la restauración pueden funcionar en paralelo.</span><span class="sxs-lookup"><span data-stu-id="d432d-280">This estimate may be less than the sum of the values of the **Time to send log (estimated)** and **Time to restore log (estimated)** fields, because sending and restoring can operate in parallel.</span></span>  
  
-   <span data-ttu-id="d432d-281">Dirección del testigo</span><span class="sxs-lookup"><span data-stu-id="d432d-281">Witness address</span></span>  
  
     <span data-ttu-id="d432d-282">Dirección de red de la instancia de servidor testigo.</span><span class="sxs-lookup"><span data-stu-id="d432d-282">Network address of the witness server instance.</span></span> <span data-ttu-id="d432d-283">Para obtener más información sobre el formato de esta dirección, vea [Especificar una dirección de red de servidor &#40;creación de reflejo de la base de datos&#41;](specify-a-server-network-address-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="d432d-283">For information about the format of this address, see [Specify a Server Network Address &#40;Database Mirroring&#41;](specify-a-server-network-address-database-mirroring.md).</span></span>  
  
-   <span data-ttu-id="d432d-284">Modo de funcionamiento</span><span class="sxs-lookup"><span data-stu-id="d432d-284">Operating mode</span></span>  
  
     <span data-ttu-id="d432d-285">El modo de funcionamiento de la sesión de creación de reflejo de la base de datos:</span><span class="sxs-lookup"><span data-stu-id="d432d-285">The operating mode of the database mirroring session:</span></span>  
  
    -   <span data-ttu-id="d432d-286">Rendimiento alto (asincrónico)</span><span class="sxs-lookup"><span data-stu-id="d432d-286">High performance (asynchronous)</span></span>  
  
    -   <span data-ttu-id="d432d-287">Seguridad alta sin conmutación automática por error (sincrónico)</span><span class="sxs-lookup"><span data-stu-id="d432d-287">High safety without automatic failover (synchronous)</span></span>  
  
    -   <span data-ttu-id="d432d-288">Seguridad alta con conmutación automática por error (sincrónico)</span><span class="sxs-lookup"><span data-stu-id="d432d-288">High safety with automatic failover (synchronous)</span></span>  
  
##  <a name="additional-sources-of-information-about-a-mirrored-database"></a><a name="AdditionalSources"></a> <span data-ttu-id="d432d-289">Fuentes adicionales de información acerca de una base de datos reflejada</span><span class="sxs-lookup"><span data-stu-id="d432d-289">Additional Sources of Information About a Mirrored Database</span></span>  
 <span data-ttu-id="d432d-290">Además de usar el Monitor de creación de reflejo de la base de datos y los procedimientos almacenados dbmmonitor para supervisar una base de datos reflejada y configurar alertas de las variables de rendimiento supervisadas, [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] proporciona vistas de catálogo, contadores de rendimiento y notificaciones de eventos para la creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d432d-290">In addition to using the Database Mirroring Monitor and dbmmonitor stored procedures to monitor a mirrored database and set up alerts on monitored performance variables, [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] provides catalog views, performance counters, and event notifications for database mirroring.</span></span>  
  
 <span data-ttu-id="d432d-291">**En esta sección:**</span><span class="sxs-lookup"><span data-stu-id="d432d-291">**In This Section:**</span></span>  
  
-   [<span data-ttu-id="d432d-292">Metadatos de creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-292">Database Mirroring Metadata</span></span>](#DbmMetadata)  
  
-   [<span data-ttu-id="d432d-293">Contadores de rendimiento de creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-293">Database Mirroring Performance Counters</span></span>](#DbmPerfCounters)  
  
-   [<span data-ttu-id="d432d-294">Notificaciones de eventos de la creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-294">Database Mirroring Event Notifications</span></span>](#DbmEventNotif)  
  
###  <a name="database-mirroring-metadata"></a><a name="DbmMetadata"></a> <span data-ttu-id="d432d-295">Metadatos de creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-295">Database Mirroring Metadata</span></span>  
 <span data-ttu-id="d432d-296">Cada sesión de creación de reflejo de la base de datos se describe en metadatos que se exponen mediante las siguientes vistas de catálogo o de administración dinámica:</span><span class="sxs-lookup"><span data-stu-id="d432d-296">Each database mirroring session is described in metadata that is exposed through the following catalog or dynamic management views:</span></span>  
  
-   <span data-ttu-id="d432d-297">**sys.database_mirroring**</span><span class="sxs-lookup"><span data-stu-id="d432d-297">**sys.database_mirroring**</span></span>  
  
     <span data-ttu-id="d432d-298">En esta vista se muestran los metadatos de la creación de reflejo para cada base de datos reflejada en una instancia de servidor.</span><span class="sxs-lookup"><span data-stu-id="d432d-298">This view displays the database mirroring metadata for each mirrored database in a server instance.</span></span> <span data-ttu-id="d432d-299">Para obtener más información, vea [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d432d-299">For more information, see [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span></span>  
  
-   <span data-ttu-id="d432d-300">**sys.database_mirroring_endpoints**</span><span class="sxs-lookup"><span data-stu-id="d432d-300">**sys.database_mirroring_endpoints**</span></span>  
  
     <span data-ttu-id="d432d-301">En la vista de catálogo **sys.database_mirroring_endpoints** se muestra información acerca del punto de conexión de la creación de reflejo de la base de datos de la instancia de servidor.</span><span class="sxs-lookup"><span data-stu-id="d432d-301">The **sys.database_mirroring_endpoints** catalog view displays information about the database mirroring endpoint of the server instance.</span></span> <span data-ttu-id="d432d-302">Para obtener más información, vea [sys.database_mirroring_endpoints &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d432d-302">For more information, see [sys.database_mirroring_endpoints &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql).</span></span>  
  
-   <span data-ttu-id="d432d-303">**sys.database_mirroring_witnesses**</span><span class="sxs-lookup"><span data-stu-id="d432d-303">**sys.database_mirroring_witnesses**</span></span>  
  
     <span data-ttu-id="d432d-304">En esta vista de catálogo se muestran los metadatos de la creación de reflejo de la base de datos para cada sesión en la que una instancia de servidor es el testigo.</span><span class="sxs-lookup"><span data-stu-id="d432d-304">This catalog view displays the database mirroring metadata for each session in which a server instance is the witness.</span></span> <span data-ttu-id="d432d-305">Para obtener más información, vea [sys.database_mirroring_witnesses &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/database-mirroring-witness-catalog-views-sys-database-mirroring-witnesses).</span><span class="sxs-lookup"><span data-stu-id="d432d-305">For more information, see [sys.database_mirroring_witnesses &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/database-mirroring-witness-catalog-views-sys-database-mirroring-witnesses).</span></span>  
  
-   <span data-ttu-id="d432d-306">**sys.dm_db_mirroring_connections**</span><span class="sxs-lookup"><span data-stu-id="d432d-306">**sys.dm_db_mirroring_connections**</span></span>  
  
     <span data-ttu-id="d432d-307">Esta vista de administración dinámica devuelve una fila para cada conexión de red de la creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d432d-307">This dynamic management view returns a row for each database mirroring network connection.</span></span>  
  
     <span data-ttu-id="d432d-308">Para obtener más información, vea [sys.dm_db_mirroring_connections &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/database-mirroring-sys-dm-db-mirroring-connections).</span><span class="sxs-lookup"><span data-stu-id="d432d-308">For more information, see [sys.dm_db_mirroring_connections &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/database-mirroring-sys-dm-db-mirroring-connections).</span></span>  
  
###  <a name="database-mirroring-performance-counters"></a><a name="DbmPerfCounters"></a> <span data-ttu-id="d432d-309">Contadores de rendimiento de creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-309">Database Mirroring Performance Counters</span></span>  
 <span data-ttu-id="d432d-310">Los contadores de rendimiento le permiten supervisar el rendimiento de la creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d432d-310">Performance counters let you monitor database mirroring performance.</span></span> <span data-ttu-id="d432d-311">Por ejemplo, puede examinar el contador **Retraso de transacción** para ver si la creación de reflejo de la base de datos está afectando al rendimiento del servidor principal; puede examinar los contadores **Cola rehecha** y **Envío de registro en cola** para ver el comportamiento de la base de datos reflejada con respecto a la base de datos principal.</span><span class="sxs-lookup"><span data-stu-id="d432d-311">For example, you can examine the **Transaction Delay** counter to see if database mirroring is impacting performance on the principal server, you can examine the **Redo Queue** and **Log Send Queue** counters to see how well the mirror database is keeping up with the principal database.</span></span> <span data-ttu-id="d432d-312">Puede examinar el contador **Bytes de registro enviados/s** para supervisar la parte del registro enviada por segundo.</span><span class="sxs-lookup"><span data-stu-id="d432d-312">You can examine the **Log Bytes Sent/sec** counter to monitor the amount of log sent per second.</span></span>  
  
 <span data-ttu-id="d432d-313">En el Monitor de rendimiento de cada asociado, los contadores de rendimiento están disponibles en el objeto de rendimiento de la creación de reflejo de la base de datos (**SQLServer:Database Mirroring**).</span><span class="sxs-lookup"><span data-stu-id="d432d-313">In Performance Monitor on either partner, performance counters are available in the database mirroring performance object (**SQLServer:Database Mirroring**).</span></span> <span data-ttu-id="d432d-314">Para más información, consulte [SQL Server, Database Mirroring Object](../../relational-databases/performance-monitor/sql-server-database-mirroring-object.md).</span><span class="sxs-lookup"><span data-stu-id="d432d-314">For more information, see [SQL Server, Database Mirroring Object](../../relational-databases/performance-monitor/sql-server-database-mirroring-object.md).</span></span>  
  
 <span data-ttu-id="d432d-315">**Para iniciar el Monitor de rendimiento**</span><span class="sxs-lookup"><span data-stu-id="d432d-315">**To start the performance monitor**</span></span>  
  
-   [<span data-ttu-id="d432d-316">Iniciar el Monitor de sistema &#40;Windows&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-316">Start System Monitor &#40;Windows&#41;</span></span>](../../relational-databases/performance/start-system-monitor-windows.md)  
  
###  <a name="database-mirroring-event-notifications"></a><a name="DbmEventNotif"></a> <span data-ttu-id="d432d-317">Notificaciones de eventos de la creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d432d-317">Database Mirroring Event Notifications</span></span>  
 <span data-ttu-id="d432d-318">Las notificaciones de eventos son una clase especial de objetos de base de datos.</span><span class="sxs-lookup"><span data-stu-id="d432d-318">Event notifications are a special kind of database object.</span></span> <span data-ttu-id="d432d-319">Las notificaciones de eventos se ejecutan en respuesta a una variedad de instrucciones del lenguaje de definición de datos (DDL) de Transact-SQL y eventos de Seguimiento de SQL, y envían información acerca de los eventos de servidor y base de datos a un servicio de [!INCLUDE[ssSB](../../includes/sssb-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d432d-319">Event notifications execute in response to a variety of Transact-SQL data definition language (DDL) statements and SQL Trace events and send information about server and database events to a [!INCLUDE[ssSB](../../includes/sssb-md.md)] service.</span></span>  
  
 <span data-ttu-id="d432d-320">Los siguientes eventos están disponibles en la creación de reflejo de la base de datos:</span><span class="sxs-lookup"><span data-stu-id="d432d-320">The following events are available for database mirroring:</span></span>  
  
-   <span data-ttu-id="d432d-321">Clase de evento**Database Mirroring State Change**</span><span class="sxs-lookup"><span data-stu-id="d432d-321">**Database Mirroring State Change** event class</span></span>  
  
     <span data-ttu-id="d432d-322">Este evento indica cuándo cambia el estado de creación de reflejo de una base de datos reflejada.</span><span class="sxs-lookup"><span data-stu-id="d432d-322">This indicates when the mirroring state of a mirrored database changes.</span></span> <span data-ttu-id="d432d-323">Para obtener más información, consulte [Database Mirroring State Change Event Class](../../relational-databases/event-classes/database-mirroring-state-change-event-class.md).</span><span class="sxs-lookup"><span data-stu-id="d432d-323">For more information, see [Database Mirroring State Change Event Class](../../relational-databases/event-classes/database-mirroring-state-change-event-class.md).</span></span>  
  
-   <span data-ttu-id="d432d-324">Clase de evento**Audit Database Mirroring Login**</span><span class="sxs-lookup"><span data-stu-id="d432d-324">**Audit Database Mirroring Login** event class</span></span>  
  
     <span data-ttu-id="d432d-325">Este evento le permite emitir mensajes de auditoría relacionados con la seguridad de transporte de la creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d432d-325">This reports audit messages related to database mirroring transport security.</span></span> <span data-ttu-id="d432d-326">Para obtener más información, consulte [Audit Database Mirroring Login Event Class](../../relational-databases/event-classes/audit-database-mirroring-login-event-class.md).</span><span class="sxs-lookup"><span data-stu-id="d432d-326">For more information, see [Audit Database Mirroring Login Event Class](../../relational-databases/event-classes/audit-database-mirroring-login-event-class.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="d432d-327">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="d432d-327">Related Tasks</span></span>  
  
-   [<span data-ttu-id="d432d-328">Usar alertas y umbrales de advertencia de las métricas de rendimiento de la creación de reflejo &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-328">Use Warning Thresholds and Alerts on Mirroring Performance Metrics &#40;SQL Server&#41;</span></span>](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md)  
  
-   [<span data-ttu-id="d432d-329">Iniciar el Monitor de creación de reflejo de la base de datos &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-329">Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="d432d-330">Ver el estado de una base de datos reflejada &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-330">View the State of a Mirrored Database &#40;SQL Server Management Studio&#41;</span></span>](view-the-state-of-a-mirrored-database-sql-server-management-studio.md)  
  
 <span data-ttu-id="d432d-331">**procedimientos almacenados**</span><span class="sxs-lookup"><span data-stu-id="d432d-331">**Stored procedures**</span></span>  
  
-   [<span data-ttu-id="d432d-332">sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-332">sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql)  
  
-   [<span data-ttu-id="d432d-333">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-333">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)  
  
-   [<span data-ttu-id="d432d-334">sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-334">sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql)  
  
-   [<span data-ttu-id="d432d-335">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-335">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropalert-transact-sql)  
  
-   [<span data-ttu-id="d432d-336">sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-336">sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql)  
  
-   [<span data-ttu-id="d432d-337">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-337">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpalert-transact-sql)  
  
-   [<span data-ttu-id="d432d-338">sp_dbmmonitorhelpmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-338">sp_dbmmonitorhelpmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpmonitoring-transact-sql)  
  
-   [<span data-ttu-id="d432d-339">sp_dbmmonitorresults &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-339">sp_dbmmonitorresults &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql)  
  
-   [<span data-ttu-id="d432d-340">sp_dbmmonitorupdate &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d432d-340">sp_dbmmonitorupdate &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql)  
  
## <a name="see-also"></a><span data-ttu-id="d432d-341">Consulte también</span><span class="sxs-lookup"><span data-stu-id="d432d-341">See Also</span></span>  
 <span data-ttu-id="d432d-342">[Creación de reflejo de la base de datos &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="d432d-342">[Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="d432d-343">Conceptos del proveedor WMI para eventos de servidor</span><span class="sxs-lookup"><span data-stu-id="d432d-343">WMI Provider for Server Events Concepts</span></span>](../../relational-databases/wmi-provider-server-events/wmi-provider-for-server-events-concepts.md)  
  
  
