---
title: Usar alertas y umbrales de advertencia de las métricas de rendimiento de la creación de reflejo (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- monitoring database mirroring [SQL Server]
- thresholds [SQL Server]
- database mirroring [SQL Server], managing in SQL Server Management Studio
- alerts [SQL Server], database mirroring
- database mirroring [SQL Server], monitoring
- warnings [database mirroring]
ms.assetid: 8cdd1515-0bd7-4f8c-a7fc-a33b575e20f6
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 908b234143bc7e2140fe1c98d85ba150ea69b28d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87671668"
---
# <a name="use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server"></a><span data-ttu-id="9eb4b-102">Usar alertas y umbrales de advertencia de las métricas de rendimiento de la creación de reflejo (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="9eb4b-102">Use Warning Thresholds and Alerts on Mirroring Performance Metrics (SQL Server)</span></span>
  <span data-ttu-id="9eb4b-103">Este tema contiene información acerca de los eventos de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] para los que se pueden configurar y administrar umbrales de advertencia para la creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-103">This topic contains information about the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] events for which warning thresholds can be configured and managed for database mirroring.</span></span> <span data-ttu-id="9eb4b-104">Puede usar el Monitor de creación de reflejo de la base de datos o los procedimientos almacenados **sp_dbmmonitorchangealert**, **sp_dbmmonitorhelpalert**y **sp_dbmmonitordropalert** .</span><span class="sxs-lookup"><span data-stu-id="9eb4b-104">You can use the  Database Mirroring Monitor or the **sp_dbmmonitorchangealert**, **sp_dbmmonitorhelpalert**, and **sp_dbmmonitordropalert** stored procedures.</span></span> <span data-ttu-id="9eb4b-105">Este tema también contiene información acerca de cómo configurar alertas en los eventos de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-105">This topic also contains information about configuring alerts on database mirroring events.</span></span>  
  
 <span data-ttu-id="9eb4b-106">Después de establecer la supervisión de una base de datos reflejada, un administrador del sistema puede configurar los umbrales de advertencia de algunas métricas de rendimiento clave.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-106">After monitoring is established for a mirrored database, a system administrator can configure warning thresholds on several key performance metrics.</span></span> <span data-ttu-id="9eb4b-107">Además, el administrador puede configurar alertas para estos y otros eventos de la creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-107">Also, an administrator can configure alerts on these and other database mirroring events.</span></span>  
  
 <span data-ttu-id="9eb4b-108">**En este tema:**</span><span class="sxs-lookup"><span data-stu-id="9eb4b-108">**In This Topic:**</span></span>  
  
-   [<span data-ttu-id="9eb4b-109">Métricas de rendimiento y umbrales de advertencia</span><span class="sxs-lookup"><span data-stu-id="9eb4b-109">Performance Metrics and Warning Thresholds</span></span>](#PerfMetricsAndWarningThresholds)  
  
-   [<span data-ttu-id="9eb4b-110">Configurar y administrar umbrales de advertencia</span><span class="sxs-lookup"><span data-stu-id="9eb4b-110">Setting Up and Managing Warning Thresholds</span></span>](#SetUpManageWarningThresholds)  
  
-   [<span data-ttu-id="9eb4b-111">Usar alertas para una base de datos reflejada</span><span class="sxs-lookup"><span data-stu-id="9eb4b-111">Using Alerts for a Mirrored Database</span></span>](#UseAlerts)  
  
-   [<span data-ttu-id="9eb4b-112">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="9eb4b-112">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="performance-metrics-and-warning-thresholds"></a><a name="PerfMetricsAndWarningThresholds"></a> <span data-ttu-id="9eb4b-113">Métricas de rendimiento y umbrales de advertencia</span><span class="sxs-lookup"><span data-stu-id="9eb4b-113">Performance Metrics and Warning Thresholds</span></span>  
 <span data-ttu-id="9eb4b-114">En la siguiente tabla se presenta una lista de las métricas de rendimiento para las que se pueden configurar advertencias, se describe el umbral de advertencia correspondiente y se muestra la etiqueta correspondiente del Monitor de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-114">The following table lists the performance metrics for which warnings can be configured, describes the corresponding warning threshold, and lists the corresponding Database Mirroring Monitor label.</span></span>  
  
|<span data-ttu-id="9eb4b-115">Métrica de rendimiento</span><span class="sxs-lookup"><span data-stu-id="9eb4b-115">Performance metric</span></span>|<span data-ttu-id="9eb4b-116">Umbral de advertencia</span><span class="sxs-lookup"><span data-stu-id="9eb4b-116">Warning threshold</span></span>|<span data-ttu-id="9eb4b-117">Etiqueta del Monitor de creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="9eb4b-117">Database Mirroring Monitor label</span></span>|  
|------------------------|-----------------------|--------------------------------------|  
|<span data-ttu-id="9eb4b-118">Registro sin enviar</span><span class="sxs-lookup"><span data-stu-id="9eb4b-118">Unsent log</span></span>|<span data-ttu-id="9eb4b-119">Especifica cuántos kilobytes (KB) de registro sin enviar generan una advertencia en la instancia del servidor principal.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-119">Specifies how many kilobytes (KB) of unsent log generate a warning on the principal server instance.</span></span> <span data-ttu-id="9eb4b-120">Esta advertencia ayuda a medir la pérdida de datos potencial en términos de KB y resulta especialmente importante en el modo de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-120">This warning helps measure the potential for data loss in terms of KB and is especially relevant for high-performance mode.</span></span> <span data-ttu-id="9eb4b-121">No obstante, la advertencia también es relevante para el modo de alta seguridad cuando la creación de reflejo se detiene o suspende debido a que los asociados se han desconectado.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-121">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|<span data-ttu-id="9eb4b-122">**Advierte si el registro sin enviar supera el valor de umbral**</span><span class="sxs-lookup"><span data-stu-id="9eb4b-122">**Warn if the unsent log exceeds the threshold**</span></span>|  
|<span data-ttu-id="9eb4b-123">Registro sin restaurar</span><span class="sxs-lookup"><span data-stu-id="9eb4b-123">Unrestored log</span></span>|<span data-ttu-id="9eb4b-124">Especifica cuántos KB de registro sin restaurar generan una advertencia en la instancia del servidor reflejado.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-124">Specifies how many KB of unrestored log generate a warning on the mirror server instance.</span></span> <span data-ttu-id="9eb4b-125">Esta advertencia ayuda a medir el tiempo de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-125">This warning helps measure failover time.</span></span> <span data-ttu-id="9eb4b-126">El*tiempo de la conmutación por error* se compone principalmente del tiempo que el servidor reflejado anterior necesita para poner al día los registros pendientes en su cola rehecha, más un breve tiempo adicional.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-126">*Failover time* consists mainly of the time that the former mirror server requires to roll forward any log remaining in its redo queue, plus a short additional time.</span></span><br /><br /> <span data-ttu-id="9eb4b-127">Nota: En una conmutación automática por error, el tiempo para que el sistema detecte el error es independiente del tiempo de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-127">Note: For an automatic failover, the time for the system to notice the error is independent of the failover time.</span></span><br /><br /> <span data-ttu-id="9eb4b-128">Para obtener más información, vea [Calcular la interrupción del servicio durante la conmutación de roles &#40;creación de reflejo de la base de datos&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="9eb4b-128">For more information, see [Estimate the Interruption of Service During Role Switching &#40;Database Mirroring&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span></span>|<span data-ttu-id="9eb4b-129">**Advertir si el registro sin restaurar sobrepasa el umbral**</span><span class="sxs-lookup"><span data-stu-id="9eb4b-129">**Warn if the unrestored log exceeds the threshold**</span></span>|  
|<span data-ttu-id="9eb4b-130">Transacción no enviada más antigua</span><span class="sxs-lookup"><span data-stu-id="9eb4b-130">Oldest unsent transaction</span></span>|<span data-ttu-id="9eb4b-131">Especifica el número de minutos de transacciones que se pueden acumular en la cola de envío antes de que se genere una advertencia en la instancia del servidor principal.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-131">Specifies the number of minutes worth of transactions that can accumulate in the send queue before a warning is generated on the principal server instance.</span></span> <span data-ttu-id="9eb4b-132">Esta advertencia ayuda a medir la pérdida de datos potencial en términos de tiempo y resulta especialmente importante en el modo de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-132">This warning helps measure the potential for data loss in terms of time and is especially relevant for high-performance mode.</span></span> <span data-ttu-id="9eb4b-133">No obstante, la advertencia también es relevante para el modo de alta seguridad cuando la creación de reflejo se detiene o suspende debido a que los asociados se han desconectado.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-133">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|<span data-ttu-id="9eb4b-134">**Advertir si la transacción sin enviar más antigua sobrepasa el umbral**</span><span class="sxs-lookup"><span data-stu-id="9eb4b-134">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|  
|<span data-ttu-id="9eb4b-135">Sobrecarga de confirmación del servidor reflejado</span><span class="sxs-lookup"><span data-stu-id="9eb4b-135">Mirror commit overhead</span></span>|<span data-ttu-id="9eb4b-136">Especifica el número de milisegundos de retardo medio por transacción que se tolera antes de que se genere una advertencia en el servidor principal.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-136">Specifies the number of milliseconds of average delay per transaction that are tolerated before a warning is generated on the principal server.</span></span> <span data-ttu-id="9eb4b-137">Este retardo es la cantidad de sobrecarga en la que se incurre mientras la instancia del servidor principal espera a la instancia del servidor reflejado para escribir la entrada de registro de la transacción en la cola de puesta al día.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-137">This delay is the amount of overhead incurred while the principal server instance waits for the mirror server instance to write the transaction's log record into the redo queue.</span></span> <span data-ttu-id="9eb4b-138">Este valor solo es relevante en el modo de alta seguridad.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-138">This value is relevant only in high-safety mode.</span></span>|<span data-ttu-id="9eb4b-139">**Advertir si la sobrecarga de confirmación del servidor reflejado sobrepasa el umbral**</span><span class="sxs-lookup"><span data-stu-id="9eb4b-139">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|  
  
 <span data-ttu-id="9eb4b-140">En una base de datos reflejada, un administrador del sistema puede especificar un umbral para cualquier de estas métricas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-140">For any one of these performance metrics, a system administrator can specify a threshold on a mirrored database.</span></span> <span data-ttu-id="9eb4b-141">Para obtener más información, vea [Configurar y administrar umbrales de advertencia](#SetUpManageWarningThresholds)más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-141">For more information, see [Setting Up and Managing Warning Thresholds](#SetUpManageWarningThresholds), later in this topic.</span></span>  
  
##  <a name="setting-up-and-managing-warning-thresholds"></a><a name="SetUpManageWarningThresholds"></a> <span data-ttu-id="9eb4b-142">Configurar y administrar umbrales de advertencia</span><span class="sxs-lookup"><span data-stu-id="9eb4b-142">Setting Up and Managing Warning Thresholds</span></span>  
 <span data-ttu-id="9eb4b-143">Un administrador del sistema puede configurar uno o más umbrales de advertencia para las métricas de rendimiento clave de la creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-143">A system administrator can configure one or more warning thresholds for the key mirroring performance metrics.</span></span> <span data-ttu-id="9eb4b-144">Se recomienda establecer un umbral para una determinada advertencia en ambos asociados para asegurarse de que la advertencia persista si la base de datos genera un error.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-144">We recommend setting a threshold for a given warning on both partners to make sure that the warning persists if the database fails over.</span></span> <span data-ttu-id="9eb4b-145">El umbral adecuado en cada asociado depende de las capacidades de rendimiento del sistema del asociado.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-145">The appropriate threshold on each partner depends on the performance capabilities of that partner's system.</span></span>  
  
 <span data-ttu-id="9eb4b-146">Los umbrales de advertencia se pueden configurar y administrar mediante el uso de:</span><span class="sxs-lookup"><span data-stu-id="9eb4b-146">Warning thresholds can be configured and managed by using either of the following:</span></span>  
  
-   <span data-ttu-id="9eb4b-147">Monitor de creación de reflejo de la base de datos</span><span class="sxs-lookup"><span data-stu-id="9eb4b-147">Database Mirroring Monitor</span></span>  
  
     <span data-ttu-id="9eb4b-148">En el Monitor de creación de reflejo de la base de datos, el administrador puede ver, al mismo tiempo, la configuración actual de una base de datos seleccionada en las instancias del servidor principal y reflejado, al seleccionar la página con pestañas **Advertencias** .</span><span class="sxs-lookup"><span data-stu-id="9eb4b-148">In Database Mirroring Monitor, the administrator can view the current configuration of warnings for a selected database at both the principal and mirror server instances at the same time by selecting the **Warnings** tabbed page.</span></span> <span data-ttu-id="9eb4b-149">Desde aquí, el administrador puede abrir el cuadro de diálogo **Establecer umbrales de advertencia** para habilitar y configurar uno o más umbrales de advertencia.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-149">From there, the administrator can open the **Set Warning Thresholds** dialog box to enable and configure one or more warning thresholds.</span></span>  
  
     <span data-ttu-id="9eb4b-150">Para obtener una introducción a la interfaz del Monitor de creación de reflejo de la base de datos, vea [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9eb4b-150">For an introduction to the Database Mirroring Monitor interface, see [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span></span> <span data-ttu-id="9eb4b-151">Para obtener información sobre cómo iniciar el Monitor de creación de reflejo de base de datos, vea [Iniciar el Monitor de creación de reflejo de la base de datos &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="9eb4b-151">For information about launching Database Mirroring Monitor, see [Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="9eb4b-152">Procedimientos almacenados del sistema</span><span class="sxs-lookup"><span data-stu-id="9eb4b-152">System stored procedures</span></span>  
  
     <span data-ttu-id="9eb4b-153">El siguiente conjunto de procedimientos almacenados del sistema permite al administrador configurar y administrar los umbrales de advertencia de las bases de datos reflejadas de un asociado a la vez.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-153">The following set of system stored procedures enable an administrator to set up and manage warning thresholds on mirrored databases of one partner at a time.</span></span>  
  
    |<span data-ttu-id="9eb4b-154">Procedimiento</span><span class="sxs-lookup"><span data-stu-id="9eb4b-154">Procedure</span></span>|<span data-ttu-id="9eb4b-155">Descripción</span><span class="sxs-lookup"><span data-stu-id="9eb4b-155">Description</span></span>|  
    |---------------|-----------------|  
    |[<span data-ttu-id="9eb4b-156">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-156">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)|<span data-ttu-id="9eb4b-157">Agrega o cambia el umbral de advertencia de una métrica de rendimiento de creación de reflejo especificada.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-157">Adds or changes warning threshold for a specified mirroring performance metric.</span></span>|  
    |[<span data-ttu-id="9eb4b-158">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-158">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpalert-transact-sql)|<span data-ttu-id="9eb4b-159">Devuelve información acerca de los umbrales de advertencia de una o todas las métricas claves de rendimiento de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-159">Returns information about warning thresholds on one or all of several key database mirroring monitor performance metrics.</span></span>|  
    |[<span data-ttu-id="9eb4b-160">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-160">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropalert-transact-sql)|<span data-ttu-id="9eb4b-161">Quita la advertencia de una métrica de rendimiento especificada.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-161">Drops the warning for a specified performance metric.</span></span>|  
  
## <a name="performance-threshold-events-sent-to-the-windows-event-log"></a><span data-ttu-id="9eb4b-162">Eventos de umbral de rendimiento enviados al Registro de eventos de Windows</span><span class="sxs-lookup"><span data-stu-id="9eb4b-162">Performance-Threshold Events Sent to the Windows Event Log</span></span>  
 <span data-ttu-id="9eb4b-163">Si se define un umbral de advertencia para una métrica de rendimiento, cuando se actualiza la tabla de estado, el último valor se evalúa con el umbral.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-163">If warning thresholdis defined for a performance metric, when the status table is updated, the latest value is evaluated against the threshold.</span></span> <span data-ttu-id="9eb4b-164">Si se alcanza el umbral, el procedimiento de actualización, **sp_dbmmonitorupdate**, genera un evento informativo, un *evento de umbral de rendimiento*, para la métrica y escribe el evento en el registro de eventos de [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-164">If the threshold has been reached, the update procedure, **sp_dbmmonitorupdate**, generates an informational event-a *performance-threshold event*- for the metric and writes the event to the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows event log.</span></span> <span data-ttu-id="9eb4b-165">En la siguiente tabla se presenta una lista de los Id. de eventos de los eventos de umbral de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-165">The following table lists the event IDs of the performance-threshold events.</span></span>  
  
|<span data-ttu-id="9eb4b-166">Métrica de rendimiento</span><span class="sxs-lookup"><span data-stu-id="9eb4b-166">Performance metric</span></span>|<span data-ttu-id="9eb4b-167">Id. de evento</span><span class="sxs-lookup"><span data-stu-id="9eb4b-167">Event ID</span></span>|  
|------------------------|--------------|  
|<span data-ttu-id="9eb4b-168">Registro sin enviar</span><span class="sxs-lookup"><span data-stu-id="9eb4b-168">Unsent log</span></span>|<span data-ttu-id="9eb4b-169">32042</span><span class="sxs-lookup"><span data-stu-id="9eb4b-169">32042</span></span>|  
|<span data-ttu-id="9eb4b-170">Registro sin restaurar</span><span class="sxs-lookup"><span data-stu-id="9eb4b-170">Unrestored log</span></span>|<span data-ttu-id="9eb4b-171">32043</span><span class="sxs-lookup"><span data-stu-id="9eb4b-171">32043</span></span>|  
|<span data-ttu-id="9eb4b-172">Transacción no enviada más antigua</span><span class="sxs-lookup"><span data-stu-id="9eb4b-172">Oldest unsent transaction</span></span>|<span data-ttu-id="9eb4b-173">32040</span><span class="sxs-lookup"><span data-stu-id="9eb4b-173">32040</span></span>|  
|<span data-ttu-id="9eb4b-174">Sobrecarga de confirmación del servidor reflejado</span><span class="sxs-lookup"><span data-stu-id="9eb4b-174">Mirror commit overhead</span></span>|<span data-ttu-id="9eb4b-175">32044</span><span class="sxs-lookup"><span data-stu-id="9eb4b-175">32044</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="9eb4b-176">Un administrador puede definir alertas en uno o más de estos eventos.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-176">An administrator can define alerts on any one or more of these events.</span></span> <span data-ttu-id="9eb4b-177">Para obtener más información, vea [Usar alertas para una base de datos reflejada](#UseAlerts)más adelante en este</span><span class="sxs-lookup"><span data-stu-id="9eb4b-177">For more information, see [Using Alerts for a Mirrored Database](#UseAlerts), later in this</span></span>  
>   
>  <span data-ttu-id="9eb4b-178">tema.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-178">topic.</span></span>  
  
##  <a name="using-alerts-for-a-mirrored-database"></a><a name="UseAlerts"></a><span data-ttu-id="9eb4b-179">Usar alertas para una base de datos reflejada</span><span class="sxs-lookup"><span data-stu-id="9eb4b-179">Using Alerts for a Mirrored Database</span></span>  
 <span data-ttu-id="9eb4b-180">Una parte importante de la supervisión de una base de datos reflejada es la configuración de alertas en los eventos significativos de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-180">An important part of monitoring a mirrored database is configuring alerts on significant database mirro events.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="9eb4b-181">genera los tipos siguientes de eventos de creación de reflejo de la base de datos:</span><span class="sxs-lookup"><span data-stu-id="9eb4b-181">generates the following types of database mirroring events:</span></span>  
  
-   <span data-ttu-id="9eb4b-182">Eventos de umbral de rendimiento</span><span class="sxs-lookup"><span data-stu-id="9eb4b-182">Performance threshold events</span></span>  
  
     <span data-ttu-id="9eb4b-183">Para obtener más información, vea "Eventos de umbral de rendimiento enviados al Registro de eventos de Windows", anteriormente en este tema.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-183">For more information, see "Performance-Threshold Events Sent to the Windows Event Log" earlier in this topic.</span></span>  
  
-   <span data-ttu-id="9eb4b-184">Eventos de cambio de estado</span><span class="sxs-lookup"><span data-stu-id="9eb4b-184">State-change events</span></span>  
  
     <span data-ttu-id="9eb4b-185">Hay eventos del Instrumental de administración de Windows (WMI) que se generan cuando se producen cambios en el estado interno de una sesión de creación de reflejo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-185">These are Windows Management Instrumentation (WMI) events that are generated when changes occur in the internal state of a database mirroring session.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="9eb4b-186">Para obtener más información, vea [Conceptos del proveedor WMI para eventos de servidor](../../relational-databases/wmi-provider-server-events/wmi-provider-for-server-events-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="9eb4b-186">For more information, see [WMI Provider for Server Events Concepts](../../relational-databases/wmi-provider-server-events/wmi-provider-for-server-events-concepts.md).</span></span>  
  
 <span data-ttu-id="9eb4b-187">Un administrador del sistema puede configurar alertas de estos eventos mediante el Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] u otras aplicaciones como, por ejemplo, [!INCLUDE[msCoName](../../includes/msconame-md.md)] Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-187">A system administrator can configure alerts on these by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent or other applications, such as [!INCLUDE[msCoName](../../includes/msconame-md.md)] Operations Manager.</span></span>  
  
 <span data-ttu-id="9eb4b-188">Cuando se definen alertas de eventos de la creación de reflejo de la base de datos, se recomienda definir umbrales de advertencia y alertas en las instancias de los servidores asociados.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-188">When you define alerts on database mirroring events, we recommend that you define warning thresholds and alerts at both partner server instances.</span></span> <span data-ttu-id="9eb4b-189">Los eventos individuales se generan en el servidor principal o reflejado, pero cada asociado puede realizar cualquiera de los roles en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-189">Individual events are generated at either the principal server or the mirror server, but each partner can perform either role at any time.</span></span> <span data-ttu-id="9eb4b-190">Para asegurarse de que una alerta continúa en funcionamiento después de una conmutación por error, la alerta se debe definir en ambos asociados.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-190">To make sure that an alert continues to operate after a failover, the alert must be defined at both partners.</span></span>  
  
 <span data-ttu-id="9eb4b-191">Para obtener más información, consulte las notas del producto sobre alertas de eventos de la creación de reflejo de la base de datos en este [sitio web de SQL Server](../../database-engine/database-mirroring/use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9eb4b-191">For more information, see the white paper about alerting on database mirroring events at this [SQL Server Web site](../../database-engine/database-mirroring/use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span></span> <span data-ttu-id="9eb4b-192">Estas notas del producto contienen información acerca de la configuración de alertas mediante el Agente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , los eventos WMI de la creación de reflejo y scripts de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-192">This white paper contains information about how to configure alerts using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, the database mirroring WMI events, and sample scripts.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="9eb4b-193">En todas las sesiones de creación de reflejo, se recomienda encarecidamente configurar la base de datos para que envíe una alerta de cualquier evento de cambio de estado.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-193">For all mirroring sessions, we strongly recommend that you configure the database to send an alert on any state-change events.</span></span> <span data-ttu-id="9eb4b-194">Significará que se ha producido algo que puede poner en riesgo los datos, a menos que un cambio de estado se espere como resultado de un cambio de configuración manual.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-194">Unless a state change is expected as the result of a manual configuration change, something has occurred that could compromise your data.</span></span> <span data-ttu-id="9eb4b-195">Identificar y solucionar la causa de un cambio de estado inesperado le ayudará a proteger los datos.</span><span class="sxs-lookup"><span data-stu-id="9eb4b-195">To help protect your data, identify and fix the cause of an unexpected state change.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="9eb4b-196">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="9eb4b-196">Related Tasks</span></span>  
 <span data-ttu-id="9eb4b-197">**Para crear una alerta mediante SQL Server Management Studio**</span><span class="sxs-lookup"><span data-stu-id="9eb4b-197">**To create an alert using SQL Server Management Studio**</span></span>  
  
-   [<span data-ttu-id="9eb4b-198">Create an Alert Using an Error Number</span><span class="sxs-lookup"><span data-stu-id="9eb4b-198">Create an Alert Using an Error Number</span></span>](../../ssms/agent/create-an-alert-using-an-error-number.md)  
  
-   [<span data-ttu-id="9eb4b-199">Create a WMI Event Alert</span><span class="sxs-lookup"><span data-stu-id="9eb4b-199">Create a WMI Event Alert</span></span>](../../ssms/agent/create-a-wmi-event-alert.md)  
  
 <span data-ttu-id="9eb4b-200">**Para supervisar la creación de reflejo de la base de datos**</span><span class="sxs-lookup"><span data-stu-id="9eb4b-200">**To monitor database mirroring**</span></span>  
  
-   [<span data-ttu-id="9eb4b-201">Iniciar el Monitor de creación de reflejo de la base de datos &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-201">Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="9eb4b-202">sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-202">sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql)  
  
-   [<span data-ttu-id="9eb4b-203">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-203">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)  
  
-   [<span data-ttu-id="9eb4b-204">sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-204">sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql)  
  
-   [<span data-ttu-id="9eb4b-205">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-205">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropalert-transact-sql)  
  
-   [<span data-ttu-id="9eb4b-206">sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-206">sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql)  
  
-   [<span data-ttu-id="9eb4b-207">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-207">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpalert-transact-sql)  
  
-   [<span data-ttu-id="9eb4b-208">sp_dbmmonitorhelpmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-208">sp_dbmmonitorhelpmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpmonitoring-transact-sql)  
  
-   [<span data-ttu-id="9eb4b-209">sp_dbmmonitorresults &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-209">sp_dbmmonitorresults &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql)  
  
-   [<span data-ttu-id="9eb4b-210">sp_dbmmonitorupdate &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-210">sp_dbmmonitorupdate &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql)  
  
## <a name="see-also"></a><span data-ttu-id="9eb4b-211">Consulte también</span><span class="sxs-lookup"><span data-stu-id="9eb4b-211">See Also</span></span>  
 <span data-ttu-id="9eb4b-212">[Creación de reflejo de la base de datos &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="9eb4b-212">[Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="9eb4b-213">Supervisar la creación de reflejo de la base de datos &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="9eb4b-213">Monitoring Database Mirroring &#40;SQL Server&#41;</span></span>](monitoring-database-mirroring-sql-server.md)  
  
  
