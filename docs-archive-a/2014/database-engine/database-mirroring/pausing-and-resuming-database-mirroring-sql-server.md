---
title: Pausar y reanudar la creación de reflejo de la base de datos (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- sessions [SQL Server], database mirroring
- resuming database mirroring
- database mirroring [SQL Server], pausing
- database mirroring [SQL Server], resuming
- pausing database mirroring
ms.assetid: c67802c6-ee8c-4cbd-a6d4-f7b80413a4ab
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 8c231876b11303992e0e3300c9cb73c0cf53b3af
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87746514"
---
# <a name="pausing-and-resuming-database-mirroring-sql-server"></a><span data-ttu-id="ffba3-102">Pausar y reanudar la creación de reflejo de la base de datos (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="ffba3-102">Pausing and Resuming Database Mirroring (SQL Server)</span></span>
  <span data-ttu-id="ffba3-103">El propietario de la base de datos puede pausar y reanudar posteriormente una sesión de creación de reflejo de la base de datos en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="ffba3-103">The database owner can pause and later resume a database mirroring session at any time.</span></span> <span data-ttu-id="ffba3-104">La pausa preserva el estado de la sesión mientras se suspende la creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="ffba3-104">Pausing preserves the session state while suspending mirroring.</span></span> <span data-ttu-id="ffba3-105">Durante los cuellos de botella, las pausas pueden ser útiles para mejorar el rendimiento en el servidor principal.</span><span class="sxs-lookup"><span data-stu-id="ffba3-105">During bottlenecks, pausing might be useful to improve performance on the principal server.</span></span>  
  
 <span data-ttu-id="ffba3-106">Cuando se realiza una pausa en una sesión, la base de datos principal sigue estando disponible.</span><span class="sxs-lookup"><span data-stu-id="ffba3-106">When a session is paused, the principal database remains available.</span></span> <span data-ttu-id="ffba3-107">La pausa establece el estado de la sesión de creación de reflejo de la base de datos en SUSPENDED y la base de datos reflejada ya no se mantiene al día con la base de datos principal, lo que ocasiona que la base de datos principal se ejecute de una manera expuesta.</span><span class="sxs-lookup"><span data-stu-id="ffba3-107">Pausing sets the state of the mirroring session to SUSPENDED, and the mirror database no longer keeps up with the principal database, causing the principal database to run exposed.</span></span>  
  
 <span data-ttu-id="ffba3-108">Se recomienda que reanude una sesión en pausa rápidamente, porque siempre que la sesión de creación de reflejo de la base de datos permanezca en pausa, no se puede truncar el registro de transacciones.</span><span class="sxs-lookup"><span data-stu-id="ffba3-108">We recommend that you resume a paused session quickly, because as long as a database mirroring session remains paused, the transaction log cannot be truncated.</span></span> <span data-ttu-id="ffba3-109">Por tanto, si se realiza una pausa demasiado larga en la sesión de creación de reflejo de la base de datos, se llena el registro de transacciones, haciendo que la base de datos no esté disponible.</span><span class="sxs-lookup"><span data-stu-id="ffba3-109">Therefore, if a database mirroring session is paused for too long, the transaction log fills up, making the database unavailable.</span></span> <span data-ttu-id="ffba3-110">Para obtener una explicación de por qué ocurre esto, vea "Cómo afectan la pausa y la reanudación al truncamiento del registro" a continuación.</span><span class="sxs-lookup"><span data-stu-id="ffba3-110">For an explanation of why this happens, see "How Pausing and Resuming Affect Log Truncation," later in this topic.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="ffba3-111">Después de un servicio forzado, cuando el servidor principal original se conecta de nuevo se suspende la creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="ffba3-111">Following a forced service, when the original principal server reconnects mirroring is suspended.</span></span> <span data-ttu-id="ffba3-112">Reanudar la creación de reflejo en esta situación puede dar lugar a una pérdida de datos en el servidor principal original.</span><span class="sxs-lookup"><span data-stu-id="ffba3-112">Resuming mirroring in this situation could possibly cause data loss on the original principal server.</span></span> <span data-ttu-id="ffba3-113">Para obtener información acerca de la administración de la posible pérdida de datos, vea [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span><span class="sxs-lookup"><span data-stu-id="ffba3-113">For information about managing the potential data loss, see [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span></span>  
  
 <span data-ttu-id="ffba3-114">**En este tema:**</span><span class="sxs-lookup"><span data-stu-id="ffba3-114">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="ffba3-115">Cómo afectan la pausa y la reanudación al truncamiento del registro</span><span class="sxs-lookup"><span data-stu-id="ffba3-115">How Pausing and Resuming Affect Log Truncation</span></span>](#EffectOnLogTrunc)  
  
-   [<span data-ttu-id="ffba3-116">Evitar un registro de transacciones lleno</span><span class="sxs-lookup"><span data-stu-id="ffba3-116">Avoid a Full Transaction Log</span></span>](#AvoidFullLog)  
  
-   [<span data-ttu-id="ffba3-117">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="ffba3-117">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="how-pausing-and-resuming-affect-log-truncation"></a><a name="EffectOnLogTrunc"></a> <span data-ttu-id="ffba3-118">Cómo afectan la pausa y la reanudación al truncamiento del registro</span><span class="sxs-lookup"><span data-stu-id="ffba3-118">How Pausing and Resuming Affect Log Truncation</span></span>  
 <span data-ttu-id="ffba3-119">Normalmente, cuando se lleva a cabo un punto de comprobación automático en una base de datos, su registro de transacciones se trunca en dicho punto de comprobación después de la siguiente copia de seguridad del registro.</span><span class="sxs-lookup"><span data-stu-id="ffba3-119">Normally, when an automatic checkpoint is performed on a database, its transaction log is truncated to that checkpoint after the next log backup.</span></span> <span data-ttu-id="ffba3-120">Mientras que una sesión de creación de reflejo de la base de datos permanece en pausa, todos las entradas de registro actuales permanecen activas porque el servidor principal está esperando para enviarlos al servidor reflejado.</span><span class="sxs-lookup"><span data-stu-id="ffba3-120">While a database mirroring session remains paused, all of the current log records remain active because the principal server is waiting to send them to the mirror server.</span></span> <span data-ttu-id="ffba3-121">Las entradas de registro no enviadas se acumulan en el registro de transacciones de la base de datos principal hasta que se reanuda la sesión y el servidor principal ha enviado las entradas de registro al servidor reflejado.</span><span class="sxs-lookup"><span data-stu-id="ffba3-121">The unsent log records accumulate in the transaction log of the principal database until the session resumes and the principal server has sent the log records to the mirror server.</span></span>  
  
 <span data-ttu-id="ffba3-122">Cuando se reanuda la sesión, el servidor principal comienza a enviar inmediatamente las entradas de registro acumuladas al servidor reflejado.</span><span class="sxs-lookup"><span data-stu-id="ffba3-122">When the session is resumed, the principal server immediately begins sending the accumulated log records to the mirror server.</span></span> <span data-ttu-id="ffba3-123">Después de que el servidor reflejado confirma que ha puesto en cola la entrada de registro correspondiente al punto de comprobación automático más antiguo, el servidor principal trunca el registro de la base de datos principal en dicho punto de comprobación.</span><span class="sxs-lookup"><span data-stu-id="ffba3-123">After the mirror server confirms that it has queued the log record corresponding to the oldest automatic checkpoint, the principal server truncates the log of the principal database to that checkpoint.</span></span> <span data-ttu-id="ffba3-124">El servidor reflejado trunca la cola rehecha en la misma entrada de registro.</span><span class="sxs-lookup"><span data-stu-id="ffba3-124">The mirror server truncates the redo queue at the same log record.</span></span> <span data-ttu-id="ffba3-125">Conforme este proceso se repite por cada punto de comprobación sucesivo, el registro se trunca por etapas, en cada punto de comprobación.</span><span class="sxs-lookup"><span data-stu-id="ffba3-125">As this process is repeated for each successive checkpoint, the log is truncated in stages, checkpoint by checkpoint.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ffba3-126">Para obtener más información sobre los puntos de comprobación y el truncamiento del registro, vea [Puntos de comprobación de base de datos &#40;SQL Server&#41;](../../relational-databases/logs/database-checkpoints-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="ffba3-126">For more information about the checkpoints and log truncation, see [Database Checkpoints &#40;SQL Server&#41;](../../relational-databases/logs/database-checkpoints-sql-server.md).</span></span>  
  
##  <a name="avoid-a-full-transaction-log"></a><a name="AvoidFullLog"></a> <span data-ttu-id="ffba3-127">Evitar un registro de transacciones lleno</span><span class="sxs-lookup"><span data-stu-id="ffba3-127">Avoid a Full Transaction Log</span></span>  
 <span data-ttu-id="ffba3-128">Si el registro se llena (bien porque alcanza su tamaño máximo o porque la instancia del servidor se queda sin espacio), la base de datos no puede realizar más actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="ffba3-128">If the log fills up (either because it reaches its maximum size or the server instance runs out of space), the database cannot perform any more updates.</span></span> <span data-ttu-id="ffba3-129">Hay dos alternativas para evitar este problema:</span><span class="sxs-lookup"><span data-stu-id="ffba3-129">To avoid this problem, you have two alternatives:</span></span>  
  
-   <span data-ttu-id="ffba3-130">Reanudar la sesión de creación de reflejo de la base de datos antes de que se llene el registro o agregar más espacio al registro.</span><span class="sxs-lookup"><span data-stu-id="ffba3-130">Resume the database mirroring session before the log fills up, or add more log space.</span></span> <span data-ttu-id="ffba3-131">Reanudar la creación de reflejo de la base de datos permite al servidor principal enviar su registro activo acumulado al servidor reflejado y aplicar el estado SYNCHRONIZING a la base de datos reflejada.</span><span class="sxs-lookup"><span data-stu-id="ffba3-131">Resuming database mirroring lets the principal server send its accumulated active log to the mirror server and puts the mirror database in the SYNCHRONIZING state.</span></span> <span data-ttu-id="ffba3-132">A continuación, el servidor reflejado puede reforzar el registro en el disco y comenzar a rehacerlo.</span><span class="sxs-lookup"><span data-stu-id="ffba3-132">The mirror server can then harden the log to disk and start to redo it.</span></span>  
  
-   <span data-ttu-id="ffba3-133">Detener la sesión de creación de reflejo de la base de datos quitando la creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="ffba3-133">Stop the database mirroring session by removing mirroring.</span></span>  
  
     <span data-ttu-id="ffba3-134">A diferencia de la pausa de una sesión, al quitar la creación de reflejo se elimina toda la información de la sesión de creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="ffba3-134">Unlike pausing a session, removing mirroring drops all information about the mirroring session.</span></span> <span data-ttu-id="ffba3-135">Cada instancia de servidor asociado conserva su propia copia de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="ffba3-135">Each partner server instance retains its own copy of the database.</span></span> <span data-ttu-id="ffba3-136">Si se recupera la copia reflejada anterior, será diferente de la copia principal anterior y estará por detrás en la cantidad de tiempo transcurrido desde que se detuvo la sesión.</span><span class="sxs-lookup"><span data-stu-id="ffba3-136">If the former mirror copy is recovered, it will have diverged from the former principal copy and be behind by the amount of time that has elapsed since the session was paused.</span></span> <span data-ttu-id="ffba3-137">Para obtener más información, vea [Quitar la creación de reflejo de la base de datos &#40;SQL Server&#41;](database-mirroring-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="ffba3-137">For more information, see [Removing Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="ffba3-138">Tareas relacionadas</span><span class="sxs-lookup"><span data-stu-id="ffba3-138">Related Tasks</span></span>  
 <span data-ttu-id="ffba3-139">**Para pausar o reanudar la creación de reflejo de la base de datos**</span><span class="sxs-lookup"><span data-stu-id="ffba3-139">**To pause or resume database mirroring**</span></span>  
  
-   [<span data-ttu-id="ffba3-140">Pausar o reanudar una sesión de creación de reflejo de la base de datos &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="ffba3-140">Pause or Resume a Database Mirroring Session &#40;SQL Server&#41;</span></span>](pause-or-resume-a-database-mirroring-session-sql-server.md)  
  
 <span data-ttu-id="ffba3-141">**Para detener la creación de reflejo de la base de datos**</span><span class="sxs-lookup"><span data-stu-id="ffba3-141">**To stop database mirroring**</span></span>  
  
-   [<span data-ttu-id="ffba3-142">Quitar la creación de reflejo de la base de datos &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="ffba3-142">Remove Database Mirroring &#40;SQL Server&#41;</span></span>](remove-database-mirroring-sql-server.md)  
  
## <a name="see-also"></a><span data-ttu-id="ffba3-143">Consulte también</span><span class="sxs-lookup"><span data-stu-id="ffba3-143">See Also</span></span>  
 <span data-ttu-id="ffba3-144">[ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="ffba3-144">[ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql) </span></span>  
 <span data-ttu-id="ffba3-145">[Creación de reflejo de la base de datos &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="ffba3-145">[Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="ffba3-146">Quitar la creación de reflejo de la base de datos &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="ffba3-146">Removing Database Mirroring &#40;SQL Server&#41;</span></span>](database-mirroring-sql-server.md)  
  
  
