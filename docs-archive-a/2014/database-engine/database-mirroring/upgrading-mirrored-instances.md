---
title: Minimizar el tiempo de inactividad de las bases de datos reflejadas al actualizar instancias de servidor | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- upgrading SQL Server, rolling upgrade of mirrored databases
- database mirroring [SQL Server], upgrading system
- rolling upgrades [SQL Server]
ms.assetid: 0e73bd23-497d-42f1-9e81-8d5314bcd597
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 0a343e6b9e93aa1910c82f436f3a50daf00d57bc
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87671681"
---
# <a name="minimize-downtime-for-mirrored-databases-when-upgrading-server-instances"></a><span data-ttu-id="d32de-102">Minimizar el tiempo de inactividad de las bases de datos reflejadas al actualizar instancias de servidor</span><span class="sxs-lookup"><span data-stu-id="d32de-102">Minimize Downtime for Mirrored Databases When Upgrading Server Instances</span></span>
  <span data-ttu-id="d32de-103">Al actualizar instancias de servidor a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] , puede reducir el tiempo de inactividad de cada base de datos reflejada a una sola conmutación por error manual realizando una actualización secuencial, denominada *actualización gradual*.</span><span class="sxs-lookup"><span data-stu-id="d32de-103">When upgrading server instances to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you can reduce downtime for each mirrored database to only a single manual failover by performing a sequential upgrade, known as a *rolling upgrade*.</span></span> <span data-ttu-id="d32de-104">Una actualización gradual es un proceso de varias etapas que, en su forma más simple, implica la actualización de la instancia de servidor que está actuando actualmente como servidor reflejado en una sesión de creación de reflejo, la conmutación por error manual de la base de datos reflejada, la actualización del servidor principal anterior y la reanudación de la creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d32de-104">A rolling upgrade is a multi-stage process that in its simplest form involves upgrading the server instance that is currently acting as the mirror server in a mirroring session, then manually failing over the mirrored database, upgrading the former principal server, and resuming mirroring.</span></span> <span data-ttu-id="d32de-105">En la práctica, el proceso exacto dependerá del modo de funcionamiento y del número y diseño de la sesión de creación de reflejo que se ejecute en las instancias de servidor que va a actualizar.</span><span class="sxs-lookup"><span data-stu-id="d32de-105">In practice, the exact process will depend on the operating mode and the number and layout of mirroring session running on the server instances that you are upgrading.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d32de-106">Para obtener información acerca de la realización de una actualización gradual para instalar un Service Pack o revisión, consulte [instalación de un Service Pack en un sistema con un tiempo de inactividad mínimo para bases de datos reflejadas](../install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases.md).</span><span class="sxs-lookup"><span data-stu-id="d32de-106">For information about performing a rolling upgrade to install a service pack or hotfix, see [Install a Service Pack on a System with Minimal Downtime for Mirrored Databases](../install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases.md).</span></span>  
  
 <span data-ttu-id="d32de-107">**Preparación recomendada (prácticas recomendadas)**</span><span class="sxs-lookup"><span data-stu-id="d32de-107">**Recommended Preparation (Best Practices)**</span></span>  
  
 <span data-ttu-id="d32de-108">Antes de iniciar una actualización gradual, es recomendable que:</span><span class="sxs-lookup"><span data-stu-id="d32de-108">Before starting a rolling upgrade, we recommend that you:</span></span>  
  
1.  <span data-ttu-id="d32de-109">Realice una conmutación por error manual de prueba en al menos una de las sesiones de creación de reflejo:</span><span class="sxs-lookup"><span data-stu-id="d32de-109">Perform a practice manual failover on at least one of your mirroring sessions:</span></span>  
  
    -   [<span data-ttu-id="d32de-110">Realizar manualmente la conmutación por error de una sesión de creación de reflejo de la base de datos &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="d32de-110">Manually Fail Over a Database Mirroring Session &#40;SQL Server Management Studio&#41;</span></span>](manually-fail-over-a-database-mirroring-session-sql-server-management-studio.md)  
  
    -   <span data-ttu-id="d32de-111">[Realizar una conmutación por error manualmente de una sesión de creación de reflejo de la base de datos &#40;Transact-SQL&#41;](manually-fail-over-a-database-mirroring-session-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="d32de-111">[Manually Fail Over a Database Mirroring Session &#40;Transact-SQL&#41;](manually-fail-over-a-database-mirroring-session-transact-sql.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d32de-112">Para obtener más información sobre el funcionamiento de la conmutación por error manual, vea [Conmutación de roles durante una sesión de creación de reflejo de la base de datos &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d32de-112">For information about how manual failover works, see [Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span></span>  
  
2.  <span data-ttu-id="d32de-113">Proteja los datos:</span><span class="sxs-lookup"><span data-stu-id="d32de-113">Protect your data:</span></span>  
  
    1.  <span data-ttu-id="d32de-114">Realice una copia de seguridad completa de cada base de datos principal:</span><span class="sxs-lookup"><span data-stu-id="d32de-114">Perform a full database backup on every principal database:</span></span>  
  
         <span data-ttu-id="d32de-115">[Cree una copia de seguridad completa de base de datos &#40;SQL Server&#41;](../../relational-databases/backup-restore/create-a-full-database-backup-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d32de-115">[Create a Full Database Backup &#40;SQL Server&#41;](../../relational-databases/backup-restore/create-a-full-database-backup-sql-server.md).</span></span>  
  
    2.  <span data-ttu-id="d32de-116">Ejecute el comando [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) en cada base de datos principal.</span><span class="sxs-lookup"><span data-stu-id="d32de-116">Run the [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) command on every principal database.</span></span>  
  
 <span data-ttu-id="d32de-117">**Etapas de una actualización gradual**</span><span class="sxs-lookup"><span data-stu-id="d32de-117">**Stages of a Rolling Upgrade**</span></span>  
  
 <span data-ttu-id="d32de-118">Los pasos específicos de una actualización gradual dependen del modo de funcionamiento de la configuración de creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d32de-118">The specific steps of a rolling upgrade depend on the operating mode of the mirroring configuration.</span></span> <span data-ttu-id="d32de-119">No obstante, las etapas básicas son las mismas.</span><span class="sxs-lookup"><span data-stu-id="d32de-119">However, the basic stages are the same.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d32de-120">Para obtener información sobre los modos de funcionamiento, vea [Modos de funcionamiento de la creación de reflejo de la base de datos](database-mirroring-operating-modes.md).</span><span class="sxs-lookup"><span data-stu-id="d32de-120">For information about the operating modes, see [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span></span>  
  
 <span data-ttu-id="d32de-121">La ilustración siguiente es un diagrama de flujo en el que se muestran las etapas básicas de una actualización gradual para cada modo de funcionamiento.</span><span class="sxs-lookup"><span data-stu-id="d32de-121">The following illustration is a flowchart that shows the basic stages of a rolling upgrade for each operating mode.</span></span> <span data-ttu-id="d32de-122">Los procedimientos correspondientes se describen después de la ilustración.</span><span class="sxs-lookup"><span data-stu-id="d32de-122">The corresponding procedures are described after the illustration.</span></span>  
  
 <span data-ttu-id="d32de-123">![Diagrama de flujo que muestra los pasos de una actualización gradual](../media/dbm-rolling-upgrade.gif "Diagrama de flujo que muestra los pasos de una actualización gradual")</span><span class="sxs-lookup"><span data-stu-id="d32de-123">![Flowchart showing steps of a rolling upgrade](../media/dbm-rolling-upgrade.gif "Flowchart showing steps of a rolling upgrade")</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="d32de-124">Una instancia del servidor podría estar realizando roles de creación de reflejo distintos (servidor principal, servidor reflejado o testigo) en sesiones de creación de reflejo simultáneas.</span><span class="sxs-lookup"><span data-stu-id="d32de-124">A server instance might be performing different mirroring roles (principal server, mirror server, or witness) in concurrent mirroring sessions.</span></span> <span data-ttu-id="d32de-125">En ese caso, tendrá que adaptar el proceso básico de actualización gradual a la función.</span><span class="sxs-lookup"><span data-stu-id="d32de-125">In this case, you will have to adapt the basic rolling upgrade process accordingly.</span></span> <span data-ttu-id="d32de-126">Para obtener más información, vea [Conmutación de roles durante una sesión de creación de reflejo de la base de datos &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d32de-126">For more information, see [Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span></span>  
  
### <a name="to-change-a-session-from-high-performance-mode-to-high-safety-mode"></a><span data-ttu-id="d32de-127">Para cambiar una sesión del modo de alto rendimiento al modo de alta seguridad</span><span class="sxs-lookup"><span data-stu-id="d32de-127">To change a session from high-performance mode to high-safety mode</span></span>  
  
1.  <span data-ttu-id="d32de-128">Si una sesión de creación de reflejo se está ejecutando en modo de alto rendimiento, antes de realizar una actualización gradual, cambie al modo de seguridad alta sin conmutación automática por error.</span><span class="sxs-lookup"><span data-stu-id="d32de-128">If a mirroring session is running in high-performance mode, before you perform a rolling upgrade, change the operating mode to high safety without automatic failover.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="d32de-129">Si el servidor reflejado está geográficamente distante del servidor principal, puede no ser conveniente realizar una actualización gradual.</span><span class="sxs-lookup"><span data-stu-id="d32de-129">If the mirror server is geographically distant from the principal server, a rolling upgrade might be inappropriate.</span></span>  
  
    -   <span data-ttu-id="d32de-130">En [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]: cambie la opción **Modo de funcionamiento** a **Seguridad alta sin conmutación automática por error (sincrónico)** mediante la página [Creación de reflejo](../../relational-databases/databases/database-properties-mirroring-page.md) del cuadro de diálogo **Propiedades de la base de datos**.</span><span class="sxs-lookup"><span data-stu-id="d32de-130">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]: Change the **Operating mode** option to **High safety without automatic failover (synchronous)** by using the [Mirroring Page](../../relational-databases/databases/database-properties-mirroring-page.md) of the **Database Properties** dialog box.</span></span> <span data-ttu-id="d32de-131">Para obtener información sobre cómo obtener acceso a esta página, vea [Iniciar el Asistente para la configuración de seguridad de la creación de reflejo de la base de datos &#40;SQL Server Management Studio&#41;](start-the-configuring-database-mirroring-security-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="d32de-131">For information about how to access this page, see [Start the Configuring Database Mirroring Security Wizard &#40;SQL Server Management Studio&#41;](start-the-configuring-database-mirroring-security-wizard.md).</span></span>  
  
    -   <span data-ttu-id="d32de-132">En [!INCLUDE[tsql](../../includes/tsql-md.md)]: establezca la seguridad de transacciones en FULL.</span><span class="sxs-lookup"><span data-stu-id="d32de-132">In [!INCLUDE[tsql](../../includes/tsql-md.md)]: Set transaction safety to FULL.</span></span> <span data-ttu-id="d32de-133">Para obtener más información, vea [Cambiar la seguridad de las transacciones en una sesión de creación de reflejo de la base de datos &#40;Transact-SQL&#41;](change-transaction-safety-in-a-database-mirroring-session-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="d32de-133">For more information, see [Change Transaction Safety in a Database Mirroring Session &#40;Transact-SQL&#41;](change-transaction-safety-in-a-database-mirroring-session-transact-sql.md)</span></span>  
  
### <a name="to-remove-a-witness-from-a-session"></a><span data-ttu-id="d32de-134">Para quitar un testigo de una sesión</span><span class="sxs-lookup"><span data-stu-id="d32de-134">To remove a witness from a session</span></span>  
  
1.  <span data-ttu-id="d32de-135">Si una sesión de creación de reflejo conlleva un testigo, recomendamos que lo quite antes de realizar una actualización gradual.</span><span class="sxs-lookup"><span data-stu-id="d32de-135">If a mirroring session involves a witness, we recommend that you remove the witness before you perform a rolling upgrade.</span></span> <span data-ttu-id="d32de-136">Si no lo hace, al actualizar la instancia del servidor reflejado, la disponibilidad de la base de datos depende del testigo que sigue estando conectado a la instancia del servidor principal.</span><span class="sxs-lookup"><span data-stu-id="d32de-136">Otherwise, when the mirror server instance is being upgraded, database availability depends on the witness that remains connected to the principal server instance.</span></span> <span data-ttu-id="d32de-137">Después de quitar un testigo, puede actualizarlo en cualquier momento durante el proceso de actualización gradual sin aumentar el tiempo de inactividad de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d32de-137">After you remove a witness, you can upgrade it at any time during the rolling upgrade process without risking database downtime.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d32de-138">Para más información, vea [Cuórum: cómo un testigo afecta a la disponibilidad de la base de datos &#40;creación de reflejo de la base de datos&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="d32de-138">For more information, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
    -   [<span data-ttu-id="d32de-139">Quitar el testigo de una sesión de creación de reflejo de la base de datos &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="d32de-139">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
### <a name="to-perform-the-rolling-upgrade"></a><span data-ttu-id="d32de-140">Para realizar la actualización gradual</span><span class="sxs-lookup"><span data-stu-id="d32de-140">To perform the rolling upgrade</span></span>  
  
1.  <span data-ttu-id="d32de-141">Para reducir al mínimo el tiempo de inactividad, recomendamos que inicie la actualización gradual actualizando todos los asociados de creación de reflejo que sean actualmente el servidor reflejado en todas sus sesiones de creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d32de-141">To minimize downtime, we recommend the following: Start the rolling upgrade by updating any mirroring partner that is currently the mirror server in all its mirroring sessions.</span></span> <span data-ttu-id="d32de-142">Podría tener que actualizar varias instancias del servidor en este momento.</span><span class="sxs-lookup"><span data-stu-id="d32de-142">You might have to update multiple server instances at this point.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d32de-143">Un testigo se puede actualizar en cualquier momento del proceso de actualización gradual.</span><span class="sxs-lookup"><span data-stu-id="d32de-143">A witness can be upgraded at any point in the rolling upgrade process.</span></span> <span data-ttu-id="d32de-144">Por ejemplo, si una instancia del servidor es un servidor reflejado en la Sesión 1 y es un testigo en la Sesión 2, puede actualizar ahora la instancia del servidor.</span><span class="sxs-lookup"><span data-stu-id="d32de-144">For example, if a server instance is a mirror server in Session 1 and is a witness in Session 2, you can upgrade the server instance now.</span></span>  
  
     <span data-ttu-id="d32de-145">La instancia del servidor que se debe actualizar en primer lugar depende de la configuración actual de las sesiones de creación de reflejo, como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="d32de-145">The server instance to upgrade first depends on the current configuration of your mirroring sessions, as follows:</span></span>  
  
    -   <span data-ttu-id="d32de-146">Si cualquier instancia del servidor ya es el servidor reflejado en todas sus sesiones de creación de reflejo, actualice la instancia del servidor a la nueva versión.</span><span class="sxs-lookup"><span data-stu-id="d32de-146">If any server instance is already the mirror server in all its mirroring sessions, upgrade the server instance to the new version.</span></span>  
  
    -   <span data-ttu-id="d32de-147">Si todas las instancias del servidor son actualmente el servidor principal en cualquier sesión de creación de reflejo, seleccione una instancia del servidor para actualizarla primero.</span><span class="sxs-lookup"><span data-stu-id="d32de-147">If all your server instances are currently the principal server in any mirroring sessions, select one server instance to upgrade first.</span></span> <span data-ttu-id="d32de-148">A continuación, conmute por error manualmente cada una de sus bases de datos principales y actualice esa instancia del servidor.</span><span class="sxs-lookup"><span data-stu-id="d32de-148">Then, manually fail over each of its principal databases and upgrade that server instance.</span></span>  
  
     <span data-ttu-id="d32de-149">Una vez que se ha actualizado, una instancia del servidor vuelve a unirse automáticamente a cada una de sus sesiones de creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d32de-149">After being upgraded, a server instance automatically rejoins each of its mirroring sessions.</span></span>  
  
2.  <span data-ttu-id="d32de-150">En cada sesión de creación de reflejo cuya instancia del servidor reflejado se acaba de actualizar, espere a que la sesión se sincronice.</span><span class="sxs-lookup"><span data-stu-id="d32de-150">For each mirroring session whose mirror server instance has just been upgraded, wait for the session to synchronize.</span></span> <span data-ttu-id="d32de-151">A continuación, conéctese a la instancia del servidor principal y realice una conmutación manual por error de la sesión.</span><span class="sxs-lookup"><span data-stu-id="d32de-151">Then, connect to the principal server instance, and manually fail over the session.</span></span> <span data-ttu-id="d32de-152">Tras la conmutación por error, la instancia del servidor actualizada se convierte en el servidor principal para esa sesión y el servidor principal anterior se convierte en el servidor reflejado.</span><span class="sxs-lookup"><span data-stu-id="d32de-152">On failover, the upgraded server instance becomes the principal server for that session, and the former principal server becomes the mirror server.</span></span>  
  
     <span data-ttu-id="d32de-153">El objetivo de este paso es que otra instancia del servidor se convierta en el servidor reflejado en cada sesión de creación de reflejo en la que es un asociado.</span><span class="sxs-lookup"><span data-stu-id="d32de-153">The goal of this step is for another server instance to become the mirror server in every mirroring session in which it is a partner.</span></span>  
  
     <span data-ttu-id="d32de-154">**Restricciones después de la conmutación por error a una instancia del servidor actualizada.**</span><span class="sxs-lookup"><span data-stu-id="d32de-154">**Restrictions after you failover to an upgraded server instance.**</span></span>  
  
     <span data-ttu-id="d32de-155">Después de la conmutación por error de una instancia de servidor anterior a una instancia de servidor de [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] , la sesión de la base de datos se suspende.</span><span class="sxs-lookup"><span data-stu-id="d32de-155">After failing over from an earlier server instance to a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] server instance, the database session is suspended.</span></span> <span data-ttu-id="d32de-156">No se puede reanudar hasta que se haya actualizado el otro asociado.</span><span class="sxs-lookup"><span data-stu-id="d32de-156">It cannot be resumed until the other partner has been upgraded.</span></span> <span data-ttu-id="d32de-157">Sin embargo, el servidor principal sigue aceptando conexiones, y permitiendo acceso y modificaciones a datos en la base de datos principal.</span><span class="sxs-lookup"><span data-stu-id="d32de-157">However, the principal server is still accepting connections and allowing data access and modifications on the principal database.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d32de-158">El establecimiento de una nueva sesión de creación de reflejo requiere que todas las instancias del servidor se ejecuten en la misma versión de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d32de-158">Establishing a new mirroring session requires that the server instances all be running the same version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
3.  <span data-ttu-id="d32de-159">Después de la conmutación por error, se recomienda ejecutar el comando [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) en la base de datos principal.</span><span class="sxs-lookup"><span data-stu-id="d32de-159">After you fail over, we recommend that you run the [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) command on theprincipal database.</span></span>  
  
4.  <span data-ttu-id="d32de-160">Actualice todas las instancias del servidor que es ahora el servidor reflejado en todas las sesiones de creación de reflejo en las que sea asociado.</span><span class="sxs-lookup"><span data-stu-id="d32de-160">Upgrade each server instance that is now the mirror server in all mirroring sessions in which it is a partner.</span></span> <span data-ttu-id="d32de-161">Podría tener que actualizar varios servidores en este momento.</span><span class="sxs-lookup"><span data-stu-id="d32de-161">You might have to update multiple servers at this point.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="d32de-162">En una configuración de creación de reflejo compleja, alguna instancia de servidor podría seguir siendo el servidor principal original en una o varias sesiones de creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d32de-162">In a complex mirroring configuration, some server instance might still be the original principal server in one or more mirroring sessions.</span></span> <span data-ttu-id="d32de-163">Repita los pasos 2 a 4 para esas instancias de servidor hasta que se actualicen todas las instancias implicadas.</span><span class="sxs-lookup"><span data-stu-id="d32de-163">Repeat steps 2-4 for those server instances until all instances involved are upgraded.</span></span>  
  
5.  <span data-ttu-id="d32de-164">Reanude la sesión de creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d32de-164">Resume the mirroring session.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d32de-165">La conmutación automática por error no funcionará hasta que el testigo se haya actualizado y agregado de nuevo a la sesión de creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d32de-165">Automatic failover will not work until the witness has been upgraded and added back into the mirroring session.</span></span>  
  
6.  <span data-ttu-id="d32de-166">Actualice cualquier instancia de servidor que quede y sea testigo en todas sus sesiones de creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d32de-166">Upgrade any remaining server instance that is the witness in all its mirroring sessions.</span></span> <span data-ttu-id="d32de-167">Cuando un testigo actualizado se vuelva a unir a una sesión de creación de reflejo, la conmutación automática por error vuelve a ser posible.</span><span class="sxs-lookup"><span data-stu-id="d32de-167">After an upgraded witness rejoins a mirroring session, automatic failover becomes possible again.</span></span> <span data-ttu-id="d32de-168">Podría tener que actualizar varios servidores en este momento.</span><span class="sxs-lookup"><span data-stu-id="d32de-168">You might have to update multiple servers at this point.</span></span>  
  
### <a name="to-return-a-session-to-high-performance-mode"></a><span data-ttu-id="d32de-169">Para devolver una sesión al modo de alto rendimiento</span><span class="sxs-lookup"><span data-stu-id="d32de-169">To return a session to high-performance mode</span></span>  
  
1.  <span data-ttu-id="d32de-170">Si lo desea, vuelva al modo de alto rendimiento utilizando uno de los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="d32de-170">Optionally, return to high-performance mode by using one of the following methods:</span></span>  
  
    -   <span data-ttu-id="d32de-171">En [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]: cambie la opción **Modo de funcionamiento** a **Rendimiento alto (asincrónico)** mediante la página [Creación de reflejo](../../relational-databases/databases/database-properties-mirroring-page.md) del cuadro de diálogo **Propiedades de la base de datos**.</span><span class="sxs-lookup"><span data-stu-id="d32de-171">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]: Change the **Operating mode** option to **High performance (asynchronous)** by using the [Mirroring Page](../../relational-databases/databases/database-properties-mirroring-page.md) of the **Database Properties** dialog box.</span></span>  
  
    -   <span data-ttu-id="d32de-172">En [!INCLUDE[tsql](../../includes/tsql-md.md)]: utilice [ALTER DATABASE](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) para desactivar la seguridad de las transacciones.</span><span class="sxs-lookup"><span data-stu-id="d32de-172">In [!INCLUDE[tsql](../../includes/tsql-md.md)]: Use [ALTER DATABASE](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring)to set transaction safety to OFF.</span></span>  
  
### <a name="to-add-a-witness-back-into-a-mirroring-session"></a><span data-ttu-id="d32de-173">Para volver a agregar un testigo a una sesión de creación de reflejo</span><span class="sxs-lookup"><span data-stu-id="d32de-173">To add a witness back into a mirroring session</span></span>  
  
1.  <span data-ttu-id="d32de-174">Si lo desea, en modo de alta seguridad, restablezca el testigo en cada sesión de creación de reflejo.</span><span class="sxs-lookup"><span data-stu-id="d32de-174">Optionally, in high-safety mode, reestablish the witness to each mirroring session.</span></span>  
  
     <span data-ttu-id="d32de-175">**Para devolver un testigo**</span><span class="sxs-lookup"><span data-stu-id="d32de-175">**To return a witness**</span></span>  
  
    -   [<span data-ttu-id="d32de-176">Agregar o reemplazar un testigo de creación de reflejo de la base de datos &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="d32de-176">Add or Replace a Database Mirroring Witness &#40;SQL Server Management Studio&#41;</span></span>](add-or-replace-a-database-mirroring-witness-sql-server-management-studio.md)  
  
    -   [<span data-ttu-id="d32de-177">Agregar un testigo de creación de reflejo de la base de datos mediante la autenticación de Windows &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d32de-177">Add a Database Mirroring Witness Using Windows Authentication &#40;Transact-SQL&#41;</span></span>](add-a-database-mirroring-witness-using-windows-authentication-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="d32de-178">Consulte también</span><span class="sxs-lookup"><span data-stu-id="d32de-178">See Also</span></span>  
 <span data-ttu-id="d32de-179">[Reflejo de la base de datos ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) </span><span class="sxs-lookup"><span data-stu-id="d32de-179">[ALTER DATABASE Database Mirroring &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) </span></span>  
 <span data-ttu-id="d32de-180">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d32de-180">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span></span>  
 <span data-ttu-id="d32de-181">[Ver el estado de una base de datos reflejada &#40;SQL Server Management Studio&#41;](view-the-state-of-a-mirrored-database-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="d32de-181">[View the State of a Mirrored Database &#40;SQL Server Management Studio&#41;](view-the-state-of-a-mirrored-database-sql-server-management-studio.md) </span></span>  
 <span data-ttu-id="d32de-182">[Creación de reflejo de la base de datos &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="d32de-182">[Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 <span data-ttu-id="d32de-183">[Instalar un Service Pack en un sistema con un tiempo de inactividad mínimo para bases de datos reflejadas](../install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases.md) </span><span class="sxs-lookup"><span data-stu-id="d32de-183">[Install a Service Pack on a System with Minimal Downtime for Mirrored Databases](../install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases.md) </span></span>  
 <span data-ttu-id="d32de-184">[Conmutación de roles durante una sesión de creación de reflejo de la base de datos &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="d32de-184">[Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md) </span></span>  
 <span data-ttu-id="d32de-185">[Forzar el servicio en una sesión de creación de reflejo de la base de datos &#40;Transact-SQL&#41;](force-service-in-a-database-mirroring-session-transact-sql.md) </span><span class="sxs-lookup"><span data-stu-id="d32de-185">[Force Service in a Database Mirroring Session &#40;Transact-SQL&#41;](force-service-in-a-database-mirroring-session-transact-sql.md) </span></span>  
 <span data-ttu-id="d32de-186">[Iniciar el Monitor de creación de reflejo de la base de datos &#40;SQL Server Management Studio&#41;](start-database-mirroring-monitor-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="d32de-186">[Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](start-database-mirroring-monitor-sql-server-management-studio.md) </span></span>  
 [<span data-ttu-id="d32de-187">Database Mirroring Operating Modes</span><span class="sxs-lookup"><span data-stu-id="d32de-187">Database Mirroring Operating Modes</span></span>](database-mirroring-operating-modes.md)  
  
  
