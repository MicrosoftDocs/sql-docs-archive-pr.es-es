---
title: Adaptador para la nube para SQL Server | Microsoft Docs
ms.custom: ''
ms.date: 03/09/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- Cloud adapter
- Deploy to Azure
ms.assetid: 82ed0d0f-952d-4d49-aa36-3855a3ca9877
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: d5716435bb1db494bdabeb45ed366c1783926989
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/04/2020
ms.locfileid: "87674358"
---
# <a name="cloud-adapter-for-sql-server"></a><span data-ttu-id="ce84b-102">Adaptador para la nube de SQL Server</span><span class="sxs-lookup"><span data-stu-id="ce84b-102">Cloud Adapter for SQL Server</span></span>
  <span data-ttu-id="ce84b-103">El servicio Adaptador para la nube se crea como parte del [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] aprovisionamiento en una máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="ce84b-103">The Cloud Adapter service is created as part of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] provisioning on an Azure VM.</span></span> <span data-ttu-id="ce84b-104">El servicio Adaptador para la nube genera un certificado SSL autofirmado la primera vez que se ejecuta y, después, se ejecuta como una cuenta de **sistema local** .</span><span class="sxs-lookup"><span data-stu-id="ce84b-104">The Cloud Adapter service generates a self-signed SSL certificate as part of its first run, and then runs as a **Local System** account.</span></span> <span data-ttu-id="ce84b-105">Genera un archivo de configuración que utiliza para configurarse a sí mismo.</span><span class="sxs-lookup"><span data-stu-id="ce84b-105">It generates a configuration file that is used to configure itself.</span></span> <span data-ttu-id="ce84b-106">El adaptador para la nube también crea una regla de Firewall de Windows para permitir las conexiones TCP entrantes en el puerto predeterminado 11435.</span><span class="sxs-lookup"><span data-stu-id="ce84b-106">The Cloud Adapter also creates a Windows Firewall rule to allow its incoming TCP connections at default port 11435.</span></span>  
  
 <span data-ttu-id="ce84b-107">El adaptador para la nube es un servicio sincrónico sin estado que recibe mensajes de la instancia local de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ce84b-107">The Cloud Adapter is a stateless, synchronous service that receives messages from the on-premise instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ce84b-108">Cuando se detiene el servicio del adaptador para la nube, detiene el adaptador para la nube de acceso remoto, desenlaza el certificado SSL y deshabilita la regla de Firewall de Windows.</span><span class="sxs-lookup"><span data-stu-id="ce84b-108">When the Cloud Adapter service is stopped, it stops the remote access Cloud Adapter, unbinds the SSL certificate, and disables the Windows Firewall rule.</span></span>  
  
## <a name="cloud-adapter-requirements"></a><span data-ttu-id="ce84b-109">Requisitos del adaptador para la nube</span><span class="sxs-lookup"><span data-stu-id="ce84b-109">Cloud Adapter Requirements</span></span>  
 <span data-ttu-id="ce84b-110">Tenga en cuenta los siguientes requisitos a la hora de instalar, habilitar y ejecutar el adaptador para la nube de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="ce84b-110">Note the following requirements to install, enable, and run the Cloud Adapter for [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="ce84b-111">El adaptador para la nube es compatible con [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2012 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="ce84b-111">Cloud Adapter is supported with [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2012 and higher.</span></span> <span data-ttu-id="ce84b-112">En [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2012, el adaptador para la nube de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] requiere Objetos de administración de SQL para [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2012.</span><span class="sxs-lookup"><span data-stu-id="ce84b-112">On [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2012, the Cloud Adapter for [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] requires SQL Management Objects for [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2012.</span></span>  
  
-   <span data-ttu-id="ce84b-113">El servicio web del adaptador para la nube se ejecuta como una cuenta **Sistema local** y comprueba las credenciales del cliente antes de ejecutar cualquier tarea.</span><span class="sxs-lookup"><span data-stu-id="ce84b-113">Cloud Adapter web service runs as a **Local System** account and verifies client credentials before executing any task.</span></span> <span data-ttu-id="ce84b-114">Las credenciales proporcionadas por el cliente deben pertenecer a la cuenta de uso que sea miembro del grupo local de **administradores** en el equipo remoto.</span><span class="sxs-lookup"><span data-stu-id="ce84b-114">Credentials supplied by the client must belong to the use account that is a member of the local **Administrators** group on the remote machine.</span></span>  
  
-   <span data-ttu-id="ce84b-115">El adaptador para la nube solo admite la autenticación de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ce84b-115">Cloud Adapter supports only [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Authentication.</span></span>  
  
-   <span data-ttu-id="ce84b-116">El adaptador para la nube utiliza la cuenta de administrador local de VM para ejecutar comandos en el equipo local, no una cuenta sa.</span><span class="sxs-lookup"><span data-stu-id="ce84b-116">Cloud Adapter uses VM local administrator account to execute commands on the local machine, not an sa account.</span></span>  
  
-   <span data-ttu-id="ce84b-117">El adaptador para la nube escucha en TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="ce84b-117">Cloud Adapter listens on TCP/IP.</span></span> <span data-ttu-id="ce84b-118">El puerto predeterminado es 11435.</span><span class="sxs-lookup"><span data-stu-id="ce84b-118">The default port is 11435.</span></span>  
  
-   <span data-ttu-id="ce84b-119">El adaptador para la nube debe tener permisos para crear y modificar reglas de Firewall de Windows.</span><span class="sxs-lookup"><span data-stu-id="ce84b-119">Cloud Adapter must have permissions to create and modify Windows Firewall rules.</span></span>  
  
## <a name="cloud-adapter-configuration-settings"></a><span data-ttu-id="ce84b-120">Valores de configuración del adaptador para la nube</span><span class="sxs-lookup"><span data-stu-id="ce84b-120">Cloud Adapter Configuration Settings</span></span>  
 <span data-ttu-id="ce84b-121">Utilice los detalles de configuración siguientes para modificar la configuración de un adaptador para la nube.</span><span class="sxs-lookup"><span data-stu-id="ce84b-121">Use the following Cloud Adapter configuration details to modify settings for a Cloud Adapter.</span></span>  
  
-   <span data-ttu-id="ce84b-122">**Ruta de acceso predeterminada del archivo de configuración** : C:\Archivos de Programa\microsoft SQL Server\120\Tools\CloudAdapter</span><span class="sxs-lookup"><span data-stu-id="ce84b-122">**Default path for the configuration file** - C:\Program Files\Microsoft SQL Server\120\Tools\CloudAdapter</span></span>\  
  
-   <span data-ttu-id="ce84b-123">**Parámetros del archivo de configuración** -</span><span class="sxs-lookup"><span data-stu-id="ce84b-123">**Configuration file parameters** -</span></span>  
  
    -   \<configuration>  
  
        -   \<appSettings>  
  
            -   \<add key="WebServicePort" value="" />  
  
            -   \<add key="WebServiceCertificate" value="GUID" />  
  
            -   \<add key="ExposeExceptionDetails" value="true" />  
  
        -   \</appSettings>  
  
    -   \</configuration>  
  
-   <span data-ttu-id="ce84b-124">**Detalles del certificado** : el certificado tiene los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="ce84b-124">**Certificate details** - The certificate has the following values:</span></span>  
  
    -   <span data-ttu-id="ce84b-125">Asunto: "CN = CloudAdapter \<VMName> , DC = SQL Server, DC = Microsoft"</span><span class="sxs-lookup"><span data-stu-id="ce84b-125">Subject - "CN=CloudAdapter\<VMName>, DC=SQL Server, DC=Microsoft"</span></span>  
  
    -   <span data-ttu-id="ce84b-126">El certificado solo debe tener un EKU de autenticación de servidor habilitado.</span><span class="sxs-lookup"><span data-stu-id="ce84b-126">The certificate should have only Server Authentication EKU enabled.</span></span>  
  
    -   <span data-ttu-id="ce84b-127">La longitud de la clave del certificado es 2048.</span><span class="sxs-lookup"><span data-stu-id="ce84b-127">The certificate key length is 2048.</span></span>  
  
 <span data-ttu-id="ce84b-128">**Valores del archivo de configuración**:</span><span class="sxs-lookup"><span data-stu-id="ce84b-128">**Configuration file values**:</span></span>  
  
|<span data-ttu-id="ce84b-129">Configuración</span><span class="sxs-lookup"><span data-stu-id="ce84b-129">Setting</span></span>|<span data-ttu-id="ce84b-130">Valores</span><span class="sxs-lookup"><span data-stu-id="ce84b-130">Values</span></span>|<span data-ttu-id="ce84b-131">Valor predeterminado</span><span class="sxs-lookup"><span data-stu-id="ce84b-131">Default</span></span>|<span data-ttu-id="ce84b-132">Comentarios</span><span class="sxs-lookup"><span data-stu-id="ce84b-132">Comments</span></span>|  
|-------------|------------|-------------|--------------|  
|<span data-ttu-id="ce84b-133">WebServicePort</span><span class="sxs-lookup"><span data-stu-id="ce84b-133">WebServicePort</span></span>|<span data-ttu-id="ce84b-134">1-65535</span><span class="sxs-lookup"><span data-stu-id="ce84b-134">1-65535</span></span>|<span data-ttu-id="ce84b-135">11435</span><span class="sxs-lookup"><span data-stu-id="ce84b-135">11435</span></span>|<span data-ttu-id="ce84b-136">Cuando no se especifique, se utilizará 11435.</span><span class="sxs-lookup"><span data-stu-id="ce84b-136">If not specified, use 11435.</span></span>|  
|<span data-ttu-id="ce84b-137">WebServiceCertificate</span><span class="sxs-lookup"><span data-stu-id="ce84b-137">WebServiceCertificate</span></span>|<span data-ttu-id="ce84b-138">Huella digital</span><span class="sxs-lookup"><span data-stu-id="ce84b-138">Thumbprint</span></span>|<span data-ttu-id="ce84b-139">Empty</span><span class="sxs-lookup"><span data-stu-id="ce84b-139">Empty</span></span>|<span data-ttu-id="ce84b-140">Si está vacío, se genera un nuevo certificado autofirmado.</span><span class="sxs-lookup"><span data-stu-id="ce84b-140">If empty, a new self-signed certificate is generated.</span></span>|  
|<span data-ttu-id="ce84b-141">ExposeExceptionDetails</span><span class="sxs-lookup"><span data-stu-id="ce84b-141">ExposeExceptionDetails</span></span>|<span data-ttu-id="ce84b-142">Verdadero/Falso</span><span class="sxs-lookup"><span data-stu-id="ce84b-142">True/False</span></span>|<span data-ttu-id="ce84b-143">False</span><span class="sxs-lookup"><span data-stu-id="ce84b-143">False</span></span>||  
  
## <a name="cloud-adapter-troubleshooting"></a><span data-ttu-id="ce84b-144">Solución de problemas del adaptador para la nube</span><span class="sxs-lookup"><span data-stu-id="ce84b-144">Cloud Adapter Troubleshooting</span></span>  
 <span data-ttu-id="ce84b-145">Use la información siguiente para solucionar problemas del adaptador para la nube de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="ce84b-145">Use the following information to troubleshoot the Cloud Adapter for [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="ce84b-146">**Control de errores y registro** : los errores y los mensajes de estado se escriben en el registro de eventos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ce84b-146">**Error handling and logging** - Errors and status messages are written to the Application Event Log.</span></span>  
  
-   <span data-ttu-id="ce84b-147">**Seguimiento, eventos** : todos los eventos se escriben en el registro de eventos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ce84b-147">**Tracing, Events** - All events are written to the Application Event Log.</span></span>  
  
-   <span data-ttu-id="ce84b-148">**Control, configuración** : Use el archivo de configuración ubicado en: C:\Archivos de Programa\microsoft SQL Server\120\Tools\CloudAdapter \\ .</span><span class="sxs-lookup"><span data-stu-id="ce84b-148">**Control, configuration** - Use the configuration file located in:  C:\Program Files\Microsoft SQL Server\120\Tools\CloudAdapter\\.</span></span>  
  
|<span data-ttu-id="ce84b-149">Error</span><span class="sxs-lookup"><span data-stu-id="ce84b-149">Error</span></span>|<span data-ttu-id="ce84b-150">Id. de error</span><span class="sxs-lookup"><span data-stu-id="ce84b-150">Error ID</span></span>|<span data-ttu-id="ce84b-151">Causa</span><span class="sxs-lookup"><span data-stu-id="ce84b-151">Cause</span></span>|<span data-ttu-id="ce84b-152">Resolución</span><span class="sxs-lookup"><span data-stu-id="ce84b-152">Resolution</span></span>|  
|-----------|--------------|-----------|----------------|  
|<span data-ttu-id="ce84b-153">Excepción al agregar el certificado al almacén de certificados.</span><span class="sxs-lookup"><span data-stu-id="ce84b-153">There was an exception while adding the certificate to the certificate store.</span></span> <span data-ttu-id="ce84b-154">{Texto de la excepción}.</span><span class="sxs-lookup"><span data-stu-id="ce84b-154">{Exception text}.</span></span>|<span data-ttu-id="ce84b-155">45560</span><span class="sxs-lookup"><span data-stu-id="ce84b-155">45560</span></span>|<span data-ttu-id="ce84b-156">Permisos del almacén de certificados de la máquina</span><span class="sxs-lookup"><span data-stu-id="ce84b-156">Machine certificate store permissions</span></span>|<span data-ttu-id="ce84b-157">Asegúrese de que el servicio del adaptador para la nube tenga permisos para agregar certificados al almacén de certificados del equipo.</span><span class="sxs-lookup"><span data-stu-id="ce84b-157">Ensure that the Cloud Adapter service has permissions to add certificates to the machine certificate store.</span></span>|  
|<span data-ttu-id="ce84b-158">Excepción al intentar configurar el enlace SSL para el puerto {número de puerto} y el certificado {huella digital}.</span><span class="sxs-lookup"><span data-stu-id="ce84b-158">There was an exception while trying to configure the SSL binding for port {Port number} and certificate {Thumbprint}.</span></span> <span data-ttu-id="ce84b-159">{Excepción}.</span><span class="sxs-lookup"><span data-stu-id="ce84b-159">{Exception}.</span></span>|<span data-ttu-id="ce84b-160">45561</span><span class="sxs-lookup"><span data-stu-id="ce84b-160">45561</span></span>|<span data-ttu-id="ce84b-161">Otra aplicación ya ha utilizado el puerto o enlazó un certificado a él.</span><span class="sxs-lookup"><span data-stu-id="ce84b-161">Another application has already used the port or bound a certificate to it.</span></span>|<span data-ttu-id="ce84b-162">Quite los enlaces existentes o cambie el puerto del adaptador para la nube en el archivo de configuración.</span><span class="sxs-lookup"><span data-stu-id="ce84b-162">Remove existing bindings or change Cloud Adapter port in the configuration file.</span></span>|  
|<span data-ttu-id="ce84b-163">No se encontró el certificado SSL [{huella digital}] en el almacén de certificados.</span><span class="sxs-lookup"><span data-stu-id="ce84b-163">Failed to find SSL certificate [{Thumbprint}] in the certificate store.</span></span>|<span data-ttu-id="ce84b-164">45564</span><span class="sxs-lookup"><span data-stu-id="ce84b-164">45564</span></span>|<span data-ttu-id="ce84b-165">La huella digital del certificado está en el archivo de configuración, pero el almacén de certificados personal para el servicio no contiene el certificado.</span><span class="sxs-lookup"><span data-stu-id="ce84b-165">Certificate thumbprint is in the configuration file, but personal certificate store for the service does not contain certificate.</span></span><br /><br /> <span data-ttu-id="ce84b-166">Permisos insuficientes.</span><span class="sxs-lookup"><span data-stu-id="ce84b-166">Insufficient permissions.</span></span>|<span data-ttu-id="ce84b-167">Asegúrese de que el certificado está en el almacén de certificados personal para el servicio.</span><span class="sxs-lookup"><span data-stu-id="ce84b-167">Make sure the certificate is in the personal certificate store for the service.</span></span><br /><br /> <span data-ttu-id="ce84b-168">Asegúrese de que el servicio tiene los permisos correctos para el almacén.</span><span class="sxs-lookup"><span data-stu-id="ce84b-168">Make sure the service has correct permissions for the store.</span></span>|  
|<span data-ttu-id="ce84b-169">No se pudo iniciar el servicio web.</span><span class="sxs-lookup"><span data-stu-id="ce84b-169">Failed to start the web service.</span></span> <span data-ttu-id="ce84b-170">{Texto de la excepción}.</span><span class="sxs-lookup"><span data-stu-id="ce84b-170">{Exception text}.</span></span>|<span data-ttu-id="ce84b-171">45570</span><span class="sxs-lookup"><span data-stu-id="ce84b-171">45570</span></span>|<span data-ttu-id="ce84b-172">Descrito en la excepción.</span><span class="sxs-lookup"><span data-stu-id="ce84b-172">Described in the exception.</span></span>|<span data-ttu-id="ce84b-173">Habilite ExposeExceptionDetails y utilice la información ampliada de la excepción.</span><span class="sxs-lookup"><span data-stu-id="ce84b-173">Enable ExposeExceptionDetails and use extended information from the exception.</span></span>|  
|<span data-ttu-id="ce84b-174">El certificado [{huella digital}] ha expirado.</span><span class="sxs-lookup"><span data-stu-id="ce84b-174">Certificate [{Thumbprint}] has expired.</span></span>|<span data-ttu-id="ce84b-175">45565</span><span class="sxs-lookup"><span data-stu-id="ce84b-175">45565</span></span>|<span data-ttu-id="ce84b-176">El archivo de configuración hace referencia a un certificado expirado.</span><span class="sxs-lookup"><span data-stu-id="ce84b-176">Expired certificate referenced from the configuration file.</span></span>|<span data-ttu-id="ce84b-177">Agregue un certificado válido y actualice el archivo de configuración con su huella digital.</span><span class="sxs-lookup"><span data-stu-id="ce84b-177">Add a valid certificate and update the configuration file with its thumbprint.</span></span>|  
|<span data-ttu-id="ce84b-178">Error del servicio Web: {0} .</span><span class="sxs-lookup"><span data-stu-id="ce84b-178">Web service error: {0}.</span></span>|<span data-ttu-id="ce84b-179">45571</span><span class="sxs-lookup"><span data-stu-id="ce84b-179">45571</span></span>|<span data-ttu-id="ce84b-180">Descrito en la excepción.</span><span class="sxs-lookup"><span data-stu-id="ce84b-180">Described in the exception.</span></span>|<span data-ttu-id="ce84b-181">Habilite ExposeExceptionDetails y utilice la información ampliada de la excepción.</span><span class="sxs-lookup"><span data-stu-id="ce84b-181">Enable ExposeExceptionDetails and use extended information from the exception.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="ce84b-182">Consulte también</span><span class="sxs-lookup"><span data-stu-id="ce84b-182">See Also</span></span>  
 [<span data-ttu-id="ce84b-183">Implementar una base de datos de SQL Server en una máquina virtual de Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="ce84b-183">Deploy a SQL Server Database to a Microsoft Azure Virtual Machine</span></span>](../relational-databases/databases/deploy-a-sql-server-database-to-a-microsoft-azure-virtual-machine.md)  
  
  
